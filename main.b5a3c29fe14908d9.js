"use strict";(self.webpackChunknfe_app=self.webpackChunknfe_app||[]).push([[179],{950:(d0,Vv,mt)=>{var Hd={};mt.r(Hd),mt.d(Hd,{JsonPatchError:()=>Pn,_areEquals:()=>X_,applyOperation:()=>If,applyPatch:()=>OC,applyReducer:()=>NIe,deepClone:()=>RIe,getValueByPointer:()=>kC,validate:()=>$W,validator:()=>RC});var js={};mt.r(js),mt.d(js,{compare:()=>HIe,generate:()=>Jk,observe:()=>UIe,unobserve:()=>zIe});var Zc={};mt.r(Zc),mt.d(Zc,{aggregate:()=>Pu,bin:()=>I3,collect:()=>M3,compare:()=>fY,countpattern:()=>A3,cross:()=>k3,density:()=>O3,dotbin:()=>F3,expression:()=>vY,extent:()=>N3,facet:()=>mx,field:()=>bY,filter:()=>L3,flatten:()=>$3,fold:()=>B3,formula:()=>V3,generate:()=>wY,impute:()=>z3,joinaggregate:()=>U3,kde:()=>H3,key:()=>CY,load:()=>xY,lookup:()=>q3,multiextent:()=>EY,multivalues:()=>SY,params:()=>TY,pivot:()=>W3,prefacet:()=>DY,project:()=>G3,proxy:()=>IY,quantile:()=>K3,relay:()=>MY,sample:()=>Y3,sequence:()=>X3,sieve:()=>AY,subflow:()=>P3,timeunit:()=>Q3,tupleindex:()=>OY,values:()=>RY,window:()=>Z3});var np={};mt.r(np),mt.d(np,{interpolate:()=>Uu,interpolateArray:()=>cRe,interpolateBasis:()=>yX,interpolateBasisClosed:()=>vX,interpolateCubehelix:()=>QRe,interpolateCubehelixLong:()=>ZRe,interpolateDate:()=>EX,interpolateDiscrete:()=>FRe,interpolateHcl:()=>KRe,interpolateHclLong:()=>YRe,interpolateHsl:()=>jRe,interpolateHslLong:()=>qRe,interpolateHue:()=>NRe,interpolateLab:()=>GRe,interpolateNumber:()=>la,interpolateNumberArray:()=>hR,interpolateObject:()=>SX,interpolateRgb:()=>fR,interpolateRgbBasis:()=>aRe,interpolateRgbBasisClosed:()=>lRe,interpolateRound:()=>My,interpolateString:()=>TX,interpolateTransformCss:()=>$Re,interpolateTransformSvg:()=>BRe,interpolateZoom:()=>HRe,piecewise:()=>SR,quantize:()=>JRe});var Jc={};mt.r(Jc),mt.d(Jc,{bound:()=>TJ,identifier:()=>eN,mark:()=>IJ,overlap:()=>MJ,render:()=>NJ,viewlayout:()=>zJ});var ip={};mt.r(ip),mt.d(ip,{axisticks:()=>HJ,datajoin:()=>jJ,encode:()=>qJ,legendentries:()=>WJ,linkpath:()=>tN,pie:()=>nN,scale:()=>ZJ,sortitems:()=>tee,stack:()=>rN});var Oi={};mt.r(Oi),mt.d(Oi,{contour:()=>PN,geojson:()=>BN,geopath:()=>VN,geopoint:()=>zN,geoshape:()=>UN,graticule:()=>HN,heatmap:()=>jN,isocontour:()=>RN,kde2d:()=>NN,projection:()=>bte});var jd={};mt.r(jd),mt.d(jd,{force:()=>XN});var f0={};mt.r(f0),mt.d(f0,{nest:()=>s4,pack:()=>l4,partition:()=>u4,stratify:()=>d4,tree:()=>h4,treelinks:()=>p4,treemap:()=>m4});var qd={};mt.r(qd),mt.d(qd,{label:()=>T4});var Co={};mt.r(Co),mt.d(Co,{loess:()=>D4,regression:()=>M4});var Kl={};mt.r(Kl),mt.d(Kl,{voronoi:()=>rP});var Wd={};mt.r(Wd),mt.d(Wd,{wordcloud:()=>sP});var Gd={};mt.r(Gd),mt.d(Gd,{crossfilter:()=>aP,resolvefilter:()=>lP});var Kd={};mt.r(Kd),mt.d(Kd,{Bounds:()=>ni,CanvasHandler:()=>Ju,CanvasRenderer:()=>Qy,DATE:()=>oo,DAY:()=>sr,DAYOFYEAR:()=>ul,Dataflow:()=>Lg,Debug:()=>UW,Error:()=>nO,EventStream:()=>ax,Gradient:()=>GQ,GroupItem:()=>eE,HOURS:()=>zo,Handler:()=>Zu,HybridHandler:()=>HF,HybridRenderer:()=>TE,Info:()=>zW,Item:()=>Jx,MILLISECONDS:()=>sa,MINUTES:()=>Uo,MONTH:()=>or,Marks:()=>qo,MultiPulse:()=>t3,None:()=>VW,Operator:()=>dn,Parameters:()=>sx,Pulse:()=>Nu,QUARTER:()=>ro,RenderType:()=>td,Renderer:()=>Wo,ResourceLoader:()=>rF,SECONDS:()=>Ss,SVGHandler:()=>FF,SVGRenderer:()=>EE,SVGStringRenderer:()=>UF,Scenegraph:()=>DF,TIME_UNITS:()=>SO,Transform:()=>Z,View:()=>tre,WEEK:()=>ci,Warn:()=>iO,YEAR:()=>$i,accessor:()=>no,accessorFields:()=>tr,accessorName:()=>Ln,array:()=>Ce,ascending:()=>$C,bandwidthNRD:()=>u3,bin:()=>GK,bootstrapCI:()=>KK,boundClip:()=>gJ,boundContext:()=>zy,boundItem:()=>TF,boundMark:()=>TZ,boundStroke:()=>Tc,changeset:()=>Gn,clampRange:()=>eG,codegenExpression:()=>Xne,compare:()=>lO,constant:()=>rr,cumulativeLogNormal:()=>m3,cumulativeNormal:()=>fx,cumulativeUniform:()=>b3,dayofyear:()=>IG,debounce:()=>cO,defaultLocale:()=>zO,definition:()=>BK,densityLogNormal:()=>g3,densityNormal:()=>d3,densityUniform:()=>v3,domChild:()=>di,domClear:()=>ks,domCreate:()=>Qu,domFind:()=>IF,dotbin:()=>YK,error:()=>re,expressionFunction:()=>Yn,extend:()=>ut,extent:()=>al,extentIndex:()=>tG,falsy:()=>Du,fastmap:()=>xg,field:()=>Cs,flush:()=>nG,font:()=>hE,fontFamily:()=>Wy,fontSize:()=>yl,format:()=>JC,formatLocale:()=>QC,formats:()=>YO,hasOwnProperty:()=>$e,id:()=>Q_,identity:()=>nr,inferType:()=>wK,inferTypes:()=>CK,ingest:()=>qt,inherits:()=>pe,inrange:()=>Eg,interpolate:()=>WR,interpolateColors:()=>Kx,interpolateRange:()=>AQ,intersect:()=>dJ,intersectBoxLine:()=>Zg,intersectPath:()=>dF,intersectPoint:()=>fF,intersectRule:()=>dZ,isArray:()=>oe,isBoolean:()=>Iu,isDate:()=>Mu,isFunction:()=>ct,isIterable:()=>iG,isNumber:()=>Ft,isObject:()=>Ee,isRegExp:()=>rG,isString:()=>xe,isTuple:()=>ix,key:()=>uO,lerp:()=>oG,lineHeight:()=>Yu,loader:()=>ex,locale:()=>yK,logger:()=>rO,lruCache:()=>sG,markup:()=>VF,merge:()=>aG,mergeConfig:()=>wg,multiLineOffset:()=>xF,one:()=>bg,pad:()=>lG,panLinear:()=>KW,panLog:()=>YW,panPow:()=>XW,panSymlog:()=>QW,parse:()=>aje,parseExpression:()=>_P,parseSelector:()=>_d,path:()=>Sx,pathCurves:()=>ZR,pathEqual:()=>mJ,pathParse:()=>Yg,pathRectangle:()=>eZ,pathRender:()=>Py,pathSymbols:()=>JQ,pathTrail:()=>tZ,peek:()=>Tt,point:()=>gE,projection:()=>ON,quantileLogNormal:()=>_3,quantileNormal:()=>hx,quantileUniform:()=>w3,quantiles:()=>l3,quantizeInterpolator:()=>kQ,quarter:()=>ZW,quartiles:()=>c3,random:()=>Ts,randomInteger:()=>nOe,randomKDE:()=>h3,randomLCG:()=>tOe,randomLogNormal:()=>QK,randomMixture:()=>ZK,randomNormal:()=>f3,randomUniform:()=>JK,read:()=>TK,regressionConstant:()=>C3,regressionExp:()=>tY,regressionLinear:()=>x3,regressionLoess:()=>sY,regressionLog:()=>eY,regressionPoly:()=>iY,regressionPow:()=>nY,regressionQuad:()=>E3,renderModule:()=>DE,repeat:()=>Z_,resetDefaultLocale:()=>YAe,resetSVGClipId:()=>iZ,resetSVGDefIds:()=>oPe,responseType:()=>SK,runtimeContext:()=>Nie,sampleCurve:()=>gx,sampleLogNormal:()=>p3,sampleNormal:()=>dx,sampleUniform:()=>y3,scale:()=>$t,sceneEqual:()=>qF,sceneFromJSON:()=>IZ,scenePickVisit:()=>aE,sceneToJSON:()=>DZ,sceneVisit:()=>da,sceneZOrder:()=>hF,scheme:()=>GR,serializeXML:()=>ZZ,setHybridRendererOptions:()=>tPe,setRandom:()=>Jke,span:()=>J_,splitAccessPath:()=>sl,stringValue:()=>ge,textMetrics:()=>jo,timeBin:()=>GG,timeFloor:()=>NG,timeFormatLocale:()=>py,timeInterval:()=>Rg,timeOffset:()=>$G,timeSequence:()=>zG,timeUnitSpecifier:()=>DG,timeUnits:()=>DO,toBoolean:()=>dO,toDate:()=>fO,toNumber:()=>ir,toSet:()=>oa,toString:()=>hO,transform:()=>VK,transforms:()=>$g,truncate:()=>cG,truthy:()=>xs,tupleid:()=>Be,typeParsers:()=>WO,utcFloor:()=>PG,utcInterval:()=>Fg,utcOffset:()=>BG,utcSequence:()=>UG,utcdayofyear:()=>kG,utcquarter:()=>JW,utcweek:()=>OG,version:()=>lje,visitArray:()=>Au,week:()=>MG,writeConfig:()=>Cg,zero:()=>Tu,zoomLinear:()=>oO,zoomLog:()=>sO,zoomPow:()=>LC,zoomSymlog:()=>aO});var xo={};mt.r(xo),mt.d(xo,{accessPathDepth:()=>Fm,accessPathWithDatum:()=>kL,compile:()=>MZe,contains:()=>St,deepEqual:()=>is,deleteNestedProperty:()=>x2,duplicate:()=>tt,entries:()=>vd,every:()=>DL,fieldIntersection:()=>AL,flatAccessWithDatum:()=>loe,getFirstDefined:()=>Xn,hasIntersection:()=>IL,hash:()=>Et,internalField:()=>doe,isBoolean:()=>nv,isEmpty:()=>an,isEqual:()=>wje,isInternalField:()=>foe,isNullOrFalse:()=>TL,isNumeric:()=>E2,keys:()=>ce,logicalExpr:()=>iv,mergeDeep:()=>soe,never:()=>ooe,normalize:()=>Wae,normalizeAngle:()=>ov,omit:()=>mo,pick:()=>Rm,prefixGenerator:()=>ML,removePathFromField:()=>OL,replaceAll:()=>Ch,replacePathInField:()=>Ls,resetIdCounter:()=>xje,setEqual:()=>aoe,some:()=>wh,stringify:()=>ln,titleCase:()=>rv,unique:()=>kl,uniqueId:()=>uoe,vals:()=>ji,varName:()=>In,version:()=>OZe});var eu={};function en(e){return"function"==typeof e}function Yd(e){const t=e(i=>{Error.call(i),i.stack=(new Error).stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}mt.r(eu),mt.d(eu,{carbong10:()=>MJe,carbong100:()=>kJe,carbong90:()=>AJe,carbonwhite:()=>IJe,dark:()=>JZe,excel:()=>eJe,fivethirtyeight:()=>iJe,ggplot2:()=>rJe,googlecharts:()=>mJe,latimes:()=>lJe,powerbi:()=>SJe,quartz:()=>cJe,urbaninstitute:()=>gJe,version:()=>OJe,vox:()=>uJe});const qs=Yd(e=>function(t){e(this),this.message=t?`${t.length} errors occurred during unsubscription:\n${t.map((i,r)=>`${r+1}) ${i.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=t});function Xd(e,n){if(e){const t=e.indexOf(n);0<=t&&e.splice(t,1)}}class mr{constructor(n){this.initialTeardown=n,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let n;if(!this.closed){this.closed=!0;const{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(const o of t)o.remove(this);else t.remove(this);const{initialTeardown:i}=this;if(en(i))try{i()}catch(o){n=o instanceof qs?o.errors:[o]}const{_finalizers:r}=this;if(r){this._finalizers=null;for(const o of r)try{a9(o)}catch(s){n=n??[],s instanceof qs?n=[...n,...s.errors]:n.push(s)}}if(n)throw new qs(n)}}add(n){var t;if(n&&n!==this)if(this.closed)a9(n);else{if(n instanceof mr){if(n.closed||n._hasParent(this))return;n._addParent(this)}(this._finalizers=null!==(t=this._finalizers)&&void 0!==t?t:[]).push(n)}}_hasParent(n){const{_parentage:t}=this;return t===n||Array.isArray(t)&&t.includes(n)}_addParent(n){const{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(n),t):t?[t,n]:n}_removeParent(n){const{_parentage:t}=this;t===n?this._parentage=null:Array.isArray(t)&&Xd(t,n)}remove(n){const{_finalizers:t}=this;t&&Xd(t,n),n instanceof mr&&n._removeParent(this)}}mr.EMPTY=(()=>{const e=new mr;return e.closed=!0,e})();const zv=mr.EMPTY;function s9(e){return e instanceof mr||e&&"closed"in e&&en(e.remove)&&en(e.add)&&en(e.unsubscribe)}function a9(e){en(e)?e():e.unsubscribe()}const Qd={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},Uv={setTimeout(e,n,...t){const{delegate:i}=Uv;return i?.setTimeout?i.setTimeout(e,n,...t):setTimeout(e,n,...t)},clearTimeout(e){const{delegate:n}=Uv;return(n?.clearTimeout||clearTimeout)(e)},delegate:void 0};function l9(e){Uv.setTimeout(()=>{const{onUnhandledError:n}=Qd;if(!n)throw e;n(e)})}function QT(){}const ide=ZT("C",void 0,void 0);function ZT(e,n,t){return{kind:e,value:n,error:t}}let Zd=null;function Hv(e){if(Qd.useDeprecatedSynchronousErrorHandling){const n=!Zd;if(n&&(Zd={errorThrown:!1,error:null}),e(),n){const{errorThrown:t,error:i}=Zd;if(Zd=null,t)throw i}}else e()}class JT extends mr{constructor(n){super(),this.isStopped=!1,n?(this.destination=n,s9(n)&&n.add(this)):this.destination=ude}static create(n,t,i){return new h0(n,t,i)}next(n){this.isStopped?tD(function ode(e){return ZT("N",e,void 0)}(n),this):this._next(n)}error(n){this.isStopped?tD(function rde(e){return ZT("E",void 0,e)}(n),this):(this.isStopped=!0,this._error(n))}complete(){this.isStopped?tD(ide,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(n){this.destination.next(n)}_error(n){try{this.destination.error(n)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const ade=Function.prototype.bind;function eD(e,n){return ade.call(e,n)}class lde{constructor(n){this.partialObserver=n}next(n){const{partialObserver:t}=this;if(t.next)try{t.next(n)}catch(i){jv(i)}}error(n){const{partialObserver:t}=this;if(t.error)try{t.error(n)}catch(i){jv(i)}else jv(n)}complete(){const{partialObserver:n}=this;if(n.complete)try{n.complete()}catch(t){jv(t)}}}class h0 extends JT{constructor(n,t,i){let r;if(super(),en(n)||!n)r={next:n??void 0,error:t??void 0,complete:i??void 0};else{let o;this&&Qd.useDeprecatedNextContext?(o=Object.create(n),o.unsubscribe=()=>this.unsubscribe(),r={next:n.next&&eD(n.next,o),error:n.error&&eD(n.error,o),complete:n.complete&&eD(n.complete,o)}):r=n}this.destination=new lde(r)}}function jv(e){Qd.useDeprecatedSynchronousErrorHandling?function sde(e){Qd.useDeprecatedSynchronousErrorHandling&&Zd&&(Zd.errorThrown=!0,Zd.error=e)}(e):l9(e)}function tD(e,n){const{onStoppedNotification:t}=Qd;t&&Uv.setTimeout(()=>t(e,n))}const ude={closed:!0,next:QT,error:function cde(e){throw e},complete:QT},nD="function"==typeof Symbol&&Symbol.observable||"@@observable";function tu(e){return e}function c9(e){return 0===e.length?tu:1===e.length?e[0]:function(t){return e.reduce((i,r)=>r(i),t)}}let zn=(()=>{class e{constructor(t){t&&(this._subscribe=t)}lift(t){const i=new e;return i.source=this,i.operator=t,i}subscribe(t,i,r){const o=function hde(e){return e&&e instanceof JT||function fde(e){return e&&en(e.next)&&en(e.error)&&en(e.complete)}(e)&&s9(e)}(t)?t:new h0(t,i,r);return Hv(()=>{const{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(t){try{return this._subscribe(t)}catch(i){t.error(i)}}forEach(t,i){return new(i=u9(i))((r,o)=>{const s=new h0({next:a=>{try{t(a)}catch(l){o(l),s.unsubscribe()}},error:o,complete:r});this.subscribe(s)})}_subscribe(t){var i;return null===(i=this.source)||void 0===i?void 0:i.subscribe(t)}[nD](){return this}pipe(...t){return c9(t)(this)}toPromise(t){return new(t=u9(t))((i,r)=>{let o;this.subscribe(s=>o=s,s=>r(s),()=>i(o))})}}return e.create=n=>new e(n),e})();function u9(e){var n;return null!==(n=e??Qd.Promise)&&void 0!==n?n:Promise}const pde=Yd(e=>function(){e(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let Eo=(()=>{class e extends zn{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){const i=new d9(this,this);return i.operator=t,i}_throwIfClosed(){if(this.closed)throw new pde}next(t){Hv(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const i of this.currentObservers)i.next(t)}})}error(t){Hv(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;const{observers:i}=this;for(;i.length;)i.shift().error(t)}})}complete(){Hv(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return(null===(t=this.observers)||void 0===t?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){const{hasError:i,isStopped:r,observers:o}=this;return i||r?zv:(this.currentObservers=null,o.push(t),new mr(()=>{this.currentObservers=null,Xd(o,t)}))}_checkFinalizedStatuses(t){const{hasError:i,thrownError:r,isStopped:o}=this;i?t.error(r):o&&t.complete()}asObservable(){const t=new zn;return t.source=this,t}}return e.create=(n,t)=>new d9(n,t),e})();class d9 extends Eo{constructor(n,t){super(),this.destination=n,this.source=t}next(n){var t,i;null===(i=null===(t=this.destination)||void 0===t?void 0:t.next)||void 0===i||i.call(t,n)}error(n){var t,i;null===(i=null===(t=this.destination)||void 0===t?void 0:t.error)||void 0===i||i.call(t,n)}complete(){var n,t;null===(t=null===(n=this.destination)||void 0===n?void 0:n.complete)||void 0===t||t.call(n)}_subscribe(n){var t,i;return null!==(i=null===(t=this.source)||void 0===t?void 0:t.subscribe(n))&&void 0!==i?i:zv}}function f9(e){return en(e?.lift)}function ii(e){return n=>{if(f9(n))return n.lift(function(t){try{return e(t,this)}catch(i){this.error(i)}});throw new TypeError("Unable to lift unknown Observable type")}}function Zn(e,n,t,i,r){return new gde(e,n,t,i,r)}class gde extends JT{constructor(n,t,i,r,o,s){super(n),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=t?function(a){try{t(a)}catch(l){n.error(l)}}:super._next,this._error=r?function(a){try{r(a)}catch(l){n.error(l)}finally{this.unsubscribe()}}:super._error,this._complete=i?function(){try{i()}catch(a){n.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var n;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:t}=this;super.unsubscribe(),!t&&(null===(n=this.onFinalize)||void 0===n||n.call(this))}}}function zt(e,n){return ii((t,i)=>{let r=0;t.subscribe(Zn(i,o=>{i.next(e.call(n,o,r++))}))})}function nu(e){return this instanceof nu?(this.v=e,this):new nu(e)}function m9(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,n=e[Symbol.asyncIterator];return n?n.call(e):(e=function sD(e){var n="function"==typeof Symbol&&Symbol.iterator,t=n&&e[n],i=0;if(t)return t.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&i>=e.length&&(e=void 0),{value:e&&e[i++],done:!e}}};throw new TypeError(n?"Object is not iterable.":"Symbol.iterator is not defined.")}(e),t={},i("next"),i("throw"),i("return"),t[Symbol.asyncIterator]=function(){return this},t);function i(o){t[o]=e[o]&&function(s){return new Promise(function(a,l){!function r(o,s,a,l){Promise.resolve(l).then(function(c){o({value:c,done:a})},s)}(a,l,(s=e[o](s)).done,s.value)})}}}"function"==typeof SuppressedError&&SuppressedError;const _9=e=>e&&"number"==typeof e.length&&"function"!=typeof e;function y9(e){return en(e?.then)}function v9(e){return en(e[nD])}function b9(e){return Symbol.asyncIterator&&en(e?.[Symbol.asyncIterator])}function w9(e){return new TypeError(`You provided ${null!==e&&"object"==typeof e?"an invalid object":`'${e}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const C9=function Lde(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function x9(e){return en(e?.[C9])}function E9(e){return function g9(e,n,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,i=t.apply(e,n||[]),o=[];return r={},s("next"),s("throw"),s("return"),r[Symbol.asyncIterator]=function(){return this},r;function s(f){i[f]&&(r[f]=function(h){return new Promise(function(p,g){o.push([f,h,p,g])>1||a(f,h)})})}function a(f,h){try{!function l(f){f.value instanceof nu?Promise.resolve(f.value.v).then(c,u):d(o[0][2],f)}(i[f](h))}catch(p){d(o[0][3],p)}}function c(f){a("next",f)}function u(f){a("throw",f)}function d(f,h){f(h),o.shift(),o.length&&a(o[0][0],o[0][1])}}(this,arguments,function*(){const t=e.getReader();try{for(;;){const{value:i,done:r}=yield nu(t.read());if(r)return yield nu(void 0);yield yield nu(i)}}finally{t.releaseLock()}})}function S9(e){return en(e?.getReader)}function So(e){if(e instanceof zn)return e;if(null!=e){if(v9(e))return function $de(e){return new zn(n=>{const t=e[nD]();if(en(t.subscribe))return t.subscribe(n);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(e);if(_9(e))return function Bde(e){return new zn(n=>{for(let t=0;t<e.length&&!n.closed;t++)n.next(e[t]);n.complete()})}(e);if(y9(e))return function Vde(e){return new zn(n=>{e.then(t=>{n.closed||(n.next(t),n.complete())},t=>n.error(t)).then(null,l9)})}(e);if(b9(e))return T9(e);if(x9(e))return function zde(e){return new zn(n=>{for(const t of e)if(n.next(t),n.closed)return;n.complete()})}(e);if(S9(e))return function Ude(e){return T9(E9(e))}(e)}throw w9(e)}function T9(e){return new zn(n=>{(function Hde(e,n){var t,i,r,o;return function h9(e,n,t,i){return new(t||(t=Promise))(function(o,s){function a(u){try{c(i.next(u))}catch(d){s(d)}}function l(u){try{c(i.throw(u))}catch(d){s(d)}}function c(u){u.done?o(u.value):function r(o){return o instanceof t?o:new t(function(s){s(o)})}(u.value).then(a,l)}c((i=i.apply(e,n||[])).next())})}(this,void 0,void 0,function*(){try{for(t=m9(e);!(i=yield t.next()).done;)if(n.next(i.value),n.closed)return}catch(s){r={error:s}}finally{try{i&&!i.done&&(o=t.return)&&(yield o.call(t))}finally{if(r)throw r.error}}n.complete()})})(e,n).catch(t=>n.error(t))})}function Yl(e,n,t,i=0,r=!1){const o=n.schedule(function(){t(),r?e.add(this.schedule(null,i)):this.unsubscribe()},i);if(e.add(o),!r)return o}function Ri(e,n,t=1/0){return en(n)?Ri((i,r)=>zt((o,s)=>n(i,o,r,s))(So(e(i,r))),t):("number"==typeof n&&(t=n),ii((i,r)=>function jde(e,n,t,i,r,o,s,a){const l=[];let c=0,u=0,d=!1;const f=()=>{d&&!l.length&&!c&&n.complete()},h=g=>c<i?p(g):l.push(g),p=g=>{o&&n.next(g),c++;let m=!1;So(t(g,u++)).subscribe(Zn(n,_=>{r?.(_),o?h(_):n.next(_)},()=>{m=!0},void 0,()=>{if(m)try{for(c--;l.length&&c<i;){const _=l.shift();s?Yl(n,s,()=>p(_)):p(_)}f()}catch(_){n.error(_)}}))};return e.subscribe(Zn(n,h,()=>{d=!0,f()})),()=>{a?.()}}(i,r,e,t)))}function rp(e=1/0){return Ri(tu,e)}const za=new zn(e=>e.complete());function aD(e){return e[e.length-1]}function D9(e){return en(aD(e))?e.pop():void 0}function p0(e){return function Wde(e){return e&&en(e.schedule)}(aD(e))?e.pop():void 0}function I9(e,n=0){return ii((t,i)=>{t.subscribe(Zn(i,r=>Yl(i,e,()=>i.next(r),n),()=>Yl(i,e,()=>i.complete(),n),r=>Yl(i,e,()=>i.error(r),n)))})}function M9(e,n=0){return ii((t,i)=>{i.add(e.schedule(()=>t.subscribe(i),n))})}function A9(e,n){if(!e)throw new Error("Iterable cannot be null");return new zn(t=>{Yl(t,n,()=>{const i=e[Symbol.asyncIterator]();Yl(t,n,()=>{i.next().then(r=>{r.done?t.complete():t.next(r.value)})},0,!0)})})}function ri(e,n){return n?function Jde(e,n){if(null!=e){if(v9(e))return function Kde(e,n){return So(e).pipe(M9(n),I9(n))}(e,n);if(_9(e))return function Xde(e,n){return new zn(t=>{let i=0;return n.schedule(function(){i===e.length?t.complete():(t.next(e[i++]),t.closed||this.schedule())})})}(e,n);if(y9(e))return function Yde(e,n){return So(e).pipe(M9(n),I9(n))}(e,n);if(b9(e))return A9(e,n);if(x9(e))return function Qde(e,n){return new zn(t=>{let i;return Yl(t,n,()=>{i=e[C9](),Yl(t,n,()=>{let r,o;try{({value:r,done:o}=i.next())}catch(s){return void t.error(s)}o?t.complete():t.next(r)},0,!0)}),()=>en(i?.return)&&i.return()})}(e,n);if(S9(e))return function Zde(e,n){return A9(E9(e),n)}(e,n)}throw w9(e)}(e,n):So(e)}class as extends Eo{constructor(n){super(),this._value=n}get value(){return this.getValue()}_subscribe(n){const t=super._subscribe(n);return!t.closed&&n.next(this._value),t}getValue(){const{hasError:n,thrownError:t,_value:i}=this;if(n)throw t;return this._throwIfClosed(),i}next(n){super.next(this._value=n)}}function Qe(...e){return ri(e,p0(e))}function k9(e={}){const{connector:n=(()=>new Eo),resetOnError:t=!0,resetOnComplete:i=!0,resetOnRefCountZero:r=!0}=e;return o=>{let s,a,l,c=0,u=!1,d=!1;const f=()=>{a?.unsubscribe(),a=void 0},h=()=>{f(),s=l=void 0,u=d=!1},p=()=>{const g=s;h(),g?.unsubscribe()};return ii((g,m)=>{c++,!d&&!u&&f();const _=l=l??n();m.add(()=>{c--,0===c&&!d&&!u&&(a=lD(p,r))}),_.subscribe(m),!s&&c>0&&(s=new h0({next:y=>_.next(y),error:y=>{d=!0,f(),a=lD(h,t,y),_.error(y)},complete:()=>{u=!0,f(),a=lD(h,i),_.complete()}}),So(g).subscribe(s))})(o)}}function lD(e,n,...t){if(!0===n)return void e();if(!1===n)return;const i=new h0({next:()=>{i.unsubscribe(),e()}});return So(n(...t)).subscribe(i)}function Ws(e,n){return ii((t,i)=>{let r=null,o=0,s=!1;const a=()=>s&&!r&&i.complete();t.subscribe(Zn(i,l=>{r?.unsubscribe();let c=0;const u=o++;So(e(l,u)).subscribe(r=Zn(i,d=>i.next(n?n(l,d,u,c++):d),()=>{r=null,a()}))},()=>{s=!0,a()}))})}function nfe(e,n){return e===n}function tn(e){for(let n in e)if(e[n]===tn)return n;throw Error("Could not find renamed property on target object.")}function qv(e,n){for(const t in n)n.hasOwnProperty(t)&&!e.hasOwnProperty(t)&&(e[t]=n[t])}function oi(e){if("string"==typeof e)return e;if(Array.isArray(e))return"["+e.map(oi).join(", ")+"]";if(null==e)return""+e;if(e.overriddenName)return`${e.overriddenName}`;if(e.name)return`${e.name}`;const n=e.toString();if(null==n)return""+n;const t=n.indexOf("\n");return-1===t?n:n.substring(0,t)}function cD(e,n){return null==e||""===e?null===n?"":n:null==n||""===n?e:e+" "+n}const ife=tn({__forward_ref__:tn});function Rt(e){return e.__forward_ref__=Rt,e.toString=function(){return oi(this())},e}function et(e){return uD(e)?e():e}function uD(e){return"function"==typeof e&&e.hasOwnProperty(ife)&&e.__forward_ref__===Rt}function dD(e){return e&&!!e.\u0275providers}class ne extends Error{constructor(n,t){super(function Wv(e,n){return`NG0${Math.abs(e)}${n?": "+n:""}`}(n,t)),this.code=n}}function nt(e){return"string"==typeof e?e:null==e?"":String(e)}function fD(e,n){throw new ne(-201,!1)}function ls(e,n){null==e&&function Ze(e,n,t,i){throw new Error(`ASSERTION ERROR: ${e}`+(null==i?"":` [Expected=> ${t} ${i} ${n} <=Actual]`))}(n,e,null,"!=")}function Oe(e){return{token:e.token,providedIn:e.providedIn||null,factory:e.factory,value:void 0}}function Nt(e){return{providers:e.providers||[],imports:e.imports||[]}}function Gv(e){return R9(e,Yv)||R9(e,F9)}function R9(e,n){return e.hasOwnProperty(n)?e[n]:null}function Kv(e){return e&&(e.hasOwnProperty(hD)||e.hasOwnProperty(dfe))?e[hD]:null}const Yv=tn({\u0275prov:tn}),hD=tn({\u0275inj:tn}),F9=tn({ngInjectableDef:tn}),dfe=tn({ngInjectorDef:tn});var vt=function(e){return e[e.Default=0]="Default",e[e.Host=1]="Host",e[e.Self=2]="Self",e[e.SkipSelf=4]="SkipSelf",e[e.Optional=8]="Optional",e}(vt||{});let pD;function Gr(e){const n=pD;return pD=e,n}function P9(e,n,t){const i=Gv(e);return i&&"root"==i.providedIn?void 0===i.value?i.value=i.factory():i.value:t&vt.Optional?null:void 0!==n?n:void fD(oi(e))}const fn=globalThis;class Ie{constructor(n,t){this._desc=n,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof t?this.__NG_ELEMENT_ID__=t:void 0!==t&&(this.\u0275prov=Oe({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}const g0={},vD="__NG_DI_FLAG__",Xv="ngTempTokenPath",pfe=/\n/gm,$9="__source";let op;function iu(e){const n=op;return op=e,n}function _fe(e,n=vt.Default){if(void 0===op)throw new ne(-203,!1);return null===op?P9(e,void 0,n):op.get(e,n&vt.Optional?null:void 0,n)}function Me(e,n=vt.Default){return(function N9(){return pD}()||_fe)(et(e),n)}function Te(e,n=vt.Default){return Me(e,Qv(n))}function Qv(e){return typeof e>"u"||"number"==typeof e?e:0|(e.optional&&8)|(e.host&&1)|(e.self&&2)|(e.skipSelf&&4)}function bD(e){const n=[];for(let t=0;t<e.length;t++){const i=et(e[t]);if(Array.isArray(i)){if(0===i.length)throw new ne(900,!1);let r,o=vt.Default;for(let s=0;s<i.length;s++){const a=i[s],l=yfe(a);"number"==typeof l?-1===l?r=a.token:o|=l:r=a}n.push(Me(r,o))}else n.push(Me(i))}return n}function m0(e,n){return e[vD]=n,e.prototype[vD]=n,e}function yfe(e){return e[vD]}function Xl(e){return{toString:e}.toString()}var Zv=function(e){return e[e.OnPush=0]="OnPush",e[e.Default=1]="Default",e}(Zv||{}),cs=function(e){return e[e.Emulated=0]="Emulated",e[e.None=2]="None",e[e.ShadowDom=3]="ShadowDom",e}(cs||{});const Ua={},Pt=[],Jv=tn({\u0275cmp:tn}),wD=tn({\u0275dir:tn}),CD=tn({\u0275pipe:tn}),V9=tn({\u0275mod:tn}),Ql=tn({\u0275fac:tn}),_0=tn({__NG_ELEMENT_ID__:tn}),z9=tn({__NG_ENV_ID__:tn});function U9(e,n,t){let i=e.length;for(;;){const r=e.indexOf(n,t);if(-1===r)return r;if(0===r||e.charCodeAt(r-1)<=32){const o=n.length;if(r+o===i||e.charCodeAt(r+o)<=32)return r}t=r+1}}function xD(e,n,t){let i=0;for(;i<t.length;){const r=t[i];if("number"==typeof r){if(0!==r)break;i++;const o=t[i++],s=t[i++],a=t[i++];e.setAttribute(n,s,a,o)}else{const o=r,s=t[++i];j9(o)?e.setProperty(n,o,s):e.setAttribute(n,o,s),i++}}return i}function H9(e){return 3===e||4===e||6===e}function j9(e){return 64===e.charCodeAt(0)}function y0(e,n){if(null!==n&&0!==n.length)if(null===e||0===e.length)e=n.slice();else{let t=-1;for(let i=0;i<n.length;i++){const r=n[i];"number"==typeof r?t=r:0===t||q9(e,t,r,null,-1===t||2===t?n[++i]:null)}}return e}function q9(e,n,t,i,r){let o=0,s=e.length;if(-1===n)s=-1;else for(;o<e.length;){const a=e[o++];if("number"==typeof a){if(a===n){s=-1;break}if(a>n){s=o-1;break}}}for(;o<e.length;){const a=e[o];if("number"==typeof a)break;if(a===t){if(null===i)return void(null!==r&&(e[o+1]=r));if(i===e[o+1])return void(e[o+2]=r)}o++,null!==i&&o++,null!==r&&o++}-1!==s&&(e.splice(s,0,n),o=s+1),e.splice(o++,0,t),null!==i&&e.splice(o++,0,i),null!==r&&e.splice(o++,0,r)}const W9="ng-template";function wfe(e,n,t){let i=0,r=!0;for(;i<e.length;){let o=e[i++];if("string"==typeof o&&r){const s=e[i++];if(t&&"class"===o&&-1!==U9(s.toLowerCase(),n,0))return!0}else{if(1===o){for(;i<e.length&&"string"==typeof(o=e[i++]);)if(o.toLowerCase()===n)return!0;return!1}"number"==typeof o&&(r=!1)}}return!1}function G9(e){return 4===e.type&&e.value!==W9}function Cfe(e,n,t){return n===(4!==e.type||t?e.value:W9)}function xfe(e,n,t){let i=4;const r=e.attrs||[],o=function Tfe(e){for(let n=0;n<e.length;n++)if(H9(e[n]))return n;return e.length}(r);let s=!1;for(let a=0;a<n.length;a++){const l=n[a];if("number"!=typeof l){if(!s)if(4&i){if(i=2|1&i,""!==l&&!Cfe(e,l,t)||""===l&&1===n.length){if(Gs(i))return!1;s=!0}}else{const c=8&i?l:n[++a];if(8&i&&null!==e.attrs){if(!wfe(e.attrs,c,t)){if(Gs(i))return!1;s=!0}continue}const d=Efe(8&i?"class":l,r,G9(e),t);if(-1===d){if(Gs(i))return!1;s=!0;continue}if(""!==c){let f;f=d>o?"":r[d+1].toLowerCase();const h=8&i?f:null;if(h&&-1!==U9(h,c,0)||2&i&&c!==f){if(Gs(i))return!1;s=!0}}}}else{if(!s&&!Gs(i)&&!Gs(l))return!1;if(s&&Gs(l))continue;s=!1,i=l|1&i}}return Gs(i)||s}function Gs(e){return 0==(1&e)}function Efe(e,n,t,i){if(null===n)return-1;let r=0;if(i||!t){let o=!1;for(;r<n.length;){const s=n[r];if(s===e)return r;if(3===s||6===s)o=!0;else{if(1===s||2===s){let a=n[++r];for(;"string"==typeof a;)a=n[++r];continue}if(4===s)break;if(0===s){r+=4;continue}}r+=o?1:2}return-1}return function Dfe(e,n){let t=e.indexOf(4);if(t>-1)for(t++;t<e.length;){const i=e[t];if("number"==typeof i)return-1;if(i===n)return t;t++}return-1}(n,e)}function K9(e,n,t=!1){for(let i=0;i<n.length;i++)if(xfe(e,n[i],t))return!0;return!1}function Ife(e,n){e:for(let t=0;t<n.length;t++){const i=n[t];if(e.length===i.length){for(let r=0;r<e.length;r++)if(e[r]!==i[r])continue e;return!0}}return!1}function Y9(e,n){return e?":not("+n.trim()+")":n}function Mfe(e){let n=e[0],t=1,i=2,r="",o=!1;for(;t<e.length;){let s=e[t];if("string"==typeof s)if(2&i){const a=e[++t];r+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else 8&i?r+="."+s:4&i&&(r+=" "+s);else""!==r&&!Gs(s)&&(n+=Y9(o,r),r=""),i=s,o=o||!Gs(i);t++}return""!==r&&(n+=Y9(o,r)),n}function it(e){return Xl(()=>{const n=Q9(e),t={...n,decls:e.decls,vars:e.vars,template:e.template,consts:e.consts||null,ngContentSelectors:e.ngContentSelectors,onPush:e.changeDetection===Zv.OnPush,directiveDefs:null,pipeDefs:null,dependencies:n.standalone&&e.dependencies||null,getStandaloneInjector:null,signals:e.signals??!1,data:e.data||{},encapsulation:e.encapsulation||cs.Emulated,styles:e.styles||Pt,_:null,schemas:e.schemas||null,tView:null,id:""};Z9(t);const i=e.dependencies;return t.directiveDefs=eb(i,!1),t.pipeDefs=eb(i,!0),t.id=function Lfe(e){let n=0;const t=[e.selectors,e.ngContentSelectors,e.hostVars,e.hostAttrs,e.consts,e.vars,e.decls,e.encapsulation,e.standalone,e.signals,e.exportAs,JSON.stringify(e.inputs),JSON.stringify(e.outputs),Object.getOwnPropertyNames(e.type.prototype),!!e.contentQueries,!!e.viewQuery].join("|");for(const r of t)n=Math.imul(31,n)+r.charCodeAt(0)<<0;return n+=2147483648,"c"+n}(t),t})}function Rfe(e){return It(e)||Fi(e)}function Ffe(e){return null!==e}function Ut(e){return Xl(()=>({type:e.type,bootstrap:e.bootstrap||Pt,declarations:e.declarations||Pt,imports:e.imports||Pt,exports:e.exports||Pt,transitiveCompileScopes:null,schemas:e.schemas||null,id:e.id||null}))}function X9(e,n){if(null==e)return Ua;const t={};for(const i in e)if(e.hasOwnProperty(i)){let r=e[i],o=r;Array.isArray(r)&&(o=r[1],r=r[0]),t[r]=i,n&&(n[r]=o)}return t}function je(e){return Xl(()=>{const n=Q9(e);return Z9(n),n})}function It(e){return e[Jv]||null}function Fi(e){return e[wD]||null}function _r(e){return e[CD]||null}function Do(e,n){const t=e[V9]||null;if(!t&&!0===n)throw new Error(`Type ${oi(e)} does not have '\u0275mod' property.`);return t}function Q9(e){const n={};return{type:e.type,providersResolver:null,factory:null,hostBindings:e.hostBindings||null,hostVars:e.hostVars||0,hostAttrs:e.hostAttrs||null,contentQueries:e.contentQueries||null,declaredInputs:n,inputTransforms:null,inputConfig:e.inputs||Ua,exportAs:e.exportAs||null,standalone:!0===e.standalone,signals:!0===e.signals,selectors:e.selectors||Pt,viewQuery:e.viewQuery||null,features:e.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:X9(e.inputs,n),outputs:X9(e.outputs)}}function Z9(e){e.features?.forEach(n=>n(e))}function eb(e,n){if(!e)return null;const t=n?_r:Rfe;return()=>("function"==typeof e?e():e).map(i=>t(i)).filter(Ffe)}const Rn=0,Se=1,at=2,xn=3,Ks=4,v0=5,Wi=6,ap=7,Un=8,ru=9,lp=10,rt=11,b0=12,J9=13,cp=14,Hn=15,w0=16,up=17,Ha=18,C0=19,e8=20,ou=21,Zl=22,x0=23,E0=24,bt=25,ED=1,t8=2,ja=7,dp=9,Ni=11;function Yr(e){return Array.isArray(e)&&"object"==typeof e[ED]}function yr(e){return Array.isArray(e)&&!0===e[ED]}function SD(e){return 0!=(4&e.flags)}function ef(e){return e.componentOffset>-1}function nb(e){return 1==(1&e.flags)}function Ys(e){return!!e.template}function TD(e){return 0!=(512&e[at])}function tf(e,n){return e.hasOwnProperty(Ql)?e[Ql]:null}let Pi=null,ib=!1;function us(e){const n=Pi;return Pi=e,n}const o8={version:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{}};function a8(e){if(!T0(e)||e.dirty){if(!e.producerMustRecompute(e)&&!u8(e))return void(e.dirty=!1);e.producerRecomputeValue(e),e.dirty=!1}}function c8(e){e.dirty=!0,function l8(e){if(void 0===e.liveConsumerNode)return;const n=ib;ib=!0;try{for(const t of e.liveConsumerNode)t.dirty||c8(t)}finally{ib=n}}(e),e.consumerMarkedDirty?.(e)}function ID(e){return e&&(e.nextProducerIndex=0),us(e)}function MD(e,n){if(us(n),e&&void 0!==e.producerNode&&void 0!==e.producerIndexOfThis&&void 0!==e.producerLastReadVersion){if(T0(e))for(let t=e.nextProducerIndex;t<e.producerNode.length;t++)rb(e.producerNode[t],e.producerIndexOfThis[t]);for(;e.producerNode.length>e.nextProducerIndex;)e.producerNode.pop(),e.producerLastReadVersion.pop(),e.producerIndexOfThis.pop()}}function u8(e){fp(e);for(let n=0;n<e.producerNode.length;n++){const t=e.producerNode[n],i=e.producerLastReadVersion[n];if(i!==t.version||(a8(t),i!==t.version))return!0}return!1}function d8(e){if(fp(e),T0(e))for(let n=0;n<e.producerNode.length;n++)rb(e.producerNode[n],e.producerIndexOfThis[n]);e.producerNode.length=e.producerLastReadVersion.length=e.producerIndexOfThis.length=0,e.liveConsumerNode&&(e.liveConsumerNode.length=e.liveConsumerIndexOfThis.length=0)}function rb(e,n){if(function h8(e){e.liveConsumerNode??=[],e.liveConsumerIndexOfThis??=[]}(e),fp(e),1===e.liveConsumerNode.length)for(let i=0;i<e.producerNode.length;i++)rb(e.producerNode[i],e.producerIndexOfThis[i]);const t=e.liveConsumerNode.length-1;if(e.liveConsumerNode[n]=e.liveConsumerNode[t],e.liveConsumerIndexOfThis[n]=e.liveConsumerIndexOfThis[t],e.liveConsumerNode.length--,e.liveConsumerIndexOfThis.length--,n<e.liveConsumerNode.length){const i=e.liveConsumerIndexOfThis[n],r=e.liveConsumerNode[n];fp(r),r.producerIndexOfThis[i]=n}}function T0(e){return e.consumerIsAlwaysLive||(e?.liveConsumerNode?.length??0)>0}function fp(e){e.producerNode??=[],e.producerIndexOfThis??=[],e.producerLastReadVersion??=[]}let p8=null;const y8=()=>{},Xfe=(()=>({...o8,consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!1,consumerMarkedDirty:e=>{e.schedule(e.ref)},hasRun:!1,cleanupFn:y8}))();class Qfe{constructor(n,t,i){this.previousValue=n,this.currentValue=t,this.firstChange=i}isFirstChange(){return this.firstChange}}function vr(){return v8}function v8(e){return e.type.prototype.ngOnChanges&&(e.setInput=Jfe),Zfe}function Zfe(){const e=w8(this),n=e?.current;if(n){const t=e.previous;if(t===Ua)e.previous=n;else for(let i in n)t[i]=n[i];e.current=null,this.ngOnChanges(n)}}function Jfe(e,n,t,i){const r=this.declaredInputs[t],o=w8(e)||function ehe(e,n){return e[b8]=n}(e,{previous:Ua,current:null}),s=o.current||(o.current={}),a=o.previous,l=a[r];s[r]=new Qfe(l&&l.currentValue,n,a===Ua),e[i]=n}vr.ngInherit=!0;const b8="__ngSimpleChanges__";function w8(e){return e[b8]||null}const qa=function(e,n,t){};function hn(e){for(;Array.isArray(e);)e=e[Rn];return e}function ob(e,n){return hn(n[e])}function Xr(e,n){return hn(n[e.index])}function E8(e,n){return e.data[n]}function Io(e,n){const t=n[e];return Yr(t)?t:t[Rn]}function au(e,n){return null==n?null:e[n]}function S8(e){e[up]=0}function she(e){1024&e[at]||(e[at]|=1024,D8(e,1))}function T8(e){1024&e[at]&&(e[at]&=-1025,D8(e,-1))}function D8(e,n){let t=e[xn];if(null===t)return;t[v0]+=n;let i=t;for(t=t[xn];null!==t&&(1===n&&1===i[v0]||-1===n&&0===i[v0]);)t[v0]+=n,i=t,t=t[xn]}const Je={lFrame:$8(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function A8(){return Je.bindingsEnabled}function pp(){return null!==Je.skipHydrationRootTNode}function le(){return Je.lFrame.lView}function Mt(){return Je.lFrame.tView}function J(e){return Je.lFrame.contextLView=e,e[Un]}function ee(e){return Je.lFrame.contextLView=null,e}function Li(){let e=k8();for(;null!==e&&64===e.type;)e=e.parent;return e}function k8(){return Je.lFrame.currentTNode}function Wa(e,n){const t=Je.lFrame;t.currentTNode=e,t.isParent=n}function FD(){return Je.lFrame.isParent}function ND(){Je.lFrame.isParent=!1}function br(){const e=Je.lFrame;let n=e.bindingRootIndex;return-1===n&&(n=e.bindingRootIndex=e.tView.bindingStartIndex),n}function gp(){return Je.lFrame.bindingIndex++}function ec(e){const n=Je.lFrame,t=n.bindingIndex;return n.bindingIndex=n.bindingIndex+e,t}function yhe(e,n){const t=Je.lFrame;t.bindingIndex=t.bindingRootIndex=e,PD(n)}function PD(e){Je.lFrame.currentDirectiveIndex=e}function N8(){return Je.lFrame.currentQueryIndex}function $D(e){Je.lFrame.currentQueryIndex=e}function bhe(e){const n=e[Se];return 2===n.type?n.declTNode:1===n.type?e[Wi]:null}function P8(e,n,t){if(t&vt.SkipSelf){let r=n,o=e;for(;!(r=r.parent,null!==r||t&vt.Host||(r=bhe(o),null===r||(o=o[cp],10&r.type))););if(null===r)return!1;n=r,e=o}const i=Je.lFrame=L8();return i.currentTNode=n,i.lView=e,!0}function BD(e){const n=L8(),t=e[Se];Je.lFrame=n,n.currentTNode=t.firstChild,n.lView=e,n.tView=t,n.contextLView=e,n.bindingIndex=t.bindingStartIndex,n.inI18n=!1}function L8(){const e=Je.lFrame,n=null===e?null:e.child;return null===n?$8(e):n}function $8(e){const n={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:e,child:null,inI18n:!1};return null!==e&&(e.child=n),n}function B8(){const e=Je.lFrame;return Je.lFrame=e.parent,e.currentTNode=null,e.lView=null,e}const V8=B8;function VD(){const e=B8();e.isParent=!0,e.tView=null,e.selectedIndex=-1,e.contextLView=null,e.elementDepthCount=0,e.currentDirectiveIndex=-1,e.currentNamespace=null,e.bindingRootIndex=-1,e.bindingIndex=-1,e.currentQueryIndex=0}function wr(){return Je.lFrame.selectedIndex}function nf(e){Je.lFrame.selectedIndex=e}function An(){const e=Je.lFrame;return E8(e.tView,e.selectedIndex)}function yn(){Je.lFrame.currentNamespace="svg"}let U8=!0;function sb(){return U8}function lu(e){U8=e}function ab(e,n){for(let t=n.directiveStart,i=n.directiveEnd;t<i;t++){const o=e.data[t].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:l,ngAfterViewChecked:c,ngOnDestroy:u}=o;s&&(e.contentHooks??=[]).push(-t,s),a&&((e.contentHooks??=[]).push(t,a),(e.contentCheckHooks??=[]).push(t,a)),l&&(e.viewHooks??=[]).push(-t,l),c&&((e.viewHooks??=[]).push(t,c),(e.viewCheckHooks??=[]).push(t,c)),null!=u&&(e.destroyHooks??=[]).push(t,u)}}function lb(e,n,t){H8(e,n,3,t)}function cb(e,n,t,i){(3&e[at])===t&&H8(e,n,t,i)}function zD(e,n){let t=e[at];(3&t)===n&&(t&=8191,t+=1,e[at]=t)}function H8(e,n,t,i){const o=i??-1,s=n.length-1;let a=0;for(let l=void 0!==i?65535&e[up]:0;l<s;l++)if("number"==typeof n[l+1]){if(a=n[l],null!=i&&a>=i)break}else n[l]<0&&(e[up]+=65536),(a<o||-1==o)&&(Dhe(e,t,n,l),e[up]=(4294901760&e[up])+l+2),l++}function j8(e,n){qa(4,e,n);const t=us(null);try{n.call(e)}finally{us(t),qa(5,e,n)}}function Dhe(e,n,t,i){const r=t[i]<0,o=t[i+1],a=e[r?-t[i]:t[i]];r?e[at]>>13<e[up]>>16&&(3&e[at])===n&&(e[at]+=8192,j8(a,o)):j8(a,o)}const mp=-1;class I0{constructor(n,t,i){this.factory=n,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=i}}function HD(e){return e!==mp}function M0(e){return 32767&e}function A0(e,n){let t=function khe(e){return e>>16}(e),i=n;for(;t>0;)i=i[cp],t--;return i}let jD=!0;function ub(e){const n=jD;return jD=e,n}const q8=255,W8=5;let Ohe=0;const Ga={};function db(e,n){const t=G8(e,n);if(-1!==t)return t;const i=n[Se];i.firstCreatePass&&(e.injectorIndex=n.length,qD(i.data,e),qD(n,null),qD(i.blueprint,null));const r=fb(e,n),o=e.injectorIndex;if(HD(r)){const s=M0(r),a=A0(r,n),l=a[Se].data;for(let c=0;c<8;c++)n[o+c]=a[s+c]|l[s+c]}return n[o+8]=r,o}function qD(e,n){e.push(0,0,0,0,0,0,0,0,n)}function G8(e,n){return-1===e.injectorIndex||e.parent&&e.parent.injectorIndex===e.injectorIndex||null===n[e.injectorIndex+8]?-1:e.injectorIndex}function fb(e,n){if(e.parent&&-1!==e.parent.injectorIndex)return e.parent.injectorIndex;let t=0,i=null,r=n;for(;null!==r;){if(i=e7(r),null===i)return mp;if(t++,r=r[cp],-1!==i.injectorIndex)return i.injectorIndex|t<<16}return mp}function WD(e,n,t){!function Rhe(e,n,t){let i;"string"==typeof t?i=t.charCodeAt(0)||0:t.hasOwnProperty(_0)&&(i=t[_0]),null==i&&(i=t[_0]=Ohe++);const r=i&q8;n.data[e+(r>>W8)]|=1<<r}(e,n,t)}function K8(e,n,t){if(t&vt.Optional||void 0!==e)return e;fD()}function Y8(e,n,t,i){if(t&vt.Optional&&void 0===i&&(i=null),!(t&(vt.Self|vt.Host))){const r=e[ru],o=Gr(void 0);try{return r?r.get(n,i,t&vt.Optional):P9(n,i,t&vt.Optional)}finally{Gr(o)}}return K8(i,0,t)}function X8(e,n,t,i=vt.Default,r){if(null!==e){if(2048&n[at]&&!(i&vt.Self)){const s=function Bhe(e,n,t,i,r){let o=e,s=n;for(;null!==o&&null!==s&&2048&s[at]&&!(512&s[at]);){const a=Q8(o,s,t,i|vt.Self,Ga);if(a!==Ga)return a;let l=o.parent;if(!l){const c=s[e8];if(c){const u=c.get(t,Ga,i);if(u!==Ga)return u}l=e7(s),s=s[cp]}o=l}return r}(e,n,t,i,Ga);if(s!==Ga)return s}const o=Q8(e,n,t,i,Ga);if(o!==Ga)return o}return Y8(n,t,i,r)}function Q8(e,n,t,i,r){const o=function Phe(e){if("string"==typeof e)return e.charCodeAt(0)||0;const n=e.hasOwnProperty(_0)?e[_0]:void 0;return"number"==typeof n?n>=0?n&q8:$he:n}(t);if("function"==typeof o){if(!P8(n,e,i))return i&vt.Host?K8(r,0,i):Y8(n,t,i,r);try{let s;if(s=o(i),null!=s||i&vt.Optional)return s;fD()}finally{V8()}}else if("number"==typeof o){let s=null,a=G8(e,n),l=mp,c=i&vt.Host?n[Hn][Wi]:null;for((-1===a||i&vt.SkipSelf)&&(l=-1===a?fb(e,n):n[a+8],l!==mp&&J8(i,!1)?(s=n[Se],a=M0(l),n=A0(l,n)):a=-1);-1!==a;){const u=n[Se];if(Z8(o,a,u.data)){const d=Nhe(a,n,t,s,i,c);if(d!==Ga)return d}l=n[a+8],l!==mp&&J8(i,n[Se].data[a+8]===c)&&Z8(o,a,n)?(s=u,a=M0(l),n=A0(l,n)):a=-1}}return r}function Nhe(e,n,t,i,r,o){const s=n[Se],a=s.data[e+8],u=hb(a,s,t,null==i?ef(a)&&jD:i!=s&&0!=(3&a.type),r&vt.Host&&o===a);return null!==u?rf(n,s,u,a):Ga}function hb(e,n,t,i,r){const o=e.providerIndexes,s=n.data,a=1048575&o,l=e.directiveStart,u=o>>20,f=r?a+u:e.directiveEnd;for(let h=i?a:a+u;h<f;h++){const p=s[h];if(h<l&&t===p||h>=l&&p.type===t)return h}if(r){const h=s[l];if(h&&Ys(h)&&h.type===t)return l}return null}function rf(e,n,t,i){let r=e[t];const o=n.data;if(function Ihe(e){return e instanceof I0}(r)){const s=r;s.resolving&&function rfe(e,n){const t=n?`. Dependency path: ${n.join(" > ")} > ${e}`:"";throw new ne(-200,`Circular dependency in DI detected for ${e}${t}`)}(function Wt(e){return"function"==typeof e?e.name||e.toString():"object"==typeof e&&null!=e&&"function"==typeof e.type?e.type.name||e.type.toString():nt(e)}(o[t]));const a=ub(s.canSeeViewProviders);s.resolving=!0;const c=s.injectImpl?Gr(s.injectImpl):null;P8(e,i,vt.Default);try{r=e[t]=s.factory(void 0,o,e,i),n.firstCreatePass&&t>=i.directiveStart&&function The(e,n,t){const{ngOnChanges:i,ngOnInit:r,ngDoCheck:o}=n.type.prototype;if(i){const s=v8(n);(t.preOrderHooks??=[]).push(e,s),(t.preOrderCheckHooks??=[]).push(e,s)}r&&(t.preOrderHooks??=[]).push(0-e,r),o&&((t.preOrderHooks??=[]).push(e,o),(t.preOrderCheckHooks??=[]).push(e,o))}(t,o[t],n)}finally{null!==c&&Gr(c),ub(a),s.resolving=!1,V8()}}return r}function Z8(e,n,t){return!!(t[n+(e>>W8)]&1<<e)}function J8(e,n){return!(e&vt.Self||e&vt.Host&&n)}class Cr{constructor(n,t){this._tNode=n,this._lView=t}get(n,t,i){return X8(this._tNode,this._lView,n,Qv(i),t)}}function $he(){return new Cr(Li(),le())}function dt(e){return Xl(()=>{const n=e.prototype.constructor,t=n[Ql]||GD(n),i=Object.prototype;let r=Object.getPrototypeOf(e.prototype).constructor;for(;r&&r!==i;){const o=r[Ql]||GD(r);if(o&&o!==t)return o;r=Object.getPrototypeOf(r)}return o=>new o})}function GD(e){return uD(e)?()=>{const n=GD(et(e));return n&&n()}:tf(e)}function e7(e){const n=e[Se],t=n.type;return 2===t?n.declTNode:1===t?e[Wi]:null}const yp="__parameters__";function bp(e,n,t){return Xl(()=>{const i=function KD(e){return function(...t){if(e){const i=e(...t);for(const r in i)this[r]=i[r]}}}(n);function r(...o){if(this instanceof r)return i.apply(this,o),this;const s=new r(...o);return a.annotation=s,a;function a(l,c,u){const d=l.hasOwnProperty(yp)?l[yp]:Object.defineProperty(l,yp,{value:[]})[yp];for(;d.length<=u;)d.push(null);return(d[u]=d[u]||[]).push(s),l}}return t&&(r.prototype=Object.create(t.prototype)),r.prototype.ngMetadataName=e,r.annotationCls=r,r})}function Cp(e,n){e.forEach(t=>Array.isArray(t)?Cp(t,n):n(t))}function n7(e,n,t){n>=e.length?e.push(t):e.splice(n,0,t)}function gb(e,n){return n>=e.length-1?e.pop():e.splice(n,1)[0]}function R0(e,n){const t=[];for(let i=0;i<e;i++)t.push(n);return t}function Mo(e,n,t){let i=xp(e,n);return i>=0?e[1|i]=t:(i=~i,function Whe(e,n,t,i){let r=e.length;if(r==n)e.push(t,i);else if(1===r)e.push(i,e[0]),e[0]=t;else{for(r--,e.push(e[r-1],e[r]);r>n;)e[r]=e[r-2],r--;e[n]=t,e[n+1]=i}}(e,i,n,t)),i}function YD(e,n){const t=xp(e,n);if(t>=0)return e[1|t]}function xp(e,n){return function r7(e,n,t){let i=0,r=e.length>>t;for(;r!==i;){const o=i+(r-i>>1),s=e[o<<t];if(n===s)return o<<t;s>n?r=o:i=o+1}return~(r<<t)}(e,n,1)}const _b=m0(bp("Optional"),8),yb=m0(bp("SkipSelf"),4);function xb(e){return 128==(128&e.flags)}var cu=function(e){return e[e.Important=1]="Important",e[e.DashCase=2]="DashCase",e}(cu||{});const hpe=/^>|^->|<!--|-->|--!>|<!-$/g,ppe=/(<|>)/g,gpe="\u200b$1\u200b";const eI=new Map;let mpe=0;const nI="__ngContext__";function Gi(e,n){Yr(n)?(e[nI]=n[C0],function ype(e){eI.set(e[C0],e)}(n)):e[nI]=n}let iI;function rI(e,n){return iI(e,n)}function P0(e){const n=e[xn];return yr(n)?n[xn]:n}function E7(e){return T7(e[b0])}function S7(e){return T7(e[Ks])}function T7(e){for(;null!==e&&!yr(e);)e=e[Ks];return e}function Tp(e,n,t,i,r){if(null!=i){let o,s=!1;yr(i)?o=i:Yr(i)&&(s=!0,i=i[Rn]);const a=hn(i);0===e&&null!==t?null==r?A7(n,t,a):sf(n,t,a,r||null,!0):1===e&&null!==t?sf(n,t,a,r||null,!0):2===e?function Ab(e,n,t){const i=Ib(e,n);i&&function Lpe(e,n,t,i){e.removeChild(n,t,i)}(e,i,n,t)}(n,a,s):3===e&&n.destroyNode(a),null!=o&&function Vpe(e,n,t,i,r){const o=t[ja];o!==hn(t)&&Tp(n,e,i,o,r);for(let a=Ni;a<t.length;a++){const l=t[a];$0(l[Se],l,e,n,i,o)}}(n,e,o,t,r)}}function oI(e,n){return e.createComment(function m7(e){return e.replace(hpe,n=>n.replace(ppe,gpe))}(n))}function Tb(e,n,t){return e.createElement(n,t)}function I7(e,n){const t=e[dp],i=t.indexOf(n);T8(n),t.splice(i,1)}function Db(e,n){if(e.length<=Ni)return;const t=Ni+n,i=e[t];if(i){const r=i[w0];null!==r&&r!==e&&I7(r,i),n>0&&(e[t-1][Ks]=i[Ks]);const o=gb(e,Ni+n);!function Mpe(e,n){$0(e,n,n[rt],2,null,null),n[Rn]=null,n[Wi]=null}(i[Se],i);const s=o[Ha];null!==s&&s.detachView(o[Se]),i[xn]=null,i[Ks]=null,i[at]&=-129}return i}function sI(e,n){if(!(256&n[at])){const t=n[rt];n[x0]&&d8(n[x0]),n[E0]&&d8(n[E0]),t.destroyNode&&$0(e,n,t,3,null,null),function Ope(e){let n=e[b0];if(!n)return aI(e[Se],e);for(;n;){let t=null;if(Yr(n))t=n[b0];else{const i=n[Ni];i&&(t=i)}if(!t){for(;n&&!n[Ks]&&n!==e;)Yr(n)&&aI(n[Se],n),n=n[xn];null===n&&(n=e),Yr(n)&&aI(n[Se],n),t=n&&n[Ks]}n=t}}(n)}}function aI(e,n){if(!(256&n[at])){n[at]&=-129,n[at]|=256,function Ppe(e,n){let t;if(null!=e&&null!=(t=e.destroyHooks))for(let i=0;i<t.length;i+=2){const r=n[t[i]];if(!(r instanceof I0)){const o=t[i+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){const a=r[o[s]],l=o[s+1];qa(4,a,l);try{l.call(a)}finally{qa(5,a,l)}}else{qa(4,r,o);try{o.call(r)}finally{qa(5,r,o)}}}}}(e,n),function Npe(e,n){const t=e.cleanup,i=n[ap];if(null!==t)for(let o=0;o<t.length-1;o+=2)if("string"==typeof t[o]){const s=t[o+3];s>=0?i[s]():i[-s].unsubscribe(),o+=2}else t[o].call(i[t[o+1]]);null!==i&&(n[ap]=null);const r=n[ou];if(null!==r){n[ou]=null;for(let o=0;o<r.length;o++)(0,r[o])()}}(e,n),1===n[Se].type&&n[rt].destroy();const t=n[w0];if(null!==t&&yr(n[xn])){t!==n[xn]&&I7(t,n);const i=n[Ha];null!==i&&i.detachView(e)}!function vpe(e){eI.delete(e[C0])}(n)}}function lI(e,n,t){return function M7(e,n,t){let i=n;for(;null!==i&&40&i.type;)i=(n=i).parent;if(null===i)return t[Rn];{const{componentOffset:r}=i;if(r>-1){const{encapsulation:o}=e.data[i.directiveStart+r];if(o===cs.None||o===cs.Emulated)return null}return Xr(i,t)}}(e,n.parent,t)}function sf(e,n,t,i,r){e.insertBefore(n,t,i,r)}function A7(e,n,t){e.appendChild(n,t)}function k7(e,n,t,i,r){null!==i?sf(e,n,t,i,r):A7(e,n,t)}function Ib(e,n){return e.parentNode(n)}function O7(e,n,t){return F7(e,n,t)}let cI,hI,F7=function R7(e,n,t){return 40&e.type?Xr(e,t):null};function Mb(e,n,t,i){const r=lI(e,i,n),o=n[rt],a=O7(i.parent||n[Wi],i,n);if(null!=r)if(Array.isArray(t))for(let l=0;l<t.length;l++)k7(o,r,t[l],a,!1);else k7(o,r,t,a,!1);void 0!==cI&&cI(o,i,n,t,r)}function L0(e,n){if(null!==n){const t=n.type;if(3&t)return Xr(n,e);if(4&t)return uI(-1,e[n.index]);if(8&t){const i=n.child;if(null!==i)return L0(e,i);{const r=e[n.index];return yr(r)?uI(-1,r):hn(r)}}if(32&t)return rI(n,e)()||hn(e[n.index]);{const i=P7(e,n);return null!==i?Array.isArray(i)?i[0]:L0(P0(e[Hn]),i):L0(e,n.next)}}return null}function P7(e,n){return null!==n?e[Hn][Wi].projection[n.projection]:null}function uI(e,n){const t=Ni+e+1;if(t<n.length){const i=n[t],r=i[Se].firstChild;if(null!==r)return L0(i,r)}return n[ja]}function dI(e,n,t,i,r,o,s){for(;null!=t;){const a=i[t.index],l=t.type;if(s&&0===n&&(a&&Gi(hn(a),i),t.flags|=2),32!=(32&t.flags))if(8&l)dI(e,n,t.child,i,r,o,!1),Tp(n,e,r,a,o);else if(32&l){const c=rI(t,i);let u;for(;u=c();)Tp(n,e,r,u,o);Tp(n,e,r,a,o)}else 16&l?$7(e,n,i,t,r,o):Tp(n,e,r,a,o);t=s?t.projectionNext:t.next}}function $0(e,n,t,i,r,o){dI(t,i,e.firstChild,n,r,o,!1)}function $7(e,n,t,i,r,o){const s=t[Hn],l=s[Wi].projection[i.projection];if(Array.isArray(l))for(let c=0;c<l.length;c++)Tp(n,e,r,l[c],o);else{let c=l;const u=s[xn];xb(i)&&(c.flags|=128),dI(e,n,c,u,r,o,!0)}}function B7(e,n,t){""===t?e.removeAttribute(n,"class"):e.setAttribute(n,"class",t)}function V7(e,n,t){const{mergedAttrs:i,classes:r,styles:o}=t;null!==i&&xD(e,n,i),null!==r&&B7(e,n,r),null!==o&&function Upe(e,n,t){e.setAttribute(n,"style",t)}(e,n,o)}class j7{constructor(n){this.changingThisBreaksApplicationSecurity=n}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}function uu(e){return e instanceof j7?e.changingThisBreaksApplicationSecurity:e}const U0=new Ie("ENVIRONMENT_INITIALIZER"),e$=new Ie("INJECTOR",-1),t$=new Ie("INJECTOR_DEF_TYPES");class vI{get(n,t=g0){if(t===g0){const i=new Error(`NullInjectorError: No provider for ${oi(n)}!`);throw i.name="NullInjectorError",i}return t}}function gge(...e){return{\u0275providers:n$(0,e),\u0275fromNgModule:!0}}function n$(e,...n){const t=[],i=new Set;let r;const o=s=>{t.push(s)};return Cp(n,s=>{const a=s;Fb(a,o,[],i)&&(r||=[],r.push(a))}),void 0!==r&&i$(r,o),t}function i$(e,n){for(let t=0;t<e.length;t++){const{ngModule:i,providers:r}=e[t];wI(r,o=>{n(o,i)})}}function Fb(e,n,t,i){if(!(e=et(e)))return!1;let r=null,o=Kv(e);const s=!o&&It(e);if(o||s){if(s&&!s.standalone)return!1;r=e}else{const l=e.ngModule;if(o=Kv(l),!o)return!1;r=l}const a=i.has(r);if(s){if(a)return!1;if(i.add(r),s.dependencies){const l="function"==typeof s.dependencies?s.dependencies():s.dependencies;for(const c of l)Fb(c,n,t,i)}}else{if(!o)return!1;{if(null!=o.imports&&!a){let c;i.add(r);try{Cp(o.imports,u=>{Fb(u,n,t,i)&&(c||=[],c.push(u))})}finally{}void 0!==c&&i$(c,n)}if(!a){const c=tf(r)||(()=>new r);n({provide:r,useFactory:c,deps:Pt},r),n({provide:t$,useValue:r,multi:!0},r),n({provide:U0,useValue:()=>Me(r),multi:!0},r)}const l=o.providers;if(null!=l&&!a){const c=e;wI(l,u=>{n(u,c)})}}}return r!==e&&void 0!==e.providers}function wI(e,n){for(let t of e)dD(t)&&(t=t.\u0275providers),Array.isArray(t)?wI(t,n):n(t)}const mge=tn({provide:String,useValue:tn});function CI(e){return null!==e&&"object"==typeof e&&mge in e}function af(e){return"function"==typeof e}const xI=new Ie("Set Injector scope."),Nb={},yge={};let EI;function Pb(){return void 0===EI&&(EI=new vI),EI}class Ao{}class Ap extends Ao{get destroyed(){return this._destroyed}constructor(n,t,i,r){super(),this.parent=t,this.source=i,this.scopes=r,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,TI(n,s=>this.processProvider(s)),this.records.set(e$,kp(void 0,this)),r.has("environment")&&this.records.set(Ao,kp(void 0,this));const o=this.records.get(xI);null!=o&&"string"==typeof o.value&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(t$.multi,Pt,vt.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const t of this._ngOnDestroyHooks)t.ngOnDestroy();const n=this._onDestroyHooks;this._onDestroyHooks=[];for(const t of n)t()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear()}}onDestroy(n){return this.assertNotDestroyed(),this._onDestroyHooks.push(n),()=>this.removeOnDestroy(n)}runInContext(n){this.assertNotDestroyed();const t=iu(this),i=Gr(void 0);try{return n()}finally{iu(t),Gr(i)}}get(n,t=g0,i=vt.Default){if(this.assertNotDestroyed(),n.hasOwnProperty(z9))return n[z9](this);i=Qv(i);const o=iu(this),s=Gr(void 0);try{if(!(i&vt.SkipSelf)){let l=this.records.get(n);if(void 0===l){const c=function xge(e){return"function"==typeof e||"object"==typeof e&&e instanceof Ie}(n)&&Gv(n);l=c&&this.injectableDefInScope(c)?kp(SI(n),Nb):null,this.records.set(n,l)}if(null!=l)return this.hydrate(n,l)}return(i&vt.Self?Pb():this.parent).get(n,t=i&vt.Optional&&t===g0?null:t)}catch(a){if("NullInjectorError"===a.name){if((a[Xv]=a[Xv]||[]).unshift(oi(n)),o)throw a;return function vfe(e,n,t,i){const r=e[Xv];throw n[$9]&&r.unshift(n[$9]),e.message=function bfe(e,n,t,i=null){e=e&&"\n"===e.charAt(0)&&"\u0275"==e.charAt(1)?e.slice(2):e;let r=oi(n);if(Array.isArray(n))r=n.map(oi).join(" -> ");else if("object"==typeof n){let o=[];for(let s in n)if(n.hasOwnProperty(s)){let a=n[s];o.push(s+":"+("string"==typeof a?JSON.stringify(a):oi(a)))}r=`{${o.join(", ")}}`}return`${t}${i?"("+i+")":""}[${r}]: ${e.replace(pfe,"\n  ")}`}("\n"+e.message,r,t,i),e.ngTokenPath=r,e[Xv]=null,e}(a,n,"R3InjectorError",this.source)}throw a}finally{Gr(s),iu(o)}}resolveInjectorInitializers(){const n=iu(this),t=Gr(void 0);try{const r=this.get(U0.multi,Pt,vt.Self);for(const o of r)o()}finally{iu(n),Gr(t)}}toString(){const n=[],t=this.records;for(const i of t.keys())n.push(oi(i));return`R3Injector[${n.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new ne(205,!1)}processProvider(n){let t=af(n=et(n))?n:et(n&&n.provide);const i=function bge(e){return CI(e)?kp(void 0,e.useValue):kp(s$(e),Nb)}(n);if(af(n)||!0!==n.multi)this.records.get(t);else{let r=this.records.get(t);r||(r=kp(void 0,Nb,!0),r.factory=()=>bD(r.multi),this.records.set(t,r)),t=n,r.multi.push(n)}this.records.set(t,i)}hydrate(n,t){return t.value===Nb&&(t.value=yge,t.value=t.factory()),"object"==typeof t.value&&t.value&&function Cge(e){return null!==e&&"object"==typeof e&&"function"==typeof e.ngOnDestroy}(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}injectableDefInScope(n){if(!n.providedIn)return!1;const t=et(n.providedIn);return"string"==typeof t?"any"===t||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(n){const t=this._onDestroyHooks.indexOf(n);-1!==t&&this._onDestroyHooks.splice(t,1)}}function SI(e){const n=Gv(e),t=null!==n?n.factory:tf(e);if(null!==t)return t;if(e instanceof Ie)throw new ne(204,!1);if(e instanceof Function)return function vge(e){const n=e.length;if(n>0)throw R0(n,"?"),new ne(204,!1);const t=function ufe(e){return e&&(e[Yv]||e[F9])||null}(e);return null!==t?()=>t.factory(e):()=>new e}(e);throw new ne(204,!1)}function s$(e,n,t){let i;if(af(e)){const r=et(e);return tf(r)||SI(r)}if(CI(e))i=()=>et(e.useValue);else if(function o$(e){return!(!e||!e.useFactory)}(e))i=()=>e.useFactory(...bD(e.deps||[]));else if(function r$(e){return!(!e||!e.useExisting)}(e))i=()=>Me(et(e.useExisting));else{const r=et(e&&(e.useClass||e.provide));if(!function wge(e){return!!e.deps}(e))return tf(r)||SI(r);i=()=>new r(...bD(e.deps))}return i}function kp(e,n,t=!1){return{factory:e,value:n,multi:t?[]:void 0}}function TI(e,n){for(const t of e)Array.isArray(t)?TI(t,n):t&&dD(t)?TI(t.\u0275providers,n):n(t)}const Lb=new Ie("AppId",{providedIn:"root",factory:()=>Ege}),Ege="ng",a$=new Ie("Platform Initializer"),fs=new Ie("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),l$=new Ie("AnimationModuleType"),c$=new Ie("CSP nonce",{providedIn:"root",factory:()=>function Ip(){if(void 0!==hI)return hI;if(typeof document<"u")return document;throw new ne(210,!1)}().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});let u$=(e,n,t)=>null;function FI(e,n,t=!1){return u$(e,n,t)}class Fge{}class h${}class Pge{resolveComponentFactory(n){throw function Nge(e){const n=Error(`No component factory found for ${oi(e)}.`);return n.ngComponent=e,n}(n)}}let Hb=(()=>{class e{static#e=this.NULL=new Pge}return e})();function Lge(){return Fp(Li(),le())}function Fp(e,n){return new pn(Xr(e,n))}let pn=(()=>{class e{constructor(t){this.nativeElement=t}static#e=this.__NG_ELEMENT_ID__=Lge}return e})();function $ge(e){return e instanceof pn?e.nativeElement:e}class q0{}let Ki=(()=>{class e{constructor(){this.destroyNode=null}static#e=this.__NG_ELEMENT_ID__=()=>function Bge(){const e=le(),t=Io(Li().index,e);return(Yr(t)?t:e)[rt]}()}return e})(),Vge=(()=>{class e{static#e=this.\u0275prov=Oe({token:e,providedIn:"root",factory:()=>null})}return e})();class W0{constructor(n){this.full=n,this.major=n.split(".")[0],this.minor=n.split(".")[1],this.patch=n.split(".").slice(2).join(".")}}const zge=new W0("16.2.12"),LI={};function y$(e,n=null,t=null,i){const r=v$(e,n,t,i);return r.resolveInjectorInitializers(),r}function v$(e,n=null,t=null,i,r=new Set){const o=[t||Pt,gge(e)];return i=i||("object"==typeof e?void 0:oi(e)),new Ap(o,n||Pb(),i||null,r)}let Zr=(()=>{class e{static#e=this.THROW_IF_NOT_FOUND=g0;static#t=this.NULL=new vI;static create(t,i){if(Array.isArray(t))return y$({name:""},i,t,"");{const r=t.name??"";return y$({name:r},t.parent,t.providers,r)}}static#n=this.\u0275prov=Oe({token:e,providedIn:"any",factory:()=>Me(e$)});static#i=this.__NG_ELEMENT_ID__=-1}return e})();function BI(e){return e.ngOriginalError}class nc{constructor(){this._console=console}handleError(n){const t=this._findOriginalError(n);this._console.error("ERROR",n),t&&this._console.error("ORIGINAL ERROR",t)}_findOriginalError(n){let t=n&&BI(n);for(;t&&BI(t);)t=BI(t);return t||null}}function zI(e){return n=>{setTimeout(e,void 0,n)}}const De=class Kge extends Eo{constructor(n=!1){super(),this.__isAsync=n}emit(n){super.next(n)}subscribe(n,t,i){let r=n,o=t||(()=>null),s=i;if(n&&"object"==typeof n){const l=n;r=l.next?.bind(l),o=l.error?.bind(l),s=l.complete?.bind(l)}this.__isAsync&&(o=zI(o),r&&(r=zI(r)),s&&(s=zI(s)));const a=super.subscribe({next:r,error:o,complete:s});return n instanceof mr&&n.add(a),a}};function w$(...e){}class At{constructor({enableLongStackTrace:n=!1,shouldCoalesceEventChangeDetection:t=!1,shouldCoalesceRunChangeDetection:i=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new De(!1),this.onMicrotaskEmpty=new De(!1),this.onStable=new De(!1),this.onError=new De(!1),typeof Zone>"u")throw new ne(908,!1);Zone.assertZonePatched();const r=this;r._nesting=0,r._outer=r._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(r._inner=r._inner.fork(new Zone.TaskTrackingZoneSpec)),n&&Zone.longStackTraceZoneSpec&&(r._inner=r._inner.fork(Zone.longStackTraceZoneSpec)),r.shouldCoalesceEventChangeDetection=!i&&t,r.shouldCoalesceRunChangeDetection=i,r.lastRequestAnimationFrameId=-1,r.nativeRequestAnimationFrame=function Yge(){const e="function"==typeof fn.requestAnimationFrame;let n=fn[e?"requestAnimationFrame":"setTimeout"],t=fn[e?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&n&&t){const i=n[Zone.__symbol__("OriginalDelegate")];i&&(n=i);const r=t[Zone.__symbol__("OriginalDelegate")];r&&(t=r)}return{nativeRequestAnimationFrame:n,nativeCancelAnimationFrame:t}}().nativeRequestAnimationFrame,function Zge(e){const n=()=>{!function Qge(e){e.isCheckStableRunning||-1!==e.lastRequestAnimationFrameId||(e.lastRequestAnimationFrameId=e.nativeRequestAnimationFrame.call(fn,()=>{e.fakeTopEventTask||(e.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{e.lastRequestAnimationFrameId=-1,HI(e),e.isCheckStableRunning=!0,UI(e),e.isCheckStableRunning=!1},void 0,()=>{},()=>{})),e.fakeTopEventTask.invoke()}),HI(e))}(e)};e._inner=e._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(t,i,r,o,s,a)=>{if(function eme(e){return!(!Array.isArray(e)||1!==e.length)&&!0===e[0].data?.__ignore_ng_zone__}(a))return t.invokeTask(r,o,s,a);try{return C$(e),t.invokeTask(r,o,s,a)}finally{(e.shouldCoalesceEventChangeDetection&&"eventTask"===o.type||e.shouldCoalesceRunChangeDetection)&&n(),x$(e)}},onInvoke:(t,i,r,o,s,a,l)=>{try{return C$(e),t.invoke(r,o,s,a,l)}finally{e.shouldCoalesceRunChangeDetection&&n(),x$(e)}},onHasTask:(t,i,r,o)=>{t.hasTask(r,o),i===r&&("microTask"==o.change?(e._hasPendingMicrotasks=o.microTask,HI(e),UI(e)):"macroTask"==o.change&&(e.hasPendingMacrotasks=o.macroTask))},onHandleError:(t,i,r,o)=>(t.handleError(r,o),e.runOutsideAngular(()=>e.onError.emit(o)),!1)})}(r)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!At.isInAngularZone())throw new ne(909,!1)}static assertNotInAngularZone(){if(At.isInAngularZone())throw new ne(909,!1)}run(n,t,i){return this._inner.run(n,t,i)}runTask(n,t,i,r){const o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+r,n,Xge,w$,w$);try{return o.runTask(s,t,i)}finally{o.cancelTask(s)}}runGuarded(n,t,i){return this._inner.runGuarded(n,t,i)}runOutsideAngular(n){return this._outer.run(n)}}const Xge={};function UI(e){if(0==e._nesting&&!e.hasPendingMicrotasks&&!e.isStable)try{e._nesting++,e.onMicrotaskEmpty.emit(null)}finally{if(e._nesting--,!e.hasPendingMicrotasks)try{e.runOutsideAngular(()=>e.onStable.emit(null))}finally{e.isStable=!0}}}function HI(e){e.hasPendingMicrotasks=!!(e._hasPendingMicrotasks||(e.shouldCoalesceEventChangeDetection||e.shouldCoalesceRunChangeDetection)&&-1!==e.lastRequestAnimationFrameId)}function C$(e){e._nesting++,e.isStable&&(e.isStable=!1,e.onUnstable.emit(null))}function x$(e){e._nesting--,UI(e)}class Jge{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new De,this.onMicrotaskEmpty=new De,this.onStable=new De,this.onError=new De}run(n,t,i){return n.apply(t,i)}runGuarded(n,t,i){return n.apply(t,i)}runOutsideAngular(n){return n()}runTask(n,t,i,r){return n.apply(t,i)}}const E$=new Ie("",{providedIn:"root",factory:S$});function S$(){const e=Te(At);let n=!0;return function efe(...e){const n=p0(e),t=function Gde(e,n){return"number"==typeof aD(e)?e.pop():n}(e,1/0),i=e;return i.length?1===i.length?So(i[0]):rp(t)(ri(i,n)):za}(new zn(r=>{n=e.isStable&&!e.hasPendingMacrotasks&&!e.hasPendingMicrotasks,e.runOutsideAngular(()=>{r.next(n),r.complete()})}),new zn(r=>{let o;e.runOutsideAngular(()=>{o=e.onStable.subscribe(()=>{At.assertNotInAngularZone(),queueMicrotask(()=>{!n&&!e.hasPendingMacrotasks&&!e.hasPendingMicrotasks&&(n=!0,r.next(!0))})})});const s=e.onUnstable.subscribe(()=>{At.assertInAngularZone(),n&&(n=!1,e.runOutsideAngular(()=>{r.next(!1)}))});return()=>{o.unsubscribe(),s.unsubscribe()}}).pipe(k9()))}function T$(e){return e.ownerDocument}function ic(e){return e instanceof Function?e():e}let jI=(()=>{class e{constructor(){this.renderDepth=0,this.handler=null}begin(){this.handler?.validateBegin(),this.renderDepth++}end(){this.renderDepth--,0===this.renderDepth&&this.handler?.execute()}ngOnDestroy(){this.handler?.destroy(),this.handler=null}static#e=this.\u0275prov=Oe({token:e,providedIn:"root",factory:()=>new e})}return e})();function G0(e){for(;e;){e[at]|=64;const n=P0(e);if(TD(e)&&!n)return e;e=n}return null}const k$=new Ie("",{providedIn:"root",factory:()=>!1});let qb=null;function N$(e,n){return e[n]??$$()}function P$(e,n){const t=$$();t.producerNode?.length&&(e[n]=qb,t.lView=e,qb=L$())}const cme={...o8,consumerIsAlwaysLive:!0,consumerMarkedDirty:e=>{G0(e.lView)},lView:null};function L$(){return Object.create(cme)}function $$(){return qb??=L$(),qb}const st={};function $(e){B$(Mt(),le(),wr()+e,!1)}function B$(e,n,t,i){if(!i)if(3==(3&n[at])){const o=e.preOrderCheckHooks;null!==o&&lb(n,o,t)}else{const o=e.preOrderHooks;null!==o&&cb(n,o,0,t)}nf(t)}function G(e,n=vt.Default){const t=le();return null===t?Me(e,n):X8(Li(),t,et(e),n)}function Wb(e,n,t,i,r,o,s,a,l,c,u){const d=n.blueprint.slice();return d[Rn]=r,d[at]=140|i,(null!==c||e&&2048&e[at])&&(d[at]|=2048),S8(d),d[xn]=d[cp]=e,d[Un]=t,d[lp]=s||e&&e[lp],d[rt]=a||e&&e[rt],d[ru]=l||e&&e[ru]||null,d[Wi]=o,d[C0]=function _pe(){return mpe++}(),d[Zl]=u,d[e8]=c,d[Hn]=2==n.type?e[Hn]:d,d}function Lp(e,n,t,i,r){let o=e.data[n];if(null===o)o=function qI(e,n,t,i,r){const o=k8(),s=FD(),l=e.data[n]=function _me(e,n,t,i,r,o){let s=n?n.injectorIndex:-1,a=0;return pp()&&(a|=128),{type:t,index:i,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:r,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:n,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,s?o:o&&o.parent,t,n,i,r);return null===e.firstChild&&(e.firstChild=l),null!==o&&(s?null==o.child&&null!==l.parent&&(o.child=l):null===o.next&&(o.next=l,l.prev=o)),l}(e,n,t,i,r),function _he(){return Je.lFrame.inI18n}()&&(o.flags|=32);else if(64&o.type){o.type=t,o.value=i,o.attrs=r;const s=function D0(){const e=Je.lFrame,n=e.currentTNode;return e.isParent?n:n.parent}();o.injectorIndex=null===s?-1:s.injectorIndex}return Wa(o,!0),o}function K0(e,n,t,i){if(0===t)return-1;const r=n.length;for(let o=0;o<t;o++)n.push(i),e.blueprint.push(i),e.data.push(null);return r}function z$(e,n,t,i,r){const o=N$(n,x0),s=wr(),a=2&i;try{nf(-1),a&&n.length>bt&&B$(e,n,bt,!1),qa(a?2:0,r);const c=a?o:null,u=ID(c);try{null!==c&&(c.dirty=!1),t(i,r)}finally{MD(c,u)}}finally{a&&null===n[x0]&&P$(n,x0),nf(s),qa(a?3:1,r)}}function WI(e,n,t){if(SD(n)){const i=us(null);try{const o=n.directiveEnd;for(let s=n.directiveStart;s<o;s++){const a=e.data[s];a.contentQueries&&a.contentQueries(1,t[s],s)}}finally{us(i)}}}function GI(e,n,t){A8()&&(function Eme(e,n,t,i){const r=t.directiveStart,o=t.directiveEnd;ef(t)&&function kme(e,n,t){const i=Xr(n,e),r=U$(t);let s=16;t.signals?s=4096:t.onPush&&(s=64);const a=Gb(e,Wb(e,r,null,s,i,n,null,e[lp].rendererFactory.createRenderer(i,t),null,null,null));e[n.index]=a}(n,t,e.data[r+t.componentOffset]),e.firstCreatePass||db(t,n),Gi(i,n);const s=t.initialInputs;for(let a=r;a<o;a++){const l=e.data[a],c=rf(n,e,a,t);Gi(c,n),null!==s&&Ome(0,a-r,c,l,0,s),Ys(l)&&(Io(t.index,n)[Un]=rf(n,e,a,t))}}(e,n,t,Xr(t,n)),64==(64&t.flags)&&G$(e,n,t))}function KI(e,n,t=Xr){const i=n.localNames;if(null!==i){let r=n.index+1;for(let o=0;o<i.length;o+=2){const s=i[o+1],a=-1===s?t(n,e):e[s];e[r++]=a}}}function U$(e){const n=e.tView;return null===n||n.incompleteFirstPass?e.tView=YI(1,null,e.template,e.decls,e.vars,e.directiveDefs,e.pipeDefs,e.viewQuery,e.schemas,e.consts,e.id):n}function YI(e,n,t,i,r,o,s,a,l,c,u){const d=bt+i,f=d+r,h=function dme(e,n){const t=[];for(let i=0;i<n;i++)t.push(i<e?null:st);return t}(d,f),p="function"==typeof c?c():c;return h[Se]={type:e,blueprint:h,template:t,queries:null,viewQuery:a,declTNode:n,data:h.slice().fill(null,d),bindingStartIndex:d,expandoStartIndex:f,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof o?o():o,pipeRegistry:"function"==typeof s?s():s,firstChild:null,schemas:l,consts:p,incompleteFirstPass:!1,ssrId:u}}let H$=e=>null;function j$(e,n,t,i){for(let r in e)if(e.hasOwnProperty(r)){t=null===t?{}:t;const o=e[r];null===i?q$(t,n,r,o):i.hasOwnProperty(r)&&q$(t,n,i[r],o)}return t}function q$(e,n,t,i){e.hasOwnProperty(t)?e[t].push(n,i):e[t]=[n,i]}function XI(e,n,t,i){if(A8()){const r=null===i?null:{"":-1},o=function Tme(e,n){const t=e.directiveRegistry;let i=null,r=null;if(t)for(let o=0;o<t.length;o++){const s=t[o];if(K9(n,s.selectors,!1))if(i||(i=[]),Ys(s))if(null!==s.findHostDirectiveDefs){const a=[];r=r||new Map,s.findHostDirectiveDefs(s,a,r),i.unshift(...a,s),QI(e,n,a.length)}else i.unshift(s),QI(e,n,0);else r=r||new Map,s.findHostDirectiveDefs?.(s,i,r),i.push(s)}return null===i?null:[i,r]}(e,t);let s,a;null===o?s=a=null:[s,a]=o,null!==s&&W$(e,n,t,s,r,a),r&&function Dme(e,n,t){if(n){const i=e.localNames=[];for(let r=0;r<n.length;r+=2){const o=t[n[r+1]];if(null==o)throw new ne(-301,!1);i.push(n[r],o)}}}(t,i,r)}t.mergedAttrs=y0(t.mergedAttrs,t.attrs)}function W$(e,n,t,i,r,o){for(let c=0;c<i.length;c++)WD(db(t,n),e,i[c].type);!function Mme(e,n,t){e.flags|=1,e.directiveStart=n,e.directiveEnd=n+t,e.providerIndexes=n}(t,e.data.length,i.length);for(let c=0;c<i.length;c++){const u=i[c];u.providersResolver&&u.providersResolver(u)}let s=!1,a=!1,l=K0(e,n,i.length,null);for(let c=0;c<i.length;c++){const u=i[c];t.mergedAttrs=y0(t.mergedAttrs,u.hostAttrs),Ame(e,t,n,l,u),Ime(l,u,r),null!==u.contentQueries&&(t.flags|=4),(null!==u.hostBindings||null!==u.hostAttrs||0!==u.hostVars)&&(t.flags|=64);const d=u.type.prototype;!s&&(d.ngOnChanges||d.ngOnInit||d.ngDoCheck)&&((e.preOrderHooks??=[]).push(t.index),s=!0),!a&&(d.ngOnChanges||d.ngDoCheck)&&((e.preOrderCheckHooks??=[]).push(t.index),a=!0),l++}!function yme(e,n,t){const r=n.directiveEnd,o=e.data,s=n.attrs,a=[];let l=null,c=null;for(let u=n.directiveStart;u<r;u++){const d=o[u],f=t?t.get(d):null,p=f?f.outputs:null;l=j$(d.inputs,u,l,f?f.inputs:null),c=j$(d.outputs,u,c,p);const g=null===l||null===s||G9(n)?null:Rme(l,u,s);a.push(g)}null!==l&&(l.hasOwnProperty("class")&&(n.flags|=8),l.hasOwnProperty("style")&&(n.flags|=16)),n.initialInputs=a,n.inputs=l,n.outputs=c}(e,t,o)}function G$(e,n,t){const i=t.directiveStart,r=t.directiveEnd,o=t.index,s=function vhe(){return Je.lFrame.currentDirectiveIndex}();try{nf(o);for(let a=i;a<r;a++){const l=e.data[a],c=n[a];PD(a),(null!==l.hostBindings||0!==l.hostVars||null!==l.hostAttrs)&&Sme(l,c)}}finally{nf(-1),PD(s)}}function Sme(e,n){null!==e.hostBindings&&e.hostBindings(1,n)}function QI(e,n,t){n.componentOffset=t,(e.components??=[]).push(n.index)}function Ime(e,n,t){if(t){if(n.exportAs)for(let i=0;i<n.exportAs.length;i++)t[n.exportAs[i]]=e;Ys(n)&&(t[""]=e)}}function Ame(e,n,t,i,r){e.data[i]=r;const o=r.factory||(r.factory=tf(r.type)),s=new I0(o,Ys(r),G);e.blueprint[i]=s,t[i]=s,function Cme(e,n,t,i,r){const o=r.hostBindings;if(o){let s=e.hostBindingOpCodes;null===s&&(s=e.hostBindingOpCodes=[]);const a=~n.index;(function xme(e){let n=e.length;for(;n>0;){const t=e[--n];if("number"==typeof t&&t<0)return t}return 0})(s)!=a&&s.push(a),s.push(t,i,o)}}(e,n,i,K0(e,t,r.hostVars,st),r)}function Ka(e,n,t,i,r,o){const s=Xr(e,n);!function ZI(e,n,t,i,r,o,s){if(null==o)e.removeAttribute(n,r,t);else{const a=null==s?nt(o):s(o,i||"",r);e.setAttribute(n,r,a,t)}}(n[rt],s,o,e.value,t,i,r)}function Ome(e,n,t,i,r,o){const s=o[n];if(null!==s)for(let a=0;a<s.length;)K$(i,t,s[a++],s[a++],s[a++])}function K$(e,n,t,i,r){const o=us(null);try{const s=e.inputTransforms;null!==s&&s.hasOwnProperty(i)&&(r=s[i].call(n,r)),null!==e.setInput?e.setInput(n,r,t,i):n[i]=r}finally{us(o)}}function Rme(e,n,t){let i=null,r=0;for(;r<t.length;){const o=t[r];if(0!==o)if(5!==o){if("number"==typeof o)break;if(e.hasOwnProperty(o)){null===i&&(i=[]);const s=e[o];for(let a=0;a<s.length;a+=2)if(s[a]===n){i.push(o,s[a+1],t[r+1]);break}}r+=2}else r+=2;else r+=4}return i}function Y$(e,n,t,i){return[e,!0,!1,n,null,0,i,t,null,null,null]}function X$(e,n){const t=e.contentQueries;if(null!==t)for(let i=0;i<t.length;i+=2){const o=t[i+1];if(-1!==o){const s=e.data[o];$D(t[i]),s.contentQueries(2,n[o],o)}}}function Gb(e,n){return e[b0]?e[J9][Ks]=n:e[b0]=n,e[J9]=n,n}function JI(e,n,t){$D(0);const i=us(null);try{n(e,t)}finally{us(i)}}function Q$(e){return e[ap]||(e[ap]=[])}function Z$(e){return e.cleanup||(e.cleanup=[])}function eB(e,n){const t=e[ru],i=t?t.get(nc,null):null;i&&i.handleError(n)}function eM(e,n,t,i,r){for(let o=0;o<t.length;){const s=t[o++],a=t[o++];K$(e.data[s],n[s],i,a,r)}}function rc(e,n,t){const i=ob(n,e);!function D7(e,n,t){e.setValue(n,t)}(e[rt],i,t)}function Fme(e,n){const t=Io(n,e),i=t[Se];!function Nme(e,n){for(let t=n.length;t<e.blueprint.length;t++)n.push(e.blueprint[t])}(i,t);const r=t[Rn];null!==r&&null===t[Zl]&&(t[Zl]=FI(r,t[ru])),tM(i,t,t[Un])}function tM(e,n,t){BD(n);try{const i=e.viewQuery;null!==i&&JI(1,i,t);const r=e.template;null!==r&&z$(e,n,r,1,t),e.firstCreatePass&&(e.firstCreatePass=!1),e.staticContentQueries&&X$(e,n),e.staticViewQueries&&JI(2,e.viewQuery,t);const o=e.components;null!==o&&function Pme(e,n){for(let t=0;t<n.length;t++)Fme(e,n[t])}(n,o)}catch(i){throw e.firstCreatePass&&(e.incompleteFirstPass=!0,e.firstCreatePass=!1),i}finally{n[at]&=-5,VD()}}let tB=(()=>{class e{constructor(){this.all=new Set,this.queue=new Map}create(t,i,r){const o=typeof Zone>"u"?null:Zone.current,s=function Yfe(e,n,t){const i=Object.create(Xfe);t&&(i.consumerAllowSignalWrites=!0),i.fn=e,i.schedule=n;const r=s=>{i.cleanupFn=s};return i.ref={notify:()=>c8(i),run:()=>{if(i.dirty=!1,i.hasRun&&!u8(i))return;i.hasRun=!0;const s=ID(i);try{i.cleanupFn(),i.cleanupFn=y8,i.fn(r)}finally{MD(i,s)}},cleanup:()=>i.cleanupFn()},i.ref}(t,c=>{this.all.has(c)&&this.queue.set(c,o)},r);let a;this.all.add(s),s.notify();const l=()=>{s.cleanup(),a?.(),this.all.delete(s),this.queue.delete(s)};return a=i?.onDestroy(l),{destroy:l}}flush(){if(0!==this.queue.size)for(const[t,i]of this.queue)this.queue.delete(t),i?i.run(()=>t.run()):t.run()}get isQueueEmpty(){return 0===this.queue.size}static#e=this.\u0275prov=Oe({token:e,providedIn:"root",factory:()=>new e})}return e})();function Kb(e,n,t){let i=t?e.styles:null,r=t?e.classes:null,o=0;if(null!==n)for(let s=0;s<n.length;s++){const a=n[s];"number"==typeof a?o=a:1==o?r=cD(r,a):2==o&&(i=cD(i,a+": "+n[++s]+";"))}t?e.styles=i:e.stylesWithoutHost=i,t?e.classes=r:e.classesWithoutHost=r}function Y0(e,n,t,i,r=!1){for(;null!==t;){const o=n[t.index];null!==o&&i.push(hn(o)),yr(o)&&nB(o,i);const s=t.type;if(8&s)Y0(e,n,t.child,i);else if(32&s){const a=rI(t,n);let l;for(;l=a();)i.push(l)}else if(16&s){const a=P7(n,t);if(Array.isArray(a))i.push(...a);else{const l=P0(n[Hn]);Y0(l[Se],l,a,i,!0)}}t=r?t.projectionNext:t.next}return i}function nB(e,n){for(let t=Ni;t<e.length;t++){const i=e[t],r=i[Se].firstChild;null!==r&&Y0(i[Se],i,r,n)}e[ja]!==e[Rn]&&n.push(e[ja])}function Yb(e,n,t,i=!0){const r=n[lp],o=r.rendererFactory,s=r.afterRenderEventManager;o.begin?.(),s?.begin();try{iB(e,n,e.template,t)}catch(l){throw i&&eB(n,l),l}finally{o.end?.(),r.effectManager?.flush(),s?.end()}}function iB(e,n,t,i){const r=n[at];if(256!=(256&r)){n[lp].effectManager?.flush(),BD(n);try{S8(n),function R8(e){return Je.lFrame.bindingIndex=e}(e.bindingStartIndex),null!==t&&z$(e,n,t,2,i);const s=3==(3&r);if(s){const c=e.preOrderCheckHooks;null!==c&&lb(n,c,null)}else{const c=e.preOrderHooks;null!==c&&cb(n,c,0,null),zD(n,0)}if(function Bme(e){for(let n=E7(e);null!==n;n=S7(n)){if(!n[t8])continue;const t=n[dp];for(let i=0;i<t.length;i++){she(t[i])}}}(n),rB(n,2),null!==e.contentQueries&&X$(e,n),s){const c=e.contentCheckHooks;null!==c&&lb(n,c)}else{const c=e.contentHooks;null!==c&&cb(n,c,1),zD(n,1)}!function ume(e,n){const t=e.hostBindingOpCodes;if(null===t)return;const i=N$(n,E0);try{for(let r=0;r<t.length;r++){const o=t[r];if(o<0)nf(~o);else{const s=o,a=t[++r],l=t[++r];yhe(a,s),i.dirty=!1;const c=ID(i);try{l(2,n[s])}finally{MD(i,c)}}}}finally{null===n[E0]&&P$(n,E0),nf(-1)}}(e,n);const a=e.components;null!==a&&sB(n,a,0);const l=e.viewQuery;if(null!==l&&JI(2,l,i),s){const c=e.viewCheckHooks;null!==c&&lb(n,c)}else{const c=e.viewHooks;null!==c&&cb(n,c,2),zD(n,2)}!0===e.firstUpdatePass&&(e.firstUpdatePass=!1),n[at]&=-73,T8(n)}finally{VD()}}}function rB(e,n){for(let t=E7(e);null!==t;t=S7(t))for(let i=Ni;i<t.length;i++)oB(t[i],n)}function Vme(e,n,t){oB(Io(n,e),t)}function oB(e,n){if(!function rhe(e){return 128==(128&e[at])}(e))return;const t=e[Se],i=e[at];if(80&i&&0===n||1024&i||2===n)iB(t,e,t.template,e[Un]);else if(e[v0]>0){rB(e,1);const r=t.components;null!==r&&sB(e,r,1)}}function sB(e,n,t){for(let i=0;i<n.length;i++)Vme(e,n[i],t)}class X0{get rootNodes(){const n=this._lView,t=n[Se];return Y0(t,n,t.firstChild,[])}constructor(n,t){this._lView=n,this._cdRefInjectingView=t,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Un]}set context(n){this._lView[Un]=n}get destroyed(){return 256==(256&this._lView[at])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const n=this._lView[xn];if(yr(n)){const t=n[8],i=t?t.indexOf(this):-1;i>-1&&(Db(n,i),gb(t,i))}this._attachedToViewContainer=!1}sI(this._lView[Se],this._lView)}onDestroy(n){!function I8(e,n){if(256==(256&e[at]))throw new ne(911,!1);null===e[ou]&&(e[ou]=[]),e[ou].push(n)}(this._lView,n)}markForCheck(){G0(this._cdRefInjectingView||this._lView)}detach(){this._lView[at]&=-129}reattach(){this._lView[at]|=128}detectChanges(){Yb(this._lView[Se],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new ne(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function kpe(e,n){$0(e,n,n[rt],2,null,null)}(this._lView[Se],this._lView)}attachToAppRef(n){if(this._attachedToViewContainer)throw new ne(902,!1);this._appRef=n}}class zme extends X0{constructor(n){super(n),this._view=n}detectChanges(){const n=this._view;Yb(n[Se],n,n[Un],!1)}checkNoChanges(){}get context(){return null}}class aB extends Hb{constructor(n){super(),this.ngModule=n}resolveComponentFactory(n){const t=It(n);return new Q0(t,this.ngModule)}}function lB(e){const n=[];for(let t in e)e.hasOwnProperty(t)&&n.push({propName:e[t],templateName:t});return n}class Hme{constructor(n,t){this.injector=n,this.parentInjector=t}get(n,t,i){i=Qv(i);const r=this.injector.get(n,LI,i);return r!==LI||t===LI?r:this.parentInjector.get(n,t,i)}}class Q0 extends h${get inputs(){const n=this.componentDef,t=n.inputTransforms,i=lB(n.inputs);if(null!==t)for(const r of i)t.hasOwnProperty(r.propName)&&(r.transform=t[r.propName]);return i}get outputs(){return lB(this.componentDef.outputs)}constructor(n,t){super(),this.componentDef=n,this.ngModule=t,this.componentType=n.type,this.selector=function Afe(e){return e.map(Mfe).join(",")}(n.selectors),this.ngContentSelectors=n.ngContentSelectors?n.ngContentSelectors:[],this.isBoundToModule=!!t}create(n,t,i,r){let o=(r=r||this.ngModule)instanceof Ao?r:r?.injector;o&&null!==this.componentDef.getStandaloneInjector&&(o=this.componentDef.getStandaloneInjector(o)||o);const s=o?new Hme(n,o):n,a=s.get(q0,null);if(null===a)throw new ne(407,!1);const d={rendererFactory:a,sanitizer:s.get(Vge,null),effectManager:s.get(tB,null),afterRenderEventManager:s.get(jI,null)},f=a.createRenderer(null,this.componentDef),h=this.componentDef.selectors[0][0]||"div",p=i?function fme(e,n,t,i){const o=i.get(k$,!1)||t===cs.ShadowDom,s=e.selectRootElement(n,o);return function hme(e){H$(e)}(s),s}(f,i,this.componentDef.encapsulation,s):Tb(f,h,function Ume(e){const n=e.toLowerCase();return"svg"===n?"svg":"math"===n?"math":null}(h)),_=this.componentDef.signals?4608:this.componentDef.onPush?576:528;let y=null;null!==p&&(y=FI(p,s,!0));const v=YI(0,null,null,1,0,null,null,null,null,null,null),b=Wb(null,v,null,_,null,null,d,f,s,null,y);let w,x;BD(b);try{const C=this.componentDef;let S,A=null;C.findHostDirectiveDefs?(S=[],A=new Map,C.findHostDirectiveDefs(C,S,A),S.push(C)):S=[C];const M=function qme(e,n){const t=e[Se],i=bt;return e[i]=n,Lp(t,i,2,"#host",null)}(b,p),N=function Wme(e,n,t,i,r,o,s){const a=r[Se];!function Gme(e,n,t,i){for(const r of e)n.mergedAttrs=y0(n.mergedAttrs,r.hostAttrs);null!==n.mergedAttrs&&(Kb(n,n.mergedAttrs,!0),null!==t&&V7(i,t,n))}(i,e,n,s);let l=null;null!==n&&(l=FI(n,r[ru]));const c=o.rendererFactory.createRenderer(n,t);let u=16;t.signals?u=4096:t.onPush&&(u=64);const d=Wb(r,U$(t),null,u,r[e.index],e,o,c,null,null,l);return a.firstCreatePass&&QI(a,e,i.length-1),Gb(r,d),r[e.index]=d}(M,p,C,S,b,d,f);x=E8(v,bt),p&&function Yme(e,n,t,i){if(i)xD(e,t,["ng-version",zge.full]);else{const{attrs:r,classes:o}=function kfe(e){const n=[],t=[];let i=1,r=2;for(;i<e.length;){let o=e[i];if("string"==typeof o)2===r?""!==o&&n.push(o,e[++i]):8===r&&t.push(o);else{if(!Gs(r))break;r=o}i++}return{attrs:n,classes:t}}(n.selectors[0]);r&&xD(e,t,r),o&&o.length>0&&B7(e,t,o.join(" "))}}(f,C,p,i),void 0!==t&&function Xme(e,n,t){const i=e.projection=[];for(let r=0;r<n.length;r++){const o=t[r];i.push(null!=o?Array.from(o):null)}}(x,this.ngContentSelectors,t),w=function Kme(e,n,t,i,r,o){const s=Li(),a=r[Se],l=Xr(s,r);W$(a,r,s,t,null,i);for(let u=0;u<t.length;u++)Gi(rf(r,a,s.directiveStart+u,s),r);G$(a,r,s),l&&Gi(l,r);const c=rf(r,a,s.directiveStart+s.componentOffset,s);if(e[Un]=r[Un]=c,null!==o)for(const u of o)u(c,n);return WI(a,s,e),c}(N,C,S,A,b,[Qme]),tM(v,b,null)}finally{VD()}return new jme(this.componentType,w,Fp(x,b),b,x)}}class jme extends Fge{constructor(n,t,i,r,o){super(),this.location=i,this._rootLView=r,this._tNode=o,this.previousInputValues=null,this.instance=t,this.hostView=this.changeDetectorRef=new zme(r),this.componentType=n}setInput(n,t){const i=this._tNode.inputs;let r;if(null!==i&&(r=i[n])){if(this.previousInputValues??=new Map,this.previousInputValues.has(n)&&Object.is(this.previousInputValues.get(n),t))return;const o=this._rootLView;eM(o[Se],o,r,n,t),this.previousInputValues.set(n,t),G0(Io(this._tNode.index,o))}}get injector(){return new Cr(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(n){this.hostView.onDestroy(n)}}function Qme(){const e=Li();ab(le()[Se],e)}function qe(e){let n=function cB(e){return Object.getPrototypeOf(e.prototype).constructor}(e.type),t=!0;const i=[e];for(;n;){let r;if(Ys(e))r=n.\u0275cmp||n.\u0275dir;else{if(n.\u0275cmp)throw new ne(903,!1);r=n.\u0275dir}if(r){if(t){i.push(r);const s=e;s.inputs=Xb(e.inputs),s.inputTransforms=Xb(e.inputTransforms),s.declaredInputs=Xb(e.declaredInputs),s.outputs=Xb(e.outputs);const a=r.hostBindings;a&&t0e(e,a);const l=r.viewQuery,c=r.contentQueries;if(l&&Jme(e,l),c&&e0e(e,c),qv(e.inputs,r.inputs),qv(e.declaredInputs,r.declaredInputs),qv(e.outputs,r.outputs),null!==r.inputTransforms&&(null===s.inputTransforms&&(s.inputTransforms={}),qv(s.inputTransforms,r.inputTransforms)),Ys(r)&&r.data.animation){const u=e.data;u.animation=(u.animation||[]).concat(r.data.animation)}}const o=r.features;if(o)for(let s=0;s<o.length;s++){const a=o[s];a&&a.ngInherit&&a(e),a===qe&&(t=!1)}}n=Object.getPrototypeOf(n)}!function Zme(e){let n=0,t=null;for(let i=e.length-1;i>=0;i--){const r=e[i];r.hostVars=n+=r.hostVars,r.hostAttrs=y0(r.hostAttrs,t=y0(t,r.hostAttrs))}}(i)}function Xb(e){return e===Ua?{}:e===Pt?[]:e}function Jme(e,n){const t=e.viewQuery;e.viewQuery=t?(i,r)=>{n(i,r),t(i,r)}:n}function e0e(e,n){const t=e.contentQueries;e.contentQueries=t?(i,r,o)=>{n(i,r,o),t(i,r,o)}:n}function t0e(e,n){const t=e.hostBindings;e.hostBindings=t?(i,r)=>{n(i,r),t(i,r)}:n}function Qb(e){return!!nM(e)&&(Array.isArray(e)||!(e instanceof Map)&&Symbol.iterator in e)}function nM(e){return null!==e&&("function"==typeof e||"object"==typeof e)}function Ya(e,n,t){return e[n]=t}function Z0(e,n){return e[n]}function Yi(e,n,t){return!Object.is(e[n],t)&&(e[n]=t,!0)}function lf(e,n,t,i){const r=Yi(e,n,t);return Yi(e,n+1,i)||r}function hs(e,n,t,i,r,o){const s=lf(e,n,t,i);return lf(e,n+2,r,o)||s}function ve(e,n,t,i){const r=le();return Yi(r,gp(),n)&&(Mt(),Ka(An(),r,e,n,t,i)),ve}function Vp(e,n,t,i,r,o){const a=lf(e,function Jl(){return Je.lFrame.bindingIndex}(),t,r);return ec(2),a?n+nt(t)+i+nt(r)+o:st}function B(e,n,t,i,r,o,s,a){const l=le(),c=Mt(),u=e+bt,d=c.firstCreatePass?function T0e(e,n,t,i,r,o,s,a,l){const c=n.consts,u=Lp(n,e,4,s||null,au(c,a));XI(n,t,u,au(c,l)),ab(n,u);const d=u.tView=YI(2,u,i,r,o,n.directiveRegistry,n.pipeRegistry,null,n.schemas,c,null);return null!==n.queries&&(n.queries.template(n,u),d.queries=n.queries.embeddedTView(u)),u}(u,c,l,n,t,i,r,o,s):c.data[u];Wa(d,!1);const f=TB(c,l,d,e);sb()&&Mb(c,l,f,d),Gi(f,l),Gb(l,l[u]=Y$(f,l,f,d)),nb(d)&&GI(c,l,d),null!=s&&KI(l,d,a)}let TB=function DB(e,n,t,i){return lu(!0),n[rt].createComment("")};function Xi(e){return function hp(e,n){return e[n]}(function mhe(){return Je.lFrame.contextLView}(),bt+e)}function k(e,n,t){const i=le();return Yi(i,gp(),n)&&function ko(e,n,t,i,r,o,s,a){const l=Xr(n,t);let u,c=n.inputs;!a&&null!=c&&(u=c[i])?(eM(e,t,u,i,r),ef(n)&&function bme(e,n){const t=Io(n,e);16&t[at]||(t[at]|=64)}(t,n.index)):3&n.type&&(i=function vme(e){return"class"===e?"className":"for"===e?"htmlFor":"formaction"===e?"formAction":"innerHtml"===e?"innerHTML":"readonly"===e?"readOnly":"tabindex"===e?"tabIndex":e}(i),r=null!=s?s(r,n.value||"",i):r,o.setProperty(l,i,r))}(Mt(),An(),i,e,n,i[rt],t,!1),k}function lM(e,n,t,i,r){const s=r?"class":"style";eM(e,t,n.inputs[s],s,i)}function q(e,n,t,i){const r=le(),o=Mt(),s=bt+e,a=r[rt],l=o.firstCreatePass?function A0e(e,n,t,i,r,o){const s=n.consts,l=Lp(n,e,2,i,au(s,r));return XI(n,t,l,au(s,o)),null!==l.attrs&&Kb(l,l.attrs,!1),null!==l.mergedAttrs&&Kb(l,l.mergedAttrs,!0),null!==n.queries&&n.queries.elementStart(n,l),l}(s,o,r,n,t,i):o.data[s],c=IB(o,r,l,a,n,e);r[s]=c;const u=nb(l);return Wa(l,!0),V7(a,c,l),32!=(32&l.flags)&&sb()&&Mb(o,r,c,l),0===function lhe(){return Je.lFrame.elementDepthCount}()&&Gi(c,r),function che(){Je.lFrame.elementDepthCount++}(),u&&(GI(o,r,l),WI(o,l,r)),null!==i&&KI(r,l),q}function W(){let e=Li();FD()?ND():(e=e.parent,Wa(e,!1));const n=e;(function dhe(e){return Je.skipHydrationRootTNode===e})(n)&&function ghe(){Je.skipHydrationRootTNode=null}(),function uhe(){Je.lFrame.elementDepthCount--}();const t=Mt();return t.firstCreatePass&&(ab(t,e),SD(e)&&t.queries.elementEnd(e)),null!=n.classesWithoutHost&&function Mhe(e){return 0!=(8&e.flags)}(n)&&lM(t,n,le(),n.classesWithoutHost,!0),null!=n.stylesWithoutHost&&function Ahe(e){return 0!=(16&e.flags)}(n)&&lM(t,n,le(),n.stylesWithoutHost,!1),W}function _e(e,n,t,i){return q(e,n,t,i),W(),_e}let IB=(e,n,t,i,r,o)=>(lu(!0),Tb(i,r,function z8(){return Je.lFrame.currentNamespace}()));function Ke(e,n,t){const i=le(),r=Mt(),o=e+bt,s=r.firstCreatePass?function R0e(e,n,t,i,r){const o=n.consts,s=au(o,i),a=Lp(n,e,8,"ng-container",s);return null!==s&&Kb(a,s,!0),XI(n,t,a,au(o,r)),null!==n.queries&&n.queries.elementStart(n,a),a}(o,r,i,n,t):r.data[o];Wa(s,!0);const a=MB(r,i,s,e);return i[o]=a,sb()&&Mb(r,i,a,s),Gi(a,i),nb(s)&&(GI(r,i,s),WI(r,s,i)),null!=t&&KI(i,s),Ke}function Ye(){let e=Li();const n=Mt();return FD()?ND():(e=e.parent,Wa(e,!1)),n.firstCreatePass&&(ab(n,e),SD(e)&&n.queries.elementEnd(e)),Ye}function wt(e,n,t){return Ke(e,n,t),Ye(),wt}let MB=(e,n,t,i)=>(lu(!0),oI(n[rt],""));function ft(){return le()}function n_(e){return!!e&&"function"==typeof e.then}function AB(e){return!!e&&"function"==typeof e.subscribe}function we(e,n,t,i){const r=le(),o=Mt(),s=Li();return function OB(e,n,t,i,r,o,s){const a=nb(i),c=e.firstCreatePass&&Z$(e),u=n[Un],d=Q$(n);let f=!0;if(3&i.type||s){const g=Xr(i,n),m=s?s(g):g,_=d.length,y=s?b=>s(hn(b[i.index])):i.index;let v=null;if(!s&&a&&(v=function P0e(e,n,t,i){const r=e.cleanup;if(null!=r)for(let o=0;o<r.length-1;o+=2){const s=r[o];if(s===t&&r[o+1]===i){const a=n[ap],l=r[o+2];return a.length>l?a[l]:null}"string"==typeof s&&(o+=2)}return null}(e,n,r,i.index)),null!==v)(v.__ngLastListenerFn__||v).__ngNextListenerFn__=o,v.__ngLastListenerFn__=o,f=!1;else{o=FB(i,n,u,o,!1);const b=t.listen(m,r,o);d.push(o,b),c&&c.push(r,y,_,_+1)}}else o=FB(i,n,u,o,!1);const h=i.outputs;let p;if(f&&null!==h&&(p=h[r])){const g=p.length;if(g)for(let m=0;m<g;m+=2){const w=n[p[m]][p[m+1]].subscribe(o),x=d.length;d.push(o,w),c&&c.push(r,i.index,x,-(x+1))}}}(o,r,r[rt],s,e,n,i),we}function RB(e,n,t,i){try{return qa(6,n,t),!1!==t(i)}catch(r){return eB(e,r),!1}finally{qa(7,n,t)}}function FB(e,n,t,i,r){return function o(s){if(s===Function)return i;G0(e.componentOffset>-1?Io(e.index,n):n);let l=RB(n,t,i,s),c=o.__ngNextListenerFn__;for(;c;)l=RB(n,t,c,s)&&l,c=c.__ngNextListenerFn__;return r&&!1===l&&s.preventDefault(),l}}function L(e=1){return function whe(e){return(Je.lFrame.contextLView=function Che(e,n){for(;e>0;)n=n[cp],e--;return n}(e,Je.lFrame.contextLView))[Un]}(e)}function L0e(e,n){let t=null;const i=function Sfe(e){const n=e.attrs;if(null!=n){const t=n.indexOf(5);if(!(1&t))return n[t+1]}return null}(e);for(let r=0;r<n.length;r++){const o=n[r];if("*"!==o){if(null===i?K9(e,o,!0):Ife(i,o))return r}else t=r}return t}function Xa(e){const n=le()[Hn][Wi];if(!n.projection){const i=n.projection=R0(e?e.length:1,null),r=i.slice();let o=n.child;for(;null!==o;){const s=e?L0e(o,e):0;null!==s&&(r[s]?r[s].projectionNext=o:i[s]=o,r[s]=o),o=o.next}}}function Jr(e,n=0,t){const i=le(),r=Mt(),o=Lp(r,bt+e,16,null,t||null);null===o.projection&&(o.projection=n),ND(),(!i[Zl]||pp())&&32!=(32&o.flags)&&function Bpe(e,n,t){$7(n[rt],0,n,t,lI(e,t,n),O7(t.parent||n[Wi],t,n))}(r,i,o)}function nw(e,n){return e<<17|n<<2}function du(e){return e>>17&32767}function uM(e){return 2|e}function cf(e){return(131068&e)>>2}function dM(e,n){return-131069&e|n<<2}function fM(e){return 1|e}function jB(e,n,t,i,r){const o=e[t+1],s=null===n;let a=i?du(o):cf(o),l=!1;for(;0!==a&&(!1===l||s);){const u=e[a+1];H0e(e[a],n)&&(l=!0,e[a+1]=i?fM(u):uM(u)),a=i?du(u):cf(u)}l&&(e[t+1]=i?uM(o):fM(o))}function H0e(e,n){return null===e||null==n||(Array.isArray(e)?e[1]:e)===n||!(!Array.isArray(e)||"string"!=typeof n)&&xp(e,n)>=0}const ai={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function qB(e){return e.substring(ai.key,ai.keyEnd)}function j0e(e){return e.substring(ai.value,ai.valueEnd)}function WB(e,n){const t=ai.textEnd;return t===n?-1:(n=ai.keyEnd=function G0e(e,n,t){for(;n<t&&e.charCodeAt(n)>32;)n++;return n}(e,ai.key=n,t),Gp(e,n,t))}function GB(e,n){const t=ai.textEnd;let i=ai.key=Gp(e,n,t);return t===i?-1:(i=ai.keyEnd=function K0e(e,n,t){let i;for(;n<t&&(45===(i=e.charCodeAt(n))||95===i||(-33&i)>=65&&(-33&i)<=90||i>=48&&i<=57);)n++;return n}(e,i,t),i=YB(e,i,t),i=ai.value=Gp(e,i,t),i=ai.valueEnd=function Y0e(e,n,t){let i=-1,r=-1,o=-1,s=n,a=s;for(;s<t;){const l=e.charCodeAt(s++);if(59===l)return a;34===l||39===l?a=s=XB(e,l,s,t):n===s-4&&85===o&&82===r&&76===i&&40===l?a=s=XB(e,41,s,t):l>32&&(a=s),o=r,r=i,i=-33&l}return a}(e,i,t),YB(e,i,t))}function KB(e){ai.key=0,ai.keyEnd=0,ai.value=0,ai.valueEnd=0,ai.textEnd=e.length}function Gp(e,n,t){for(;n<t&&e.charCodeAt(n)<=32;)n++;return n}function YB(e,n,t,i){return(n=Gp(e,n,t))<t&&n++,n}function XB(e,n,t,i){let r=-1,o=t;for(;o<i;){const s=e.charCodeAt(o++);if(s==n&&92!==r)return o;r=92==s&&92===r?0:s}throw new Error}function iw(e,n,t){return Xs(e,n,t,!1),iw}function fu(e,n){return Xs(e,n,null,!0),fu}function ps(e){Qs(JB,X0e,e,!1)}function X0e(e,n){for(let t=function W0e(e){return KB(e),GB(e,Gp(e,0,ai.textEnd))}(n);t>=0;t=GB(n,t))JB(e,qB(n),j0e(n))}function Xe(e){Qs(n_e,Qa,e,!0)}function Qa(e,n){for(let t=function q0e(e){return KB(e),WB(e,Gp(e,0,ai.textEnd))}(n);t>=0;t=WB(n,t))Mo(e,qB(n),!0)}function Xs(e,n,t,i){const r=le(),o=Mt(),s=ec(2);o.firstUpdatePass&&ZB(o,e,s,i),n!==st&&Yi(r,s,n)&&eV(o,o.data[wr()],r,r[rt],e,r[s+1]=function r_e(e,n){return null==e||""===e||("string"==typeof n?e+=n:"object"==typeof e&&(e=oi(uu(e)))),e}(n,t),i,s)}function Qs(e,n,t,i){const r=Mt(),o=ec(2);r.firstUpdatePass&&ZB(r,null,o,i);const s=le();if(t!==st&&Yi(s,o,t)){const a=r.data[wr()];if(nV(a,i)&&!QB(r,o)){let l=i?a.classesWithoutHost:a.stylesWithoutHost;null!==l&&(t=cD(l,t||"")),lM(r,a,s,t,i)}else!function i_e(e,n,t,i,r,o,s,a){r===st&&(r=Pt);let l=0,c=0,u=0<r.length?r[0]:null,d=0<o.length?o[0]:null;for(;null!==u||null!==d;){const f=l<r.length?r[l+1]:void 0,h=c<o.length?o[c+1]:void 0;let g,p=null;u===d?(l+=2,c+=2,f!==h&&(p=d,g=h)):null===d||null!==u&&u<d?(l+=2,p=u):(c+=2,p=d,g=h),null!==p&&eV(e,n,t,i,p,g,s,a),u=l<r.length?r[l]:null,d=c<o.length?o[c]:null}}(r,a,s,s[rt],s[o+1],s[o+1]=function t_e(e,n,t){if(null==t||""===t)return Pt;const i=[],r=uu(t);if(Array.isArray(r))for(let o=0;o<r.length;o++)e(i,r[o],!0);else if("object"==typeof r)for(const o in r)r.hasOwnProperty(o)&&e(i,o,r[o]);else"string"==typeof r&&n(i,r);return i}(e,n,t),i,o)}}function QB(e,n){return n>=e.expandoStartIndex}function ZB(e,n,t,i){const r=e.data;if(null===r[t+1]){const o=r[wr()],s=QB(e,t);nV(o,i)&&null===n&&!s&&(n=!1),n=function Q0e(e,n,t,i){const r=function LD(e){const n=Je.lFrame.currentDirectiveIndex;return-1===n?null:e[n]}(e);let o=i?n.residualClasses:n.residualStyles;if(null===r)0===(i?n.classBindings:n.styleBindings)&&(t=i_(t=hM(null,e,n,t,i),n.attrs,i),o=null);else{const s=n.directiveStylingLast;if(-1===s||e[s]!==r)if(t=hM(r,e,n,t,i),null===o){let l=function Z0e(e,n,t){const i=t?n.classBindings:n.styleBindings;if(0!==cf(i))return e[du(i)]}(e,n,i);void 0!==l&&Array.isArray(l)&&(l=hM(null,e,n,l[1],i),l=i_(l,n.attrs,i),function J0e(e,n,t,i){e[du(t?n.classBindings:n.styleBindings)]=i}(e,n,i,l))}else o=function e_e(e,n,t){let i;const r=n.directiveEnd;for(let o=1+n.directiveStylingLast;o<r;o++)i=i_(i,e[o].hostAttrs,t);return i_(i,n.attrs,t)}(e,n,i)}return void 0!==o&&(i?n.residualClasses=o:n.residualStyles=o),t}(r,o,n,i),function z0e(e,n,t,i,r,o){let s=o?n.classBindings:n.styleBindings,a=du(s),l=cf(s);e[i]=t;let u,c=!1;if(Array.isArray(t)?(u=t[1],(null===u||xp(t,u)>0)&&(c=!0)):u=t,r)if(0!==l){const f=du(e[a+1]);e[i+1]=nw(f,a),0!==f&&(e[f+1]=dM(e[f+1],i)),e[a+1]=function B0e(e,n){return 131071&e|n<<17}(e[a+1],i)}else e[i+1]=nw(a,0),0!==a&&(e[a+1]=dM(e[a+1],i)),a=i;else e[i+1]=nw(l,0),0===a?a=i:e[l+1]=dM(e[l+1],i),l=i;c&&(e[i+1]=uM(e[i+1])),jB(e,u,i,!0),jB(e,u,i,!1),function U0e(e,n,t,i,r){const o=r?e.residualClasses:e.residualStyles;null!=o&&"string"==typeof n&&xp(o,n)>=0&&(t[i+1]=fM(t[i+1]))}(n,u,e,i,o),s=nw(a,l),o?n.classBindings=s:n.styleBindings=s}(r,o,n,t,s,i)}}function hM(e,n,t,i,r){let o=null;const s=t.directiveEnd;let a=t.directiveStylingLast;for(-1===a?a=t.directiveStart:a++;a<s&&(o=n[a],i=i_(i,o.hostAttrs,r),o!==e);)a++;return null!==e&&(t.directiveStylingLast=a),i}function i_(e,n,t){const i=t?1:2;let r=-1;if(null!==n)for(let o=0;o<n.length;o++){const s=n[o];"number"==typeof s?r=s:r===i&&(Array.isArray(e)||(e=void 0===e?[]:["",e]),Mo(e,s,!!t||n[++o]))}return void 0===e?null:e}function JB(e,n,t){Mo(e,n,uu(t))}function n_e(e,n,t){const i=String(n);""!==i&&!i.includes(" ")&&Mo(e,i,t)}function eV(e,n,t,i,r,o,s,a){if(!(3&n.type))return;const l=e.data,c=l[a+1],u=function V0e(e){return 1==(1&e)}(c)?tV(l,n,t,r,cf(c),s):void 0;rw(u)||(rw(o)||function $0e(e){return 2==(2&e)}(c)&&(o=tV(l,null,t,r,a,s)),function zpe(e,n,t,i,r){if(n)r?e.addClass(t,i):e.removeClass(t,i);else{let o=-1===i.indexOf("-")?void 0:cu.DashCase;null==r?e.removeStyle(t,i,o):("string"==typeof r&&r.endsWith("!important")&&(r=r.slice(0,-10),o|=cu.Important),e.setStyle(t,i,r,o))}}(i,s,ob(wr(),t),r,o))}function tV(e,n,t,i,r,o){const s=null===n;let a;for(;r>0;){const l=e[r],c=Array.isArray(l),u=c?l[1]:l,d=null===u;let f=t[r+1];f===st&&(f=d?Pt:void 0);let h=d?YD(f,i):u===i?f:void 0;if(c&&!rw(h)&&(h=YD(l,i)),rw(h)&&(a=h,s))return a;const p=e[r+1];r=s?du(p):cf(p)}if(null!==n){let l=o?n.residualClasses:n.residualStyles;null!=l&&(a=YD(l,i))}return a}function rw(e){return void 0!==e}function nV(e,n){return 0!=(e.flags&(n?8:16))}function pt(e,n=""){const t=le(),i=Mt(),r=e+bt,o=i.firstCreatePass?Lp(i,r,1,n,null):i.data[r],s=iV(i,t,o,n,e);t[r]=s,sb()&&Mb(i,t,s,o),Wa(o,!1)}let iV=(e,n,t,i,r)=>(lu(!0),function Sb(e,n){return e.createText(n)}(n[rt],i));function Jn(e){return Za("",e,""),Jn}function Za(e,n,t){const i=le(),r=function Bp(e,n,t,i){return Yi(e,gp(),t)?n+nt(t)+i:st}(i,e,n,t);return r!==st&&rc(i,wr(),r),Za}function pM(e,n,t,i,r){const o=le(),s=Vp(o,e,n,t,i,r);return s!==st&&rc(o,wr(),s),pM}const Yp="en-US";let EV=Yp;function _M(e,n,t,i,r){if(e=et(e),Array.isArray(e))for(let o=0;o<e.length;o++)_M(e[o],n,t,i,r);else{const o=Mt(),s=le(),a=Li();let l=af(e)?e:et(e.provide);const c=s$(e),u=1048575&a.providerIndexes,d=a.directiveStart,f=a.providerIndexes>>20;if(af(e)||!e.multi){const h=new I0(c,r,G),p=vM(l,n,r?u:u+f,d);-1===p?(WD(db(a,s),o,l),yM(o,e,n.length),n.push(l),a.directiveStart++,a.directiveEnd++,r&&(a.providerIndexes+=1048576),t.push(h),s.push(h)):(t[p]=h,s[p]=h)}else{const h=vM(l,n,u+f,d),p=vM(l,n,u,u+f),m=p>=0&&t[p];if(r&&!m||!r&&!(h>=0&&t[h])){WD(db(a,s),o,l);const _=function Sye(e,n,t,i,r){const o=new I0(e,t,G);return o.multi=[],o.index=n,o.componentProviders=0,YV(o,r,i&&!t),o}(r?Eye:xye,t.length,r,i,c);!r&&m&&(t[p].providerFactory=_),yM(o,e,n.length,0),n.push(l),a.directiveStart++,a.directiveEnd++,r&&(a.providerIndexes+=1048576),t.push(_),s.push(_)}else yM(o,e,h>-1?h:p,YV(t[r?p:h],c,!r&&i));!r&&i&&m&&t[p].componentProviders++}}}function yM(e,n,t,i){const r=af(n),o=function _ge(e){return!!e.useClass}(n);if(r||o){const l=(o?et(n.useClass):n).prototype.ngOnDestroy;if(l){const c=e.destroyHooks||(e.destroyHooks=[]);if(!r&&n.multi){const u=c.indexOf(t);-1===u?c.push(t,[i,l]):c[u+1].push(i,l)}else c.push(t,l)}}}function YV(e,n,t){return t&&e.componentProviders++,e.multi.push(n)-1}function vM(e,n,t,i){for(let r=t;r<i;r++)if(n[r]===e)return r;return-1}function xye(e,n,t,i){return bM(this.multi,[])}function Eye(e,n,t,i){const r=this.multi;let o;if(this.providerFactory){const s=this.providerFactory.componentProviders,a=rf(t,t[Se],this.providerFactory.index,i);o=a.slice(0,s),bM(r,o);for(let l=s;l<a.length;l++)o.push(a[l])}else o=[],bM(r,o);return o}function bM(e,n){for(let t=0;t<e.length;t++)n.push((0,e[t])());return n}function Gt(e,n=[]){return t=>{t.providersResolver=(i,r)=>function Cye(e,n,t){const i=Mt();if(i.firstCreatePass){const r=Ys(e);_M(t,i.data,i.blueprint,r,!0),_M(n,i.data,i.blueprint,r,!1)}}(i,r?r(e):e,n)}}class df{}class XV{}class wM extends df{constructor(n,t,i){super(),this._parent=t,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new aB(this);const r=Do(n);this._bootstrapComponents=ic(r.bootstrap),this._r3Injector=v$(n,t,[{provide:df,useValue:this},{provide:Hb,useValue:this.componentFactoryResolver},...i],oi(n),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(n)}get injector(){return this._r3Injector}destroy(){const n=this._r3Injector;!n.destroyed&&n.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(n){this.destroyCbs.push(n)}}class CM extends XV{constructor(n){super(),this.moduleType=n}create(n){return new wM(this.moduleType,n,[])}}class QV extends df{constructor(n){super(),this.componentFactoryResolver=new aB(this),this.instance=null;const t=new Ap([...n.providers,{provide:df,useValue:this},{provide:Hb,useValue:this.componentFactoryResolver}],n.parent||Pb(),n.debugName,new Set(["environment"]));this.injector=t,n.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(n){this.injector.onDestroy(n)}}function xM(e,n,t=null){return new QV({providers:e,parent:n,debugName:t,runEnvironmentInitializers:!0}).injector}let Iye=(()=>{class e{constructor(t){this._injector=t,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){const i=n$(0,t.type),r=i.length>0?xM([i],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,r)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(const t of this.cachedInjectors.values())null!==t&&t.destroy()}finally{this.cachedInjectors.clear()}}static#e=this.\u0275prov=Oe({token:e,providedIn:"environment",factory:()=>new e(Me(Ao))})}return e})();function cn(e){e.getStandaloneInjector=n=>n.get(Iye).getOrCreateStandaloneInjector(e)}function ff(e,n,t){const i=br()+e,r=le();return r[i]===st?Ya(r,i,t?n.call(t):n()):Z0(r,i)}function _t(e,n,t,i){return function sz(e,n,t,i,r,o){const s=n+t;return Yi(e,s,r)?Ya(e,s+1,o?i.call(o,r):i(r)):c_(e,s+1)}(le(),br(),e,n,t,i)}function jn(e,n,t,i,r){return function az(e,n,t,i,r,o,s){const a=n+t;return lf(e,a,r,o)?Ya(e,a+2,s?i.call(s,r,o):i(r,o)):c_(e,a+2)}(le(),br(),e,n,t,i,r)}function hu(e,n,t,i,r,o){return function lz(e,n,t,i,r,o,s,a){const l=n+t;return function Zb(e,n,t,i,r){const o=lf(e,n,t,i);return Yi(e,n+2,r)||o}(e,l,r,o,s)?Ya(e,l+3,a?i.call(a,r,o,s):i(r,o,s)):c_(e,l+3)}(le(),br(),e,n,t,i,r,o)}function SM(e,n,t,i,r,o,s){return function cz(e,n,t,i,r,o,s,a,l){const c=n+t;return hs(e,c,r,o,s,a)?Ya(e,c+4,l?i.call(l,r,o,s,a):i(r,o,s,a)):c_(e,c+4)}(le(),br(),e,n,t,i,r,o,s)}function oz(e,n,t,i){return function uz(e,n,t,i,r,o){let s=n+t,a=!1;for(let l=0;l<r.length;l++)Yi(e,s++,r[l])&&(a=!0);return a?Ya(e,s,i.apply(o,r)):c_(e,s)}(le(),br(),e,n,t,i)}function c_(e,n){const t=e[n];return t===st?void 0:t}function Gye(){return this._results[Symbol.iterator]()}class TM{static#e=Symbol.iterator;get changes(){return this._changes||(this._changes=new De)}constructor(n=!1){this._emitDistinctChangesOnly=n,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const t=TM.prototype;t[Symbol.iterator]||(t[Symbol.iterator]=Gye)}get(n){return this._results[n]}map(n){return this._results.map(n)}filter(n){return this._results.filter(n)}find(n){return this._results.find(n)}reduce(n,t){return this._results.reduce(n,t)}forEach(n){this._results.forEach(n)}some(n){return this._results.some(n)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(n,t){const i=this;i.dirty=!1;const r=function ds(e){return e.flat(Number.POSITIVE_INFINITY)}(n);(this._changesDetected=!function jhe(e,n,t){if(e.length!==n.length)return!1;for(let i=0;i<e.length;i++){let r=e[i],o=n[i];if(t&&(r=t(r),o=t(o)),o!==r)return!1}return!0}(i._results,r,t))&&(i._results=r,i.length=r.length,i.last=r[this.length-1],i.first=r[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}function Yye(e,n,t,i=!0){const r=n[Se];if(function Rpe(e,n,t,i){const r=Ni+i,o=t.length;i>0&&(t[r-1][Ks]=n),i<o-Ni?(n[Ks]=t[r],n7(t,Ni+i,n)):(t.push(n),n[Ks]=null),n[xn]=t;const s=n[w0];null!==s&&t!==s&&function Fpe(e,n){const t=e[dp];n[Hn]!==n[xn][xn][Hn]&&(e[t8]=!0),null===t?e[dp]=[n]:t.push(n)}(s,n);const a=n[Ha];null!==a&&a.insertView(e),n[at]|=128}(r,n,e,t),i){const o=uI(t,e),s=n[rt],a=Ib(s,e[ja]);null!==a&&function Ape(e,n,t,i,r,o){i[Rn]=r,i[Wi]=n,$0(e,i,t,1,r,o)}(r,e[Wi],s,n,a,o)}}let Zs=(()=>{class e{static#e=this.__NG_ELEMENT_ID__=Zye}return e})();const Xye=Zs,Qye=class extends Xye{constructor(n,t,i){super(),this._declarationLView=n,this._declarationTContainer=t,this.elementRef=i}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(n,t){return this.createEmbeddedViewImpl(n,t)}createEmbeddedViewImpl(n,t,i){const r=function Kye(e,n,t,i){const r=n.tView,a=Wb(e,r,t,4096&e[at]?4096:16,null,n,null,null,null,i?.injector??null,i?.hydrationInfo??null);a[w0]=e[n.index];const c=e[Ha];return null!==c&&(a[Ha]=c.createEmbeddedView(r)),tM(r,a,t),a}(this._declarationLView,this._declarationTContainer,n,{injector:t,hydrationInfo:i});return new X0(r)}};function Zye(){return cw(Li(),le())}function cw(e,n){return 4&e.type?new Qye(n,e,Fp(e,n)):null}let Oo=(()=>{class e{static#e=this.__NG_ELEMENT_ID__=r1e}return e})();function r1e(){return _z(Li(),le())}const o1e=Oo,gz=class extends o1e{constructor(n,t,i){super(),this._lContainer=n,this._hostTNode=t,this._hostLView=i}get element(){return Fp(this._hostTNode,this._hostLView)}get injector(){return new Cr(this._hostTNode,this._hostLView)}get parentInjector(){const n=fb(this._hostTNode,this._hostLView);if(HD(n)){const t=A0(n,this._hostLView),i=M0(n);return new Cr(t[Se].data[i+8],t)}return new Cr(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(n){const t=mz(this._lContainer);return null!==t&&t[n]||null}get length(){return this._lContainer.length-Ni}createEmbeddedView(n,t,i){let r,o;"number"==typeof i?r=i:null!=i&&(r=i.index,o=i.injector);const a=n.createEmbeddedViewImpl(t||{},o,null);return this.insertImpl(a,r,false),a}createComponent(n,t,i,r,o){const s=n&&!function O0(e){return"function"==typeof e}(n);let a;if(s)a=t;else{const g=t||{};a=g.index,i=g.injector,r=g.projectableNodes,o=g.environmentInjector||g.ngModuleRef}const l=s?n:new Q0(It(n)),c=i||this.parentInjector;if(!o&&null==l.ngModule){const m=(s?c:this.parentInjector).get(Ao,null);m&&(o=m)}It(l.componentType??{});const h=l.create(c,r,null,o);return this.insertImpl(h.hostView,a,false),h}insert(n,t){return this.insertImpl(n,t,!1)}insertImpl(n,t,i){const r=n._lView;if(function ohe(e){return yr(e[xn])}(r)){const l=this.indexOf(n);if(-1!==l)this.detach(l);else{const c=r[xn],u=new gz(c,c[Wi],c[xn]);u.detach(u.indexOf(n))}}const s=this._adjustIndex(t),a=this._lContainer;return Yye(a,r,s,!i),n.attachToViewContainerRef(),n7(DM(a),s,n),n}move(n,t){return this.insert(n,t)}indexOf(n){const t=mz(this._lContainer);return null!==t?t.indexOf(n):-1}remove(n){const t=this._adjustIndex(n,-1),i=Db(this._lContainer,t);i&&(gb(DM(this._lContainer),t),sI(i[Se],i))}detach(n){const t=this._adjustIndex(n,-1),i=Db(this._lContainer,t);return i&&null!=gb(DM(this._lContainer),t)?new X0(i):null}_adjustIndex(n,t=0){return n??this.length+t}};function mz(e){return e[8]}function DM(e){return e[8]||(e[8]=[])}function _z(e,n){let t;const i=n[e.index];return yr(i)?t=i:(t=Y$(i,n,null,e),n[e.index]=t,Gb(n,t)),yz(t,n,e,i),new gz(t,e,n)}let yz=function vz(e,n,t,i){if(e[ja])return;let r;r=8&t.type?hn(i):function s1e(e,n){const t=e[rt],i=t.createComment(""),r=Xr(n,e);return sf(t,Ib(t,r),i,function $pe(e,n){return e.nextSibling(n)}(t,r),!1),i}(n,t),e[ja]=r};class IM{constructor(n){this.queryList=n,this.matches=null}clone(){return new IM(this.queryList)}setDirty(){this.queryList.setDirty()}}class MM{constructor(n=[]){this.queries=n}createEmbeddedView(n){const t=n.queries;if(null!==t){const i=null!==n.contentQueries?n.contentQueries[0]:t.length,r=[];for(let o=0;o<i;o++){const s=t.getByIndex(o);r.push(this.queries[s.indexInDeclarationView].clone())}return new MM(r)}return null}insertView(n){this.dirtyQueriesWithMatches(n)}detachView(n){this.dirtyQueriesWithMatches(n)}dirtyQueriesWithMatches(n){for(let t=0;t<this.queries.length;t++)null!==Ez(n,t).matches&&this.queries[t].setDirty()}}class bz{constructor(n,t,i=null){this.predicate=n,this.flags=t,this.read=i}}class AM{constructor(n=[]){this.queries=n}elementStart(n,t){for(let i=0;i<this.queries.length;i++)this.queries[i].elementStart(n,t)}elementEnd(n){for(let t=0;t<this.queries.length;t++)this.queries[t].elementEnd(n)}embeddedTView(n){let t=null;for(let i=0;i<this.length;i++){const r=null!==t?t.length:0,o=this.getByIndex(i).embeddedTView(n,r);o&&(o.indexInDeclarationView=i,null!==t?t.push(o):t=[o])}return null!==t?new AM(t):null}template(n,t){for(let i=0;i<this.queries.length;i++)this.queries[i].template(n,t)}getByIndex(n){return this.queries[n]}get length(){return this.queries.length}track(n){this.queries.push(n)}}class kM{constructor(n,t=-1){this.metadata=n,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=t}elementStart(n,t){this.isApplyingToNode(t)&&this.matchTNode(n,t)}elementEnd(n){this._declarationNodeIndex===n.index&&(this._appliesToNextNode=!1)}template(n,t){this.elementStart(n,t)}embeddedTView(n,t){return this.isApplyingToNode(n)?(this.crossesNgTemplate=!0,this.addMatch(-n.index,t),new kM(this.metadata)):null}isApplyingToNode(n){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const t=this._declarationNodeIndex;let i=n.parent;for(;null!==i&&8&i.type&&i.index!==t;)i=i.parent;return t===(null!==i?i.index:-1)}return this._appliesToNextNode}matchTNode(n,t){const i=this.metadata.predicate;if(Array.isArray(i))for(let r=0;r<i.length;r++){const o=i[r];this.matchTNodeWithReadOption(n,t,c1e(t,o)),this.matchTNodeWithReadOption(n,t,hb(t,n,o,!1,!1))}else i===Zs?4&t.type&&this.matchTNodeWithReadOption(n,t,-1):this.matchTNodeWithReadOption(n,t,hb(t,n,i,!1,!1))}matchTNodeWithReadOption(n,t,i){if(null!==i){const r=this.metadata.read;if(null!==r)if(r===pn||r===Oo||r===Zs&&4&t.type)this.addMatch(t.index,-2);else{const o=hb(t,n,r,!1,!1);null!==o&&this.addMatch(t.index,o)}else this.addMatch(t.index,i)}}addMatch(n,t){null===this.matches?this.matches=[n,t]:this.matches.push(n,t)}}function c1e(e,n){const t=e.localNames;if(null!==t)for(let i=0;i<t.length;i+=2)if(t[i]===n)return t[i+1];return null}function d1e(e,n,t,i){return-1===t?function u1e(e,n){return 11&e.type?Fp(e,n):4&e.type?cw(e,n):null}(n,e):-2===t?function f1e(e,n,t){return t===pn?Fp(n,e):t===Zs?cw(n,e):t===Oo?_z(n,e):void 0}(e,n,i):rf(e,e[Se],t,n)}function wz(e,n,t,i){const r=n[Ha].queries[i];if(null===r.matches){const o=e.data,s=t.matches,a=[];for(let l=0;l<s.length;l+=2){const c=s[l];a.push(c<0?null:d1e(n,o[c],s[l+1],t.metadata.read))}r.matches=a}return r.matches}function OM(e,n,t,i){const r=e.queries.getByIndex(t),o=r.matches;if(null!==o){const s=wz(e,n,r,t);for(let a=0;a<o.length;a+=2){const l=o[a];if(l>0)i.push(s[a/2]);else{const c=o[a+1],u=n[-l];for(let d=Ni;d<u.length;d++){const f=u[d];f[w0]===f[xn]&&OM(f[Se],f,c,i)}if(null!==u[dp]){const d=u[dp];for(let f=0;f<d.length;f++){const h=d[f];OM(h[Se],h,c,i)}}}}}return i}function Ct(e){const n=le(),t=Mt(),i=N8();$D(i+1);const r=Ez(t,i);if(e.dirty&&function ihe(e){return 4==(4&e[at])}(n)===(2==(2&r.metadata.flags))){if(null===r.matches)e.reset([]);else{const o=r.crossesNgTemplate?OM(t,n,i,[]):wz(t,n,r,i);e.reset(o,$ge),e.notifyOnChanges()}return!0}return!1}function Fn(e,n,t){const i=Mt();i.firstCreatePass&&(xz(i,new bz(e,n,t),-1),2==(2&n)&&(i.staticViewQueries=!0)),Cz(i,le(),n)}function Er(e,n,t,i){const r=Mt();if(r.firstCreatePass){const o=Li();xz(r,new bz(n,t,i),o.index),function p1e(e,n){const t=e.contentQueries||(e.contentQueries=[]);n!==(t.length?t[t.length-1]:-1)&&t.push(e.queries.length-1,n)}(r,e),2==(2&t)&&(r.staticContentQueries=!0)}Cz(r,le(),t)}function xt(){return function h1e(e,n){return e[Ha].queries[n].queryList}(le(),N8())}function Cz(e,n,t){const i=new TM(4==(4&t));(function mme(e,n,t,i){const r=Q$(n);r.push(t),e.firstCreatePass&&Z$(e).push(i,r.length-1)})(e,n,i,i.destroy),null===n[Ha]&&(n[Ha]=new MM),n[Ha].queries.push(new IM(i))}function xz(e,n,t){null===e.queries&&(e.queries=new AM),e.queries.track(new kM(n,t))}function Ez(e,n){return e.queries.getByIndex(n)}function Ja(e,n){return cw(e,n)}const $M=new Ie("Application Initializer");let BM=(()=>{class e{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((t,i)=>{this.resolve=t,this.reject=i}),this.appInits=Te($M,{optional:!0})??[]}runInitializers(){if(this.initialized)return;const t=[];for(const r of this.appInits){const o=r();if(n_(o))t.push(o);else if(AB(o)){const s=new Promise((a,l)=>{o.subscribe({complete:a,error:l})});t.push(s)}}const i=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{i()}).catch(r=>{this.reject(r)}),0===t.length&&i(),this.initialized=!0}static#e=this.\u0275fac=function(i){return new(i||e)};static#t=this.\u0275prov=Oe({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),zz=(()=>{class e{log(t){console.log(t)}warn(t){console.warn(t)}static#e=this.\u0275fac=function(i){return new(i||e)};static#t=this.\u0275prov=Oe({token:e,factory:e.\u0275fac,providedIn:"platform"})}return e})();const oc=new Ie("LocaleId",{providedIn:"root",factory:()=>Te(oc,vt.Optional|vt.SkipSelf)||function N1e(){return typeof $localize<"u"&&$localize.locale||Yp}()});let fw=(()=>{class e{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new as(!1)}add(){this.hasPendingTasks.next(!0);const t=this.taskId++;return this.pendingTasks.add(t),t}remove(t){this.pendingTasks.delete(t),0===this.pendingTasks.size&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks.next(!1)}static#e=this.\u0275fac=function(i){return new(i||e)};static#t=this.\u0275prov=Oe({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();class $1e{constructor(n,t){this.ngModuleFactory=n,this.componentFactories=t}}let Uz=(()=>{class e{compileModuleSync(t){return new CM(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){const i=this.compileModuleSync(t),o=ic(Do(t).declarations).reduce((s,a)=>{const l=It(a);return l&&s.push(new Q0(l)),s},[]);return new $1e(i,o)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}static#e=this.\u0275fac=function(i){return new(i||e)};static#t=this.\u0275prov=Oe({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();const Wz=new Ie(""),pw=new Ie("");let jM,UM=(()=>{class e{constructor(t,i,r){this._ngZone=t,this.registry=i,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,jM||(function sve(e){jM=e}(r),r.addToWindow(i)),this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{At.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;0!==this._callbacks.length;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb(this._didWork)}this._didWork=!1});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(i=>!i.updateCb||!i.updateCb(t)||(clearTimeout(i.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,i,r){let o=-1;i&&i>0&&(o=setTimeout(()=>{this._callbacks=this._callbacks.filter(s=>s.timeoutId!==o),t(this._didWork,this.getPendingTasks())},i)),this._callbacks.push({doneCb:t,timeoutId:o,updateCb:r})}whenStable(t,i,r){if(r&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(t,i,r),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(t){this.registry.registerApplication(t,this)}unregisterApplication(t){this.registry.unregisterApplication(t)}findProviders(t,i,r){return[]}static#e=this.\u0275fac=function(i){return new(i||e)(Me(At),Me(HM),Me(pw))};static#t=this.\u0275prov=Oe({token:e,factory:e.\u0275fac})}return e})(),HM=(()=>{class e{constructor(){this._applications=new Map}registerApplication(t,i){this._applications.set(t,i)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,i=!0){return jM?.findTestabilityInTree(this,t,i)??null}static#e=this.\u0275fac=function(i){return new(i||e)};static#t=this.\u0275prov=Oe({token:e,factory:e.\u0275fac,providedIn:"platform"})}return e})(),pu=null;const Gz=new Ie("AllowMultipleToken"),qM=new Ie("PlatformDestroyListeners"),WM=new Ie("appBootstrapListener");class Yz{constructor(n,t){this.name=n,this.token=t}}function Qz(e,n,t=[]){const i=`Platform: ${n}`,r=new Ie(i);return(o=[])=>{let s=GM();if(!s||s.injector.get(Gz,!1)){const a=[...t,...o,{provide:r,useValue:!0}];e?e(a):function cve(e){if(pu&&!pu.get(Gz,!1))throw new ne(400,!1);(function Kz(){!function jfe(e){p8=e}(()=>{throw new ne(600,!1)})})(),pu=e;const n=e.get(Jz);(function Xz(e){e.get(a$,null)?.forEach(t=>t())})(e)}(function Zz(e=[],n){return Zr.create({name:n,providers:[{provide:xI,useValue:"platform"},{provide:qM,useValue:new Set([()=>pu=null])},...e]})}(a,i))}return function dve(e){const n=GM();if(!n)throw new ne(401,!1);return n}()}}function GM(){return pu?.get(Jz)??null}let Jz=(()=>{class e{constructor(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(t,i){const r=function fve(e="zone.js",n){return"noop"===e?new Jge:"zone.js"===e?new At(n):e}(i?.ngZone,function eU(e){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:e?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:e?.runCoalescing??!1}}({eventCoalescing:i?.ngZoneEventCoalescing,runCoalescing:i?.ngZoneRunCoalescing}));return r.run(()=>{const o=function Dye(e,n,t){return new wM(e,n,t)}(t.moduleType,this.injector,function oU(e){return[{provide:At,useFactory:e},{provide:U0,multi:!0,useFactory:()=>{const n=Te(pve,{optional:!0});return()=>n.initialize()}},{provide:rU,useFactory:hve},{provide:E$,useFactory:S$}]}(()=>r)),s=o.injector.get(nc,null);return r.runOutsideAngular(()=>{const a=r.onError.subscribe({next:l=>{s.handleError(l)}});o.onDestroy(()=>{gw(this._modules,o),a.unsubscribe()})}),function tU(e,n,t){try{const i=t();return n_(i)?i.catch(r=>{throw n.runOutsideAngular(()=>e.handleError(r)),r}):i}catch(i){throw n.runOutsideAngular(()=>e.handleError(i)),i}}(s,r,()=>{const a=o.injector.get(BM);return a.runInitializers(),a.donePromise.then(()=>(function SV(e){ls(e,"Expected localeId to be defined"),"string"==typeof e&&(EV=e.toLowerCase().replace(/_/g,"-"))}(o.injector.get(oc,Yp)||Yp),this._moduleDoBootstrap(o),o))})})}bootstrapModule(t,i=[]){const r=nU({},i);return function ave(e,n,t){const i=new CM(t);return Promise.resolve(i)}(0,0,t).then(o=>this.bootstrapModuleFactory(o,r))}_moduleDoBootstrap(t){const i=t.injector.get(hf);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(r=>i.bootstrap(r));else{if(!t.instance.ngDoBootstrap)throw new ne(-403,!1);t.instance.ngDoBootstrap(i)}this._modules.push(t)}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new ne(404,!1);this._modules.slice().forEach(i=>i.destroy()),this._destroyListeners.forEach(i=>i());const t=this._injector.get(qM,null);t&&(t.forEach(i=>i()),t.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}static#e=this.\u0275fac=function(i){return new(i||e)(Me(Zr))};static#t=this.\u0275prov=Oe({token:e,factory:e.\u0275fac,providedIn:"platform"})}return e})();function nU(e,n){return Array.isArray(n)?n.reduce(nU,e):{...e,...n}}let hf=(()=>{class e{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=Te(rU),this.zoneIsStable=Te(E$),this.componentTypes=[],this.components=[],this.isStable=Te(fw).hasPendingTasks.pipe(Ws(t=>t?Qe(!1):this.zoneIsStable),function tfe(e,n=tu){return e=e??nfe,ii((t,i)=>{let r,o=!0;t.subscribe(Zn(i,s=>{const a=n(s);(o||!e(r,a))&&(o=!1,r=a,i.next(s))}))})}(),k9()),this._injector=Te(Ao)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(t,i){const r=t instanceof h$;if(!this._injector.get(BM).done)throw!r&&function sp(e){const n=It(e)||Fi(e)||_r(e);return null!==n&&n.standalone}(t),new ne(405,!1);let s;s=r?t:this._injector.get(Hb).resolveComponentFactory(t),this.componentTypes.push(s.componentType);const a=function lve(e){return e.isBoundToModule}(s)?void 0:this._injector.get(df),c=s.create(Zr.NULL,[],i||s.selector,a),u=c.location.nativeElement,d=c.injector.get(Wz,null);return d?.registerApplication(u),c.onDestroy(()=>{this.detachView(c.hostView),gw(this.components,c),d?.unregisterApplication(u)}),this._loadComponent(c),c}tick(){if(this._runningTick)throw new ne(101,!1);try{this._runningTick=!0;for(let t of this._views)t.detectChanges()}catch(t){this.internalErrorHandler(t)}finally{this._runningTick=!1}}attachView(t){const i=t;this._views.push(i),i.attachToAppRef(this)}detachView(t){const i=t;gw(this._views,i),i.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t);const i=this._injector.get(WM,[]);i.push(...this._bootstrapListeners),i.forEach(r=>r(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>gw(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new ne(406,!1);const t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static#e=this.\u0275fac=function(i){return new(i||e)};static#t=this.\u0275prov=Oe({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function gw(e,n){const t=e.indexOf(n);t>-1&&e.splice(t,1)}const rU=new Ie("",{providedIn:"root",factory:()=>Te(nc).handleError.bind(void 0)});function hve(){const e=Te(At),n=Te(nc);return t=>e.runOutsideAngular(()=>n.handleError(t))}let pve=(()=>{class e{constructor(){this.zone=Te(At),this.applicationRef=Te(hf)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static#e=this.\u0275fac=function(i){return new(i||e)};static#t=this.\u0275prov=Oe({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();let Ro=(()=>{class e{static#e=this.__NG_ELEMENT_ID__=mve}return e})();function mve(e){return function _ve(e,n,t){if(ef(e)&&!t){const i=Io(e.index,n);return new X0(i,i)}return 47&e.type?new X0(n[Hn],n):null}(Li(),le(),16==(16&e))}class cU{constructor(){}supports(n){return Qb(n)}create(n){return new xve(n)}}const Cve=(e,n)=>n;class xve{constructor(n){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=n||Cve}forEachItem(n){let t;for(t=this._itHead;null!==t;t=t._next)n(t)}forEachOperation(n){let t=this._itHead,i=this._removalsHead,r=0,o=null;for(;t||i;){const s=!i||t&&t.currentIndex<dU(i,r,o)?t:i,a=dU(s,r,o),l=s.currentIndex;if(s===i)r--,i=i._nextRemoved;else if(t=t._next,null==s.previousIndex)r++;else{o||(o=[]);const c=a-r,u=l-r;if(c!=u){for(let f=0;f<c;f++){const h=f<o.length?o[f]:o[f]=0,p=h+f;u<=p&&p<c&&(o[f]=h+1)}o[s.previousIndex]=u-c}}a!==l&&n(s,a,l)}}forEachPreviousItem(n){let t;for(t=this._previousItHead;null!==t;t=t._nextPrevious)n(t)}forEachAddedItem(n){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)n(t)}forEachMovedItem(n){let t;for(t=this._movesHead;null!==t;t=t._nextMoved)n(t)}forEachRemovedItem(n){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)n(t)}forEachIdentityChange(n){let t;for(t=this._identityChangesHead;null!==t;t=t._nextIdentityChange)n(t)}diff(n){if(null==n&&(n=[]),!Qb(n))throw new ne(900,!1);return this.check(n)?this:null}onDestroy(){}check(n){this._reset();let r,o,s,t=this._itHead,i=!1;if(Array.isArray(n)){this.length=n.length;for(let a=0;a<this.length;a++)o=n[a],s=this._trackByFn(a,o),null!==t&&Object.is(t.trackById,s)?(i&&(t=this._verifyReinsertion(t,o,s,a)),Object.is(t.item,o)||this._addIdentityChange(t,o)):(t=this._mismatch(t,o,s,a),i=!0),t=t._next}else r=0,function l0e(e,n){if(Array.isArray(e))for(let t=0;t<e.length;t++)n(e[t]);else{const t=e[Symbol.iterator]();let i;for(;!(i=t.next()).done;)n(i.value)}}(n,a=>{s=this._trackByFn(r,a),null!==t&&Object.is(t.trackById,s)?(i&&(t=this._verifyReinsertion(t,a,s,r)),Object.is(t.item,a)||this._addIdentityChange(t,a)):(t=this._mismatch(t,a,s,r),i=!0),t=t._next,r++}),this.length=r;return this._truncate(t),this.collection=n,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let n;for(n=this._previousItHead=this._itHead;null!==n;n=n._next)n._nextPrevious=n._next;for(n=this._additionsHead;null!==n;n=n._nextAdded)n.previousIndex=n.currentIndex;for(this._additionsHead=this._additionsTail=null,n=this._movesHead;null!==n;n=n._nextMoved)n.previousIndex=n.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(n,t,i,r){let o;return null===n?o=this._itTail:(o=n._prev,this._remove(n)),null!==(n=null===this._unlinkedRecords?null:this._unlinkedRecords.get(i,null))?(Object.is(n.item,t)||this._addIdentityChange(n,t),this._reinsertAfter(n,o,r)):null!==(n=null===this._linkedRecords?null:this._linkedRecords.get(i,r))?(Object.is(n.item,t)||this._addIdentityChange(n,t),this._moveAfter(n,o,r)):n=this._addAfter(new Eve(t,i),o,r),n}_verifyReinsertion(n,t,i,r){let o=null===this._unlinkedRecords?null:this._unlinkedRecords.get(i,null);return null!==o?n=this._reinsertAfter(o,n._prev,r):n.currentIndex!=r&&(n.currentIndex=r,this._addToMoves(n,r)),n}_truncate(n){for(;null!==n;){const t=n._next;this._addToRemovals(this._unlink(n)),n=t}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(n,t,i){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(n);const r=n._prevRemoved,o=n._nextRemoved;return null===r?this._removalsHead=o:r._nextRemoved=o,null===o?this._removalsTail=r:o._prevRemoved=r,this._insertAfter(n,t,i),this._addToMoves(n,i),n}_moveAfter(n,t,i){return this._unlink(n),this._insertAfter(n,t,i),this._addToMoves(n,i),n}_addAfter(n,t,i){return this._insertAfter(n,t,i),this._additionsTail=null===this._additionsTail?this._additionsHead=n:this._additionsTail._nextAdded=n,n}_insertAfter(n,t,i){const r=null===t?this._itHead:t._next;return n._next=r,n._prev=t,null===r?this._itTail=n:r._prev=n,null===t?this._itHead=n:t._next=n,null===this._linkedRecords&&(this._linkedRecords=new uU),this._linkedRecords.put(n),n.currentIndex=i,n}_remove(n){return this._addToRemovals(this._unlink(n))}_unlink(n){null!==this._linkedRecords&&this._linkedRecords.remove(n);const t=n._prev,i=n._next;return null===t?this._itHead=i:t._next=i,null===i?this._itTail=t:i._prev=t,n}_addToMoves(n,t){return n.previousIndex===t||(this._movesTail=null===this._movesTail?this._movesHead=n:this._movesTail._nextMoved=n),n}_addToRemovals(n){return null===this._unlinkedRecords&&(this._unlinkedRecords=new uU),this._unlinkedRecords.put(n),n.currentIndex=null,n._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=n,n._prevRemoved=null):(n._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=n),n}_addIdentityChange(n,t){return n.item=t,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=n:this._identityChangesTail._nextIdentityChange=n,n}}class Eve{constructor(n,t){this.item=n,this.trackById=t,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class Sve{constructor(){this._head=null,this._tail=null}add(n){null===this._head?(this._head=this._tail=n,n._nextDup=null,n._prevDup=null):(this._tail._nextDup=n,n._prevDup=this._tail,n._nextDup=null,this._tail=n)}get(n,t){let i;for(i=this._head;null!==i;i=i._nextDup)if((null===t||t<=i.currentIndex)&&Object.is(i.trackById,n))return i;return null}remove(n){const t=n._prevDup,i=n._nextDup;return null===t?this._head=i:t._nextDup=i,null===i?this._tail=t:i._prevDup=t,null===this._head}}class uU{constructor(){this.map=new Map}put(n){const t=n.trackById;let i=this.map.get(t);i||(i=new Sve,this.map.set(t,i)),i.add(n)}get(n,t){const r=this.map.get(n);return r?r.get(n,t):null}remove(n){const t=n.trackById;return this.map.get(t).remove(n)&&this.map.delete(t),n}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function dU(e,n,t){const i=e.previousIndex;if(null===i)return i;let r=0;return t&&i<t.length&&(r=t[i]),i+n+r}class fU{constructor(){}supports(n){return n instanceof Map||nM(n)}create(){return new Tve}}class Tve{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(n){let t;for(t=this._mapHead;null!==t;t=t._next)n(t)}forEachPreviousItem(n){let t;for(t=this._previousMapHead;null!==t;t=t._nextPrevious)n(t)}forEachChangedItem(n){let t;for(t=this._changesHead;null!==t;t=t._nextChanged)n(t)}forEachAddedItem(n){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)n(t)}forEachRemovedItem(n){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)n(t)}diff(n){if(n){if(!(n instanceof Map||nM(n)))throw new ne(900,!1)}else n=new Map;return this.check(n)?this:null}onDestroy(){}check(n){this._reset();let t=this._mapHead;if(this._appendAfter=null,this._forEach(n,(i,r)=>{if(t&&t.key===r)this._maybeAddToChanges(t,i),this._appendAfter=t,t=t._next;else{const o=this._getOrCreateRecordForKey(r,i);t=this._insertBeforeOrAppend(t,o)}}),t){t._prev&&(t._prev._next=null),this._removalsHead=t;for(let i=t;null!==i;i=i._nextRemoved)i===this._mapHead&&(this._mapHead=null),this._records.delete(i.key),i._nextRemoved=i._next,i.previousValue=i.currentValue,i.currentValue=null,i._prev=null,i._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(n,t){if(n){const i=n._prev;return t._next=n,t._prev=i,n._prev=t,i&&(i._next=t),n===this._mapHead&&(this._mapHead=t),this._appendAfter=n,n}return this._appendAfter?(this._appendAfter._next=t,t._prev=this._appendAfter):this._mapHead=t,this._appendAfter=t,null}_getOrCreateRecordForKey(n,t){if(this._records.has(n)){const r=this._records.get(n);this._maybeAddToChanges(r,t);const o=r._prev,s=r._next;return o&&(o._next=s),s&&(s._prev=o),r._next=null,r._prev=null,r}const i=new Dve(n);return this._records.set(n,i),i.currentValue=t,this._addToAdditions(i),i}_reset(){if(this.isDirty){let n;for(this._previousMapHead=this._mapHead,n=this._previousMapHead;null!==n;n=n._next)n._nextPrevious=n._next;for(n=this._changesHead;null!==n;n=n._nextChanged)n.previousValue=n.currentValue;for(n=this._additionsHead;null!=n;n=n._nextAdded)n.previousValue=n.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(n,t){Object.is(t,n.currentValue)||(n.previousValue=n.currentValue,n.currentValue=t,this._addToChanges(n))}_addToAdditions(n){null===this._additionsHead?this._additionsHead=this._additionsTail=n:(this._additionsTail._nextAdded=n,this._additionsTail=n)}_addToChanges(n){null===this._changesHead?this._changesHead=this._changesTail=n:(this._changesTail._nextChanged=n,this._changesTail=n)}_forEach(n,t){n instanceof Map?n.forEach(t):Object.keys(n).forEach(i=>t(n[i],i))}}class Dve{constructor(n){this.key=n,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function hU(){return new yw([new cU])}let yw=(()=>{class e{static#e=this.\u0275prov=Oe({token:e,providedIn:"root",factory:hU});constructor(t){this.factories=t}static create(t,i){if(null!=i){const r=i.factories.slice();t=t.concat(r)}return new e(t)}static extend(t){return{provide:e,useFactory:i=>e.create(t,i||hU()),deps:[[e,new yb,new _b]]}}find(t){const i=this.factories.find(r=>r.supports(t));if(null!=i)return i;throw new ne(901,!1)}}return e})();function pU(){return new h_([new fU])}let h_=(()=>{class e{static#e=this.\u0275prov=Oe({token:e,providedIn:"root",factory:pU});constructor(t){this.factories=t}static create(t,i){if(i){const r=i.factories.slice();t=t.concat(r)}return new e(t)}static extend(t){return{provide:e,useFactory:i=>e.create(t,i||pU()),deps:[[e,new yb,new _b]]}}find(t){const i=this.factories.find(r=>r.supports(t));if(i)return i;throw new ne(901,!1)}}return e})();const Ave=Qz(null,"core",[]);let kve=(()=>{class e{constructor(t){}static#e=this.\u0275fac=function(i){return new(i||e)(Me(hf))};static#t=this.\u0275mod=Ut({type:e});static#n=this.\u0275inj=Nt({})}return e})();let JM=null;function gu(){return JM}class qve{}const qn=new Ie("DocumentToken");let eA=(()=>{class e{historyGo(t){throw new Error("Not implemented")}static#e=this.\u0275fac=function(i){return new(i||e)};static#t=this.\u0275prov=Oe({token:e,factory:function(){return Te(Gve)},providedIn:"platform"})}return e})();const Wve=new Ie("Location Initialized");let Gve=(()=>{class e extends eA{constructor(){super(),this._doc=Te(qn),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return gu().getBaseHref(this._doc)}onPopState(t){const i=gu().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",t,!1),()=>i.removeEventListener("popstate",t)}onHashChange(t){const i=gu().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",t,!1),()=>i.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,i,r){this._history.pushState(t,i,r)}replaceState(t,i,r){this._history.replaceState(t,i,r)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static#e=this.\u0275fac=function(i){return new(i||e)};static#t=this.\u0275prov=Oe({token:e,factory:function(){return new e},providedIn:"platform"})}return e})();function tA(e,n){if(0==e.length)return n;if(0==n.length)return e;let t=0;return e.endsWith("/")&&t++,n.startsWith("/")&&t++,2==t?e+n.substring(1):1==t?e+n:e+"/"+n}function xU(e){const n=e.match(/#|\?|$/),t=n&&n.index||e.length;return e.slice(0,t-("/"===e[t-1]?1:0))+e.slice(t)}function sc(e){return e&&"?"!==e[0]?"?"+e:e}let gf=(()=>{class e{historyGo(t){throw new Error("Not implemented")}static#e=this.\u0275fac=function(i){return new(i||e)};static#t=this.\u0275prov=Oe({token:e,factory:function(){return Te(SU)},providedIn:"root"})}return e})();const EU=new Ie("appBaseHref");let SU=(()=>{class e extends gf{constructor(t,i){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=i??this._platformLocation.getBaseHrefFromDOM()??Te(qn).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return tA(this._baseHref,t)}path(t=!1){const i=this._platformLocation.pathname+sc(this._platformLocation.search),r=this._platformLocation.hash;return r&&t?`${i}${r}`:i}pushState(t,i,r,o){const s=this.prepareExternalUrl(r+sc(o));this._platformLocation.pushState(t,i,s)}replaceState(t,i,r,o){const s=this.prepareExternalUrl(r+sc(o));this._platformLocation.replaceState(t,i,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static#e=this.\u0275fac=function(i){return new(i||e)(Me(eA),Me(EU,8))};static#t=this.\u0275prov=Oe({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),Kve=(()=>{class e extends gf{constructor(t,i){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=i&&(this._baseHref=i)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let i=this._platformLocation.hash;return null==i&&(i="#"),i.length>0?i.substring(1):i}prepareExternalUrl(t){const i=tA(this._baseHref,t);return i.length>0?"#"+i:i}pushState(t,i,r,o){let s=this.prepareExternalUrl(r+sc(o));0==s.length&&(s=this._platformLocation.pathname),this._platformLocation.pushState(t,i,s)}replaceState(t,i,r,o){let s=this.prepareExternalUrl(r+sc(o));0==s.length&&(s=this._platformLocation.pathname),this._platformLocation.replaceState(t,i,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static#e=this.\u0275fac=function(i){return new(i||e)(Me(eA),Me(EU,8))};static#t=this.\u0275prov=Oe({token:e,factory:e.\u0275fac})}return e})(),nA=(()=>{class e{constructor(t){this._subject=new De,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const i=this._locationStrategy.getBaseHref();this._basePath=function Qve(e){if(new RegExp("^(https?:)?//").test(e)){const[,t]=e.split(/\/\/[^\/]+/);return t}return e}(xU(TU(i))),this._locationStrategy.onPopState(r=>{this._subject.emit({url:this.path(!0),pop:!0,state:r.state,type:r.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,i=""){return this.path()==this.normalize(t+sc(i))}normalize(t){return e.stripTrailingSlash(function Xve(e,n){if(!e||!n.startsWith(e))return n;const t=n.substring(e.length);return""===t||["/",";","?","#"].includes(t[0])?t:n}(this._basePath,TU(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,i="",r=null){this._locationStrategy.pushState(r,"",t,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+sc(i)),r)}replaceState(t,i="",r=null){this._locationStrategy.replaceState(r,"",t,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+sc(i)),r)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)})),()=>{const i=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(i,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",i){this._urlChangeListeners.forEach(r=>r(t,i))}subscribe(t,i,r){return this._subject.subscribe({next:t,error:i,complete:r})}static#e=this.normalizeQueryParams=sc;static#t=this.joinWithSlash=tA;static#n=this.stripTrailingSlash=xU;static#i=this.\u0275fac=function(i){return new(i||e)(Me(gf))};static#r=this.\u0275prov=Oe({token:e,factory:function(){return function Yve(){return new nA(Me(gf))}()},providedIn:"root"})}return e})();function TU(e){return e.replace(/\/index.html$/,"")}function NU(e,n){n=encodeURIComponent(n);for(const t of e.split(";")){const i=t.indexOf("="),[r,o]=-1==i?[t,""]:[t.slice(0,i),t.slice(i+1)];if(r.trim()===n)return decodeURIComponent(o)}return null}const fA=/\s+/,PU=[];let _s=(()=>{class e{constructor(t,i,r,o){this._iterableDiffers=t,this._keyValueDiffers=i,this._ngEl=r,this._renderer=o,this.initialClasses=PU,this.stateMap=new Map}set klass(t){this.initialClasses=null!=t?t.trim().split(fA):PU}set ngClass(t){this.rawClass="string"==typeof t?t.trim().split(fA):t}ngDoCheck(){for(const i of this.initialClasses)this._updateState(i,!0);const t=this.rawClass;if(Array.isArray(t)||t instanceof Set)for(const i of t)this._updateState(i,!0);else if(null!=t)for(const i of Object.keys(t))this._updateState(i,!!t[i]);this._applyStateDiff()}_updateState(t,i){const r=this.stateMap.get(t);void 0!==r?(r.enabled!==i&&(r.changed=!0,r.enabled=i),r.touched=!0):this.stateMap.set(t,{enabled:i,changed:!0,touched:!0})}_applyStateDiff(){for(const t of this.stateMap){const i=t[0],r=t[1];r.changed?(this._toggleClass(i,r.enabled),r.changed=!1):r.touched||(r.enabled&&this._toggleClass(i,!1),this.stateMap.delete(i)),r.touched=!1}}_toggleClass(t,i){(t=t.trim()).length>0&&t.split(fA).forEach(r=>{i?this._renderer.addClass(this._ngEl.nativeElement,r):this._renderer.removeClass(this._ngEl.nativeElement,r)})}static#e=this.\u0275fac=function(i){return new(i||e)(G(yw),G(h_),G(pn),G(Ki))};static#t=this.\u0275dir=je({type:e,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0})}return e})();class Pbe{constructor(n,t,i,r){this.$implicit=n,this.ngForOf=t,this.index=i,this.count=r}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let eg=(()=>{class e{set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}constructor(t,i,r){this._viewContainer=t,this._template=i,this._differs=r,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const i=this._viewContainer;t.forEachOperation((r,o,s)=>{if(null==r.previousIndex)i.createEmbeddedView(this._template,new Pbe(r.item,this._ngForOf,-1,-1),null===s?void 0:s);else if(null==s)i.remove(null===o?void 0:o);else if(null!==o){const a=i.get(o);i.move(a,s),$U(a,r)}});for(let r=0,o=i.length;r<o;r++){const a=i.get(r).context;a.index=r,a.count=o,a.ngForOf=this._ngForOf}t.forEachIdentityChange(r=>{$U(i.get(r.currentIndex),r)})}static ngTemplateContextGuard(t,i){return!0}static#e=this.\u0275fac=function(i){return new(i||e)(G(Oo),G(Zs),G(yw))};static#t=this.\u0275dir=je({type:e,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}return e})();function $U(e,n){e.context.$implicit=n.item}let No=(()=>{class e{constructor(t,i){this._viewContainer=t,this._context=new Lbe,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=i}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){BU("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){BU("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,i){return!0}static#e=this.\u0275fac=function(i){return new(i||e)(G(Oo),G(Zs))};static#t=this.\u0275dir=je({type:e,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0})}return e})();class Lbe{constructor(){this.$implicit=null,this.ngIf=null}}function BU(e,n){if(n&&!n.createEmbeddedView)throw new Error(`${e} must be a TemplateRef, but received '${oi(n)}'.`)}let ys=(()=>{class e{constructor(t,i,r){this._ngEl=t,this._differs=i,this._renderer=r,this._ngStyle=null,this._differ=null}set ngStyle(t){this._ngStyle=t,!this._differ&&t&&(this._differ=this._differs.find(t).create())}ngDoCheck(){if(this._differ){const t=this._differ.diff(this._ngStyle);t&&this._applyChanges(t)}}_setStyle(t,i){const[r,o]=t.split("."),s=-1===r.indexOf("-")?void 0:cu.DashCase;null!=i?this._renderer.setStyle(this._ngEl.nativeElement,r,o?`${i}${o}`:i,s):this._renderer.removeStyle(this._ngEl.nativeElement,r,s)}_applyChanges(t){t.forEachRemovedItem(i=>this._setStyle(i.key,null)),t.forEachAddedItem(i=>this._setStyle(i.key,i.currentValue)),t.forEachChangedItem(i=>this._setStyle(i.key,i.currentValue))}static#e=this.\u0275fac=function(i){return new(i||e)(G(pn),G(h_),G(Ki))};static#t=this.\u0275dir=je({type:e,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"},standalone:!0})}return e})(),Po=(()=>{class e{constructor(t){this._viewContainerRef=t,this._viewRef=null,this.ngTemplateOutletContext=null,this.ngTemplateOutlet=null,this.ngTemplateOutletInjector=null}ngOnChanges(t){if(t.ngTemplateOutlet||t.ngTemplateOutletInjector){const i=this._viewContainerRef;if(this._viewRef&&i.remove(i.indexOf(this._viewRef)),this.ngTemplateOutlet){const{ngTemplateOutlet:r,ngTemplateOutletContext:o,ngTemplateOutletInjector:s}=this;this._viewRef=i.createEmbeddedView(r,o,s?{injector:s}:void 0)}else this._viewRef=null}else this._viewRef&&t.ngTemplateOutletContext&&this.ngTemplateOutletContext&&(this._viewRef.context=this.ngTemplateOutletContext)}static#e=this.\u0275fac=function(i){return new(i||e)(G(Oo))};static#t=this.\u0275dir=je({type:e,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet",ngTemplateOutletInjector:"ngTemplateOutletInjector"},standalone:!0,features:[vr]})}return e})(),ti=(()=>{class e{static#e=this.\u0275fac=function(i){return new(i||e)};static#t=this.\u0275mod=Ut({type:e});static#n=this.\u0275inj=Nt({})}return e})();const UU="browser";function mf(e){return e===UU}function HU(e){return"server"===e}let fwe=(()=>{class e{static#e=this.\u0275prov=Oe({token:e,providedIn:"root",factory:()=>new hwe(Me(qn),window)})}return e})();class hwe{constructor(n,t){this.document=n,this.window=t,this.offset=()=>[0,0]}setOffset(n){this.offset=Array.isArray(n)?()=>n:n}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(n){this.supportsScrolling()&&this.window.scrollTo(n[0],n[1])}scrollToAnchor(n){if(!this.supportsScrolling())return;const t=function pwe(e,n){const t=e.getElementById(n)||e.getElementsByName(n)[0];if(t)return t;if("function"==typeof e.createTreeWalker&&e.body&&"function"==typeof e.body.attachShadow){const i=e.createTreeWalker(e.body,NodeFilter.SHOW_ELEMENT);let r=i.currentNode;for(;r;){const o=r.shadowRoot;if(o){const s=o.getElementById(n)||o.querySelector(`[name="${n}"]`);if(s)return s}r=i.nextNode()}}return null}(this.document,n);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(n){this.supportsScrolling()&&(this.window.history.scrollRestoration=n)}scrollToElement(n){const t=n.getBoundingClientRect(),i=t.left+this.window.pageXOffset,r=t.top+this.window.pageYOffset,o=this.offset();this.window.scrollTo(i-o[0],r-o[1])}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}class jU{}class Lwe extends qve{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class vA extends Lwe{static makeCurrent(){!function jve(e){JM||(JM=e)}(new vA)}onAndCancel(n,t,i){return n.addEventListener(t,i),()=>{n.removeEventListener(t,i)}}dispatchEvent(n,t){n.dispatchEvent(t)}remove(n){n.parentNode&&n.parentNode.removeChild(n)}createElement(n,t){return(t=t||this.getDefaultDocument()).createElement(n)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(n){return n.nodeType===Node.ELEMENT_NODE}isShadowRoot(n){return n instanceof DocumentFragment}getGlobalEventTarget(n,t){return"window"===t?window:"document"===t?n:"body"===t?n.body:null}getBaseHref(n){const t=function $we(){return __=__||document.querySelector("base"),__?__.getAttribute("href"):null}();return null==t?null:function Bwe(e){Ow=Ow||document.createElement("a"),Ow.setAttribute("href",e);const n=Ow.pathname;return"/"===n.charAt(0)?n:`/${n}`}(t)}resetBaseElement(){__=null}getUserAgent(){return window.navigator.userAgent}getCookie(n){return NU(document.cookie,n)}}let Ow,__=null,zwe=(()=>{class e{build(){return new XMLHttpRequest}static#e=this.\u0275fac=function(i){return new(i||e)};static#t=this.\u0275prov=Oe({token:e,factory:e.\u0275fac})}return e})();const bA=new Ie("EventManagerPlugins");let YU=(()=>{class e{constructor(t,i){this._zone=i,this._eventNameToPlugin=new Map,t.forEach(r=>{r.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,i,r){return this._findPluginFor(i).addEventListener(t,i,r)}getZone(){return this._zone}_findPluginFor(t){let i=this._eventNameToPlugin.get(t);if(i)return i;if(i=this._plugins.find(o=>o.supports(t)),!i)throw new ne(5101,!1);return this._eventNameToPlugin.set(t,i),i}static#e=this.\u0275fac=function(i){return new(i||e)(Me(bA),Me(At))};static#t=this.\u0275prov=Oe({token:e,factory:e.\u0275fac})}return e})();class XU{constructor(n){this._doc=n}}const wA="ng-app-id";let QU=(()=>{class e{constructor(t,i,r,o={}){this.doc=t,this.appId=i,this.nonce=r,this.platformId=o,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=HU(o),this.resetHostNodes()}addStyles(t){for(const i of t)1===this.changeUsageCount(i,1)&&this.onStyleAdded(i)}removeStyles(t){for(const i of t)this.changeUsageCount(i,-1)<=0&&this.onStyleRemoved(i)}ngOnDestroy(){const t=this.styleNodesInDOM;t&&(t.forEach(i=>i.remove()),t.clear());for(const i of this.getAllStyles())this.onStyleRemoved(i);this.resetHostNodes()}addHost(t){this.hostNodes.add(t);for(const i of this.getAllStyles())this.addStyleToHost(t,i)}removeHost(t){this.hostNodes.delete(t)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(t){for(const i of this.hostNodes)this.addStyleToHost(i,t)}onStyleRemoved(t){const i=this.styleRef;i.get(t)?.elements?.forEach(r=>r.remove()),i.delete(t)}collectServerRenderedStyles(){const t=this.doc.head?.querySelectorAll(`style[${wA}="${this.appId}"]`);if(t?.length){const i=new Map;return t.forEach(r=>{null!=r.textContent&&i.set(r.textContent,r)}),i}return null}changeUsageCount(t,i){const r=this.styleRef;if(r.has(t)){const o=r.get(t);return o.usage+=i,o.usage}return r.set(t,{usage:i,elements:[]}),i}getStyleElement(t,i){const r=this.styleNodesInDOM,o=r?.get(i);if(o?.parentNode===t)return r.delete(i),o.removeAttribute(wA),o;{const s=this.doc.createElement("style");return this.nonce&&s.setAttribute("nonce",this.nonce),s.textContent=i,this.platformIsServer&&s.setAttribute(wA,this.appId),s}}addStyleToHost(t,i){const r=this.getStyleElement(t,i);t.appendChild(r);const o=this.styleRef,s=o.get(i)?.elements;s?s.push(r):o.set(i,{elements:[r],usage:1})}resetHostNodes(){const t=this.hostNodes;t.clear(),t.add(this.doc.head)}static#e=this.\u0275fac=function(i){return new(i||e)(Me(qn),Me(Lb),Me(c$,8),Me(fs))};static#t=this.\u0275prov=Oe({token:e,factory:e.\u0275fac})}return e})();const CA={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},xA=/%COMP%/g,qwe=new Ie("RemoveStylesOnCompDestroy",{providedIn:"root",factory:()=>!1});function JU(e,n){return n.map(t=>t.replace(xA,e))}let EA=(()=>{class e{constructor(t,i,r,o,s,a,l,c=null){this.eventManager=t,this.sharedStylesHost=i,this.appId=r,this.removeStylesOnCompDestroy=o,this.doc=s,this.platformId=a,this.ngZone=l,this.nonce=c,this.rendererByCompId=new Map,this.platformIsServer=HU(a),this.defaultRenderer=new SA(t,s,l,this.platformIsServer)}createRenderer(t,i){if(!t||!i)return this.defaultRenderer;this.platformIsServer&&i.encapsulation===cs.ShadowDom&&(i={...i,encapsulation:cs.Emulated});const r=this.getOrCreateRenderer(t,i);return r instanceof tH?r.applyToHost(t):r instanceof TA&&r.applyStyles(),r}getOrCreateRenderer(t,i){const r=this.rendererByCompId;let o=r.get(i.id);if(!o){const s=this.doc,a=this.ngZone,l=this.eventManager,c=this.sharedStylesHost,u=this.removeStylesOnCompDestroy,d=this.platformIsServer;switch(i.encapsulation){case cs.Emulated:o=new tH(l,c,i,this.appId,u,s,a,d);break;case cs.ShadowDom:return new Ywe(l,c,t,i,s,a,this.nonce,d);default:o=new TA(l,c,i,u,s,a,d)}r.set(i.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}static#e=this.\u0275fac=function(i){return new(i||e)(Me(YU),Me(QU),Me(Lb),Me(qwe),Me(qn),Me(fs),Me(At),Me(c$))};static#t=this.\u0275prov=Oe({token:e,factory:e.\u0275fac})}return e})();class SA{constructor(n,t,i,r){this.eventManager=n,this.doc=t,this.ngZone=i,this.platformIsServer=r,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(n,t){return t?this.doc.createElementNS(CA[t]||t,n):this.doc.createElement(n)}createComment(n){return this.doc.createComment(n)}createText(n){return this.doc.createTextNode(n)}appendChild(n,t){(eH(n)?n.content:n).appendChild(t)}insertBefore(n,t,i){n&&(eH(n)?n.content:n).insertBefore(t,i)}removeChild(n,t){n&&n.removeChild(t)}selectRootElement(n,t){let i="string"==typeof n?this.doc.querySelector(n):n;if(!i)throw new ne(-5104,!1);return t||(i.textContent=""),i}parentNode(n){return n.parentNode}nextSibling(n){return n.nextSibling}setAttribute(n,t,i,r){if(r){t=r+":"+t;const o=CA[r];o?n.setAttributeNS(o,t,i):n.setAttribute(t,i)}else n.setAttribute(t,i)}removeAttribute(n,t,i){if(i){const r=CA[i];r?n.removeAttributeNS(r,t):n.removeAttribute(`${i}:${t}`)}else n.removeAttribute(t)}addClass(n,t){n.classList.add(t)}removeClass(n,t){n.classList.remove(t)}setStyle(n,t,i,r){r&(cu.DashCase|cu.Important)?n.style.setProperty(t,i,r&cu.Important?"important":""):n.style[t]=i}removeStyle(n,t,i){i&cu.DashCase?n.style.removeProperty(t):n.style[t]=""}setProperty(n,t,i){n[t]=i}setValue(n,t){n.nodeValue=t}listen(n,t,i){if("string"==typeof n&&!(n=gu().getGlobalEventTarget(this.doc,n)))throw new Error(`Unsupported event target ${n} for event ${t}`);return this.eventManager.addEventListener(n,t,this.decoratePreventDefault(i))}decoratePreventDefault(n){return t=>{if("__ngUnwrap__"===t)return n;!1===(this.platformIsServer?this.ngZone.runGuarded(()=>n(t)):n(t))&&t.preventDefault()}}}function eH(e){return"TEMPLATE"===e.tagName&&void 0!==e.content}class Ywe extends SA{constructor(n,t,i,r,o,s,a,l){super(n,o,s,l),this.sharedStylesHost=t,this.hostEl=i,this.shadowRoot=i.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const c=JU(r.id,r.styles);for(const u of c){const d=document.createElement("style");a&&d.setAttribute("nonce",a),d.textContent=u,this.shadowRoot.appendChild(d)}}nodeOrShadowRoot(n){return n===this.hostEl?this.shadowRoot:n}appendChild(n,t){return super.appendChild(this.nodeOrShadowRoot(n),t)}insertBefore(n,t,i){return super.insertBefore(this.nodeOrShadowRoot(n),t,i)}removeChild(n,t){return super.removeChild(this.nodeOrShadowRoot(n),t)}parentNode(n){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(n)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class TA extends SA{constructor(n,t,i,r,o,s,a,l){super(n,o,s,a),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=r,this.styles=l?JU(l,i.styles):i.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}}class tH extends TA{constructor(n,t,i,r,o,s,a,l){const c=r+"-"+i.id;super(n,t,i,o,s,a,l,c),this.contentAttr=function Wwe(e){return"_ngcontent-%COMP%".replace(xA,e)}(c),this.hostAttr=function Gwe(e){return"_nghost-%COMP%".replace(xA,e)}(c)}applyToHost(n){this.applyStyles(),this.setAttribute(n,this.hostAttr,"")}createElement(n,t){const i=super.createElement(n,t);return super.setAttribute(i,this.contentAttr,""),i}}let Xwe=(()=>{class e extends XU{constructor(t){super(t)}supports(t){return!0}addEventListener(t,i,r){return t.addEventListener(i,r,!1),()=>this.removeEventListener(t,i,r)}removeEventListener(t,i,r){return t.removeEventListener(i,r)}static#e=this.\u0275fac=function(i){return new(i||e)(Me(qn))};static#t=this.\u0275prov=Oe({token:e,factory:e.\u0275fac})}return e})();const nH=["alt","control","meta","shift"],Qwe={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Zwe={alt:e=>e.altKey,control:e=>e.ctrlKey,meta:e=>e.metaKey,shift:e=>e.shiftKey};let Jwe=(()=>{class e extends XU{constructor(t){super(t)}supports(t){return null!=e.parseEventName(t)}addEventListener(t,i,r){const o=e.parseEventName(i),s=e.eventCallback(o.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>gu().onAndCancel(t,o.domEventName,s))}static parseEventName(t){const i=t.toLowerCase().split("."),r=i.shift();if(0===i.length||"keydown"!==r&&"keyup"!==r)return null;const o=e._normalizeKey(i.pop());let s="",a=i.indexOf("code");if(a>-1&&(i.splice(a,1),s="code."),nH.forEach(c=>{const u=i.indexOf(c);u>-1&&(i.splice(u,1),s+=c+".")}),s+=o,0!=i.length||0===o.length)return null;const l={};return l.domEventName=r,l.fullKey=s,l}static matchEventFullKeyCode(t,i){let r=Qwe[t.key]||t.key,o="";return i.indexOf("code.")>-1&&(r=t.code,o="code."),!(null==r||!r)&&(r=r.toLowerCase()," "===r?r="space":"."===r&&(r="dot"),nH.forEach(s=>{s!==r&&(0,Zwe[s])(t)&&(o+=s+".")}),o+=r,o===i)}static eventCallback(t,i,r){return o=>{e.matchEventFullKeyCode(o,t)&&r.runGuarded(()=>i(o))}}static _normalizeKey(t){return"esc"===t?"escape":t}static#e=this.\u0275fac=function(i){return new(i||e)(Me(qn))};static#t=this.\u0275prov=Oe({token:e,factory:e.\u0275fac})}return e})();const rH=[{provide:fs,useValue:UU},{provide:a$,useValue:function eCe(){vA.makeCurrent()},multi:!0},{provide:qn,useFactory:function nCe(){return function Wpe(e){hI=e}(document),document},deps:[]}],iCe=Qz(Ave,"browser",rH),rCe=new Ie(""),oH=[{provide:pw,useClass:class Vwe{addToWindow(n){fn.getAngularTestability=(i,r=!0)=>{const o=n.findTestabilityInTree(i,r);if(null==o)throw new ne(5103,!1);return o},fn.getAllAngularTestabilities=()=>n.getAllTestabilities(),fn.getAllAngularRootElements=()=>n.getAllRootElements(),fn.frameworkStabilizers||(fn.frameworkStabilizers=[]),fn.frameworkStabilizers.push(i=>{const r=fn.getAllAngularTestabilities();let o=r.length,s=!1;const a=function(l){s=s||l,o--,0==o&&i(s)};r.forEach(l=>{l.whenStable(a)})})}findTestabilityInTree(n,t,i){return null==t?null:n.getTestability(t)??(i?gu().isShadowRoot(t)?this.findTestabilityInTree(n,t.host,!0):this.findTestabilityInTree(n,t.parentElement,!0):null)}},deps:[]},{provide:Wz,useClass:UM,deps:[At,HM,pw]},{provide:UM,useClass:UM,deps:[At,HM,pw]}],sH=[{provide:xI,useValue:"root"},{provide:nc,useFactory:function tCe(){return new nc},deps:[]},{provide:bA,useClass:Xwe,multi:!0,deps:[qn,At,fs]},{provide:bA,useClass:Jwe,multi:!0,deps:[qn]},EA,QU,YU,{provide:q0,useExisting:EA},{provide:jU,useClass:zwe,deps:[]},[]];let aH=(()=>{class e{constructor(t){}static withServerTransition(t){return{ngModule:e,providers:[{provide:Lb,useValue:t.appId}]}}static#e=this.\u0275fac=function(i){return new(i||e)(Me(rCe,12))};static#t=this.\u0275mod=Ut({type:e});static#n=this.\u0275inj=Nt({providers:[...sH,...oH],imports:[ti,kve]})}return e})(),lH=(()=>{class e{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static#e=this.\u0275fac=function(i){return new(i||e)(Me(qn))};static#t=this.\u0275prov=Oe({token:e,factory:function(i){let r=null;return r=i?new i:function sCe(){return new lH(Me(qn))}(),r},providedIn:"root"})}return e})();typeof window<"u"&&window;class fH{}class dCe{}const cc="*";function Rw(e,n){return{type:7,name:e,definitions:n,options:{}}}function ta(e,n=null){return{type:4,styles:n,timings:e}}function hH(e,n=null){return{type:2,steps:e,options:n}}function Dr(e){return{type:6,styles:e,offset:null}}function tg(e,n,t){return{type:0,name:e,styles:n,options:t}}function na(e,n,t=null){return{type:1,expr:e,animation:n,options:t}}function pH(e,n=null){return{type:8,animation:e,options:n}}function gH(e,n=null){return{type:10,animation:e,options:n}}class y_{constructor(n=0,t=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=n+t}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(n=>n()),this._onDoneFns=[])}onStart(n){this._originalOnStartFns.push(n),this._onStartFns.push(n)}onDone(n){this._originalOnDoneFns.push(n),this._onDoneFns.push(n)}onDestroy(n){this._onDestroyFns.push(n)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){queueMicrotask(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(n=>n()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(n=>n()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(n){this._position=this.totalTime?n*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(n){const t="start"==n?this._onStartFns:this._onDoneFns;t.forEach(i=>i()),t.length=0}}class mH{constructor(n){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=n;let t=0,i=0,r=0;const o=this.players.length;0==o?queueMicrotask(()=>this._onFinish()):this.players.forEach(s=>{s.onDone(()=>{++t==o&&this._onFinish()}),s.onDestroy(()=>{++i==o&&this._onDestroy()}),s.onStart(()=>{++r==o&&this._onStart()})}),this.totalTime=this.players.reduce((s,a)=>Math.max(s,a.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(n=>n()),this._onDoneFns=[])}init(){this.players.forEach(n=>n.init())}onStart(n){this._onStartFns.push(n)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(n=>n()),this._onStartFns=[])}onDone(n){this._onDoneFns.push(n)}onDestroy(n){this._onDestroyFns.push(n)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(n=>n.play())}pause(){this.players.forEach(n=>n.pause())}restart(){this.players.forEach(n=>n.restart())}finish(){this._onFinish(),this.players.forEach(n=>n.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(n=>n.destroy()),this._onDestroyFns.forEach(n=>n()),this._onDestroyFns=[])}reset(){this.players.forEach(n=>n.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(n){const t=n*this.totalTime;this.players.forEach(i=>{const r=i.totalTime?Math.min(1,t/i.totalTime):1;i.setPosition(r)})}getPosition(){const n=this.players.reduce((t,i)=>null===t||i.totalTime>t.totalTime?i:t,null);return null!=n?n.getPosition():0}beforeDestroy(){this.players.forEach(n=>{n.beforeDestroy&&n.beforeDestroy()})}triggerCallback(n){const t="start"==n?this._onStartFns:this._onDoneFns;t.forEach(i=>i()),t.length=0}}function _H(e){return new ne(3e3,!1)}function _u(e){switch(e.length){case 0:return new y_;case 1:return e[0];default:return new mH(e)}}function yH(e,n,t=new Map,i=new Map){const r=[],o=[];let s=-1,a=null;if(n.forEach(l=>{const c=l.get("offset"),u=c==s,d=u&&a||new Map;l.forEach((f,h)=>{let p=h,g=f;if("offset"!==h)switch(p=e.normalizePropertyName(p,r),g){case"!":g=t.get(h);break;case cc:g=i.get(h);break;default:g=e.normalizeStyleValue(h,p,g,r)}d.set(p,g)}),u||o.push(d),a=d,s=c}),r.length)throw function FCe(e){return new ne(3502,!1)}();return o}function MA(e,n,t,i){switch(n){case"start":e.onStart(()=>i(t&&AA(t,"start",e)));break;case"done":e.onDone(()=>i(t&&AA(t,"done",e)));break;case"destroy":e.onDestroy(()=>i(t&&AA(t,"destroy",e)))}}function AA(e,n,t){const o=kA(e.element,e.triggerName,e.fromState,e.toState,n||e.phaseName,t.totalTime??e.totalTime,!!t.disabled),s=e._data;return null!=s&&(o._data=s),o}function kA(e,n,t,i,r="",o=0,s){return{element:e,triggerName:n,fromState:t,toState:i,phaseName:r,totalTime:o,disabled:!!s}}function Lo(e,n,t){let i=e.get(n);return i||e.set(n,i=t),i}function vH(e){const n=e.indexOf(":");return[e.substring(1,n),e.slice(n+1)]}const WCe=(()=>typeof document>"u"?null:document.documentElement)();function OA(e){const n=e.parentNode||e.host||null;return n===WCe?null:n}let _f=null,bH=!1;function wH(e,n){for(;n;){if(n===e)return!0;n=OA(n)}return!1}function CH(e,n,t){if(t)return Array.from(e.querySelectorAll(n));const i=e.querySelector(n);return i?[i]:[]}let xH=(()=>{class e{validateStyleProperty(t){return function KCe(e){_f||(_f=function YCe(){return typeof document<"u"?document.body:null}()||{},bH=!!_f.style&&"WebkitAppearance"in _f.style);let n=!0;return _f.style&&!function GCe(e){return"ebkit"==e.substring(1,6)}(e)&&(n=e in _f.style,!n&&bH&&(n="Webkit"+e.charAt(0).toUpperCase()+e.slice(1)in _f.style)),n}(t)}matchesElement(t,i){return!1}containsElement(t,i){return wH(t,i)}getParentElement(t){return OA(t)}query(t,i,r){return CH(t,i,r)}computeStyle(t,i,r){return r||""}animate(t,i,r,o,s,a=[],l){return new y_(r,o)}static#e=this.\u0275fac=function(i){return new(i||e)};static#t=this.\u0275prov=Oe({token:e,factory:e.\u0275fac})}return e})(),RA=(()=>{class e{static#e=this.NOOP=new xH}return e})();const XCe=1e3,FA="ng-enter",Fw="ng-leave",Nw="ng-trigger",Pw=".ng-trigger",SH="ng-animating",NA=".ng-animating";function uc(e){if("number"==typeof e)return e;const n=e.match(/^(-?[\.\d]+)(m?s)/);return!n||n.length<2?0:PA(parseFloat(n[1]),n[2])}function PA(e,n){return"s"===n?e*XCe:e}function Lw(e,n,t){return e.hasOwnProperty("duration")?e:function ZCe(e,n,t){let r,o=0,s="";if("string"==typeof e){const a=e.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===a)return n.push(_H()),{duration:0,delay:0,easing:""};r=PA(parseFloat(a[1]),a[2]);const l=a[3];null!=l&&(o=PA(parseFloat(l),a[4]));const c=a[5];c&&(s=c)}else r=e;if(!t){let a=!1,l=n.length;r<0&&(n.push(function fCe(){return new ne(3100,!1)}()),a=!0),o<0&&(n.push(function hCe(){return new ne(3101,!1)}()),a=!0),a&&n.splice(l,0,_H())}return{duration:r,delay:o,easing:s}}(e,n,t)}function v_(e,n={}){return Object.keys(e).forEach(t=>{n[t]=e[t]}),n}function TH(e){const n=new Map;return Object.keys(e).forEach(t=>{n.set(t,e[t])}),n}function yu(e,n=new Map,t){if(t)for(let[i,r]of t)n.set(i,r);for(let[i,r]of e)n.set(i,r);return n}function el(e,n,t){n.forEach((i,r)=>{const o=$A(r);t&&!t.has(r)&&t.set(r,e.style[o]),e.style[o]=i})}function yf(e,n){n.forEach((t,i)=>{const r=$A(i);e.style[r]=""})}function b_(e){return Array.isArray(e)?1==e.length?e[0]:hH(e):e}const LA=new RegExp("{{\\s*(.+?)\\s*}}","g");function IH(e){let n=[];if("string"==typeof e){let t;for(;t=LA.exec(e);)n.push(t[1]);LA.lastIndex=0}return n}function w_(e,n,t){const i=e.toString(),r=i.replace(LA,(o,s)=>{let a=n[s];return null==a&&(t.push(function gCe(e){return new ne(3003,!1)}()),a=""),a.toString()});return r==i?e:r}function $w(e){const n=[];let t=e.next();for(;!t.done;)n.push(t.value),t=e.next();return n}const txe=/-+([a-z0-9])/g;function $A(e){return e.replace(txe,(...n)=>n[1].toUpperCase())}function $o(e,n,t){switch(n.type){case 7:return e.visitTrigger(n,t);case 0:return e.visitState(n,t);case 1:return e.visitTransition(n,t);case 2:return e.visitSequence(n,t);case 3:return e.visitGroup(n,t);case 4:return e.visitAnimate(n,t);case 5:return e.visitKeyframes(n,t);case 6:return e.visitStyle(n,t);case 8:return e.visitReference(n,t);case 9:return e.visitAnimateChild(n,t);case 10:return e.visitAnimateRef(n,t);case 11:return e.visitQuery(n,t);case 12:return e.visitStagger(n,t);default:throw function mCe(e){return new ne(3004,!1)}()}}function MH(e,n){return window.getComputedStyle(e)[n]}const Bw="*";function rxe(e,n){const t=[];return"string"==typeof e?e.split(/\s*,\s*/).forEach(i=>function oxe(e,n,t){if(":"==e[0]){const l=function sxe(e,n){switch(e){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,i)=>parseFloat(i)>parseFloat(t);case":decrement":return(t,i)=>parseFloat(i)<parseFloat(t);default:return n.push(function ACe(e){return new ne(3016,!1)}()),"* => *"}}(e,t);if("function"==typeof l)return void n.push(l);e=l}const i=e.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==i||i.length<4)return t.push(function MCe(e){return new ne(3015,!1)}()),n;const r=i[1],o=i[2],s=i[3];n.push(AH(r,s));"<"==o[0]&&!(r==Bw&&s==Bw)&&n.push(AH(s,r))}(i,t,n)):t.push(e),t}const Vw=new Set(["true","1"]),zw=new Set(["false","0"]);function AH(e,n){const t=Vw.has(e)||zw.has(e),i=Vw.has(n)||zw.has(n);return(r,o)=>{let s=e==Bw||e==r,a=n==Bw||n==o;return!s&&t&&"boolean"==typeof r&&(s=r?Vw.has(e):zw.has(e)),!a&&i&&"boolean"==typeof o&&(a=o?Vw.has(n):zw.has(n)),s&&a}}const axe=new RegExp("s*:selfs*,?","g");function BA(e,n,t,i){return new lxe(e).build(n,t,i)}class lxe{constructor(n){this._driver=n}build(n,t,i){const r=new dxe(t);return this._resetContextStyleTimingState(r),$o(this,b_(n),r)}_resetContextStyleTimingState(n){n.currentQuerySelector="",n.collectedStyles=new Map,n.collectedStyles.set("",new Map),n.currentTime=0}visitTrigger(n,t){let i=t.queryCount=0,r=t.depCount=0;const o=[],s=[];return"@"==n.name.charAt(0)&&t.errors.push(function yCe(){return new ne(3006,!1)}()),n.definitions.forEach(a=>{if(this._resetContextStyleTimingState(t),0==a.type){const l=a,c=l.name;c.toString().split(/\s*,\s*/).forEach(u=>{l.name=u,o.push(this.visitState(l,t))}),l.name=c}else if(1==a.type){const l=this.visitTransition(a,t);i+=l.queryCount,r+=l.depCount,s.push(l)}else t.errors.push(function vCe(){return new ne(3007,!1)}())}),{type:7,name:n.name,states:o,transitions:s,queryCount:i,depCount:r,options:null}}visitState(n,t){const i=this.visitStyle(n.styles,t),r=n.options&&n.options.params||null;if(i.containsDynamicStyles){const o=new Set,s=r||{};i.styles.forEach(a=>{a instanceof Map&&a.forEach(l=>{IH(l).forEach(c=>{s.hasOwnProperty(c)||o.add(c)})})}),o.size&&($w(o.values()),t.errors.push(function bCe(e,n){return new ne(3008,!1)}()))}return{type:0,name:n.name,style:i,options:r?{params:r}:null}}visitTransition(n,t){t.queryCount=0,t.depCount=0;const i=$o(this,b_(n.animation),t);return{type:1,matchers:rxe(n.expr,t.errors),animation:i,queryCount:t.queryCount,depCount:t.depCount,options:vf(n.options)}}visitSequence(n,t){return{type:2,steps:n.steps.map(i=>$o(this,i,t)),options:vf(n.options)}}visitGroup(n,t){const i=t.currentTime;let r=0;const o=n.steps.map(s=>{t.currentTime=i;const a=$o(this,s,t);return r=Math.max(r,t.currentTime),a});return t.currentTime=r,{type:3,steps:o,options:vf(n.options)}}visitAnimate(n,t){const i=function hxe(e,n){if(e.hasOwnProperty("duration"))return e;if("number"==typeof e)return VA(Lw(e,n).duration,0,"");const t=e;if(t.split(/\s+/).some(o=>"{"==o.charAt(0)&&"{"==o.charAt(1))){const o=VA(0,0,"");return o.dynamic=!0,o.strValue=t,o}const r=Lw(t,n);return VA(r.duration,r.delay,r.easing)}(n.timings,t.errors);t.currentAnimateTimings=i;let r,o=n.styles?n.styles:Dr({});if(5==o.type)r=this.visitKeyframes(o,t);else{let s=n.styles,a=!1;if(!s){a=!0;const c={};i.easing&&(c.easing=i.easing),s=Dr(c)}t.currentTime+=i.duration+i.delay;const l=this.visitStyle(s,t);l.isEmptyStep=a,r=l}return t.currentAnimateTimings=null,{type:4,timings:i,style:r,options:null}}visitStyle(n,t){const i=this._makeStyleAst(n,t);return this._validateStyleAst(i,t),i}_makeStyleAst(n,t){const i=[],r=Array.isArray(n.styles)?n.styles:[n.styles];for(let a of r)"string"==typeof a?a===cc?i.push(a):t.errors.push(new ne(3002,!1)):i.push(TH(a));let o=!1,s=null;return i.forEach(a=>{if(a instanceof Map&&(a.has("easing")&&(s=a.get("easing"),a.delete("easing")),!o))for(let l of a.values())if(l.toString().indexOf("{{")>=0){o=!0;break}}),{type:6,styles:i,easing:s,offset:n.offset,containsDynamicStyles:o,options:null}}_validateStyleAst(n,t){const i=t.currentAnimateTimings;let r=t.currentTime,o=t.currentTime;i&&o>0&&(o-=i.duration+i.delay),n.styles.forEach(s=>{"string"!=typeof s&&s.forEach((a,l)=>{const c=t.collectedStyles.get(t.currentQuerySelector),u=c.get(l);let d=!0;u&&(o!=r&&o>=u.startTime&&r<=u.endTime&&(t.errors.push(function CCe(e,n,t,i,r){return new ne(3010,!1)}()),d=!1),o=u.startTime),d&&c.set(l,{startTime:o,endTime:r}),t.options&&function exe(e,n,t){const i=n.params||{},r=IH(e);r.length&&r.forEach(o=>{i.hasOwnProperty(o)||t.push(function pCe(e){return new ne(3001,!1)}())})}(a,t.options,t.errors)})})}visitKeyframes(n,t){const i={type:5,styles:[],options:null};if(!t.currentAnimateTimings)return t.errors.push(function xCe(){return new ne(3011,!1)}()),i;let o=0;const s=[];let a=!1,l=!1,c=0;const u=n.steps.map(_=>{const y=this._makeStyleAst(_,t);let v=null!=y.offset?y.offset:function fxe(e){if("string"==typeof e)return null;let n=null;if(Array.isArray(e))e.forEach(t=>{if(t instanceof Map&&t.has("offset")){const i=t;n=parseFloat(i.get("offset")),i.delete("offset")}});else if(e instanceof Map&&e.has("offset")){const t=e;n=parseFloat(t.get("offset")),t.delete("offset")}return n}(y.styles),b=0;return null!=v&&(o++,b=y.offset=v),l=l||b<0||b>1,a=a||b<c,c=b,s.push(b),y});l&&t.errors.push(function ECe(){return new ne(3012,!1)}()),a&&t.errors.push(function SCe(){return new ne(3200,!1)}());const d=n.steps.length;let f=0;o>0&&o<d?t.errors.push(function TCe(){return new ne(3202,!1)}()):0==o&&(f=1/(d-1));const h=d-1,p=t.currentTime,g=t.currentAnimateTimings,m=g.duration;return u.forEach((_,y)=>{const v=f>0?y==h?1:f*y:s[y],b=v*m;t.currentTime=p+g.delay+b,g.duration=b,this._validateStyleAst(_,t),_.offset=v,i.styles.push(_)}),i}visitReference(n,t){return{type:8,animation:$o(this,b_(n.animation),t),options:vf(n.options)}}visitAnimateChild(n,t){return t.depCount++,{type:9,options:vf(n.options)}}visitAnimateRef(n,t){return{type:10,animation:this.visitReference(n.animation,t),options:vf(n.options)}}visitQuery(n,t){const i=t.currentQuerySelector,r=n.options||{};t.queryCount++,t.currentQuery=n;const[o,s]=function cxe(e){const n=!!e.split(/\s*,\s*/).find(t=>":self"==t);return n&&(e=e.replace(axe,"")),e=e.replace(/@\*/g,Pw).replace(/@\w+/g,t=>Pw+"-"+t.slice(1)).replace(/:animating/g,NA),[e,n]}(n.selector);t.currentQuerySelector=i.length?i+" "+o:o,Lo(t.collectedStyles,t.currentQuerySelector,new Map);const a=$o(this,b_(n.animation),t);return t.currentQuery=null,t.currentQuerySelector=i,{type:11,selector:o,limit:r.limit||0,optional:!!r.optional,includeSelf:s,animation:a,originalSelector:n.selector,options:vf(n.options)}}visitStagger(n,t){t.currentQuery||t.errors.push(function DCe(){return new ne(3013,!1)}());const i="full"===n.timings?{duration:0,delay:0,easing:"full"}:Lw(n.timings,t.errors,!0);return{type:12,animation:$o(this,b_(n.animation),t),timings:i,options:null}}}class dxe{constructor(n){this.errors=n,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function vf(e){return e?(e=v_(e)).params&&(e.params=function uxe(e){return e?v_(e):null}(e.params)):e={},e}function VA(e,n,t){return{duration:e,delay:n,easing:t}}function zA(e,n,t,i,r,o,s=null,a=!1){return{type:1,element:e,keyframes:n,preStyleProps:t,postStyleProps:i,duration:r,delay:o,totalTime:r+o,easing:s,subTimeline:a}}class Uw{constructor(){this._map=new Map}get(n){return this._map.get(n)||[]}append(n,t){let i=this._map.get(n);i||this._map.set(n,i=[]),i.push(...t)}has(n){return this._map.has(n)}clear(){this._map.clear()}}const mxe=new RegExp(":enter","g"),yxe=new RegExp(":leave","g");function UA(e,n,t,i,r,o=new Map,s=new Map,a,l,c=[]){return(new vxe).buildKeyframes(e,n,t,i,r,o,s,a,l,c)}class vxe{buildKeyframes(n,t,i,r,o,s,a,l,c,u=[]){c=c||new Uw;const d=new HA(n,t,c,r,o,u,[]);d.options=l;const f=l.delay?uc(l.delay):0;d.currentTimeline.delayNextStep(f),d.currentTimeline.setStyles([s],null,d.errors,l),$o(this,i,d);const h=d.timelines.filter(p=>p.containsAnimation());if(h.length&&a.size){let p;for(let g=h.length-1;g>=0;g--){const m=h[g];if(m.element===t){p=m;break}}p&&!p.allowOnlyTimelineStyles()&&p.setStyles([a],null,d.errors,l)}return h.length?h.map(p=>p.buildKeyframes()):[zA(t,[],[],[],0,f,"",!1)]}visitTrigger(n,t){}visitState(n,t){}visitTransition(n,t){}visitAnimateChild(n,t){const i=t.subInstructions.get(t.element);if(i){const r=t.createSubContext(n.options),o=t.currentTimeline.currentTime,s=this._visitSubInstructions(i,r,r.options);o!=s&&t.transformIntoNewTimeline(s)}t.previousNode=n}visitAnimateRef(n,t){const i=t.createSubContext(n.options);i.transformIntoNewTimeline(),this._applyAnimationRefDelays([n.options,n.animation.options],t,i),this.visitReference(n.animation,i),t.transformIntoNewTimeline(i.currentTimeline.currentTime),t.previousNode=n}_applyAnimationRefDelays(n,t,i){for(const r of n){const o=r?.delay;if(o){const s="number"==typeof o?o:uc(w_(o,r?.params??{},t.errors));i.delayNextStep(s)}}}_visitSubInstructions(n,t,i){let o=t.currentTimeline.currentTime;const s=null!=i.duration?uc(i.duration):null,a=null!=i.delay?uc(i.delay):null;return 0!==s&&n.forEach(l=>{const c=t.appendInstructionToTimeline(l,s,a);o=Math.max(o,c.duration+c.delay)}),o}visitReference(n,t){t.updateOptions(n.options,!0),$o(this,n.animation,t),t.previousNode=n}visitSequence(n,t){const i=t.subContextCount;let r=t;const o=n.options;if(o&&(o.params||o.delay)&&(r=t.createSubContext(o),r.transformIntoNewTimeline(),null!=o.delay)){6==r.previousNode.type&&(r.currentTimeline.snapshotCurrentStyles(),r.previousNode=Hw);const s=uc(o.delay);r.delayNextStep(s)}n.steps.length&&(n.steps.forEach(s=>$o(this,s,r)),r.currentTimeline.applyStylesToKeyframe(),r.subContextCount>i&&r.transformIntoNewTimeline()),t.previousNode=n}visitGroup(n,t){const i=[];let r=t.currentTimeline.currentTime;const o=n.options&&n.options.delay?uc(n.options.delay):0;n.steps.forEach(s=>{const a=t.createSubContext(n.options);o&&a.delayNextStep(o),$o(this,s,a),r=Math.max(r,a.currentTimeline.currentTime),i.push(a.currentTimeline)}),i.forEach(s=>t.currentTimeline.mergeTimelineCollectedStyles(s)),t.transformIntoNewTimeline(r),t.previousNode=n}_visitTiming(n,t){if(n.dynamic){const i=n.strValue;return Lw(t.params?w_(i,t.params,t.errors):i,t.errors)}return{duration:n.duration,delay:n.delay,easing:n.easing}}visitAnimate(n,t){const i=t.currentAnimateTimings=this._visitTiming(n.timings,t),r=t.currentTimeline;i.delay&&(t.incrementTime(i.delay),r.snapshotCurrentStyles());const o=n.style;5==o.type?this.visitKeyframes(o,t):(t.incrementTime(i.duration),this.visitStyle(o,t),r.applyStylesToKeyframe()),t.currentAnimateTimings=null,t.previousNode=n}visitStyle(n,t){const i=t.currentTimeline,r=t.currentAnimateTimings;!r&&i.hasCurrentStyleProperties()&&i.forwardFrame();const o=r&&r.easing||n.easing;n.isEmptyStep?i.applyEmptyStep(o):i.setStyles(n.styles,o,t.errors,t.options),t.previousNode=n}visitKeyframes(n,t){const i=t.currentAnimateTimings,r=t.currentTimeline.duration,o=i.duration,a=t.createSubContext().currentTimeline;a.easing=i.easing,n.styles.forEach(l=>{a.forwardTime((l.offset||0)*o),a.setStyles(l.styles,l.easing,t.errors,t.options),a.applyStylesToKeyframe()}),t.currentTimeline.mergeTimelineCollectedStyles(a),t.transformIntoNewTimeline(r+o),t.previousNode=n}visitQuery(n,t){const i=t.currentTimeline.currentTime,r=n.options||{},o=r.delay?uc(r.delay):0;o&&(6===t.previousNode.type||0==i&&t.currentTimeline.hasCurrentStyleProperties())&&(t.currentTimeline.snapshotCurrentStyles(),t.previousNode=Hw);let s=i;const a=t.invokeQuery(n.selector,n.originalSelector,n.limit,n.includeSelf,!!r.optional,t.errors);t.currentQueryTotal=a.length;let l=null;a.forEach((c,u)=>{t.currentQueryIndex=u;const d=t.createSubContext(n.options,c);o&&d.delayNextStep(o),c===t.element&&(l=d.currentTimeline),$o(this,n.animation,d),d.currentTimeline.applyStylesToKeyframe(),s=Math.max(s,d.currentTimeline.currentTime)}),t.currentQueryIndex=0,t.currentQueryTotal=0,t.transformIntoNewTimeline(s),l&&(t.currentTimeline.mergeTimelineCollectedStyles(l),t.currentTimeline.snapshotCurrentStyles()),t.previousNode=n}visitStagger(n,t){const i=t.parentContext,r=t.currentTimeline,o=n.timings,s=Math.abs(o.duration),a=s*(t.currentQueryTotal-1);let l=s*t.currentQueryIndex;switch(o.duration<0?"reverse":o.easing){case"reverse":l=a-l;break;case"full":l=i.currentStaggerTime}const u=t.currentTimeline;l&&u.delayNextStep(l);const d=u.currentTime;$o(this,n.animation,t),t.previousNode=n,i.currentStaggerTime=r.currentTime-d+(r.startTime-i.currentTimeline.startTime)}}const Hw={};class HA{constructor(n,t,i,r,o,s,a,l){this._driver=n,this.element=t,this.subInstructions=i,this._enterClassName=r,this._leaveClassName=o,this.errors=s,this.timelines=a,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=Hw,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=l||new jw(this._driver,t,0),a.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(n,t){if(!n)return;const i=n;let r=this.options;null!=i.duration&&(r.duration=uc(i.duration)),null!=i.delay&&(r.delay=uc(i.delay));const o=i.params;if(o){let s=r.params;s||(s=this.options.params={}),Object.keys(o).forEach(a=>{(!t||!s.hasOwnProperty(a))&&(s[a]=w_(o[a],s,this.errors))})}}_copyOptions(){const n={};if(this.options){const t=this.options.params;if(t){const i=n.params={};Object.keys(t).forEach(r=>{i[r]=t[r]})}}return n}createSubContext(n=null,t,i){const r=t||this.element,o=new HA(this._driver,r,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(r,i||0));return o.previousNode=this.previousNode,o.currentAnimateTimings=this.currentAnimateTimings,o.options=this._copyOptions(),o.updateOptions(n),o.currentQueryIndex=this.currentQueryIndex,o.currentQueryTotal=this.currentQueryTotal,o.parentContext=this,this.subContextCount++,o}transformIntoNewTimeline(n){return this.previousNode=Hw,this.currentTimeline=this.currentTimeline.fork(this.element,n),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(n,t,i){const r={duration:t??n.duration,delay:this.currentTimeline.currentTime+(i??0)+n.delay,easing:""},o=new bxe(this._driver,n.element,n.keyframes,n.preStyleProps,n.postStyleProps,r,n.stretchStartingKeyframe);return this.timelines.push(o),r}incrementTime(n){this.currentTimeline.forwardTime(this.currentTimeline.duration+n)}delayNextStep(n){n>0&&this.currentTimeline.delayNextStep(n)}invokeQuery(n,t,i,r,o,s){let a=[];if(r&&a.push(this.element),n.length>0){n=(n=n.replace(mxe,"."+this._enterClassName)).replace(yxe,"."+this._leaveClassName);let c=this._driver.query(this.element,n,1!=i);0!==i&&(c=i<0?c.slice(c.length+i,c.length):c.slice(0,i)),a.push(...c)}return!o&&0==a.length&&s.push(function ICe(e){return new ne(3014,!1)}()),a}}class jw{constructor(n,t,i,r){this._driver=n,this.element=t,this.startTime=i,this._elementTimelineStylesLookup=r,this.duration=0,this.easing=null,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(t),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(t,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(n){const t=1===this._keyframes.size&&this._pendingStyles.size;this.duration||t?(this.forwardTime(this.currentTime+n),t&&this.snapshotCurrentStyles()):this.startTime+=n}fork(n,t){return this.applyStylesToKeyframe(),new jw(this._driver,n,t||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(n){this.applyStylesToKeyframe(),this.duration=n,this._loadKeyframe()}_updateStyle(n,t){this._localTimelineStyles.set(n,t),this._globalTimelineStyles.set(n,t),this._styleSummary.set(n,{time:this.currentTime,value:t})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(n){n&&this._previousKeyframe.set("easing",n);for(let[t,i]of this._globalTimelineStyles)this._backFill.set(t,i||cc),this._currentKeyframe.set(t,cc);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(n,t,i,r){t&&this._previousKeyframe.set("easing",t);const o=r&&r.params||{},s=function wxe(e,n){const t=new Map;let i;return e.forEach(r=>{if("*"===r){i=i||n.keys();for(let o of i)t.set(o,cc)}else yu(r,t)}),t}(n,this._globalTimelineStyles);for(let[a,l]of s){const c=w_(l,o,i);this._pendingStyles.set(a,c),this._localTimelineStyles.has(a)||this._backFill.set(a,this._globalTimelineStyles.get(a)??cc),this._updateStyle(a,c)}}applyStylesToKeyframe(){0!=this._pendingStyles.size&&(this._pendingStyles.forEach((n,t)=>{this._currentKeyframe.set(t,n)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((n,t)=>{this._currentKeyframe.has(t)||this._currentKeyframe.set(t,n)}))}snapshotCurrentStyles(){for(let[n,t]of this._localTimelineStyles)this._pendingStyles.set(n,t),this._updateStyle(n,t)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const n=[];for(let t in this._currentKeyframe)n.push(t);return n}mergeTimelineCollectedStyles(n){n._styleSummary.forEach((t,i)=>{const r=this._styleSummary.get(i);(!r||t.time>r.time)&&this._updateStyle(i,t.value)})}buildKeyframes(){this.applyStylesToKeyframe();const n=new Set,t=new Set,i=1===this._keyframes.size&&0===this.duration;let r=[];this._keyframes.forEach((a,l)=>{const c=yu(a,new Map,this._backFill);c.forEach((u,d)=>{"!"===u?n.add(d):u===cc&&t.add(d)}),i||c.set("offset",l/this.duration),r.push(c)});const o=n.size?$w(n.values()):[],s=t.size?$w(t.values()):[];if(i){const a=r[0],l=new Map(a);a.set("offset",0),l.set("offset",1),r=[a,l]}return zA(this.element,r,o,s,this.duration,this.startTime,this.easing,!1)}}class bxe extends jw{constructor(n,t,i,r,o,s,a=!1){super(n,t,s.delay),this.keyframes=i,this.preStyleProps=r,this.postStyleProps=o,this._stretchStartingKeyframe=a,this.timings={duration:s.duration,delay:s.delay,easing:s.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let n=this.keyframes,{delay:t,duration:i,easing:r}=this.timings;if(this._stretchStartingKeyframe&&t){const o=[],s=i+t,a=t/s,l=yu(n[0]);l.set("offset",0),o.push(l);const c=yu(n[0]);c.set("offset",RH(a)),o.push(c);const u=n.length-1;for(let d=1;d<=u;d++){let f=yu(n[d]);const h=f.get("offset");f.set("offset",RH((t+h*i)/s)),o.push(f)}i=s,t=0,r="",n=o}return zA(this.element,n,this.preStyleProps,this.postStyleProps,i,t,r,!0)}}function RH(e,n=3){const t=Math.pow(10,n-1);return Math.round(e*t)/t}class jA{}const Cxe=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]);class xxe extends jA{normalizePropertyName(n,t){return $A(n)}normalizeStyleValue(n,t,i,r){let o="";const s=i.toString().trim();if(Cxe.has(t)&&0!==i&&"0"!==i)if("number"==typeof i)o="px";else{const a=i.match(/^[+-]?[\d\.]+([a-z]*)$/);a&&0==a[1].length&&r.push(function _Ce(e,n){return new ne(3005,!1)}())}return s+o}}function FH(e,n,t,i,r,o,s,a,l,c,u,d,f){return{type:0,element:e,triggerName:n,isRemovalTransition:r,fromState:t,fromStyles:o,toState:i,toStyles:s,timelines:a,queriedElements:l,preStyleProps:c,postStyleProps:u,totalTime:d,errors:f}}const qA={};class NH{constructor(n,t,i){this._triggerName=n,this.ast=t,this._stateStyles=i}match(n,t,i,r){return function Exe(e,n,t,i,r){return e.some(o=>o(n,t,i,r))}(this.ast.matchers,n,t,i,r)}buildStyles(n,t,i){let r=this._stateStyles.get("*");return void 0!==n&&(r=this._stateStyles.get(n?.toString())||r),r?r.buildStyles(t,i):new Map}build(n,t,i,r,o,s,a,l,c,u){const d=[],f=this.ast.options&&this.ast.options.params||qA,p=this.buildStyles(i,a&&a.params||qA,d),g=l&&l.params||qA,m=this.buildStyles(r,g,d),_=new Set,y=new Map,v=new Map,b="void"===r,w={params:Sxe(g,f),delay:this.ast.options?.delay},x=u?[]:UA(n,t,this.ast.animation,o,s,p,m,w,c,d);let C=0;if(x.forEach(A=>{C=Math.max(A.duration+A.delay,C)}),d.length)return FH(t,this._triggerName,i,r,b,p,m,[],[],y,v,C,d);x.forEach(A=>{const M=A.element,N=Lo(y,M,new Set);A.preStyleProps.forEach(P=>N.add(P));const V=Lo(v,M,new Set);A.postStyleProps.forEach(P=>V.add(P)),M!==t&&_.add(M)});const S=$w(_.values());return FH(t,this._triggerName,i,r,b,p,m,x,S,y,v,C)}}function Sxe(e,n){const t=v_(n);for(const i in e)e.hasOwnProperty(i)&&null!=e[i]&&(t[i]=e[i]);return t}class Txe{constructor(n,t,i){this.styles=n,this.defaultParams=t,this.normalizer=i}buildStyles(n,t){const i=new Map,r=v_(this.defaultParams);return Object.keys(n).forEach(o=>{const s=n[o];null!==s&&(r[o]=s)}),this.styles.styles.forEach(o=>{"string"!=typeof o&&o.forEach((s,a)=>{s&&(s=w_(s,r,t));const l=this.normalizer.normalizePropertyName(a,t);s=this.normalizer.normalizeStyleValue(a,l,s,t),i.set(a,s)})}),i}}class Ixe{constructor(n,t,i){this.name=n,this.ast=t,this._normalizer=i,this.transitionFactories=[],this.states=new Map,t.states.forEach(r=>{this.states.set(r.name,new Txe(r.style,r.options&&r.options.params||{},i))}),PH(this.states,"true","1"),PH(this.states,"false","0"),t.transitions.forEach(r=>{this.transitionFactories.push(new NH(n,r,this.states))}),this.fallbackTransition=function Mxe(e,n,t){return new NH(e,{type:1,animation:{type:2,steps:[],options:null},matchers:[(s,a)=>!0],options:null,queryCount:0,depCount:0},n)}(n,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(n,t,i,r){return this.transitionFactories.find(s=>s.match(n,t,i,r))||null}matchStyles(n,t,i){return this.fallbackTransition.buildStyles(n,t,i)}}function PH(e,n,t){e.has(n)?e.has(t)||e.set(t,e.get(n)):e.has(t)&&e.set(n,e.get(t))}const Axe=new Uw;class kxe{constructor(n,t,i){this.bodyNode=n,this._driver=t,this._normalizer=i,this._animations=new Map,this._playersById=new Map,this.players=[]}register(n,t){const i=[],o=BA(this._driver,t,i,[]);if(i.length)throw function NCe(e){return new ne(3503,!1)}();this._animations.set(n,o)}_buildPlayer(n,t,i){const r=n.element,o=yH(this._normalizer,n.keyframes,t,i);return this._driver.animate(r,o,n.duration,n.delay,n.easing,[],!0)}create(n,t,i={}){const r=[],o=this._animations.get(n);let s;const a=new Map;if(o?(s=UA(this._driver,t,o,FA,Fw,new Map,new Map,i,Axe,r),s.forEach(u=>{const d=Lo(a,u.element,new Map);u.postStyleProps.forEach(f=>d.set(f,null))})):(r.push(function PCe(){return new ne(3300,!1)}()),s=[]),r.length)throw function LCe(e){return new ne(3504,!1)}();a.forEach((u,d)=>{u.forEach((f,h)=>{u.set(h,this._driver.computeStyle(d,h,cc))})});const c=_u(s.map(u=>{const d=a.get(u.element);return this._buildPlayer(u,new Map,d)}));return this._playersById.set(n,c),c.onDestroy(()=>this.destroy(n)),this.players.push(c),c}destroy(n){const t=this._getPlayer(n);t.destroy(),this._playersById.delete(n);const i=this.players.indexOf(t);i>=0&&this.players.splice(i,1)}_getPlayer(n){const t=this._playersById.get(n);if(!t)throw function $Ce(e){return new ne(3301,!1)}();return t}listen(n,t,i,r){const o=kA(t,"","","");return MA(this._getPlayer(n),i,o,r),()=>{}}command(n,t,i,r){if("register"==i)return void this.register(n,r[0]);if("create"==i)return void this.create(n,t,r[0]||{});const o=this._getPlayer(n);switch(i){case"play":o.play();break;case"pause":o.pause();break;case"reset":o.reset();break;case"restart":o.restart();break;case"finish":o.finish();break;case"init":o.init();break;case"setPosition":o.setPosition(parseFloat(r[0]));break;case"destroy":this.destroy(n)}}}const LH="ng-animate-queued",WA="ng-animate-disabled",Pxe=[],$H={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},Lxe={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},ia="__ng_removed";class GA{get params(){return this.options.params}constructor(n,t=""){this.namespaceId=t;const i=n&&n.hasOwnProperty("value");if(this.value=function zxe(e){return e??null}(i?n.value:n),i){const o=v_(n);delete o.value,this.options=o}else this.options={};this.options.params||(this.options.params={})}absorbOptions(n){const t=n.params;if(t){const i=this.options.params;Object.keys(t).forEach(r=>{null==i[r]&&(i[r]=t[r])})}}}const C_="void",KA=new GA(C_);class $xe{constructor(n,t,i){this.id=n,this.hostElement=t,this._engine=i,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+n,vs(t,this._hostClassName)}listen(n,t,i,r){if(!this._triggers.has(t))throw function BCe(e,n){return new ne(3302,!1)}();if(null==i||0==i.length)throw function VCe(e){return new ne(3303,!1)}();if(!function Uxe(e){return"start"==e||"done"==e}(i))throw function zCe(e,n){return new ne(3400,!1)}();const o=Lo(this._elementListeners,n,[]),s={name:t,phase:i,callback:r};o.push(s);const a=Lo(this._engine.statesByElement,n,new Map);return a.has(t)||(vs(n,Nw),vs(n,Nw+"-"+t),a.set(t,KA)),()=>{this._engine.afterFlush(()=>{const l=o.indexOf(s);l>=0&&o.splice(l,1),this._triggers.has(t)||a.delete(t)})}}register(n,t){return!this._triggers.has(n)&&(this._triggers.set(n,t),!0)}_getTrigger(n){const t=this._triggers.get(n);if(!t)throw function UCe(e){return new ne(3401,!1)}();return t}trigger(n,t,i,r=!0){const o=this._getTrigger(t),s=new YA(this.id,t,n);let a=this._engine.statesByElement.get(n);a||(vs(n,Nw),vs(n,Nw+"-"+t),this._engine.statesByElement.set(n,a=new Map));let l=a.get(t);const c=new GA(i,this.id);if(!(i&&i.hasOwnProperty("value"))&&l&&c.absorbOptions(l.options),a.set(t,c),l||(l=KA),c.value!==C_&&l.value===c.value){if(!function qxe(e,n){const t=Object.keys(e),i=Object.keys(n);if(t.length!=i.length)return!1;for(let r=0;r<t.length;r++){const o=t[r];if(!n.hasOwnProperty(o)||e[o]!==n[o])return!1}return!0}(l.params,c.params)){const g=[],m=o.matchStyles(l.value,l.params,g),_=o.matchStyles(c.value,c.params,g);g.length?this._engine.reportError(g):this._engine.afterFlush(()=>{yf(n,m),el(n,_)})}return}const f=Lo(this._engine.playersByElement,n,[]);f.forEach(g=>{g.namespaceId==this.id&&g.triggerName==t&&g.queued&&g.destroy()});let h=o.matchTransition(l.value,c.value,n,c.params),p=!1;if(!h){if(!r)return;h=o.fallbackTransition,p=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:n,triggerName:t,transition:h,fromState:l,toState:c,player:s,isFallbackTransition:p}),p||(vs(n,LH),s.onStart(()=>{ng(n,LH)})),s.onDone(()=>{let g=this.players.indexOf(s);g>=0&&this.players.splice(g,1);const m=this._engine.playersByElement.get(n);if(m){let _=m.indexOf(s);_>=0&&m.splice(_,1)}}),this.players.push(s),f.push(s),s}deregister(n){this._triggers.delete(n),this._engine.statesByElement.forEach(t=>t.delete(n)),this._elementListeners.forEach((t,i)=>{this._elementListeners.set(i,t.filter(r=>r.name!=n))})}clearElementCache(n){this._engine.statesByElement.delete(n),this._elementListeners.delete(n);const t=this._engine.playersByElement.get(n);t&&(t.forEach(i=>i.destroy()),this._engine.playersByElement.delete(n))}_signalRemovalForInnerTriggers(n,t){const i=this._engine.driver.query(n,Pw,!0);i.forEach(r=>{if(r[ia])return;const o=this._engine.fetchNamespacesByElement(r);o.size?o.forEach(s=>s.triggerLeaveAnimation(r,t,!1,!0)):this.clearElementCache(r)}),this._engine.afterFlushAnimationsDone(()=>i.forEach(r=>this.clearElementCache(r)))}triggerLeaveAnimation(n,t,i,r){const o=this._engine.statesByElement.get(n),s=new Map;if(o){const a=[];if(o.forEach((l,c)=>{if(s.set(c,l.value),this._triggers.has(c)){const u=this.trigger(n,c,C_,r);u&&a.push(u)}}),a.length)return this._engine.markElementAsRemoved(this.id,n,!0,t,s),i&&_u(a).onDone(()=>this._engine.processLeaveNode(n)),!0}return!1}prepareLeaveAnimationListeners(n){const t=this._elementListeners.get(n),i=this._engine.statesByElement.get(n);if(t&&i){const r=new Set;t.forEach(o=>{const s=o.name;if(r.has(s))return;r.add(s);const l=this._triggers.get(s).fallbackTransition,c=i.get(s)||KA,u=new GA(C_),d=new YA(this.id,s,n);this._engine.totalQueuedPlayers++,this._queue.push({element:n,triggerName:s,transition:l,fromState:c,toState:u,player:d,isFallbackTransition:!0})})}}removeNode(n,t){const i=this._engine;if(n.childElementCount&&this._signalRemovalForInnerTriggers(n,t),this.triggerLeaveAnimation(n,t,!0))return;let r=!1;if(i.totalAnimations){const o=i.players.length?i.playersByQueriedElement.get(n):[];if(o&&o.length)r=!0;else{let s=n;for(;s=s.parentNode;)if(i.statesByElement.get(s)){r=!0;break}}}if(this.prepareLeaveAnimationListeners(n),r)i.markElementAsRemoved(this.id,n,!1,t);else{const o=n[ia];(!o||o===$H)&&(i.afterFlush(()=>this.clearElementCache(n)),i.destroyInnerAnimations(n),i._onRemovalComplete(n,t))}}insertNode(n,t){vs(n,this._hostClassName)}drainQueuedTransitions(n){const t=[];return this._queue.forEach(i=>{const r=i.player;if(r.destroyed)return;const o=i.element,s=this._elementListeners.get(o);s&&s.forEach(a=>{if(a.name==i.triggerName){const l=kA(o,i.triggerName,i.fromState.value,i.toState.value);l._data=n,MA(i.player,a.phase,l,a.callback)}}),r.markedForDestroy?this._engine.afterFlush(()=>{r.destroy()}):t.push(i)}),this._queue=[],t.sort((i,r)=>{const o=i.transition.ast.depCount,s=r.transition.ast.depCount;return 0==o||0==s?o-s:this._engine.driver.containsElement(i.element,r.element)?1:-1})}destroy(n){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,n)}}class Bxe{_onRemovalComplete(n,t){this.onRemovalComplete(n,t)}constructor(n,t,i){this.bodyNode=n,this.driver=t,this._normalizer=i,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(r,o)=>{}}get queuedPlayers(){const n=[];return this._namespaceList.forEach(t=>{t.players.forEach(i=>{i.queued&&n.push(i)})}),n}createNamespace(n,t){const i=new $xe(n,t,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,t)?this._balanceNamespaceList(i,t):(this.newHostElements.set(t,i),this.collectEnterElement(t)),this._namespaceLookup[n]=i}_balanceNamespaceList(n,t){const i=this._namespaceList,r=this.namespacesByHostElement;if(i.length-1>=0){let s=!1,a=this.driver.getParentElement(t);for(;a;){const l=r.get(a);if(l){const c=i.indexOf(l);i.splice(c+1,0,n),s=!0;break}a=this.driver.getParentElement(a)}s||i.unshift(n)}else i.push(n);return r.set(t,n),n}register(n,t){let i=this._namespaceLookup[n];return i||(i=this.createNamespace(n,t)),i}registerTrigger(n,t,i){let r=this._namespaceLookup[n];r&&r.register(t,i)&&this.totalAnimations++}destroy(n,t){n&&(this.afterFlush(()=>{}),this.afterFlushAnimationsDone(()=>{const i=this._fetchNamespace(n);this.namespacesByHostElement.delete(i.hostElement);const r=this._namespaceList.indexOf(i);r>=0&&this._namespaceList.splice(r,1),i.destroy(t),delete this._namespaceLookup[n]}))}_fetchNamespace(n){return this._namespaceLookup[n]}fetchNamespacesByElement(n){const t=new Set,i=this.statesByElement.get(n);if(i)for(let r of i.values())if(r.namespaceId){const o=this._fetchNamespace(r.namespaceId);o&&t.add(o)}return t}trigger(n,t,i,r){if(qw(t)){const o=this._fetchNamespace(n);if(o)return o.trigger(t,i,r),!0}return!1}insertNode(n,t,i,r){if(!qw(t))return;const o=t[ia];if(o&&o.setForRemoval){o.setForRemoval=!1,o.setForMove=!0;const s=this.collectedLeaveElements.indexOf(t);s>=0&&this.collectedLeaveElements.splice(s,1)}if(n){const s=this._fetchNamespace(n);s&&s.insertNode(t,i)}r&&this.collectEnterElement(t)}collectEnterElement(n){this.collectedEnterElements.push(n)}markElementAsDisabled(n,t){t?this.disabledNodes.has(n)||(this.disabledNodes.add(n),vs(n,WA)):this.disabledNodes.has(n)&&(this.disabledNodes.delete(n),ng(n,WA))}removeNode(n,t,i){if(qw(t)){const r=n?this._fetchNamespace(n):null;r?r.removeNode(t,i):this.markElementAsRemoved(n,t,!1,i);const o=this.namespacesByHostElement.get(t);o&&o.id!==n&&o.removeNode(t,i)}else this._onRemovalComplete(t,i)}markElementAsRemoved(n,t,i,r,o){this.collectedLeaveElements.push(t),t[ia]={namespaceId:n,setForRemoval:r,hasAnimation:i,removedBeforeQueried:!1,previousTriggersValues:o}}listen(n,t,i,r,o){return qw(t)?this._fetchNamespace(n).listen(t,i,r,o):()=>{}}_buildInstruction(n,t,i,r,o){return n.transition.build(this.driver,n.element,n.fromState.value,n.toState.value,i,r,n.fromState.options,n.toState.options,t,o)}destroyInnerAnimations(n){let t=this.driver.query(n,Pw,!0);t.forEach(i=>this.destroyActiveAnimationsForElement(i)),0!=this.playersByQueriedElement.size&&(t=this.driver.query(n,NA,!0),t.forEach(i=>this.finishActiveQueriedAnimationOnElement(i)))}destroyActiveAnimationsForElement(n){const t=this.playersByElement.get(n);t&&t.forEach(i=>{i.queued?i.markedForDestroy=!0:i.destroy()})}finishActiveQueriedAnimationOnElement(n){const t=this.playersByQueriedElement.get(n);t&&t.forEach(i=>i.finish())}whenRenderingDone(){return new Promise(n=>{if(this.players.length)return _u(this.players).onDone(()=>n());n()})}processLeaveNode(n){const t=n[ia];if(t&&t.setForRemoval){if(n[ia]=$H,t.namespaceId){this.destroyInnerAnimations(n);const i=this._fetchNamespace(t.namespaceId);i&&i.clearElementCache(n)}this._onRemovalComplete(n,t.setForRemoval)}n.classList?.contains(WA)&&this.markElementAsDisabled(n,!1),this.driver.query(n,".ng-animate-disabled",!0).forEach(i=>{this.markElementAsDisabled(i,!1)})}flush(n=-1){let t=[];if(this.newHostElements.size&&(this.newHostElements.forEach((i,r)=>this._balanceNamespaceList(i,r)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let i=0;i<this.collectedEnterElements.length;i++)vs(this.collectedEnterElements[i],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const i=[];try{t=this._flushAnimations(i,n)}finally{for(let r=0;r<i.length;r++)i[r]()}}else for(let i=0;i<this.collectedLeaveElements.length;i++)this.processLeaveNode(this.collectedLeaveElements[i]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(i=>i()),this._flushFns=[],this._whenQuietFns.length){const i=this._whenQuietFns;this._whenQuietFns=[],t.length?_u(t).onDone(()=>{i.forEach(r=>r())}):i.forEach(r=>r())}}reportError(n){throw function HCe(e){return new ne(3402,!1)}()}_flushAnimations(n,t){const i=new Uw,r=[],o=new Map,s=[],a=new Map,l=new Map,c=new Map,u=new Set;this.disabledNodes.forEach(I=>{u.add(I);const O=this.driver.query(I,".ng-animate-queued",!0);for(let T=0;T<O.length;T++)u.add(O[T])});const d=this.bodyNode,f=Array.from(this.statesByElement.keys()),h=zH(f,this.collectedEnterElements),p=new Map;let g=0;h.forEach((I,O)=>{const T=FA+g++;p.set(O,T),I.forEach(R=>vs(R,T))});const m=[],_=new Set,y=new Set;for(let I=0;I<this.collectedLeaveElements.length;I++){const O=this.collectedLeaveElements[I],T=O[ia];T&&T.setForRemoval&&(m.push(O),_.add(O),T.hasAnimation?this.driver.query(O,".ng-star-inserted",!0).forEach(R=>_.add(R)):y.add(O))}const v=new Map,b=zH(f,Array.from(_));b.forEach((I,O)=>{const T=Fw+g++;v.set(O,T),I.forEach(R=>vs(R,T))}),n.push(()=>{h.forEach((I,O)=>{const T=p.get(O);I.forEach(R=>ng(R,T))}),b.forEach((I,O)=>{const T=v.get(O);I.forEach(R=>ng(R,T))}),m.forEach(I=>{this.processLeaveNode(I)})});const w=[],x=[];for(let I=this._namespaceList.length-1;I>=0;I--)this._namespaceList[I].drainQueuedTransitions(t).forEach(T=>{const R=T.player,F=T.element;if(w.push(R),this.collectedEnterElements.length){const te=F[ia];if(te&&te.setForMove){if(te.previousTriggersValues&&te.previousTriggersValues.has(T.triggerName)){const me=te.previousTriggersValues.get(T.triggerName),X=this.statesByElement.get(T.element);if(X&&X.has(T.triggerName)){const se=X.get(T.triggerName);se.value=me,X.set(T.triggerName,se)}}return void R.destroy()}}const z=!d||!this.driver.containsElement(d,F),H=v.get(F),j=p.get(F),U=this._buildInstruction(T,i,j,H,z);if(U.errors&&U.errors.length)return void x.push(U);if(z)return R.onStart(()=>yf(F,U.fromStyles)),R.onDestroy(()=>el(F,U.toStyles)),void r.push(R);if(T.isFallbackTransition)return R.onStart(()=>yf(F,U.fromStyles)),R.onDestroy(()=>el(F,U.toStyles)),void r.push(R);const Q=[];U.timelines.forEach(te=>{te.stretchStartingKeyframe=!0,this.disabledNodes.has(te.element)||Q.push(te)}),U.timelines=Q,i.append(F,U.timelines),s.push({instruction:U,player:R,element:F}),U.queriedElements.forEach(te=>Lo(a,te,[]).push(R)),U.preStyleProps.forEach((te,me)=>{if(te.size){let X=l.get(me);X||l.set(me,X=new Set),te.forEach((se,ae)=>X.add(ae))}}),U.postStyleProps.forEach((te,me)=>{let X=c.get(me);X||c.set(me,X=new Set),te.forEach((se,ae)=>X.add(ae))})});if(x.length){const I=[];x.forEach(O=>{I.push(function jCe(e,n){return new ne(3505,!1)}())}),w.forEach(O=>O.destroy()),this.reportError(I)}const C=new Map,S=new Map;s.forEach(I=>{const O=I.element;i.has(O)&&(S.set(O,O),this._beforeAnimationBuild(I.player.namespaceId,I.instruction,C))}),r.forEach(I=>{const O=I.element;this._getPreviousPlayers(O,!1,I.namespaceId,I.triggerName,null).forEach(R=>{Lo(C,O,[]).push(R),R.destroy()})});const A=m.filter(I=>HH(I,l,c)),M=new Map;VH(M,this.driver,y,c,cc).forEach(I=>{HH(I,l,c)&&A.push(I)});const V=new Map;h.forEach((I,O)=>{VH(V,this.driver,new Set(I),l,"!")}),A.forEach(I=>{const O=M.get(I),T=V.get(I);M.set(I,new Map([...O?.entries()??[],...T?.entries()??[]]))});const P=[],E=[],D={};s.forEach(I=>{const{element:O,player:T,instruction:R}=I;if(i.has(O)){if(u.has(O))return T.onDestroy(()=>el(O,R.toStyles)),T.disabled=!0,T.overrideTotalTime(R.totalTime),void r.push(T);let F=D;if(S.size>1){let H=O;const j=[];for(;H=H.parentNode;){const U=S.get(H);if(U){F=U;break}j.push(H)}j.forEach(U=>S.set(U,F))}const z=this._buildAnimation(T.namespaceId,R,C,o,V,M);if(T.setRealPlayer(z),F===D)P.push(T);else{const H=this.playersByElement.get(F);H&&H.length&&(T.parentPlayer=_u(H)),r.push(T)}}else yf(O,R.fromStyles),T.onDestroy(()=>el(O,R.toStyles)),E.push(T),u.has(O)&&r.push(T)}),E.forEach(I=>{const O=o.get(I.element);if(O&&O.length){const T=_u(O);I.setRealPlayer(T)}}),r.forEach(I=>{I.parentPlayer?I.syncPlayerEvents(I.parentPlayer):I.destroy()});for(let I=0;I<m.length;I++){const O=m[I],T=O[ia];if(ng(O,Fw),T&&T.hasAnimation)continue;let R=[];if(a.size){let z=a.get(O);z&&z.length&&R.push(...z);let H=this.driver.query(O,NA,!0);for(let j=0;j<H.length;j++){let U=a.get(H[j]);U&&U.length&&R.push(...U)}}const F=R.filter(z=>!z.destroyed);F.length?Hxe(this,O,F):this.processLeaveNode(O)}return m.length=0,P.forEach(I=>{this.players.push(I),I.onDone(()=>{I.destroy();const O=this.players.indexOf(I);this.players.splice(O,1)}),I.play()}),P}afterFlush(n){this._flushFns.push(n)}afterFlushAnimationsDone(n){this._whenQuietFns.push(n)}_getPreviousPlayers(n,t,i,r,o){let s=[];if(t){const a=this.playersByQueriedElement.get(n);a&&(s=a)}else{const a=this.playersByElement.get(n);if(a){const l=!o||o==C_;a.forEach(c=>{c.queued||!l&&c.triggerName!=r||s.push(c)})}}return(i||r)&&(s=s.filter(a=>!(i&&i!=a.namespaceId||r&&r!=a.triggerName))),s}_beforeAnimationBuild(n,t,i){const o=t.element,s=t.isRemovalTransition?void 0:n,a=t.isRemovalTransition?void 0:t.triggerName;for(const l of t.timelines){const c=l.element,u=c!==o,d=Lo(i,c,[]);this._getPreviousPlayers(c,u,s,a,t.toState).forEach(h=>{const p=h.getRealPlayer();p.beforeDestroy&&p.beforeDestroy(),h.destroy(),d.push(h)})}yf(o,t.fromStyles)}_buildAnimation(n,t,i,r,o,s){const a=t.triggerName,l=t.element,c=[],u=new Set,d=new Set,f=t.timelines.map(p=>{const g=p.element;u.add(g);const m=g[ia];if(m&&m.removedBeforeQueried)return new y_(p.duration,p.delay);const _=g!==l,y=function jxe(e){const n=[];return UH(e,n),n}((i.get(g)||Pxe).map(C=>C.getRealPlayer())).filter(C=>!!C.element&&C.element===g),v=o.get(g),b=s.get(g),w=yH(this._normalizer,p.keyframes,v,b),x=this._buildPlayer(p,w,y);if(p.subTimeline&&r&&d.add(g),_){const C=new YA(n,a,g);C.setRealPlayer(x),c.push(C)}return x});c.forEach(p=>{Lo(this.playersByQueriedElement,p.element,[]).push(p),p.onDone(()=>function Vxe(e,n,t){let i=e.get(n);if(i){if(i.length){const r=i.indexOf(t);i.splice(r,1)}0==i.length&&e.delete(n)}return i}(this.playersByQueriedElement,p.element,p))}),u.forEach(p=>vs(p,SH));const h=_u(f);return h.onDestroy(()=>{u.forEach(p=>ng(p,SH)),el(l,t.toStyles)}),d.forEach(p=>{Lo(r,p,[]).push(h)}),h}_buildPlayer(n,t,i){return t.length>0?this.driver.animate(n.element,t,n.duration,n.delay,n.easing,i):new y_(n.duration,n.delay)}}class YA{constructor(n,t,i){this.namespaceId=n,this.triggerName=t,this.element=i,this._player=new y_,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.parentPlayer=null,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(n){this._containsRealPlayer||(this._player=n,this._queuedCallbacks.forEach((t,i)=>{t.forEach(r=>MA(n,i,void 0,r))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(n.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(n){this.totalTime=n}syncPlayerEvents(n){const t=this._player;t.triggerCallback&&n.onStart(()=>t.triggerCallback("start")),n.onDone(()=>this.finish()),n.onDestroy(()=>this.destroy())}_queueEvent(n,t){Lo(this._queuedCallbacks,n,[]).push(t)}onDone(n){this.queued&&this._queueEvent("done",n),this._player.onDone(n)}onStart(n){this.queued&&this._queueEvent("start",n),this._player.onStart(n)}onDestroy(n){this.queued&&this._queueEvent("destroy",n),this._player.onDestroy(n)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(n){this.queued||this._player.setPosition(n)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(n){const t=this._player;t.triggerCallback&&t.triggerCallback(n)}}function qw(e){return e&&1===e.nodeType}function BH(e,n){const t=e.style.display;return e.style.display=n??"none",t}function VH(e,n,t,i,r){const o=[];t.forEach(l=>o.push(BH(l)));const s=[];i.forEach((l,c)=>{const u=new Map;l.forEach(d=>{const f=n.computeStyle(c,d,r);u.set(d,f),(!f||0==f.length)&&(c[ia]=Lxe,s.push(c))}),e.set(c,u)});let a=0;return t.forEach(l=>BH(l,o[a++])),s}function zH(e,n){const t=new Map;if(e.forEach(a=>t.set(a,[])),0==n.length)return t;const r=new Set(n),o=new Map;function s(a){if(!a)return 1;let l=o.get(a);if(l)return l;const c=a.parentNode;return l=t.has(c)?c:r.has(c)?1:s(c),o.set(a,l),l}return n.forEach(a=>{const l=s(a);1!==l&&t.get(l).push(a)}),t}function vs(e,n){e.classList?.add(n)}function ng(e,n){e.classList?.remove(n)}function Hxe(e,n,t){_u(t).onDone(()=>e.processLeaveNode(n))}function UH(e,n){for(let t=0;t<e.length;t++){const i=e[t];i instanceof mH?UH(i.players,n):n.push(i)}}function HH(e,n,t){const i=t.get(e);if(!i)return!1;let r=n.get(e);return r?i.forEach(o=>r.add(o)):n.set(e,i),t.delete(e),!0}class Ww{constructor(n,t,i){this.bodyNode=n,this._driver=t,this._normalizer=i,this._triggerCache={},this.onRemovalComplete=(r,o)=>{},this._transitionEngine=new Bxe(n,t,i),this._timelineEngine=new kxe(n,t,i),this._transitionEngine.onRemovalComplete=(r,o)=>this.onRemovalComplete(r,o)}registerTrigger(n,t,i,r,o){const s=n+"-"+r;let a=this._triggerCache[s];if(!a){const l=[],u=BA(this._driver,o,l,[]);if(l.length)throw function RCe(e,n){return new ne(3404,!1)}();a=function Dxe(e,n,t){return new Ixe(e,n,t)}(r,u,this._normalizer),this._triggerCache[s]=a}this._transitionEngine.registerTrigger(t,r,a)}register(n,t){this._transitionEngine.register(n,t)}destroy(n,t){this._transitionEngine.destroy(n,t)}onInsert(n,t,i,r){this._transitionEngine.insertNode(n,t,i,r)}onRemove(n,t,i){this._transitionEngine.removeNode(n,t,i)}disableAnimations(n,t){this._transitionEngine.markElementAsDisabled(n,t)}process(n,t,i,r){if("@"==i.charAt(0)){const[o,s]=vH(i);this._timelineEngine.command(o,t,s,r)}else this._transitionEngine.trigger(n,t,i,r)}listen(n,t,i,r,o){if("@"==i.charAt(0)){const[s,a]=vH(i);return this._timelineEngine.listen(s,t,a,o)}return this._transitionEngine.listen(n,t,i,r,o)}flush(n=-1){this._transitionEngine.flush(n)}get players(){return[...this._transitionEngine.players,...this._timelineEngine.players]}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}afterFlushAnimationsDone(n){this._transitionEngine.afterFlushAnimationsDone(n)}}let Gxe=(()=>{class e{static#e=this.initialStylesByElement=new WeakMap;constructor(t,i,r){this._element=t,this._startStyles=i,this._endStyles=r,this._state=0;let o=e.initialStylesByElement.get(t);o||e.initialStylesByElement.set(t,o=new Map),this._initialStyles=o}start(){this._state<1&&(this._startStyles&&el(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(el(this._element,this._initialStyles),this._endStyles&&(el(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(e.initialStylesByElement.delete(this._element),this._startStyles&&(yf(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(yf(this._element,this._endStyles),this._endStyles=null),el(this._element,this._initialStyles),this._state=3)}}return e})();function XA(e){let n=null;return e.forEach((t,i)=>{(function Kxe(e){return"display"===e||"position"===e})(i)&&(n=n||new Map,n.set(i,t))}),n}class jH{constructor(n,t,i,r){this.element=n,this.keyframes=t,this.options=i,this._specialStyles=r,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this._originalOnDoneFns=[],this._originalOnStartFns=[],this.time=0,this.parentPlayer=null,this.currentSnapshot=new Map,this._duration=i.duration,this._delay=i.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(n=>n()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const n=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,n,this.options),this._finalKeyframe=n.length?n[n.length-1]:new Map;const t=()=>this._onFinish();this.domPlayer.addEventListener("finish",t),this.onDestroy(()=>{this.domPlayer.removeEventListener("finish",t)})}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(n){const t=[];return n.forEach(i=>{t.push(Object.fromEntries(i))}),t}_triggerWebAnimation(n,t,i){return n.animate(this._convertKeyframesToObject(t),i)}onStart(n){this._originalOnStartFns.push(n),this._onStartFns.push(n)}onDone(n){this._originalOnDoneFns.push(n),this._onDoneFns.push(n)}onDestroy(n){this._onDestroyFns.push(n)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(n=>n()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(n=>n()),this._onDestroyFns=[])}setPosition(n){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=n*this.time}getPosition(){return+(this.domPlayer.currentTime??0)/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const n=new Map;this.hasStarted()&&this._finalKeyframe.forEach((i,r)=>{"offset"!==r&&n.set(r,this._finished?i:MH(this.element,r))}),this.currentSnapshot=n}triggerCallback(n){const t="start"===n?this._onStartFns:this._onDoneFns;t.forEach(i=>i()),t.length=0}}class Yxe{validateStyleProperty(n){return!0}validateAnimatableStyleProperty(n){return!0}matchesElement(n,t){return!1}containsElement(n,t){return wH(n,t)}getParentElement(n){return OA(n)}query(n,t,i){return CH(n,t,i)}computeStyle(n,t,i){return window.getComputedStyle(n)[t]}animate(n,t,i,r,o,s=[]){const l={duration:i,delay:r,fill:0==r?"both":"forwards"};o&&(l.easing=o);const c=new Map,u=s.filter(h=>h instanceof jH);(function nxe(e,n){return 0===e||0===n})(i,r)&&u.forEach(h=>{h.currentSnapshot.forEach((p,g)=>c.set(g,p))});let d=function JCe(e){return e.length?e[0]instanceof Map?e:e.map(n=>TH(n)):[]}(t).map(h=>yu(h));d=function ixe(e,n,t){if(t.size&&n.length){let i=n[0],r=[];if(t.forEach((o,s)=>{i.has(s)||r.push(s),i.set(s,o)}),r.length)for(let o=1;o<n.length;o++){let s=n[o];r.forEach(a=>s.set(a,MH(e,a)))}}return n}(n,d,c);const f=function Wxe(e,n){let t=null,i=null;return Array.isArray(n)&&n.length?(t=XA(n[0]),n.length>1&&(i=XA(n[n.length-1]))):n instanceof Map&&(t=XA(n)),t||i?new Gxe(e,t,i):null}(n,d);return new jH(n,d,l,f)}}let Xxe=(()=>{class e extends fH{constructor(t,i){super(),this._nextAnimationId=0,this._renderer=t.createRenderer(i.body,{id:"0",encapsulation:cs.None,styles:[],data:{animation:[]}})}build(t){const i=this._nextAnimationId.toString();this._nextAnimationId++;const r=Array.isArray(t)?hH(t):t;return qH(this._renderer,null,i,"register",[r]),new Qxe(i,this._renderer)}static#e=this.\u0275fac=function(i){return new(i||e)(Me(q0),Me(qn))};static#t=this.\u0275prov=Oe({token:e,factory:e.\u0275fac})}return e})();class Qxe extends dCe{constructor(n,t){super(),this._id=n,this._renderer=t}create(n,t){return new Zxe(this._id,n,t||{},this._renderer)}}class Zxe{constructor(n,t,i,r){this.id=n,this.element=t,this._renderer=r,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",i)}_listen(n,t){return this._renderer.listen(this.element,`@@${this.id}:${n}`,t)}_command(n,...t){return qH(this._renderer,this.element,this.id,n,t)}onDone(n){this._listen("done",n)}onStart(n){this._listen("start",n)}onDestroy(n){this._listen("destroy",n)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(n){this._command("setPosition",n)}getPosition(){return this._renderer.engine.players[+this.id]?.getPosition()??0}}function qH(e,n,t,i,r){return e.setProperty(n,`@@${t}:${i}`,r)}const WH="@.disabled";let Jxe=(()=>{class e{constructor(t,i,r){this.delegate=t,this.engine=i,this._zone=r,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,i.onRemovalComplete=(o,s)=>{const a=s?.parentNode(o);a&&s.removeChild(a,o)}}createRenderer(t,i){const o=this.delegate.createRenderer(t,i);if(!(t&&i&&i.data&&i.data.animation)){let u=this._rendererCache.get(o);return u||(u=new GH("",o,this.engine,()=>this._rendererCache.delete(o)),this._rendererCache.set(o,u)),u}const s=i.id,a=i.id+"-"+this._currentId;this._currentId++,this.engine.register(a,t);const l=u=>{Array.isArray(u)?u.forEach(l):this.engine.registerTrigger(s,a,t,u.name,u)};return i.data.animation.forEach(l),new eEe(this,a,o,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){queueMicrotask(()=>{this._microtaskId++})}scheduleListenerCallback(t,i,r){t>=0&&t<this._microtaskId?this._zone.run(()=>i(r)):(0==this._animationCallbacksBuffer.length&&queueMicrotask(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(o=>{const[s,a]=o;s(a)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([i,r]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}static#e=this.\u0275fac=function(i){return new(i||e)(Me(q0),Me(Ww),Me(At))};static#t=this.\u0275prov=Oe({token:e,factory:e.\u0275fac})}return e})();class GH{constructor(n,t,i,r){this.namespaceId=n,this.delegate=t,this.engine=i,this._onDestroy=r}get data(){return this.delegate.data}destroyNode(n){this.delegate.destroyNode?.(n)}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.engine.afterFlushAnimationsDone(()=>{queueMicrotask(()=>{this.delegate.destroy()})}),this._onDestroy?.()}createElement(n,t){return this.delegate.createElement(n,t)}createComment(n){return this.delegate.createComment(n)}createText(n){return this.delegate.createText(n)}appendChild(n,t){this.delegate.appendChild(n,t),this.engine.onInsert(this.namespaceId,t,n,!1)}insertBefore(n,t,i,r=!0){this.delegate.insertBefore(n,t,i),this.engine.onInsert(this.namespaceId,t,n,r)}removeChild(n,t,i){this.engine.onRemove(this.namespaceId,t,this.delegate)}selectRootElement(n,t){return this.delegate.selectRootElement(n,t)}parentNode(n){return this.delegate.parentNode(n)}nextSibling(n){return this.delegate.nextSibling(n)}setAttribute(n,t,i,r){this.delegate.setAttribute(n,t,i,r)}removeAttribute(n,t,i){this.delegate.removeAttribute(n,t,i)}addClass(n,t){this.delegate.addClass(n,t)}removeClass(n,t){this.delegate.removeClass(n,t)}setStyle(n,t,i,r){this.delegate.setStyle(n,t,i,r)}removeStyle(n,t,i){this.delegate.removeStyle(n,t,i)}setProperty(n,t,i){"@"==t.charAt(0)&&t==WH?this.disableAnimations(n,!!i):this.delegate.setProperty(n,t,i)}setValue(n,t){this.delegate.setValue(n,t)}listen(n,t,i){return this.delegate.listen(n,t,i)}disableAnimations(n,t){this.engine.disableAnimations(n,t)}}class eEe extends GH{constructor(n,t,i,r,o){super(t,i,r,o),this.factory=n,this.namespaceId=t}setProperty(n,t,i){"@"==t.charAt(0)?"."==t.charAt(1)&&t==WH?this.disableAnimations(n,i=void 0===i||!!i):this.engine.process(this.namespaceId,n,t.slice(1),i):this.delegate.setProperty(n,t,i)}listen(n,t,i){if("@"==t.charAt(0)){const r=function tEe(e){switch(e){case"body":return document.body;case"document":return document;case"window":return window;default:return e}}(n);let o=t.slice(1),s="";return"@"!=o.charAt(0)&&([o,s]=function nEe(e){const n=e.indexOf(".");return[e.substring(0,n),e.slice(n+1)]}(o)),this.engine.listen(this.namespaceId,r,o,s,a=>{this.factory.scheduleListenerCallback(a._data||-1,i,a)})}return this.delegate.listen(n,t,i)}}let iEe=(()=>{class e extends Ww{constructor(t,i,r,o){super(t.body,i,r)}ngOnDestroy(){this.flush()}static#e=this.\u0275fac=function(i){return new(i||e)(Me(qn),Me(RA),Me(jA),Me(hf))};static#t=this.\u0275prov=Oe({token:e,factory:e.\u0275fac})}return e})();const KH=[{provide:fH,useClass:Xxe},{provide:jA,useFactory:function rEe(){return new xxe}},{provide:Ww,useClass:iEe},{provide:q0,useFactory:function oEe(e,n,t){return new Jxe(e,n,t)},deps:[EA,Ww,At]}],QA=[{provide:RA,useFactory:()=>new Yxe},{provide:l$,useValue:"BrowserAnimations"},...KH],YH=[{provide:RA,useClass:xH},{provide:l$,useValue:"NoopAnimations"},...KH];let sEe=(()=>{class e{static withConfig(t){return{ngModule:e,providers:t.disableAnimations?YH:QA}}static#e=this.\u0275fac=function(i){return new(i||e)};static#t=this.\u0275mod=Ut({type:e});static#n=this.\u0275inj=Nt({providers:QA,imports:[aH]})}return e})();const{isArray:aEe}=Array,{getPrototypeOf:lEe,prototype:cEe,keys:uEe}=Object;function XH(e){if(1===e.length){const n=e[0];if(aEe(n))return{args:n,keys:null};if(function dEe(e){return e&&"object"==typeof e&&lEe(e)===cEe}(n)){const t=uEe(n);return{args:t.map(i=>n[i]),keys:t}}}return{args:e,keys:null}}const{isArray:fEe}=Array;function QH(e){return zt(n=>function hEe(e,n){return fEe(n)?e(...n):e(n)}(e,n))}function ZH(e,n){return e.reduce((t,i,r)=>(t[i]=n[r],t),{})}let JH=(()=>{class e{constructor(t,i){this._renderer=t,this._elementRef=i,this.onChange=r=>{},this.onTouched=()=>{}}setProperty(t,i){this._renderer.setProperty(this._elementRef.nativeElement,t,i)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static#e=this.\u0275fac=function(i){return new(i||e)(G(Ki),G(pn))};static#t=this.\u0275dir=je({type:e})}return e})(),bf=(()=>{class e extends JH{static#e=this.\u0275fac=function(){let t;return function(r){return(t||(t=dt(e)))(r||e)}}();static#t=this.\u0275dir=je({type:e,features:[qe]})}return e})();const Qi=new Ie("NgValueAccessor"),mEe={provide:Qi,useExisting:Rt(()=>ZA),multi:!0},yEe=new Ie("CompositionEventMode");let ZA=(()=>{class e extends JH{constructor(t,i,r){super(t,i),this._compositionMode=r,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function _Ee(){const e=gu()?gu().getUserAgent():"";return/android (\d+)/.test(e.toLowerCase())}())}writeValue(t){this.setProperty("value",t??"")}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static#e=this.\u0275fac=function(i){return new(i||e)(G(Ki),G(pn),G(yEe,8))};static#t=this.\u0275dir=je({type:e,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(i,r){1&i&&we("input",function(s){return r._handleInput(s.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(s){return r._compositionEnd(s.target.value)})},features:[Gt([mEe]),qe]})}return e})();const Zi=new Ie("NgValidators"),bu=new Ie("NgAsyncValidators");function uj(e){return null!=e}function dj(e){return n_(e)?ri(e):e}function fj(e){let n={};return e.forEach(t=>{n=null!=t?{...n,...t}:n}),0===Object.keys(n).length?null:n}function hj(e,n){return n.map(t=>t(e))}function pj(e){return e.map(n=>function bEe(e){return!e.validate}(n)?n:t=>n.validate(t))}function JA(e){return null!=e?function gj(e){if(!e)return null;const n=e.filter(uj);return 0==n.length?null:function(t){return fj(hj(t,n))}}(pj(e)):null}function ek(e){return null!=e?function mj(e){if(!e)return null;const n=e.filter(uj);return 0==n.length?null:function(t){return function pEe(...e){const n=D9(e),{args:t,keys:i}=XH(e),r=new zn(o=>{const{length:s}=t;if(!s)return void o.complete();const a=new Array(s);let l=s,c=s;for(let u=0;u<s;u++){let d=!1;So(t[u]).subscribe(Zn(o,f=>{d||(d=!0,c--),a[u]=f},()=>l--,void 0,()=>{(!l||!d)&&(c||o.next(i?ZH(i,a):a),o.complete())}))}});return n?r.pipe(QH(n)):r}(hj(t,n).map(dj)).pipe(zt(fj))}}(pj(e)):null}function _j(e,n){return null===e?[n]:Array.isArray(e)?[...e,n]:[e,n]}function tk(e){return e?Array.isArray(e)?e:[e]:[]}function Yw(e,n){return Array.isArray(e)?e.includes(n):e===n}function bj(e,n){const t=tk(n);return tk(e).forEach(r=>{Yw(t,r)||t.push(r)}),t}function wj(e,n){return tk(n).filter(t=>!Yw(e,t))}class Cj{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(n){this._rawValidators=n||[],this._composedValidatorFn=JA(this._rawValidators)}_setAsyncValidators(n){this._rawAsyncValidators=n||[],this._composedAsyncValidatorFn=ek(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(n){this._onDestroyCallbacks.push(n)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(n=>n()),this._onDestroyCallbacks=[]}reset(n=void 0){this.control&&this.control.reset(n)}hasError(n,t){return!!this.control&&this.control.hasError(n,t)}getError(n,t){return this.control?this.control.getError(n,t):null}}class Ir extends Cj{get formDirective(){return null}get path(){return null}}class dc extends Cj{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class xj{constructor(n){this._cd=n}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let Xw=(()=>{class e extends xj{constructor(t){super(t)}static#e=this.\u0275fac=function(i){return new(i||e)(G(dc,2))};static#t=this.\u0275dir=je({type:e,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(i,r){2&i&&fu("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)},features:[qe]})}return e})();const x_="VALID",Zw="INVALID",ig="PENDING",E_="DISABLED";function Jw(e){return null!=e&&!Array.isArray(e)&&"object"==typeof e}class Dj{constructor(n,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(n),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(n){this._rawValidators=this._composedValidatorFn=n}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(n){this._rawAsyncValidators=this._composedAsyncValidatorFn=n}get parent(){return this._parent}get valid(){return this.status===x_}get invalid(){return this.status===Zw}get pending(){return this.status==ig}get disabled(){return this.status===E_}get enabled(){return this.status!==E_}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(n){this._assignValidators(n)}setAsyncValidators(n){this._assignAsyncValidators(n)}addValidators(n){this.setValidators(bj(n,this._rawValidators))}addAsyncValidators(n){this.setAsyncValidators(bj(n,this._rawAsyncValidators))}removeValidators(n){this.setValidators(wj(n,this._rawValidators))}removeAsyncValidators(n){this.setAsyncValidators(wj(n,this._rawAsyncValidators))}hasValidator(n){return Yw(this._rawValidators,n)}hasAsyncValidator(n){return Yw(this._rawAsyncValidators,n)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(n={}){this.touched=!0,this._parent&&!n.onlySelf&&this._parent.markAsTouched(n)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(n=>n.markAllAsTouched())}markAsUntouched(n={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!n.onlySelf&&this._parent._updateTouched(n)}markAsDirty(n={}){this.pristine=!1,this._parent&&!n.onlySelf&&this._parent.markAsDirty(n)}markAsPristine(n={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!n.onlySelf&&this._parent._updatePristine(n)}markAsPending(n={}){this.status=ig,!1!==n.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!n.onlySelf&&this._parent.markAsPending(n)}disable(n={}){const t=this._parentMarkedDirty(n.onlySelf);this.status=E_,this.errors=null,this._forEachChild(i=>{i.disable({...n,onlySelf:!0})}),this._updateValue(),!1!==n.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...n,skipPristineCheck:t}),this._onDisabledChange.forEach(i=>i(!0))}enable(n={}){const t=this._parentMarkedDirty(n.onlySelf);this.status=x_,this._forEachChild(i=>{i.enable({...n,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:n.emitEvent}),this._updateAncestors({...n,skipPristineCheck:t}),this._onDisabledChange.forEach(i=>i(!1))}_updateAncestors(n){this._parent&&!n.onlySelf&&(this._parent.updateValueAndValidity(n),n.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(n){this._parent=n}getRawValue(){return this.value}updateValueAndValidity(n={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===x_||this.status===ig)&&this._runAsyncValidator(n.emitEvent)),!1!==n.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!n.onlySelf&&this._parent.updateValueAndValidity(n)}_updateTreeValidity(n={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(n)),this.updateValueAndValidity({onlySelf:!0,emitEvent:n.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?E_:x_}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(n){if(this.asyncValidator){this.status=ig,this._hasOwnPendingAsyncValidator=!0;const t=dj(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(i=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(i,{emitEvent:n})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(n,t={}){this.errors=n,this._updateControlsErrors(!1!==t.emitEvent)}get(n){let t=n;return null==t||(Array.isArray(t)||(t=t.split(".")),0===t.length)?null:t.reduce((i,r)=>i&&i._find(r),this)}getError(n,t){const i=t?this.get(t):this;return i&&i.errors?i.errors[n]:null}hasError(n,t){return!!this.getError(n,t)}get root(){let n=this;for(;n._parent;)n=n._parent;return n}_updateControlsErrors(n){this.status=this._calculateStatus(),n&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(n)}_initObservables(){this.valueChanges=new De,this.statusChanges=new De}_calculateStatus(){return this._allControlsDisabled()?E_:this.errors?Zw:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(ig)?ig:this._anyControlsHaveStatus(Zw)?Zw:x_}_anyControlsHaveStatus(n){return this._anyControls(t=>t.status===n)}_anyControlsDirty(){return this._anyControls(n=>n.dirty)}_anyControlsTouched(){return this._anyControls(n=>n.touched)}_updatePristine(n={}){this.pristine=!this._anyControlsDirty(),this._parent&&!n.onlySelf&&this._parent._updatePristine(n)}_updateTouched(n={}){this.touched=this._anyControlsTouched(),this._parent&&!n.onlySelf&&this._parent._updateTouched(n)}_registerOnCollectionChange(n){this._onCollectionChange=n}_setUpdateStrategy(n){Jw(n)&&null!=n.updateOn&&(this._updateOn=n.updateOn)}_parentMarkedDirty(n){return!n&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(n){return null}_assignValidators(n){this._rawValidators=Array.isArray(n)?n.slice():n,this._composedValidatorFn=function SEe(e){return Array.isArray(e)?JA(e):e||null}(this._rawValidators)}_assignAsyncValidators(n){this._rawAsyncValidators=Array.isArray(n)?n.slice():n,this._composedAsyncValidatorFn=function TEe(e){return Array.isArray(e)?ek(e):e||null}(this._rawAsyncValidators)}}const wf=new Ie("CallSetDisabledState",{providedIn:"root",factory:()=>S_}),S_="always";function T_(e,n,t=S_){(function ak(e,n){const t=function yj(e){return e._rawValidators}(e);null!==n.validator?e.setValidators(_j(t,n.validator)):"function"==typeof t&&e.setValidators([t]);const i=function vj(e){return e._rawAsyncValidators}(e);null!==n.asyncValidator?e.setAsyncValidators(_j(i,n.asyncValidator)):"function"==typeof i&&e.setAsyncValidators([i]);const r=()=>e.updateValueAndValidity();nC(n._rawValidators,r),nC(n._rawAsyncValidators,r)})(e,n),n.valueAccessor.writeValue(e.value),(e.disabled||"always"===t)&&n.valueAccessor.setDisabledState?.(e.disabled),function MEe(e,n){n.valueAccessor.registerOnChange(t=>{e._pendingValue=t,e._pendingChange=!0,e._pendingDirty=!0,"change"===e.updateOn&&Ij(e,n)})}(e,n),function kEe(e,n){const t=(i,r)=>{n.valueAccessor.writeValue(i),r&&n.viewToModelUpdate(i)};e.registerOnChange(t),n._registerOnDestroy(()=>{e._unregisterOnChange(t)})}(e,n),function AEe(e,n){n.valueAccessor.registerOnTouched(()=>{e._pendingTouched=!0,"blur"===e.updateOn&&e._pendingChange&&Ij(e,n),"submit"!==e.updateOn&&e.markAsTouched()})}(e,n),function IEe(e,n){if(n.valueAccessor.setDisabledState){const t=i=>{n.valueAccessor.setDisabledState(i)};e.registerOnDisabledChange(t),n._registerOnDestroy(()=>{e._unregisterOnDisabledChange(t)})}}(e,n)}function nC(e,n){e.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(n)})}function Ij(e,n){e._pendingDirty&&e.markAsDirty(),e.setValue(e._pendingValue,{emitModelToViewChange:!1}),n.viewToModelUpdate(e._pendingValue),e._pendingChange=!1}function kj(e,n){const t=e.indexOf(n);t>-1&&e.splice(t,1)}function Oj(e){return"object"==typeof e&&null!==e&&2===Object.keys(e).length&&"value"in e&&"disabled"in e}const Rj=class extends Dj{constructor(n=null,t,i){super(function rk(e){return(Jw(e)?e.validators:e)||null}(t),function ok(e,n){return(Jw(n)?n.asyncValidators:e)||null}(i,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(n),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Jw(t)&&(t.nonNullable||t.initialValueIsDefault)&&(this.defaultValue=Oj(n)?n.value:n)}setValue(n,t={}){this.value=this._pendingValue=n,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(i=>i(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(n,t={}){this.setValue(n,t)}reset(n=this.defaultValue,t={}){this._applyFormState(n),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(n){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(n){this._onChange.push(n)}_unregisterOnChange(n){kj(this._onChange,n)}registerOnDisabledChange(n){this._onDisabledChange.push(n)}_unregisterOnDisabledChange(n){kj(this._onDisabledChange,n)}_forEachChild(n){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(n){Oj(n)?(this.value=this._pendingValue=n.value,n.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=n}},BEe={provide:dc,useExisting:Rt(()=>rg)},Pj=(()=>Promise.resolve())();let rg=(()=>{class e extends dc{constructor(t,i,r,o,s,a){super(),this._changeDetectorRef=s,this.callSetDisabledState=a,this.control=new Rj,this._registered=!1,this.name="",this.update=new De,this._parent=t,this._setValidators(i),this._setAsyncValidators(r),this.valueAccessor=function uk(e,n){if(!n)return null;let t,i,r;return Array.isArray(n),n.forEach(o=>{o.constructor===ZA?t=o:function FEe(e){return Object.getPrototypeOf(e.constructor)===bf}(o)?i=o:r=o}),r||i||t||null}(0,o)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){const i=t.name.previousValue;this.formDirective.removeControl({name:i,path:this._getPath(i)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),function ck(e,n){if(!e.hasOwnProperty("model"))return!1;const t=e.model;return!!t.isFirstChange()||!Object.is(n,t.currentValue)}(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){T_(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){Pj.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){const i=t.isDisabled.currentValue,r=0!==i&&function Zp(e){return"boolean"==typeof e?e:null!=e&&"false"!==e}(i);Pj.then(()=>{r&&!this.control.disabled?this.control.disable():!r&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?function eC(e,n){return[...n.path,e]}(t,this._parent):[t]}static#e=this.\u0275fac=function(i){return new(i||e)(G(Ir,9),G(Zi,10),G(bu,10),G(Qi,10),G(Ro,8),G(wf,8))};static#t=this.\u0275dir=je({type:e,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[Gt([BEe]),qe,vr]})}return e})(),$j=(()=>{class e{static#e=this.\u0275fac=function(i){return new(i||e)};static#t=this.\u0275mod=Ut({type:e});static#n=this.\u0275inj=Nt({})}return e})();const fk=new Ie("NgModelWithFormControlWarning");let tq=(()=>{class e{static#e=this.\u0275fac=function(i){return new(i||e)};static#t=this.\u0275mod=Ut({type:e});static#n=this.\u0275inj=Nt({imports:[$j]})}return e})(),rC=(()=>{class e{static withConfig(t){return{ngModule:e,providers:[{provide:wf,useValue:t.callSetDisabledState??S_}]}}static#e=this.\u0275fac=function(i){return new(i||e)};static#t=this.\u0275mod=Ut({type:e});static#n=this.\u0275inj=Nt({imports:[tq]})}return e})(),dSe=(()=>{class e{static withConfig(t){return{ngModule:e,providers:[{provide:fk,useValue:t.warnOnNgModelWithFormControl??"always"},{provide:wf,useValue:t.callSetDisabledState??S_}]}}static#e=this.\u0275fac=function(i){return new(i||e)};static#t=this.\u0275mod=Ut({type:e});static#n=this.\u0275inj=Nt({imports:[tq]})}return e})();function og(e,n){return en(n)?Ri(e,n,1):Ri(e,1)}function fc(e,n){return ii((t,i)=>{let r=0;t.subscribe(Zn(i,o=>e.call(n,o,r++)&&i.next(o)))})}function I_(e){return ii((n,t)=>{try{n.subscribe(t)}finally{t.add(e)}})}class oC{}class sC{}class tl{constructor(n){this.normalizedNames=new Map,this.lazyUpdate=null,n?"string"==typeof n?this.lazyInit=()=>{this.headers=new Map,n.split("\n").forEach(t=>{const i=t.indexOf(":");if(i>0){const r=t.slice(0,i),o=r.toLowerCase(),s=t.slice(i+1).trim();this.maybeSetNormalizedName(r,o),this.headers.has(o)?this.headers.get(o).push(s):this.headers.set(o,[s])}})}:typeof Headers<"u"&&n instanceof Headers?(this.headers=new Map,n.forEach((t,i)=>{this.setHeaderEntries(i,t)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(n).forEach(([t,i])=>{this.setHeaderEntries(t,i)})}:this.headers=new Map}has(n){return this.init(),this.headers.has(n.toLowerCase())}get(n){this.init();const t=this.headers.get(n.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(n){return this.init(),this.headers.get(n.toLowerCase())||null}append(n,t){return this.clone({name:n,value:t,op:"a"})}set(n,t){return this.clone({name:n,value:t,op:"s"})}delete(n,t){return this.clone({name:n,value:t,op:"d"})}maybeSetNormalizedName(n,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,n)}init(){this.lazyInit&&(this.lazyInit instanceof tl?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(n=>this.applyUpdate(n)),this.lazyUpdate=null))}copyFrom(n){n.init(),Array.from(n.headers.keys()).forEach(t=>{this.headers.set(t,n.headers.get(t)),this.normalizedNames.set(t,n.normalizedNames.get(t))})}clone(n){const t=new tl;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof tl?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([n]),t}applyUpdate(n){const t=n.name.toLowerCase();switch(n.op){case"a":case"s":let i=n.value;if("string"==typeof i&&(i=[i]),0===i.length)return;this.maybeSetNormalizedName(n.name,t);const r=("a"===n.op?this.headers.get(t):void 0)||[];r.push(...i),this.headers.set(t,r);break;case"d":const o=n.value;if(o){let s=this.headers.get(t);if(!s)return;s=s.filter(a=>-1===o.indexOf(a)),0===s.length?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,s)}else this.headers.delete(t),this.normalizedNames.delete(t)}}setHeaderEntries(n,t){const i=(Array.isArray(t)?t:[t]).map(o=>o.toString()),r=n.toLowerCase();this.headers.set(r,i),this.maybeSetNormalizedName(n,r)}forEach(n){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>n(this.normalizedNames.get(t),this.headers.get(t)))}}class fSe{encodeKey(n){return nq(n)}encodeValue(n){return nq(n)}decodeKey(n){return decodeURIComponent(n)}decodeValue(n){return decodeURIComponent(n)}}const pSe=/%(\d[a-f0-9])/gi,gSe={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function nq(e){return encodeURIComponent(e).replace(pSe,(n,t)=>gSe[t]??n)}function aC(e){return`${e}`}class wu{constructor(n={}){if(this.updates=null,this.cloneFrom=null,this.encoder=n.encoder||new fSe,n.fromString){if(n.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function hSe(e,n){const t=new Map;return e.length>0&&e.replace(/^\?/,"").split("&").forEach(r=>{const o=r.indexOf("="),[s,a]=-1==o?[n.decodeKey(r),""]:[n.decodeKey(r.slice(0,o)),n.decodeValue(r.slice(o+1))],l=t.get(s)||[];l.push(a),t.set(s,l)}),t}(n.fromString,this.encoder)}else n.fromObject?(this.map=new Map,Object.keys(n.fromObject).forEach(t=>{const i=n.fromObject[t],r=Array.isArray(i)?i.map(aC):[aC(i)];this.map.set(t,r)})):this.map=null}has(n){return this.init(),this.map.has(n)}get(n){this.init();const t=this.map.get(n);return t?t[0]:null}getAll(n){return this.init(),this.map.get(n)||null}keys(){return this.init(),Array.from(this.map.keys())}append(n,t){return this.clone({param:n,value:t,op:"a"})}appendAll(n){const t=[];return Object.keys(n).forEach(i=>{const r=n[i];Array.isArray(r)?r.forEach(o=>{t.push({param:i,value:o,op:"a"})}):t.push({param:i,value:r,op:"a"})}),this.clone(t)}set(n,t){return this.clone({param:n,value:t,op:"s"})}delete(n,t){return this.clone({param:n,value:t,op:"d"})}toString(){return this.init(),this.keys().map(n=>{const t=this.encoder.encodeKey(n);return this.map.get(n).map(i=>t+"="+this.encoder.encodeValue(i)).join("&")}).filter(n=>""!==n).join("&")}clone(n){const t=new wu({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(n),t}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(n=>this.map.set(n,this.cloneFrom.map.get(n))),this.updates.forEach(n=>{switch(n.op){case"a":case"s":const t=("a"===n.op?this.map.get(n.param):void 0)||[];t.push(aC(n.value)),this.map.set(n.param,t);break;case"d":if(void 0===n.value){this.map.delete(n.param);break}{let i=this.map.get(n.param)||[];const r=i.indexOf(aC(n.value));-1!==r&&i.splice(r,1),i.length>0?this.map.set(n.param,i):this.map.delete(n.param)}}}),this.cloneFrom=this.updates=null)}}class mSe{constructor(){this.map=new Map}set(n,t){return this.map.set(n,t),this}get(n){return this.map.has(n)||this.map.set(n,n.defaultValue()),this.map.get(n)}delete(n){return this.map.delete(n),this}has(n){return this.map.has(n)}keys(){return this.map.keys()}}function iq(e){return typeof ArrayBuffer<"u"&&e instanceof ArrayBuffer}function rq(e){return typeof Blob<"u"&&e instanceof Blob}function oq(e){return typeof FormData<"u"&&e instanceof FormData}class M_{constructor(n,t,i,r){let o;if(this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=n.toUpperCase(),function _Se(e){switch(e){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||r?(this.body=void 0!==i?i:null,o=r):o=i,o&&(this.reportProgress=!!o.reportProgress,this.withCredentials=!!o.withCredentials,o.responseType&&(this.responseType=o.responseType),o.headers&&(this.headers=o.headers),o.context&&(this.context=o.context),o.params&&(this.params=o.params)),this.headers||(this.headers=new tl),this.context||(this.context=new mSe),this.params){const s=this.params.toString();if(0===s.length)this.urlWithParams=t;else{const a=t.indexOf("?");this.urlWithParams=t+(-1===a?"?":a<t.length-1?"&":"")+s}}else this.params=new wu,this.urlWithParams=t}serializeBody(){return null===this.body?null:iq(this.body)||rq(this.body)||oq(this.body)||function ySe(e){return typeof URLSearchParams<"u"&&e instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof wu?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||oq(this.body)?null:rq(this.body)?this.body.type||null:iq(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof wu?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(n={}){const t=n.method||this.method,i=n.url||this.url,r=n.responseType||this.responseType,o=void 0!==n.body?n.body:this.body,s=void 0!==n.withCredentials?n.withCredentials:this.withCredentials,a=void 0!==n.reportProgress?n.reportProgress:this.reportProgress;let l=n.headers||this.headers,c=n.params||this.params;const u=n.context??this.context;return void 0!==n.setHeaders&&(l=Object.keys(n.setHeaders).reduce((d,f)=>d.set(f,n.setHeaders[f]),l)),n.setParams&&(c=Object.keys(n.setParams).reduce((d,f)=>d.set(f,n.setParams[f]),c)),new M_(t,i,o,{params:c,headers:l,context:u,reportProgress:a,responseType:r,withCredentials:s})}}var sg=function(e){return e[e.Sent=0]="Sent",e[e.UploadProgress=1]="UploadProgress",e[e.ResponseHeader=2]="ResponseHeader",e[e.DownloadProgress=3]="DownloadProgress",e[e.Response=4]="Response",e[e.User=5]="User",e}(sg||{});class vk{constructor(n,t=200,i="OK"){this.headers=n.headers||new tl,this.status=void 0!==n.status?n.status:t,this.statusText=n.statusText||i,this.url=n.url||null,this.ok=this.status>=200&&this.status<300}}class bk extends vk{constructor(n={}){super(n),this.type=sg.ResponseHeader}clone(n={}){return new bk({headers:n.headers||this.headers,status:void 0!==n.status?n.status:this.status,statusText:n.statusText||this.statusText,url:n.url||this.url||void 0})}}class ag extends vk{constructor(n={}){super(n),this.type=sg.Response,this.body=void 0!==n.body?n.body:null}clone(n={}){return new ag({body:void 0!==n.body?n.body:this.body,headers:n.headers||this.headers,status:void 0!==n.status?n.status:this.status,statusText:n.statusText||this.statusText,url:n.url||this.url||void 0})}}class sq extends vk{constructor(n){super(n,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${n.url||"(unknown url)"}`:`Http failure response for ${n.url||"(unknown url)"}: ${n.status} ${n.statusText}`,this.error=n.error||null}}function wk(e,n){return{body:n,headers:e.headers,context:e.context,observe:e.observe,params:e.params,reportProgress:e.reportProgress,responseType:e.responseType,withCredentials:e.withCredentials}}let A_=(()=>{class e{constructor(t){this.handler=t}request(t,i,r={}){let o;if(t instanceof M_)o=t;else{let l,c;l=r.headers instanceof tl?r.headers:new tl(r.headers),r.params&&(c=r.params instanceof wu?r.params:new wu({fromObject:r.params})),o=new M_(t,i,void 0!==r.body?r.body:null,{headers:l,context:r.context,params:c,reportProgress:r.reportProgress,responseType:r.responseType||"json",withCredentials:r.withCredentials})}const s=Qe(o).pipe(og(l=>this.handler.handle(l)));if(t instanceof M_||"events"===r.observe)return s;const a=s.pipe(fc(l=>l instanceof ag));switch(r.observe||"body"){case"body":switch(o.responseType){case"arraybuffer":return a.pipe(zt(l=>{if(null!==l.body&&!(l.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return l.body}));case"blob":return a.pipe(zt(l=>{if(null!==l.body&&!(l.body instanceof Blob))throw new Error("Response is not a Blob.");return l.body}));case"text":return a.pipe(zt(l=>{if(null!==l.body&&"string"!=typeof l.body)throw new Error("Response is not a string.");return l.body}));default:return a.pipe(zt(l=>l.body))}case"response":return a;default:throw new Error(`Unreachable: unhandled observe type ${r.observe}}`)}}delete(t,i={}){return this.request("DELETE",t,i)}get(t,i={}){return this.request("GET",t,i)}head(t,i={}){return this.request("HEAD",t,i)}jsonp(t,i){return this.request("JSONP",t,{params:(new wu).append(i,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,i={}){return this.request("OPTIONS",t,i)}patch(t,i,r={}){return this.request("PATCH",t,wk(r,i))}post(t,i,r={}){return this.request("POST",t,wk(r,i))}put(t,i,r={}){return this.request("PUT",t,wk(r,i))}static#e=this.\u0275fac=function(i){return new(i||e)(Me(oC))};static#t=this.\u0275prov=Oe({token:e,factory:e.\u0275fac})}return e})();function cq(e,n){return n(e)}function bSe(e,n){return(t,i)=>n.intercept(t,{handle:r=>e(r,i)})}const CSe=new Ie(""),k_=new Ie(""),uq=new Ie("");function xSe(){let e=null;return(n,t)=>{null===e&&(e=(Te(CSe,{optional:!0})??[]).reduceRight(bSe,cq));const i=Te(fw),r=i.add();return e(n,t).pipe(I_(()=>i.remove(r)))}}let dq=(()=>{class e extends oC{constructor(t,i){super(),this.backend=t,this.injector=i,this.chain=null,this.pendingTasks=Te(fw)}handle(t){if(null===this.chain){const r=Array.from(new Set([...this.injector.get(k_),...this.injector.get(uq,[])]));this.chain=r.reduceRight((o,s)=>function wSe(e,n,t){return(i,r)=>t.runInContext(()=>n(i,o=>e(o,r)))}(o,s,this.injector),cq)}const i=this.pendingTasks.add();return this.chain(t,r=>this.backend.handle(r)).pipe(I_(()=>this.pendingTasks.remove(i)))}static#e=this.\u0275fac=function(i){return new(i||e)(Me(sC),Me(Ao))};static#t=this.\u0275prov=Oe({token:e,factory:e.\u0275fac})}return e})();const DSe=/^\)\]\}',?\n/;let hq=(()=>{class e{constructor(t){this.xhrFactory=t}handle(t){if("JSONP"===t.method)throw new ne(-2800,!1);const i=this.xhrFactory;return(i.\u0275loadImpl?ri(i.\u0275loadImpl()):Qe(null)).pipe(Ws(()=>new zn(o=>{const s=i.build();if(s.open(t.method,t.urlWithParams),t.withCredentials&&(s.withCredentials=!0),t.headers.forEach((g,m)=>s.setRequestHeader(g,m.join(","))),t.headers.has("Accept")||s.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){const g=t.detectContentTypeHeader();null!==g&&s.setRequestHeader("Content-Type",g)}if(t.responseType){const g=t.responseType.toLowerCase();s.responseType="json"!==g?g:"text"}const a=t.serializeBody();let l=null;const c=()=>{if(null!==l)return l;const g=s.statusText||"OK",m=new tl(s.getAllResponseHeaders()),_=function ISe(e){return"responseURL"in e&&e.responseURL?e.responseURL:/^X-Request-URL:/m.test(e.getAllResponseHeaders())?e.getResponseHeader("X-Request-URL"):null}(s)||t.url;return l=new bk({headers:m,status:s.status,statusText:g,url:_}),l},u=()=>{let{headers:g,status:m,statusText:_,url:y}=c(),v=null;204!==m&&(v=typeof s.response>"u"?s.responseText:s.response),0===m&&(m=v?200:0);let b=m>=200&&m<300;if("json"===t.responseType&&"string"==typeof v){const w=v;v=v.replace(DSe,"");try{v=""!==v?JSON.parse(v):null}catch(x){v=w,b&&(b=!1,v={error:x,text:v})}}b?(o.next(new ag({body:v,headers:g,status:m,statusText:_,url:y||void 0})),o.complete()):o.error(new sq({error:v,headers:g,status:m,statusText:_,url:y||void 0}))},d=g=>{const{url:m}=c(),_=new sq({error:g,status:s.status||0,statusText:s.statusText||"Unknown Error",url:m||void 0});o.error(_)};let f=!1;const h=g=>{f||(o.next(c()),f=!0);let m={type:sg.DownloadProgress,loaded:g.loaded};g.lengthComputable&&(m.total=g.total),"text"===t.responseType&&s.responseText&&(m.partialText=s.responseText),o.next(m)},p=g=>{let m={type:sg.UploadProgress,loaded:g.loaded};g.lengthComputable&&(m.total=g.total),o.next(m)};return s.addEventListener("load",u),s.addEventListener("error",d),s.addEventListener("timeout",d),s.addEventListener("abort",d),t.reportProgress&&(s.addEventListener("progress",h),null!==a&&s.upload&&s.upload.addEventListener("progress",p)),s.send(a),o.next({type:sg.Sent}),()=>{s.removeEventListener("error",d),s.removeEventListener("abort",d),s.removeEventListener("load",u),s.removeEventListener("timeout",d),t.reportProgress&&(s.removeEventListener("progress",h),null!==a&&s.upload&&s.upload.removeEventListener("progress",p)),s.readyState!==s.DONE&&s.abort()}})))}static#e=this.\u0275fac=function(i){return new(i||e)(Me(jU))};static#t=this.\u0275prov=Oe({token:e,factory:e.\u0275fac})}return e})();const Ck=new Ie("XSRF_ENABLED"),pq=new Ie("XSRF_COOKIE_NAME",{providedIn:"root",factory:()=>"XSRF-TOKEN"}),gq=new Ie("XSRF_HEADER_NAME",{providedIn:"root",factory:()=>"X-XSRF-TOKEN"});class mq{}let kSe=(()=>{class e{constructor(t,i,r){this.doc=t,this.platform=i,this.cookieName=r,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=NU(t,this.cookieName),this.lastCookieString=t),this.lastToken}static#e=this.\u0275fac=function(i){return new(i||e)(Me(qn),Me(fs),Me(pq))};static#t=this.\u0275prov=Oe({token:e,factory:e.\u0275fac})}return e})();function OSe(e,n){const t=e.url.toLowerCase();if(!Te(Ck)||"GET"===e.method||"HEAD"===e.method||t.startsWith("http://")||t.startsWith("https://"))return n(e);const i=Te(mq).getToken(),r=Te(gq);return null!=i&&!e.headers.has(r)&&(e=e.clone({headers:e.headers.set(r,i)})),n(e)}var Cu=function(e){return e[e.Interceptors=0]="Interceptors",e[e.LegacyInterceptors=1]="LegacyInterceptors",e[e.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",e[e.NoXsrfProtection=3]="NoXsrfProtection",e[e.JsonpSupport=4]="JsonpSupport",e[e.RequestsMadeViaParent=5]="RequestsMadeViaParent",e[e.Fetch=6]="Fetch",e}(Cu||{});function RSe(...e){const n=[A_,hq,dq,{provide:oC,useExisting:dq},{provide:sC,useExisting:hq},{provide:k_,useValue:OSe,multi:!0},{provide:Ck,useValue:!0},{provide:mq,useClass:kSe}];for(const t of e)n.push(...t.\u0275providers);return function bI(e){return{\u0275providers:e}}(n)}const _q=new Ie("LEGACY_INTERCEPTOR_FN");function FSe(){return function xf(e,n){return{\u0275kind:e,\u0275providers:n}}(Cu.LegacyInterceptors,[{provide:_q,useFactory:xSe},{provide:k_,useExisting:_q,multi:!0}])}let NSe=(()=>{class e{static#e=this.\u0275fac=function(i){return new(i||e)};static#t=this.\u0275mod=Ut({type:e});static#n=this.\u0275inj=Nt({providers:[RSe(FSe())]})}return e})();function xk(...e){const n=p0(e),t=D9(e),{args:i,keys:r}=XH(e);if(0===i.length)return ri([],n);const o=new zn(function USe(e,n,t=tu){return i=>{yq(n,()=>{const{length:r}=e,o=new Array(r);let s=r,a=r;for(let l=0;l<r;l++)yq(n,()=>{const c=ri(e[l],n);let u=!1;c.subscribe(Zn(i,d=>{o[l]=d,u||(u=!0,a--),a||i.next(t(o.slice()))},()=>{--s||i.complete()}))},i)},i)}}(i,n,r?s=>ZH(r,s):tu));return t?o.pipe(QH(t)):o}function yq(e,n,t){e?Yl(t,e,n):n()}const O_=Yd(e=>function(){e(this),this.name="EmptyError",this.message="no elements in sequence"});function Ek(...e){return function HSe(){return rp(1)}()(ri(e,p0(e)))}function vq(e){return new zn(n=>{So(e()).subscribe(n)})}function R_(e,n){const t=en(e)?e:()=>e,i=r=>r.error(t());return new zn(n?r=>n.schedule(i,0,r):i)}function Sk(){return ii((e,n)=>{let t=null;e._refCount++;const i=Zn(n,void 0,void 0,void 0,()=>{if(!e||e._refCount<=0||0<--e._refCount)return void(t=null);const r=e._connection,o=t;t=null,r&&(!o||r===o)&&r.unsubscribe(),n.unsubscribe()});e.subscribe(i),i.closed||(t=e.connect())})}class bq extends zn{constructor(n,t){super(),this.source=n,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,f9(n)&&(this.lift=n.lift)}_subscribe(n){return this.getSubject().subscribe(n)}getSubject(){const n=this._subject;return(!n||n.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:n}=this;this._subject=this._connection=null,n?.unsubscribe()}connect(){let n=this._connection;if(!n){n=this._connection=new mr;const t=this.getSubject();n.add(this.source.subscribe(Zn(t,void 0,()=>{this._teardown(),t.complete()},i=>{this._teardown(),t.error(i)},()=>this._teardown()))),n.closed&&(this._connection=null,n=mr.EMPTY)}return n}refCount(){return Sk()(this)}}function lg(e){return e<=0?()=>za:ii((n,t)=>{let i=0;n.subscribe(Zn(t,r=>{++i<=e&&(t.next(r),e<=i&&t.complete())}))})}function cC(e){return ii((n,t)=>{let i=!1;n.subscribe(Zn(t,r=>{i=!0,t.next(r)},()=>{i||t.next(e),t.complete()}))})}function wq(e=qSe){return ii((n,t)=>{let i=!1;n.subscribe(Zn(t,r=>{i=!0,t.next(r)},()=>i?t.complete():t.error(e())))})}function qSe(){return new O_}function Ef(e,n){const t=arguments.length>=2;return i=>i.pipe(e?fc((r,o)=>e(r,o,i)):tu,lg(1),t?cC(n):wq(()=>new O_))}function Ji(e,n,t){const i=en(e)||n||t?{next:e,error:n,complete:t}:e;return i?ii((r,o)=>{var s;null===(s=i.subscribe)||void 0===s||s.call(i);let a=!0;r.subscribe(Zn(o,l=>{var c;null===(c=i.next)||void 0===c||c.call(i,l),o.next(l)},()=>{var l;a=!1,null===(l=i.complete)||void 0===l||l.call(i),o.complete()},l=>{var c;a=!1,null===(c=i.error)||void 0===c||c.call(i,l),o.error(l)},()=>{var l,c;a&&(null===(l=i.unsubscribe)||void 0===l||l.call(i)),null===(c=i.finalize)||void 0===c||c.call(i)}))}):tu}function Sf(e){return ii((n,t)=>{let o,i=null,r=!1;i=n.subscribe(Zn(t,void 0,void 0,s=>{o=So(e(s,Sf(e)(n))),i?(i.unsubscribe(),i=null,o.subscribe(t)):r=!0})),r&&(i.unsubscribe(),i=null,o.subscribe(t))})}function Tk(e){return e<=0?()=>za:ii((n,t)=>{let i=[];n.subscribe(Zn(t,r=>{i.push(r),e<i.length&&i.shift()},()=>{for(const r of i)t.next(r);t.complete()},void 0,()=>{i=null}))})}const lt="primary",F_=Symbol("RouteTitle");class QSe{constructor(n){this.params=n||{}}has(n){return Object.prototype.hasOwnProperty.call(this.params,n)}get(n){if(this.has(n)){const t=this.params[n];return Array.isArray(t)?t[0]:t}return null}getAll(n){if(this.has(n)){const t=this.params[n];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function cg(e){return new QSe(e)}function ZSe(e,n,t){const i=t.path.split("/");if(i.length>e.length||"full"===t.pathMatch&&(n.hasChildren()||i.length<e.length))return null;const r={};for(let o=0;o<i.length;o++){const s=i[o],a=e[o];if(s.startsWith(":"))r[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:e.slice(0,i.length),posParams:r}}function nl(e,n){const t=e?Object.keys(e):void 0,i=n?Object.keys(n):void 0;if(!t||!i||t.length!=i.length)return!1;let r;for(let o=0;o<t.length;o++)if(r=t[o],!Cq(e[r],n[r]))return!1;return!0}function Cq(e,n){if(Array.isArray(e)&&Array.isArray(n)){if(e.length!==n.length)return!1;const t=[...e].sort(),i=[...n].sort();return t.every((r,o)=>i[o]===r)}return e===n}function xq(e){return e.length>0?e[e.length-1]:null}function xu(e){return function zSe(e){return!!e&&(e instanceof zn||en(e.lift)&&en(e.subscribe))}(e)?e:n_(e)?ri(Promise.resolve(e)):Qe(e)}const e2e={exact:function Tq(e,n,t){if(!Tf(e.segments,n.segments)||!uC(e.segments,n.segments,t)||e.numberOfChildren!==n.numberOfChildren)return!1;for(const i in n.children)if(!e.children[i]||!Tq(e.children[i],n.children[i],t))return!1;return!0},subset:Dq},Eq={exact:function t2e(e,n){return nl(e,n)},subset:function n2e(e,n){return Object.keys(n).length<=Object.keys(e).length&&Object.keys(n).every(t=>Cq(e[t],n[t]))},ignored:()=>!0};function Sq(e,n,t){return e2e[t.paths](e.root,n.root,t.matrixParams)&&Eq[t.queryParams](e.queryParams,n.queryParams)&&!("exact"===t.fragment&&e.fragment!==n.fragment)}function Dq(e,n,t){return Iq(e,n,n.segments,t)}function Iq(e,n,t,i){if(e.segments.length>t.length){const r=e.segments.slice(0,t.length);return!(!Tf(r,t)||n.hasChildren()||!uC(r,t,i))}if(e.segments.length===t.length){if(!Tf(e.segments,t)||!uC(e.segments,t,i))return!1;for(const r in n.children)if(!e.children[r]||!Dq(e.children[r],n.children[r],i))return!1;return!0}{const r=t.slice(0,e.segments.length),o=t.slice(e.segments.length);return!!(Tf(e.segments,r)&&uC(e.segments,r,i)&&e.children[lt])&&Iq(e.children[lt],n,o,i)}}function uC(e,n,t){return n.every((i,r)=>Eq[t](e[r].parameters,i.parameters))}class ug{constructor(n=new nn([],{}),t={},i=null){this.root=n,this.queryParams=t,this.fragment=i}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=cg(this.queryParams)),this._queryParamMap}toString(){return o2e.serialize(this)}}class nn{constructor(n,t){this.segments=n,this.children=t,this.parent=null,Object.values(t).forEach(i=>i.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return dC(this)}}class N_{constructor(n,t){this.path=n,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=cg(this.parameters)),this._parameterMap}toString(){return kq(this)}}function Tf(e,n){return e.length===n.length&&e.every((t,i)=>t.path===n[i].path)}let P_=(()=>{class e{static#e=this.\u0275fac=function(i){return new(i||e)};static#t=this.\u0275prov=Oe({token:e,factory:function(){return new Dk},providedIn:"root"})}return e})();class Dk{parse(n){const t=new m2e(n);return new ug(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(n){const t=`/${L_(n.root,!0)}`,i=function l2e(e){const n=Object.keys(e).map(t=>{const i=e[t];return Array.isArray(i)?i.map(r=>`${fC(t)}=${fC(r)}`).join("&"):`${fC(t)}=${fC(i)}`}).filter(t=>!!t);return n.length?`?${n.join("&")}`:""}(n.queryParams);return`${t}${i}${"string"==typeof n.fragment?`#${function s2e(e){return encodeURI(e)}(n.fragment)}`:""}`}}const o2e=new Dk;function dC(e){return e.segments.map(n=>kq(n)).join("/")}function L_(e,n){if(!e.hasChildren())return dC(e);if(n){const t=e.children[lt]?L_(e.children[lt],!1):"",i=[];return Object.entries(e.children).forEach(([r,o])=>{r!==lt&&i.push(`${r}:${L_(o,!1)}`)}),i.length>0?`${t}(${i.join("//")})`:t}{const t=function r2e(e,n){let t=[];return Object.entries(e.children).forEach(([i,r])=>{i===lt&&(t=t.concat(n(r,i)))}),Object.entries(e.children).forEach(([i,r])=>{i!==lt&&(t=t.concat(n(r,i)))}),t}(e,(i,r)=>r===lt?[L_(e.children[lt],!1)]:[`${r}:${L_(i,!1)}`]);return 1===Object.keys(e.children).length&&null!=e.children[lt]?`${dC(e)}/${t[0]}`:`${dC(e)}/(${t.join("//")})`}}function Mq(e){return encodeURIComponent(e).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function fC(e){return Mq(e).replace(/%3B/gi,";")}function Ik(e){return Mq(e).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function hC(e){return decodeURIComponent(e)}function Aq(e){return hC(e.replace(/\+/g,"%20"))}function kq(e){return`${Ik(e.path)}${function a2e(e){return Object.keys(e).map(n=>`;${Ik(n)}=${Ik(e[n])}`).join("")}(e.parameters)}`}const c2e=/^[^\/()?;#]+/;function Mk(e){const n=e.match(c2e);return n?n[0]:""}const u2e=/^[^\/()?;=#]+/,f2e=/^[^=?&#]+/,p2e=/^[^&#]+/;class m2e{constructor(n){this.url=n,this.remaining=n}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new nn([],{}):new nn([],this.parseChildren())}parseQueryParams(){const n={};if(this.consumeOptional("?"))do{this.parseQueryParam(n)}while(this.consumeOptional("&"));return n}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const n=[];for(this.peekStartsWith("(")||n.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),n.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let i={};return this.peekStartsWith("(")&&(i=this.parseParens(!1)),(n.length>0||Object.keys(t).length>0)&&(i[lt]=new nn(n,t)),i}parseSegment(){const n=Mk(this.remaining);if(""===n&&this.peekStartsWith(";"))throw new ne(4009,!1);return this.capture(n),new N_(hC(n),this.parseMatrixParams())}parseMatrixParams(){const n={};for(;this.consumeOptional(";");)this.parseParam(n);return n}parseParam(n){const t=function d2e(e){const n=e.match(u2e);return n?n[0]:""}(this.remaining);if(!t)return;this.capture(t);let i="";if(this.consumeOptional("=")){const r=Mk(this.remaining);r&&(i=r,this.capture(i))}n[hC(t)]=hC(i)}parseQueryParam(n){const t=function h2e(e){const n=e.match(f2e);return n?n[0]:""}(this.remaining);if(!t)return;this.capture(t);let i="";if(this.consumeOptional("=")){const s=function g2e(e){const n=e.match(p2e);return n?n[0]:""}(this.remaining);s&&(i=s,this.capture(i))}const r=Aq(t),o=Aq(i);if(n.hasOwnProperty(r)){let s=n[r];Array.isArray(s)||(s=[s],n[r]=s),s.push(o)}else n[r]=o}parseParens(n){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const i=Mk(this.remaining),r=this.remaining[i.length];if("/"!==r&&")"!==r&&";"!==r)throw new ne(4010,!1);let o;i.indexOf(":")>-1?(o=i.slice(0,i.indexOf(":")),this.capture(o),this.capture(":")):n&&(o=lt);const s=this.parseChildren();t[o]=1===Object.keys(s).length?s[lt]:new nn([],s),this.consumeOptional("//")}return t}peekStartsWith(n){return this.remaining.startsWith(n)}consumeOptional(n){return!!this.peekStartsWith(n)&&(this.remaining=this.remaining.substring(n.length),!0)}capture(n){if(!this.consumeOptional(n))throw new ne(4011,!1)}}function Oq(e){return e.segments.length>0?new nn([],{[lt]:e}):e}function Rq(e){const n={};for(const i of Object.keys(e.children)){const o=Rq(e.children[i]);if(i===lt&&0===o.segments.length&&o.hasChildren())for(const[s,a]of Object.entries(o.children))n[s]=a;else(o.segments.length>0||o.hasChildren())&&(n[i]=o)}return function _2e(e){if(1===e.numberOfChildren&&e.children[lt]){const n=e.children[lt];return new nn(e.segments.concat(n.segments),n.children)}return e}(new nn(e.segments,n))}function Df(e){return e instanceof ug}function Fq(e){let n;const r=Oq(function t(o){const s={};for(const l of o.children){const c=t(l);s[l.outlet]=c}const a=new nn(o.url,s);return o===e&&(n=a),a}(e.root));return n??r}function Nq(e,n,t,i){let r=e;for(;r.parent;)r=r.parent;if(0===n.length)return Ak(r,r,r,t,i);const o=function v2e(e){if("string"==typeof e[0]&&1===e.length&&"/"===e[0])return new Lq(!0,0,e);let n=0,t=!1;const i=e.reduce((r,o,s)=>{if("object"==typeof o&&null!=o){if(o.outlets){const a={};return Object.entries(o.outlets).forEach(([l,c])=>{a[l]="string"==typeof c?c.split("/"):c}),[...r,{outlets:a}]}if(o.segmentPath)return[...r,o.segmentPath]}return"string"!=typeof o?[...r,o]:0===s?(o.split("/").forEach((a,l)=>{0==l&&"."===a||(0==l&&""===a?t=!0:".."===a?n++:""!=a&&r.push(a))}),r):[...r,o]},[]);return new Lq(t,n,i)}(n);if(o.toRoot())return Ak(r,r,new nn([],{}),t,i);const s=function b2e(e,n,t){if(e.isAbsolute)return new gC(n,!0,0);if(!t)return new gC(n,!1,NaN);if(null===t.parent)return new gC(t,!0,0);const i=pC(e.commands[0])?0:1;return function w2e(e,n,t){let i=e,r=n,o=t;for(;o>r;){if(o-=r,i=i.parent,!i)throw new ne(4005,!1);r=i.segments.length}return new gC(i,!1,r-o)}(t,t.segments.length-1+i,e.numberOfDoubleDots)}(o,r,e),a=s.processChildren?B_(s.segmentGroup,s.index,o.commands):$q(s.segmentGroup,s.index,o.commands);return Ak(r,s.segmentGroup,a,t,i)}function pC(e){return"object"==typeof e&&null!=e&&!e.outlets&&!e.segmentPath}function $_(e){return"object"==typeof e&&null!=e&&e.outlets}function Ak(e,n,t,i,r){let s,o={};i&&Object.entries(i).forEach(([l,c])=>{o[l]=Array.isArray(c)?c.map(u=>`${u}`):`${c}`}),s=e===n?t:Pq(e,n,t);const a=Oq(Rq(s));return new ug(a,o,r)}function Pq(e,n,t){const i={};return Object.entries(e.children).forEach(([r,o])=>{i[r]=o===n?t:Pq(o,n,t)}),new nn(e.segments,i)}class Lq{constructor(n,t,i){if(this.isAbsolute=n,this.numberOfDoubleDots=t,this.commands=i,n&&i.length>0&&pC(i[0]))throw new ne(4003,!1);const r=i.find($_);if(r&&r!==xq(i))throw new ne(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class gC{constructor(n,t,i){this.segmentGroup=n,this.processChildren=t,this.index=i}}function $q(e,n,t){if(e||(e=new nn([],{})),0===e.segments.length&&e.hasChildren())return B_(e,n,t);const i=function x2e(e,n,t){let i=0,r=n;const o={match:!1,pathIndex:0,commandIndex:0};for(;r<e.segments.length;){if(i>=t.length)return o;const s=e.segments[r],a=t[i];if($_(a))break;const l=`${a}`,c=i<t.length-1?t[i+1]:null;if(r>0&&void 0===l)break;if(l&&c&&"object"==typeof c&&void 0===c.outlets){if(!Vq(l,c,s))return o;i+=2}else{if(!Vq(l,{},s))return o;i++}r++}return{match:!0,pathIndex:r,commandIndex:i}}(e,n,t),r=t.slice(i.commandIndex);if(i.match&&i.pathIndex<e.segments.length){const o=new nn(e.segments.slice(0,i.pathIndex),{});return o.children[lt]=new nn(e.segments.slice(i.pathIndex),e.children),B_(o,0,r)}return i.match&&0===r.length?new nn(e.segments,{}):i.match&&!e.hasChildren()?kk(e,n,t):i.match?B_(e,0,r):kk(e,n,t)}function B_(e,n,t){if(0===t.length)return new nn(e.segments,{});{const i=function C2e(e){return $_(e[0])?e[0].outlets:{[lt]:e}}(t),r={};if(Object.keys(i).some(o=>o!==lt)&&e.children[lt]&&1===e.numberOfChildren&&0===e.children[lt].segments.length){const o=B_(e.children[lt],n,t);return new nn(e.segments,o.children)}return Object.entries(i).forEach(([o,s])=>{"string"==typeof s&&(s=[s]),null!==s&&(r[o]=$q(e.children[o],n,s))}),Object.entries(e.children).forEach(([o,s])=>{void 0===i[o]&&(r[o]=s)}),new nn(e.segments,r)}}function kk(e,n,t){const i=e.segments.slice(0,n);let r=0;for(;r<t.length;){const o=t[r];if($_(o)){const l=E2e(o.outlets);return new nn(i,l)}if(0===r&&pC(t[0])){i.push(new N_(e.segments[n].path,Bq(t[0]))),r++;continue}const s=$_(o)?o.outlets[lt]:`${o}`,a=r<t.length-1?t[r+1]:null;s&&a&&pC(a)?(i.push(new N_(s,Bq(a))),r+=2):(i.push(new N_(s,{})),r++)}return new nn(i,{})}function E2e(e){const n={};return Object.entries(e).forEach(([t,i])=>{"string"==typeof i&&(i=[i]),null!==i&&(n[t]=kk(new nn([],{}),0,i))}),n}function Bq(e){const n={};return Object.entries(e).forEach(([t,i])=>n[t]=`${i}`),n}function Vq(e,n,t){return e==t.path&&nl(n,t.parameters)}const V_="imperative";class il{constructor(n,t){this.id=n,this.url=t}}class mC extends il{constructor(n,t,i="imperative",r=null){super(n,t),this.type=0,this.navigationTrigger=i,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Eu extends il{constructor(n,t,i){super(n,t),this.urlAfterRedirects=i,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class z_ extends il{constructor(n,t,i,r){super(n,t),this.reason=i,this.code=r,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class dg extends il{constructor(n,t,i,r){super(n,t),this.reason=i,this.code=r,this.type=16}}class _C extends il{constructor(n,t,i,r){super(n,t),this.error=i,this.target=r,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class zq extends il{constructor(n,t,i,r){super(n,t),this.urlAfterRedirects=i,this.state=r,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class S2e extends il{constructor(n,t,i,r){super(n,t),this.urlAfterRedirects=i,this.state=r,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class T2e extends il{constructor(n,t,i,r,o){super(n,t),this.urlAfterRedirects=i,this.state=r,this.shouldActivate=o,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class D2e extends il{constructor(n,t,i,r){super(n,t),this.urlAfterRedirects=i,this.state=r,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class I2e extends il{constructor(n,t,i,r){super(n,t),this.urlAfterRedirects=i,this.state=r,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class M2e{constructor(n){this.route=n,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class A2e{constructor(n){this.route=n,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class k2e{constructor(n){this.snapshot=n,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class O2e{constructor(n){this.snapshot=n,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class R2e{constructor(n){this.snapshot=n,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class F2e{constructor(n){this.snapshot=n,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Uq{constructor(n,t,i){this.routerEvent=n,this.position=t,this.anchor=i,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class Ok{}class Rk{constructor(n){this.url=n}}class N2e{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new U_,this.attachRef=null}}let U_=(()=>{class e{constructor(){this.contexts=new Map}onChildOutletCreated(t,i){const r=this.getOrCreateContext(t);r.outlet=i,this.contexts.set(t,r)}onChildOutletDestroyed(t){const i=this.getContext(t);i&&(i.outlet=null,i.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let i=this.getContext(t);return i||(i=new N2e,this.contexts.set(t,i)),i}getContext(t){return this.contexts.get(t)||null}static#e=this.\u0275fac=function(i){return new(i||e)};static#t=this.\u0275prov=Oe({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();class Hq{constructor(n){this._root=n}get root(){return this._root.value}parent(n){const t=this.pathFromRoot(n);return t.length>1?t[t.length-2]:null}children(n){const t=Fk(n,this._root);return t?t.children.map(i=>i.value):[]}firstChild(n){const t=Fk(n,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(n){const t=Nk(n,this._root);return t.length<2?[]:t[t.length-2].children.map(r=>r.value).filter(r=>r!==n)}pathFromRoot(n){return Nk(n,this._root).map(t=>t.value)}}function Fk(e,n){if(e===n.value)return n;for(const t of n.children){const i=Fk(e,t);if(i)return i}return null}function Nk(e,n){if(e===n.value)return[n];for(const t of n.children){const i=Nk(e,t);if(i.length)return i.unshift(n),i}return[]}class hc{constructor(n,t){this.value=n,this.children=t}toString(){return`TreeNode(${this.value})`}}function fg(e){const n={};return e&&e.children.forEach(t=>n[t.value.outlet]=t),n}class jq extends Hq{constructor(n,t){super(n),this.snapshot=t,Pk(this,n)}toString(){return this.snapshot.toString()}}function qq(e,n){const t=function P2e(e,n){const s=new yC([],{},{},"",{},lt,n,null,{});return new Gq("",new hc(s,[]))}(0,n),i=new as([new N_("",{})]),r=new as({}),o=new as({}),s=new as({}),a=new as(""),l=new hg(i,r,s,a,o,lt,n,t.root);return l.snapshot=t.root,new jq(new hc(l,[]),t)}class hg{constructor(n,t,i,r,o,s,a,l){this.urlSubject=n,this.paramsSubject=t,this.queryParamsSubject=i,this.fragmentSubject=r,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=l,this.title=this.dataSubject?.pipe(zt(c=>c[F_]))??Qe(void 0),this.url=n,this.params=t,this.queryParams=i,this.fragment=r,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(zt(n=>cg(n)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(zt(n=>cg(n)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Wq(e,n="emptyOnly"){const t=e.pathFromRoot;let i=0;if("always"!==n)for(i=t.length-1;i>=1;){const r=t[i],o=t[i-1];if(r.routeConfig&&""===r.routeConfig.path)i--;else{if(o.component)break;i--}}return function L2e(e){return e.reduce((n,t)=>({params:{...n.params,...t.params},data:{...n.data,...t.data},resolve:{...t.data,...n.resolve,...t.routeConfig?.data,...t._resolvedData}}),{params:{},data:{},resolve:{}})}(t.slice(i))}class yC{get title(){return this.data?.[F_]}constructor(n,t,i,r,o,s,a,l,c){this.url=n,this.params=t,this.queryParams=i,this.fragment=r,this.data=o,this.outlet=s,this.component=a,this.routeConfig=l,this._resolve=c}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=cg(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=cg(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(i=>i.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Gq extends Hq{constructor(n,t){super(t),this.url=n,Pk(this,t)}toString(){return Kq(this._root)}}function Pk(e,n){n.value._routerState=e,n.children.forEach(t=>Pk(e,t))}function Kq(e){const n=e.children.length>0?` { ${e.children.map(Kq).join(", ")} } `:"";return`${e.value}${n}`}function Lk(e){if(e.snapshot){const n=e.snapshot,t=e._futureSnapshot;e.snapshot=t,nl(n.queryParams,t.queryParams)||e.queryParamsSubject.next(t.queryParams),n.fragment!==t.fragment&&e.fragmentSubject.next(t.fragment),nl(n.params,t.params)||e.paramsSubject.next(t.params),function JSe(e,n){if(e.length!==n.length)return!1;for(let t=0;t<e.length;++t)if(!nl(e[t],n[t]))return!1;return!0}(n.url,t.url)||e.urlSubject.next(t.url),nl(n.data,t.data)||e.dataSubject.next(t.data)}else e.snapshot=e._futureSnapshot,e.dataSubject.next(e._futureSnapshot.data)}function $k(e,n){const t=nl(e.params,n.params)&&function i2e(e,n){return Tf(e,n)&&e.every((t,i)=>nl(t.parameters,n[i].parameters))}(e.url,n.url);return t&&!(!e.parent!=!n.parent)&&(!e.parent||$k(e.parent,n.parent))}let Yq=(()=>{class e{constructor(){this.activated=null,this._activatedRoute=null,this.name=lt,this.activateEvents=new De,this.deactivateEvents=new De,this.attachEvents=new De,this.detachEvents=new De,this.parentContexts=Te(U_),this.location=Te(Oo),this.changeDetector=Te(Ro),this.environmentInjector=Te(Ao),this.inputBinder=Te(vC,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(t){if(t.name){const{firstChange:i,previousValue:r}=t.name;if(i)return;this.isTrackedInParentContexts(r)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(r)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new ne(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new ne(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new ne(4012,!1);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,i){this.activated=t,this._activatedRoute=i,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,i){if(this.isActivated)throw new ne(4013,!1);this._activatedRoute=t;const r=this.location,s=t.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,l=new $2e(t,a,r.injector);this.activated=r.createComponent(s,{index:r.length,injector:l,environmentInjector:i??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static#e=this.\u0275fac=function(i){return new(i||e)};static#t=this.\u0275dir=je({type:e,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[vr]})}return e})();class $2e{constructor(n,t,i){this.route=n,this.childContexts=t,this.parent=i}get(n,t){return n===hg?this.route:n===U_?this.childContexts:this.parent.get(n,t)}}const vC=new Ie("");let Xq=(()=>{class e{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(t){this.unsubscribeFromRouteData(t),this.subscribeToRouteData(t)}unsubscribeFromRouteData(t){this.outletDataSubscriptions.get(t)?.unsubscribe(),this.outletDataSubscriptions.delete(t)}subscribeToRouteData(t){const{activatedRoute:i}=t,r=xk([i.queryParams,i.params,i.data]).pipe(Ws(([o,s,a],l)=>(a={...o,...s,...a},0===l?Qe(a):Promise.resolve(a)))).subscribe(o=>{if(!t.isActivated||!t.activatedComponentRef||t.activatedRoute!==i||null===i.component)return void this.unsubscribeFromRouteData(t);const s=function Hve(e){const n=It(e);if(!n)return null;const t=new Q0(n);return{get selector(){return t.selector},get type(){return t.componentType},get inputs(){return t.inputs},get outputs(){return t.outputs},get ngContentSelectors(){return t.ngContentSelectors},get isStandalone(){return n.standalone},get isSignal(){return n.signals}}}(i.component);if(s)for(const{templateName:a}of s.inputs)t.activatedComponentRef.setInput(a,o[a]);else this.unsubscribeFromRouteData(t)});this.outletDataSubscriptions.set(t,r)}static#e=this.\u0275fac=function(i){return new(i||e)};static#t=this.\u0275prov=Oe({token:e,factory:e.\u0275fac})}return e})();function H_(e,n,t){if(t&&e.shouldReuseRoute(n.value,t.value.snapshot)){const i=t.value;i._futureSnapshot=n.value;const r=function V2e(e,n,t){return n.children.map(i=>{for(const r of t.children)if(e.shouldReuseRoute(i.value,r.value.snapshot))return H_(e,i,r);return H_(e,i)})}(e,n,t);return new hc(i,r)}{if(e.shouldAttach(n.value)){const o=e.retrieve(n.value);if(null!==o){const s=o.route;return s.value._futureSnapshot=n.value,s.children=n.children.map(a=>H_(e,a)),s}}const i=function z2e(e){return new hg(new as(e.url),new as(e.params),new as(e.queryParams),new as(e.fragment),new as(e.data),e.outlet,e.component,e)}(n.value),r=n.children.map(o=>H_(e,o));return new hc(i,r)}}const Bk="ngNavigationCancelingError";function Qq(e,n){const{redirectTo:t,navigationBehaviorOptions:i}=Df(n)?{redirectTo:n,navigationBehaviorOptions:void 0}:n,r=Zq(!1,0,n);return r.url=t,r.navigationBehaviorOptions=i,r}function Zq(e,n,t){const i=new Error("NavigationCancelingError: "+(e||""));return i[Bk]=!0,i.cancellationCode=n,t&&(i.url=t),i}function Jq(e){return e&&e[Bk]}let eW=(()=>{class e{static#e=this.\u0275fac=function(i){return new(i||e)};static#t=this.\u0275cmp=it({type:e,selectors:[["ng-component"]],standalone:!0,features:[cn],decls:1,vars:0,template:function(i,r){1&i&&_e(0,"router-outlet")},dependencies:[Yq],encapsulation:2})}return e})();function Vk(e){const n=e.children&&e.children.map(Vk),t=n?{...e,children:n}:{...e};return!t.component&&!t.loadComponent&&(n||t.loadChildren)&&t.outlet&&t.outlet!==lt&&(t.component=eW),t}function ra(e){return e.outlet||lt}function j_(e){if(!e)return null;if(e.routeConfig?._injector)return e.routeConfig._injector;for(let n=e.parent;n;n=n.parent){const t=n.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class Y2e{constructor(n,t,i,r,o){this.routeReuseStrategy=n,this.futureState=t,this.currState=i,this.forwardEvent=r,this.inputBindingEnabled=o}activate(n){const t=this.futureState._root,i=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,i,n),Lk(this.futureState.root),this.activateChildRoutes(t,i,n)}deactivateChildRoutes(n,t,i){const r=fg(t);n.children.forEach(o=>{const s=o.value.outlet;this.deactivateRoutes(o,r[s],i),delete r[s]}),Object.values(r).forEach(o=>{this.deactivateRouteAndItsChildren(o,i)})}deactivateRoutes(n,t,i){const r=n.value,o=t?t.value:null;if(r===o)if(r.component){const s=i.getContext(r.outlet);s&&this.deactivateChildRoutes(n,t,s.children)}else this.deactivateChildRoutes(n,t,i);else o&&this.deactivateRouteAndItsChildren(t,i)}deactivateRouteAndItsChildren(n,t){n.value.component&&this.routeReuseStrategy.shouldDetach(n.value.snapshot)?this.detachAndStoreRouteSubtree(n,t):this.deactivateRouteAndOutlet(n,t)}detachAndStoreRouteSubtree(n,t){const i=t.getContext(n.value.outlet),r=i&&n.value.component?i.children:t,o=fg(n);for(const s of Object.keys(o))this.deactivateRouteAndItsChildren(o[s],r);if(i&&i.outlet){const s=i.outlet.detach(),a=i.children.onOutletDeactivated();this.routeReuseStrategy.store(n.value.snapshot,{componentRef:s,route:n,contexts:a})}}deactivateRouteAndOutlet(n,t){const i=t.getContext(n.value.outlet),r=i&&n.value.component?i.children:t,o=fg(n);for(const s of Object.keys(o))this.deactivateRouteAndItsChildren(o[s],r);i&&(i.outlet&&(i.outlet.deactivate(),i.children.onOutletDeactivated()),i.attachRef=null,i.route=null)}activateChildRoutes(n,t,i){const r=fg(t);n.children.forEach(o=>{this.activateRoutes(o,r[o.value.outlet],i),this.forwardEvent(new F2e(o.value.snapshot))}),n.children.length&&this.forwardEvent(new O2e(n.value.snapshot))}activateRoutes(n,t,i){const r=n.value,o=t?t.value:null;if(Lk(r),r===o)if(r.component){const s=i.getOrCreateContext(r.outlet);this.activateChildRoutes(n,t,s.children)}else this.activateChildRoutes(n,t,i);else if(r.component){const s=i.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){const a=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),Lk(a.route.value),this.activateChildRoutes(n,null,s.children)}else{const a=j_(r.snapshot);s.attachRef=null,s.route=r,s.injector=a,s.outlet&&s.outlet.activateWith(r,s.injector),this.activateChildRoutes(n,null,s.children)}}else this.activateChildRoutes(n,null,i)}}class tW{constructor(n){this.path=n,this.route=this.path[this.path.length-1]}}class bC{constructor(n,t){this.component=n,this.route=t}}function X2e(e,n,t){const i=e._root;return q_(i,n?n._root:null,t,[i.value])}function pg(e,n){const t=Symbol(),i=n.get(e,t);return i===t?"function"!=typeof e||function cfe(e){return null!==Gv(e)}(e)?n.get(e):e:i}function q_(e,n,t,i,r={canDeactivateChecks:[],canActivateChecks:[]}){const o=fg(n);return e.children.forEach(s=>{(function Z2e(e,n,t,i,r={canDeactivateChecks:[],canActivateChecks:[]}){const o=e.value,s=n?n.value:null,a=t?t.getContext(e.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){const l=function J2e(e,n,t){if("function"==typeof t)return t(e,n);switch(t){case"pathParamsChange":return!Tf(e.url,n.url);case"pathParamsOrQueryParamsChange":return!Tf(e.url,n.url)||!nl(e.queryParams,n.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!$k(e,n)||!nl(e.queryParams,n.queryParams);default:return!$k(e,n)}}(s,o,o.routeConfig.runGuardsAndResolvers);l?r.canActivateChecks.push(new tW(i)):(o.data=s.data,o._resolvedData=s._resolvedData),q_(e,n,o.component?a?a.children:null:t,i,r),l&&a&&a.outlet&&a.outlet.isActivated&&r.canDeactivateChecks.push(new bC(a.outlet.component,s))}else s&&W_(n,a,r),r.canActivateChecks.push(new tW(i)),q_(e,null,o.component?a?a.children:null:t,i,r)})(s,o[s.value.outlet],t,i.concat([s.value]),r),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>W_(a,t.getContext(s),r)),r}function W_(e,n,t){const i=fg(e),r=e.value;Object.entries(i).forEach(([o,s])=>{W_(s,r.component?n?n.children.getContext(o):null:n,t)}),t.canDeactivateChecks.push(new bC(r.component&&n&&n.outlet&&n.outlet.isActivated?n.outlet.component:null,r))}function G_(e){return"function"==typeof e}function nW(e){return e instanceof O_||"EmptyError"===e?.name}const wC=Symbol("INITIAL_VALUE");function gg(){return Ws(e=>xk(e.map(n=>n.pipe(lg(1),function jSe(...e){const n=p0(e);return ii((t,i)=>{(n?Ek(e,t,n):Ek(e,t)).subscribe(i)})}(wC)))).pipe(zt(n=>{for(const t of n)if(!0!==t){if(t===wC)return wC;if(!1===t||t instanceof ug)return t}return!0}),fc(n=>n!==wC),lg(1)))}function iW(e){return function dde(...e){return c9(e)}(Ji(n=>{if(Df(n))throw Qq(0,n)}),zt(n=>!0===n))}class CC{constructor(n){this.segmentGroup=n||null}}class rW{constructor(n){this.urlTree=n}}function mg(e){return R_(new CC(e))}function oW(e){return R_(new rW(e))}class vTe{constructor(n,t){this.urlSerializer=n,this.urlTree=t}noMatchError(n){return new ne(4002,!1)}lineralizeSegments(n,t){let i=[],r=t.root;for(;;){if(i=i.concat(r.segments),0===r.numberOfChildren)return Qe(i);if(r.numberOfChildren>1||!r.children[lt])return R_(new ne(4e3,!1));r=r.children[lt]}}applyRedirectCommands(n,t,i){return this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),n,i)}applyRedirectCreateUrlTree(n,t,i,r){const o=this.createSegmentGroup(n,t.root,i,r);return new ug(o,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(n,t){const i={};return Object.entries(n).forEach(([r,o])=>{if("string"==typeof o&&o.startsWith(":")){const a=o.substring(1);i[r]=t[a]}else i[r]=o}),i}createSegmentGroup(n,t,i,r){const o=this.createSegments(n,t.segments,i,r);let s={};return Object.entries(t.children).forEach(([a,l])=>{s[a]=this.createSegmentGroup(n,l,i,r)}),new nn(o,s)}createSegments(n,t,i,r){return t.map(o=>o.path.startsWith(":")?this.findPosParam(n,o,r):this.findOrReturn(o,i))}findPosParam(n,t,i){const r=i[t.path.substring(1)];if(!r)throw new ne(4001,!1);return r}findOrReturn(n,t){let i=0;for(const r of t){if(r.path===n.path)return t.splice(i),r;i++}return n}}const zk={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function bTe(e,n,t,i,r){const o=Uk(e,n,t);return o.matched?(i=function H2e(e,n){return e.providers&&!e._injector&&(e._injector=xM(e.providers,n,`Route: ${e.path}`)),e._injector??n}(n,i),function mTe(e,n,t,i){const r=n.canMatch;return r&&0!==r.length?Qe(r.map(s=>{const a=pg(s,e);return xu(function oTe(e){return e&&G_(e.canMatch)}(a)?a.canMatch(n,t):e.runInContext(()=>a(n,t)))})).pipe(gg(),iW()):Qe(!0)}(i,n,t).pipe(zt(s=>!0===s?o:{...zk}))):Qe(o)}function Uk(e,n,t){if(""===n.path)return"full"===n.pathMatch&&(e.hasChildren()||t.length>0)?{...zk}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const r=(n.matcher||ZSe)(t,e,n);if(!r)return{...zk};const o={};Object.entries(r.posParams??{}).forEach(([a,l])=>{o[a]=l.path});const s=r.consumed.length>0?{...o,...r.consumed[r.consumed.length-1].parameters}:o;return{matched:!0,consumedSegments:r.consumed,remainingSegments:t.slice(r.consumed.length),parameters:s,positionalParamSegments:r.posParams??{}}}function sW(e,n,t,i){return t.length>0&&function xTe(e,n,t){return t.some(i=>xC(e,n,i)&&ra(i)!==lt)}(e,t,i)?{segmentGroup:new nn(n,CTe(i,new nn(t,e.children))),slicedSegments:[]}:0===t.length&&function ETe(e,n,t){return t.some(i=>xC(e,n,i))}(e,t,i)?{segmentGroup:new nn(e.segments,wTe(e,0,t,i,e.children)),slicedSegments:t}:{segmentGroup:new nn(e.segments,e.children),slicedSegments:t}}function wTe(e,n,t,i,r){const o={};for(const s of i)if(xC(e,t,s)&&!r[ra(s)]){const a=new nn([],{});o[ra(s)]=a}return{...r,...o}}function CTe(e,n){const t={};t[lt]=n;for(const i of e)if(""===i.path&&ra(i)!==lt){const r=new nn([],{});t[ra(i)]=r}return t}function xC(e,n,t){return(!(e.hasChildren()||n.length>0)||"full"!==t.pathMatch)&&""===t.path}class ITe{constructor(n,t,i,r,o,s,a){this.injector=n,this.configLoader=t,this.rootComponentType=i,this.config=r,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.allowRedirects=!0,this.applyRedirects=new vTe(this.urlSerializer,this.urlTree)}noMatchError(n){return new ne(4002,!1)}recognize(){const n=sW(this.urlTree.root,[],[],this.config).segmentGroup;return this.processSegmentGroup(this.injector,this.config,n,lt).pipe(Sf(t=>{if(t instanceof rW)return this.allowRedirects=!1,this.urlTree=t.urlTree,this.match(t.urlTree);throw t instanceof CC?this.noMatchError(t):t}),zt(t=>{const i=new yC([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},lt,this.rootComponentType,null,{}),r=new hc(i,t),o=new Gq("",r),s=function y2e(e,n,t=null,i=null){return Nq(Fq(e),n,t,i)}(i,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),this.inheritParamsAndData(o._root),{state:o,tree:s}}))}match(n){return this.processSegmentGroup(this.injector,this.config,n.root,lt).pipe(Sf(i=>{throw i instanceof CC?this.noMatchError(i):i}))}inheritParamsAndData(n){const t=n.value,i=Wq(t,this.paramsInheritanceStrategy);t.params=Object.freeze(i.params),t.data=Object.freeze(i.data),n.children.forEach(r=>this.inheritParamsAndData(r))}processSegmentGroup(n,t,i,r){return 0===i.segments.length&&i.hasChildren()?this.processChildren(n,t,i):this.processSegment(n,t,i,i.segments,r,!0)}processChildren(n,t,i){const r=[];for(const o of Object.keys(i.children))"primary"===o?r.unshift(o):r.push(o);return ri(r).pipe(og(o=>{const s=i.children[o],a=function G2e(e,n){const t=e.filter(i=>ra(i)===n);return t.push(...e.filter(i=>ra(i)!==n)),t}(t,o);return this.processSegmentGroup(n,a,s,o)}),function GSe(e,n){return ii(function WSe(e,n,t,i,r){return(o,s)=>{let a=t,l=n,c=0;o.subscribe(Zn(s,u=>{const d=c++;l=a?e(l,u,d):(a=!0,u),i&&s.next(l)},r&&(()=>{a&&s.next(l),s.complete()})))}}(e,n,arguments.length>=2,!0))}((o,s)=>(o.push(...s),o)),cC(null),function KSe(e,n){const t=arguments.length>=2;return i=>i.pipe(e?fc((r,o)=>e(r,o,i)):tu,Tk(1),t?cC(n):wq(()=>new O_))}(),Ri(o=>{if(null===o)return mg(i);const s=aW(o);return function MTe(e){e.sort((n,t)=>n.value.outlet===lt?-1:t.value.outlet===lt?1:n.value.outlet.localeCompare(t.value.outlet))}(s),Qe(s)}))}processSegment(n,t,i,r,o,s){return ri(t).pipe(og(a=>this.processSegmentAgainstRoute(a._injector??n,t,a,i,r,o,s).pipe(Sf(l=>{if(l instanceof CC)return Qe(null);throw l}))),Ef(a=>!!a),Sf(a=>{if(nW(a))return function TTe(e,n,t){return 0===n.length&&!e.children[t]}(i,r,o)?Qe([]):mg(i);throw a}))}processSegmentAgainstRoute(n,t,i,r,o,s,a){return function STe(e,n,t,i){return!!(ra(e)===i||i!==lt&&xC(n,t,e))&&("**"===e.path||Uk(n,e,t).matched)}(i,r,o,s)?void 0===i.redirectTo?this.matchSegmentAgainstRoute(n,r,i,o,s,a):a&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(n,r,t,i,o,s):mg(r):mg(r)}expandSegmentAgainstRouteUsingRedirect(n,t,i,r,o,s){return"**"===r.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(n,i,r,s):this.expandRegularSegmentAgainstRouteUsingRedirect(n,t,i,r,o,s)}expandWildCardWithParamsAgainstRouteUsingRedirect(n,t,i,r){const o=this.applyRedirects.applyRedirectCommands([],i.redirectTo,{});return i.redirectTo.startsWith("/")?oW(o):this.applyRedirects.lineralizeSegments(i,o).pipe(Ri(s=>{const a=new nn(s,{});return this.processSegment(n,t,a,s,r,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(n,t,i,r,o,s){const{matched:a,consumedSegments:l,remainingSegments:c,positionalParamSegments:u}=Uk(t,r,o);if(!a)return mg(t);const d=this.applyRedirects.applyRedirectCommands(l,r.redirectTo,u);return r.redirectTo.startsWith("/")?oW(d):this.applyRedirects.lineralizeSegments(r,d).pipe(Ri(f=>this.processSegment(n,i,t,f.concat(c),s,!1)))}matchSegmentAgainstRoute(n,t,i,r,o,s){let a;if("**"===i.path){const l=r.length>0?xq(r).parameters:{};a=Qe({snapshot:new yC(r,l,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,lW(i),ra(i),i.component??i._loadedComponent??null,i,cW(i)),consumedSegments:[],remainingSegments:[]}),t.children={}}else a=bTe(t,i,r,n).pipe(zt(({matched:l,consumedSegments:c,remainingSegments:u,parameters:d})=>l?{snapshot:new yC(c,d,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,lW(i),ra(i),i.component??i._loadedComponent??null,i,cW(i)),consumedSegments:c,remainingSegments:u}:null));return a.pipe(Ws(l=>null===l?mg(t):this.getChildConfig(n=i._injector??n,i,r).pipe(Ws(({routes:c})=>{const u=i._loadedInjector??n,{snapshot:d,consumedSegments:f,remainingSegments:h}=l,{segmentGroup:p,slicedSegments:g}=sW(t,f,h,c);if(0===g.length&&p.hasChildren())return this.processChildren(u,c,p).pipe(zt(_=>null===_?null:[new hc(d,_)]));if(0===c.length&&0===g.length)return Qe([new hc(d,[])]);const m=ra(i)===o;return this.processSegment(u,c,p,g,m?lt:o,!0).pipe(zt(_=>[new hc(d,_)]))}))))}getChildConfig(n,t,i){return t.children?Qe({routes:t.children,injector:n}):t.loadChildren?void 0!==t._loadedRoutes?Qe({routes:t._loadedRoutes,injector:t._loadedInjector}):function gTe(e,n,t,i){const r=n.canLoad;return void 0===r||0===r.length?Qe(!0):Qe(r.map(s=>{const a=pg(s,e);return xu(function tTe(e){return e&&G_(e.canLoad)}(a)?a.canLoad(n,t):e.runInContext(()=>a(n,t)))})).pipe(gg(),iW())}(n,t,i).pipe(Ri(r=>r?this.configLoader.loadChildren(n,t).pipe(Ji(o=>{t._loadedRoutes=o.routes,t._loadedInjector=o.injector})):function yTe(e){return R_(Zq(!1,3))}())):Qe({routes:[],injector:n})}}function ATe(e){const n=e.value.routeConfig;return n&&""===n.path}function aW(e){const n=[],t=new Set;for(const i of e){if(!ATe(i)){n.push(i);continue}const r=n.find(o=>i.value.routeConfig===o.value.routeConfig);void 0!==r?(r.children.push(...i.children),t.add(r)):n.push(i)}for(const i of t){const r=aW(i.children);n.push(new hc(i.value,r))}return n.filter(i=>!t.has(i))}function lW(e){return e.data||{}}function cW(e){return e.resolve||{}}function uW(e){return"string"==typeof e.title||null===e.title}function Hk(e){return Ws(n=>{const t=e(n);return t?ri(t).pipe(zt(()=>n)):Qe(n)})}const _g=new Ie("ROUTES");let jk=(()=>{class e{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=Te(Uz)}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return Qe(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const i=xu(t.loadComponent()).pipe(zt(dW),Ji(o=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=o}),I_(()=>{this.componentLoaders.delete(t)})),r=new bq(i,()=>new Eo).pipe(Sk());return this.componentLoaders.set(t,r),r}loadChildren(t,i){if(this.childrenLoaders.get(i))return this.childrenLoaders.get(i);if(i._loadedRoutes)return Qe({routes:i._loadedRoutes,injector:i._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(i);const o=function LTe(e,n,t,i){return xu(e.loadChildren()).pipe(zt(dW),Ri(r=>r instanceof XV||Array.isArray(r)?Qe(r):ri(n.compileModuleAsync(r))),zt(r=>{i&&i(e);let o,s,a=!1;return Array.isArray(r)?(s=r,!0):(o=r.create(t).injector,s=o.get(_g,[],{optional:!0,self:!0}).flat()),{routes:s.map(Vk),injector:o}}))}(i,this.compiler,t,this.onLoadEndListener).pipe(I_(()=>{this.childrenLoaders.delete(i)})),s=new bq(o,()=>new Eo).pipe(Sk());return this.childrenLoaders.set(i,s),s}static#e=this.\u0275fac=function(i){return new(i||e)};static#t=this.\u0275prov=Oe({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function dW(e){return function $Te(e){return e&&"object"==typeof e&&"default"in e}(e)?e.default:e}let EC=(()=>{class e{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new Eo,this.transitionAbortSubject=new Eo,this.configLoader=Te(jk),this.environmentInjector=Te(Ao),this.urlSerializer=Te(P_),this.rootContexts=Te(U_),this.inputBindingEnabled=null!==Te(vC,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>Qe(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=r=>this.events.next(new A2e(r)),this.configLoader.onLoadStartListener=r=>this.events.next(new M2e(r))}complete(){this.transitions?.complete()}handleNavigationRequest(t){const i=++this.navigationId;this.transitions?.next({...this.transitions.value,...t,id:i})}setupNavigations(t,i,r){return this.transitions=new as({id:0,currentUrlTree:i,currentRawUrl:i,currentBrowserUrl:i,extractedUrl:t.urlHandlingStrategy.extract(i),urlAfterRedirects:t.urlHandlingStrategy.extract(i),rawUrl:i,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:V_,restoredState:null,currentSnapshot:r.snapshot,targetSnapshot:null,currentRouterState:r,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(fc(o=>0!==o.id),zt(o=>({...o,extractedUrl:t.urlHandlingStrategy.extract(o.rawUrl)})),Ws(o=>{this.currentTransition=o;let s=!1,a=!1;return Qe(o).pipe(Ji(l=>{this.currentNavigation={id:l.id,initialUrl:l.rawUrl,extractedUrl:l.extractedUrl,trigger:l.source,extras:l.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),Ws(l=>{const c=l.currentBrowserUrl.toString(),u=!t.navigated||l.extractedUrl.toString()!==c||c!==l.currentUrlTree.toString();if(!u&&"reload"!==(l.extras.onSameUrlNavigation??t.onSameUrlNavigation)){const f="";return this.events.next(new dg(l.id,this.urlSerializer.serialize(l.rawUrl),f,0)),l.resolve(null),za}if(t.urlHandlingStrategy.shouldProcessUrl(l.rawUrl))return Qe(l).pipe(Ws(f=>{const h=this.transitions?.getValue();return this.events.next(new mC(f.id,this.urlSerializer.serialize(f.extractedUrl),f.source,f.restoredState)),h!==this.transitions?.getValue()?za:Promise.resolve(f)}),function kTe(e,n,t,i,r,o){return Ri(s=>function DTe(e,n,t,i,r,o,s="emptyOnly"){return new ITe(e,n,t,i,r,s,o).recognize()}(e,n,t,i,s.extractedUrl,r,o).pipe(zt(({state:a,tree:l})=>({...s,targetSnapshot:a,urlAfterRedirects:l}))))}(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,t.paramsInheritanceStrategy),Ji(f=>{o.targetSnapshot=f.targetSnapshot,o.urlAfterRedirects=f.urlAfterRedirects,this.currentNavigation={...this.currentNavigation,finalUrl:f.urlAfterRedirects};const h=new zq(f.id,this.urlSerializer.serialize(f.extractedUrl),this.urlSerializer.serialize(f.urlAfterRedirects),f.targetSnapshot);this.events.next(h)}));if(u&&t.urlHandlingStrategy.shouldProcessUrl(l.currentRawUrl)){const{id:f,extractedUrl:h,source:p,restoredState:g,extras:m}=l,_=new mC(f,this.urlSerializer.serialize(h),p,g);this.events.next(_);const y=qq(0,this.rootComponentType).snapshot;return this.currentTransition=o={...l,targetSnapshot:y,urlAfterRedirects:h,extras:{...m,skipLocationChange:!1,replaceUrl:!1}},Qe(o)}{const f="";return this.events.next(new dg(l.id,this.urlSerializer.serialize(l.extractedUrl),f,1)),l.resolve(null),za}}),Ji(l=>{const c=new S2e(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(c)}),zt(l=>(this.currentTransition=o={...l,guards:X2e(l.targetSnapshot,l.currentSnapshot,this.rootContexts)},o)),function aTe(e,n){return Ri(t=>{const{targetSnapshot:i,currentSnapshot:r,guards:{canActivateChecks:o,canDeactivateChecks:s}}=t;return 0===s.length&&0===o.length?Qe({...t,guardsResult:!0}):function lTe(e,n,t,i){return ri(e).pipe(Ri(r=>function pTe(e,n,t,i,r){const o=n&&n.routeConfig?n.routeConfig.canDeactivate:null;return o&&0!==o.length?Qe(o.map(a=>{const l=j_(n)??r,c=pg(a,l);return xu(function rTe(e){return e&&G_(e.canDeactivate)}(c)?c.canDeactivate(e,n,t,i):l.runInContext(()=>c(e,n,t,i))).pipe(Ef())})).pipe(gg()):Qe(!0)}(r.component,r.route,t,n,i)),Ef(r=>!0!==r,!0))}(s,i,r,e).pipe(Ri(a=>a&&function eTe(e){return"boolean"==typeof e}(a)?function cTe(e,n,t,i){return ri(n).pipe(og(r=>Ek(function dTe(e,n){return null!==e&&n&&n(new k2e(e)),Qe(!0)}(r.route.parent,i),function uTe(e,n){return null!==e&&n&&n(new R2e(e)),Qe(!0)}(r.route,i),function hTe(e,n,t){const i=n[n.length-1],o=n.slice(0,n.length-1).reverse().map(s=>function Q2e(e){const n=e.routeConfig?e.routeConfig.canActivateChild:null;return n&&0!==n.length?{node:e,guards:n}:null}(s)).filter(s=>null!==s).map(s=>vq(()=>Qe(s.guards.map(l=>{const c=j_(s.node)??t,u=pg(l,c);return xu(function iTe(e){return e&&G_(e.canActivateChild)}(u)?u.canActivateChild(i,e):c.runInContext(()=>u(i,e))).pipe(Ef())})).pipe(gg())));return Qe(o).pipe(gg())}(e,r.path,t),function fTe(e,n,t){const i=n.routeConfig?n.routeConfig.canActivate:null;if(!i||0===i.length)return Qe(!0);const r=i.map(o=>vq(()=>{const s=j_(n)??t,a=pg(o,s);return xu(function nTe(e){return e&&G_(e.canActivate)}(a)?a.canActivate(n,e):s.runInContext(()=>a(n,e))).pipe(Ef())}));return Qe(r).pipe(gg())}(e,r.route,t))),Ef(r=>!0!==r,!0))}(i,o,e,n):Qe(a)),zt(a=>({...t,guardsResult:a})))})}(this.environmentInjector,l=>this.events.next(l)),Ji(l=>{if(o.guardsResult=l.guardsResult,Df(l.guardsResult))throw Qq(0,l.guardsResult);const c=new T2e(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot,!!l.guardsResult);this.events.next(c)}),fc(l=>!!l.guardsResult||(this.cancelNavigationTransition(l,"",3),!1)),Hk(l=>{if(l.guards.canActivateChecks.length)return Qe(l).pipe(Ji(c=>{const u=new D2e(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(u)}),Ws(c=>{let u=!1;return Qe(c).pipe(function OTe(e,n){return Ri(t=>{const{targetSnapshot:i,guards:{canActivateChecks:r}}=t;if(!r.length)return Qe(t);let o=0;return ri(r).pipe(og(s=>function RTe(e,n,t,i){const r=e.routeConfig,o=e._resolve;return void 0!==r?.title&&!uW(r)&&(o[F_]=r.title),function FTe(e,n,t,i){const r=function NTe(e){return[...Object.keys(e),...Object.getOwnPropertySymbols(e)]}(e);if(0===r.length)return Qe({});const o={};return ri(r).pipe(Ri(s=>function PTe(e,n,t,i){const r=j_(n)??i,o=pg(e,r);return xu(o.resolve?o.resolve(n,t):r.runInContext(()=>o(n,t)))}(e[s],n,t,i).pipe(Ef(),Ji(a=>{o[s]=a}))),Tk(1),function YSe(e){return zt(()=>e)}(o),Sf(s=>nW(s)?za:R_(s)))}(o,e,n,i).pipe(zt(s=>(e._resolvedData=s,e.data=Wq(e,t).resolve,r&&uW(r)&&(e.data[F_]=r.title),null)))}(s.route,i,e,n)),Ji(()=>o++),Tk(1),Ri(s=>o===r.length?Qe(t):za))})}(t.paramsInheritanceStrategy,this.environmentInjector),Ji({next:()=>u=!0,complete:()=>{u||this.cancelNavigationTransition(c,"",2)}}))}),Ji(c=>{const u=new I2e(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(u)}))}),Hk(l=>{const c=u=>{const d=[];u.routeConfig?.loadComponent&&!u.routeConfig._loadedComponent&&d.push(this.configLoader.loadComponent(u.routeConfig).pipe(Ji(f=>{u.component=f}),zt(()=>{})));for(const f of u.children)d.push(...c(f));return d};return xk(c(l.targetSnapshot.root)).pipe(cC(),lg(1))}),Hk(()=>this.afterPreactivation()),zt(l=>{const c=function B2e(e,n,t){const i=H_(e,n._root,t?t._root:void 0);return new jq(i,n)}(t.routeReuseStrategy,l.targetSnapshot,l.currentRouterState);return this.currentTransition=o={...l,targetRouterState:c},o}),Ji(()=>{this.events.next(new Ok)}),((e,n,t,i)=>zt(r=>(new Y2e(n,r.targetRouterState,r.currentRouterState,t,i).activate(e),r)))(this.rootContexts,t.routeReuseStrategy,l=>this.events.next(l),this.inputBindingEnabled),lg(1),Ji({next:l=>{s=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Eu(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects))),t.titleStrategy?.updateTitle(l.targetRouterState.snapshot),l.resolve(!0)},complete:()=>{s=!0}}),function XSe(e){return ii((n,t)=>{So(e).subscribe(Zn(t,()=>t.complete(),QT)),!t.closed&&n.subscribe(t)})}(this.transitionAbortSubject.pipe(Ji(l=>{throw l}))),I_(()=>{s||a||this.cancelNavigationTransition(o,"",1),this.currentNavigation?.id===o.id&&(this.currentNavigation=null)}),Sf(l=>{if(a=!0,Jq(l))this.events.next(new z_(o.id,this.urlSerializer.serialize(o.extractedUrl),l.message,l.cancellationCode)),function U2e(e){return Jq(e)&&Df(e.url)}(l)?this.events.next(new Rk(l.url)):o.resolve(!1);else{this.events.next(new _C(o.id,this.urlSerializer.serialize(o.extractedUrl),l,o.targetSnapshot??void 0));try{o.resolve(t.errorHandler(l))}catch(c){o.reject(c)}}return za}))}))}cancelNavigationTransition(t,i,r){const o=new z_(t.id,this.urlSerializer.serialize(t.extractedUrl),i,r);this.events.next(o),t.resolve(!1)}static#e=this.\u0275fac=function(i){return new(i||e)};static#t=this.\u0275prov=Oe({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function fW(e){return e!==V_}let hW=(()=>{class e{buildTitle(t){let i,r=t.root;for(;void 0!==r;)i=this.getResolvedTitleForRoute(r)??i,r=r.children.find(o=>o.outlet===lt);return i}getResolvedTitleForRoute(t){return t.data[F_]}static#e=this.\u0275fac=function(i){return new(i||e)};static#t=this.\u0275prov=Oe({token:e,factory:function(){return Te(BTe)},providedIn:"root"})}return e})(),BTe=(()=>{class e extends hW{constructor(t){super(),this.title=t}updateTitle(t){const i=this.buildTitle(t);void 0!==i&&this.title.setTitle(i)}static#e=this.\u0275fac=function(i){return new(i||e)(Me(lH))};static#t=this.\u0275prov=Oe({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),VTe=(()=>{class e{static#e=this.\u0275fac=function(i){return new(i||e)};static#t=this.\u0275prov=Oe({token:e,factory:function(){return Te(UTe)},providedIn:"root"})}return e})();class zTe{shouldDetach(n){return!1}store(n,t){}shouldAttach(n){return!1}retrieve(n){return null}shouldReuseRoute(n,t){return n.routeConfig===t.routeConfig}}let UTe=(()=>{class e extends zTe{static#e=this.\u0275fac=function(){let t;return function(r){return(t||(t=dt(e)))(r||e)}}();static#t=this.\u0275prov=Oe({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();const SC=new Ie("",{providedIn:"root",factory:()=>({})});let HTe=(()=>{class e{static#e=this.\u0275fac=function(i){return new(i||e)};static#t=this.\u0275prov=Oe({token:e,factory:function(){return Te(jTe)},providedIn:"root"})}return e})(),jTe=(()=>{class e{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,i){return t}static#e=this.\u0275fac=function(i){return new(i||e)};static#t=this.\u0275prov=Oe({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();var K_=function(e){return e[e.COMPLETE=0]="COMPLETE",e[e.FAILED=1]="FAILED",e[e.REDIRECTING=2]="REDIRECTING",e}(K_||{});function pW(e,n){e.events.pipe(fc(t=>t instanceof Eu||t instanceof z_||t instanceof _C||t instanceof dg),zt(t=>t instanceof Eu||t instanceof dg?K_.COMPLETE:t instanceof z_&&(0===t.code||1===t.code)?K_.REDIRECTING:K_.FAILED),fc(t=>t!==K_.REDIRECTING),lg(1)).subscribe(()=>{n()})}function qTe(e){throw e}function WTe(e,n,t){return n.parse("/")}const GTe={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},KTe={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let bs=(()=>{class e{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){return"computed"!==this.canceledNavigationResolution?this.currentPageId:this.location.getState()?.\u0275routerPageId??this.currentPageId}get events(){return this._events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=Te(zz),this.isNgZoneEnabled=!1,this._events=new Eo,this.options=Te(SC,{optional:!0})||{},this.pendingTasks=Te(fw),this.errorHandler=this.options.errorHandler||qTe,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||WTe,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=Te(HTe),this.routeReuseStrategy=Te(VTe),this.titleStrategy=Te(hW),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=Te(_g,{optional:!0})?.flat()??[],this.navigationTransitions=Te(EC),this.urlSerializer=Te(P_),this.location=Te(nA),this.componentInputBindingEnabled=!!Te(vC,{optional:!0}),this.eventsSubscription=new mr,this.isNgZoneEnabled=Te(At)instanceof At&&At.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new ug,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=qq(0,null),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe(t=>{this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){const t=this.navigationTransitions.events.subscribe(i=>{try{const{currentTransition:r}=this.navigationTransitions;if(null===r)return void(gW(i)&&this._events.next(i));if(i instanceof mC)fW(r.source)&&(this.browserUrlTree=r.extractedUrl);else if(i instanceof dg)this.rawUrlTree=r.rawUrl;else if(i instanceof zq){if("eager"===this.urlUpdateStrategy){if(!r.extras.skipLocationChange){const o=this.urlHandlingStrategy.merge(r.urlAfterRedirects,r.rawUrl);this.setBrowserUrl(o,r)}this.browserUrlTree=r.urlAfterRedirects}}else if(i instanceof Ok)this.currentUrlTree=r.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(r.urlAfterRedirects,r.rawUrl),this.routerState=r.targetRouterState,"deferred"===this.urlUpdateStrategy&&(r.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,r),this.browserUrlTree=r.urlAfterRedirects);else if(i instanceof z_)0!==i.code&&1!==i.code&&(this.navigated=!0),(3===i.code||2===i.code)&&this.restoreHistory(r);else if(i instanceof Rk){const o=this.urlHandlingStrategy.merge(i.url,r.currentRawUrl),s={skipLocationChange:r.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||fW(r.source)};this.scheduleNavigation(o,V_,null,s,{resolve:r.resolve,reject:r.reject,promise:r.promise})}i instanceof _C&&this.restoreHistory(r,!0),i instanceof Eu&&(this.navigated=!0),gW(i)&&this._events.next(i)}catch(r){this.navigationTransitions.transitionAbortSubject.next(r)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const t=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),V_,t)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const i="popstate"===t.type?"popstate":"hashchange";"popstate"===i&&setTimeout(()=>{this.navigateToSyncWithBrowser(t.url,i,t.state)},0)}))}navigateToSyncWithBrowser(t,i,r){const o={replaceUrl:!0},s=r?.navigationId?r:null;if(r){const l={...r};delete l.navigationId,delete l.\u0275routerPageId,0!==Object.keys(l).length&&(o.state=l)}const a=this.parseUrl(t);this.scheduleNavigation(a,i,s,o)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(Vk),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,i={}){const{relativeTo:r,queryParams:o,fragment:s,queryParamsHandling:a,preserveFragment:l}=i,c=l?this.currentUrlTree.fragment:s;let d,u=null;switch(a){case"merge":u={...this.currentUrlTree.queryParams,...o};break;case"preserve":u=this.currentUrlTree.queryParams;break;default:u=o||null}null!==u&&(u=this.removeEmptyProps(u));try{d=Fq(r?r.snapshot:this.routerState.snapshot.root)}catch{("string"!=typeof t[0]||!t[0].startsWith("/"))&&(t=[]),d=this.currentUrlTree.root}return Nq(d,t,u,c??null)}navigateByUrl(t,i={skipLocationChange:!1}){const r=Df(t)?t:this.parseUrl(t),o=this.urlHandlingStrategy.merge(r,this.rawUrlTree);return this.scheduleNavigation(o,V_,null,i)}navigate(t,i={skipLocationChange:!1}){return function YTe(e){for(let n=0;n<e.length;n++)if(null==e[n])throw new ne(4008,!1)}(t),this.navigateByUrl(this.createUrlTree(t,i),i)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let i;try{i=this.urlSerializer.parse(t)}catch(r){i=this.malformedUriErrorHandler(r,this.urlSerializer,t)}return i}isActive(t,i){let r;if(r=!0===i?{...GTe}:!1===i?{...KTe}:i,Df(t))return Sq(this.currentUrlTree,t,r);const o=this.parseUrl(t);return Sq(this.currentUrlTree,o,r)}removeEmptyProps(t){return Object.keys(t).reduce((i,r)=>{const o=t[r];return null!=o&&(i[r]=o),i},{})}scheduleNavigation(t,i,r,o,s){if(this.disposed)return Promise.resolve(!1);let a,l,c;s?(a=s.resolve,l=s.reject,c=s.promise):c=new Promise((d,f)=>{a=d,l=f});const u=this.pendingTasks.add();return pW(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(u))}),this.navigationTransitions.handleNavigationRequest({source:i,restoredState:r,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,currentBrowserUrl:this.browserUrlTree,rawUrl:t,extras:o,resolve:a,reject:l,promise:c,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),c.catch(d=>Promise.reject(d))}setBrowserUrl(t,i){const r=this.urlSerializer.serialize(t);if(this.location.isCurrentPathEqualTo(r)||i.extras.replaceUrl){const s={...i.extras.state,...this.generateNgRouterState(i.id,this.browserPageId)};this.location.replaceState(r,"",s)}else{const o={...i.extras.state,...this.generateNgRouterState(i.id,this.browserPageId+1)};this.location.go(r,"",o)}}restoreHistory(t,i=!1){if("computed"===this.canceledNavigationResolution){const o=this.currentPageId-this.browserPageId;0!==o?this.location.historyGo(o):this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===o&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(i&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,i){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:i}:{navigationId:t}}static#e=this.\u0275fac=function(i){return new(i||e)};static#t=this.\u0275prov=Oe({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function gW(e){return!(e instanceof Ok||e instanceof Rk)}class mW{}let ZTe=(()=>{class e{constructor(t,i,r,o,s){this.router=t,this.injector=r,this.preloadingStrategy=o,this.loader=s}setUpPreloading(){this.subscription=this.router.events.pipe(fc(t=>t instanceof Eu),og(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,i){const r=[];for(const o of i){o.providers&&!o._injector&&(o._injector=xM(o.providers,t,`Route: ${o.path}`));const s=o._injector??t,a=o._loadedInjector??s;(o.loadChildren&&!o._loadedRoutes&&void 0===o.canLoad||o.loadComponent&&!o._loadedComponent)&&r.push(this.preloadConfig(s,o)),(o.children||o._loadedRoutes)&&r.push(this.processRoutes(a,o.children??o._loadedRoutes))}return ri(r).pipe(rp())}preloadConfig(t,i){return this.preloadingStrategy.preload(i,()=>{let r;r=i.loadChildren&&void 0===i.canLoad?this.loader.loadChildren(t,i):Qe(null);const o=r.pipe(Ri(s=>null===s?Qe(void 0):(i._loadedRoutes=s.routes,i._loadedInjector=s.injector,this.processRoutes(s.injector??t,s.routes))));return i.loadComponent&&!i._loadedComponent?ri([o,this.loader.loadComponent(i)]).pipe(rp()):o})}static#e=this.\u0275fac=function(i){return new(i||e)(Me(bs),Me(Uz),Me(Ao),Me(mW),Me(jk))};static#t=this.\u0275prov=Oe({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();const Wk=new Ie("");let _W=(()=>{class e{constructor(t,i,r,o,s={}){this.urlSerializer=t,this.transitions=i,this.viewportScroller=r,this.zone=o,this.options=s,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},s.scrollPositionRestoration=s.scrollPositionRestoration||"disabled",s.anchorScrolling=s.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof mC?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Eu?(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment)):t instanceof dg&&0===t.code&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof Uq&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,i){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new Uq(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,i))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static#e=this.\u0275fac=function(i){!function V$(){throw new Error("invalid")}()};static#t=this.\u0275prov=Oe({token:e,factory:e.\u0275fac})}return e})();function pc(e,n){return{\u0275kind:e,\u0275providers:n}}function vW(){const e=Te(Zr);return n=>{const t=e.get(hf);if(n!==t.components[0])return;const i=e.get(bs),r=e.get(bW);1===e.get(Gk)&&i.initialNavigation(),e.get(wW,null,vt.Optional)?.setUpPreloading(),e.get(Wk,null,vt.Optional)?.init(),i.resetRootComponentType(t.componentTypes[0]),r.closed||(r.next(),r.complete(),r.unsubscribe())}}const bW=new Ie("",{factory:()=>new Eo}),Gk=new Ie("",{providedIn:"root",factory:()=>1}),wW=new Ie("");function nDe(e){return pc(0,[{provide:wW,useExisting:ZTe},{provide:mW,useExisting:e}])}const CW=new Ie("ROUTER_FORROOT_GUARD"),rDe=[nA,{provide:P_,useClass:Dk},bs,U_,{provide:hg,useFactory:function yW(e){return e.routerState.root},deps:[bs]},jk,[]];function oDe(){return new Yz("Router",bs)}let xW=(()=>{class e{constructor(t){}static forRoot(t,i){return{ngModule:e,providers:[rDe,[],{provide:_g,multi:!0,useValue:t},{provide:CW,useFactory:cDe,deps:[[bs,new _b,new yb]]},{provide:SC,useValue:i||{}},i?.useHash?{provide:gf,useClass:Kve}:{provide:gf,useClass:SU},{provide:Wk,useFactory:()=>{const e=Te(fwe),n=Te(At),t=Te(SC),i=Te(EC),r=Te(P_);return t.scrollOffset&&e.setOffset(t.scrollOffset),new _W(r,i,e,n,t)}},i?.preloadingStrategy?nDe(i.preloadingStrategy).\u0275providers:[],{provide:Yz,multi:!0,useFactory:oDe},i?.initialNavigation?uDe(i):[],i?.bindToComponentInputs?pc(8,[Xq,{provide:vC,useExisting:Xq}]).\u0275providers:[],[{provide:EW,useFactory:vW},{provide:WM,multi:!0,useExisting:EW}]]}}static forChild(t){return{ngModule:e,providers:[{provide:_g,multi:!0,useValue:t}]}}static#e=this.\u0275fac=function(i){return new(i||e)(Me(CW,8))};static#t=this.\u0275mod=Ut({type:e});static#n=this.\u0275inj=Nt({})}return e})();function cDe(e){return"guarded"}function uDe(e){return["disabled"===e.initialNavigation?pc(3,[{provide:$M,multi:!0,useFactory:()=>{const n=Te(bs);return()=>{n.setUpLocationChangeListener()}}},{provide:Gk,useValue:2}]).\u0275providers:[],"enabledBlocking"===e.initialNavigation?pc(2,[{provide:Gk,useValue:0},{provide:$M,multi:!0,deps:[Zr],useFactory:n=>{const t=n.get(Wve,Promise.resolve());return()=>t.then(()=>new Promise(i=>{const r=n.get(bs),o=n.get(bW);pW(r,()=>{i(!0)}),n.get(EC).afterPreactivation=()=>(i(!0),o.closed?Qe(void 0):o),r.initialNavigation()}))}}]).\u0275providers:[]]}const EW=new Ie(""),fDe=[];let hDe=(()=>{class e{static#e=this.\u0275fac=function(i){return new(i||e)};static#t=this.\u0275mod=Ut({type:e});static#n=this.\u0275inj=Nt({imports:[xW.forRoot(fDe),xW]})}return e})();class ht{static equals(n,t,i){return i?this.resolveFieldData(n,i)===this.resolveFieldData(t,i):this.equalsByValue(n,t)}static equalsByValue(n,t){if(n===t)return!0;if(n&&t&&"object"==typeof n&&"object"==typeof t){var o,s,a,i=Array.isArray(n),r=Array.isArray(t);if(i&&r){if((s=n.length)!=t.length)return!1;for(o=s;0!=o--;)if(!this.equalsByValue(n[o],t[o]))return!1;return!0}if(i!=r)return!1;var l=this.isDate(n),c=this.isDate(t);if(l!=c)return!1;if(l&&c)return n.getTime()==t.getTime();var u=n instanceof RegExp,d=t instanceof RegExp;if(u!=d)return!1;if(u&&d)return n.toString()==t.toString();var f=Object.keys(n);if((s=f.length)!==Object.keys(t).length)return!1;for(o=s;0!=o--;)if(!Object.prototype.hasOwnProperty.call(t,f[o]))return!1;for(o=s;0!=o--;)if(!this.equalsByValue(n[a=f[o]],t[a]))return!1;return!0}return n!=n&&t!=t}static resolveFieldData(n,t){if(n&&t){if(this.isFunction(t))return t(n);if(-1==t.indexOf("."))return n[t];{let i=t.split("."),r=n;for(let o=0,s=i.length;o<s;++o){if(null==r)return null;r=r[i[o]]}return r}}return null}static isFunction(n){return!!(n&&n.constructor&&n.call&&n.apply)}static reorderArray(n,t,i){n&&t!==i&&(i>=n.length&&(i%=n.length,t%=n.length),n.splice(i,0,n.splice(t,1)[0]))}static insertIntoOrderedArray(n,t,i,r){if(i.length>0){let o=!1;for(let s=0;s<i.length;s++)if(this.findIndexInList(i[s],r)>t){i.splice(s,0,n),o=!0;break}o||i.push(n)}else i.push(n)}static findIndexInList(n,t){let i=-1;if(t)for(let r=0;r<t.length;r++)if(t[r]==n){i=r;break}return i}static contains(n,t){if(null!=n&&t&&t.length)for(let i of t)if(this.equals(n,i))return!0;return!1}static removeAccents(n){return n&&n.search(/[\xC0-\xFF]/g)>-1&&(n=n.replace(/[\xC0-\xC5]/g,"A").replace(/[\xC6]/g,"AE").replace(/[\xC7]/g,"C").replace(/[\xC8-\xCB]/g,"E").replace(/[\xCC-\xCF]/g,"I").replace(/[\xD0]/g,"D").replace(/[\xD1]/g,"N").replace(/[\xD2-\xD6\xD8]/g,"O").replace(/[\xD9-\xDC]/g,"U").replace(/[\xDD]/g,"Y").replace(/[\xDE]/g,"P").replace(/[\xE0-\xE5]/g,"a").replace(/[\xE6]/g,"ae").replace(/[\xE7]/g,"c").replace(/[\xE8-\xEB]/g,"e").replace(/[\xEC-\xEF]/g,"i").replace(/[\xF1]/g,"n").replace(/[\xF2-\xF6\xF8]/g,"o").replace(/[\xF9-\xFC]/g,"u").replace(/[\xFE]/g,"p").replace(/[\xFD\xFF]/g,"y")),n}static isDate(n){return"[object Date]"===Object.prototype.toString.call(n)}static isEmpty(n){return null==n||""===n||Array.isArray(n)&&0===n.length||!this.isDate(n)&&"object"==typeof n&&0===Object.keys(n).length}static isNotEmpty(n){return!this.isEmpty(n)}static compare(n,t,i,r=1){let o=-1;const s=this.isEmpty(n),a=this.isEmpty(t);return o=s&&a?0:s?r:a?-r:"string"==typeof n&&"string"==typeof t?n.localeCompare(t,i,{numeric:!0}):n<t?-1:n>t?1:0,o}static sort(n,t,i=1,r,o=1){return(1===o?i:o)*ht.compare(n,t,r,i)}static merge(n,t){if(null!=n||null!=t)return null!=n&&"object"!=typeof n||null!=t&&"object"!=typeof t?null!=n&&"string"!=typeof n||null!=t&&"string"!=typeof t?t||n:[n||"",t||""].join(" "):{...n||{},...t||{}}}static isPrintableCharacter(n=""){return this.isNotEmpty(n)&&1===n.length&&n.match(/\S| /)}static getItemValue(n,...t){return this.isFunction(n)?n(...t):n}static findLastIndex(n,t){let i=-1;if(this.isNotEmpty(n))try{i=n.findLastIndex(t)}catch{i=n.lastIndexOf([...n].reverse().find(t))}return i}static findLast(n,t){let i;if(this.isNotEmpty(n))try{i=n.findLast(t)}catch{i=[...n].reverse().find(t)}return i}}var SW=0;function Mr(e="pn_id_"){return`${e}${++SW}`}var rl=function pDe(){let e=[];const r=o=>o&&parseInt(o.style.zIndex,10)||0;return{get:r,set:(o,s,a)=>{s&&(s.style.zIndex=String(((o,s)=>{let a=e.length>0?e[e.length-1]:{key:o,value:s},l=a.value+(a.key===o?0:s)+2;return e.push({key:o,value:l}),l})(o,a)))},clear:o=>{o&&((o=>{e=e.filter(s=>s.value!==o)})(r(o)),o.style.zIndex="")},getCurrent:()=>e.length>0?e[e.length-1].value:0}}();const gDe=["*"];let er=(()=>class e{static STARTS_WITH="startsWith";static CONTAINS="contains";static NOT_CONTAINS="notContains";static ENDS_WITH="endsWith";static EQUALS="equals";static NOT_EQUALS="notEquals";static IN="in";static LESS_THAN="lt";static LESS_THAN_OR_EQUAL_TO="lte";static GREATER_THAN="gt";static GREATER_THAN_OR_EQUAL_TO="gte";static BETWEEN="between";static IS="is";static IS_NOT="isNot";static BEFORE="before";static AFTER="after";static DATE_IS="dateIs";static DATE_IS_NOT="dateIsNot";static DATE_BEFORE="dateBefore";static DATE_AFTER="dateAfter"})(),_De=(()=>{class e{filter(t,i,r,o,s){let a=[];if(t)for(let l of t)for(let c of i){let u=ht.resolveFieldData(l,c);if(this.filters[o](u,r,s)){a.push(l);break}}return a}filters={startsWith:(t,i,r)=>{if(null==i||""===i.trim())return!0;if(null==t)return!1;let o=ht.removeAccents(i.toString()).toLocaleLowerCase(r);return ht.removeAccents(t.toString()).toLocaleLowerCase(r).slice(0,o.length)===o},contains:(t,i,r)=>{if(null==i||"string"==typeof i&&""===i.trim())return!0;if(null==t)return!1;let o=ht.removeAccents(i.toString()).toLocaleLowerCase(r);return-1!==ht.removeAccents(t.toString()).toLocaleLowerCase(r).indexOf(o)},notContains:(t,i,r)=>{if(null==i||"string"==typeof i&&""===i.trim())return!0;if(null==t)return!1;let o=ht.removeAccents(i.toString()).toLocaleLowerCase(r);return-1===ht.removeAccents(t.toString()).toLocaleLowerCase(r).indexOf(o)},endsWith:(t,i,r)=>{if(null==i||""===i.trim())return!0;if(null==t)return!1;let o=ht.removeAccents(i.toString()).toLocaleLowerCase(r),s=ht.removeAccents(t.toString()).toLocaleLowerCase(r);return-1!==s.indexOf(o,s.length-o.length)},equals:(t,i,r)=>null==i||"string"==typeof i&&""===i.trim()||null!=t&&(t.getTime&&i.getTime?t.getTime()===i.getTime():ht.removeAccents(t.toString()).toLocaleLowerCase(r)==ht.removeAccents(i.toString()).toLocaleLowerCase(r)),notEquals:(t,i,r)=>!(null==i||"string"==typeof i&&""===i.trim()||null!=t&&(t.getTime&&i.getTime?t.getTime()===i.getTime():ht.removeAccents(t.toString()).toLocaleLowerCase(r)==ht.removeAccents(i.toString()).toLocaleLowerCase(r))),in:(t,i)=>{if(null==i||0===i.length)return!0;for(let r=0;r<i.length;r++)if(ht.equals(t,i[r]))return!0;return!1},between:(t,i)=>null==i||null==i[0]||null==i[1]||null!=t&&(t.getTime?i[0].getTime()<=t.getTime()&&t.getTime()<=i[1].getTime():i[0]<=t&&t<=i[1]),lt:(t,i,r)=>null==i||null!=t&&(t.getTime&&i.getTime?t.getTime()<i.getTime():t<i),lte:(t,i,r)=>null==i||null!=t&&(t.getTime&&i.getTime?t.getTime()<=i.getTime():t<=i),gt:(t,i,r)=>null==i||null!=t&&(t.getTime&&i.getTime?t.getTime()>i.getTime():t>i),gte:(t,i,r)=>null==i||null!=t&&(t.getTime&&i.getTime?t.getTime()>=i.getTime():t>=i),is:(t,i,r)=>this.filters.equals(t,i,r),isNot:(t,i,r)=>this.filters.notEquals(t,i,r),before:(t,i,r)=>this.filters.lt(t,i,r),after:(t,i,r)=>this.filters.gt(t,i,r),dateIs:(t,i)=>null==i||null!=t&&t.toDateString()===i.toDateString(),dateIsNot:(t,i)=>null==i||null!=t&&t.toDateString()!==i.toDateString(),dateBefore:(t,i)=>null==i||null!=t&&t.getTime()<i.getTime(),dateAfter:(t,i)=>null==i||null!=t&&t.getTime()>i.getTime()};register(t,i){this.filters[t]=i}static \u0275fac=function(i){return new(i||e)};static \u0275prov=Oe({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),TW=(()=>{class e{clickSource=new Eo;clickObservable=this.clickSource.asObservable();add(t){t&&this.clickSource.next(t)}static \u0275fac=function(i){return new(i||e)};static \u0275prov=Oe({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),Y_=(()=>{class e{ripple=!1;overlayOptions={};filterMatchModeOptions={text:[er.STARTS_WITH,er.CONTAINS,er.NOT_CONTAINS,er.ENDS_WITH,er.EQUALS,er.NOT_EQUALS],numeric:[er.EQUALS,er.NOT_EQUALS,er.LESS_THAN,er.LESS_THAN_OR_EQUAL_TO,er.GREATER_THAN,er.GREATER_THAN_OR_EQUAL_TO],date:[er.DATE_IS,er.DATE_IS_NOT,er.DATE_BEFORE,er.DATE_AFTER]};translation={startsWith:"Starts with",contains:"Contains",notContains:"Not contains",endsWith:"Ends with",equals:"Equals",notEquals:"Not equals",noFilter:"No Filter",lt:"Less than",lte:"Less than or equal to",gt:"Greater than",gte:"Greater than or equal to",is:"Is",isNot:"Is not",before:"Before",after:"After",dateIs:"Date is",dateIsNot:"Date is not",dateBefore:"Date is before",dateAfter:"Date is after",clear:"Clear",apply:"Apply",matchAll:"Match All",matchAny:"Match Any",addRule:"Add Rule",removeRule:"Remove Rule",accept:"Yes",reject:"No",choose:"Choose",upload:"Upload",cancel:"Cancel",pending:"Pending",fileSizeTypes:["B","KB","MB","GB","TB","PB","EB","ZB","YB"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],chooseYear:"Choose Year",chooseMonth:"Choose Month",chooseDate:"Choose Date",prevDecade:"Previous Decade",nextDecade:"Next Decade",prevYear:"Previous Year",nextYear:"Next Year",prevMonth:"Previous Month",nextMonth:"Next Month",prevHour:"Previous Hour",nextHour:"Next Hour",prevMinute:"Previous Minute",nextMinute:"Next Minute",prevSecond:"Previous Second",nextSecond:"Next Second",am:"am",pm:"pm",dateFormat:"mm/dd/yy",firstDayOfWeek:0,today:"Today",weekHeader:"Wk",weak:"Weak",medium:"Medium",strong:"Strong",passwordPrompt:"Enter a password",emptyMessage:"No results found",searchMessage:"{0} results are available",selectionMessage:"{0} items selected",emptySelectionMessage:"No selected item",emptySearchMessage:"No results found",emptyFilterMessage:"No results found",aria:{trueLabel:"True",falseLabel:"False",nullLabel:"Not Selected",star:"1 star",stars:"{star} stars",selectAll:"All items selected",unselectAll:"All items unselected",close:"Close",previous:"Previous",next:"Next",navigation:"Navigation",scrollTop:"Scroll Top",moveTop:"Move Top",moveUp:"Move Up",moveDown:"Move Down",moveBottom:"Move Bottom",moveToTarget:"Move to Target",moveToSource:"Move to Source",moveAllToTarget:"Move All to Target",moveAllToSource:"Move All to Source",pageLabel:"{page}",firstPageLabel:"First Page",lastPageLabel:"Last Page",nextPageLabel:"Next Page",prevPageLabel:"Previous Page",rowsPerPageLabel:"Rows per page",previousPageLabel:"Previous Page",jumpToPageDropdownLabel:"Jump to Page Dropdown",jumpToPageInputLabel:"Jump to Page Input",selectRow:"Row Selected",unselectRow:"Row Unselected",expandRow:"Row Expanded",collapseRow:"Row Collapsed",showFilterMenu:"Show Filter Menu",hideFilterMenu:"Hide Filter Menu",filterOperator:"Filter Operator",filterConstraint:"Filter Constraint",editRow:"Row Edit",saveEdit:"Save Edit",cancelEdit:"Cancel Edit",listView:"List View",gridView:"Grid View",slide:"Slide",slideNumber:"{slideNumber}",zoomImage:"Zoom Image",zoomIn:"Zoom In",zoomOut:"Zoom Out",rotateRight:"Rotate Right",rotateLeft:"Rotate Left"}};zIndex={modal:1100,overlay:1e3,menu:1e3,tooltip:1100};translationSource=new Eo;translationObserver=this.translationSource.asObservable();getTranslation(t){return this.translation[t]}setTranslation(t){this.translation={...this.translation,...t},this.translationSource.next(this.translation)}static \u0275fac=function(i){return new(i||e)};static \u0275prov=Oe({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),yDe=(()=>{class e{static \u0275fac=function(i){return new(i||e)};static \u0275cmp=it({type:e,selectors:[["p-footer"]],ngContentSelectors:gDe,decls:1,vars:0,template:function(i,r){1&i&&(Xa(),Jr(0))},encapsulation:2})}return e})(),Bo=(()=>{class e{template;type;name;constructor(t){this.template=t}getType(){return this.name}static \u0275fac=function(i){return new(i||e)(G(Zs))};static \u0275dir=je({type:e,selectors:[["","pTemplate",""]],inputs:{type:"type",name:["pTemplate","name"]}})}return e})(),kn=(()=>{class e{static \u0275fac=function(i){return new(i||e)};static \u0275mod=Ut({type:e});static \u0275inj=Nt({imports:[ti]})}return e})(),ws=(()=>class e{static STARTS_WITH="startsWith";static CONTAINS="contains";static NOT_CONTAINS="notContains";static ENDS_WITH="endsWith";static EQUALS="equals";static NOT_EQUALS="notEquals";static NO_FILTER="noFilter";static LT="lt";static LTE="lte";static GT="gt";static GTE="gte";static IS="is";static IS_NOT="isNot";static BEFORE="before";static AFTER="after";static CLEAR="clear";static APPLY="apply";static MATCH_ALL="matchAll";static MATCH_ANY="matchAny";static ADD_RULE="addRule";static REMOVE_RULE="removeRule";static ACCEPT="accept";static REJECT="reject";static CHOOSE="choose";static UPLOAD="upload";static CANCEL="cancel";static PENDING="pending";static FILE_SIZE_TYPES="fileSizeTypes";static DAY_NAMES="dayNames";static DAY_NAMES_SHORT="dayNamesShort";static DAY_NAMES_MIN="dayNamesMin";static MONTH_NAMES="monthNames";static MONTH_NAMES_SHORT="monthNamesShort";static FIRST_DAY_OF_WEEK="firstDayOfWeek";static TODAY="today";static WEEK_HEADER="weekHeader";static WEAK="weak";static MEDIUM="medium";static STRONG="strong";static PASSWORD_PROMPT="passwordPrompt";static EMPTY_MESSAGE="emptyMessage";static EMPTY_FILTER_MESSAGE="emptyFilterMessage"})();const vDe=["*"];let En=(()=>{class e{label;spin=!1;styleClass;role;ariaLabel;ariaHidden;ngOnInit(){this.getAttributes()}getAttributes(){const t=ht.isEmpty(this.label);this.role=t?void 0:"img",this.ariaLabel=t?void 0:this.label,this.ariaHidden=t}getClassNames(){return`p-icon ${this.styleClass?this.styleClass+" ":""}${this.spin?"p-icon-spin":""}`}static \u0275fac=function(i){return new(i||e)};static \u0275cmp=it({type:e,selectors:[["ng-component"]],hostAttrs:[1,"p-element","p-icon-wrapper"],inputs:{label:"label",spin:"spin",styleClass:"styleClass"},standalone:!0,features:[cn],ngContentSelectors:vDe,decls:1,vars:0,template:function(i,r){1&i&&(Xa(),Jr(0))},encapsulation:2,changeDetection:0})}return e})(),TC=(()=>{class e extends En{static \u0275fac=function(){let t;return function(r){return(t||(t=dt(e)))(r||e)}}();static \u0275cmp=it({type:e,selectors:[["MinusIcon"]],standalone:!0,features:[qe,cn],decls:2,vars:5,consts:[["width","14","height","14","viewBox","0 0 14 14","fill","none","xmlns","http://www.w3.org/2000/svg"],["d","M13.2222 7.77778H0.777778C0.571498 7.77778 0.373667 7.69584 0.227806 7.54998C0.0819442 7.40412 0 7.20629 0 7.00001C0 6.79373 0.0819442 6.5959 0.227806 6.45003C0.373667 6.30417 0.571498 6.22223 0.777778 6.22223H13.2222C13.4285 6.22223 13.6263 6.30417 13.7722 6.45003C13.9181 6.5959 14 6.79373 14 7.00001C14 7.20629 13.9181 7.40412 13.7722 7.54998C13.6263 7.69584 13.4285 7.77778 13.2222 7.77778Z","fill","currentColor"]],template:function(i,r){1&i&&(yn(),q(0,"svg",0),_e(1,"path",1),W()),2&i&&(Xe(r.getClassNames()),ve("aria-label",r.ariaLabel)("aria-hidden",r.ariaHidden)("role",r.role))},dependencies:[ti],encapsulation:2})}return e})(),DC=(()=>{class e extends En{pathId;ngOnInit(){this.pathId="url(#"+Mr()+")"}static \u0275fac=function(){let t;return function(r){return(t||(t=dt(e)))(r||e)}}();static \u0275cmp=it({type:e,selectors:[["PlusIcon"]],standalone:!0,features:[qe,cn],decls:6,vars:7,consts:[["width","14","height","14","viewBox","0 0 14 14","fill","none","xmlns","http://www.w3.org/2000/svg"],["d","M7.67742 6.32258V0.677419C7.67742 0.497757 7.60605 0.325452 7.47901 0.198411C7.35197 0.0713707 7.17966 0 7 0C6.82034 0 6.64803 0.0713707 6.52099 0.198411C6.39395 0.325452 6.32258 0.497757 6.32258 0.677419V6.32258H0.677419C0.497757 6.32258 0.325452 6.39395 0.198411 6.52099C0.0713707 6.64803 0 6.82034 0 7C0 7.17966 0.0713707 7.35197 0.198411 7.47901C0.325452 7.60605 0.497757 7.67742 0.677419 7.67742H6.32258V13.3226C6.32492 13.5015 6.39704 13.6725 6.52358 13.799C6.65012 13.9255 6.82106 13.9977 7 14C7.17966 14 7.35197 13.9286 7.47901 13.8016C7.60605 13.6745 7.67742 13.5022 7.67742 13.3226V7.67742H13.3226C13.5022 7.67742 13.6745 7.60605 13.8016 7.47901C13.9286 7.35197 14 7.17966 14 7C13.9977 6.82106 13.9255 6.65012 13.799 6.52358C13.6725 6.39704 13.5015 6.32492 13.3226 6.32258H7.67742Z","fill","currentColor"],[3,"id"],["width","14","height","14","fill","white"]],template:function(i,r){1&i&&(yn(),q(0,"svg",0)(1,"g"),_e(2,"path",1),W(),q(3,"defs")(4,"clipPath",2),_e(5,"rect",3),W()()()),2&i&&(Xe(r.getClassNames()),ve("aria-label",r.ariaLabel)("aria-hidden",r.ariaHidden)("role",r.role),$(1),ve("clip-path",r.pathId),$(3),k("id",r.pathId))},encapsulation:2})}return e})(),Y=(()=>{class e{static zindex=1e3;static calculatedScrollbarWidth=null;static calculatedScrollbarHeight=null;static browser;static addClass(t,i){t&&i&&(t.classList?t.classList.add(i):t.className+=" "+i)}static addMultipleClasses(t,i){if(t&&i)if(t.classList){let r=i.trim().split(" ");for(let o=0;o<r.length;o++)t.classList.add(r[o])}else{let r=i.split(" ");for(let o=0;o<r.length;o++)t.className+=" "+r[o]}}static removeClass(t,i){t&&i&&(t.classList?t.classList.remove(i):t.className=t.className.replace(new RegExp("(^|\\b)"+i.split(" ").join("|")+"(\\b|$)","gi")," "))}static hasClass(t,i){return!(!t||!i)&&(t.classList?t.classList.contains(i):new RegExp("(^| )"+i+"( |$)","gi").test(t.className))}static siblings(t){return Array.prototype.filter.call(t.parentNode.children,function(i){return i!==t})}static find(t,i){return Array.from(t.querySelectorAll(i))}static findSingle(t,i){return this.isElement(t)?t.querySelector(i):null}static index(t){let i=t.parentNode.childNodes,r=0;for(var o=0;o<i.length;o++){if(i[o]==t)return r;1==i[o].nodeType&&r++}return-1}static indexWithinGroup(t,i){let r=t.parentNode?t.parentNode.childNodes:[],o=0;for(var s=0;s<r.length;s++){if(r[s]==t)return o;r[s].attributes&&r[s].attributes[i]&&1==r[s].nodeType&&o++}return-1}static appendOverlay(t,i,r="self"){"self"!==r&&t&&i&&this.appendChild(t,i)}static alignOverlay(t,i,r="self",o=!0){t&&i&&(o&&(t.style.minWidth=`${e.getOuterWidth(i)}px`),"self"===r?this.relativePosition(t,i):this.absolutePosition(t,i))}static relativePosition(t,i){const r=_=>{if(_)return"relative"===getComputedStyle(_).getPropertyValue("position")?_:r(_.parentElement)},o=t.offsetParent?{width:t.offsetWidth,height:t.offsetHeight}:this.getHiddenElementDimensions(t),s=i.offsetHeight,a=i.getBoundingClientRect(),l=this.getWindowScrollTop(),c=this.getWindowScrollLeft(),u=this.getViewport(),f=r(t)?.getBoundingClientRect()||{top:-1*l,left:-1*c};let h,p;a.top+s+o.height>u.height?(h=a.top-f.top-o.height,t.style.transformOrigin="bottom",a.top+h<0&&(h=-1*a.top)):(h=s+a.top-f.top,t.style.transformOrigin="top");const g=a.left+o.width-u.width;p=o.width>u.width?-1*(a.left-f.left):g>0?a.left-f.left-g:a.left-f.left,t.style.top=h+"px",t.style.left=p+"px"}static absolutePosition(t,i){const r=t.offsetParent?{width:t.offsetWidth,height:t.offsetHeight}:this.getHiddenElementDimensions(t),o=r.height,s=r.width,a=i.offsetHeight,l=i.offsetWidth,c=i.getBoundingClientRect(),u=this.getWindowScrollTop(),d=this.getWindowScrollLeft(),f=this.getViewport();let h,p;c.top+a+o>f.height?(h=c.top+u-o,t.style.transformOrigin="bottom",h<0&&(h=u)):(h=a+c.top+u,t.style.transformOrigin="top"),p=c.left+s>f.width?Math.max(0,c.left+d+l-s):c.left+d,t.style.top=h+"px",t.style.left=p+"px"}static getParents(t,i=[]){return null===t.parentNode?i:this.getParents(t.parentNode,i.concat([t.parentNode]))}static getScrollableParents(t){let i=[];if(t){let r=this.getParents(t);const o=/(auto|scroll)/,s=a=>{let l=window.getComputedStyle(a,null);return o.test(l.getPropertyValue("overflow"))||o.test(l.getPropertyValue("overflowX"))||o.test(l.getPropertyValue("overflowY"))};for(let a of r){let l=1===a.nodeType&&a.dataset.scrollselectors;if(l){let c=l.split(",");for(let u of c){let d=this.findSingle(a,u);d&&s(d)&&i.push(d)}}9!==a.nodeType&&s(a)&&i.push(a)}}return i}static getHiddenElementOuterHeight(t){t.style.visibility="hidden",t.style.display="block";let i=t.offsetHeight;return t.style.display="none",t.style.visibility="visible",i}static getHiddenElementOuterWidth(t){t.style.visibility="hidden",t.style.display="block";let i=t.offsetWidth;return t.style.display="none",t.style.visibility="visible",i}static getHiddenElementDimensions(t){let i={};return t.style.visibility="hidden",t.style.display="block",i.width=t.offsetWidth,i.height=t.offsetHeight,t.style.display="none",t.style.visibility="visible",i}static scrollInView(t,i){let r=getComputedStyle(t).getPropertyValue("borderTopWidth"),o=r?parseFloat(r):0,s=getComputedStyle(t).getPropertyValue("paddingTop"),a=s?parseFloat(s):0,l=t.getBoundingClientRect(),u=i.getBoundingClientRect().top+document.body.scrollTop-(l.top+document.body.scrollTop)-o-a,d=t.scrollTop,f=t.clientHeight,h=this.getOuterHeight(i);u<0?t.scrollTop=d+u:u+h>f&&(t.scrollTop=d+u-f+h)}static fadeIn(t,i){t.style.opacity=0;let r=+new Date,o=0,s=function(){o=+t.style.opacity.replace(",",".")+((new Date).getTime()-r)/i,t.style.opacity=o,r=+new Date,+o<1&&(window.requestAnimationFrame&&requestAnimationFrame(s)||setTimeout(s,16))};s()}static fadeOut(t,i){var r=1,a=50/i;let l=setInterval(()=>{(r-=a)<=0&&(r=0,clearInterval(l)),t.style.opacity=r},50)}static getWindowScrollTop(){let t=document.documentElement;return(window.pageYOffset||t.scrollTop)-(t.clientTop||0)}static getWindowScrollLeft(){let t=document.documentElement;return(window.pageXOffset||t.scrollLeft)-(t.clientLeft||0)}static matches(t,i){var r=Element.prototype;return(r.matches||r.webkitMatchesSelector||r.mozMatchesSelector||r.msMatchesSelector||function(s){return-1!==[].indexOf.call(document.querySelectorAll(s),this)}).call(t,i)}static getOuterWidth(t,i){let r=t.offsetWidth;if(i){let o=getComputedStyle(t);r+=parseFloat(o.marginLeft)+parseFloat(o.marginRight)}return r}static getHorizontalPadding(t){let i=getComputedStyle(t);return parseFloat(i.paddingLeft)+parseFloat(i.paddingRight)}static getHorizontalMargin(t){let i=getComputedStyle(t);return parseFloat(i.marginLeft)+parseFloat(i.marginRight)}static innerWidth(t){let i=t.offsetWidth,r=getComputedStyle(t);return i+=parseFloat(r.paddingLeft)+parseFloat(r.paddingRight),i}static width(t){let i=t.offsetWidth,r=getComputedStyle(t);return i-=parseFloat(r.paddingLeft)+parseFloat(r.paddingRight),i}static getInnerHeight(t){let i=t.offsetHeight,r=getComputedStyle(t);return i+=parseFloat(r.paddingTop)+parseFloat(r.paddingBottom),i}static getOuterHeight(t,i){let r=t.offsetHeight;if(i){let o=getComputedStyle(t);r+=parseFloat(o.marginTop)+parseFloat(o.marginBottom)}return r}static getHeight(t){let i=t.offsetHeight,r=getComputedStyle(t);return i-=parseFloat(r.paddingTop)+parseFloat(r.paddingBottom)+parseFloat(r.borderTopWidth)+parseFloat(r.borderBottomWidth),i}static getWidth(t){let i=t.offsetWidth,r=getComputedStyle(t);return i-=parseFloat(r.paddingLeft)+parseFloat(r.paddingRight)+parseFloat(r.borderLeftWidth)+parseFloat(r.borderRightWidth),i}static getViewport(){let t=window,i=document,r=i.documentElement,o=i.getElementsByTagName("body")[0];return{width:t.innerWidth||r.clientWidth||o.clientWidth,height:t.innerHeight||r.clientHeight||o.clientHeight}}static getOffset(t){var i=t.getBoundingClientRect();return{top:i.top+(window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0),left:i.left+(window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft||0)}}static replaceElementWith(t,i){let r=t.parentNode;if(!r)throw"Can't replace element";return r.replaceChild(i,t)}static getUserAgent(){if(navigator&&this.isClient())return navigator.userAgent}static isIE(){var t=window.navigator.userAgent;return t.indexOf("MSIE ")>0||(t.indexOf("Trident/")>0?(t.indexOf("rv:"),!0):t.indexOf("Edge/")>0)}static isIOS(){return/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream}static isAndroid(){return/(android)/i.test(navigator.userAgent)}static isTouchDevice(){return"ontouchstart"in window||navigator.maxTouchPoints>0}static appendChild(t,i){if(this.isElement(i))i.appendChild(t);else{if(!(i&&i.el&&i.el.nativeElement))throw"Cannot append "+i+" to "+t;i.el.nativeElement.appendChild(t)}}static removeChild(t,i){if(this.isElement(i))i.removeChild(t);else{if(!i.el||!i.el.nativeElement)throw"Cannot remove "+t+" from "+i;i.el.nativeElement.removeChild(t)}}static removeElement(t){"remove"in Element.prototype?t.remove():t.parentNode.removeChild(t)}static isElement(t){return"object"==typeof HTMLElement?t instanceof HTMLElement:t&&"object"==typeof t&&null!==t&&1===t.nodeType&&"string"==typeof t.nodeName}static calculateScrollbarWidth(t){if(t){let i=getComputedStyle(t);return t.offsetWidth-t.clientWidth-parseFloat(i.borderLeftWidth)-parseFloat(i.borderRightWidth)}{if(null!==this.calculatedScrollbarWidth)return this.calculatedScrollbarWidth;let i=document.createElement("div");i.className="p-scrollbar-measure",document.body.appendChild(i);let r=i.offsetWidth-i.clientWidth;return document.body.removeChild(i),this.calculatedScrollbarWidth=r,r}}static calculateScrollbarHeight(){if(null!==this.calculatedScrollbarHeight)return this.calculatedScrollbarHeight;let t=document.createElement("div");t.className="p-scrollbar-measure",document.body.appendChild(t);let i=t.offsetHeight-t.clientHeight;return document.body.removeChild(t),this.calculatedScrollbarWidth=i,i}static invokeElementMethod(t,i,r){t[i].apply(t,r)}static clearSelection(){if(window.getSelection)window.getSelection().empty?window.getSelection().empty():window.getSelection().removeAllRanges&&window.getSelection().rangeCount>0&&window.getSelection().getRangeAt(0).getClientRects().length>0&&window.getSelection().removeAllRanges();else if(document.selection&&document.selection.empty)try{document.selection.empty()}catch{}}static getBrowser(){if(!this.browser){let t=this.resolveUserAgent();this.browser={},t.browser&&(this.browser[t.browser]=!0,this.browser.version=t.version),this.browser.chrome?this.browser.webkit=!0:this.browser.webkit&&(this.browser.safari=!0)}return this.browser}static resolveUserAgent(){let t=navigator.userAgent.toLowerCase(),i=/(chrome)[ \/]([\w.]+)/.exec(t)||/(webkit)[ \/]([\w.]+)/.exec(t)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(t)||/(msie) ([\w.]+)/.exec(t)||t.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(t)||[];return{browser:i[1]||"",version:i[2]||"0"}}static isInteger(t){return Number.isInteger?Number.isInteger(t):"number"==typeof t&&isFinite(t)&&Math.floor(t)===t}static isHidden(t){return!t||null===t.offsetParent}static isVisible(t){return t&&null!=t.offsetParent}static isExist(t){return null!==t&&typeof t<"u"&&t.nodeName&&t.parentNode}static focus(t,i){t&&document.activeElement!==t&&t.focus(i)}static getFocusableElements(t){let i=e.find(t,'button:not([tabindex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden]),\n                [href]:not([tabindex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden]),\n                input:not([tabindex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden]), select:not([tabindex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden]),\n                textarea:not([tabindex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden]), [tabIndex]:not([tabIndex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden]),\n                [contenteditable]:not([tabIndex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden]):not(.p-disabled)'),r=[];for(let o of i)(o.offsetWidth||o.offsetHeight||o.getClientRects().length)&&r.push(o);return r}static getNextFocusableElement(t,i=!1){const r=e.getFocusableElements(t);let o=0;if(r&&r.length>0){const s=r.indexOf(r[0].ownerDocument.activeElement);i?o=-1==s||0===s?r.length-1:s-1:-1!=s&&s!==r.length-1&&(o=s+1)}return r[o]}static generateZIndex(){return this.zindex=this.zindex||999,++this.zindex}static getSelection(){return window.getSelection?window.getSelection().toString():document.getSelection?document.getSelection().toString():document.selection?document.selection.createRange().text:null}static getTargetElement(t,i){if(!t)return null;switch(t){case"document":return document;case"window":return window;case"@next":return i?.nextElementSibling;case"@prev":return i?.previousElementSibling;case"@parent":return i?.parentElement;case"@grandparent":return i?.parentElement.parentElement;default:const r=typeof t;if("string"===r)return document.querySelector(t);if("object"===r&&t.hasOwnProperty("nativeElement"))return this.isExist(t.nativeElement)?t.nativeElement:void 0;const s=(a=t)&&a.constructor&&a.call&&a.apply?t():t;return s&&9===s.nodeType||this.isExist(s)?s:null}var a}static isClient(){return!!(typeof window<"u"&&window.document&&window.document.createElement)}static getAttribute(t,i){if(t){const r=t.getAttribute(i);return isNaN(r)?"true"===r||"false"===r?"true"===r:r:+r}}}return e})();class Kk{element;listener;scrollableParents;constructor(n,t=(()=>{})){this.element=n,this.listener=t}bindScrollListener(){this.scrollableParents=Y.getScrollableParents(this.element);for(let n=0;n<this.scrollableParents.length;n++)this.scrollableParents[n].addEventListener("scroll",this.listener)}unbindScrollListener(){if(this.scrollableParents)for(let n=0;n<this.scrollableParents.length;n++)this.scrollableParents[n].removeEventListener("scroll",this.listener)}destroy(){this.unbindScrollListener(),this.element=null,this.listener=null,this.scrollableParents=null}}let yg=(()=>{class e{document;platformId;renderer;el;zone;config;constructor(t,i,r,o,s,a){this.document=t,this.platformId=i,this.renderer=r,this.el=o,this.zone=s,this.config=a}animationListener;mouseDownListener;timeout;ngAfterViewInit(){mf(this.platformId)&&this.config&&this.config.ripple&&this.zone.runOutsideAngular(()=>{this.create(),this.mouseDownListener=this.renderer.listen(this.el.nativeElement,"mousedown",this.onMouseDown.bind(this))})}onMouseDown(t){let i=this.getInk();if(!i||"none"===this.document.defaultView?.getComputedStyle(i,null).display)return;if(Y.removeClass(i,"p-ink-active"),!Y.getHeight(i)&&!Y.getWidth(i)){let a=Math.max(Y.getOuterWidth(this.el.nativeElement),Y.getOuterHeight(this.el.nativeElement));i.style.height=a+"px",i.style.width=a+"px"}let r=Y.getOffset(this.el.nativeElement),o=t.pageX-r.left+this.document.body.scrollTop-Y.getWidth(i)/2,s=t.pageY-r.top+this.document.body.scrollLeft-Y.getHeight(i)/2;this.renderer.setStyle(i,"top",s+"px"),this.renderer.setStyle(i,"left",o+"px"),Y.addClass(i,"p-ink-active"),this.timeout=setTimeout(()=>{let a=this.getInk();a&&Y.removeClass(a,"p-ink-active")},401)}getInk(){const t=this.el.nativeElement.children;for(let i=0;i<t.length;i++)if("string"==typeof t[i].className&&-1!==t[i].className.indexOf("p-ink"))return t[i];return null}resetInk(){let t=this.getInk();t&&Y.removeClass(t,"p-ink-active")}onAnimationEnd(t){this.timeout&&clearTimeout(this.timeout),Y.removeClass(t.currentTarget,"p-ink-active")}create(){let t=this.renderer.createElement("span");this.renderer.addClass(t,"p-ink"),this.renderer.appendChild(this.el.nativeElement,t),this.renderer.setAttribute(t,"aria-hidden","true"),this.renderer.setAttribute(t,"role","presentation"),this.animationListener||(this.animationListener=this.renderer.listen(t,"animationend",this.onAnimationEnd.bind(this)))}remove(){let t=this.getInk();t&&(this.mouseDownListener&&this.mouseDownListener(),this.animationListener&&this.animationListener(),this.mouseDownListener=null,this.animationListener=null,Y.removeElement(t))}ngOnDestroy(){this.config&&this.config.ripple&&this.remove()}static \u0275fac=function(i){return new(i||e)(G(qn),G(fs),G(Ki),G(pn),G(At),G(Y_,8))};static \u0275dir=je({type:e,selectors:[["","pRipple",""]],hostAttrs:[1,"p-ripple","p-element"]})}return e})(),Su=(()=>{class e{static \u0275fac=function(i){return new(i||e)};static \u0275mod=Ut({type:e});static \u0275inj=Nt({imports:[ti]})}return e})();function bDe(e,n){if(1&e&&(q(0,"span",10),pt(1),W()),2&e){const t=L(2);ve("id",t.id+"_header"),$(1),Jn(t.header)}}function wDe(e,n){1&e&&wt(0)}function CDe(e,n){}function xDe(e,n){1&e&&B(0,CDe,0,0,"ng-template")}function EDe(e,n){if(1&e&&_e(0,"span",16),2&e){const t=L(5);Xe(t.expandIcon),k("ngClass",t.iconClass)}}function SDe(e,n){1&e&&_e(0,"MinusIcon",17),2&e&&k("styleClass",L(5).iconClass)}function TDe(e,n){if(1&e&&(Ke(0),B(1,EDe,1,3,"span",14),B(2,SDe,1,1,"MinusIcon",15),Ye()),2&e){const t=L(4);$(1),k("ngIf",t.expandIcon),$(1),k("ngIf",!t.expandIcon)}}function DDe(e,n){if(1&e&&_e(0,"span",16),2&e){const t=L(5);Xe(t.collapseIcon),k("ngClass",t.iconClass)}}function IDe(e,n){1&e&&_e(0,"PlusIcon",17),2&e&&k("styleClass",L(5).iconClass)}function MDe(e,n){if(1&e&&(Ke(0),B(1,DDe,1,3,"span",14),B(2,IDe,1,1,"PlusIcon",15),Ye()),2&e){const t=L(4);$(1),k("ngIf",t.collapseIcon),$(1),k("ngIf",!t.collapseIcon)}}function ADe(e,n){if(1&e&&(Ke(0),B(1,TDe,3,2,"ng-container",12),B(2,MDe,3,2,"ng-container",12),Ye()),2&e){const t=L(3);$(1),k("ngIf",!t.collapsed),$(1),k("ngIf",t.collapsed)}}function kDe(e,n){}function ODe(e,n){1&e&&B(0,kDe,0,0,"ng-template")}const RDe=function(e){return{$implicit:e}};function FDe(e,n){if(1&e){const t=ft();q(0,"button",11),we("click",function(r){return J(t),ee(L(2).onIconClick(r))})("keydown",function(r){return J(t),ee(L(2).onKeyDown(r))}),B(1,ADe,3,2,"ng-container",12),B(2,ODe,1,0,null,13),W()}if(2&e){const t=L(2);ve("id",t.id+"_header")("aria-label",t.buttonAriaLabel)("aria-controls",t.id+"_content")("aria-expanded",!t.collapsed),$(1),k("ngIf",!t.headerIconTemplate),$(1),k("ngTemplateOutlet",t.headerIconTemplate)("ngTemplateOutletContext",_t(7,RDe,t.collapsed))}}const NDe=function(e,n,t){return{"p-panel-icons-start":e,"p-panel-icons-end":n,"p-panel-icons-center":t}};function PDe(e,n){if(1&e){const t=ft();q(0,"div",6),we("click",function(r){return J(t),ee(L().onHeaderClick(r))}),B(1,bDe,2,2,"span",7),Jr(2,1),B(3,wDe,1,0,"ng-container",4),q(4,"div",8),B(5,xDe,1,0,null,4),B(6,FDe,3,9,"button",9),W()()}if(2&e){const t=L();ve("id",t.id+"-titlebar"),$(1),k("ngIf",t.header),$(2),k("ngTemplateOutlet",t.headerTemplate),$(1),k("ngClass",hu(6,NDe,"start"===t.iconPos,"end"===t.iconPos,"center"===t.iconPos)),$(1),k("ngTemplateOutlet",t.iconTemplate),$(1),k("ngIf",t.toggleable)}}function LDe(e,n){1&e&&wt(0)}function $De(e,n){1&e&&wt(0)}function BDe(e,n){if(1&e&&(q(0,"div",18),Jr(1,2),B(2,$De,1,0,"ng-container",4),W()),2&e){const t=L();$(2),k("ngTemplateOutlet",t.footerTemplate)}}const VDe=["*",[["p-header"]],[["p-footer"]]],zDe=function(e,n){return{"p-panel p-component":!0,"p-panel-toggleable":e,"p-panel-expanded":n}},UDe=function(e){return{transitionParams:e,height:"0",opacity:"0"}},HDe=function(e){return{value:"hidden",params:e}},jDe=function(e){return{transitionParams:e,height:"*",opacity:"1"}},qDe=function(e){return{value:"visible",params:e}},WDe=["*","p-header","p-footer"];let GDe=(()=>{class e{el;toggleable;header;collapsed;style;styleClass;iconPos="end";expandIcon;collapseIcon;showHeader=!0;toggler="icon";transitionOptions="400ms cubic-bezier(0.86, 0, 0.07, 1)";collapsedChange=new De;onBeforeToggle=new De;onAfterToggle=new De;footerFacet;templates;iconTemplate;animating;headerTemplate;contentTemplate;footerTemplate;headerIconTemplate;get id(){return Mr()}get buttonAriaLabel(){return this.header}constructor(t){this.el=t}ngAfterContentInit(){this.templates.forEach(t=>{switch(t.getType()){case"header":this.headerTemplate=t.template;break;case"content":default:this.contentTemplate=t.template;break;case"footer":this.footerTemplate=t.template;break;case"icons":this.iconTemplate=t.template;break;case"headericons":this.headerIconTemplate=t.template}})}onHeaderClick(t){"header"===this.toggler&&this.toggle(t)}onIconClick(t){"icon"===this.toggler&&this.toggle(t)}toggle(t){if(this.animating)return!1;this.animating=!0,this.onBeforeToggle.emit({originalEvent:t,collapsed:this.collapsed}),this.toggleable&&(this.collapsed?this.expand():this.collapse()),t.preventDefault()}expand(){this.collapsed=!1,this.collapsedChange.emit(this.collapsed)}collapse(){this.collapsed=!0,this.collapsedChange.emit(this.collapsed)}getBlockableElement(){return this.el.nativeElement.children[0]}onKeyDown(t){("Enter"===t.code||"Space"===t.code)&&(this.toggle(t),t.preventDefault())}onToggleDone(t){this.animating=!1,this.onAfterToggle.emit({originalEvent:t,collapsed:this.collapsed})}static \u0275fac=function(i){return new(i||e)(G(pn))};static \u0275cmp=it({type:e,selectors:[["p-panel"]],contentQueries:function(i,r,o){if(1&i&&(Er(o,yDe,5),Er(o,Bo,4)),2&i){let s;Ct(s=xt())&&(r.footerFacet=s.first),Ct(s=xt())&&(r.templates=s)}},hostAttrs:[1,"p-element"],inputs:{toggleable:"toggleable",header:"header",collapsed:"collapsed",style:"style",styleClass:"styleClass",iconPos:"iconPos",expandIcon:"expandIcon",collapseIcon:"collapseIcon",showHeader:"showHeader",toggler:"toggler",transitionOptions:"transitionOptions"},outputs:{collapsedChange:"collapsedChange",onBeforeToggle:"onBeforeToggle",onAfterToggle:"onAfterToggle"},ngContentSelectors:WDe,decls:7,vars:24,consts:[[3,"ngClass","ngStyle"],["class","p-panel-header",3,"click",4,"ngIf"],["role","region",1,"p-toggleable-content",3,"id"],[1,"p-panel-content"],[4,"ngTemplateOutlet"],["class","p-panel-footer",4,"ngIf"],[1,"p-panel-header",3,"click"],["class","p-panel-title",4,"ngIf"],[1,"p-panel-icons",3,"ngClass"],["pRipple","","type","button","role","button","class","p-panel-header-icon p-panel-toggler p-link",3,"click","keydown",4,"ngIf"],[1,"p-panel-title"],["pRipple","","type","button","role","button",1,"p-panel-header-icon","p-panel-toggler","p-link",3,"click","keydown"],[4,"ngIf"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[3,"class","ngClass",4,"ngIf"],[3,"styleClass",4,"ngIf"],[3,"ngClass"],[3,"styleClass"],[1,"p-panel-footer"]],template:function(i,r){1&i&&(Xa(VDe),q(0,"div",0),B(1,PDe,7,10,"div",1),q(2,"div",2),we("@panelContent.done",function(s){return r.onToggleDone(s)}),q(3,"div",3),Jr(4),B(5,LDe,1,0,"ng-container",4),W(),B(6,BDe,3,1,"div",5),W()()),2&i&&(Xe(r.styleClass),k("ngClass",jn(13,zDe,r.toggleable,!r.collapsed&&r.toggleable))("ngStyle",r.style),ve("id",r.id)("data-pc-name","panel"),$(1),k("ngIf",r.showHeader),$(1),k("id",r.id+"_content")("@panelContent",r.collapsed?_t(18,HDe,_t(16,UDe,r.animating?r.transitionOptions:"0ms")):_t(22,qDe,_t(20,jDe,r.animating?r.transitionOptions:"0ms"))),ve("aria-labelledby",r.id+"_header")("aria-hidden",r.collapsed),$(3),k("ngTemplateOutlet",r.contentTemplate),$(1),k("ngIf",r.footerFacet||r.footerTemplate))},dependencies:function(){return[_s,No,Po,ys,yg,DC,TC]},styles:["@layer primeng{.p-panel-header{display:flex;align-items:center}.p-panel-title{line-height:1;order:1}.p-panel-header-icon{display:inline-flex;justify-content:center;align-items:center;cursor:pointer;text-decoration:none;overflow:hidden;position:relative}.p-panel-toggleable.p-panel-expanded>.p-toggleable-content:not(.ng-animating){overflow:visible}.p-panel-toggleable .p-toggleable-content{overflow:hidden}}\n"],encapsulation:2,data:{animation:[Rw("panelContent",[tg("hidden",Dr({height:"0"})),tg("void",Dr({height:"{{height}}"}),{params:{height:"0"}}),tg("visible",Dr({height:"*"})),na("visible <=> hidden",[ta("{{transitionParams}}")]),na("void => hidden",ta("{{transitionParams}}")),na("void => visible",ta("{{transitionParams}}"))])]},changeDetection:0})}return e})(),DW=(()=>{class e{static \u0275fac=function(i){return new(i||e)};static \u0275mod=Ut({type:e});static \u0275inj=Nt({imports:[ti,kn,Su,DC,TC,kn]})}return e})(),IC=(()=>{class e extends En{static \u0275fac=function(){let t;return function(r){return(t||(t=dt(e)))(r||e)}}();static \u0275cmp=it({type:e,selectors:[["ChevronLeftIcon"]],standalone:!0,features:[qe,cn],decls:2,vars:5,consts:[["width","14","height","14","viewBox","0 0 14 14","fill","none","xmlns","http://www.w3.org/2000/svg"],["d","M9.61296 13C9.50997 13.0005 9.40792 12.9804 9.3128 12.9409C9.21767 12.9014 9.13139 12.8433 9.05902 12.7701L3.83313 7.54416C3.68634 7.39718 3.60388 7.19795 3.60388 6.99022C3.60388 6.78249 3.68634 6.58325 3.83313 6.43628L9.05902 1.21039C9.20762 1.07192 9.40416 0.996539 9.60724 1.00012C9.81032 1.00371 10.0041 1.08597 10.1477 1.22959C10.2913 1.37322 10.3736 1.56698 10.3772 1.77005C10.3808 1.97313 10.3054 2.16968 10.1669 2.31827L5.49496 6.99022L10.1669 11.6622C10.3137 11.8091 10.3962 12.0084 10.3962 12.2161C10.3962 12.4238 10.3137 12.6231 10.1669 12.7701C10.0945 12.8433 10.0083 12.9014 9.91313 12.9409C9.81801 12.9804 9.71596 13.0005 9.61296 13Z","fill","currentColor"]],template:function(i,r){1&i&&(yn(),q(0,"svg",0),_e(1,"path",1),W()),2&i&&(Xe(r.getClassNames()),ve("aria-label",r.ariaLabel)("aria-hidden",r.ariaHidden)("role",r.role))},encapsulation:2})}return e})(),MC=(()=>{class e extends En{static \u0275fac=function(){let t;return function(r){return(t||(t=dt(e)))(r||e)}}();static \u0275cmp=it({type:e,selectors:[["ChevronRightIcon"]],standalone:!0,features:[qe,cn],decls:2,vars:5,consts:[["width","14","height","14","viewBox","0 0 14 14","fill","none","xmlns","http://www.w3.org/2000/svg"],["d","M4.38708 13C4.28408 13.0005 4.18203 12.9804 4.08691 12.9409C3.99178 12.9014 3.9055 12.8433 3.83313 12.7701C3.68634 12.6231 3.60388 12.4238 3.60388 12.2161C3.60388 12.0084 3.68634 11.8091 3.83313 11.6622L8.50507 6.99022L3.83313 2.31827C3.69467 2.16968 3.61928 1.97313 3.62287 1.77005C3.62645 1.56698 3.70872 1.37322 3.85234 1.22959C3.99596 1.08597 4.18972 1.00371 4.3928 1.00012C4.59588 0.996539 4.79242 1.07192 4.94102 1.21039L10.1669 6.43628C10.3137 6.58325 10.3962 6.78249 10.3962 6.99022C10.3962 7.19795 10.3137 7.39718 10.1669 7.54416L4.94102 12.7701C4.86865 12.8433 4.78237 12.9014 4.68724 12.9409C4.59212 12.9804 4.49007 13.0005 4.38708 13Z","fill","currentColor"]],template:function(i,r){1&i&&(yn(),q(0,"svg",0),_e(1,"path",1),W()),2&i&&(Xe(r.getClassNames()),ve("aria-label",r.ariaLabel)("aria-hidden",r.ariaHidden)("role",r.role))},encapsulation:2})}return e})(),ol=(()=>{class e extends En{static \u0275fac=function(){let t;return function(r){return(t||(t=dt(e)))(r||e)}}();static \u0275cmp=it({type:e,selectors:[["TimesIcon"]],standalone:!0,features:[qe,cn],decls:2,vars:5,consts:[["width","14","height","14","viewBox","0 0 14 14","fill","none","xmlns","http://www.w3.org/2000/svg"],["d","M8.01186 7.00933L12.27 2.75116C12.341 2.68501 12.398 2.60524 12.4375 2.51661C12.4769 2.42798 12.4982 2.3323 12.4999 2.23529C12.5016 2.13827 12.4838 2.0419 12.4474 1.95194C12.4111 1.86197 12.357 1.78024 12.2884 1.71163C12.2198 1.64302 12.138 1.58893 12.0481 1.55259C11.9581 1.51625 11.8617 1.4984 11.7647 1.50011C11.6677 1.50182 11.572 1.52306 11.4834 1.56255C11.3948 1.60204 11.315 1.65898 11.2488 1.72997L6.99067 5.98814L2.7325 1.72997C2.59553 1.60234 2.41437 1.53286 2.22718 1.53616C2.03999 1.53946 1.8614 1.61529 1.72901 1.74767C1.59663 1.88006 1.5208 2.05865 1.5175 2.24584C1.5142 2.43303 1.58368 2.61419 1.71131 2.75116L5.96948 7.00933L1.71131 11.2675C1.576 11.403 1.5 11.5866 1.5 11.7781C1.5 11.9696 1.576 12.1532 1.71131 12.2887C1.84679 12.424 2.03043 12.5 2.2219 12.5C2.41338 12.5 2.59702 12.424 2.7325 12.2887L6.99067 8.03052L11.2488 12.2887C11.3843 12.424 11.568 12.5 11.7594 12.5C11.9509 12.5 12.1346 12.424 12.27 12.2887C12.4053 12.1532 12.4813 11.9696 12.4813 11.7781C12.4813 11.5866 12.4053 11.403 12.27 11.2675L8.01186 7.00933Z","fill","currentColor"]],template:function(i,r){1&i&&(yn(),q(0,"svg",0),_e(1,"path",1),W()),2&i&&(Xe(r.getClassNames()),ve("aria-label",r.ariaLabel)("aria-hidden",r.ariaHidden)("role",r.role))},encapsulation:2})}return e})(),IW=(()=>{class e{platformId;el;zone;config;renderer;viewContainer;tooltipPosition;tooltipEvent="hover";appendTo;positionStyle;tooltipStyleClass;tooltipZIndex;escape=!0;showDelay;hideDelay;life;positionTop;positionLeft;autoHide=!0;fitContent=!0;hideOnEscape=!0;content;get disabled(){return this._disabled}set disabled(t){this._disabled=t,this.deactivate()}tooltipOptions;_tooltipOptions={tooltipLabel:null,tooltipPosition:"right",tooltipEvent:"hover",appendTo:"body",positionStyle:null,tooltipStyleClass:null,tooltipZIndex:"auto",escape:!0,disabled:null,showDelay:null,hideDelay:null,positionTop:null,positionLeft:null,life:null,autoHide:!0,hideOnEscape:!0};_disabled;container;styleClass;tooltipText;showTimeout;hideTimeout;active;mouseEnterListener;mouseLeaveListener;containerMouseleaveListener;clickListener;focusListener;blurListener;scrollHandler;resizeListener;constructor(t,i,r,o,s,a){this.platformId=t,this.el=i,this.zone=r,this.config=o,this.renderer=s,this.viewContainer=a}ngAfterViewInit(){mf(this.platformId)&&this.zone.runOutsideAngular(()=>{if("hover"===this.getOption("tooltipEvent"))this.mouseEnterListener=this.onMouseEnter.bind(this),this.mouseLeaveListener=this.onMouseLeave.bind(this),this.clickListener=this.onInputClick.bind(this),this.el.nativeElement.addEventListener("mouseenter",this.mouseEnterListener),this.el.nativeElement.addEventListener("click",this.clickListener),this.el.nativeElement.addEventListener("mouseleave",this.mouseLeaveListener);else if("focus"===this.getOption("tooltipEvent")){this.focusListener=this.onFocus.bind(this),this.blurListener=this.onBlur.bind(this);let t=this.getTarget(this.el.nativeElement);t.addEventListener("focus",this.focusListener),t.addEventListener("blur",this.blurListener)}})}ngOnChanges(t){t.tooltipPosition&&this.setOption({tooltipPosition:t.tooltipPosition.currentValue}),t.tooltipEvent&&this.setOption({tooltipEvent:t.tooltipEvent.currentValue}),t.appendTo&&this.setOption({appendTo:t.appendTo.currentValue}),t.positionStyle&&this.setOption({positionStyle:t.positionStyle.currentValue}),t.tooltipStyleClass&&this.setOption({tooltipStyleClass:t.tooltipStyleClass.currentValue}),t.tooltipZIndex&&this.setOption({tooltipZIndex:t.tooltipZIndex.currentValue}),t.escape&&this.setOption({escape:t.escape.currentValue}),t.showDelay&&this.setOption({showDelay:t.showDelay.currentValue}),t.hideDelay&&this.setOption({hideDelay:t.hideDelay.currentValue}),t.life&&this.setOption({life:t.life.currentValue}),t.positionTop&&this.setOption({positionTop:t.positionTop.currentValue}),t.positionLeft&&this.setOption({positionLeft:t.positionLeft.currentValue}),t.disabled&&this.setOption({disabled:t.disabled.currentValue}),t.content&&(this.setOption({tooltipLabel:t.content.currentValue}),this.active&&(t.content.currentValue?this.container&&this.container.offsetParent?(this.updateText(),this.align()):this.show():this.hide())),t.autoHide&&this.setOption({autoHide:t.autoHide.currentValue}),t.tooltipOptions&&(this._tooltipOptions={...this._tooltipOptions,...t.tooltipOptions.currentValue},this.deactivate(),this.active&&(this.getOption("tooltipLabel")?this.container&&this.container.offsetParent?(this.updateText(),this.align()):this.show():this.hide()))}isAutoHide(){return this.getOption("autoHide")}onMouseEnter(t){!this.container&&!this.showTimeout&&this.activate()}onMouseLeave(t){(this.isAutoHide()||!(Y.hasClass(t.target,"p-tooltip")||Y.hasClass(t.target,"p-tooltip-arrow")||Y.hasClass(t.target,"p-tooltip-text")||Y.hasClass(t.relatedTarget,"p-tooltip")||Y.hasClass(t.relatedTarget,"p-tooltip-text")||Y.hasClass(t.relatedTarget,"p-tooltip-arrow")))&&this.deactivate()}onFocus(t){this.activate()}onBlur(t){this.deactivate()}onInputClick(t){this.deactivate()}onPressEscape(){this.hideOnEscape&&this.deactivate()}activate(){if(this.active=!0,this.clearHideTimeout(),this.getOption("showDelay")?this.showTimeout=setTimeout(()=>{this.show()},this.getOption("showDelay")):this.show(),this.getOption("life")){let t=this.getOption("showDelay")?this.getOption("life")+this.getOption("showDelay"):this.getOption("life");this.hideTimeout=setTimeout(()=>{this.hide()},t)}}deactivate(){this.active=!1,this.clearShowTimeout(),this.getOption("hideDelay")?(this.clearHideTimeout(),this.hideTimeout=setTimeout(()=>{this.hide()},this.getOption("hideDelay"))):this.hide()}create(){this.container&&(this.clearHideTimeout(),this.remove()),this.container=document.createElement("div");let t=document.createElement("div");t.className="p-tooltip-arrow",this.container.appendChild(t),this.tooltipText=document.createElement("div"),this.tooltipText.className="p-tooltip-text",this.updateText(),this.getOption("positionStyle")&&(this.container.style.position=this.getOption("positionStyle")),this.container.appendChild(this.tooltipText),"body"===this.getOption("appendTo")?document.body.appendChild(this.container):"target"===this.getOption("appendTo")?Y.appendChild(this.container,this.el.nativeElement):Y.appendChild(this.container,this.getOption("appendTo")),this.container.style.display="inline-block",this.fitContent&&(this.container.style.width="fit-content"),this.isAutoHide()||this.bindContainerMouseleaveListener()}bindContainerMouseleaveListener(){this.containerMouseleaveListener||(this.containerMouseleaveListener=this.renderer.listen(this.container??this.container.nativeElement,"mouseleave",i=>{this.deactivate()}))}unbindContainerMouseleaveListener(){this.containerMouseleaveListener&&(this.bindContainerMouseleaveListener(),this.containerMouseleaveListener=null)}show(){!this.getOption("tooltipLabel")||this.getOption("disabled")||(this.create(),this.align(),Y.fadeIn(this.container,250),"auto"===this.getOption("tooltipZIndex")?rl.set("tooltip",this.container,this.config.zIndex.tooltip):this.container.style.zIndex=this.getOption("tooltipZIndex"),this.bindDocumentResizeListener(),this.bindScrollListener())}hide(){"auto"===this.getOption("tooltipZIndex")&&rl.clear(this.container),this.remove()}updateText(){const t=this.getOption("tooltipLabel");if(t instanceof Zs){const i=this.viewContainer.createEmbeddedView(t);i.detectChanges(),i.rootNodes.forEach(r=>this.tooltipText.appendChild(r))}else this.getOption("escape")?(this.tooltipText.innerHTML="",this.tooltipText.appendChild(document.createTextNode(t))):this.tooltipText.innerHTML=t}align(){switch(this.getOption("tooltipPosition")){case"top":this.alignTop(),this.isOutOfBounds()&&(this.alignBottom(),this.isOutOfBounds()&&(this.alignRight(),this.isOutOfBounds()&&this.alignLeft()));break;case"bottom":this.alignBottom(),this.isOutOfBounds()&&(this.alignTop(),this.isOutOfBounds()&&(this.alignRight(),this.isOutOfBounds()&&this.alignLeft()));break;case"left":this.alignLeft(),this.isOutOfBounds()&&(this.alignRight(),this.isOutOfBounds()&&(this.alignTop(),this.isOutOfBounds()&&this.alignBottom()));break;case"right":this.alignRight(),this.isOutOfBounds()&&(this.alignLeft(),this.isOutOfBounds()&&(this.alignTop(),this.isOutOfBounds()&&this.alignBottom()))}}getHostOffset(){if("body"===this.getOption("appendTo")||"target"===this.getOption("appendTo")){let t=this.el.nativeElement.getBoundingClientRect();return{left:t.left+Y.getWindowScrollLeft(),top:t.top+Y.getWindowScrollTop()}}return{left:0,top:0}}alignRight(){this.preAlign("right");let t=this.getHostOffset(),i=t.left+Y.getOuterWidth(this.el.nativeElement),r=t.top+(Y.getOuterHeight(this.el.nativeElement)-Y.getOuterHeight(this.container))/2;this.container.style.left=i+this.getOption("positionLeft")+"px",this.container.style.top=r+this.getOption("positionTop")+"px"}alignLeft(){this.preAlign("left");let t=this.getHostOffset(),i=t.left-Y.getOuterWidth(this.container),r=t.top+(Y.getOuterHeight(this.el.nativeElement)-Y.getOuterHeight(this.container))/2;this.container.style.left=i+this.getOption("positionLeft")+"px",this.container.style.top=r+this.getOption("positionTop")+"px"}alignTop(){this.preAlign("top");let t=this.getHostOffset(),i=t.left+(Y.getOuterWidth(this.el.nativeElement)-Y.getOuterWidth(this.container))/2,r=t.top-Y.getOuterHeight(this.container);this.container.style.left=i+this.getOption("positionLeft")+"px",this.container.style.top=r+this.getOption("positionTop")+"px"}alignBottom(){this.preAlign("bottom");let t=this.getHostOffset(),i=t.left+(Y.getOuterWidth(this.el.nativeElement)-Y.getOuterWidth(this.container))/2,r=t.top+Y.getOuterHeight(this.el.nativeElement);this.container.style.left=i+this.getOption("positionLeft")+"px",this.container.style.top=r+this.getOption("positionTop")+"px"}setOption(t){this._tooltipOptions={...this._tooltipOptions,...t}}getOption(t){return this._tooltipOptions[t]}getTarget(t){return Y.hasClass(t,"p-inputwrapper")?Y.findSingle(t,"input"):t}preAlign(t){this.container.style.left="-999px",this.container.style.top="-999px";let i="p-tooltip p-component p-tooltip-"+t;this.container.className=this.getOption("tooltipStyleClass")?i+" "+this.getOption("tooltipStyleClass"):i}isOutOfBounds(){let t=this.container.getBoundingClientRect(),i=t.top,r=t.left,o=Y.getOuterWidth(this.container),s=Y.getOuterHeight(this.container),a=Y.getViewport();return r+o>a.width||r<0||i<0||i+s>a.height}onWindowResize(t){this.hide()}bindDocumentResizeListener(){this.zone.runOutsideAngular(()=>{this.resizeListener=this.onWindowResize.bind(this),window.addEventListener("resize",this.resizeListener)})}unbindDocumentResizeListener(){this.resizeListener&&(window.removeEventListener("resize",this.resizeListener),this.resizeListener=null)}bindScrollListener(){this.scrollHandler||(this.scrollHandler=new Kk(this.el.nativeElement,()=>{this.container&&this.hide()})),this.scrollHandler.bindScrollListener()}unbindScrollListener(){this.scrollHandler&&this.scrollHandler.unbindScrollListener()}unbindEvents(){if("hover"===this.getOption("tooltipEvent"))this.el.nativeElement.removeEventListener("mouseenter",this.mouseEnterListener),this.el.nativeElement.removeEventListener("mouseleave",this.mouseLeaveListener),this.el.nativeElement.removeEventListener("click",this.clickListener);else if("focus"===this.getOption("tooltipEvent")){let t=this.getTarget(this.el.nativeElement);t.removeEventListener("focus",this.focusListener),t.removeEventListener("blur",this.blurListener)}this.unbindDocumentResizeListener()}remove(){this.container&&this.container.parentElement&&("body"===this.getOption("appendTo")?document.body.removeChild(this.container):"target"===this.getOption("appendTo")?this.el.nativeElement.removeChild(this.container):Y.removeChild(this.container,this.getOption("appendTo"))),this.unbindDocumentResizeListener(),this.unbindScrollListener(),this.unbindContainerMouseleaveListener(),this.clearTimeouts(),this.container=null,this.scrollHandler=null}clearShowTimeout(){this.showTimeout&&(clearTimeout(this.showTimeout),this.showTimeout=null)}clearHideTimeout(){this.hideTimeout&&(clearTimeout(this.hideTimeout),this.hideTimeout=null)}clearTimeouts(){this.clearShowTimeout(),this.clearHideTimeout()}ngOnDestroy(){this.unbindEvents(),this.container&&rl.clear(this.container),this.remove(),this.scrollHandler&&(this.scrollHandler.destroy(),this.scrollHandler=null)}static \u0275fac=function(i){return new(i||e)(G(fs),G(pn),G(At),G(Y_),G(Ki),G(Oo))};static \u0275dir=je({type:e,selectors:[["","pTooltip",""]],hostAttrs:[1,"p-element"],hostBindings:function(i,r){1&i&&we("keydown.escape",function(s){return r.onPressEscape(s)},0,T$)},inputs:{tooltipPosition:"tooltipPosition",tooltipEvent:"tooltipEvent",appendTo:"appendTo",positionStyle:"positionStyle",tooltipStyleClass:"tooltipStyleClass",tooltipZIndex:"tooltipZIndex",escape:"escape",showDelay:"showDelay",hideDelay:"hideDelay",life:"life",positionTop:"positionTop",positionLeft:"positionLeft",autoHide:"autoHide",fitContent:"fitContent",hideOnEscape:"hideOnEscape",content:["pTooltip","content"],disabled:["tooltipDisabled","disabled"],tooltipOptions:"tooltipOptions"},features:[vr]})}return e})(),MW=(()=>{class e{static \u0275fac=function(i){return new(i||e)};static \u0275mod=Ut({type:e});static \u0275inj=Nt({imports:[ti]})}return e})();function KDe(e,n){1&e&&wt(0)}function YDe(e,n){if(1&e&&(Ke(0),B(1,KDe,1,0,"ng-container",3),Ye()),2&e){const t=L(2);$(1),k("ngTemplateOutlet",t.contentTemplate)}}function XDe(e,n){if(1&e&&(q(0,"div",1),Jr(1),B(2,YDe,2,1,"ng-container",2),W()),2&e){const t=L();k("hidden",!t.selected),ve("id",t.tabView.getTabContentId(t.id))("aria-hidden",!t.selected)("aria-labelledby",t.tabView.getTabHeaderActionId(t.id))("data-pc-name","tabpanel"),$(2),k("ngIf",t.contentTemplate&&(t.cache?t.loaded:t.selected))}}const AW=["*"],QDe=["content"],ZDe=["navbar"],JDe=["prevBtn"],eIe=["nextBtn"],tIe=["inkbar"],nIe=["elementToObserve"];function iIe(e,n){1&e&&_e(0,"ChevronLeftIcon"),2&e&&ve("aria-hidden",!0)}function rIe(e,n){}function oIe(e,n){1&e&&B(0,rIe,0,0,"ng-template")}function sIe(e,n){if(1&e){const t=ft();q(0,"button",13,14),we("click",function(){return J(t),ee(L().navBackward())}),B(2,iIe,1,1,"ChevronLeftIcon",15),B(3,oIe,1,0,null,16),W()}if(2&e){const t=L();ve("tabindex",t.tabindex)("aria-label",t.prevButtonAriaLabel),$(2),k("ngIf",!t.previousIconTemplate),$(1),k("ngTemplateOutlet",t.previousIconTemplate)}}function aIe(e,n){1&e&&_e(0,"span",25),2&e&&k("ngClass",L(3).$implicit.leftIcon)}function lIe(e,n){}function cIe(e,n){1&e&&B(0,lIe,0,0,"ng-template")}function uIe(e,n){if(1&e&&(q(0,"span",26),B(1,cIe,1,0,null,16),W()),2&e){const t=L(3).$implicit;$(1),k("ngTemplateOutlet",t.leftIconTemplate)}}function dIe(e,n){1&e&&_e(0,"span",27),2&e&&k("ngClass",L(3).$implicit.rightIcon)}function fIe(e,n){}function hIe(e,n){1&e&&B(0,fIe,0,0,"ng-template")}function pIe(e,n){if(1&e&&(q(0,"span",28),B(1,hIe,1,0,null,16),W()),2&e){const t=L(3).$implicit;$(1),k("ngTemplateOutlet",t.rightIconTemplate)}}function gIe(e,n){if(1&e&&(Ke(0),B(1,aIe,1,1,"span",20),B(2,uIe,2,1,"span",21),q(3,"span",22),pt(4),W(),B(5,dIe,1,1,"span",23),B(6,pIe,2,1,"span",24),Ye()),2&e){const t=L(2).$implicit;$(1),k("ngIf",t.leftIcon&&!t.leftIconTemplate),$(1),k("ngIf",t.leftIconTemplate),$(2),Jn(t.header),$(1),k("ngIf",t.rightIcon&&!t.rightIconTemplate),$(1),k("ngIf",t.rightIconTemplate)}}function mIe(e,n){1&e&&wt(0)}function _Ie(e,n){if(1&e){const t=ft();q(0,"TimesIcon",31),we("click",function(r){J(t);const o=L(3).$implicit;return ee(L().close(r,o))}),W()}2&e&&k("styleClass","p-tabview-close")}function yIe(e,n){1&e&&_e(0,"span",32)}function vIe(e,n){}function bIe(e,n){1&e&&B(0,vIe,0,0,"ng-template")}function wIe(e,n){if(1&e&&(Ke(0),B(1,_Ie,1,1,"TimesIcon",29),B(2,yIe,1,0,"span",30),B(3,bIe,1,0,null,16),Ye()),2&e){const t=L(2).$implicit;$(1),k("ngIf",!t.closeIconTemplate),$(1),k("ngIf",t.closeIconTemplate),$(1),k("ngTemplateOutlet",t.closeIconTemplate)}}const CIe=function(e,n){return{"p-highlight":e,"p-disabled":n}};function xIe(e,n){if(1&e){const t=ft();q(0,"li",18)(1,"a",19),we("click",function(r){J(t);const o=L().$implicit;return ee(L().open(r,o))})("keydown",function(r){J(t);const o=L().$implicit;return ee(L().onTabKeyDown(r,o))}),B(2,gIe,7,5,"ng-container",15),B(3,mIe,1,0,"ng-container",16),B(4,wIe,4,3,"ng-container",15),W()()}if(2&e){const t=L(),i=t.$implicit,r=t.index,o=L();Xe(i.headerStyleClass),k("ngClass",jn(19,CIe,i.selected,i.disabled))("ngStyle",i.headerStyle),ve("data-p-disabled",i.disabled),$(1),k("pTooltip",i.tooltip)("tooltipPosition",i.tooltipPosition)("positionStyle",i.tooltipPositionStyle)("tooltipStyleClass",i.tooltipStyleClass),ve("id",o.getTabHeaderActionId(i.id))("aria-controls",o.getTabContentId(i.id))("aria-selected",i.selected)("tabindex",i.disabled||!i.selected?"-1":o.tabindex)("aria-disabled",i.disabled)("data-pc-index",r)("data-pc-section","headeraction"),$(1),k("ngIf",!i.headerTemplate),$(1),k("ngTemplateOutlet",i.headerTemplate),$(1),k("ngIf",i.closable)}}function EIe(e,n){1&e&&B(0,xIe,5,22,"li",17),2&e&&k("ngIf",!n.$implicit.closed)}function SIe(e,n){1&e&&_e(0,"ChevronRightIcon"),2&e&&ve("aria-hidden",!0)}function TIe(e,n){}function DIe(e,n){1&e&&B(0,TIe,0,0,"ng-template")}function IIe(e,n){if(1&e){const t=ft();q(0,"button",33,34),we("click",function(){return J(t),ee(L().navForward())}),B(2,SIe,1,1,"ChevronRightIcon",15),B(3,DIe,1,0,null,16),W()}if(2&e){const t=L();ve("tabindex",t.tabindex)("aria-label",t.nextButtonAriaLabel),$(2),k("ngIf",!t.nextIconTemplate),$(1),k("ngTemplateOutlet",t.nextIconTemplate)}}const MIe=function(e){return{"p-tabview p-component":!0,"p-tabview-scrollable":e}};let kW=(()=>{class e{el;viewContainer;cd;closable=!1;get headerStyle(){return this._headerStyle}set headerStyle(t){this._headerStyle=t,this.tabView.cd.markForCheck()}get headerStyleClass(){return this._headerStyleClass}set headerStyleClass(t){this._headerStyleClass=t,this.tabView.cd.markForCheck()}cache=!0;tooltip;tooltipPosition="top";tooltipPositionStyle="absolute";tooltipStyleClass;get selected(){return!!this._selected}set selected(t){this._selected=t,this.loaded||this.cd.detectChanges(),t&&(this.loaded=!0)}get disabled(){return!!this._disabled}set disabled(t){this._disabled=t,this.tabView.cd.markForCheck()}get header(){return this._header}set header(t){this._header=t,Promise.resolve().then(()=>{this.tabView.updateInkBar(),this.tabView.cd.markForCheck()})}get leftIcon(){return this._leftIcon}set leftIcon(t){this._leftIcon=t,this.tabView.cd.markForCheck()}get rightIcon(){return this._rightIcon}set rightIcon(t){this._rightIcon=t,this.tabView.cd.markForCheck()}templates;closed=!1;view=null;_headerStyle;_headerStyleClass;_selected;_disabled;_header;_leftIcon;_rightIcon=void 0;loaded=!1;id;contentTemplate;headerTemplate;leftIconTemplate;rightIconTemplate;closeIconTemplate;tabView;constructor(t,i,r,o){this.el=i,this.viewContainer=r,this.cd=o,this.tabView=t,this.id=Mr()}ngAfterContentInit(){this.templates.forEach(t=>{switch(t.getType()){case"header":this.headerTemplate=t.template;break;case"content":default:this.contentTemplate=t.template;break;case"righticon":this.rightIconTemplate=t.template;break;case"lefticon":this.leftIconTemplate=t.template;break;case"closeicon":this.closeIconTemplate=t.template}})}ngOnDestroy(){this.view=null}static \u0275fac=function(i){return new(i||e)(G(Rt(()=>OW)),G(pn),G(Oo),G(Ro))};static \u0275cmp=it({type:e,selectors:[["p-tabPanel"]],contentQueries:function(i,r,o){if(1&i&&Er(o,Bo,4),2&i){let s;Ct(s=xt())&&(r.templates=s)}},hostAttrs:[1,"p-element"],inputs:{closable:"closable",headerStyle:"headerStyle",headerStyleClass:"headerStyleClass",cache:"cache",tooltip:"tooltip",tooltipPosition:"tooltipPosition",tooltipPositionStyle:"tooltipPositionStyle",tooltipStyleClass:"tooltipStyleClass",selected:"selected",disabled:"disabled",header:"header",leftIcon:"leftIcon",rightIcon:"rightIcon"},ngContentSelectors:AW,decls:1,vars:1,consts:[["class","p-tabview-panel","role","tabpanel",3,"hidden",4,"ngIf"],["role","tabpanel",1,"p-tabview-panel",3,"hidden"],[4,"ngIf"],[4,"ngTemplateOutlet"]],template:function(i,r){1&i&&(Xa(),B(0,XDe,3,6,"div",0)),2&i&&k("ngIf",!r.closed)},dependencies:[No,Po],encapsulation:2})}return e})(),OW=(()=>{class e{platformId;el;cd;renderer;style;styleClass;controlClose;scrollable;get activeIndex(){return this._activeIndex}set activeIndex(t){this._activeIndex=t,this.preventActiveIndexPropagation?this.preventActiveIndexPropagation=!1:this.tabs&&this.tabs.length&&null!=this._activeIndex&&this.tabs.length>this._activeIndex&&(this.findSelectedTab().selected=!1,this.tabs[this._activeIndex].selected=!0,this.tabChanged=!0,this.updateScrollBar(t))}selectOnFocus=!1;tabindex=0;onChange=new De;onClose=new De;activeIndexChange=new De;content;navbar;prevBtn;nextBtn;inkbar;tabPanels;templates;initialized;tabs;_activeIndex;preventActiveIndexPropagation;tabChanged;backwardIsDisabled=!0;forwardIsDisabled=!1;tabChangesSubscription;nextIconTemplate;previousIconTemplate;resizeObserver;shouldVisible;elementToObserve;constructor(t,i,r,o){this.platformId=t,this.el=i,this.cd=r,this.renderer=o}ngAfterContentInit(){this.initTabs(),this.tabChangesSubscription=this.tabPanels.changes.subscribe(t=>{this.initTabs()}),this.templates.forEach(t=>{switch(t.getType()){case"previousicon":this.previousIconTemplate=t.template;break;case"nexticon":this.nextIconTemplate=t.template}})}ngAfterViewInit(){mf(this.platformId)&&this.bindResizeObserver()}bindResizeObserver(){this.resizeObserver||(this.resizeObserver=new ResizeObserver(t=>{for(let i of t){const r=parseFloat(getComputedStyle(this.navbar.nativeElement).width);this.shouldVisible=i.contentRect.width<r,this.cd.detectChanges()}}),this.resizeObserver.observe(this.elementToObserve.nativeElement))}unbindResizeObserver(){this.resizeObserver.unobserve(this.elementToObserve.nativeElement),this.resizeObserver=null}ngAfterViewChecked(){mf(this.platformId)&&this.tabChanged&&(this.updateInkBar(),this.tabChanged=!1)}ngOnDestroy(){this.tabChangesSubscription&&this.tabChangesSubscription.unsubscribe(),this.resizeObserver&&this.unbindResizeObserver()}getTabHeaderActionId(t){return`${t}_header_action`}getTabContentId(t){return`${t}_content`}initTabs(){this.tabs=this.tabPanels.toArray(),!this.findSelectedTab()&&this.tabs.length&&(null!=this.activeIndex&&this.tabs.length>this.activeIndex?this.tabs[this.activeIndex].selected=!0:this.tabs[0].selected=!0,this.tabChanged=!0),this.cd.markForCheck()}onTabKeyDown(t,i){switch(t.code){case"ArrowLeft":this.onTabArrowLeftKey(t);break;case"ArrowRight":this.onTabArrowRightKey(t);break;case"Home":case"PageUp":this.onTabHomeKey(t);break;case"End":case"PageDown":this.onTabEndKey(t);break;case"Enter":case"Space":this.open(t,i)}}onTabArrowLeftKey(t){const i=this.findPrevHeaderAction(t.target.parentElement),r=Y.getAttribute(i,"data-pc-index");i?this.changeFocusedTab(t,i,r):this.onTabEndKey(t),t.preventDefault()}onTabArrowRightKey(t){const i=this.findNextHeaderAction(t.target.parentElement),r=Y.getAttribute(i,"data-pc-index");i?this.changeFocusedTab(t,i,r):this.onTabHomeKey(t),t.preventDefault()}onTabHomeKey(t){const i=this.findFirstHeaderAction(),r=Y.getAttribute(i,"data-pc-index");this.changeFocusedTab(t,i,r),t.preventDefault()}onTabEndKey(t){const i=this.findLastHeaderAction(),r=Y.getAttribute(i,"data-pc-index");this.changeFocusedTab(t,i,r),t.preventDefault()}changeFocusedTab(t,i,r){i&&(Y.focus(i),i.scrollIntoView({block:"nearest"}),this.selectOnFocus)&&this.open(t,this.tabs[r])}findNextHeaderAction(t,i=!1){const r=i?t:t.nextElementSibling;return r?Y.getAttribute(r,"data-p-disabled")||"inkbar"===Y.getAttribute(r,"data-pc-section")?this.findNextHeaderAction(r):Y.findSingle(r,'[data-pc-section="headeraction"]'):null}findPrevHeaderAction(t,i=!1){const r=i?t:t.previousElementSibling;return r?Y.getAttribute(r,"data-p-disabled")||"inkbar"===Y.getAttribute(r,"data-pc-section")?this.findPrevHeaderAction(r):Y.findSingle(r,'[data-pc-section="headeraction"]'):null}findFirstHeaderAction(){return this.findNextHeaderAction(this.navbar.nativeElement.firstElementChild,!0)}findLastHeaderAction(){const t=this.navbar.nativeElement.lastElementChild,i="inkbar"===Y.getAttribute(t,"data-pc-section")?t.previousElementSibling:t;return this.findPrevHeaderAction(i,!0)}open(t,i){if(i.disabled)t&&t.preventDefault();else{if(!i.selected){let r=this.findSelectedTab();r&&(r.selected=!1),this.tabChanged=!0,i.selected=!0;let o=this.findTabIndex(i);this.preventActiveIndexPropagation=!0,this.activeIndexChange.emit(o),this.onChange.emit({originalEvent:t,index:o}),this.updateScrollBar(o)}t&&t.preventDefault()}}close(t,i){this.controlClose?this.onClose.emit({originalEvent:t,index:this.findTabIndex(i),close:()=>{this.closeTab(i)}}):(this.closeTab(i),this.onClose.emit({originalEvent:t,index:this.findTabIndex(i)}))}closeTab(t){if(!t.disabled){if(t.selected){this.tabChanged=!0,t.selected=!1;for(let i=0;i<this.tabs.length;i++){let r=this.tabs[i];if(!r.closed&&!t.disabled){r.selected=!0;break}}}t.closed=!0}}findSelectedTab(){for(let t=0;t<this.tabs.length;t++)if(this.tabs[t].selected)return this.tabs[t];return null}findTabIndex(t){let i=-1;for(let r=0;r<this.tabs.length;r++)if(this.tabs[r]==t){i=r;break}return i}getBlockableElement(){return this.el.nativeElement.children[0]}updateInkBar(){if(this.navbar){const t=Y.findSingle(this.navbar.nativeElement,"li.p-highlight");if(!t)return;this.inkbar.nativeElement.style.width=Y.getWidth(t)+"px",this.inkbar.nativeElement.style.left=Y.getOffset(t).left-Y.getOffset(this.navbar.nativeElement).left+"px"}}updateScrollBar(t){this.navbar.nativeElement.children[t].scrollIntoView({block:"nearest"})}updateButtonState(){const t=this.content.nativeElement,{scrollLeft:i,scrollWidth:r}=t,o=Y.getWidth(t);this.backwardIsDisabled=0===i,this.forwardIsDisabled=i===r-o}onScroll(t){this.scrollable&&this.updateButtonState(),t.preventDefault()}getVisibleButtonWidths(){return[this.prevBtn?.nativeElement,this.nextBtn?.nativeElement].reduce((t,i)=>i?t+Y.getWidth(i):t,0)}navBackward(){const t=this.content.nativeElement,i=Y.getWidth(t)-this.getVisibleButtonWidths(),r=t.scrollLeft-i;t.scrollLeft=r<=0?0:r}navForward(){const t=this.content.nativeElement,i=Y.getWidth(t)-this.getVisibleButtonWidths(),r=t.scrollLeft+i,o=t.scrollWidth-i;t.scrollLeft=r>=o?o:r}static \u0275fac=function(i){return new(i||e)(G(fs),G(pn),G(Ro),G(Ki))};static \u0275cmp=it({type:e,selectors:[["p-tabView"]],contentQueries:function(i,r,o){if(1&i&&(Er(o,kW,4),Er(o,Bo,4)),2&i){let s;Ct(s=xt())&&(r.tabPanels=s),Ct(s=xt())&&(r.templates=s)}},viewQuery:function(i,r){if(1&i&&(Fn(QDe,5),Fn(ZDe,5),Fn(JDe,5),Fn(eIe,5),Fn(tIe,5),Fn(nIe,5)),2&i){let o;Ct(o=xt())&&(r.content=o.first),Ct(o=xt())&&(r.navbar=o.first),Ct(o=xt())&&(r.prevBtn=o.first),Ct(o=xt())&&(r.nextBtn=o.first),Ct(o=xt())&&(r.inkbar=o.first),Ct(o=xt())&&(r.elementToObserve=o.first)}},hostAttrs:[1,"p-element"],inputs:{style:"style",styleClass:"styleClass",controlClose:"controlClose",scrollable:"scrollable",activeIndex:"activeIndex",selectOnFocus:"selectOnFocus",tabindex:"tabindex"},outputs:{onChange:"onChange",onClose:"onClose",activeIndexChange:"activeIndexChange"},ngContentSelectors:AW,decls:14,vars:11,consts:[[3,"ngClass","ngStyle"],[1,"p-tabview-nav-container"],["elementToObserve",""],["class","p-tabview-nav-prev p-tabview-nav-btn p-link","type","button","pRipple","",3,"click",4,"ngIf"],[1,"p-tabview-nav-content",3,"scroll"],["content",""],["role","tablist",1,"p-tabview-nav"],["navbar",""],["ngFor","",3,"ngForOf"],[1,"p-tabview-ink-bar"],["inkbar",""],["class","p-tabview-nav-next p-tabview-nav-btn p-link","type","button","pRipple","",3,"click",4,"ngIf"],[1,"p-tabview-panels"],["type","button","pRipple","",1,"p-tabview-nav-prev","p-tabview-nav-btn","p-link",3,"click"],["prevBtn",""],[4,"ngIf"],[4,"ngTemplateOutlet"],["role","presentation",3,"ngClass","ngStyle","class",4,"ngIf"],["role","presentation",3,"ngClass","ngStyle"],["role","tab","pRipple","",1,"p-tabview-nav-link",3,"pTooltip","tooltipPosition","positionStyle","tooltipStyleClass","click","keydown"],["class","p-tabview-left-icon",3,"ngClass",4,"ngIf"],["class","p-tabview-left-icon",4,"ngIf"],[1,"p-tabview-title"],["class","p-tabview-right-icon",3,"ngClass",4,"ngIf"],["class","p-tabview-right-icon",4,"ngIf"],[1,"p-tabview-left-icon",3,"ngClass"],[1,"p-tabview-left-icon"],[1,"p-tabview-right-icon",3,"ngClass"],[1,"p-tabview-right-icon"],[3,"styleClass","click",4,"ngIf"],["class","tab.closeIconTemplate",4,"ngIf"],[3,"styleClass","click"],[1,"tab.closeIconTemplate"],["type","button","pRipple","",1,"p-tabview-nav-next","p-tabview-nav-btn","p-link",3,"click"],["nextBtn",""]],template:function(i,r){1&i&&(Xa(),q(0,"div",0)(1,"div",1,2),B(3,sIe,4,4,"button",3),q(4,"div",4,5),we("scroll",function(s){return r.onScroll(s)}),q(6,"ul",6,7),B(8,EIe,1,1,"ng-template",8),_e(9,"li",9,10),W()(),B(11,IIe,4,4,"button",11),W(),q(12,"div",12),Jr(13),W()()),2&i&&(Xe(r.styleClass),k("ngClass",_t(9,MIe,r.scrollable))("ngStyle",r.style),ve("data-pc-name","tabview"),$(3),k("ngIf",r.scrollable&&!r.backwardIsDisabled),$(5),k("ngForOf",r.tabs),$(1),ve("data-pc-section","inkbar"),$(2),k("ngIf",r.scrollable&&!r.forwardIsDisabled&&r.shouldVisible))},dependencies:function(){return[_s,eg,No,Po,ys,IW,yg,ol,IC,MC]},styles:["@layer primeng{.p-tabview-nav-container{position:relative}.p-tabview-scrollable .p-tabview-nav-container{overflow:hidden}.p-tabview-nav-content{overflow-x:auto;overflow-y:hidden;scroll-behavior:smooth;scrollbar-width:none;overscroll-behavior:contain auto}.p-tabview-nav{display:inline-flex;min-width:100%;margin:0;padding:0;list-style-type:none;flex:1 1 auto}.p-tabview-nav-link{cursor:pointer;-webkit-user-select:none;user-select:none;display:flex;align-items:center;position:relative;text-decoration:none;overflow:hidden}.p-tabview-ink-bar{display:none;z-index:1}.p-tabview-nav-link:focus{z-index:1}.p-tabview-title{line-height:1;white-space:nowrap}.p-tabview-nav-btn{position:absolute;top:0;z-index:2;height:100%;display:flex;align-items:center;justify-content:center}.p-tabview-nav-prev{left:0}.p-tabview-nav-next{right:0}.p-tabview-nav-content::-webkit-scrollbar{display:none}.p-tabview-close{z-index:1}}\n"],encapsulation:2,changeDetection:0})}return e})(),AIe=(()=>{class e{static \u0275fac=function(i){return new(i||e)};static \u0275mod=Ut({type:e});static \u0275inj=Nt({imports:[ti,kn,MW,Su,ol,IC,MC,kn]})}return e})();function RW(e,n,t,i,r,o,s){try{var a=e[o](s),l=a.value}catch(c){return void t(c)}a.done?n(l):Promise.resolve(l).then(i,r)}function Re(e){return function(){var n=this,t=arguments;return new Promise(function(i,r){var o=e.apply(n,t);function s(l){RW(o,i,r,s,a,"next",l)}function a(l){RW(o,i,r,s,a,"throw",l)}s(void 0)})}}var e,kIe=(e=function(n,t){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var o in r)r.hasOwnProperty(o)&&(i[o]=r[o])})(n,t)},function(n,t){function i(){this.constructor=n}e(n,t),n.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),OIe=Object.prototype.hasOwnProperty;function AC(e,n){return OIe.call(e,n)}function Yk(e){if(Array.isArray(e)){for(var n=new Array(e.length),t=0;t<n.length;t++)n[t]=""+t;return n}if(Object.keys)return Object.keys(e);var i=[];for(var r in e)AC(e,r)&&i.push(r);return i}function Vo(e){switch(typeof e){case"object":return JSON.parse(JSON.stringify(e));case"undefined":return null;default:return e}}function Xk(e){for(var i,n=0,t=e.length;n<t;){if(!((i=e.charCodeAt(n))>=48&&i<=57))return!1;n++}return!0}function gc(e){return-1===e.indexOf("/")&&-1===e.indexOf("~")?e:e.replace(/~/g,"~0").replace(/\//g,"~1")}function FW(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}function Qk(e){if(void 0===e)return!0;if(e)if(Array.isArray(e)){for(var n=0,t=e.length;n<t;n++)if(Qk(e[n]))return!0}else if("object"==typeof e)for(var i=Yk(e),r=i.length,o=0;o<r;o++)if(Qk(e[i[o]]))return!0;return!1}function PW(e,n){var t=[e];for(var i in n){var r="object"==typeof n[i]?JSON.stringify(n[i],null,2):n[i];typeof r<"u"&&t.push(i+": "+r)}return t.join("\n")}var LW=function(e){function n(t,i,r,o,s){var a=this.constructor,l=e.call(this,PW(t,{name:i,index:r,operation:o,tree:s}))||this;return l.name=i,l.index=r,l.operation=o,l.tree=s,Object.setPrototypeOf(l,a.prototype),l.message=PW(t,{name:i,index:r,operation:o,tree:s}),l}return kIe(n,e),n}(Error),Pn=LW,RIe=Vo,vg={add:function(e,n,t){return e[n]=this.value,{newDocument:t}},remove:function(e,n,t){var i=e[n];return delete e[n],{newDocument:t,removed:i}},replace:function(e,n,t){var i=e[n];return e[n]=this.value,{newDocument:t,removed:i}},move:function(e,n,t){var i=kC(t,this.path);i&&(i=Vo(i));var r=If(t,{op:"remove",path:this.from}).removed;return If(t,{op:"add",path:this.path,value:r}),{newDocument:t,removed:i}},copy:function(e,n,t){var i=kC(t,this.from);return If(t,{op:"add",path:this.path,value:Vo(i)}),{newDocument:t}},test:function(e,n,t){return{newDocument:t,test:X_(e[n],this.value)}},_get:function(e,n,t){return this.value=e[n],{newDocument:t}}},FIe={add:function(e,n,t){return Xk(n)?e.splice(n,0,this.value):e[n]=this.value,{newDocument:t,index:n}},remove:function(e,n,t){return{newDocument:t,removed:e.splice(n,1)[0]}},replace:function(e,n,t){var i=e[n];return e[n]=this.value,{newDocument:t,removed:i}},move:vg.move,copy:vg.copy,test:vg.test,_get:vg._get};function kC(e,n){if(""==n)return e;var t={op:"_get",path:n};return If(e,t),t.value}function If(e,n,t,i,r,o){if(void 0===t&&(t=!1),void 0===i&&(i=!0),void 0===r&&(r=!0),void 0===o&&(o=0),t&&("function"==typeof t?t(n,0,e,n.path):RC(n,0)),""===n.path){var s={newDocument:e};if("add"===n.op)return s.newDocument=n.value,s;if("replace"===n.op)return s.newDocument=n.value,s.removed=e,s;if("move"===n.op||"copy"===n.op)return s.newDocument=kC(e,n.from),"move"===n.op&&(s.removed=e),s;if("test"===n.op){if(s.test=X_(e,n.value),!1===s.test)throw new Pn("Test operation failed","TEST_OPERATION_FAILED",o,n,e);return s.newDocument=e,s}if("remove"===n.op)return s.removed=e,s.newDocument=null,s;if("_get"===n.op)return n.value=e,s;if(t)throw new Pn("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",o,n,e);return s}i||(e=Vo(e));var l=(n.path||"").split("/"),c=e,u=1,d=l.length,f=void 0,h=void 0,p=void 0;for(p="function"==typeof t?t:RC;;){if((h=l[u])&&-1!=h.indexOf("~")&&(h=FW(h)),r&&("__proto__"==h||"prototype"==h&&u>0&&"constructor"==l[u-1]))throw new TypeError("JSON-Patch: modifying `__proto__` or `constructor/prototype` prop is banned for security reasons, if this was on purpose, please set `banPrototypeModifications` flag false and pass it to this function. More info in fast-json-patch README");if(t&&void 0===f&&(void 0===c[h]?f=l.slice(0,u).join("/"):u==d-1&&(f=n.path),void 0!==f&&p(n,0,e,f)),u++,Array.isArray(c)){if("-"===h)h=c.length;else{if(t&&!Xk(h))throw new Pn("Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index","OPERATION_PATH_ILLEGAL_ARRAY_INDEX",o,n,e);Xk(h)&&(h=~~h)}if(u>=d){if(t&&"add"===n.op&&h>c.length)throw new Pn("The specified index MUST NOT be greater than the number of elements in the array","OPERATION_VALUE_OUT_OF_BOUNDS",o,n,e);if(!1===(s=FIe[n.op].call(n,c,h,e)).test)throw new Pn("Test operation failed","TEST_OPERATION_FAILED",o,n,e);return s}}else if(u>=d){if(!1===(s=vg[n.op].call(n,c,h,e)).test)throw new Pn("Test operation failed","TEST_OPERATION_FAILED",o,n,e);return s}if(c=c[h],t&&u<d&&(!c||"object"!=typeof c))throw new Pn("Cannot perform operation at the desired path","OPERATION_PATH_UNRESOLVABLE",o,n,e)}}function OC(e,n,t,i,r){if(void 0===i&&(i=!0),void 0===r&&(r=!0),t&&!Array.isArray(n))throw new Pn("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");i||(e=Vo(e));for(var o=new Array(n.length),s=0,a=n.length;s<a;s++)o[s]=If(e,n[s],t,!0,r,s),e=o[s].newDocument;return o.newDocument=e,o}function NIe(e,n,t){var i=If(e,n);if(!1===i.test)throw new Pn("Test operation failed","TEST_OPERATION_FAILED",t,n,e);return i.newDocument}function RC(e,n,t,i){if("object"!=typeof e||null===e||Array.isArray(e))throw new Pn("Operation is not an object","OPERATION_NOT_AN_OBJECT",n,e,t);if(!vg[e.op])throw new Pn("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",n,e,t);if("string"!=typeof e.path)throw new Pn("Operation `path` property is not a string","OPERATION_PATH_INVALID",n,e,t);if(0!==e.path.indexOf("/")&&e.path.length>0)throw new Pn('Operation `path` property must start with "/"',"OPERATION_PATH_INVALID",n,e,t);if(("move"===e.op||"copy"===e.op)&&"string"!=typeof e.from)throw new Pn("Operation `from` property is not present (applicable in `move` and `copy` operations)","OPERATION_FROM_REQUIRED",n,e,t);if(("add"===e.op||"replace"===e.op||"test"===e.op)&&void 0===e.value)throw new Pn("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_REQUIRED",n,e,t);if(("add"===e.op||"replace"===e.op||"test"===e.op)&&Qk(e.value))throw new Pn("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED",n,e,t);if(t)if("add"==e.op){var r=e.path.split("/").length,o=i.split("/").length;if(r!==o+1&&r!==o)throw new Pn("Cannot perform an `add` operation at the desired path","OPERATION_PATH_CANNOT_ADD",n,e,t)}else if("replace"===e.op||"remove"===e.op||"_get"===e.op){if(e.path!==i)throw new Pn("Cannot perform the operation at a path that does not exist","OPERATION_PATH_UNRESOLVABLE",n,e,t)}else if("move"===e.op||"copy"===e.op){var a=$W([{op:"_get",path:e.from,value:void 0}],t);if(a&&"OPERATION_PATH_UNRESOLVABLE"===a.name)throw new Pn("Cannot perform the operation from a path that does not exist","OPERATION_FROM_UNRESOLVABLE",n,e,t)}}function $W(e,n,t){try{if(!Array.isArray(e))throw new Pn("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");if(n)OC(Vo(n),Vo(e),t||!0);else{t=t||RC;for(var i=0;i<e.length;i++)t(e[i],i,n,void 0)}}catch(r){if(r instanceof Pn)return r;throw r}}function X_(e,n){if(e===n)return!0;if(e&&n&&"object"==typeof e&&"object"==typeof n){var r,o,s,t=Array.isArray(e),i=Array.isArray(n);if(t&&i){if((o=e.length)!=n.length)return!1;for(r=o;0!=r--;)if(!X_(e[r],n[r]))return!1;return!0}if(t!=i)return!1;var a=Object.keys(e);if((o=a.length)!==Object.keys(n).length)return!1;for(r=o;0!=r--;)if(!n.hasOwnProperty(a[r]))return!1;for(r=o;0!=r--;)if(!X_(e[s=a[r]],n[s]))return!1;return!0}return e!=e&&n!=n}var Zk=new WeakMap,PIe=function e(n){this.observers=new Map,this.obj=n},LIe=function e(n,t){this.callback=n,this.observer=t};function zIe(e,n){n.unobserve()}function UIe(e,n){var i,r=function $Ie(e){return Zk.get(e)}(e);if(r){var o=function BIe(e,n){return e.observers.get(n)}(r,n);i=o&&o.observer}else r=new PIe(e),Zk.set(e,r);if(i)return i;if(i={},r.value=Vo(e),n){i.callback=n,i.next=null;var s=function(){Jk(i)},a=function(){clearTimeout(i.next),i.next=setTimeout(s)};typeof window<"u"&&(window.addEventListener("mouseup",a),window.addEventListener("keyup",a),window.addEventListener("mousedown",a),window.addEventListener("keydown",a),window.addEventListener("change",a))}return i.patches=[],i.object=e,i.unobserve=function(){Jk(i),clearTimeout(i.next),function VIe(e,n){e.observers.delete(n.callback)}(r,i),typeof window<"u"&&(window.removeEventListener("mouseup",a),window.removeEventListener("keyup",a),window.removeEventListener("mousedown",a),window.removeEventListener("keydown",a),window.removeEventListener("change",a))},r.observers.set(n,new LIe(n,i)),i}function Jk(e,n){void 0===n&&(n=!1);var t=Zk.get(e.object);eO(t.value,e.object,e.patches,"",n),e.patches.length&&OC(t.value,e.patches);var i=e.patches;return i.length>0&&(e.patches=[],e.callback&&e.callback(i)),i}function eO(e,n,t,i,r){if(n!==e){"function"==typeof n.toJSON&&(n=n.toJSON());for(var o=Yk(n),s=Yk(e),l=!1,c=s.length-1;c>=0;c--){var d=e[u=s[c]];if(!AC(n,u)||void 0===n[u]&&void 0!==d&&!1===Array.isArray(n))Array.isArray(e)===Array.isArray(n)?(r&&t.push({op:"test",path:i+"/"+gc(u),value:Vo(d)}),t.push({op:"remove",path:i+"/"+gc(u)}),l=!0):(r&&t.push({op:"test",path:i,value:e}),t.push({op:"replace",path:i,value:n}));else{var f=n[u];"object"==typeof d&&null!=d&&"object"==typeof f&&null!=f&&Array.isArray(d)===Array.isArray(f)?eO(d,f,t,i+"/"+gc(u),r):d!==f&&(r&&t.push({op:"test",path:i+"/"+gc(u),value:Vo(d)}),t.push({op:"replace",path:i+"/"+gc(u),value:Vo(f)}))}}if(l||o.length!=s.length)for(c=0;c<o.length;c++){var u;!AC(e,u=o[c])&&void 0!==n[u]&&t.push({op:"add",path:i+"/"+gc(u),value:Vo(n[u])})}}}function HIe(e,n,t){void 0===t&&(t=!1);var i=[];return eO(e,n,i,"",t),i}Object.assign({},Hd,js,{JsonPatchError:LW,deepClone:Vo,escapePathComponent:gc,unescapePathComponent:FW});var jIe=mt(207),tO=mt.n(jIe);function no(e,n,t){return e.fields=n||[],e.fname=t,e}function Ln(e){return null==e?null:e.fname}function tr(e){return null==e?null:e.fields}function BW(e){return 1===e.length?qIe(e[0]):WIe(e)}const qIe=e=>function(n){return n[e]},WIe=e=>{const n=e.length;return function(t){for(let i=0;i<n;++i)t=t[e[i]];return t}};function re(e){throw Error(e)}function sl(e){const n=[],t=e.length;let s,a,l,i=null,r=0,o="";function c(){n.push(o+e.substring(s,a)),o="",s=a+1}for(e+="",s=a=0;a<t;++a)if(l=e[a],"\\"===l)o+=e.substring(s,a++),s=a;else if(l===i)c(),i=null,r=-1;else{if(i)continue;s===r&&'"'===l||s===r&&"'"===l?(s=a+1,i=l):"."!==l||r?"["===l?(a>s&&c(),r=s=a+1):"]"===l&&(r||re("Access path missing open bracket: "+e),r>0&&c(),r=0,s=a+1):a>s?c():s=a+1}return r&&re("Access path missing closing bracket: "+e),i&&re("Access path missing closing quote: "+e),a>s&&(a++,c()),n}function Cs(e,n,t){const i=sl(e);return e=1===i.length?i[0]:e,no((t&&t.get||BW)(i),[e],n||e)}const Q_=Cs("id"),nr=no(e=>e,[],"identity"),Tu=no(()=>0,[],"zero"),bg=no(()=>1,[],"one"),xs=no(()=>!0,[],"true"),Du=no(()=>!1,[],"false");function GIe(e,n,t){const i=[n].concat([].slice.call(t));console[e].apply(console,i)}const VW=0,nO=1,iO=2,zW=3,UW=4;function rO(e,n){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:GIe,i=e||VW;return{level(r){return arguments.length?(i=+r,this):i},error(){return i>=nO&&t(n||"error","ERROR",arguments),this},warn(){return i>=iO&&t(n||"warn","WARN",arguments),this},info(){return i>=zW&&t(n||"log","INFO",arguments),this},debug(){return i>=UW&&t(n||"log","DEBUG",arguments),this}}}var oe=Array.isArray;function Ee(e){return e===Object(e)}const HW=e=>"__proto__"!==e;function wg(){for(var e=arguments.length,n=new Array(e),t=0;t<e;t++)n[t]=arguments[t];return n.reduce((i,r)=>{for(const o in r)"signals"===o?i.signals=KIe(i.signals,r.signals):Cg(i,o,r[o],"legend"===o?{layout:1}:"style"===o||null);return i},{})}function Cg(e,n,t,i){if(!HW(n))return;let r,o;if(Ee(t)&&!oe(t))for(r in o=Ee(e[n])?e[n]:e[n]={},t)i&&(!0===i||i[r])?Cg(o,r,t[r]):HW(r)&&(o[r]=t[r]);else e[n]=t}function KIe(e,n){if(null==e)return n;const t={},i=[];function r(o){t[o.name]||(t[o.name]=1,i.push(o))}return n.forEach(r),e.forEach(r),i}function Tt(e){return e[e.length-1]}function ir(e){return null==e||""===e?null:+e}const jW=e=>n=>e*Math.exp(n),qW=e=>n=>Math.log(e*n),WW=e=>n=>Math.sign(n)*Math.log1p(Math.abs(n/e)),GW=e=>n=>Math.sign(n)*Math.expm1(Math.abs(n))*e,FC=e=>n=>n<0?-Math.pow(-n,e):Math.pow(n,e);function NC(e,n,t,i){const r=t(e[0]),o=t(Tt(e)),s=(o-r)*n;return[i(r-s),i(o-s)]}function KW(e,n){return NC(e,n,ir,nr)}function YW(e,n){var t=Math.sign(e[0]);return NC(e,n,qW(t),jW(t))}function XW(e,n,t){return NC(e,n,FC(t),FC(1/t))}function QW(e,n,t){return NC(e,n,WW(t),GW(t))}function PC(e,n,t,i,r){const o=i(e[0]),s=i(Tt(e)),a=null!=n?i(n):(o+s)/2;return[r(a+(o-a)*t),r(a+(s-a)*t)]}function oO(e,n,t){return PC(e,n,t,ir,nr)}function sO(e,n,t){const i=Math.sign(e[0]);return PC(e,n,t,qW(i),jW(i))}function LC(e,n,t,i){return PC(e,n,t,FC(i),FC(1/i))}function aO(e,n,t,i){return PC(e,n,t,WW(i),GW(i))}function ZW(e){return 1+~~(new Date(e).getMonth()/3)}function JW(e){return 1+~~(new Date(e).getUTCMonth()/3)}function Ce(e){return null!=e?oe(e)?e:[e]:[]}function eG(e,n,t){let o,i=e[0],r=e[1];return r<i&&(o=r,r=i,i=o),o=r-i,o>=t-n?[n,t]:[i=Math.min(Math.max(i,n),t-o),i+o]}function ct(e){return"function"==typeof e}const YIe="descending";function lO(e,n,t){t=t||{},n=Ce(n)||[];const i=[],r=[],o={},s=t.comparator||XIe;return Ce(e).forEach((a,l)=>{null!=a&&(i.push(n[l]===YIe?-1:1),r.push(a=ct(a)?a:Cs(a,null,t)),(tr(a)||[]).forEach(c=>o[c]=1))}),0===r.length?null:no(s(r,i),Object.keys(o))}const $C=(e,n)=>(e<n||null==e)&&null!=n?-1:(e>n||null==n)&&null!=e?1:(n=n instanceof Date?+n:n,(e=e instanceof Date?+e:e)!==e&&n==n?-1:n!=n&&e==e?1:0),XIe=(e,n)=>1===e.length?QIe(e[0],n[0]):ZIe(e,n,e.length),QIe=(e,n)=>function(t,i){return $C(e(t),e(i))*n},ZIe=(e,n,t)=>(n.push(0),function(i,r){let o,s=0,a=-1;for(;0===s&&++a<t;)o=e[a],s=$C(o(i),o(r));return s*n[a]});function rr(e){return ct(e)?e:()=>e}function cO(e,n){let t;return i=>{t&&clearTimeout(t),t=setTimeout(()=>(n(i),t=null),e)}}function ut(e){for(let n,t,i=1,r=arguments.length;i<r;++i)for(t in n=arguments[i],n)e[t]=n[t];return e}function al(e,n){let i,r,o,s,t=0;if(e&&(i=e.length))if(null==n){for(r=e[t];t<i&&(null==r||r!=r);r=e[++t]);for(o=s=r;t<i;++t)r=e[t],null!=r&&(r<o&&(o=r),r>s&&(s=r))}else{for(r=n(e[t]);t<i&&(null==r||r!=r);r=n(e[++t]));for(o=s=r;t<i;++t)r=n(e[t]),null!=r&&(r<o&&(o=r),r>s&&(s=r))}return[o,s]}function tG(e,n){const t=e.length;let r,o,s,a,l,i=-1;if(null==n){for(;++i<t;)if(o=e[i],null!=o&&o>=o){r=s=o;break}if(i===t)return[-1,-1];for(a=l=i;++i<t;)o=e[i],null!=o&&(r>o&&(r=o,a=i),s<o&&(s=o,l=i))}else{for(;++i<t;)if(o=n(e[i],i,e),null!=o&&o>=o){r=s=o;break}if(i===t)return[-1,-1];for(a=l=i;++i<t;)o=n(e[i],i,e),null!=o&&(r>o&&(r=o,a=i),s<o&&(s=o,l=i))}return[a,l]}const JIe=Object.prototype.hasOwnProperty;function $e(e,n){return JIe.call(e,n)}const BC={};function xg(e){let t,n={};function i(o){return $e(n,o)&&n[o]!==BC}const r={size:0,empty:0,object:n,has:i,get:o=>i(o)?n[o]:void 0,set(o,s){return i(o)||(++r.size,n[o]===BC&&--r.empty),n[o]=s,this},delete(o){return i(o)&&(--r.size,++r.empty,n[o]=BC),this},clear(){r.size=r.empty=0,r.object=n={}},test(o){return arguments.length?(t=o,r):t},clean(){const o={};let s=0;for(const a in n){const l=n[a];l!==BC&&(!t||!t(l))&&(o[a]=l,++s)}r.size=s,r.empty=0,r.object=n=o}};return e&&Object.keys(e).forEach(o=>{r.set(o,e[o])}),r}function nG(e,n,t,i,r,o){if(!t&&0!==t)return o;const s=+t;let c,a=e[0],l=Tt(e);l<a&&(c=a,a=l,l=c),c=Math.abs(n-a);const u=Math.abs(l-n);return c<u&&c<=s?i:u<=s?r:o}function pe(e,n,t){const i=e.prototype=Object.create(n.prototype);return Object.defineProperty(i,"constructor",{value:e,writable:!0,enumerable:!0,configurable:!0}),ut(i,t)}function Eg(e,n,t,i){let s,r=n[0],o=n[n.length-1];return r>o&&(s=r,r=o,o=s),i=void 0===i||i,((t=void 0===t||t)?r<=e:r<e)&&(i?e<=o:e<o)}function Iu(e){return"boolean"==typeof e}function Mu(e){return"[object Date]"===Object.prototype.toString.call(e)}function iG(e){return e&&ct(e[Symbol.iterator])}function Ft(e){return"number"==typeof e}function rG(e){return"[object RegExp]"===Object.prototype.toString.call(e)}function xe(e){return"string"==typeof e}function uO(e,n,t){e&&(e=n?Ce(e).map(a=>a.replace(/\\(.)/g,"$1")):Ce(e));const i=e&&e.length,r=t&&t.get||BW,o=a=>r(n?[a]:sl(a));let s;if(i)if(1===i){const a=o(e[0]);s=function(l){return""+a(l)}}else{const a=e.map(o);s=function(l){let c=""+a[0](l),u=0;for(;++u<i;)c+="|"+a[u](l);return c}}else s=function(){return""};return no(s,e,"key")}function oG(e,n){const t=e[0],i=Tt(e),r=+n;return r?1===r?i:t+r*(i-t):t}const eMe=1e4;function sG(e){let n,t,i;e=+e||eMe;const r=()=>{n={},t={},i=0},o=(s,a)=>(++i>e&&(t=n,n={},i=1),n[s]=a);return r(),{clear:r,has:s=>$e(n,s)||$e(t,s),get:s=>$e(n,s)?n[s]:$e(t,s)?o(s,t[s]):void 0,set:(s,a)=>$e(n,s)?n[s]=a:o(s,a)}}function aG(e,n,t,i){const r=n.length,o=t.length;if(!o)return n;if(!r)return t;const s=i||new n.constructor(r+o);let a=0,l=0,c=0;for(;a<r&&l<o;++c)s[c]=e(n[a],t[l])>0?t[l++]:n[a++];for(;a<r;++a,++c)s[c]=n[a];for(;l<o;++l,++c)s[c]=t[l];return s}function Z_(e,n){let t="";for(;--n>=0;)t+=e;return t}function lG(e,n,t,i){const r=t||" ",o=e+"",s=n-o.length;return s<=0?o:"left"===i?Z_(r,s)+o:"center"===i?Z_(r,~~(s/2))+o+Z_(r,Math.ceil(s/2)):o+Z_(r,s)}function J_(e){return e&&Tt(e)-e[0]||0}function ge(e){return oe(e)?"["+e.map(ge)+"]":Ee(e)||xe(e)?JSON.stringify(e).replace("\u2028","\\u2028").replace("\u2029","\\u2029"):e}function dO(e){return null==e||""===e?null:!(!e||"false"===e||"0"===e||!e)}const tMe=e=>Ft(e)||Mu(e)?e:Date.parse(e);function fO(e,n){return n=n||tMe,null==e||""===e?null:n(e)}function hO(e){return null==e||""===e?null:e+""}function oa(e){const n={},t=e.length;for(let i=0;i<t;++i)n[e[i]]=!0;return n}function cG(e,n,t,i){const r=i??"\u2026",o=e+"",s=o.length,a=Math.max(0,n-r.length);return s<=n?o:"left"===t?r+o.slice(s-a):"center"===t?o.slice(0,Math.ceil(a/2))+r+o.slice(s-~~(a/2)):o.slice(0,a)+r}function Au(e,n,t){if(e)if(n){const i=e.length;for(let r=0;r<i;++r){const o=n(e[r]);o&&t(o,r,e)}}else e.forEach(t)}var uG={},pO={},gO=34,ey=10,mO=13;function dG(e){return new Function("d","return {"+e.map(function(n,t){return JSON.stringify(n)+": d["+t+'] || ""'}).join(",")+"}")}function fG(e){var n=Object.create(null),t=[];return e.forEach(function(i){for(var r in i)r in n||t.push(n[r]=r)}),t}function io(e,n){var t=e+"",i=t.length;return i<n?new Array(n-i+1).join(0)+t:t}function oMe(e){var n=new RegExp('["'+e+"\n\r]"),t=e.charCodeAt(0);function r(d,f){var _,h=[],p=d.length,g=0,m=0,y=p<=0,v=!1;function b(){if(y)return pO;if(v)return v=!1,uG;var x,S,C=g;if(d.charCodeAt(C)===gO){for(;g++<p&&d.charCodeAt(g)!==gO||d.charCodeAt(++g)===gO;);return(x=g)>=p?y=!0:(S=d.charCodeAt(g++))===ey?v=!0:S===mO&&(v=!0,d.charCodeAt(g)===ey&&++g),d.slice(C+1,x-1).replace(/""/g,'"')}for(;g<p;){if((S=d.charCodeAt(x=g++))===ey)v=!0;else if(S===mO)v=!0,d.charCodeAt(g)===ey&&++g;else if(S!==t)continue;return d.slice(C,x)}return y=!0,d.slice(C,p)}for(d.charCodeAt(p-1)===ey&&--p,d.charCodeAt(p-1)===mO&&--p;(_=b())!==pO;){for(var w=[];_!==uG&&_!==pO;)w.push(_),_=b();f&&null==(w=f(w,m++))||h.push(w)}return h}function o(d,f){return d.map(function(h){return f.map(function(p){return u(h[p])}).join(e)})}function c(d){return d.map(u).join(e)}function u(d){return null==d?"":d instanceof Date?function rMe(e){var n=e.getUTCHours(),t=e.getUTCMinutes(),i=e.getUTCSeconds(),r=e.getUTCMilliseconds();return isNaN(e)?"Invalid Date":function iMe(e){return e<0?"-"+io(-e,6):e>9999?"+"+io(e,6):io(e,4)}(e.getUTCFullYear())+"-"+io(e.getUTCMonth()+1,2)+"-"+io(e.getUTCDate(),2)+(r?"T"+io(n,2)+":"+io(t,2)+":"+io(i,2)+"."+io(r,3)+"Z":i?"T"+io(n,2)+":"+io(t,2)+":"+io(i,2)+"Z":t||n?"T"+io(n,2)+":"+io(t,2)+"Z":"")}(d):n.test(d+="")?'"'+d.replace(/"/g,'""')+'"':d}return{parse:function i(d,f){var h,p,g=r(d,function(m,_){if(h)return h(m,_-1);p=m,h=f?function nMe(e,n){var t=dG(e);return function(i,r){return n(t(i),r,e)}}(m,f):dG(m)});return g.columns=p||[],g},parseRows:r,format:function s(d,f){return null==f&&(f=fG(d)),[f.map(u).join(e)].concat(o(d,f)).join("\n")},formatBody:function a(d,f){return null==f&&(f=fG(d)),o(d,f).join("\n")},formatRows:function l(d){return d.map(c).join("\n")},formatRow:c,formatValue:u}}function aMe(e){return e}function cMe(e,n){return"string"==typeof n&&(n=e.objects[n]),"GeometryCollection"===n.type?{type:"FeatureCollection",features:n.geometries.map(function(t){return hG(e,t)})}:hG(e,n)}function hG(e,n){var t=n.id,i=n.bbox,r=null==n.properties?{}:n.properties,o=pG(e,n);return null==t&&null==i?{type:"Feature",properties:r,geometry:o}:null==i?{type:"Feature",id:t,properties:r,geometry:o}:{type:"Feature",id:t,bbox:i,properties:r,geometry:o}}function pG(e,n){var t=function lMe(e){if(null==e)return aMe;var n,t,i=e.scale[0],r=e.scale[1],o=e.translate[0],s=e.translate[1];return function(a,l){l||(n=t=0);var c=2,u=a.length,d=new Array(u);for(d[0]=(n+=a[0])*i+o,d[1]=(t+=a[1])*r+s;c<u;)d[c]=a[c],++c;return d}}(e.transform),i=e.arcs;function r(u,d){d.length&&d.pop();for(var f=i[u<0?~u:u],h=0,p=f.length;h<p;++h)d.push(t(f[h],h));u<0&&function sMe(e,n){for(var t,i=e.length,r=i-n;r<--i;)t=e[r],e[r++]=e[i],e[i]=t}(d,p)}function o(u){return t(u)}function s(u){for(var d=[],f=0,h=u.length;f<h;++f)r(u[f],d);return d.length<2&&d.push(d[0]),d}function a(u){for(var d=s(u);d.length<4;)d.push(d[0]);return d}function l(u){return u.map(a)}return function c(u){var f,d=u.type;switch(d){case"GeometryCollection":return{type:d,geometries:u.geometries.map(c)};case"Point":f=o(u.coordinates);break;case"MultiPoint":f=u.coordinates.map(o);break;case"LineString":f=s(u.arcs);break;case"MultiLineString":f=u.arcs.map(s);break;case"Polygon":f=l(u.arcs);break;case"MultiPolygon":f=u.arcs.map(l);break;default:return null}return{type:d,coordinates:f}}(n)}function uMe(e,n){var t={},i={},r={},o=[],s=-1;function l(c,u){for(var d in c){var f=c[d];delete u[f.start],delete f.start,delete f.end,f.forEach(function(h){t[h<0?~h:h]=1}),o.push(f)}}return n.forEach(function(c,u){var f,d=e.arcs[c<0?~c:c];d.length<3&&!d[1][0]&&!d[1][1]&&(f=n[++s],n[s]=c,n[u]=f)}),n.forEach(function(c){var h,p,u=function a(c){var f,u=e.arcs[c<0?~c:c],d=u[0];return e.transform?(f=[0,0],u.forEach(function(h){f[0]+=h[0],f[1]+=h[1]})):f=u[u.length-1],c<0?[f,d]:[d,f]}(c),d=u[0],f=u[1];if(h=r[d])if(delete r[h.end],h.push(c),h.end=f,p=i[f]){delete i[p.start];var g=p===h?h:h.concat(p);i[g.start=h.start]=r[g.end=p.end]=g}else i[h.start]=r[h.end]=h;else if(h=i[f])if(delete i[h.start],h.unshift(c),h.start=d,p=r[d]){delete r[p.end];var m=p===h?h:p.concat(h);i[m.start=p.start]=r[m.end=h.end]=m}else i[h.start]=r[h.end]=h;else i[(h=[c]).start=d]=r[h.end=f]=h}),l(r,i),l(i,r),n.forEach(function(c){t[c<0?~c:c]||o.push([c])}),o}function dMe(e){return pG(e,fMe.apply(this,arguments))}function fMe(e,n,t){var i,r,o;if(arguments.length>1)i=function hMe(e,n,t){var o,i=[],r=[];function s(d){var f=d<0?~d:d;(r[f]||(r[f]=[])).push({i:d,g:o})}function a(d){d.forEach(s)}function l(d){d.forEach(a)}return function u(d){switch(o=d,d.type){case"GeometryCollection":d.geometries.forEach(u);break;case"LineString":a(d.arcs);break;case"MultiLineString":case"Polygon":l(d.arcs);break;case"MultiPolygon":!function c(d){d.forEach(l)}(d.arcs)}}(n),r.forEach(null==t?function(d){i.push(d[0].i)}:function(d){t(d[0].g,d[d.length-1].g)&&i.push(d[0].i)}),i}(0,n,t);else for(r=0,i=new Array(o=e.arcs.length);r<o;++r)i[r]=r;return{type:"MultiLineString",arcs:uMe(e,i)}}const pMe=Math.sqrt(50),gMe=Math.sqrt(10),mMe=Math.sqrt(2);function VC(e,n,t){const i=(n-e)/Math.max(0,t),r=Math.floor(Math.log10(i)),o=i/Math.pow(10,r),s=o>=pMe?10:o>=gMe?5:o>=mMe?2:1;let a,l,c;return r<0?(c=Math.pow(10,-r)/s,a=Math.round(e*c),l=Math.round(n*c),a/c<e&&++a,l/c>n&&--l,c=-c):(c=Math.pow(10,r)*s,a=Math.round(e/c),l=Math.round(n/c),a*c<e&&++a,l*c>n&&--l),l<a&&.5<=t&&t<2?VC(e,n,2*t):[a,l,c]}function _O(e,n,t){if(!((t=+t)>0))return[];if((e=+e)==(n=+n))return[e];const i=n<e,[r,o,s]=i?VC(n,e,t):VC(e,n,t);if(!(o>=r))return[];const a=o-r+1,l=new Array(a);if(i)if(s<0)for(let c=0;c<a;++c)l[c]=(o-c)/-s;else for(let c=0;c<a;++c)l[c]=(o-c)*s;else if(s<0)for(let c=0;c<a;++c)l[c]=(r+c)/-s;else for(let c=0;c<a;++c)l[c]=(r+c)*s;return l}function yO(e,n,t){return VC(e=+e,n=+n,t=+t)[2]}function ku(e,n,t){t=+t;const i=(n=+n)<(e=+e),r=i?yO(n,e,t):yO(e,n,t);return(i?-1:1)*(r<0?1/-r:r)}var yG,_Me=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Mf(e){if(!(n=_Me.exec(e)))throw new Error("invalid format: "+e);var n;return new vO({fill:n[1],align:n[2],sign:n[3],symbol:n[4],zero:n[5],width:n[6],comma:n[7],precision:n[8]&&n[8].slice(1),trim:n[9],type:n[10]})}function vO(e){this.fill=void 0===e.fill?" ":e.fill+"",this.align=void 0===e.align?">":e.align+"",this.sign=void 0===e.sign?"-":e.sign+"",this.symbol=void 0===e.symbol?"":e.symbol+"",this.zero=!!e.zero,this.width=void 0===e.width?void 0:+e.width,this.comma=!!e.comma,this.precision=void 0===e.precision?void 0:+e.precision,this.trim=!!e.trim,this.type=void 0===e.type?"":e.type+""}function zC(e,n){if((t=(e=n?e.toExponential(n-1):e.toExponential()).indexOf("e"))<0)return null;var t,i=e.slice(0,t);return[i.length>1?i[0]+i.slice(2):i,+e.slice(t+1)]}function Sg(e){return(e=zC(Math.abs(e)))?e[1]:NaN}function gG(e,n){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(Sg(n)/3)))-Sg(Math.abs(e)))}function mG(e,n){return e=Math.abs(e),n=Math.abs(n)-e,Math.max(0,Sg(n)-Sg(e))+1}function _G(e){return Math.max(0,-Sg(Math.abs(e)))}function vG(e,n){var t=zC(e,n);if(!t)return e+"";var i=t[0],r=t[1];return r<0?"0."+new Array(-r).join("0")+i:i.length>r+1?i.slice(0,r+1)+"."+i.slice(r+1):i+new Array(r-i.length+2).join("0")}Mf.prototype=vO.prototype,vO.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};const bG={"%":(e,n)=>(100*e).toFixed(n),b:e=>Math.round(e).toString(2),c:e=>e+"",d:function yMe(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)},e:(e,n)=>e.toExponential(n),f:(e,n)=>e.toFixed(n),g:(e,n)=>e.toPrecision(n),o:e=>Math.round(e).toString(8),p:(e,n)=>vG(100*e,n),r:vG,s:function CMe(e,n){var t=zC(e,n);if(!t)return e+"";var i=t[0],r=t[1],o=r-(yG=3*Math.max(-8,Math.min(8,Math.floor(r/3))))+1,s=i.length;return o===s?i:o>s?i+new Array(o-s+1).join("0"):o>0?i.slice(0,o)+"."+i.slice(o):"0."+new Array(1-o).join("0")+zC(e,Math.max(0,n+o-1))[0]},X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function wG(e){return e}var UC,HC,bO,CG=Array.prototype.map,xG=["y","z","a","f","p","n","\xb5","m","","k","M","G","T","P","E","Z","Y"];function EG(e){var n=void 0===e.grouping||void 0===e.thousands?wG:function vMe(e,n){return function(t,i){for(var r=t.length,o=[],s=0,a=e[0],l=0;r>0&&a>0&&(l+a+1>i&&(a=Math.max(1,i-l)),o.push(t.substring(r-=a,r+a)),!((l+=a+1)>i));)a=e[s=(s+1)%e.length];return o.reverse().join(n)}}(CG.call(e.grouping,Number),e.thousands+""),t=void 0===e.currency?"":e.currency[0]+"",i=void 0===e.currency?"":e.currency[1]+"",r=void 0===e.decimal?".":e.decimal+"",o=void 0===e.numerals?wG:function bMe(e){return function(n){return n.replace(/[0-9]/g,function(t){return e[+t]})}}(CG.call(e.numerals,String)),s=void 0===e.percent?"%":e.percent+"",a=void 0===e.minus?"\u2212":e.minus+"",l=void 0===e.nan?"NaN":e.nan+"";function c(d){var f=(d=Mf(d)).fill,h=d.align,p=d.sign,g=d.symbol,m=d.zero,_=d.width,y=d.comma,v=d.precision,b=d.trim,w=d.type;"n"===w?(y=!0,w="g"):bG[w]||(void 0===v&&(v=12),b=!0,w="g"),(m||"0"===f&&"="===h)&&(m=!0,f="0",h="=");var x="$"===g?t:"#"===g&&/[boxX]/.test(w)?"0"+w.toLowerCase():"",C="$"===g?i:/[%p]/.test(w)?s:"",S=bG[w],A=/[defgprs%]/.test(w);function M(N){var E,D,I,V=x,P=C;if("c"===w)P=S(N)+P,N="";else{var O=(N=+N)<0||1/N<0;if(N=isNaN(N)?l:S(Math.abs(N),v),b&&(N=function wMe(e){e:for(var r,n=e.length,t=1,i=-1;t<n;++t)switch(e[t]){case".":i=r=t;break;case"0":0===i&&(i=t),r=t;break;default:if(!+e[t])break e;i>0&&(i=0)}return i>0?e.slice(0,i)+e.slice(r+1):e}(N)),O&&0==+N&&"+"!==p&&(O=!1),V=(O?"("===p?p:a:"-"===p||"("===p?"":p)+V,P=("s"===w?xG[8+yG/3]:"")+P+(O&&"("===p?")":""),A)for(E=-1,D=N.length;++E<D;)if(48>(I=N.charCodeAt(E))||I>57){P=(46===I?r+N.slice(E+1):N.slice(E))+P,N=N.slice(0,E);break}}y&&!m&&(N=n(N,1/0));var T=V.length+N.length+P.length,R=T<_?new Array(_-T+1).join(f):"";switch(y&&m&&(N=n(R+N,R.length?_-P.length:1/0),R=""),h){case"<":N=V+N+P+R;break;case"=":N=V+R+N+P;break;case"^":N=R.slice(0,T=R.length>>1)+V+N+P+R.slice(T);break;default:N=R+V+N+P}return o(N)}return v=void 0===v?6:/[gprs]/.test(w)?Math.max(1,Math.min(21,v)):Math.max(0,Math.min(20,v)),M.toString=function(){return d+""},M}return{format:c,formatPrefix:function u(d,f){var h=c(((d=Mf(d)).type="f",d)),p=3*Math.max(-8,Math.min(8,Math.floor(Sg(f)/3))),g=Math.pow(10,-p),m=xG[8+p/3];return function(_){return h(g*_)+m}}}}!function xMe(e){UC=EG(e),HC=UC.format,bO=UC.formatPrefix}({thousands:",",grouping:[3],currency:["$",""]});const wO=new Date,CO=new Date;function li(e,n,t,i){function r(o){return e(o=0===arguments.length?new Date:new Date(+o)),o}return r.floor=o=>(e(o=new Date(+o)),o),r.ceil=o=>(e(o=new Date(o-1)),n(o,1),e(o),o),r.round=o=>{const s=r(o),a=r.ceil(o);return o-s<a-o?s:a},r.offset=(o,s)=>(n(o=new Date(+o),null==s?1:Math.floor(s)),o),r.range=(o,s,a)=>{const l=[];if(o=r.ceil(o),a=null==a?1:Math.floor(a),!(o<s&&a>0))return l;let c;do{l.push(c=new Date(+o)),n(o,a),e(o)}while(c<o&&o<s);return l},r.filter=o=>li(s=>{if(s>=s)for(;e(s),!o(s);)s.setTime(s-1)},(s,a)=>{if(s>=s)if(a<0)for(;++a<=0;)for(;n(s,-1),!o(s););else for(;--a>=0;)for(;n(s,1),!o(s););}),t&&(r.count=(o,s)=>(wO.setTime(+o),CO.setTime(+s),e(wO),e(CO),Math.floor(t(wO,CO))),r.every=o=>(o=Math.floor(o),isFinite(o)&&o>0?o>1?r.filter(i?s=>i(s)%o==0:s=>r.count(0,s)%o==0):r:null)),r}const mc=1e3,Es=6e4,_c=60*Es,yc=24*_c,xO=7*yc,SG=30*yc,EO=365*yc,vc=li(e=>e.setHours(0,0,0,0),(e,n)=>e.setDate(e.getDate()+n),(e,n)=>(n-e-(n.getTimezoneOffset()-e.getTimezoneOffset())*Es)/yc,e=>e.getDate()-1),Ou=li(e=>{e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCDate(e.getUTCDate()+n)},(e,n)=>(n-e)/yc,e=>e.getUTCDate()-1),TG=li(e=>{e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCDate(e.getUTCDate()+n)},(e,n)=>(n-e)/yc,e=>Math.floor(e/yc));function Af(e){return li(n=>{n.setDate(n.getDate()-(n.getDay()+7-e)%7),n.setHours(0,0,0,0)},(n,t)=>{n.setDate(n.getDate()+7*t)},(n,t)=>(t-n-(t.getTimezoneOffset()-n.getTimezoneOffset())*Es)/xO)}const Tg=Af(0),jC=Af(1),Dg=(Af(2),Af(3),Af(4));function kf(e){return li(n=>{n.setUTCDate(n.getUTCDate()-(n.getUTCDay()+7-e)%7),n.setUTCHours(0,0,0,0)},(n,t)=>{n.setUTCDate(n.getUTCDate()+7*t)},(n,t)=>(t-n)/xO)}Af(5),Af(6);const Ig=kf(0),qC=kf(1),Mg=(kf(2),kf(3),kf(4)),ll=(kf(5),kf(6),li(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,n)=>{e.setFullYear(e.getFullYear()+n)},(e,n)=>n.getFullYear()-e.getFullYear(),e=>e.getFullYear()));ll.every=e=>isFinite(e=Math.floor(e))&&e>0?li(n=>{n.setFullYear(Math.floor(n.getFullYear()/e)*e),n.setMonth(0,1),n.setHours(0,0,0,0)},(n,t)=>{n.setFullYear(n.getFullYear()+t*e)}):null;const cl=li(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCFullYear(e.getUTCFullYear()+n)},(e,n)=>n.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());cl.every=e=>isFinite(e=Math.floor(e))&&e>0?li(n=>{n.setUTCFullYear(Math.floor(n.getUTCFullYear()/e)*e),n.setUTCMonth(0,1),n.setUTCHours(0,0,0,0)},(n,t)=>{n.setUTCFullYear(n.getUTCFullYear()+t*e)}):null;const ty=li(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,n)=>{e.setMonth(e.getMonth()+n)},(e,n)=>n.getMonth()-e.getMonth()+12*(n.getFullYear()-e.getFullYear()),e=>e.getMonth()),ny=li(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCMonth(e.getUTCMonth()+n)},(e,n)=>n.getUTCMonth()-e.getUTCMonth()+12*(n.getUTCFullYear()-e.getUTCFullYear()),e=>e.getUTCMonth()),WC=li(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*mc-e.getMinutes()*Es)},(e,n)=>{e.setTime(+e+n*_c)},(e,n)=>(n-e)/_c,e=>e.getHours()),GC=li(e=>{e.setUTCMinutes(0,0,0)},(e,n)=>{e.setTime(+e+n*_c)},(e,n)=>(n-e)/_c,e=>e.getUTCHours()),KC=li(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*mc)},(e,n)=>{e.setTime(+e+n*Es)},(e,n)=>(n-e)/Es,e=>e.getMinutes()),YC=li(e=>{e.setUTCSeconds(0,0)},(e,n)=>{e.setTime(+e+n*Es)},(e,n)=>(n-e)/Es,e=>e.getUTCMinutes()),bc=li(e=>{e.setTime(e-e.getMilliseconds())},(e,n)=>{e.setTime(+e+n*mc)},(e,n)=>(n-e)/mc,e=>e.getUTCSeconds()),Ag=li(()=>{},(e,n)=>{e.setTime(+e+n)},(e,n)=>n-e);function wc(e,n){return null==e||null==n?NaN:e<n?-1:e>n?1:e>=n?0:NaN}function OMe(e,n){return null==e||null==n?NaN:n<e?-1:n>e?1:n>=e?0:NaN}function kg(e){let n,t,i;function r(a,l,c=0,u=a.length){if(c<u){if(0!==n(l,l))return u;do{const d=c+u>>>1;t(a[d],l)<0?c=d+1:u=d}while(c<u)}return c}return 2!==e.length?(n=wc,t=(a,l)=>wc(e(a),l),i=(a,l)=>e(a)-l):(n=e===wc||e===OMe?e:RMe,t=e,i=e),{left:r,center:function s(a,l,c=0,u=a.length){const d=r(a,l,c,u-1);return d>c&&i(a[d-1],l)>-i(a[d],l)?d-1:d},right:function o(a,l,c=0,u=a.length){if(c<u){if(0!==n(l,l))return u;do{const d=c+u>>>1;t(a[d],l)<=0?c=d+1:u=d}while(c<u)}return c}}}function RMe(){return 0}Ag.every=e=>(e=Math.floor(e),isFinite(e)&&e>0?e>1?li(n=>{n.setTime(Math.floor(n/e)*e)},(n,t)=>{n.setTime(+n+t*e)},(n,t)=>(t-n)/e):Ag:null);const $i="year",ro="quarter",or="month",ci="week",oo="date",sr="day",ul="dayofyear",zo="hours",Uo="minutes",Ss="seconds",sa="milliseconds",SO=[$i,ro,or,ci,oo,sr,ul,zo,Uo,Ss,sa],TO=SO.reduce((e,n,t)=>(e[n]=1+t,e),{});function DO(e){const n=Ce(e).slice(),t={};return n.length||re("Missing time unit."),n.forEach(r=>{$e(TO,r)?t[r]=1:re(`Invalid time unit: ${r}.`)}),(t[ci]||t[sr]?1:0)+(t[ro]||t[or]||t[oo]?1:0)+(t[ul]?1:0)>1&&re(`Incompatible time units: ${e}`),n.sort((r,o)=>TO[r]-TO[o]),n}const FMe={[$i]:"%Y ",[ro]:"Q%q ",[or]:"%b ",[oo]:"%d ",[ci]:"W%U ",[sr]:"%a ",[ul]:"%j ",[zo]:"%H:00",[Uo]:"00:%M",[Ss]:":%S",[sa]:".%L",[`${$i}-${or}`]:"%Y-%m ",[`${$i}-${or}-${oo}`]:"%Y-%m-%d ",[`${zo}-${Uo}`]:"%H:%M"};function DG(e,n){const t=ut({},FMe,n),i=DO(e),r=i.length;let a,l,o="",s=0;for(s=0;s<r;)for(a=i.length;a>s;--a)if(l=i.slice(s,a).join("-"),null!=t[l]){o+=t[l],s=a;break}return o.trim()}const Of=new Date;function IO(e){return Of.setFullYear(e),Of.setMonth(0),Of.setDate(1),Of.setHours(0,0,0,0),Of}function IG(e){return AG(new Date(e))}function MG(e){return MO(new Date(e))}function AG(e){return vc.count(IO(e.getFullYear())-1,e)}function MO(e){return Tg.count(IO(e.getFullYear())-1,e)}function AO(e){return IO(e).getDay()}function NMe(e,n,t,i,r,o,s){if(0<=e&&e<100){const a=new Date(-1,n,t,i,r,o,s);return a.setFullYear(e),a}return new Date(e,n,t,i,r,o,s)}function kG(e){return RG(new Date(e))}function OG(e){return kO(new Date(e))}function RG(e){const n=Date.UTC(e.getUTCFullYear(),0,1);return Ou.count(n-1,e)}function kO(e){const n=Date.UTC(e.getUTCFullYear(),0,1);return Ig.count(n-1,e)}function OO(e){return Of.setTime(Date.UTC(e,0,1)),Of.getUTCDay()}function PMe(e,n,t,i,r,o,s){if(0<=e&&e<100){const a=new Date(Date.UTC(-1,n,t,i,r,o,s));return a.setUTCFullYear(t.y),a}return new Date(Date.UTC(e,n,t,i,r,o,s))}function FG(e,n,t,i,r){const o=n||1,s=Tt(e),a=(_,y,v)=>function LMe(e,n,t,i){const r=t<=1?e:i?(o,s)=>i+t*Math.floor((e(o,s)-i)/t):(o,s)=>t*Math.floor(e(o,s)/t);return n?(o,s)=>n(r(o,s),s):r}(t[v=v||_],i[v],_===s&&o,y),l=new Date,c=oa(e),u=c[$i]?a($i):rr(2012),d=c[or]?a(or):c[ro]?a(ro):Tu,f=c[ci]&&c[sr]?a(sr,1,ci+sr):c[ci]?a(ci,1):c[sr]?a(sr,1):c[oo]?a(oo,1):c[ul]?a(ul,1):bg,h=c[zo]?a(zo):Tu,p=c[Uo]?a(Uo):Tu,g=c[Ss]?a(Ss):Tu,m=c[sa]?a(sa):Tu;return function(_){l.setTime(+_);const y=u(l);return r(y,d(l),f(l,y),h(l),p(l),g(l),m(l))}}function Og(e,n,t){return n+7*e-(t+6)%7}const $Me={[$i]:e=>e.getFullYear(),[ro]:e=>Math.floor(e.getMonth()/3),[or]:e=>e.getMonth(),[oo]:e=>e.getDate(),[zo]:e=>e.getHours(),[Uo]:e=>e.getMinutes(),[Ss]:e=>e.getSeconds(),[sa]:e=>e.getMilliseconds(),[ul]:e=>AG(e),[ci]:e=>MO(e),[ci+sr]:(e,n)=>Og(MO(e),e.getDay(),AO(n)),[sr]:(e,n)=>Og(1,e.getDay(),AO(n))},BMe={[ro]:e=>3*e,[ci]:(e,n)=>Og(e,0,AO(n))};function NG(e,n){return FG(e,n||1,$Me,BMe,NMe)}const VMe={[$i]:e=>e.getUTCFullYear(),[ro]:e=>Math.floor(e.getUTCMonth()/3),[or]:e=>e.getUTCMonth(),[oo]:e=>e.getUTCDate(),[zo]:e=>e.getUTCHours(),[Uo]:e=>e.getUTCMinutes(),[Ss]:e=>e.getUTCSeconds(),[sa]:e=>e.getUTCMilliseconds(),[ul]:e=>RG(e),[ci]:e=>kO(e),[sr]:(e,n)=>Og(1,e.getUTCDay(),OO(n)),[ci+sr]:(e,n)=>Og(kO(e),e.getUTCDay(),OO(n))},zMe={[ro]:e=>3*e,[ci]:(e,n)=>Og(e,0,OO(n))};function PG(e,n){return FG(e,n||1,VMe,zMe,PMe)}const UMe={[$i]:ll,[ro]:ty.every(3),[or]:ty,[ci]:Tg,[oo]:vc,[sr]:vc,[ul]:vc,[zo]:WC,[Uo]:KC,[Ss]:bc,[sa]:Ag},HMe={[$i]:cl,[ro]:ny.every(3),[or]:ny,[ci]:Ig,[oo]:Ou,[sr]:Ou,[ul]:Ou,[zo]:GC,[Uo]:YC,[Ss]:bc,[sa]:Ag};function Rg(e){return UMe[e]}function Fg(e){return HMe[e]}function LG(e,n,t){return e?e.offset(n,t):void 0}function $G(e,n,t){return LG(Rg(e),n,t)}function BG(e,n,t){return LG(Fg(e),n,t)}function VG(e,n,t,i){return e?e.range(n,t,i):void 0}function zG(e,n,t,i){return VG(Rg(e),n,t,i)}function UG(e,n,t,i){return VG(Fg(e),n,t,i)}const ry=6e4,oy=60*ry,XC=24*oy,HG=30*XC,RO=365*XC,jG=[$i,or,oo,zo,Uo,Ss,sa],sy=jG.slice(0,-1),ay=sy.slice(0,-1),ly=ay.slice(0,-1),qMe=ly.slice(0,-1),qG=[$i,or],WG=[$i],cy=[[sy,1,1e3],[sy,5,5e3],[sy,15,15e3],[sy,30,3e4],[ay,1,ry],[ay,5,5*ry],[ay,15,15*ry],[ay,30,30*ry],[ly,1,oy],[ly,3,3*oy],[ly,6,6*oy],[ly,12,12*oy],[qMe,1,XC],[[$i,ci],1,6048e5],[qG,1,HG],[qG,3,3*HG],[WG,1,RO]];function GG(e){const n=e.extent,t=e.maxbins||40,i=Math.abs(J_(n))/t;let o,s,r=kg(a=>a[2]).right(cy,i);return r===cy.length?(o=WG,s=ku(n[0]/RO,n[1]/RO,t)):r?(r=cy[i/cy[r-1][2]<cy[r][2]/i?r-1:r],o=r[0],s=r[1]):(o=jG,s=Math.max(ku(n[0],n[1],t),1)),{units:o,step:s}}function FO(e){if(0<=e.y&&e.y<100){var n=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return n.setFullYear(e.y),n}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function NO(e){if(0<=e.y&&e.y<100){var n=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return n.setUTCFullYear(e.y),n}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function uy(e,n,t){return{y:e,m:n,d:t,H:0,M:0,S:0,L:0}}function KG(e){var n=e.dateTime,t=e.date,i=e.time,r=e.periods,o=e.days,s=e.shortDays,a=e.months,l=e.shortMonths,c=dy(r),u=fy(r),d=dy(o),f=fy(o),h=dy(s),p=fy(s),g=dy(a),m=fy(a),_=dy(l),y=fy(l),v={a:function O(X){return s[X.getDay()]},A:function T(X){return o[X.getDay()]},b:function R(X){return l[X.getMonth()]},B:function F(X){return a[X.getMonth()]},c:null,d:eK,e:eK,f:gAe,g:SAe,G:DAe,H:fAe,I:hAe,j:pAe,L:tK,m:mAe,M:_Ae,p:function z(X){return r[+(X.getHours()>=12)]},q:function H(X){return 1+~~(X.getMonth()/3)},Q:aK,s:lK,S:yAe,u:vAe,U:bAe,V:wAe,w:CAe,W:xAe,x:null,X:null,y:EAe,Y:TAe,Z:IAe,"%":sK},b={a:function j(X){return s[X.getUTCDay()]},A:function U(X){return o[X.getUTCDay()]},b:function Q(X){return l[X.getUTCMonth()]},B:function ue(X){return a[X.getUTCMonth()]},c:null,d:iK,e:iK,f:OAe,g:UAe,G:jAe,H:MAe,I:AAe,j:kAe,L:rK,m:RAe,M:FAe,p:function te(X){return r[+(X.getUTCHours()>=12)]},q:function me(X){return 1+~~(X.getUTCMonth()/3)},Q:aK,s:lK,S:NAe,u:PAe,U:LAe,V:$Ae,w:BAe,W:VAe,x:null,X:null,y:zAe,Y:HAe,Z:qAe,"%":sK},w={a:function M(X,se,ae){var K=h.exec(se.slice(ae));return K?(X.w=p.get(K[0].toLowerCase()),ae+K[0].length):-1},A:function N(X,se,ae){var K=d.exec(se.slice(ae));return K?(X.w=f.get(K[0].toLowerCase()),ae+K[0].length):-1},b:function V(X,se,ae){var K=_.exec(se.slice(ae));return K?(X.m=y.get(K[0].toLowerCase()),ae+K[0].length):-1},B:function P(X,se,ae){var K=g.exec(se.slice(ae));return K?(X.m=m.get(K[0].toLowerCase()),ae+K[0].length):-1},c:function E(X,se,ae){return S(X,n,se,ae)},d:ZG,e:ZG,f:lAe,g:QG,G:XG,H:JG,I:JG,j:rAe,L:aAe,m:iAe,M:oAe,p:function A(X,se,ae){var K=c.exec(se.slice(ae));return K?(X.p=u.get(K[0].toLowerCase()),ae+K[0].length):-1},q:nAe,Q:uAe,s:dAe,S:sAe,u:QMe,U:ZMe,V:JMe,w:XMe,W:eAe,x:function D(X,se,ae){return S(X,t,se,ae)},X:function I(X,se,ae){return S(X,i,se,ae)},y:QG,Y:XG,Z:tAe,"%":cAe};function x(X,se){return function(ae){var Ne,He,Jt,K=[],be=-1,Ae=0,Ge=X.length;for(ae instanceof Date||(ae=new Date(+ae));++be<Ge;)37===X.charCodeAt(be)&&(K.push(X.slice(Ae,be)),null!=(He=YG[Ne=X.charAt(++be)])?Ne=X.charAt(++be):He="e"===Ne?" ":"0",(Jt=se[Ne])&&(Ne=Jt(ae,He)),K.push(Ne),Ae=be+1);return K.push(X.slice(Ae,be)),K.join("")}}function C(X,se){return function(ae){var Ae,Ge,K=uy(1900,void 0,1);if(S(K,X,ae+="",0)!=ae.length)return null;if("Q"in K)return new Date(K.Q);if("s"in K)return new Date(1e3*K.s+("L"in K?K.L:0));if(se&&!("Z"in K)&&(K.Z=0),"p"in K&&(K.H=K.H%12+12*K.p),void 0===K.m&&(K.m="q"in K?K.q:0),"V"in K){if(K.V<1||K.V>53)return null;"w"in K||(K.w=1),"Z"in K?(Ge=(Ae=NO(uy(K.y,0,1))).getUTCDay(),Ae=Ge>4||0===Ge?qC.ceil(Ae):qC(Ae),Ae=Ou.offset(Ae,7*(K.V-1)),K.y=Ae.getUTCFullYear(),K.m=Ae.getUTCMonth(),K.d=Ae.getUTCDate()+(K.w+6)%7):(Ge=(Ae=FO(uy(K.y,0,1))).getDay(),Ae=Ge>4||0===Ge?jC.ceil(Ae):jC(Ae),Ae=vc.offset(Ae,7*(K.V-1)),K.y=Ae.getFullYear(),K.m=Ae.getMonth(),K.d=Ae.getDate()+(K.w+6)%7)}else("W"in K||"U"in K)&&("w"in K||(K.w="u"in K?K.u%7:"W"in K?1:0),Ge="Z"in K?NO(uy(K.y,0,1)).getUTCDay():FO(uy(K.y,0,1)).getDay(),K.m=0,K.d="W"in K?(K.w+6)%7+7*K.W-(Ge+5)%7:K.w+7*K.U-(Ge+6)%7);return"Z"in K?(K.H+=K.Z/100|0,K.M+=K.Z%100,NO(K)):FO(K)}}function S(X,se,ae,K){for(var Ne,He,be=0,Ae=se.length,Ge=ae.length;be<Ae;){if(K>=Ge)return-1;if(37===(Ne=se.charCodeAt(be++))){if(Ne=se.charAt(be++),!(He=w[Ne in YG?se.charAt(be++):Ne])||(K=He(X,ae,K))<0)return-1}else if(Ne!=ae.charCodeAt(K++))return-1}return K}return v.x=x(t,v),v.X=x(i,v),v.c=x(n,v),b.x=x(t,b),b.X=x(i,b),b.c=x(n,b),{format:function(X){var se=x(X+="",v);return se.toString=function(){return X},se},parse:function(X){var se=C(X+="",!1);return se.toString=function(){return X},se},utcFormat:function(X){var se=x(X+="",b);return se.toString=function(){return X},se},utcParse:function(X){var se=C(X+="",!0);return se.toString=function(){return X},se}}}var Ng,PO,cK,LO,uK,YG={"-":"",_:" ",0:"0"},mi=/^\s*\d+/,GMe=/^%/,KMe=/[\\^$*+?|[\]().{}]/g;function Lt(e,n,t){var i=e<0?"-":"",r=(i?-e:e)+"",o=r.length;return i+(o<t?new Array(t-o+1).join(n)+r:r)}function YMe(e){return e.replace(KMe,"\\$&")}function dy(e){return new RegExp("^(?:"+e.map(YMe).join("|")+")","i")}function fy(e){return new Map(e.map((n,t)=>[n.toLowerCase(),t]))}function XMe(e,n,t){var i=mi.exec(n.slice(t,t+1));return i?(e.w=+i[0],t+i[0].length):-1}function QMe(e,n,t){var i=mi.exec(n.slice(t,t+1));return i?(e.u=+i[0],t+i[0].length):-1}function ZMe(e,n,t){var i=mi.exec(n.slice(t,t+2));return i?(e.U=+i[0],t+i[0].length):-1}function JMe(e,n,t){var i=mi.exec(n.slice(t,t+2));return i?(e.V=+i[0],t+i[0].length):-1}function eAe(e,n,t){var i=mi.exec(n.slice(t,t+2));return i?(e.W=+i[0],t+i[0].length):-1}function XG(e,n,t){var i=mi.exec(n.slice(t,t+4));return i?(e.y=+i[0],t+i[0].length):-1}function QG(e,n,t){var i=mi.exec(n.slice(t,t+2));return i?(e.y=+i[0]+(+i[0]>68?1900:2e3),t+i[0].length):-1}function tAe(e,n,t){var i=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(n.slice(t,t+6));return i?(e.Z=i[1]?0:-(i[2]+(i[3]||"00")),t+i[0].length):-1}function nAe(e,n,t){var i=mi.exec(n.slice(t,t+1));return i?(e.q=3*i[0]-3,t+i[0].length):-1}function iAe(e,n,t){var i=mi.exec(n.slice(t,t+2));return i?(e.m=i[0]-1,t+i[0].length):-1}function ZG(e,n,t){var i=mi.exec(n.slice(t,t+2));return i?(e.d=+i[0],t+i[0].length):-1}function rAe(e,n,t){var i=mi.exec(n.slice(t,t+3));return i?(e.m=0,e.d=+i[0],t+i[0].length):-1}function JG(e,n,t){var i=mi.exec(n.slice(t,t+2));return i?(e.H=+i[0],t+i[0].length):-1}function oAe(e,n,t){var i=mi.exec(n.slice(t,t+2));return i?(e.M=+i[0],t+i[0].length):-1}function sAe(e,n,t){var i=mi.exec(n.slice(t,t+2));return i?(e.S=+i[0],t+i[0].length):-1}function aAe(e,n,t){var i=mi.exec(n.slice(t,t+3));return i?(e.L=+i[0],t+i[0].length):-1}function lAe(e,n,t){var i=mi.exec(n.slice(t,t+6));return i?(e.L=Math.floor(i[0]/1e3),t+i[0].length):-1}function cAe(e,n,t){var i=GMe.exec(n.slice(t,t+1));return i?t+i[0].length:-1}function uAe(e,n,t){var i=mi.exec(n.slice(t));return i?(e.Q=+i[0],t+i[0].length):-1}function dAe(e,n,t){var i=mi.exec(n.slice(t));return i?(e.s=+i[0],t+i[0].length):-1}function eK(e,n){return Lt(e.getDate(),n,2)}function fAe(e,n){return Lt(e.getHours(),n,2)}function hAe(e,n){return Lt(e.getHours()%12||12,n,2)}function pAe(e,n){return Lt(1+vc.count(ll(e),e),n,3)}function tK(e,n){return Lt(e.getMilliseconds(),n,3)}function gAe(e,n){return tK(e,n)+"000"}function mAe(e,n){return Lt(e.getMonth()+1,n,2)}function _Ae(e,n){return Lt(e.getMinutes(),n,2)}function yAe(e,n){return Lt(e.getSeconds(),n,2)}function vAe(e){var n=e.getDay();return 0===n?7:n}function bAe(e,n){return Lt(Tg.count(ll(e)-1,e),n,2)}function nK(e){var n=e.getDay();return n>=4||0===n?Dg(e):Dg.ceil(e)}function wAe(e,n){return e=nK(e),Lt(Dg.count(ll(e),e)+(4===ll(e).getDay()),n,2)}function CAe(e){return e.getDay()}function xAe(e,n){return Lt(jC.count(ll(e)-1,e),n,2)}function EAe(e,n){return Lt(e.getFullYear()%100,n,2)}function SAe(e,n){return Lt((e=nK(e)).getFullYear()%100,n,2)}function TAe(e,n){return Lt(e.getFullYear()%1e4,n,4)}function DAe(e,n){var t=e.getDay();return Lt((e=t>=4||0===t?Dg(e):Dg.ceil(e)).getFullYear()%1e4,n,4)}function IAe(e){var n=e.getTimezoneOffset();return(n>0?"-":(n*=-1,"+"))+Lt(n/60|0,"0",2)+Lt(n%60,"0",2)}function iK(e,n){return Lt(e.getUTCDate(),n,2)}function MAe(e,n){return Lt(e.getUTCHours(),n,2)}function AAe(e,n){return Lt(e.getUTCHours()%12||12,n,2)}function kAe(e,n){return Lt(1+Ou.count(cl(e),e),n,3)}function rK(e,n){return Lt(e.getUTCMilliseconds(),n,3)}function OAe(e,n){return rK(e,n)+"000"}function RAe(e,n){return Lt(e.getUTCMonth()+1,n,2)}function FAe(e,n){return Lt(e.getUTCMinutes(),n,2)}function NAe(e,n){return Lt(e.getUTCSeconds(),n,2)}function PAe(e){var n=e.getUTCDay();return 0===n?7:n}function LAe(e,n){return Lt(Ig.count(cl(e)-1,e),n,2)}function oK(e){var n=e.getUTCDay();return n>=4||0===n?Mg(e):Mg.ceil(e)}function $Ae(e,n){return e=oK(e),Lt(Mg.count(cl(e),e)+(4===cl(e).getUTCDay()),n,2)}function BAe(e){return e.getUTCDay()}function VAe(e,n){return Lt(qC.count(cl(e)-1,e),n,2)}function zAe(e,n){return Lt(e.getUTCFullYear()%100,n,2)}function UAe(e,n){return Lt((e=oK(e)).getUTCFullYear()%100,n,2)}function HAe(e,n){return Lt(e.getUTCFullYear()%1e4,n,4)}function jAe(e,n){var t=e.getUTCDay();return Lt((e=t>=4||0===t?Mg(e):Mg.ceil(e)).getUTCFullYear()%1e4,n,4)}function qAe(){return"+0000"}function sK(){return"%"}function aK(e){return+e}function lK(e){return Math.floor(+e/1e3)}function hy(e){const n={};return t=>n[t]||(n[t]=e(t))}function dK(e){const n=hy(e.format),t=e.formatPrefix;return{format:n,formatPrefix:t,formatFloat(i){const r=Mf(i||",");if(null==r.precision){switch(r.precision=12,r.type){case"%":r.precision-=2;break;case"e":r.precision-=1}return function GAe(e,n){return t=>{const i=e(t),r=i.indexOf(n);if(r<0)return i;let o=function KAe(e,n){let i,t=e.lastIndexOf("e");if(t>0)return t;for(t=e.length;--t>n;)if(i=e.charCodeAt(t),i>=48&&i<=57)return t+1}(i,r);const s=o<i.length?i.slice(o):"";for(;--o>r;)if("0"!==i[o]){++o;break}return i.slice(0,o)+s}}(n(r),n(".1f")(1)[1])}return n(r)},formatSpan(i,r,o,s){s=Mf(s??",f");const a=ku(i,r,o),l=Math.max(Math.abs(i),Math.abs(r));let c;if(null==s.precision)switch(s.type){case"s":return isNaN(c=gG(a,l))||(s.precision=c),t(s,l);case"":case"e":case"g":case"p":case"r":isNaN(c=mG(a,l))||(s.precision=c-("e"===s.type));break;case"f":case"%":isNaN(c=_G(a))||(s.precision=c-2*("%"===s.type))}return n(s)}}}let $O,BO;function fK(){return $O=dK({format:HC,formatPrefix:bO})}function hK(e){return dK(EG(e))}function QC(e){return arguments.length?$O=hK(e):$O}function pK(e,n,t){Ee(t=t||{})||re(`Invalid time multi-format specifier: ${t}`);const i=n(Ss),r=n(Uo),o=n(zo),s=n(oo),a=n(ci),l=n(or),c=n(ro),u=n($i),d=e(t[sa]||".%L"),f=e(t[Ss]||":%S"),h=e(t[Uo]||"%I:%M"),p=e(t[zo]||"%I %p"),g=e(t[oo]||t[sr]||"%a %d"),m=e(t[ci]||"%b %d"),_=e(t[or]||"%B"),y=e(t[ro]||"%B"),v=e(t[$i]||"%Y");return b=>(i(b)<b?d:r(b)<b?f:o(b)<b?h:s(b)<b?p:l(b)<b?a(b)<b?g:m:u(b)<b?c(b)<b?_:y:v)(b)}function gK(e){const n=hy(e.format),t=hy(e.utcFormat);return{timeFormat:i=>xe(i)?n(i):pK(n,Rg,i),utcFormat:i=>xe(i)?t(i):pK(t,Fg,i),timeParse:hy(e.parse),utcParse:hy(e.utcParse)}}function mK(){return BO=gK({format:PO,parse:cK,utcFormat:LO,utcParse:uK})}function _K(e){return gK(KG(e))}function py(e){return arguments.length?BO=_K(e):BO}!function WAe(e){Ng=KG(e),PO=Ng.format,cK=Ng.parse,LO=Ng.utcFormat,uK=Ng.utcParse}({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]}),fK(),mK();const VO=(e,n)=>ut({},e,n);function yK(e,n){const t=e?hK(e):QC(),i=n?_K(n):py();return VO(t,i)}function zO(e,n){const t=arguments.length;return t&&2!==t&&re("defaultLocale expects either zero or two arguments."),t?VO(QC(e),py(n)):VO(QC(),py())}function YAe(){return fK(),mK(),zO()}const XAe=/^(data:|([A-Za-z]+:)?\/\/)/,QAe=/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp|file|data):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i,ZAe=/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205f\u3000]/g,vK="file://";function eke(e,n){return UO.apply(this,arguments)}function UO(){return UO=Re(function*(e,n){const t=yield this.sanitize(e,n),i=t.href;return t.localFile?this.file(i):this.http(i,n)}),UO.apply(this,arguments)}function tke(e,n){return HO.apply(this,arguments)}function HO(){return HO=Re(function*(e,n){n=ut({},this.options,n);const t=this.fileAccess,i={href:null};let r,o,s;const a=QAe.test(e.replace(ZAe,""));(null==e||"string"!=typeof e||!a)&&re("Sanitize failure, invalid URI: "+ge(e));const l=XAe.test(e);return(s=n.baseURL)&&!l&&(!e.startsWith("/")&&!s.endsWith("/")&&(e="/"+e),e=s+e),o=(r=e.startsWith(vK))||"file"===n.mode||"http"!==n.mode&&!l&&t,r?e=e.slice(vK.length):e.startsWith("//")&&("file"===n.defaultProtocol?(e=e.slice(2),o=!0):e=(n.defaultProtocol||"http")+":"+e),Object.defineProperty(i,"localFile",{value:!!o}),i.href=e,n.target&&(i.target=n.target+""),n.rel&&(i.rel=n.rel+""),"image"===n.context&&n.crossOrigin&&(i.crossOrigin=n.crossOrigin+""),i}),HO.apply(this,arguments)}function nke(e){return e?n=>new Promise((t,i)=>{e.readFile(n,(r,o)=>{r?i(r):t(o)})}):ike}function ike(){return jO.apply(this,arguments)}function jO(){return(jO=Re(function*(){re("No file system access.")})).apply(this,arguments)}function rke(e){return e?function(){var n=Re(function*(t,i){const r=ut({},this.options.http,i),o=i&&i.response,s=yield e(t,r);return s.ok?ct(s[o])?s[o]():s.text():re(s.status+""+s.statusText)});return function(t,i){return n.apply(this,arguments)}}():oke}function oke(){return qO.apply(this,arguments)}function qO(){return(qO=Re(function*(){re("No HTTP fetch method available.")})).apply(this,arguments)}const ske=e=>null!=e&&e==e,bK=e=>!(Number.isNaN(+e)||e instanceof Date),WO={boolean:dO,integer:ir,number:ir,date:fO,string:hO,unknown:nr},ZC=[e=>"true"===e||"false"===e||!0===e||!1===e,e=>bK(e)&&Number.isInteger(+e),bK,e=>!Number.isNaN(Date.parse(e))],uke=["boolean","integer","number","date"];function wK(e,n){if(!e||!e.length)return"unknown";const t=e.length,i=ZC.length,r=ZC.map((o,s)=>s+1);for(let a,l,o=0,s=0;o<t;++o)for(l=n?e[o][n]:e[o],a=0;a<i;++a)if(r[a]&&ske(l)&&!ZC[a](l)&&(r[a]=0,++s,s===ZC.length))return"string";return uke[r.reduce((o,s)=>0===o?s:o,0)-1]}function CK(e,n){return n.reduce((t,i)=>(t[i]=wK(e,i),t),{})}function xK(e){const n=function(t,i){const r={delimiter:e};return GO(t,i?ut(i,r):r)};return n.responseType="text",n}function GO(e,n){return n.header&&(e=n.header.map(ge).join(n.delimiter)+"\n"+e),oMe(n.delimiter).parse(e+"")}function KO(e,n){const t=n&&n.property?Cs(n.property):nr;return Ee(e)&&!function dke(e){return!("function"!=typeof Buffer||!ct(Buffer.isBuffer))&&Buffer.isBuffer(e)}(e)?function fke(e,n){return!oe(e)&&iG(e)&&(e=[...e]),n&&n.copy?JSON.parse(JSON.stringify(e)):e}(t(e),n):t(JSON.parse(e))}GO.responseType="text",KO.responseType="json";const hke={interior:(e,n)=>e!==n,exterior:(e,n)=>e===n};function EK(e,n){let t,i,r,o;return e=KO(e,n),n&&n.feature?(t=cMe,r=n.feature):n&&n.mesh?(t=dMe,r=n.mesh,o=hke[n.filter]):re("Missing TopoJSON feature or mesh parameter."),i=(i=e.objects[r])?t(e,i,o):re("Invalid TopoJSON object: "+r),i&&i.features||[i]}EK.responseType="json";const JC={dsv:GO,csv:xK(","),tsv:xK("\t"),json:KO,topojson:EK};function YO(e,n){return arguments.length>1?(JC[e]=n,this):$e(JC,e)?JC[e]:null}function SK(e){const n=YO(e);return n&&n.responseType||"text"}function TK(e,n,t,i){const r=YO((n=n||{}).type||"json");return r||re("Unknown data format type: "+n.type),e=r(e,n),n.parse&&function pke(e,n,t,i){if(!e.length)return;const r=py();t=t||r.timeParse,i=i||r.utcParse;let s,a,l,c,u,d,o=e.columns||Object.keys(e[0]);"auto"===n&&(n=CK(e,o)),o=Object.keys(n);const f=o.map(h=>{const p=n[h];let g,m;if(p&&(p.startsWith("date:")||p.startsWith("utc:")))return g=p.split(/:(.+)?/,2),m=g[1],("'"===m[0]&&"'"===m[m.length-1]||'"'===m[0]&&'"'===m[m.length-1])&&(m=m.slice(1,-1)),("utc"===g[0]?i:t)(m);if(!WO[p])throw Error("Illegal format pattern: "+h+":"+p);return WO[p]});for(l=0,u=e.length,d=o.length;l<u;++l)for(s=e[l],c=0;c<d;++c)a=o[c],s[a]=f[c](s[a])}(e,n.parse,t,i),$e(e,"columns")&&delete e.columns,e}const ex=function JAe(e,n){return t=>({options:t||{},sanitize:tke,load:eke,fileAccess:!!n,file:nke(n),http:rke(e)})}(typeof fetch<"u"&&fetch,null);function tx(e){const n=e||nr,t=[],i={};return t.add=r=>{const o=n(r);return i[o]||(i[o]=1,t.push(r)),t},t.remove=r=>{const o=n(r);if(i[o]){i[o]=0;const s=t.indexOf(r);s>=0&&t.splice(s,1)}return t},t}function nx(e,n){return XO.apply(this,arguments)}function XO(){return XO=Re(function*(e,n){try{yield n(e)}catch(t){e.error(t)}}),XO.apply(this,arguments)}const DK=Symbol("vega_id");let gke=1;function ix(e){return!(!e||!Be(e))}function Be(e){return e[DK]}function IK(e,n){return e[DK]=n,e}function qt(e){const n=e===Object(e)?e:{data:e};return Be(n)?n:IK(n,gke++)}function QO(e){return rx(e,qt({}))}function rx(e,n){for(const t in e)n[t]=e[t];return n}function MK(e,n){return IK(n,Be(e))}function Rf(e,n){return e?n?(t,i)=>e(t,i)||Be(n(t))-Be(n(i)):(t,i)=>e(t,i)||Be(t)-Be(i):null}function AK(e){return e&&e.constructor===Gn}function Gn(){const e=[],n=[],t=[],i=[],r=[];let o=null,s=!1;return{constructor:Gn,insert(a){const l=Ce(a),c=l.length;for(let u=0;u<c;++u)e.push(l[u]);return this},remove(a){const l=ct(a)?i:n,c=Ce(a),u=c.length;for(let d=0;d<u;++d)l.push(c[d]);return this},modify(a,l,c){const u={field:l,value:rr(c)};return ct(a)?(u.filter=a,r.push(u)):(u.tuple=a,t.push(u)),this},encode(a,l){return ct(a)?r.push({filter:a,field:l}):t.push({tuple:a,field:l}),this},clean(a){return o=a,this},reflow(){return s=!0,this},pulse(a,l){const c={},u={};let d,f,h,p,g,m;for(d=0,f=l.length;d<f;++d)c[Be(l[d])]=1;for(d=0,f=n.length;d<f;++d)g=n[d],c[Be(g)]=-1;for(d=0,f=i.length;d<f;++d)p=i[d],l.forEach(y=>{p(y)&&(c[Be(y)]=-1)});for(d=0,f=e.length;d<f;++d)g=e[d],m=Be(g),c[m]?c[m]=1:a.add.push(qt(e[d]));for(d=0,f=l.length;d<f;++d)g=l[d],c[Be(g)]<0&&a.rem.push(g);function _(y,v,b){b?y[v]=b(y):a.encode=v,s||(u[Be(y)]=y)}for(d=0,f=t.length;d<f;++d)h=t[d],g=h.tuple,p=h.field,m=c[Be(g)],m>0&&(_(g,p,h.value),a.modifies(p));for(d=0,f=r.length;d<f;++d)h=r[d],p=h.filter,l.forEach(y=>{p(y)&&c[Be(y)]>0&&_(y,h.field,h.value)}),a.modifies(h.field);if(s)a.mod=n.length||i.length?l.filter(y=>c[Be(y)]>0):l.slice();else for(m in u)a.mod.push(u[m]);return(o||null==o&&(n.length||i.length))&&a.clean(!0),a}}}const ox="_:mod:_";function sx(){Object.defineProperty(this,ox,{writable:!0,value:{}})}sx.prototype={set(e,n,t,i){const r=this,o=r[e],s=r[ox];return null!=n&&n>=0?(o[n]!==t||i)&&(o[n]=t,s[n+":"+e]=-1,s[e]=-1):(o!==t||i)&&(r[e]=t,s[e]=oe(t)?1+t.length:-1),r},modified(e,n){const t=this[ox];if(!arguments.length){for(const i in t)if(t[i])return!0;return!1}if(oe(e)){for(let i=0;i<e.length;++i)if(t[e[i]])return!0;return!1}return null!=n&&n>=0?n+1<t[e]||!!t[n+":"+e]:!!t[e]},clear(){return this[ox]={},this}};let mke=0;const yke=new sx;function dn(e,n,t,i){this.id=++mke,this.value=e,this.stamp=-1,this.rank=-1,this.qrank=-1,this.flags=0,n&&(this._update=n),t&&this.parameters(t,i)}function kK(e){return function(n){const t=this.flags;return 0===arguments.length?!!(t&e):(this.flags=n?t|e:t&~e,this)}}dn.prototype={targets(){return this._targets||(this._targets=tx(Q_))},set(e){return this.value!==e?(this.value=e,1):0},skip:kK(1),modified:kK(2),parameters(e,n,t){n=!1!==n;const i=this._argval=this._argval||new sx,r=this._argops=this._argops||[],o=[];let s,a,l,c;const u=(d,f,h)=>{h instanceof dn?(h!==this&&(n&&h.targets().add(this),o.push(h)),r.push({op:h,name:d,index:f})):i.set(d,f,h)};for(s in e)if(a=e[s],"pulse"===s)Ce(a).forEach(d=>{d instanceof dn?d!==this&&(d.targets().add(this),o.push(d)):re("Pulse parameters must be operator instances.")}),this.source=a;else if(oe(a))for(i.set(s,-1,Array(l=a.length)),c=0;c<l;++c)u(s,c,a[c]);else u(s,-1,a);return this.marshall().clear(),t&&(r.initonly=!0),o},marshall(e){const n=this._argval||yke,t=this._argops;let i,r,o,s;if(t){const a=t.length;for(r=0;r<a;++r)i=t[r],o=i.op,s=o.modified()&&o.stamp===e,n.set(i.name,i.index,o.value,s);if(t.initonly){for(r=0;r<a;++r)i=t[r],i.op.targets().remove(this);this._argops=null,this._update=null}}return n},detach(){const e=this._argops;let n,t,i,r;if(e)for(n=0,t=e.length;n<t;++n)i=e[n],r=i.op,r._targets&&r._targets.remove(this);this.pulse=null,this.source=null},evaluate(e){const n=this._update;if(n){const t=this.marshall(e.stamp),i=n.call(this,t,e);if(t.clear(),i!==this.value)this.value=i;else if(!this.modified())return e.StopPropagation}},run(e){if(e.stamp<this.stamp)return e.StopPropagation;let n;return this.skip()?(this.skip(!1),n=0):n=this.evaluate(e),this.pulse=n||e}};let xke=0;function ax(e,n,t){this.id=++xke,this.value=null,t&&(this.receive=t),e&&(this._filter=e),n&&(this._apply=n)}function Ru(e,n,t){return new ax(e,n,t)}function ZO(){return ZO=Re(function*(e,n){const t=this;let r,i=0;try{r=yield t.loader().load(e,{context:"dataflow",response:SK(n&&n.type)});try{r=t.parse(r,n)}catch(o){i=-2,t.warn("Data ingestion failed",e,o)}}catch(o){i=-1,t.warn("Loading failed",e,o)}return{data:r,status:i}}),ZO.apply(this,arguments)}function JO(){return JO=Re(function*(e,n,t){const i=this,r=i._pending||function Mke(e){let n;const t=new Promise(i=>n=i);return t.requests=0,t.done=()=>{0==--t.requests&&(e._pending=null,n(e))},e._pending=t}(i);r.requests+=1;const o=yield i.request(n,t);return i.pulse(e,i.changeset().remove(xs).insert(o.data||[])),r.done(),o}),JO.apply(this,arguments)}ax.prototype={_filter:xs,_apply:nr,targets(){return this._targets||(this._targets=tx(Q_))},consume(e){return arguments.length?(this._consume=!!e,this):!!this._consume},receive(e){if(this._filter(e)){const n=this.value=this._apply(e),t=this._targets,i=t?t.length:0;for(let r=0;r<i;++r)t[r].receive(n);this._consume&&(e.preventDefault(),e.stopPropagation())}},filter(e){const n=Ru(e);return this.targets().add(n),n},apply(e){const n=Ru(null,e);return this.targets().add(n),n},merge(){const e=Ru();this.targets().add(e);for(let n=0,t=arguments.length;n<t;++n)arguments[n].targets().add(e);return e},throttle(e){let n=-1;return this.filter(()=>{const t=Date.now();return t-n>e?(n=t,1):0})},debounce(e){const n=Ru();return this.targets().add(Ru(null,null,cO(e,t=>{const i=t.dataflow;n.receive(t),i&&i.run&&i.run()}))),n},between(e,n){let t=!1;return e.targets().add(Ru(null,null,()=>t=!0)),n.targets().add(Ru(null,null,()=>t=!1)),this.filter(()=>t)},detach(){this._filter=xs,this._targets=null}};const Ake={skip:!0};function Oke(e,n,t,i,r,o){const s=ut({},o,Ake);let a,l;ct(t)||(t=rr(t)),void 0===i?a=c=>e.touch(t(c)):ct(i)?(l=new dn(null,i,r,!1),a=c=>{l.evaluate(c);const u=t(c),d=l.value;AK(d)?e.pulse(u,d,o):e.update(u,d,s)}):a=c=>e.update(t(c),i,s),n.apply(a)}function Rke(e,n,t,i,r,o){if(void 0===i)n.targets().add(t);else{const s=o||{},a=new dn(null,function Fke(e,n){return n=ct(n)?n:rr(n),e?function(t,i){const r=n(t,i);return e.skip()||(e.skip(r!==this.value).value=r),r}:n}(t,i),r,!1);a.modified(s.force),a.rank=n.rank,n.targets().add(a),t&&(a.skip(!0),a.value=t.value,a.targets().add(t),e.connect(t,[a]))}}const lx={};function Nu(e,n,t){this.dataflow=e,this.stamp=n??-1,this.add=[],this.rem=[],this.mod=[],this.fields=null,this.encode=t||null}function e3(e,n){const t=[];return Au(e,n,i=>t.push(i)),t}function PK(e,n){const t={};return e.visit(n,i=>{t[Be(i)]=1}),i=>t[Be(i)]?null:i}function cx(e,n){return e?(t,i)=>e(t,i)&&n(t,i):n}function t3(e,n,t,i){const r=this;let o=0;this.dataflow=e,this.stamp=n,this.fields=null,this.encode=i||null,this.pulses=t;for(const s of t)if(s.stamp===n){if(s.fields){const a=r.fields||(r.fields={});for(const l in s.fields)a[l]=1}s.changed(r.ADD)&&(o|=r.ADD),s.changed(r.REM)&&(o|=r.REM),s.changed(r.MOD)&&(o|=r.MOD)}this.changes=o}function n3(){return n3=Re(function*(e,n,t){const i=this,r=[];if(i._pulse)return LK(i);if(i._pending&&(yield i._pending),n&&(yield nx(i,n)),!i._touched.length)return i.debug("Dataflow invoked, but nothing to do."),i;const o=++i._clock;i._pulse=new Nu(i,o,e),i._touched.forEach(u=>i._enqueue(u,!0)),i._touched=tx(Q_);let a,l,c,s=0;try{for(;i._heap.size()>0;)a=i._heap.pop(),a.rank===a.qrank?(l=a.run(i._getPulse(a,e)),l.then?l=yield l:l.async&&(r.push(l.async),l=lx),l!==lx&&a._targets&&a._targets.forEach(u=>i._enqueue(u)),++s):i._enqueue(a,!0)}catch(u){i._heap.clear(),c=u}if(i._input={},i._pulse=null,i.debug(`Pulse ${o}: ${s} operators`),c&&(i._postrun=[],i.error(c)),i._postrun.length){const u=i._postrun.sort((d,f)=>f.priority-d.priority);i._postrun=[];for(let d=0;d<u.length;++d)yield nx(i,u[d].callback)}return t&&(yield nx(i,t)),r.length&&Promise.all(r).then(u=>i.runAsync(null,()=>{u.forEach(d=>{try{d(i)}catch(f){i.error(f)}})})),i}),n3.apply(this,arguments)}function r3(){return r3=Re(function*(e,n,t){for(;this._running;)yield this._running;const i=()=>this._running=null;return(this._running=this.evaluate(e,n,t)).then(i,i),this._running}),r3.apply(this,arguments)}function LK(e){return e.error("Dataflow already running. Use runAsync() to chain invocations."),e}Nu.prototype={StopPropagation:lx,ADD:1,REM:2,MOD:4,ADD_REM:3,ADD_MOD:5,ALL:7,REFLOW:8,SOURCE:16,NO_SOURCE:32,NO_FIELDS:64,fork(e){return new Nu(this.dataflow).init(this,e)},clone(){const e=this.fork(7);return e.add=e.add.slice(),e.rem=e.rem.slice(),e.mod=e.mod.slice(),e.source&&(e.source=e.source.slice()),e.materialize(23)},addAll(){let e=this;return!e.source||e.add===e.rem||!e.rem.length&&e.source.length===e.add.length||(e=new Nu(this.dataflow).init(this),e.add=e.source,e.rem=[]),e},init(e,n){const t=this;return t.stamp=e.stamp,t.encode=e.encode,e.fields&&!(64&n)&&(t.fields=e.fields),1&n?(t.addF=e.addF,t.add=e.add):(t.addF=null,t.add=[]),2&n?(t.remF=e.remF,t.rem=e.rem):(t.remF=null,t.rem=[]),4&n?(t.modF=e.modF,t.mod=e.mod):(t.modF=null,t.mod=[]),32&n?(t.srcF=null,t.source=null):(t.srcF=e.srcF,t.source=e.source,e.cleans&&(t.cleans=e.cleans)),t},runAfter(e){this.dataflow.runAfter(e)},changed(e){const n=e||7;return 1&n&&this.add.length||2&n&&this.rem.length||4&n&&this.mod.length},reflow(e){if(e)return this.fork(7).reflow();const n=this.add.length,t=this.source&&this.source.length;return t&&t!==n&&(this.mod=this.source,n&&this.filter(4,PK(this,1))),this},clean(e){return arguments.length?(this.cleans=!!e,this):this.cleans},modifies(e){const n=this.fields||(this.fields={});return oe(e)?e.forEach(t=>n[t]=!0):n[e]=!0,this},modified(e,n){const t=this.fields;return!(!n&&!this.mod.length||!t)&&(arguments.length?oe(e)?e.some(i=>t[i]):t[e]:!!t)},filter(e,n){const t=this;return 1&e&&(t.addF=cx(t.addF,n)),2&e&&(t.remF=cx(t.remF,n)),4&e&&(t.modF=cx(t.modF,n)),16&e&&(t.srcF=cx(t.srcF,n)),t},materialize(e){const n=this;return 1&(e=e||7)&&n.addF&&(n.add=e3(n.add,n.addF),n.addF=null),2&e&&n.remF&&(n.rem=e3(n.rem,n.remF),n.remF=null),4&e&&n.modF&&(n.mod=e3(n.mod,n.modF),n.modF=null),16&e&&n.srcF&&(n.source=n.source.filter(n.srcF),n.srcF=null),n},visit(e,n){const t=this,i=n;if(16&e)return Au(t.source,t.srcF,i),t;1&e&&Au(t.add,t.addF,i),2&e&&Au(t.rem,t.remF,i),4&e&&Au(t.mod,t.modF,i);const r=t.source;if(8&e&&r){const o=t.add.length+t.mod.length;o===r.length||Au(r,o?PK(t,5):t.srcF,i)}return t}},pe(t3,Nu,{fork(e){const n=new Nu(this.dataflow).init(this,e&this.NO_FIELDS);return void 0!==e&&(e&n.ADD&&this.visit(n.ADD,t=>n.add.push(t)),e&n.REM&&this.visit(n.REM,t=>n.rem.push(t)),e&n.MOD&&this.visit(n.MOD,t=>n.mod.push(t))),n},changed(e){return this.changes&e},modified(e){const n=this,t=n.fields;return t&&n.changes&n.MOD?oe(e)?e.some(i=>t[i]):t[e]:0},filter(){re("MultiPulse does not support filtering.")},materialize(){re("MultiPulse does not support materialization.")},visit(e,n){const t=this,i=t.pulses,r=i.length;let o=0;if(e&t.SOURCE)for(;o<r;++o)i[o].visit(e,n);else for(;o<r;++o)i[o].stamp===t.stamp&&i[o].visit(e,n);return t}});const o3={skip:!1,force:!1};function $K(e,n,t,i){let r,o;const s=e[t];for(;t>n&&(o=t-1>>1,r=e[o],i(s,r)<0);)e[t]=r,t=o;return e[t]=s}function Lg(){this.logger(rO()),this.logLevel(nO),this._clock=0,this._rank=0,this._locale=zO();try{this._loader=ex()}catch{}this._touched=tx(Q_),this._input={},this._pulse=null,this._heap=function Kke(e){let n=[];return{clear:()=>n=[],size:()=>n.length,peek:()=>n[0],push:t=>(n.push(t),$K(n,0,n.length-1,e)),pop:()=>{const t=n.pop();let i;return n.length?(i=n[0],n[0]=t,function Yke(e,n,t){const i=n,r=e.length,o=e[n];let a,s=1+(n<<1);for(;s<r;)a=s+1,a<r&&t(e[s],e[a])>=0&&(s=a),e[n]=e[s],s=1+((n=s)<<1);e[n]=o,$K(e,i,n,t)}(n,0,e)):i=t,i}}}((e,n)=>e.qrank-n.qrank),this._postrun=[]}function my(e){return function(){return this._log[e].apply(this,arguments)}}function Z(e,n){dn.call(this,e,null,n)}Lg.prototype={stamp(){return this._clock},loader(e){return arguments.length?(this._loader=e,this):this._loader},locale(e){return arguments.length?(this._locale=e,this):this._locale},logger(e){return arguments.length?(this._log=e,this):this._log},error:my("error"),warn:my("warn"),info:my("info"),debug:my("debug"),logLevel:my("level"),cleanThreshold:1e4,add:function wke(e,n,t,i){let o,r=1;return e instanceof dn?o=e:e&&e.prototype instanceof dn?o=new e:ct(e)?o=new dn(null,e):(r=0,o=new dn(e,n)),this.rank(o),r&&(i=t,t=n),t&&this.connect(o,o.parameters(t,i)),this.touch(o),o},connect:function Cke(e,n){const t=e.rank,i=n.length;for(let r=0;r<i;++r)if(t<n[r].rank)return void this.rerank(e)},rank:function Nke(e){e.rank=++this._rank},rerank:function Pke(e){const n=[e];let t,i,r;for(;n.length;)if(this.rank(t=n.pop()),i=t._targets)for(r=i.length;--r>=0;)n.push(t=i[r]),t===e&&re("Cycle detected in dataflow graph.")},pulse:function Gke(e,n,t){this.touch(e,t||o3);const i=new Nu(this,this._clock+(this._pulse?0:1)),r=e.pulse&&e.pulse.source||[];return i.target=e,this._input[e.id]=n.pulse(i,r),this},touch:function qke(e,n){const t=n||o3;return this._pulse?this._enqueue(e):this._touched.add(e),t.skip&&e.skip(!0),this},update:function Wke(e,n,t){const i=t||o3;return(e.set(n)||i.force)&&this.touch(e,i),this},changeset:Gn,ingest:function Tke(e,n,t){return n=this.parse(n,t),this.pulse(e,this.changeset().insert(n))},parse:function Ske(e,n){const t=this.locale();return TK(e,n,t.timeParse,t.utcParse)},preload:function Ike(e,n,t){return JO.apply(this,arguments)},request:function Dke(e,n){return ZO.apply(this,arguments)},events:function Eke(e,n,t,i){const r=this,o=Ru(t,i),s=function(c){c.dataflow=r;try{o.receive(c)}catch(u){r.error(u)}finally{r.run()}};let a;a="string"==typeof e&&typeof document<"u"?document.querySelectorAll(e):Ce(e);const l=a.length;for(let c=0;c<l;++c)a[c].addEventListener(n,s);return o},on:function kke(e,n,t,i,r){return(e instanceof dn?Rke:Oke)(this,e,n,t,i,r),this},evaluate:function $ke(e,n,t){return n3.apply(this,arguments)},run:function Vke(e,n,t){return this._pulse?LK(this):(this.evaluate(e,n,t),this)},runAsync:function Bke(e,n,t){return r3.apply(this,arguments)},runAfter:function zke(e,n,t){if(this._pulse||n)this._postrun.push({priority:t||0,callback:e});else try{e(this)}catch(i){this.error(i)}},_enqueue:function Uke(e,n){const t=e.stamp<this._clock;t&&(e.stamp=this._clock),(t||n)&&(e.qrank=e.rank,this._heap.push(e))},_getPulse:function Hke(e,n){const t=e.source,i=this._clock;return t&&oe(t)?new t3(this,i,t.map(r=>r.pulse),n):this._input[e.id]||function jke(e,n){return n&&n.stamp===e.stamp?n:(e=e.fork(),n&&n!==lx&&(e.source=n.source),e)}(this._pulse,t&&t.pulse)}},pe(Z,dn,{run(e){if(e.stamp<this.stamp)return e.StopPropagation;let n;return this.skip()?this.skip(!1):n=this.evaluate(e),n=n||e,n.then?n=n.then(t=>this.pulse=t):n!==e.StopPropagation&&(this.pulse=n),n},evaluate(e){const n=this.marshall(e.stamp),t=this.transform(n,e);return n.clear(),t},transform(){}});const $g={};function BK(e){const n=VK(e);return n&&n.Definition||null}function VK(e){return e=e&&e.toLowerCase(),$e($g,e)?$g[e]:null}function Ff(e,n){let t;if(void 0===n)for(const i of e)null!=i&&(t<i||void 0===t&&i>=i)&&(t=i);else{let i=-1;for(let r of e)null!=(r=n(r,++i,e))&&(t<r||void 0===t&&r>=r)&&(t=r)}return t}function s3(e,n){let t;if(void 0===n)for(const i of e)null!=i&&(t>i||void 0===t&&i>=i)&&(t=i);else{let i=-1;for(let r of e)null!=(r=n(r,++i,e))&&(t>r||void 0===t&&r>=r)&&(t=r)}return t}function ux(e,n){return(null==e||!(e>=e))-(null==n||!(n>=n))||(e<n?-1:e>n?1:0)}function UK(e,n,t=0,i=1/0,r){if(n=Math.floor(n),t=Math.floor(Math.max(0,t)),i=Math.floor(Math.min(e.length-1,i)),!(t<=n&&n<=i))return e;for(r=void 0===r?ux:function zK(e=wc){if(e===wc)return ux;if("function"!=typeof e)throw new TypeError("compare is not a function");return(n,t)=>{const i=e(n,t);return i||0===i?i:(0===e(t,t))-(0===e(n,n))}}(r);i>t;){if(i-t>600){const l=i-t+1,c=n-t+1,u=Math.log(l),d=.5*Math.exp(2*u/3),f=.5*Math.sqrt(u*d*(l-d)/l)*(c-l/2<0?-1:1);UK(e,n,Math.max(t,Math.floor(n-c*d/l+f)),Math.min(i,Math.floor(n+(l-c)*d/l+f)),r)}const o=e[n];let s=t,a=i;for(_y(e,t,n),r(e[i],o)>0&&_y(e,t,i);s<a;){for(_y(e,s,a),++s,--a;r(e[s],o)<0;)++s;for(;r(e[a],o)>0;)--a}0===r(e[t],o)?_y(e,t,a):(++a,_y(e,a,i)),a<=n&&(t=a+1),n<=a&&(i=a-1)}return e}function _y(e,n,t){const i=e[n];e[n]=e[t],e[t]=i}function HK(e){return null===e?NaN:+e}function a3(e,n,t){if(e=Float64Array.from(function*Xke(e,n){if(void 0===n)for(let t of e)null!=t&&(t=+t)>=t&&(yield t);else{let t=-1;for(let i of e)null!=(i=n(i,++t,e))&&(i=+i)>=i&&(yield i)}}(e,t)),(i=e.length)&&!isNaN(n=+n)){if(n<=0||i<2)return s3(e);if(n>=1)return Ff(e);var i,r=(i-1)*n,o=Math.floor(r),s=Ff(UK(e,o).subarray(0,o+1));return s+(s3(e.subarray(o+1))-s)*(r-o)}}function jK(e,n,t=HK){if((i=e.length)&&!isNaN(n=+n)){if(n<=0||i<2)return+t(e[0],0,e);if(n>=1)return+t(e[i-1],i-1,e);var i,r=(i-1)*n,o=Math.floor(r),s=+t(e[o],o,e);return s+(+t(e[o+1],o+1,e)-s)*(r-o)}}function qK(e,n){return a3(e,.5,n)}function*WK(e,n){if(null==n)for(let t of e)null!=t&&""!==t&&(t=+t)>=t&&(yield t);else{let t=-1;for(let i of e)i=n(i,++t,e),null!=i&&""!==i&&(i=+i)>=i&&(yield i)}}function l3(e,n,t){const i=Float64Array.from(WK(e,t));return i.sort(wc),n.map(r=>jK(i,r))}function c3(e,n){return l3(e,[.25,.5,.75],n)}function u3(e,n){const t=e.length,i=function Zke(e,n){const t=function Qke(e,n){let i,t=0,r=0,o=0;if(void 0===n)for(let s of e)null!=s&&(s=+s)>=s&&(i=s-r,r+=i/++t,o+=i*(s-r));else{let s=-1;for(let a of e)null!=(a=n(a,++s,e))&&(a=+a)>=a&&(i=a-r,r+=i/++t,o+=i*(a-r))}if(t>1)return o/(t-1)}(e,n);return t&&Math.sqrt(t)}(e,n),r=c3(e,n);return 1.06*(Math.min(i,(r[2]-r[0])/1.34)||i||Math.abs(r[0])||1)*Math.pow(t,-.2)}function GK(e){const n=e.maxbins||20,t=e.base||10,i=Math.log(t),r=e.divide||[5,2];let a,l,c,u,d,f,o=e.extent[0],s=e.extent[1];const h=e.span||s-o||Math.abs(o)||1;if(e.step)a=e.step;else if(e.steps){for(u=h/n,d=0,f=e.steps.length;d<f&&e.steps[d]<u;++d);a=e.steps[Math.max(0,d-1)]}else{for(l=Math.ceil(Math.log(n)/i),c=e.minstep||0,a=Math.max(c,Math.pow(t,Math.round(Math.log(h)/i)-l));Math.ceil(h/a)>n;)a*=t;for(d=0,f=r.length;d<f;++d)u=a/r[d],u>=c&&h/u<=n&&(a=u)}u=Math.log(a);const g=Math.pow(t,-(u>=0?0:1+~~(-u/i))-1);return(e.nice||void 0===e.nice)&&(u=Math.floor(o/a+g)*a,o=o<u?u-a:u,s=Math.ceil(s/a)*a),{start:o,stop:s===o?o+a:s,step:a}}var Ts=Math.random;function Jke(e){Ts=e}function KK(e,n,t,i){if(!e.length)return[void 0,void 0];const r=Float64Array.from(WK(e,i)),o=r.length,s=n;let a,l,c,u;for(c=0,u=Array(s);c<s;++c){for(a=0,l=0;l<o;++l)a+=r[~~(Ts()*o)];u[c]=a/o}return u.sort(wc),[a3(u,t/2),a3(u,1-t/2)]}function YK(e,n,t,i){i=i||(f=>f);const r=e.length,o=new Float64Array(r);let d,s=0,a=1,l=i(e[0]),c=l,u=l+n;for(;a<r;++a){if(d=i(e[a]),d>=u){for(c=(l+c)/2;s<a;++s)o[s]=c;u=d+n,l=d}c=d}for(c=(l+c)/2;s<a;++s)o[s]=c;return t?function eOe(e,n){const t=e.length;let o,s,i=0,r=1;for(;e[i]===e[r];)++r;for(;r<t;){for(o=r+1;e[r]===e[o];)++o;if(e[r]-e[r-1]<n){for(s=r+(i+o-r-r>>1);s<r;)e[s++]=e[r];for(;s>r;)e[s--]=e[i]}i=r,r=o}return e}(o,n+n/4):o}function tOe(e){return function(){return(e=(1103515245*e+12345)%2147483647)/2147483647}}function nOe(e,n){let t,i,r;null==n&&(n=e,e=0);const o={min(s){return arguments.length?(t=s||0,r=i-t,o):t},max(s){return arguments.length?(i=s||0,r=i-t,o):i},sample:()=>t+Math.floor(r*Ts()),pdf:s=>s===Math.floor(s)&&s>=t&&s<i?1/r:0,cdf(s){const a=Math.floor(s);return a<t?0:a>=i?1:(a-t+1)/r},icdf:s=>s>=0&&s<=1?t-1+Math.floor(s*r):NaN};return o.min(e).max(n)}const XK=Math.sqrt(2*Math.PI),iOe=Math.SQRT2;let yy=NaN;function dx(e,n){e=e||0,n=n??1;let r,o,t=0,i=0;if(yy==yy)t=yy,yy=NaN;else{do{t=2*Ts()-1,i=2*Ts()-1,r=t*t+i*i}while(0===r||r>1);o=Math.sqrt(-2*Math.log(r)/r),t*=o,yy=i*o}return e+t*n}function d3(e,n,t){const i=(e-(n||0))/(t=t??1);return Math.exp(-.5*i*i)/(t*XK)}function fx(e,n,t){const i=(e-(n=n||0))/(t=t??1),r=Math.abs(i);let o;if(r>37)o=0;else{const s=Math.exp(-r*r/2);let a;r<7.07106781186547?(a=.0352624965998911*r+.700383064443688,a=a*r+6.37396220353165,a=a*r+33.912866078383,a=a*r+112.079291497871,a=a*r+221.213596169931,a=a*r+220.206867912376,o=s*a,a=.0883883476483184*r+1.75566716318264,a=a*r+16.064177579207,a=a*r+86.7807322029461,a=a*r+296.564248779674,a=a*r+637.333633378831,a=a*r+793.826512519948,a=a*r+440.413735824752,o/=a):(a=r+.65,a=r+4/a,a=r+3/a,a=r+2/a,a=r+1/a,o=s/a/2.506628274631)}return i>0?1-o:o}function hx(e,n,t){return e<0||e>1?NaN:(n||0)+(t??1)*iOe*function rOe(e){let t,n=-Math.log((1-e)*(1+e));return n<6.25?(n-=3.125,t=-364441206401782e-35,t=t*n-16850591381820166e-35,t=128584807152564e-32+t*n,t=11157877678025181e-33+t*n,t=t*n-1333171662854621e-31,t=20972767875968562e-33+t*n,t=6637638134358324e-30+t*n,t=t*n-4054566272975207e-29,t=t*n-8151934197605472e-29,t=26335093153082323e-28+t*n,t=t*n-12975133253453532e-27,t=t*n-5415412054294628e-26,t=1.0512122733215323e-9+t*n,t=t*n-4.112633980346984e-9,t=t*n-2.9070369957882005e-8,t=4.2347877827932404e-7+t*n,t=t*n-13654692000834679e-22,t=t*n-13882523362786469e-21,t=.00018673420803405714+t*n,t=t*n-.000740702534166267,t=t*n-.006033670871430149,t=.24015818242558962+t*n,t=1.6536545626831027+t*n):n<16?(n=Math.sqrt(n)-3.25,t=2.2137376921775787e-9,t=9.075656193888539e-8+t*n,t=t*n-2.7517406297064545e-7,t=1.8239629214389228e-8+t*n,t=15027403968909828e-22+t*n,t=t*n-4013867526981546e-21,t=29234449089955446e-22+t*n,t=12475304481671779e-21+t*n,t=t*n-47318229009055734e-21,t=6828485145957318e-20+t*n,t=24031110387097894e-21+t*n,t=t*n-.0003550375203628475,t=.0009532893797373805+t*n,t=t*n-.0016882755560235047,t=.002491442096107851+t*n,t=t*n-.003751208507569241,t=.005370914553590064+t*n,t=1.0052589676941592+t*n,t=3.0838856104922208+t*n):Number.isFinite(n)?(n=Math.sqrt(n)-5,t=-27109920616438573e-27,t=t*n-2.555641816996525e-10,t=1.5076572693500548e-9+t*n,t=t*n-3.789465440126737e-9,t=7.61570120807834e-9+t*n,t=t*n-1.496002662714924e-8,t=2.914795345090108e-8+t*n,t=t*n-6.771199775845234e-8,t=2.2900482228026655e-7+t*n,t=t*n-9.9298272942317e-7,t=4526062597223154e-21+t*n,t=t*n-1968177810553167e-20,t=7599527703001776e-20+t*n,t=t*n-.00021503011930044477,t=t*n-.00013871931833623122,t=1.0103004648645344+t*n,t=4.849906401408584+t*n):t=1/0,t*e}(2*e-1)}function f3(e,n){let t,i;const r={mean(o){return arguments.length?(t=o||0,r):t},stdev(o){return arguments.length?(i=o??1,r):i},sample:()=>dx(t,i),pdf:o=>d3(o,t,i),cdf:o=>fx(o,t,i),icdf:o=>hx(o,t,i)};return r.mean(e).stdev(n)}function h3(e,n){const t=f3();let i=0;const r={data(o){return arguments.length?(e=o,i=o?o.length:0,r.bandwidth(n)):e},bandwidth(o){return arguments.length?(!(n=o)&&e&&(n=u3(e)),r):n},sample:()=>e[~~(Ts()*i)]+n*t.sample(),pdf(o){let s=0,a=0;for(;a<i;++a)s+=t.pdf((o-e[a])/n);return s/n/i},cdf(o){let s=0,a=0;for(;a<i;++a)s+=t.cdf((o-e[a])/n);return s/i},icdf(){throw Error("KDE icdf not supported.")}};return r.data(e)}function p3(e,n){return e=e||0,n=n??1,Math.exp(e+dx()*n)}function g3(e,n,t){if(e<=0)return 0;n=n||0,t=t??1;const i=(Math.log(e)-n)/t;return Math.exp(-.5*i*i)/(t*XK*e)}function m3(e,n,t){return fx(Math.log(e),n,t)}function _3(e,n,t){return Math.exp(hx(e,n,t))}function QK(e,n){let t,i;const r={mean(o){return arguments.length?(t=o||0,r):t},stdev(o){return arguments.length?(i=o??1,r):i},sample:()=>p3(t,i),pdf:o=>g3(o,t,i),cdf:o=>m3(o,t,i),icdf:o=>_3(o,t,i)};return r.mean(e).stdev(n)}function ZK(e,n){let i,t=0;const o={weights(s){return arguments.length?(i=function r(s){const a=[];let c,l=0;for(c=0;c<t;++c)l+=a[c]=null==s[c]?1:+s[c];for(c=0;c<t;++c)a[c]/=l;return a}(n=s||[]),o):n},distributions(s){return arguments.length?(s?(t=s.length,e=s):(t=0,e=[]),o.weights(n)):e},sample(){const s=Ts();let a=e[t-1],l=i[0],c=0;for(;c<t-1;l+=i[++c])if(s<l){a=e[c];break}return a.sample()},pdf(s){let a=0,l=0;for(;l<t;++l)a+=i[l]*e[l].pdf(s);return a},cdf(s){let a=0,l=0;for(;l<t;++l)a+=i[l]*e[l].cdf(s);return a},icdf(){throw Error("Mixture icdf not supported.")}};return o.distributions(e).weights(n)}function y3(e,n){return null==n&&(n=e??1,e=0),e+(n-e)*Ts()}function v3(e,n,t){return null==t&&(t=n??1,n=0),e>=n&&e<=t?1/(t-n):0}function b3(e,n,t){return null==t&&(t=n??1,n=0),e<n?0:e>t?1:(e-n)/(t-n)}function w3(e,n,t){return null==t&&(t=n??1,n=0),e>=0&&e<=1?n+e*(t-n):NaN}function JK(e,n){let t,i;const r={min(o){return arguments.length?(t=o||0,r):t},max(o){return arguments.length?(i=o??1,r):i},sample:()=>y3(t,i),pdf:o=>v3(o,t,i),cdf:o=>b3(o,t,i),icdf:o=>w3(o,t,i)};return null==n&&(n=e??1,e=0),r.min(e).max(n)}function C3(e,n,t){let i=0,r=0;for(const o of e){const s=t(o);null==n(o)||null==s||isNaN(s)||(i+=(s-i)/++r)}return{coef:[i],predict:()=>i,rSquared:0}}function vy(e,n,t,i){const r=i-e*e,o=Math.abs(r)<1e-24?0:(t-e*n)/r;return[n-o*e,o]}function px(e,n,t,i){e=e.filter(h=>{let p=n(h),g=t(h);return null!=p&&(p=+p)>=p&&null!=g&&(g=+g)>=g}),i&&e.sort((h,p)=>n(h)-n(p));const r=e.length,o=new Float64Array(r),s=new Float64Array(r);let u,d,f,a=0,l=0,c=0;for(f of e)o[a]=u=+n(f),s[a]=d=+t(f),++a,l+=(u-l)/a,c+=(d-c)/a;for(a=0;a<r;++a)o[a]-=l,s[a]-=c;return[o,s,l,c]}function by(e,n,t,i){let o,s,r=-1;for(const a of e)o=n(a),s=t(a),null!=o&&(o=+o)>=o&&null!=s&&(s=+s)>=s&&i(o,s,++r)}function Bg(e,n,t,i,r){let o=0,s=0;return by(e,n,t,(a,l)=>{const c=l-r(a),u=l-i;o+=c*c,s+=u*u}),1-o/s}function x3(e,n,t){let i=0,r=0,o=0,s=0,a=0;by(e,n,t,(u,d)=>{++a,i+=(u-i)/a,r+=(d-r)/a,o+=(u*d-o)/a,s+=(u*u-s)/a});const l=vy(i,r,o,s),c=u=>l[0]+l[1]*u;return{coef:l,predict:c,rSquared:Bg(e,n,t,r,c)}}function eY(e,n,t){let i=0,r=0,o=0,s=0,a=0;by(e,n,t,(u,d)=>{++a,u=Math.log(u),i+=(u-i)/a,r+=(d-r)/a,o+=(u*d-o)/a,s+=(u*u-s)/a});const l=vy(i,r,o,s),c=u=>l[0]+l[1]*Math.log(u);return{coef:l,predict:c,rSquared:Bg(e,n,t,r,c)}}function tY(e,n,t){const[i,r,o,s]=px(e,n,t);let f,h,p,a=0,l=0,c=0,u=0,d=0;by(e,n,t,(y,v)=>{f=i[d++],h=Math.log(v),p=f*v,a+=(v*h-a)/d,l+=(p-l)/d,c+=(p*h-c)/d,u+=(f*p-u)/d});const[g,m]=vy(l/s,a/s,c/s,u/s),_=y=>Math.exp(g+m*(y-o));return{coef:[Math.exp(g-m*o),m],predict:_,rSquared:Bg(e,n,t,s,_)}}function nY(e,n,t){let i=0,r=0,o=0,s=0,a=0,l=0;by(e,n,t,(d,f)=>{const h=Math.log(d),p=Math.log(f);++l,i+=(h-i)/l,r+=(p-r)/l,o+=(h*p-o)/l,s+=(h*h-s)/l,a+=(f-a)/l});const c=vy(i,r,o,s),u=d=>c[0]*Math.pow(d,c[1]);return c[0]=Math.exp(c[0]),{coef:c,predict:u,rSquared:Bg(e,n,t,a,u)}}function E3(e,n,t){const[i,r,o,s]=px(e,n,t),a=i.length;let h,p,g,m,l=0,c=0,u=0,d=0,f=0;for(h=0;h<a;)p=i[h],g=r[h++],m=p*p,l+=(m-l)/h,c+=(m*p-c)/h,u+=(m*m-u)/h,d+=(p*g-d)/h,f+=(m*g-f)/h;const _=u-l*l,y=l*_-c*c,v=(f*l-d*c)/y,b=(d*_-f*c)/y,w=-v*l,x=C=>v*(C-=o)*C+b*C+w+s;return{coef:[w-b*o+v*o*o+s,b-2*v*o,v],predict:x,rSquared:Bg(e,n,t,s,x)}}function iY(e,n,t,i){if(0===i)return C3(e,n,t);if(1===i)return x3(e,n,t);if(2===i)return E3(e,n,t);const[r,o,s,a]=px(e,n,t),l=r.length,c=[],u=[],d=i+1;let f,h,p,g,m;for(f=0;f<d;++f){for(p=0,g=0;p<l;++p)g+=Math.pow(r[p],f)*o[p];for(c.push(g),m=new Float64Array(d),h=0;h<d;++h){for(p=0,g=0;p<l;++p)g+=Math.pow(r[p],f+h);m[h]=g}u.push(m)}u.push(c);const _=function sOe(e){const n=e.length-1,t=[];let i,r,o,s,a;for(i=0;i<n;++i){for(s=i,r=i+1;r<n;++r)Math.abs(e[i][r])>Math.abs(e[i][s])&&(s=r);for(o=i;o<n+1;++o)a=e[o][i],e[o][i]=e[o][s],e[o][s]=a;for(r=i+1;r<n;++r)for(o=n;o>=i;o--)e[o][r]-=e[o][i]*e[i][r]/e[i][i]}for(r=n-1;r>=0;--r){for(a=0,o=r+1;o<n;++o)a+=e[o][r]*t[o];t[r]=(e[n][r]-a)/e[r][r]}return t}(u),y=v=>{let b=a+_[0]+_[1]*(v-=s)+_[2]*v*v;for(f=3;f<d;++f)b+=_[f]*Math.pow(v,f);return b};return{coef:oOe(d,_,-s,a),predict:y,rSquared:Bg(e,n,t,a,y)}}function oOe(e,n,t,i){const r=Array(e);let o,s,a,l;for(o=0;o<e;++o)r[o]=0;for(o=e-1;o>=0;--o)for(a=n[o],l=1,r[o]+=a,s=1;s<=o;++s)l*=(o+1-s)/s,r[o-s]+=a*Math.pow(t,s)*l;return r[0]+=i,r}const rY=2,oY=1e-12;function sY(e,n,t,i){const[r,o,s,a]=px(e,n,t,!0),l=r.length,c=Math.max(2,~~(i*l)),u=new Float64Array(l),d=new Float64Array(l),f=new Float64Array(l).fill(1);for(let h=-1;++h<=rY;){const p=[0,c-1];for(let m=0;m<l;++m){const _=r[m],y=p[0],v=p[1];let w=0,x=0,C=0,S=0,A=0;const M=1/Math.abs(r[_-r[y]>r[v]-_?y:v]-_||1);for(let P=y;P<=v;++P){const E=r[P],D=o[P],I=aOe(Math.abs(_-E)*M)*f[P],O=E*I;w+=I,x+=O,C+=D*I,S+=D*O,A+=E*O}const[N,V]=vy(x/w,C/w,S/w,A/w);u[m]=N+V*_,d[m]=Math.abs(o[m]-u[m]),lOe(r,m+1,p)}if(h===rY)break;const g=qK(d);if(Math.abs(g)<oY)break;for(let _,y,m=0;m<l;++m)_=d[m]/(6*g),f[m]=_>=1?oY:(y=1-_*_)*y}return function cOe(e,n,t,i){const r=e.length,o=[];let c,s=0,a=0,l=[];for(;s<r;++s)c=e[s]+t,l[0]===c?l[1]+=(n[s]-l[1])/++a:(a=0,l[1]+=i,l=[c,n[s]],o.push(l));return l[1]+=i,o}(r,u,s,a)}function aOe(e){return(e=1-e*e*e)*e*e}function lOe(e,n,t){const i=e[n];let r=t[0],o=t[1]+1;if(!(o>=e.length))for(;n>r&&e[o]-i<=i-e[r];)t[0]=++r,t[1]=o,++o}const uOe=.5*Math.PI/180;function gx(e,n,t,i){t=t||25,i=Math.max(t,i||200);const r=g=>[g,e(g)],o=n[0],s=n[1],a=s-o,l=a/i,c=[r(o)],u=[];if(t===i){for(let g=1;g<i;++g)c.push(r(o+g/t*a));return c.push(r(s)),c}u.push(r(s));for(let g=t;--g>0;)u.push(r(o+g/t*a));let d=c[0],f=u[u.length-1];const h=1/a,p=function dOe(e,n){let t=e,i=e;const r=n.length;for(let o=0;o<r;++o){const s=n[o][1];s<t&&(t=s),s>i&&(i=s)}return 1/(i-t)}(d[1],u);for(;f;){const g=r((d[0]+f[0])/2);g[0]-d[0]>=l&&fOe(d,g,f,h,p)>uOe?u.push(g):(d=f,c.push(f),u.pop()),f=u[u.length-1]}return c}function fOe(e,n,t,i,r){const o=Math.atan2(r*(t[1]-e[1]),i*(t[0]-e[0])),s=Math.atan2(r*(n[1]-e[1]),i*(n[0]-e[0]));return Math.abs(o-s)}function Ho(e,n,t){e=+e,n=+n,t=(r=arguments.length)<2?(n=e,e=0,1):r<3?1:+t;for(var i=-1,r=0|Math.max(0,Math.ceil((n-e)/t)),o=new Array(r);++i<r;)o[i]=e+i*t;return o}function S3(e){return e&&e.length?1===e.length?e[0]:function pOe(e){return n=>{const t=e.length;let i=1,r=String(e[0](n));for(;i<t;++i)r+="|"+e[i](n);return r}}(e):function(){return""}}function aY(e,n,t){return t||e+(n?"_"+n:"")}const T3=()=>{},gOe={init:T3,add:T3,rem:T3,idx:0},wy={values:{init:e=>e.cell.store=!0,value:e=>e.cell.data.values(),idx:-1},count:{value:e=>e.cell.num},__count__:{value:e=>e.missing+e.valid},missing:{value:e=>e.missing},valid:{value:e=>e.valid},sum:{init:e=>e.sum=0,value:e=>e.sum,add:(e,n)=>e.sum+=+n,rem:(e,n)=>e.sum-=n},product:{init:e=>e.product=1,value:e=>e.valid?e.product:void 0,add:(e,n)=>e.product*=n,rem:(e,n)=>e.product/=n},mean:{init:e=>e.mean=0,value:e=>e.valid?e.mean:void 0,add:(e,n)=>(e.mean_d=n-e.mean,e.mean+=e.mean_d/e.valid),rem:(e,n)=>(e.mean_d=n-e.mean,e.mean-=e.valid?e.mean_d/e.valid:e.mean)},average:{value:e=>e.valid?e.mean:void 0,req:["mean"],idx:1},variance:{init:e=>e.dev=0,value:e=>e.valid>1?e.dev/(e.valid-1):void 0,add:(e,n)=>e.dev+=e.mean_d*(n-e.mean),rem:(e,n)=>e.dev-=e.mean_d*(n-e.mean),req:["mean"],idx:1},variancep:{value:e=>e.valid>1?e.dev/e.valid:void 0,req:["variance"],idx:2},stdev:{value:e=>e.valid>1?Math.sqrt(e.dev/(e.valid-1)):void 0,req:["variance"],idx:2},stdevp:{value:e=>e.valid>1?Math.sqrt(e.dev/e.valid):void 0,req:["variance"],idx:2},stderr:{value:e=>e.valid>1?Math.sqrt(e.dev/(e.valid*(e.valid-1))):void 0,req:["variance"],idx:2},distinct:{value:e=>e.cell.data.distinct(e.get),req:["values"],idx:3},ci0:{value:e=>e.cell.data.ci0(e.get),req:["values"],idx:3},ci1:{value:e=>e.cell.data.ci1(e.get),req:["values"],idx:3},median:{value:e=>e.cell.data.q2(e.get),req:["values"],idx:3},q1:{value:e=>e.cell.data.q1(e.get),req:["values"],idx:3},q3:{value:e=>e.cell.data.q3(e.get),req:["values"],idx:3},min:{init:e=>e.min=void 0,value:e=>e.min=Number.isNaN(e.min)?e.cell.data.min(e.get):e.min,add:(e,n)=>{(n<e.min||void 0===e.min)&&(e.min=n)},rem:(e,n)=>{n<=e.min&&(e.min=NaN)},req:["values"],idx:4},max:{init:e=>e.max=void 0,value:e=>e.max=Number.isNaN(e.max)?e.cell.data.max(e.get):e.max,add:(e,n)=>{(n>e.max||void 0===e.max)&&(e.max=n)},rem:(e,n)=>{n>=e.max&&(e.max=NaN)},req:["values"],idx:4},argmin:{init:e=>e.argmin=void 0,value:e=>e.argmin||e.cell.data.argmin(e.get),add:(e,n,t)=>{n<e.min&&(e.argmin=t)},rem:(e,n)=>{n<=e.min&&(e.argmin=void 0)},req:["min","values"],idx:3},argmax:{init:e=>e.argmax=void 0,value:e=>e.argmax||e.cell.data.argmax(e.get),add:(e,n,t)=>{n>e.max&&(e.argmax=t)},rem:(e,n)=>{n>=e.max&&(e.argmax=void 0)},req:["max","values"],idx:3},exponential:{init:(e,n)=>{e.exp=0,e.exp_r=n},value:e=>e.valid?e.exp*(1-e.exp_r)/(1-e.exp_r**e.valid):void 0,add:(e,n)=>e.exp=e.exp_r*e.exp+n,rem:(e,n)=>e.exp=(e.exp-n/e.exp_r**(e.valid-1))/e.exp_r},exponentialb:{value:e=>e.valid?e.exp*(1-e.exp_r):void 0,req:["exponential"],idx:1}},Cy=Object.keys(wy).filter(e=>"__count__"!==e);function lY(e,n,t){return wy[e](t,n)}function cY(e,n){return e.idx-n.idx}function yOe(){this.valid=0,this.missing=0,this._ops.forEach(e=>null==e.aggregate_param?e.init(this):e.init(this,e.aggregate_param))}function vOe(e,n){null!=e&&""!==e?e==e&&(++this.valid,this._ops.forEach(t=>t.add(this,e,n))):++this.missing}function bOe(e,n){null!=e&&""!==e?e==e&&(--this.valid,this._ops.forEach(t=>t.rem(this,e,n))):--this.missing}function wOe(e){return this._out.forEach(n=>e[n.out]=n.value(this)),e}function uY(e,n){const t=n||nr,i=function _Oe(e){const n={};e.forEach(i=>n[i.name]=i);const t=i=>{i.req&&i.req.forEach(r=>{n[r]||t(n[r]=wy[r]())})};return e.forEach(t),Object.values(n).sort(cY)}(e),r=e.slice().sort(cY);function o(s){this._ops=i,this._out=r,this.cell=s,this.init()}return o.prototype.init=yOe,o.prototype.add=vOe,o.prototype.rem=bOe,o.prototype.set=wOe,o.prototype.get=t,o.fields=e.map(s=>s.out),o}function D3(e){this._key=e?Cs(e):Be,this.reset()}[...Cy,"__count__"].forEach(e=>{wy[e]=function mOe(e,n){return(t,i)=>ut({name:e,aggregate_param:i,out:t||e},gOe,n)}(e,wy[e])});const Bi=D3.prototype;function Pu(e){Z.call(this,null,e),this._adds=[],this._mods=[],this._alen=0,this._mlen=0,this._drop=!0,this._cross=!1,this._dims=[],this._dnames=[],this._measures=[],this._countOnly=!1,this._counts=null,this._prev=null,this._inputs=null,this._outputs=null}function I3(e){Z.call(this,null,e)}function dY(e,n,t){const i=e;let r=n||[],o=t||[],s={},a=0;return{add:l=>o.push(l),remove:l=>s[i(l)]=++a,size:()=>r.length,data:(l,c)=>(a&&(r=r.filter(u=>!s[i(u)]),s={},a=0),c&&l&&r.sort(l),o.length&&(r=l?aG(l,r,o.sort(l)):r.concat(o),o=[]),r)}}function M3(e){Z.call(this,[],e)}function fY(e){dn.call(this,null,xOe,e)}function xOe(e){return this.value&&!e.modified()?this.value:lO(e.fields,e.orders)}function A3(e){Z.call(this,null,e)}function k3(e){Z.call(this,null,e)}Bi.reset=function(){this._add=[],this._rem=[],this._ext=null,this._get=null,this._q=null},Bi.add=function(e){this._add.push(e)},Bi.rem=function(e){this._rem.push(e)},Bi.values=function(){if(this._get=null,0===this._rem.length)return this._add;const e=this._add,n=this._rem,t=this._key,i=e.length,r=n.length,o=Array(i-r),s={};let a,l,c;for(a=0;a<r;++a)s[t(n[a])]=1;for(a=0,l=0;a<i;++a)s[t(c=e[a])]?s[t(c)]=0:o[l++]=c;return this._rem=[],this._add=o},Bi.distinct=function(e){const n=this.values(),t={};let o,i=n.length,r=0;for(;--i>=0;)o=e(n[i])+"",$e(t,o)||(t[o]=1,++r);return r},Bi.extent=function(e){if(this._get!==e||!this._ext){const n=this.values(),t=tG(n,e);this._ext=[n[t[0]],n[t[1]]],this._get=e}return this._ext},Bi.argmin=function(e){return this.extent(e)[0]||{}},Bi.argmax=function(e){return this.extent(e)[1]||{}},Bi.min=function(e){const n=this.extent(e)[0];return null!=n?e(n):void 0},Bi.max=function(e){const n=this.extent(e)[1];return null!=n?e(n):void 0},Bi.quartile=function(e){return(this._get!==e||!this._q)&&(this._q=c3(this.values(),e),this._get=e),this._q},Bi.q1=function(e){return this.quartile(e)[0]},Bi.q2=function(e){return this.quartile(e)[1]},Bi.q3=function(e){return this.quartile(e)[2]},Bi.ci=function(e){return(this._get!==e||!this._ci)&&(this._ci=KK(this.values(),1e3,.05,e),this._get=e),this._ci},Bi.ci0=function(e){return this.ci(e)[0]},Bi.ci1=function(e){return this.ci(e)[1]},Pu.Definition={type:"Aggregate",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:Cy},{name:"aggregate_params",type:"field",null:!0,array:!0,default:[null]},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"drop",type:"boolean",default:!0},{name:"cross",type:"boolean",default:!1},{name:"key",type:"field"}]},pe(Pu,Z,{transform(e,n){const t=this,i=n.fork(n.NO_SOURCE|n.NO_FIELDS),r=e.modified();return t.stamp=i.stamp,t.value&&(r||n.modified(t._inputs,!0))?(t._prev=t.value,t.value=r?t.init(e):Object.create(null),n.visit(n.SOURCE,o=>t.add(o))):(t.value=t.value||t.init(e),n.visit(n.REM,o=>t.rem(o)),n.visit(n.ADD,o=>t.add(o))),i.modifies(t._outputs),t._drop=!1!==e.drop,e.cross&&t._dims.length>1&&(t._drop=!1,t.cross()),n.clean()&&t._drop&&i.clean(!0).runAfter(()=>this.clean()),t.changes(i)},cross(){const e=this,n=e.value,t=e._dnames,i=t.map(()=>({})),r=t.length;function o(a){let l,c,u,d;for(l in a)for(u=a[l].tuple,c=0;c<r;++c)i[c][d=u[t[c]]]=d}o(e._prev),o(n),function s(a,l,c){const u=t[c],d=i[c++];for(const f in d){const h=a?a+"|"+f:f;l[u]=d[f],c<r?s(h,l,c):n[h]||e.cell(h,l)}}("",{},0)},init(e){const n=this._inputs=[],t=this._outputs=[],i={};function r(y){const v=Ce(tr(y)),b=v.length;let x,w=0;for(;w<b;++w)i[x=v[w]]||(i[x]=1,n.push(x))}this._dims=Ce(e.groupby),this._dnames=this._dims.map(y=>{const v=Ln(y);return r(y),t.push(v),v}),this.cellkey=e.key?e.key:S3(this._dims),this._countOnly=!0,this._counts=[],this._measures=[];const o=e.fields||[null],s=e.ops||["count"],a=e.aggregate_params||[null],l=e.as||[],c=o.length,u={};let d,f,h,p,g,m,_;for(c!==s.length&&re("Unmatched number of fields and aggregate ops."),_=0;_<c;++_)d=o[_],f=s[_],h=a[_]||null,null==d&&"count"!==f&&re("Null aggregate field specified."),g=Ln(d),m=aY(f,g,l[_]),t.push(m),"count"!==f?(p=u[g],p||(r(d),p=u[g]=[],p.field=d,this._measures.push(p)),"count"!==f&&(this._countOnly=!1),p.push(lY(f,h,m))):this._counts.push(m);return this._measures=this._measures.map(y=>uY(y,y.field)),Object.create(null)},cellkey:S3(),cell(e,n){let t=this.value[e];return t?0===t.num&&this._drop&&t.stamp<this.stamp?(t.stamp=this.stamp,this._adds[this._alen++]=t):t.stamp<this.stamp&&(t.stamp=this.stamp,this._mods[this._mlen++]=t):(t=this.value[e]=this.newcell(e,n),this._adds[this._alen++]=t),t},newcell(e,n){const t={key:e,num:0,agg:null,tuple:this.newtuple(n,this._prev&&this._prev[e]),stamp:this.stamp,store:!1};if(!this._countOnly){const i=this._measures,r=i.length;t.agg=Array(r);for(let o=0;o<r;++o)t.agg[o]=new i[o](t)}return t.store&&(t.data=new D3),t},newtuple(e,n){const t=this._dnames,i=this._dims,r=i.length,o={};for(let s=0;s<r;++s)o[t[s]]=i[s](e);return n?MK(n.tuple,o):qt(o)},clean(){const e=this.value;for(const n in e)0===e[n].num&&delete e[n]},add(e){const n=this.cellkey(e),t=this.cell(n,e);if(t.num+=1,this._countOnly)return;t.store&&t.data.add(e);const i=t.agg;for(let r=0,o=i.length;r<o;++r)i[r].add(i[r].get(e),e)},rem(e){const n=this.cellkey(e),t=this.cell(n,e);if(t.num-=1,this._countOnly)return;t.store&&t.data.rem(e);const i=t.agg;for(let r=0,o=i.length;r<o;++r)i[r].rem(i[r].get(e),e)},celltuple(e){const n=e.tuple,t=this._counts;e.store&&e.data.values();for(let i=0,r=t.length;i<r;++i)n[t[i]]=e.num;if(!this._countOnly){const i=e.agg;for(let r=0,o=i.length;r<o;++r)i[r].set(n)}return n},changes(e){const n=this._adds,t=this._mods,i=this._prev,r=this._drop,o=e.add,s=e.rem,a=e.mod;let l,c,u,d;if(i)for(c in i)l=i[c],(!r||l.num)&&s.push(l.tuple);for(u=0,d=this._alen;u<d;++u)o.push(this.celltuple(n[u])),n[u]=null;for(u=0,d=this._mlen;u<d;++u)l=t[u],(0===l.num&&r?s:a).push(this.celltuple(l)),t[u]=null;return this._alen=this._mlen=0,this._prev=null,e}}),I3.Definition={type:"Bin",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"interval",type:"boolean",default:!0},{name:"anchor",type:"number"},{name:"maxbins",type:"number",default:20},{name:"base",type:"number",default:10},{name:"divide",type:"number",array:!0,default:[5,2]},{name:"extent",type:"number",array:!0,length:2,required:!0},{name:"span",type:"number"},{name:"step",type:"number"},{name:"steps",type:"number",array:!0},{name:"minstep",type:"number",default:0},{name:"nice",type:"boolean",default:!0},{name:"name",type:"string"},{name:"as",type:"string",array:!0,length:2,default:["bin0","bin1"]}]},pe(I3,Z,{transform(e,n){const t=!1!==e.interval,i=this._bins(e),r=i.start,o=i.step,s=e.as||["bin0","bin1"],a=s[0],l=s[1];let c;return c=e.modified()?(n=n.reflow(!0)).SOURCE:n.modified(tr(e.field))?n.ADD_MOD:n.ADD,n.visit(c,t?u=>{const d=i(u);u[a]=d,u[l]=null==d?null:r+o*(1+(d-r)/o)}:u=>u[a]=i(u)),n.modifies(t?s:a)},_bins(e){if(this.value&&!e.modified())return this.value;const n=e.field,t=GK(e),i=t.step;let s,a,r=t.start,o=r+Math.ceil((t.stop-r)/i)*i;null!=(s=e.anchor)&&(a=s-(r+i*Math.floor((s-r)/i)),r+=a,o+=a);const l=function(c){let u=ir(n(c));return null==u?null:u<r?-1/0:u>o?1/0:(u=Math.max(r,Math.min(u,o-i)),r+i*Math.floor(1e-14+(u-r)/i))};return l.start=r,l.stop=t.stop,l.step=i,this.value=no(l,tr(n),e.name||"bin_"+Ln(n))}}),M3.Definition={type:"Collect",metadata:{source:!0},params:[{name:"sort",type:"compare"}]},pe(M3,Z,{transform(e,n){const t=n.fork(n.ALL),i=dY(Be,this.value,t.materialize(t.ADD).add),r=e.sort,o=n.changed()||r&&(e.modified("sort")||n.modified(r.fields));return t.visit(t.REM,i.remove),this.modified(o),this.value=t.source=i.data(Rf(r),o),n.source&&n.source.root&&(this.value.root=n.source.root),t}}),pe(fY,dn),A3.Definition={type:"CountPattern",metadata:{generates:!0,changes:!0},params:[{name:"field",type:"field",required:!0},{name:"case",type:"enum",values:["upper","lower","mixed"],default:"mixed"},{name:"pattern",type:"string",default:'[\\w"]+'},{name:"stopwords",type:"string",default:""},{name:"as",type:"string",array:!0,length:2,default:["text","count"]}]},pe(A3,Z,{transform(e,n){const t=d=>f=>{for(var p,h=function EOe(e,n,t){switch(n){case"upper":e=e.toUpperCase();break;case"lower":e=e.toLowerCase()}return e.match(t)}(a(f),e.case,o)||[],g=0,m=h.length;g<m;++g)s.test(p=h[g])||d(p)},i=this._parameterCheck(e,n),r=this._counts,o=this._match,s=this._stop,a=e.field,l=e.as||["text","count"],c=t(d=>r[d]=1+(r[d]||0)),u=t(d=>r[d]-=1);return i?n.visit(n.SOURCE,c):(n.visit(n.ADD,c),n.visit(n.REM,u)),this._finish(n,l)},_parameterCheck(e,n){let t=!1;return(e.modified("stopwords")||!this._stop)&&(this._stop=new RegExp("^"+(e.stopwords||"")+"$","i"),t=!0),(e.modified("pattern")||!this._match)&&(this._match=new RegExp(e.pattern||"[\\w']+","g"),t=!0),(e.modified("field")||n.modified(e.field.fields))&&(t=!0),t&&(this._counts={}),t},_finish(e,n){const t=this._counts,i=this._tuples||(this._tuples={}),r=n[0],o=n[1],s=e.fork(e.NO_SOURCE|e.NO_FIELDS);let a,l,c;for(a in t)l=i[a],c=t[a]||0,!l&&c?(i[a]=l=qt({}),l[r]=a,l[o]=c,s.add.push(l)):0===c?(l&&s.rem.push(l),t[a]=null,i[a]=null):l[o]!==c&&(l[o]=c,s.mod.push(l));return s.modifies(n)}}),k3.Definition={type:"Cross",metadata:{generates:!0},params:[{name:"filter",type:"expr"},{name:"as",type:"string",array:!0,length:2,default:["a","b"]}]},pe(k3,Z,{transform(e,n){const t=n.fork(n.NO_SOURCE),i=e.as||["a","b"],r=i[0],o=i[1],s=!this.value||n.changed(n.ADD_REM)||e.modified("as")||e.modified("filter");let a=this.value;return s?(a&&(t.rem=a),a=n.materialize(n.SOURCE).source,t.add=this.value=function SOe(e,n,t,i){for(var l,c,r=[],o={},s=e.length,a=0;a<s;++a)for(o[n]=c=e[a],l=0;l<s;++l)o[t]=e[l],i(o)&&(r.push(qt(o)),(o={})[n]=c);return r}(a,r,o,e.filter||xs)):t.mod=a,t.source=this.value,t.modifies(i)}});const hY={kde:h3,mixture:ZK,normal:f3,lognormal:QK,uniform:JK},pY="function";function gY(e,n){const t=e[pY];$e(hY,t)||re("Unknown distribution function: "+t);const i=hY[t]();for(const r in e)"field"===r?i.data((e.from||n()).map(e[r])):"distributions"===r?i[r](e[r].map(o=>gY(o,n))):typeof i[r]===pY&&i[r](e[r]);return i}function O3(e){Z.call(this,null,e)}const mY=[{key:{function:"normal"},params:[{name:"mean",type:"number",default:0},{name:"stdev",type:"number",default:1}]},{key:{function:"lognormal"},params:[{name:"mean",type:"number",default:0},{name:"stdev",type:"number",default:1}]},{key:{function:"uniform"},params:[{name:"min",type:"number",default:0},{name:"max",type:"number",default:1}]},{key:{function:"kde"},params:[{name:"field",type:"field",required:!0},{name:"from",type:"data"},{name:"bandwidth",type:"number",default:0}]}];function _Y(e,n){return e?e.map((t,i)=>n[i]||Ln(t)):null}function R3(e,n,t){const i=[],r=d=>d(l);let o,s,a,l,c,u;if(null==n)i.push(e.map(t));else for(o={},s=0,a=e.length;s<a;++s)l=e[s],c=n.map(r),u=o[c],u||(o[c]=u=[],u.dims=c,i.push(u)),u.push(t(l));return i}function F3(e){Z.call(this,null,e)}function vY(e){dn.call(this,null,kOe,e),this.modified(!0)}function kOe(e){const n=e.expr;return this.value&&!e.modified("expr")?this.value:no(t=>n(t,e),tr(n),Ln(n))}function N3(e){Z.call(this,[void 0,void 0],e)}function P3(e,n){dn.call(this,e),this.parent=n,this.count=0}function mx(e){Z.call(this,{},e),this._keys=xg();const n=this._targets=[];n.active=0,n.forEach=t=>{for(let i=0,r=n.active;i<r;++i)t(n[i],i,n)}}function bY(e){dn.call(this,null,OOe,e)}function OOe(e){return this.value&&!e.modified()?this.value:oe(e.name)?Ce(e.name).map(n=>Cs(n)):Cs(e.name,e.as)}function L3(e){Z.call(this,xg(),e)}function $3(e){Z.call(this,[],e)}function B3(e){Z.call(this,[],e)}function V3(e){Z.call(this,null,e)}function wY(e){Z.call(this,[],e)}O3.Definition={type:"Density",metadata:{generates:!0},params:[{name:"extent",type:"number",array:!0,length:2},{name:"steps",type:"number"},{name:"minsteps",type:"number",default:25},{name:"maxsteps",type:"number",default:200},{name:"method",type:"string",default:"pdf",values:["pdf","cdf"]},{name:"distribution",type:"param",params:mY.concat({key:{function:"mixture"},params:[{name:"distributions",type:"param",array:!0,params:mY},{name:"weights",type:"number",array:!0}]})},{name:"as",type:"string",array:!0,default:["value","density"]}]},pe(O3,Z,{transform(e,n){const t=n.fork(n.NO_SOURCE|n.NO_FIELDS);if(!this.value||n.changed()||e.modified()){const i=gY(e.distribution,function MOe(e){return()=>e.materialize(e.SOURCE).source}(n)),r=e.steps||e.minsteps||25,o=e.steps||e.maxsteps||200;let s=e.method||"pdf";"pdf"!==s&&"cdf"!==s&&re("Invalid density method: "+s),!e.extent&&!i.data&&re("Missing density extent parameter."),s=i[s];const a=e.as||["value","density"],c=gx(s,e.extent||al(i.data()),r,o).map(u=>{const d={};return d[a[0]]=u[0],d[a[1]]=u[1],qt(d)});this.value&&(t.rem=this.value),this.value=t.add=t.source=c}return t}}),F3.Definition={type:"DotBin",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"step",type:"number"},{name:"smooth",type:"boolean",default:!1},{name:"as",type:"string",default:"bin"}]},pe(F3,Z,{transform(e,n){if(this.value&&!e.modified()&&!n.changed())return n;const t=n.materialize(n.SOURCE).source,i=R3(n.source,e.groupby,nr),r=e.smooth||!1,o=e.field,s=e.step||((e,n)=>J_(al(e,n))/30)(t,o),a=Rf((p,g)=>o(p)-o(g)),l=e.as||"bin",c=i.length;let h,u=1/0,d=-1/0,f=0;for(;f<c;++f){const p=i[f].sort(a);h=-1;for(const g of YK(p,s,r,o))g<u&&(u=g),g>d&&(d=g),p[++h][l]=g}return this.value={start:u,stop:d,step:s},n.reflow(!0).modifies(l)}}),pe(vY,dn),N3.Definition={type:"Extent",metadata:{},params:[{name:"field",type:"field",required:!0}]},pe(N3,Z,{transform(e,n){const t=this.value,i=e.field,r=n.changed()||n.modified(i.fields)||e.modified("field");let o=t[0],s=t[1];if((r||null==o)&&(o=1/0,s=-1/0),n.visit(r?n.SOURCE:n.ADD,a=>{const l=ir(i(a));null!=l&&(l<o&&(o=l),l>s&&(s=l))}),!Number.isFinite(o)||!Number.isFinite(s)){let a=Ln(i);a&&(a=` for field "${a}"`),n.dataflow.warn(`Infinite extent${a}: [${o}, ${s}]`),o=s=void 0}this.value=[o,s]}}),pe(P3,dn,{connect(e){return this.detachSubflow=e.detachSubflow,this.targets().add(e),e.source=this},add(e){this.count+=1,this.value.add.push(e)},rem(e){this.count-=1,this.value.rem.push(e)},mod(e){this.value.mod.push(e)},init(e){this.value.init(e,e.NO_SOURCE)},evaluate(){return this.value}}),pe(mx,Z,{activate(e){this._targets[this._targets.active++]=e},subflow(e,n,t,i){const r=this.value;let s,a,o=$e(r,e)&&r[e];return o?o.value.stamp<t.stamp&&(o.init(t),this.activate(o)):(a=i||(a=this._group[e])&&a.tuple,s=t.dataflow,o=new P3(t.fork(t.NO_SOURCE),this),s.add(o).connect(n(s,e,a)),r[e]=o,this.activate(o)),o},clean(){const e=this.value;let n=0;for(const t in e)if(0===e[t].count){const i=e[t].detachSubflow;i&&i(),delete e[t],++n}if(n){const t=this._targets.filter(i=>i&&i.count>0);this.initTargets(t)}},initTargets(e){const n=this._targets,t=n.length,i=e?e.length:0;let r=0;for(;r<i;++r)n[r]=e[r];for(;r<t&&null!=n[r];++r)n[r]=null;n.active=i},transform(e,n){const t=n.dataflow,i=e.key,r=e.subflow,o=this._keys,s=e.modified("key"),a=l=>this.subflow(l,r,n);return this._group=e.group||{},this.initTargets(),n.visit(n.REM,l=>{const c=Be(l),u=o.get(c);void 0!==u&&(o.delete(c),a(u).rem(l))}),n.visit(n.ADD,l=>{const c=i(l);o.set(Be(l),c),a(c).add(l)}),s||n.modified(i.fields)?n.visit(n.MOD,l=>{const c=Be(l),u=o.get(c),d=i(l);u===d?a(d).mod(l):(o.set(c,d),a(u).rem(l),a(d).add(l))}):n.changed(n.MOD)&&n.visit(n.MOD,l=>{a(o.get(Be(l))).mod(l)}),s&&n.visit(n.REFLOW,l=>{const c=Be(l),u=o.get(c),d=i(l);u!==d&&(o.set(c,d),a(u).rem(l),a(d).add(l))}),n.clean()?t.runAfter(()=>{this.clean(),o.clean()}):o.empty>t.cleanThreshold&&t.runAfter(o.clean),n}}),pe(bY,dn),L3.Definition={type:"Filter",metadata:{changes:!0},params:[{name:"expr",type:"expr",required:!0}]},pe(L3,Z,{transform(e,n){const t=n.dataflow,i=this.value,r=n.fork(),o=r.add,s=r.rem,a=r.mod,l=e.expr;let c=!0;function u(d){const f=Be(d),h=l(d,e),p=i.get(f);h&&p?(i.delete(f),o.push(d)):h||p?c&&h&&!p&&a.push(d):(i.set(f,1),s.push(d))}return n.visit(n.REM,d=>{const f=Be(d);i.has(f)?i.delete(f):s.push(d)}),n.visit(n.ADD,d=>{l(d,e)?o.push(d):i.set(Be(d),1)}),n.visit(n.MOD,u),e.modified()&&(c=!1,n.visit(n.REFLOW,u)),i.empty>t.cleanThreshold&&t.runAfter(i.clean),r}}),$3.Definition={type:"Flatten",metadata:{generates:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"index",type:"string"},{name:"as",type:"string",array:!0}]},pe($3,Z,{transform(e,n){const t=n.fork(n.NO_SOURCE),i=e.fields,r=_Y(i,e.as||[]),o=e.index||null,s=r.length;return t.rem=this.value,n.visit(n.SOURCE,a=>{const l=i.map(p=>p(a)),c=l.reduce((p,g)=>Math.max(p,g.length),0);let d,f,h,u=0;for(;u<c;++u){for(f=QO(a),d=0;d<s;++d)f[r[d]]=null==(h=l[d][u])?null:h;o&&(f[o]=u),t.add.push(f)}}),this.value=t.source=t.add,o&&t.modifies(o),t.modifies(r)}}),B3.Definition={type:"Fold",metadata:{generates:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0,length:2,default:["key","value"]}]},pe(B3,Z,{transform(e,n){const t=n.fork(n.NO_SOURCE),i=e.fields,r=i.map(Ln),o=e.as||["key","value"],s=o[0],a=o[1],l=i.length;return t.rem=this.value,n.visit(n.SOURCE,c=>{for(let d,u=0;u<l;++u)d=QO(c),d[s]=r[u],d[a]=i[u](c),t.add.push(d)}),this.value=t.source=t.add,t.modifies(o)}}),V3.Definition={type:"Formula",metadata:{modifies:!0},params:[{name:"expr",type:"expr",required:!0},{name:"as",type:"string",required:!0},{name:"initonly",type:"boolean"}]},pe(V3,Z,{transform(e,n){const t=e.expr,i=e.as,r=e.modified(),o=e.initonly?n.ADD:r?n.SOURCE:n.modified(t.fields)||n.modified(i)?n.ADD_MOD:n.ADD;return r&&(n=n.materialize().reflow(!0)),e.initonly||n.modifies(i),n.visit(o,s=>s[i]=t(s,e))}}),pe(wY,Z,{transform(e,n){const t=n.fork(n.ALL),i=e.generator;let s,a,l,r=this.value,o=e.size-r.length;if(o>0){for(s=[];--o>=0;)s.push(l=qt(i(e))),r.push(l);t.add=t.add.length?t.materialize(t.ADD).add.concat(s):s}else a=r.slice(0,-o),t.rem=t.rem.length?t.materialize(t.REM).rem.concat(a):a,r=r.slice(-o);return t.source=this.value=r,t}});const _x={value:"value",median:qK,mean:function hOe(e,n){let t=0,i=0;if(void 0===n)for(let r of e)null!=r&&(r=+r)>=r&&(++t,i+=r);else{let r=-1;for(let o of e)null!=(o=n(o,++r,e))&&(o=+o)>=o&&(++t,i+=o)}if(t)return i/t},min:s3,max:Ff},ROe=[];function z3(e){Z.call(this,[],e)}function U3(e){Pu.call(this,e)}function H3(e){Z.call(this,null,e)}function CY(e){dn.call(this,null,LOe,e)}function LOe(e){return this.value&&!e.modified()?this.value:uO(e.fields,e.flat)}function xY(e){Z.call(this,[],e),this._pending=null}function j3(e,n,t){t.forEach(qt);const i=n.fork(n.NO_FIELDS&n.NO_SOURCE);return i.rem=e.value,e.value=i.source=i.add=t,e._pending=null,i.rem.length&&i.clean(!0),i}function q3(e){Z.call(this,{},e)}function EY(e){dn.call(this,null,BOe,e)}function BOe(e){if(this.value&&!e.modified())return this.value;const n=e.extents,t=n.length;let o,s,i=1/0,r=-1/0;for(o=0;o<t;++o)s=n[o],s[0]<i&&(i=s[0]),s[1]>r&&(r=s[1]);return[i,r]}function SY(e){dn.call(this,null,VOe,e)}function VOe(e){return this.value&&!e.modified()?this.value:e.values.reduce((n,t)=>n.concat(t),[])}function TY(e){Z.call(this,null,e)}function W3(e){Pu.call(this,e)}function DY(e){mx.call(this,e)}function G3(e){Z.call(this,null,e)}function IY(e){Z.call(this,null,e)}function K3(e){Z.call(this,null,e)}function MY(e){Z.call(this,null,e)}function Y3(e){Z.call(this,[],e),this.count=0}function X3(e){Z.call(this,null,e)}function AY(e){Z.call(this,null,e),this.modified(!0)}function Q3(e){Z.call(this,null,e)}z3.Definition={type:"Impute",metadata:{changes:!0},params:[{name:"field",type:"field",required:!0},{name:"key",type:"field",required:!0},{name:"keyvals",array:!0},{name:"groupby",type:"field",array:!0},{name:"method",type:"enum",default:"value",values:["value","mean","median","max","min"]},{name:"value",default:0}]},pe(z3,Z,{transform(e,n){var f,h,p,g,m,_,y,v,b,w,t=n.fork(n.ALL),i=function FOe(e){var t,n=e.method||_x.value;if(null!=_x[n])return n===_x.value?(t=void 0!==e.value?e.value:0,()=>t):_x[n];re("Unrecognized imputation method: "+n)}(e),r=function NOe(e){const n=e.field;return t=>t?n(t):NaN}(e),o=Ln(e.field),s=Ln(e.key),a=(e.groupby||[]).map(Ln),l=function POe(e,n,t,i){var c,u,d,f,h,p,g,m,r=_=>_(m),o=[],s=i?i.slice():[],a={},l={};for(s.forEach((_,y)=>a[_]=y+1),f=0,g=e.length;f<g;++f)p=t(m=e[f]),h=a[p]||(a[p]=s.push(p)),(d=l[u=(c=n?n.map(r):ROe)+""])||(d=l[u]=[],o.push(d),d.values=c),d[h-1]=m;return o.domain=s,o}(n.source,e.groupby,e.key,e.keyvals),c=[],u=this.value,d=l.domain.length;for(m=0,v=l.length;m<v;++m)for(p=(f=l[m]).values,h=NaN,y=0;y<d;++y)if(null==f[y]){for(g=l.domain[y],w={_impute:!0},_=0,b=p.length;_<b;++_)w[a[_]]=p[_];w[s]=g,w[o]=Number.isNaN(h)?h=i(f,r):h,c.push(qt(w))}return c.length&&(t.add=t.materialize(t.ADD).add.concat(c)),u.length&&(t.rem=t.materialize(t.REM).rem.concat(u)),this.value=c,t}}),U3.Definition={type:"JoinAggregate",metadata:{modifies:!0},params:[{name:"groupby",type:"field",array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"ops",type:"enum",array:!0,values:Cy},{name:"as",type:"string",null:!0,array:!0},{name:"key",type:"field"}]},pe(U3,Pu,{transform(e,n){const t=this,i=e.modified();let r;return t.value&&(i||n.modified(t._inputs,!0))?(r=t.value=i?t.init(e):{},n.visit(n.SOURCE,o=>t.add(o))):(r=t.value=t.value||this.init(e),n.visit(n.REM,o=>t.rem(o)),n.visit(n.ADD,o=>t.add(o))),t.changes(),n.visit(n.SOURCE,o=>{ut(o,r[t.cellkey(o)].tuple)}),n.reflow(i).modifies(this._outputs)},changes(){const e=this._adds,n=this._mods;let t,i;for(t=0,i=this._alen;t<i;++t)this.celltuple(e[t]),e[t]=null;for(t=0,i=this._mlen;t<i;++t)this.celltuple(n[t]),n[t]=null;this._alen=this._mlen=0}}),H3.Definition={type:"KDE",metadata:{generates:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"cumulative",type:"boolean",default:!1},{name:"counts",type:"boolean",default:!1},{name:"bandwidth",type:"number",default:0},{name:"extent",type:"number",array:!0,length:2},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"steps",type:"number"},{name:"minsteps",type:"number",default:25},{name:"maxsteps",type:"number",default:200},{name:"as",type:"string",array:!0,default:["value","density"]}]},pe(H3,Z,{transform(e,n){const t=n.fork(n.NO_SOURCE|n.NO_FIELDS);if(!this.value||n.changed()||e.modified()){const i=n.materialize(n.SOURCE).source,r=R3(i,e.groupby,e.field),o=(e.groupby||[]).map(Ln),s=e.bandwidth,a=e.cumulative?"cdf":"pdf",l=e.as||["value","density"],c=[];let u=e.extent,d=e.steps||e.minsteps||25,f=e.steps||e.maxsteps||200;"pdf"!==a&&"cdf"!==a&&re("Invalid density method: "+a),"shared"===e.resolve&&(u||(u=al(i,e.field)),d=f=e.steps||f),r.forEach(h=>{const p=h3(h,s)[a],g=e.counts?h.length:1;gx(p,u||al(h),d,f).forEach(_=>{const y={};for(let v=0;v<o.length;++v)y[o[v]]=h.dims[v];y[l[0]]=_[0],y[l[1]]=_[1]*g,c.push(qt(y))})}),this.value&&(t.rem=this.value),this.value=t.add=t.source=c}return t}}),pe(CY,dn),pe(xY,Z,{transform(e,n){const t=n.dataflow;return this._pending?j3(this,n,this._pending):function $Oe(e){return e.modified("async")&&!(e.modified("values")||e.modified("url")||e.modified("format"))}(e)?n.StopPropagation:e.values?j3(this,n,t.parse(e.values,e.format)):e.async?{async:t.request(e.url,e.format).then(r=>(this._pending=Ce(r.data),o=>o.touch(this)))}:t.request(e.url,e.format).then(i=>j3(this,n,Ce(i.data)))}}),q3.Definition={type:"Lookup",metadata:{modifies:!0},params:[{name:"index",type:"index",params:[{name:"from",type:"data",required:!0},{name:"key",type:"field",required:!0}]},{name:"values",type:"field",array:!0},{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0},{name:"default",default:null}]},pe(q3,Z,{transform(e,n){const t=e.fields,i=e.index,r=e.values,o=null==e.default?null:e.default,s=e.modified(),a=t.length;let d,f,h,l=s?n.SOURCE:n.ADD,c=n,u=e.as;return r?(f=r.length,a>1&&!u&&re('Multi-field lookup requires explicit "as" parameter.'),u&&u.length!==a*f&&re('The "as" parameter has too few output field names.'),u=u||r.map(Ln),d=function(p){for(var _,y,g=0,m=0;g<a;++g)if(null==(y=i.get(t[g](p))))for(_=0;_<f;++_,++m)p[u[m]]=o;else for(_=0;_<f;++_,++m)p[u[m]]=r[_](y)}):(u||re("Missing output field names."),d=function(p){for(var m,g=0;g<a;++g)m=i.get(t[g](p)),p[u[g]]=m??o}),s?c=n.reflow(!0):(h=t.some(p=>n.modified(p.fields)),l|=h?n.MOD:0),n.visit(l,d),c.modifies(u)}}),pe(EY,dn),pe(SY,dn),pe(TY,Z,{transform(e,n){return this.modified(e.modified()),this.value=e,n.fork(n.NO_SOURCE|n.NO_FIELDS)}}),W3.Definition={type:"Pivot",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"value",type:"field",required:!0},{name:"op",type:"enum",values:Cy,default:"sum"},{name:"limit",type:"number",default:0},{name:"key",type:"field"}]},pe(W3,Pu,{_transform:Pu.prototype.transform,transform(e,n){return this._transform(function zOe(e,n){const t=e.field,i=e.value,r=("count"===e.op?"__count__":e.op)||"sum",o=tr(t).concat(tr(i)),s=function HOe(e,n,t){const i={},r=[];return t.visit(t.SOURCE,o=>{const s=e(o);i[s]||(i[s]=1,r.push(s))}),r.sort($C),n?r.slice(0,n):r}(t,e.limit||0,n);return n.changed()&&e.set("__pivot__",null,null,!0),{key:e.key,groupby:e.groupby,ops:s.map(()=>r),fields:s.map(a=>function UOe(e,n,t,i){return no(r=>n(r)===e?t(r):NaN,i,e+"")}(a,t,i,o)),as:s.map(a=>a+""),modified:e.modified.bind(e)}}(e,n),n)}}),pe(DY,mx,{transform(e,n){const t=e.subflow,i=e.field,r=o=>this.subflow(Be(o),t,n,o);return(e.modified("field")||i&&n.modified(tr(i)))&&re("PreFacet does not support field modification."),this.initTargets(),i?(n.visit(n.MOD,o=>{const s=r(o);i(o).forEach(a=>s.mod(a))}),n.visit(n.ADD,o=>{const s=r(o);i(o).forEach(a=>s.add(qt(a)))}),n.visit(n.REM,o=>{const s=r(o);i(o).forEach(a=>s.rem(a))})):(n.visit(n.MOD,o=>r(o).mod(o)),n.visit(n.ADD,o=>r(o).add(o)),n.visit(n.REM,o=>r(o).rem(o))),n.clean()&&n.runAfter(()=>this.clean()),n}}),G3.Definition={type:"Project",metadata:{generates:!0,changes:!0},params:[{name:"fields",type:"field",array:!0},{name:"as",type:"string",null:!0,array:!0}]},pe(G3,Z,{transform(e,n){const t=n.fork(n.NO_SOURCE),i=e.fields,r=_Y(e.fields,e.as||[]),o=i?(a,l)=>function jOe(e,n,t,i){for(let r=0,o=t.length;r<o;++r)n[i[r]]=t[r](e);return n}(a,l,i,r):rx;let s;return this.value?s=this.value:(n=n.addAll(),s=this.value={}),n.visit(n.REM,a=>{const l=Be(a);t.rem.push(s[l]),s[l]=null}),n.visit(n.ADD,a=>{const l=o(a,qt({}));s[Be(a)]=l,t.add.push(l)}),n.visit(n.MOD,a=>{t.mod.push(o(a,s[Be(a)]))}),t}}),pe(IY,Z,{transform(e,n){return this.value=e.value,e.modified("value")?n.fork(n.NO_SOURCE|n.NO_FIELDS):n.StopPropagation}}),K3.Definition={type:"Quantile",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"probs",type:"number",array:!0},{name:"step",type:"number",default:.01},{name:"as",type:"string",array:!0,default:["prob","value"]}]},pe(K3,Z,{transform(e,n){const t=n.fork(n.NO_SOURCE|n.NO_FIELDS),i=e.as||["prob","value"];if(this.value&&!e.modified()&&!n.changed())return t.source=this.value,t;const o=R3(n.materialize(n.SOURCE).source,e.groupby,e.field),s=(e.groupby||[]).map(Ln),a=[],l=e.step||.01,c=e.probs||Ho(l/2,1-1e-14,l),u=c.length;return o.forEach(d=>{const f=l3(d,c);for(let h=0;h<u;++h){const p={};for(let g=0;g<s.length;++g)p[s[g]]=d.dims[g];p[i[0]]=c[h],p[i[1]]=f[h],a.push(qt(p))}}),this.value&&(t.rem=this.value),this.value=t.add=t.source=a,t}}),pe(MY,Z,{transform(e,n){let t,i;return this.value?i=this.value:(t=n=n.addAll(),i=this.value={}),e.derive&&(t=n.fork(n.NO_SOURCE),n.visit(n.REM,r=>{const o=Be(r);t.rem.push(i[o]),i[o]=null}),n.visit(n.ADD,r=>{const o=QO(r);i[Be(r)]=o,t.add.push(o)}),n.visit(n.MOD,r=>{const o=i[Be(r)];for(const s in r)o[s]=r[s],t.modifies(s);t.mod.push(o)})),t}}),Y3.Definition={type:"Sample",metadata:{},params:[{name:"size",type:"number",default:1e3}]},pe(Y3,Z,{transform(e,n){const t=n.fork(n.NO_SOURCE),i=e.modified("size"),r=e.size,o=this.value.reduce((u,d)=>(u[Be(d)]=1,u),{});let s=this.value,a=this.count,l=0;function c(u){let d,f;s.length<r?s.push(u):(f=~~((a+1)*Ts()),f<s.length&&f>=l&&(d=s[f],o[Be(d)]&&t.rem.push(d),s[f]=u)),++a}if(n.rem.length&&(n.visit(n.REM,u=>{const d=Be(u);o[d]&&(o[d]=-1,t.rem.push(u)),--a}),s=s.filter(u=>-1!==o[Be(u)])),(n.rem.length||i)&&s.length<r&&n.source&&(l=a=s.length,n.visit(n.SOURCE,u=>{o[Be(u)]||c(u)}),l=-1),i&&s.length>r){const u=s.length-r;for(let d=0;d<u;++d)o[Be(s[d])]=-1,t.rem.push(s[d]);s=s.slice(u)}return n.mod.length&&n.visit(n.MOD,u=>{o[Be(u)]&&t.mod.push(u)}),n.add.length&&n.visit(n.ADD,c),(n.add.length||l<0)&&(t.add=s.filter(u=>!o[Be(u)])),this.count=a,this.value=t.source=s,t}}),X3.Definition={type:"Sequence",metadata:{generates:!0,changes:!0},params:[{name:"start",type:"number",required:!0},{name:"stop",type:"number",required:!0},{name:"step",type:"number",default:1},{name:"as",type:"string",default:"data"}]},pe(X3,Z,{transform(e,n){if(this.value&&!e.modified())return;const t=n.materialize().fork(n.MOD),i=e.as||"data";return t.rem=this.value?n.rem.concat(this.value):n.rem,this.value=Ho(e.start,e.stop,e.step||1).map(r=>{const o={};return o[i]=r,qt(o)}),t.add=n.add.concat(this.value),t}}),pe(AY,Z,{transform(e,n){return this.value=n.source,n.changed()?n.fork(n.NO_SOURCE|n.NO_FIELDS):n.StopPropagation}});const kY=["unit0","unit1"];function OY(e){Z.call(this,xg(),e)}function RY(e){Z.call(this,null,e)}Q3.Definition={type:"TimeUnit",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"interval",type:"boolean",default:!0},{name:"units",type:"enum",values:SO,array:!0},{name:"step",type:"number",default:1},{name:"maxbins",type:"number",default:40},{name:"extent",type:"date",array:!0},{name:"timezone",type:"enum",default:"local",values:["local","utc"]},{name:"as",type:"string",array:!0,length:2,default:kY}]},pe(Q3,Z,{transform(e,n){const t=e.field,i=!1!==e.interval,r="utc"===e.timezone,o=this._floor(e,n),s=(r?Fg:Rg)(o.unit).offset,a=e.as||kY,l=a[0],c=a[1],u=o.step;let d=o.start||1/0,f=o.stop||-1/0,h=n.ADD;return(e.modified()||n.changed(n.REM)||n.modified(tr(t)))&&(h=(n=n.reflow(!0)).SOURCE,d=1/0,f=-1/0),n.visit(h,p=>{const g=t(p);let m,_;null==g?(p[l]=null,i&&(p[c]=null)):(p[l]=m=_=o(g),i&&(p[c]=_=s(m,u)),m<d&&(d=m),_>f&&(f=_))}),o.start=d,o.stop=f,n.modifies(i?a:l)},_floor(e,n){const t="utc"===e.timezone,{units:i,step:r}=e.units?{units:e.units,step:e.step||1}:GG({extent:e.extent||al(n.materialize(n.SOURCE).source,e.field),maxbins:e.maxbins}),o=DO(i),s=this.value||{},a=(t?PG:NG)(o,r);return a.unit=Tt(o),a.units=o,a.step=r,a.start=s.start,a.stop=s.stop,this.value=a}}),pe(OY,Z,{transform(e,n){const t=n.dataflow,i=e.field,r=this.value,o=a=>r.set(i(a),a);let s=!0;return e.modified("field")||n.modified(i.fields)?(r.clear(),n.visit(n.SOURCE,o)):n.changed()?(n.visit(n.REM,a=>r.delete(i(a))),n.visit(n.ADD,o)):s=!1,this.modified(s),r.empty>t.cleanThreshold&&t.runAfter(r.clean),n.fork()}}),pe(RY,Z,{transform(e,n){(!this.value||e.modified("field")||e.modified("sort")||n.changed()||e.sort&&n.modified(e.sort.fields))&&(this.value=(e.sort?n.source.slice().sort(Rf(e.sort)):n.source).map(e.field))}});const xy={row_number:function(){return{next:e=>e.index+1}},rank:function(){let e;return{init:()=>e=1,next:n=>{const t=n.index,i=n.data;return t&&n.compare(i[t-1],i[t])?e=t+1:e}}},dense_rank:function(){let e;return{init:()=>e=1,next:n=>{const t=n.index,i=n.data;return t&&n.compare(i[t-1],i[t])?++e:e}}},percent_rank:function(){const e=xy.rank(),n=e.next;return{init:e.init,next:t=>(n(t)-1)/(t.data.length-1)}},cume_dist:function(){let e;return{init:()=>e=0,next:n=>{const t=n.data,i=n.compare;let r=n.index;if(e<r){for(;r+1<t.length&&!i(t[r],t[r+1]);)++r;e=r}return(1+e)/t.length}}},ntile:function(e,n){(n=+n)>0||re("ntile num must be greater than zero.");const t=xy.cume_dist(),i=t.next;return{init:t.init,next:r=>Math.ceil(n*i(r))}},lag:function(e,n){return n=+n||1,{next:t=>{const i=t.index-n;return i>=0?e(t.data[i]):null}}},lead:function(e,n){return n=+n||1,{next:t=>{const i=t.index+n,r=t.data;return i<r.length?e(r[i]):null}}},first_value:function(e){return{next:n=>e(n.data[n.i0])}},last_value:function(e){return{next:n=>e(n.data[n.i1-1])}},nth_value:function(e,n){return(n=+n)>0||re("nth_value nth must be greater than zero."),{next:t=>{const i=t.i0+(n-1);return i<t.i1?e(t.data[i]):null}}},prev_value:function(e){let n;return{init:()=>n=null,next:t=>{const i=e(t.data[t.index]);return null!=i?n=i:n}}},next_value:function(e){let n,t;return{init:()=>(n=null,t=-1),next:i=>{const r=i.data;return i.index<=t?n:(t=function GOe(e,n,t){for(let i=n.length;t<i;++t)if(null!=e(n[t]))return t;return-1}(e,r,i.index))<0?(t=r.length,n=null):n=e(r[t])}}}},KOe=Object.keys(xy);function FY(e){const n=Ce(e.ops),t=Ce(e.fields),i=Ce(e.params),r=Ce(e.aggregate_params),o=Ce(e.as),s=this.outputs=[],a=this.windows=[],l={},c={},u=[],d=[];let f=!0;function h(p){Ce(tr(p)).forEach(g=>l[g]=1)}h(e.sort),n.forEach((p,g)=>{const m=t[g],_=i[g],y=r[g]||null,v=Ln(m),b=aY(p,v,o[g]);if(h(m),s.push(b),$e(xy,p))a.push(function WOe(e,n,t,i){const r=xy[e](n,t);return{init:r.init||Tu,update:function(o,s){s[i]=r.next(o)}}}(p,m,_,b));else{if(null==m&&"count"!==p&&re("Null aggregate field specified."),"count"===p)return void u.push(b);f=!1;let w=c[v];w||(w=c[v]=[],w.field=m,d.push(w)),w.push(lY(p,y,b))}}),(u.length||d.length)&&(this.cell=function YOe(e,n,t){e=e.map(l=>uY(l,l.field));const i={num:0,agg:null,store:!1,count:n};if(!t)for(var r=e.length,o=i.agg=Array(r),s=0;s<r;++s)o[s]=new e[s](i);if(i.store)var a=i.data=new D3;return i.add=function(l){if(i.num+=1,!t){a&&a.add(l);for(let c=0;c<r;++c)o[c].add(o[c].get(l),l)}},i.rem=function(l){if(i.num-=1,!t){a&&a.rem(l);for(let c=0;c<r;++c)o[c].rem(o[c].get(l),l)}},i.set=function(l){let c,u;for(a&&a.values(),c=0,u=n.length;c<u;++c)l[n[c]]=i.num;if(!t)for(c=0,u=o.length;c<u;++c)o[c].set(l)},i.init=function(){i.num=0,a&&a.reset();for(let l=0;l<r;++l)o[l].init()},i}(d,u,f)),this.inputs=Object.keys(l)}const NY=FY.prototype;function Z3(e){Z.call(this,{},e),this._mlen=0,this._mods=[]}function XOe(e,n,t,i){const r=i.sort,o=r&&!i.ignorePeers,s=i.frame||[null,0],a=e.data(t),l=a.length,c=o?kg(r):null,u={i0:0,i1:0,p0:0,p1:0,index:0,data:a,compare:r||rr(-1)};n.init();for(let d=0;d<l;++d)QOe(u,s,d,l),o&&ZOe(u,c),n.update(u,a[d])}function QOe(e,n,t,i){e.p0=e.i0,e.p1=e.i1,e.i0=null==n[0]?0:Math.max(0,t-Math.abs(n[0])),e.i1=null==n[1]?i:Math.min(i,t+Math.abs(n[1])+1),e.index=t}function ZOe(e,n){const t=e.i0,i=e.i1-1,r=e.compare,o=e.data,s=o.length-1;t>0&&!r(o[t],o[t-1])&&(e.i0=n.left(o,o[t])),i<s&&!r(o[i],o[i+1])&&(e.i1=n.right(o,o[i]))}function yx(e,n,t){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+n)/6,(e._y0+4*e._y1+t)/6)}function vx(e){this._context=e}function Lu(){}function PY(e){this._context=e}function LY(e){this._context=e}function $Y(e,n){this._basis=new vx(e),this._beta=n}NY.init=function(){this.windows.forEach(e=>e.init()),this.cell&&this.cell.init()},NY.update=function(e,n){const t=this.cell,i=this.windows,r=e.data,o=i&&i.length;let s;if(t){for(s=e.p0;s<e.i0;++s)t.rem(r[s]);for(s=e.p1;s<e.i1;++s)t.add(r[s]);t.set(n)}for(s=0;s<o;++s)i[s].update(e,n)},Z3.Definition={type:"Window",metadata:{modifies:!0},params:[{name:"sort",type:"compare"},{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:KOe.concat(Cy)},{name:"params",type:"number",null:!0,array:!0},{name:"aggregate_params",type:"field",null:!0,array:!0,default:[null]},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"frame",type:"number",null:!0,array:!0,length:2,default:[null,0]},{name:"ignorePeers",type:"boolean",default:!1}]},pe(Z3,Z,{transform(e,n){this.stamp=n.stamp;const t=e.modified(),i=Rf(e.sort),r=S3(e.groupby),o=a=>this.group(r(a));let s=this.state;(!s||t)&&(s=this.state=new FY(e)),t||n.modified(s.inputs)?(this.value={},n.visit(n.SOURCE,a=>o(a).add(a))):(n.visit(n.REM,a=>o(a).remove(a)),n.visit(n.ADD,a=>o(a).add(a)));for(let a=0,l=this._mlen;a<l;++a)XOe(this._mods[a],s,i,e);return this._mlen=0,this._mods=[],n.reflow(t).modifies(s.outputs)},group(e){let n=this.value[e];return n||(n=this.value[e]=dY(Be),n.stamp=-1),n.stamp<this.stamp&&(n.stamp=this.stamp,this._mods[this._mlen++]=n),n}}),vx.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:yx(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,n){switch(e=+e,n=+n,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,n):this._context.moveTo(e,n);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:yx(this,e,n)}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=n}},PY.prototype={areaStart:Lu,areaEnd:Lu,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x2,this._y2),this._context.closePath();break;case 2:this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break;case 3:this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4)}},point:function(e,n){switch(e=+e,n=+n,this._point){case 0:this._point=1,this._x2=e,this._y2=n;break;case 1:this._point=2,this._x3=e,this._y3=n;break;case 2:this._point=3,this._x4=e,this._y4=n,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+n)/6);break;default:yx(this,e,n)}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=n}},LY.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,n){switch(e=+e,n=+n,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var t=(this._x0+4*this._x1+e)/6,i=(this._y0+4*this._y1+n)/6;this._line?this._context.lineTo(t,i):this._context.moveTo(t,i);break;case 3:this._point=4;default:yx(this,e,n)}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=n}},$Y.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var e=this._x,n=this._y,t=e.length-1;if(t>0)for(var l,i=e[0],r=n[0],o=e[t]-i,s=n[t]-r,a=-1;++a<=t;)this._basis.point(this._beta*e[a]+(1-this._beta)*(i+(l=a/t)*o),this._beta*n[a]+(1-this._beta)*(r+l*s));this._x=this._y=null,this._basis.lineEnd()},point:function(e,n){this._x.push(+e),this._y.push(+n)}};const n3e=function e(n){function t(i){return 1===n?new vx(i):new $Y(i,n)}return t.beta=function(i){return e(+i)},t}(.85);function bx(e,n,t){e._context.bezierCurveTo(e._x1+e._k*(e._x2-e._x0),e._y1+e._k*(e._y2-e._y0),e._x2+e._k*(e._x1-n),e._y2+e._k*(e._y1-t),e._x2,e._y2)}function J3(e,n){this._context=e,this._k=(1-n)/6}J3.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:bx(this,this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,n){switch(e=+e,n=+n,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,n):this._context.moveTo(e,n);break;case 1:this._point=2,this._x1=e,this._y1=n;break;case 2:this._point=3;default:bx(this,e,n)}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=n}};const i3e=function e(n){function t(i){return new J3(i,n)}return t.tension=function(i){return e(+i)},t}(0);function eR(e,n){this._context=e,this._k=(1-n)/6}eR.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,n){switch(e=+e,n=+n,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:bx(this,e,n)}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=n}};const r3e=function e(n){function t(i){return new eR(i,n)}return t.tension=function(i){return e(+i)},t}(0);function tR(e,n){this._context=e,this._k=(1-n)/6}tR.prototype={areaStart:Lu,areaEnd:Lu,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(e,n){switch(e=+e,n=+n,this._point){case 0:this._point=1,this._x3=e,this._y3=n;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=n);break;case 2:this._point=3,this._x5=e,this._y5=n;break;default:bx(this,e,n)}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=n}};const o3e=function e(n){function t(i){return new tR(i,n)}return t.tension=function(i){return e(+i)},t}(0),BY=Math.abs,ar=Math.atan2,xc=Math.cos,s3e=Math.max,Vg=Math.min,so=Math.sin,vn=Math.sqrt,lr=1e-12,$u=Math.PI,wx=$u/2,Ey=2*$u;function VY(e){return e>=1?wx:e<=-1?-wx:Math.asin(e)}function nR(e,n,t){var i=e._x1,r=e._y1,o=e._x2,s=e._y2;if(e._l01_a>lr){var a=2*e._l01_2a+3*e._l01_a*e._l12_a+e._l12_2a,l=3*e._l01_a*(e._l01_a+e._l12_a);i=(i*a-e._x0*e._l12_2a+e._x2*e._l01_2a)/l,r=(r*a-e._y0*e._l12_2a+e._y2*e._l01_2a)/l}if(e._l23_a>lr){var c=2*e._l23_2a+3*e._l23_a*e._l12_a+e._l12_2a,u=3*e._l23_a*(e._l23_a+e._l12_a);o=(o*c+e._x1*e._l23_2a-n*e._l12_2a)/u,s=(s*c+e._y1*e._l23_2a-t*e._l12_2a)/u}e._context.bezierCurveTo(i,r,o,s,e._x2,e._y2)}function zY(e,n){this._context=e,this._alpha=n}zY.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,n){if(e=+e,n=+n,this._point){var t=this._x2-e,i=this._y2-n;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(t*t+i*i,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,n):this._context.moveTo(e,n);break;case 1:this._point=2;break;case 2:this._point=3;default:nR(this,e,n)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=n}};const l3e=function e(n){function t(i){return n?new zY(i,n):new J3(i,0)}return t.alpha=function(i){return e(+i)},t}(.5);function UY(e,n){this._context=e,this._alpha=n}UY.prototype={areaStart:Lu,areaEnd:Lu,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(e,n){if(e=+e,n=+n,this._point){var t=this._x2-e,i=this._y2-n;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(t*t+i*i,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=e,this._y3=n;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=n);break;case 2:this._point=3,this._x5=e,this._y5=n;break;default:nR(this,e,n)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=n}};const c3e=function e(n){function t(i){return n?new UY(i,n):new tR(i,0)}return t.alpha=function(i){return e(+i)},t}(.5);function HY(e,n){this._context=e,this._alpha=n}HY.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,n){if(e=+e,n=+n,this._point){var t=this._x2-e,i=this._y2-n;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(t*t+i*i,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:nR(this,e,n)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=n}};const u3e=function e(n){function t(i){return n?new HY(i,n):new eR(i,0)}return t.alpha=function(i){return e(+i)},t}(.5);function jY(e){this._context=e}function iR(e){return new jY(e)}function qY(e){this._context=e}function WY(e){return e<0?-1:1}function GY(e,n,t){var i=e._x1-e._x0,r=n-e._x1,o=(e._y1-e._y0)/(i||r<0&&-0),s=(t-e._y1)/(r||i<0&&-0),a=(o*r+s*i)/(i+r);return(WY(o)+WY(s))*Math.min(Math.abs(o),Math.abs(s),.5*Math.abs(a))||0}function KY(e,n){var t=e._x1-e._x0;return t?(3*(e._y1-e._y0)/t-n)/2:n}function rR(e,n,t){var i=e._x0,o=e._x1,s=e._y1,a=(o-i)/3;e._context.bezierCurveTo(i+a,e._y0+a*n,o-a,s-a*t,o,s)}function Cx(e){this._context=e}function YY(e){this._context=new XY(e)}function XY(e){this._context=e}function QY(e){this._context=e}function ZY(e){var n,i,t=e.length-1,r=new Array(t),o=new Array(t),s=new Array(t);for(r[0]=0,o[0]=2,s[0]=e[0]+2*e[1],n=1;n<t-1;++n)r[n]=1,o[n]=4,s[n]=4*e[n]+2*e[n+1];for(r[t-1]=2,o[t-1]=7,s[t-1]=8*e[t-1]+e[t],n=1;n<t;++n)o[n]-=i=r[n]/o[n-1],s[n]-=i*s[n-1];for(r[t-1]=s[t-1]/o[t-1],n=t-2;n>=0;--n)r[n]=(s[n]-r[n+1])/o[n];for(o[t-1]=(e[t]+r[t-1])/2,n=0;n<t-1;++n)o[n]=2*e[n+1]-r[n+1];return[r,o]}function xx(e,n){this._context=e,this._t=n}function Kt(e){return function(){return e}}jY.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,n){switch(e=+e,n=+n,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,n):this._context.moveTo(e,n);break;case 1:this._point=2;default:this._context.lineTo(e,n)}}},qY.prototype={areaStart:Lu,areaEnd:Lu,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,n){e=+e,n=+n,this._point?this._context.lineTo(e,n):(this._point=1,this._context.moveTo(e,n))}},Cx.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:rR(this,this._t0,KY(this,this._t0))}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,n){var t=NaN;if(n=+n,(e=+e)!==this._x1||n!==this._y1){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,n):this._context.moveTo(e,n);break;case 1:this._point=2;break;case 2:this._point=3,rR(this,KY(this,t=GY(this,e,n)),t);break;default:rR(this,this._t0,t=GY(this,e,n))}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=n,this._t0=t}}},(YY.prototype=Object.create(Cx.prototype)).point=function(e,n){Cx.prototype.point.call(this,n,e)},XY.prototype={moveTo:function(e,n){this._context.moveTo(n,e)},closePath:function(){this._context.closePath()},lineTo:function(e,n){this._context.lineTo(n,e)},bezierCurveTo:function(e,n,t,i,r,o){this._context.bezierCurveTo(n,e,i,t,o,r)}},QY.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,n=this._y,t=e.length;if(t)if(this._line?this._context.lineTo(e[0],n[0]):this._context.moveTo(e[0],n[0]),2===t)this._context.lineTo(e[1],n[1]);else for(var i=ZY(e),r=ZY(n),o=0,s=1;s<t;++o,++s)this._context.bezierCurveTo(i[0][o],r[0][o],i[1][o],r[1][o],e[s],n[s]);(this._line||0!==this._line&&1===t)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,n){this._x.push(+e),this._y.push(+n)}},xx.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&2===this._point&&this._context.lineTo(this._x,this._y),(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,n){switch(e=+e,n=+n,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,n):this._context.moveTo(e,n);break;case 1:this._point=2;default:if(this._t<=0)this._context.lineTo(this._x,n),this._context.lineTo(e,n);else{var t=this._x*(1-this._t)+e*this._t;this._context.lineTo(t,this._y),this._context.lineTo(t,n)}}this._x=e,this._y=n}};const oR=Math.PI,sR=2*oR,Nf=1e-6,y3e=sR-Nf;function JY(e){this._+=e[0];for(let n=1,t=e.length;n<t;++n)this._+=arguments[n]+e[n]}class Ex{constructor(n){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=null==n?JY:function v3e(e){let n=Math.floor(e);if(!(n>=0))throw new Error(`invalid digits: ${e}`);if(n>15)return JY;const t=10**n;return function(i){this._+=i[0];for(let r=1,o=i.length;r<o;++r)this._+=Math.round(arguments[r]*t)/t+i[r]}}(n)}moveTo(n,t){this._append`M${this._x0=this._x1=+n},${this._y0=this._y1=+t}`}closePath(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(n,t){this._append`L${this._x1=+n},${this._y1=+t}`}quadraticCurveTo(n,t,i,r){this._append`Q${+n},${+t},${this._x1=+i},${this._y1=+r}`}bezierCurveTo(n,t,i,r,o,s){this._append`C${+n},${+t},${+i},${+r},${this._x1=+o},${this._y1=+s}`}arcTo(n,t,i,r,o){if(n=+n,t=+t,i=+i,r=+r,(o=+o)<0)throw new Error(`negative radius: ${o}`);let s=this._x1,a=this._y1,l=i-n,c=r-t,u=s-n,d=a-t,f=u*u+d*d;if(null===this._x1)this._append`M${this._x1=n},${this._y1=t}`;else if(f>Nf)if(Math.abs(d*l-c*u)>Nf&&o){let h=i-s,p=r-a,g=l*l+c*c,m=h*h+p*p,_=Math.sqrt(g),y=Math.sqrt(f),v=o*Math.tan((oR-Math.acos((g+f-m)/(2*_*y)))/2),b=v/y,w=v/_;Math.abs(b-1)>Nf&&this._append`L${n+b*u},${t+b*d}`,this._append`A${o},${o},0,0,${+(d*h>u*p)},${this._x1=n+w*l},${this._y1=t+w*c}`}else this._append`L${this._x1=n},${this._y1=t}`}arc(n,t,i,r,o,s){if(n=+n,t=+t,s=!!s,(i=+i)<0)throw new Error(`negative radius: ${i}`);let a=i*Math.cos(r),l=i*Math.sin(r),c=n+a,u=t+l,d=1^s,f=s?r-o:o-r;null===this._x1?this._append`M${c},${u}`:(Math.abs(this._x1-c)>Nf||Math.abs(this._y1-u)>Nf)&&this._append`L${c},${u}`,i&&(f<0&&(f=f%sR+sR),f>y3e?this._append`A${i},${i},0,1,${d},${n-a},${t-l}A${i},${i},0,1,${d},${this._x1=c},${this._y1=u}`:f>Nf&&this._append`A${i},${i},0,${+(f>=oR)},${d},${this._x1=n+i*Math.cos(o)},${this._y1=t+i*Math.sin(o)}`)}rect(n,t,i,r){this._append`M${this._x0=this._x1=+n},${this._y0=this._y1=+t}h${i=+i}v${+r}h${-i}Z`}toString(){return this._}}function Sx(){return new Ex}function Tx(e){let n=3;return e.digits=function(t){if(!arguments.length)return n;if(null==t)n=null;else{const i=Math.floor(t);if(!(i>=0))throw new RangeError(`invalid digits: ${t}`);n=i}return e},()=>new Ex(n)}function b3e(e){return e.innerRadius}function w3e(e){return e.outerRadius}function C3e(e){return e.startAngle}function x3e(e){return e.endAngle}function E3e(e){return e&&e.padAngle}function Dx(e,n,t,i,r,o,s){var a=e-t,l=n-i,c=(s?o:-o)/vn(a*a+l*l),u=c*l,d=-c*a,f=e+u,h=n+d,p=t+u,g=i+d,m=(f+p)/2,_=(h+g)/2,y=p-f,v=g-h,b=y*y+v*v,w=r-o,x=f*g-p*h,C=(v<0?-1:1)*vn(s3e(0,w*w*b-x*x)),S=(x*v-y*C)/b,A=(-x*y-v*C)/b,M=(x*v+y*C)/b,N=(-x*y+v*C)/b,V=S-m,P=A-_,E=M-m,D=N-_;return V*V+P*P>E*E+D*D&&(S=M,A=N),{cx:S,cy:A,x01:-u,y01:-d,x11:S*(r/w-1),y11:A*(r/w-1)}}function eX(e){return"object"==typeof e&&"length"in e?e:Array.from(e)}function tX(e){return e[0]}function nX(e){return e[1]}function iX(e,n){var t=Kt(!0),i=null,r=iR,o=null,s=Tx(a);function a(l){var c,d,h,u=(l=eX(l)).length,f=!1;for(null==i&&(o=r(h=s())),c=0;c<=u;++c)!(c<u&&t(d=l[c],c,l))===f&&((f=!f)?o.lineStart():o.lineEnd()),f&&o.point(+e(d,c,l),+n(d,c,l));if(h)return o=null,h+""||null}return e="function"==typeof e?e:void 0===e?tX:Kt(e),n="function"==typeof n?n:void 0===n?nX:Kt(n),a.x=function(l){return arguments.length?(e="function"==typeof l?l:Kt(+l),a):e},a.y=function(l){return arguments.length?(n="function"==typeof l?l:Kt(+l),a):n},a.defined=function(l){return arguments.length?(t="function"==typeof l?l:Kt(!!l),a):t},a.curve=function(l){return arguments.length?(r=l,null!=i&&(o=r(i)),a):r},a.context=function(l){return arguments.length?(null==l?i=o=null:o=r(i=l),a):i},a}function rX(e,n,t){var i=null,r=Kt(!0),o=null,s=iR,a=null,l=Tx(c);function c(d){var f,h,p,m,y,g=(d=eX(d)).length,_=!1,v=new Array(g),b=new Array(g);for(null==o&&(a=s(y=l())),f=0;f<=g;++f){if(!(f<g&&r(m=d[f],f,d))===_)if(_=!_)h=f,a.areaStart(),a.lineStart();else{for(a.lineEnd(),a.lineStart(),p=f-1;p>=h;--p)a.point(v[p],b[p]);a.lineEnd(),a.areaEnd()}_&&(v[f]=+e(m,f,d),b[f]=+n(m,f,d),a.point(i?+i(m,f,d):v[f],t?+t(m,f,d):b[f]))}if(y)return a=null,y+""||null}function u(){return iX().defined(r).curve(s).context(o)}return e="function"==typeof e?e:void 0===e?tX:Kt(+e),n="function"==typeof n?n:Kt(void 0===n?0:+n),t="function"==typeof t?t:void 0===t?nX:Kt(+t),c.x=function(d){return arguments.length?(e="function"==typeof d?d:Kt(+d),i=null,c):e},c.x0=function(d){return arguments.length?(e="function"==typeof d?d:Kt(+d),c):e},c.x1=function(d){return arguments.length?(i=null==d?null:"function"==typeof d?d:Kt(+d),c):i},c.y=function(d){return arguments.length?(n="function"==typeof d?d:Kt(+d),t=null,c):n},c.y0=function(d){return arguments.length?(n="function"==typeof d?d:Kt(+d),c):n},c.y1=function(d){return arguments.length?(t=null==d?null:"function"==typeof d?d:Kt(+d),c):t},c.lineX0=c.lineY0=function(){return u().x(e).y(n)},c.lineY1=function(){return u().x(e).y(t)},c.lineX1=function(){return u().x(i).y(n)},c.defined=function(d){return arguments.length?(r="function"==typeof d?d:Kt(!!d),c):r},c.curve=function(d){return arguments.length?(s=d,null!=o&&(a=s(o)),c):s},c.context=function(d){return arguments.length?(null==d?o=a=null:a=s(o=d),c):o},c}Sx.prototype=Ex.prototype,vn(3);const aR={draw(e,n){const t=vn(n/$u);e.moveTo(t,0),e.arc(0,0,t,0,Ey)}};vn(1/3),so($u/10),so(7*$u/10);function Bu(e,n){if(typeof document<"u"&&document.createElement){const t=document.createElement("canvas");if(t&&t.getContext)return t.width=e,t.height=n,t}return null}so(Ey/10),xc(Ey/10),vn(3),vn(3),vn(3),vn(12);const aX=kg(wc),Ix=aX.right,K3e=aX.left,Sy=(kg(HK),Ix);function zg(e,n,t){e.prototype=n.prototype=t,t.constructor=e}function Ty(e,n){var t=Object.create(e.prototype);for(var i in n)t[i]=n[i];return t}function Vu(){}var Ug=1/.7,Hg="\\s*([+-]?\\d+)\\s*",Dy="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",fl="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Y3e=/^#([0-9a-f]{3,8})$/,X3e=new RegExp(`^rgb\\(${Hg},${Hg},${Hg}\\)$`),Q3e=new RegExp(`^rgb\\(${fl},${fl},${fl}\\)$`),Z3e=new RegExp(`^rgba\\(${Hg},${Hg},${Hg},${Dy}\\)$`),J3e=new RegExp(`^rgba\\(${fl},${fl},${fl},${Dy}\\)$`),eRe=new RegExp(`^hsl\\(${Dy},${fl},${fl}\\)$`),tRe=new RegExp(`^hsla\\(${Dy},${fl},${fl},${Dy}\\)$`),lX={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function cX(){return this.rgb().formatHex()}function uX(){return this.rgb().formatRgb()}function Iy(e){var n,t;return e=(e+"").trim().toLowerCase(),(n=Y3e.exec(e))?(t=n[1].length,n=parseInt(n[1],16),6===t?dX(n):3===t?new _i(n>>8&15|n>>4&240,n>>4&15|240&n,(15&n)<<4|15&n,1):8===t?Mx(n>>24&255,n>>16&255,n>>8&255,(255&n)/255):4===t?Mx(n>>12&15|n>>8&240,n>>8&15|n>>4&240,n>>4&15|240&n,((15&n)<<4|15&n)/255):null):(n=X3e.exec(e))?new _i(n[1],n[2],n[3],1):(n=Q3e.exec(e))?new _i(255*n[1]/100,255*n[2]/100,255*n[3]/100,1):(n=Z3e.exec(e))?Mx(n[1],n[2],n[3],n[4]):(n=J3e.exec(e))?Mx(255*n[1]/100,255*n[2]/100,255*n[3]/100,n[4]):(n=eRe.exec(e))?pX(n[1],n[2]/100,n[3]/100,1):(n=tRe.exec(e))?pX(n[1],n[2]/100,n[3]/100,n[4]):lX.hasOwnProperty(e)?dX(lX[e]):"transparent"===e?new _i(NaN,NaN,NaN,0):null}function dX(e){return new _i(e>>16&255,e>>8&255,255&e,1)}function Mx(e,n,t,i){return i<=0&&(e=n=t=NaN),new _i(e,n,t,i)}function uR(e){return e instanceof Vu||(e=Iy(e)),e?new _i((e=e.rgb()).r,e.g,e.b,e.opacity):new _i}function zu(e,n,t,i){return 1===arguments.length?uR(e):new _i(e,n,t,i??1)}function _i(e,n,t,i){this.r=+e,this.g=+n,this.b=+t,this.opacity=+i}function fX(){return`#${$f(this.r)}${$f(this.g)}${$f(this.b)}`}function hX(){const e=Ax(this.opacity);return`${1===e?"rgb(":"rgba("}${Lf(this.r)}, ${Lf(this.g)}, ${Lf(this.b)}${1===e?")":`, ${e})`}`}function Ax(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Lf(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function $f(e){return((e=Lf(e))<16?"0":"")+e.toString(16)}function pX(e,n,t,i){return i<=0?e=n=t=NaN:t<=0||t>=1?e=n=NaN:n<=0&&(e=NaN),new aa(e,n,t,i)}function gX(e){if(e instanceof aa)return new aa(e.h,e.s,e.l,e.opacity);if(e instanceof Vu||(e=Iy(e)),!e)return new aa;if(e instanceof aa)return e;var n=(e=e.rgb()).r/255,t=e.g/255,i=e.b/255,r=Math.min(n,t,i),o=Math.max(n,t,i),s=NaN,a=o-r,l=(o+r)/2;return a?(s=n===o?(t-i)/a+6*(t<i):t===o?(i-n)/a+2:(n-t)/a+4,a/=l<.5?o+r:2-o-r,s*=60):a=l>0&&l<1?0:s,new aa(s,a,l,e.opacity)}function kx(e,n,t,i){return 1===arguments.length?gX(e):new aa(e,n,t,i??1)}function aa(e,n,t,i){this.h=+e,this.s=+n,this.l=+t,this.opacity=+i}function mX(e){return(e=(e||0)%360)<0?e+360:e}function Ox(e){return Math.max(0,Math.min(1,e||0))}function dR(e,n,t){return 255*(e<60?n+(t-n)*e/60:e<180?t:e<240?n+(t-n)*(240-e)/60:n)}function _X(e,n,t,i,r){var o=e*e,s=o*e;return((1-3*e+3*o-s)*n+(4-6*o+3*s)*t+(1+3*e+3*o-3*s)*i+s*r)/6}function yX(e){var n=e.length-1;return function(t){var i=t<=0?t=0:t>=1?(t=1,n-1):Math.floor(t*n),r=e[i],o=e[i+1];return _X((t-i/n)*n,i>0?e[i-1]:2*r-o,r,o,i<n-1?e[i+2]:2*o-r)}}function vX(e){var n=e.length;return function(t){var i=Math.floor(((t%=1)<0?++t:t)*n);return _X((t-i/n)*n,e[(i+n-1)%n],e[i%n],e[(i+1)%n],e[(i+2)%n])}}zg(Vu,Iy,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:cX,formatHex:cX,formatHex8:function nRe(){return this.rgb().formatHex8()},formatHsl:function iRe(){return gX(this).formatHsl()},formatRgb:uX,toString:uX}),zg(_i,zu,Ty(Vu,{brighter(e){return e=null==e?Ug:Math.pow(Ug,e),new _i(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=null==e?.7:Math.pow(.7,e),new _i(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new _i(Lf(this.r),Lf(this.g),Lf(this.b),Ax(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:fX,formatHex:fX,formatHex8:function rRe(){return`#${$f(this.r)}${$f(this.g)}${$f(this.b)}${$f(255*(isNaN(this.opacity)?1:this.opacity))}`},formatRgb:hX,toString:hX})),zg(aa,kx,Ty(Vu,{brighter(e){return e=null==e?Ug:Math.pow(Ug,e),new aa(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=null==e?.7:Math.pow(.7,e),new aa(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+360*(this.h<0),n=isNaN(e)||isNaN(this.s)?0:this.s,t=this.l,i=t+(t<.5?t:1-t)*n,r=2*t-i;return new _i(dR(e>=240?e-240:e+120,r,i),dR(e,r,i),dR(e<120?e+240:e-120,r,i),this.opacity)},clamp(){return new aa(mX(this.h),Ox(this.s),Ox(this.l),Ax(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Ax(this.opacity);return`${1===e?"hsl(":"hsla("}${mX(this.h)}, ${100*Ox(this.s)}%, ${100*Ox(this.l)}%${1===e?")":`, ${e})`}`}}));const Rx=e=>()=>e;function bX(e,n){return function(t){return e+t*n}}function Fx(e,n){var t=n-e;return t?bX(e,t>180||t<-180?t-360*Math.round(t/360):t):Rx(isNaN(e)?n:e)}function yi(e,n){var t=n-e;return t?bX(e,t):Rx(isNaN(e)?n:e)}const fR=function e(n){var t=function sRe(e){return 1==(e=+e)?yi:function(n,t){return t-n?function oRe(e,n,t){return e=Math.pow(e,t),n=Math.pow(n,t)-e,t=1/t,function(i){return Math.pow(e+i*n,t)}}(n,t,e):Rx(isNaN(n)?t:n)}}(n);function i(r,o){var s=t((r=zu(r)).r,(o=zu(o)).r),a=t(r.g,o.g),l=t(r.b,o.b),c=yi(r.opacity,o.opacity);return function(u){return r.r=s(u),r.g=a(u),r.b=l(u),r.opacity=c(u),r+""}}return i.gamma=e,i}(1);function wX(e){return function(n){var s,a,t=n.length,i=new Array(t),r=new Array(t),o=new Array(t);for(s=0;s<t;++s)a=zu(n[s]),i[s]=a.r||0,r[s]=a.g||0,o[s]=a.b||0;return i=e(i),r=e(r),o=e(o),a.opacity=1,function(l){return a.r=i(l),a.g=r(l),a.b=o(l),a+""}}}var aRe=wX(yX),lRe=wX(vX);function hR(e,n){n||(n=[]);var r,t=e?Math.min(n.length,e.length):0,i=n.slice();return function(o){for(r=0;r<t;++r)i[r]=e[r]*(1-o)+n[r]*o;return i}}function CX(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function cRe(e,n){return(CX(n)?hR:xX)(e,n)}function xX(e,n){var s,t=n?n.length:0,i=e?Math.min(t,e.length):0,r=new Array(i),o=new Array(t);for(s=0;s<i;++s)r[s]=Uu(e[s],n[s]);for(;s<t;++s)o[s]=n[s];return function(a){for(s=0;s<i;++s)o[s]=r[s](a);return o}}function EX(e,n){var t=new Date;return e=+e,n=+n,function(i){return t.setTime(e*(1-i)+n*i),t}}function la(e,n){return e=+e,n=+n,function(t){return e*(1-t)+n*t}}function SX(e,n){var r,t={},i={};for(r in(null===e||"object"!=typeof e)&&(e={}),(null===n||"object"!=typeof n)&&(n={}),n)r in e?t[r]=Uu(e[r],n[r]):i[r]=n[r];return function(o){for(r in t)i[r]=t[r](o);return i}}var pR=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,gR=new RegExp(pR.source,"g");function TX(e,n){var i,r,o,t=pR.lastIndex=gR.lastIndex=0,s=-1,a=[],l=[];for(e+="",n+="";(i=pR.exec(e))&&(r=gR.exec(n));)(o=r.index)>t&&(o=n.slice(t,o),a[s]?a[s]+=o:a[++s]=o),(i=i[0])===(r=r[0])?a[s]?a[s]+=r:a[++s]=r:(a[++s]=null,l.push({i:s,x:la(i,r)})),t=gR.lastIndex;return t<n.length&&(o=n.slice(t),a[s]?a[s]+=o:a[++s]=o),a.length<2?l[0]?function dRe(e){return function(n){return e(n)+""}}(l[0].x):function uRe(e){return function(){return e}}(n):(n=l.length,function(c){for(var d,u=0;u<n;++u)a[(d=l[u]).i]=d.x(c);return a.join("")})}function Uu(e,n){var i,t=typeof n;return null==n||"boolean"===t?Rx(n):("number"===t?la:"string"===t?(i=Iy(n))?(n=i,fR):TX:n instanceof Iy?fR:n instanceof Date?EX:CX(n)?hR:Array.isArray(n)?xX:"function"!=typeof n.valueOf&&"function"!=typeof n.toString||isNaN(n)?SX:la)(e,n)}function My(e,n){return e=+e,n=+n,function(t){return Math.round(e*(1-t)+n*t)}}function mR(e){return+e}var DX=[0,1];function ao(e){return e}function _R(e,n){return(n-=e=+e)?function(t){return(t-e)/n}:function fRe(e){return function(){return e}}(isNaN(n)?NaN:.5)}function pRe(e,n,t){var i=e[0],r=e[1],o=n[0],s=n[1];return r<i?(i=_R(r,i),o=t(s,o)):(i=_R(i,r),o=t(o,s)),function(a){return o(i(a))}}function gRe(e,n,t){var i=Math.min(e.length,n.length)-1,r=new Array(i),o=new Array(i),s=-1;for(e[i]<e[0]&&(e=e.slice().reverse(),n=n.slice().reverse());++s<i;)r[s]=_R(e[s],e[s+1]),o[s]=t(n[s],n[s+1]);return function(a){var l=Sy(e,a,1,i)-1;return o[l](r[l](a))}}function Ay(e,n){return n.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function Nx(){var i,r,o,a,l,c,e=DX,n=DX,t=Uu,s=ao;function u(){var f=Math.min(e.length,n.length);return s!==ao&&(s=function hRe(e,n){var t;return e>n&&(t=e,e=n,n=t),function(i){return Math.max(e,Math.min(n,i))}}(e[0],e[f-1])),a=f>2?gRe:pRe,l=c=null,d}function d(f){return null==f||isNaN(f=+f)?o:(l||(l=a(e.map(i),n,t)))(i(s(f)))}return d.invert=function(f){return s(r((c||(c=a(n,e.map(i),la)))(f)))},d.domain=function(f){return arguments.length?(e=Array.from(f,mR),u()):e.slice()},d.range=function(f){return arguments.length?(n=Array.from(f),u()):n.slice()},d.rangeRound=function(f){return n=Array.from(f),t=My,u()},d.clamp=function(f){return arguments.length?(s=!!f||ao,u()):s!==ao},d.interpolate=function(f){return arguments.length?(t=f,u()):t},d.unknown=function(f){return arguments.length?(o=f,d):o},function(f,h){return i=f,r=h,u()}}function IX(){return Nx()(ao,ao)}function hl(e,n){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(n).domain(e)}return this}function Hu(e,n){switch(arguments.length){case 0:break;case 1:"function"==typeof e?this.interpolator(e):this.range(e);break;default:this.domain(e),"function"==typeof n?this.interpolator(n):this.range(n)}return this}function MX(e,n,t,i){var o,r=ku(e,n,t);switch((i=Mf(i??",f")).type){case"s":var s=Math.max(Math.abs(e),Math.abs(n));return null==i.precision&&!isNaN(o=gG(r,s))&&(i.precision=o),bO(i,s);case"":case"e":case"g":case"p":case"r":null==i.precision&&!isNaN(o=mG(r,Math.max(Math.abs(e),Math.abs(n))))&&(i.precision=o-("e"===i.type));break;case"f":case"%":null==i.precision&&!isNaN(o=_G(r))&&(i.precision=o-2*("%"===i.type))}return HC(i)}function Bf(e){var n=e.domain;return e.ticks=function(t){var i=n();return _O(i[0],i[i.length-1],t??10)},e.tickFormat=function(t,i){var r=n();return MX(r[0],r[r.length-1],t??10,i)},e.nice=function(t){null==t&&(t=10);var l,c,i=n(),r=0,o=i.length-1,s=i[r],a=i[o],u=10;for(a<s&&(c=s,s=a,a=c,c=r,r=o,o=c);u-- >0;){if((c=yO(s,a,t))===l)return i[r]=s,i[o]=a,n(i);if(c>0)s=Math.floor(s/c)*c,a=Math.ceil(a/c)*c;else{if(!(c<0))break;s=Math.ceil(s*c)/c,a=Math.floor(a*c)/c}l=c}return e},e}function OX(e,n){var s,t=0,i=(e=e.slice()).length-1,r=e[t],o=e[i];return o<r&&(s=t,t=i,i=s,s=r,r=o,o=s),e[t]=n.floor(r),e[i]=n.ceil(o),e}function RX(e){return Math.log(e)}function FX(e){return Math.exp(e)}function mRe(e){return-Math.log(-e)}function _Re(e){return-Math.exp(-e)}function yRe(e){return isFinite(e)?+("1e"+e):e<0?0:e}function NX(e){return(n,t)=>-e(-n,t)}function yR(e){const n=e(RX,FX),t=n.domain;let r,o,i=10;function s(){return r=function bRe(e){return e===Math.E?Math.log:10===e&&Math.log10||2===e&&Math.log2||(e=Math.log(e),n=>Math.log(n)/e)}(i),o=function vRe(e){return 10===e?yRe:e===Math.E?Math.exp:n=>Math.pow(e,n)}(i),t()[0]<0?(r=NX(r),o=NX(o),e(mRe,_Re)):e(RX,FX),n}return n.base=function(a){return arguments.length?(i=+a,s()):i},n.domain=function(a){return arguments.length?(t(a),s()):t()},n.ticks=a=>{const l=t();let c=l[0],u=l[l.length-1];const d=u<c;d&&([c,u]=[u,c]);let p,g,f=r(c),h=r(u);const m=null==a?10:+a;let _=[];if(!(i%1)&&h-f<m){if(f=Math.floor(f),h=Math.ceil(h),c>0){for(;f<=h;++f)for(p=1;p<i;++p)if(g=f<0?p/o(-f):p*o(f),!(g<c)){if(g>u)break;_.push(g)}}else for(;f<=h;++f)for(p=i-1;p>=1;--p)if(g=f>0?p/o(-f):p*o(f),!(g<c)){if(g>u)break;_.push(g)}2*_.length<m&&(_=_O(c,u,m))}else _=_O(f,h,Math.min(h-f,m)).map(o);return d?_.reverse():_},n.tickFormat=(a,l)=>{if(null==a&&(a=10),null==l&&(l=10===i?"s":","),"function"!=typeof l&&(!(i%1)&&null==(l=Mf(l)).precision&&(l.trim=!0),l=HC(l)),a===1/0)return l;const c=Math.max(1,i*a/n.ticks().length);return u=>{let d=u/o(Math.round(r(u)));return d*i<i-.5&&(d*=i),d<=c?l(u):""}},n.nice=()=>t(OX(t(),{floor:a=>o(Math.floor(r(a))),ceil:a=>o(Math.ceil(r(a)))})),n}function LX(e){return function(n){return n<0?-Math.pow(-n,e):Math.pow(n,e)}}function wRe(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function CRe(e){return e<0?-e*e:e*e}function vR(e){var n=e(ao,ao),t=1;return n.exponent=function(r){return arguments.length?(t=+r,function i(){return 1===t?e(ao,ao):.5===t?e(wRe,CRe):e(LX(t),LX(1/t))}()):t},Bf(n)}function bR(){var e=vR(Nx());return e.copy=function(){return Ay(e,bR()).exponent(e.exponent())},hl.apply(e,arguments),e}function $X(e){return function(n){return Math.sign(n)*Math.log1p(Math.abs(n/e))}}function BX(e){return function(n){return Math.sign(n)*Math.expm1(Math.abs(n))*e}}function wR(e){var n=1,t=e($X(n),BX(n));return t.constant=function(i){return arguments.length?e($X(n=+i),BX(n)):n},Bf(t)}function zX(e,n,t,i,r,o){const s=[[bc,1,mc],[bc,5,5e3],[bc,15,15e3],[bc,30,3e4],[o,1,Es],[o,5,5*Es],[o,15,15*Es],[o,30,30*Es],[r,1,_c],[r,3,3*_c],[r,6,6*_c],[r,12,12*_c],[i,1,yc],[i,2,2*yc],[t,1,xO],[n,1,SG],[n,3,3*SG],[e,1,EO]];function l(c,u,d){const f=Math.abs(u-c)/d,h=kg(([,,m])=>m).right(s,f);if(h===s.length)return e.every(ku(c/EO,u/EO,d));if(0===h)return Ag.every(Math.max(ku(c,u,d),1));const[p,g]=s[f/s[h-1][2]<s[h][2]/f?h-1:h];return p.every(g)}return[function a(c,u,d){const f=u<c;f&&([c,u]=[u,c]);const h=d&&"function"==typeof d.range?d:l(c,u,d),p=h?h.range(c,+u+1):[];return f?p.reverse():p},l]}const[ERe,SRe]=zX(cl,ny,Ig,TG,GC,YC),[TRe,DRe]=zX(ll,ty,Tg,vc,WC,KC);function IRe(e){return new Date(e)}function MRe(e){return e instanceof Date?+e:+new Date(+e)}function CR(e,n,t,i,r,o,s,a,l,c){var u=IX(),d=u.invert,f=u.domain,h=c(".%L"),p=c(":%S"),g=c("%I:%M"),m=c("%I %p"),_=c("%a %d"),y=c("%b %d"),v=c("%B"),b=c("%Y");function w(x){return(l(x)<x?h:a(x)<x?p:s(x)<x?g:o(x)<x?m:i(x)<x?r(x)<x?_:y:t(x)<x?v:b)(x)}return u.invert=function(x){return new Date(d(x))},u.domain=function(x){return arguments.length?f(Array.from(x,MRe)):f().map(IRe)},u.ticks=function(x){var C=f();return e(C[0],C[C.length-1],x??10)},u.tickFormat=function(x,C){return null==C?w:c(C)},u.nice=function(x){var C=f();return(!x||"function"!=typeof x.range)&&(x=n(C[0],C[C.length-1],x??10)),x?f(OX(C,x)):u},u.copy=function(){return Ay(u,CR(e,n,t,i,r,o,s,a,l,c))},u}function Px(){var t,i,r,o,l,e=0,n=1,s=ao,a=!1;function c(d){return null==d||isNaN(d=+d)?l:s(0===r?.5:(d=(o(d)-t)*r,a?Math.max(0,Math.min(1,d)):d))}function u(d){return function(f){var h,p;return arguments.length?([h,p]=f,s=d(h,p),c):[s(0),s(1)]}}return c.domain=function(d){return arguments.length?([e,n]=d,t=o(e=+e),i=o(n=+n),r=t===i?0:1/(i-t),c):[e,n]},c.clamp=function(d){return arguments.length?(a=!!d,c):a},c.interpolator=function(d){return arguments.length?(s=d,c):s},c.range=u(Uu),c.rangeRound=u(My),c.unknown=function(d){return arguments.length?(l=d,c):l},function(d){return o=d,t=d(e),i=d(n),r=t===i?0:1/(i-t),c}}function ju(e,n){return n.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function xR(){var e=Bf(Px()(ao));return e.copy=function(){return ju(e,xR())},Hu.apply(e,arguments)}function ER(){var e=vR(Px());return e.copy=function(){return ju(e,ER()).exponent(e.exponent())},Hu.apply(e,arguments)}function SR(e,n){void 0===n&&(n=e,e=Uu);for(var t=0,i=n.length-1,r=n[0],o=new Array(i<0?0:i);t<i;)o[t]=e(r,r=n[++t]);return function(s){var a=Math.max(0,Math.min(i-1,Math.floor(s*=i)));return o[a](s-a)}}function Lx(){var r,o,s,a,l,u,f,e=0,n=.5,t=1,i=1,c=ao,d=!1;function h(g){return isNaN(g=+g)?f:(g=.5+((g=+u(g))-o)*(i*g<i*o?a:l),c(d?Math.max(0,Math.min(1,g)):g))}function p(g){return function(m){var _,y,v;return arguments.length?([_,y,v]=m,c=SR(g,[_,y,v]),h):[c(0),c(.5),c(1)]}}return h.domain=function(g){return arguments.length?([e,n,t]=g,r=u(e=+e),o=u(n=+n),s=u(t=+t),a=r===o?0:.5/(o-r),l=o===s?0:.5/(s-o),i=o<r?-1:1,h):[e,n,t]},h.clamp=function(g){return arguments.length?(d=!!g,h):d},h.interpolator=function(g){return arguments.length?(c=g,h):c},h.range=p(Uu),h.rangeRound=p(My),h.unknown=function(g){return arguments.length?(f=g,h):f},function(g){return u=g,r=g(e),o=g(n),s=g(t),a=r===o?0:.5/(o-r),l=o===s?0:.5/(s-o),i=o<r?-1:1,h}}function TR(){var e=vR(Lx());return e.copy=function(){return ju(e,TR()).exponent(e.exponent())},Hu.apply(e,arguments)}class XX extends Map{constructor(n,t=JX){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:t}}),null!=n)for(const[i,r]of n)this.set(i,r)}get(n){return super.get(DR(this,n))}has(n){return super.has(DR(this,n))}set(n,t){return super.set(QX(this,n),t)}delete(n){return super.delete(ZX(this,n))}}class $x extends Set{constructor(n,t=JX){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:t}}),null!=n)for(const i of n)this.add(i)}has(n){return super.has(DR(this,n))}add(n){return super.add(QX(this,n))}delete(n){return super.delete(ZX(this,n))}}function DR({_intern:e,_key:n},t){const i=n(t);return e.has(i)?e.get(i):t}function QX({_intern:e,_key:n},t){const i=n(t);return e.has(i)?e.get(i):(e.set(i,t),t)}function ZX({_intern:e,_key:n},t){const i=n(t);return e.has(i)&&(t=e.get(i),e.delete(i)),t}function JX(e){return null!==e&&"object"==typeof e?e.valueOf():e}const IR=Symbol("implicit");function MR(){var e=new XX,n=[],t=[],i=IR;function r(o){let s=e.get(o);if(void 0===s){if(i!==IR)return i;e.set(o,s=n.push(o)-1)}return t[s%t.length]}return r.domain=function(o){if(!arguments.length)return n.slice();n=[],e=new XX;for(const s of o)e.has(s)||e.set(s,n.push(s)-1);return r},r.range=function(o){return arguments.length?(t=Array.from(o),r):t.slice()},r.unknown=function(o){return arguments.length?(i=o,r):i},r.copy=function(){return MR(n,t).unknown(i)},hl.apply(r,arguments),r}function FRe(e){var n=e.length;return function(t){return e[Math.max(0,Math.min(n-1,Math.floor(t*n)))]}}function NRe(e,n){var t=Fx(+e,+n);return function(i){var r=t(i);return r-360*Math.floor(r/360)}}var Bx,eQ=180/Math.PI,AR={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function tQ(e,n,t,i,r,o){var s,a,l;return(s=Math.sqrt(e*e+n*n))&&(e/=s,n/=s),(l=e*t+n*i)&&(t-=e*l,i-=n*l),(a=Math.sqrt(t*t+i*i))&&(t/=a,i/=a,l/=a),e*i<n*t&&(e=-e,n=-n,l=-l,s=-s),{translateX:r,translateY:o,rotate:Math.atan2(n,e)*eQ,skewX:Math.atan(l)*eQ,scaleX:s,scaleY:a}}function nQ(e,n,t,i){function r(c){return c.length?c.pop()+" ":""}return function(c,u){var d=[],f=[];return c=e(c),u=e(u),function o(c,u,d,f,h,p){if(c!==d||u!==f){var g=h.push("translate(",null,n,null,t);p.push({i:g-4,x:la(c,d)},{i:g-2,x:la(u,f)})}else(d||f)&&h.push("translate("+d+n+f+t)}(c.translateX,c.translateY,u.translateX,u.translateY,d,f),function s(c,u,d,f){c!==u?(c-u>180?u+=360:u-c>180&&(c+=360),f.push({i:d.push(r(d)+"rotate(",null,i)-2,x:la(c,u)})):u&&d.push(r(d)+"rotate("+u+i)}(c.rotate,u.rotate,d,f),function a(c,u,d,f){c!==u?f.push({i:d.push(r(d)+"skewX(",null,i)-2,x:la(c,u)}):u&&d.push(r(d)+"skewX("+u+i)}(c.skewX,u.skewX,d,f),function l(c,u,d,f,h,p){if(c!==d||u!==f){var g=h.push(r(h)+"scale(",null,",",null,")");p.push({i:g-4,x:la(c,d)},{i:g-2,x:la(u,f)})}else(1!==d||1!==f)&&h.push(r(h)+"scale("+d+","+f+")")}(c.scaleX,c.scaleY,u.scaleX,u.scaleY,d,f),c=u=null,function(h){for(var m,p=-1,g=f.length;++p<g;)d[(m=f[p]).i]=m.x(h);return d.join("")}}}var $Re=nQ(function PRe(e){const n=new("function"==typeof DOMMatrix?DOMMatrix:WebKitCSSMatrix)(e+"");return n.isIdentity?AR:tQ(n.a,n.b,n.c,n.d,n.e,n.f)},"px, ","px)","deg)"),BRe=nQ(function LRe(e){return null!=e&&(Bx||(Bx=document.createElementNS("http://www.w3.org/2000/svg","g")),Bx.setAttribute("transform",e),e=Bx.transform.baseVal.consolidate())?tQ((e=e.matrix).a,e.b,e.c,e.d,e.e,e.f):AR},", ",")",")");function iQ(e){return((e=Math.exp(e))+1/e)/2}const HRe=function e(n,t,i){function r(o,s){var m,_,a=o[0],l=o[1],c=o[2],f=s[2],h=s[0]-a,p=s[1]-l,g=h*h+p*p;if(g<1e-12)_=Math.log(f/c)/n,m=function(C){return[a+C*h,l+C*p,c*Math.exp(n*C*_)]};else{var y=Math.sqrt(g),v=(f*f-c*c+i*g)/(2*c*t*y),b=(f*f-c*c-i*g)/(2*f*t*y),w=Math.log(Math.sqrt(v*v+1)-v),x=Math.log(Math.sqrt(b*b+1)-b);_=(x-w)/n,m=function(C){var S=C*_,A=iQ(w),M=c/(t*y)*(A*function URe(e){return((e=Math.exp(2*e))-1)/(e+1)}(n*S+w)-function zRe(e){return((e=Math.exp(e))-1/e)/2}(w));return[a+M*h,l+M*p,c*A/iQ(n*S+w)]}}return m.duration=1e3*_*n/Math.SQRT2,m}return r.rho=function(o){var s=Math.max(.001,+o),a=s*s;return e(s,a,a*a)},r}(Math.SQRT2,2,4);function rQ(e){return function(n,t){var i=e((n=kx(n)).h,(t=kx(t)).h),r=yi(n.s,t.s),o=yi(n.l,t.l),s=yi(n.opacity,t.opacity);return function(a){return n.h=i(a),n.s=r(a),n.l=o(a),n.opacity=s(a),n+""}}}const jRe=rQ(Fx);var qRe=rQ(yi);const oQ=Math.PI/180,sQ=180/Math.PI,aQ=.96422,lQ=1,cQ=.82521,uQ=4/29,jg=6/29,dQ=3*jg*jg,WRe=jg*jg*jg;function fQ(e){if(e instanceof ca)return new ca(e.l,e.a,e.b,e.opacity);if(e instanceof pl)return pQ(e);e instanceof _i||(e=uR(e));var o,s,n=FR(e.r),t=FR(e.g),i=FR(e.b),r=kR((.2225045*n+.7168786*t+.0606169*i)/lQ);return n===t&&t===i?o=s=r:(o=kR((.4360747*n+.3850649*t+.1430804*i)/aQ),s=kR((.0139322*n+.0971045*t+.7141733*i)/cQ)),new ca(116*r-16,500*(o-r),200*(r-s),e.opacity)}function zx(e,n,t,i){return 1===arguments.length?fQ(e):new ca(e,n,t,i??1)}function ca(e,n,t,i){this.l=+e,this.a=+n,this.b=+t,this.opacity=+i}function kR(e){return e>WRe?Math.pow(e,1/3):e/dQ+uQ}function OR(e){return e>jg?e*e*e:dQ*(e-uQ)}function RR(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function FR(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function Ux(e,n,t,i){return 1===arguments.length?function hQ(e){if(e instanceof pl)return new pl(e.h,e.c,e.l,e.opacity);if(e instanceof ca||(e=fQ(e)),0===e.a&&0===e.b)return new pl(NaN,0<e.l&&e.l<100?0:NaN,e.l,e.opacity);var n=Math.atan2(e.b,e.a)*sQ;return new pl(n<0?n+360:n,Math.sqrt(e.a*e.a+e.b*e.b),e.l,e.opacity)}(e):new pl(e,n,t,i??1)}function pl(e,n,t,i){this.h=+e,this.c=+n,this.l=+t,this.opacity=+i}function pQ(e){if(isNaN(e.h))return new ca(e.l,0,0,e.opacity);var n=e.h*oQ;return new ca(e.l,Math.cos(n)*e.c,Math.sin(n)*e.c,e.opacity)}function GRe(e,n){var t=yi((e=zx(e)).l,(n=zx(n)).l),i=yi(e.a,n.a),r=yi(e.b,n.b),o=yi(e.opacity,n.opacity);return function(s){return e.l=t(s),e.a=i(s),e.b=r(s),e.opacity=o(s),e+""}}function gQ(e){return function(n,t){var i=e((n=Ux(n)).h,(t=Ux(t)).h),r=yi(n.c,t.c),o=yi(n.l,t.l),s=yi(n.opacity,t.opacity);return function(a){return n.h=i(a),n.c=r(a),n.l=o(a),n.opacity=s(a),n+""}}}zg(ca,zx,Ty(Vu,{brighter(e){return new ca(this.l+18*(e??1),this.a,this.b,this.opacity)},darker(e){return new ca(this.l-18*(e??1),this.a,this.b,this.opacity)},rgb(){var e=(this.l+16)/116,n=isNaN(this.a)?e:e+this.a/500,t=isNaN(this.b)?e:e-this.b/200;return new _i(RR(3.1338561*(n=aQ*OR(n))-1.6168667*(e=lQ*OR(e))-.4906146*(t=cQ*OR(t))),RR(-.9787684*n+1.9161415*e+.033454*t),RR(.0719453*n-.2289914*e+1.4052427*t),this.opacity)}})),zg(pl,Ux,Ty(Vu,{brighter(e){return new pl(this.h,this.c,this.l+18*(e??1),this.opacity)},darker(e){return new pl(this.h,this.c,this.l-18*(e??1),this.opacity)},rgb(){return pQ(this).rgb()}}));const KRe=gQ(Fx);var YRe=gQ(yi),NR=1.78277,PR=-.29227,Hx=-.90649,ky=1.97294,_Q=ky*Hx,yQ=ky*NR,vQ=NR*PR- -.14861*Hx;function LR(e,n,t,i){return 1===arguments.length?function XRe(e){if(e instanceof Vf)return new Vf(e.h,e.s,e.l,e.opacity);e instanceof _i||(e=uR(e));var t=e.g/255,i=e.b/255,r=(vQ*i+_Q*(e.r/255)-yQ*t)/(vQ+_Q-yQ),o=i-r,s=(ky*(t-r)-PR*o)/Hx,a=Math.sqrt(s*s+o*o)/(ky*r*(1-r)),l=a?Math.atan2(s,o)*sQ-120:NaN;return new Vf(l<0?l+360:l,a,r,e.opacity)}(e):new Vf(e,n,t,i??1)}function Vf(e,n,t,i){this.h=+e,this.s=+n,this.l=+t,this.opacity=+i}function bQ(e){return function n(t){function i(r,o){var s=e((r=LR(r)).h,(o=LR(o)).h),a=yi(r.s,o.s),l=yi(r.l,o.l),c=yi(r.opacity,o.opacity);return function(u){return r.h=s(u),r.s=a(u),r.l=l(Math.pow(u,t)),r.opacity=c(u),r+""}}return t=+t,i.gamma=n,i}(1)}zg(Vf,LR,Ty(Vu,{brighter(e){return e=null==e?Ug:Math.pow(Ug,e),new Vf(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=null==e?.7:Math.pow(.7,e),new Vf(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=isNaN(this.h)?0:(this.h+120)*oQ,n=+this.l,t=isNaN(this.s)?0:this.s*n*(1-n),i=Math.cos(e),r=Math.sin(e);return new _i(255*(n+t*(-.14861*i+NR*r)),255*(n+t*(PR*i+Hx*r)),255*(n+t*(ky*i)),this.opacity)}}));const QRe=bQ(Fx);var ZRe=bQ(yi);function JRe(e,n){for(var t=new Array(n),i=0;i<n;++i)t[i]=e(i/(n-1));return t}function $R(e,n,t){const i=e-n+2*t;return e?i>0?i:1:0}const qg="linear",Ec="log",Oy="pow",Ry="sqrt",jx="symlog",zf="time",Uf="utc",gl="sequential",Wg="diverging",Gg="quantile",qx="quantize",Wx="threshold",BR="ordinal",VR="point",zR="bin-ordinal",ui="continuous",Fy="discrete",Ny="discretizing",Ms="interpolating",UR="temporal";function HR(){const e=MR().unknown(void 0),n=e.domain,t=e.range;let r,o,i=[0,1],s=!1,a=0,l=0,c=.5;function u(){const d=n().length,f=i[1]<i[0],h=i[1-f],p=$R(d,a,l);let g=i[f-0];r=(h-g)/(p||1),s&&(r=Math.floor(r)),g+=(h-g-r*(d-a))*c,o=r*(1-a),s&&(g=Math.round(g),o=Math.round(o));const m=Ho(d).map(_=>g+r*_);return t(f?m.reverse():m)}return delete e.unknown,e.domain=function(d){return arguments.length?(n(d),u()):n()},e.range=function(d){return arguments.length?(i=[+d[0],+d[1]],u()):i.slice()},e.rangeRound=function(d){return i=[+d[0],+d[1]],s=!0,u()},e.bandwidth=function(){return o},e.step=function(){return r},e.round=function(d){return arguments.length?(s=!!d,u()):s},e.padding=function(d){return arguments.length?(l=Math.max(0,Math.min(1,d)),a=l,u()):a},e.paddingInner=function(d){return arguments.length?(a=Math.max(0,Math.min(1,d)),u()):a},e.paddingOuter=function(d){return arguments.length?(l=Math.max(0,Math.min(1,d)),u()):l},e.align=function(d){return arguments.length?(c=Math.max(0,Math.min(1,d)),u()):c},e.invertRange=function(d){if(null==d[0]||null==d[1])return;const f=i[1]<i[0],h=f?t().reverse():t(),p=h.length-1;let _,y,v,g=+d[0],m=+d[1];return g!=g||m!=m||(m<g&&(v=g,g=m,m=v),m<h[0]||g>i[1-f])?void 0:(_=Math.max(0,Ix(h,g)-1),y=g===m?_:Ix(h,m)-1,g-h[_]>o+1e-10&&++_,f&&(v=_,_=p-y,y=p-v),_>y?void 0:n().slice(_,y+1))},e.invert=function(d){const f=e.invertRange([d,d]);return f&&f[0]},e.copy=function(){return HR().domain(n()).range(i).round(s).paddingInner(a).paddingOuter(l).align(c)},u()}function CQ(e){const n=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,e.copy=function(){return CQ(n())},e}var rFe=Array.prototype.map;const sFe=Array.prototype.slice,Gx=new Map,EQ=Symbol("vega_scale");function SQ(e){return e[EQ]=!0,e}function $t(e,n,t){return arguments.length>1?(Gx.set(e,function lFe(e,n,t){const i=function(){const o=n();return o.invertRange||(o.invertRange=o.invert?function tFe(e){return function(n){let r,t=n[0],i=n[1];return i<t&&(r=t,t=i,i=r),[e.invert(t),e.invert(i)]}}(o):o.invertExtent?function nFe(e){return function(n){const t=e.range();let s,a,l,c,i=n[0],r=n[1],o=-1;for(r<i&&(a=i,i=r,r=a),l=0,c=t.length;l<c;++l)t[l]>=i&&t[l]<=r&&(o<0&&(o=l),s=l);if(!(o<0))return i=e.invertExtent(t[o]),r=e.invertExtent(t[s]),[void 0===i[0]?i[1]:i[0],void 0===r[1]?r[0]:r[1]]}}(o):void 0),o.type=e,SQ(o)};return i.metadata=oa(Ce(t)),i}(e,n,t)),this):TQ(e)?Gx.get(e):void 0}function TQ(e){return Gx.has(e)}function Hf(e,n){const t=Gx.get(e);return t&&t.metadata[n]}function jR(e){return Hf(e,ui)}function Kg(e){return Hf(e,Fy)}function qR(e){return Hf(e,Ny)}function DQ(e){return Hf(e,Ec)}function IQ(e){return Hf(e,Ms)}function MQ(e){return Hf(e,Gg)}$t("identity",function kX(e){var n;function t(i){return null==i||isNaN(i=+i)?n:i}return t.invert=t,t.domain=t.range=function(i){return arguments.length?(e=Array.from(i,mR),t):e.slice()},t.unknown=function(i){return arguments.length?(n=i,t):n},t.copy=function(){return kX(e).unknown(n)},e=arguments.length?Array.from(e,mR):[0,1],Bf(t)}),$t(qg,function AX(){var e=IX();return e.copy=function(){return Ay(e,AX())},hl.apply(e,arguments),Bf(e)},ui),$t(Ec,function PX(){const e=yR(Nx()).domain([1,10]);return e.copy=()=>Ay(e,PX()).base(e.base()),hl.apply(e,arguments),e},[ui,Ec]),$t(Oy,bR,ui),$t(Ry,function xRe(){return bR.apply(null,arguments).exponent(.5)},ui),$t(jx,function VX(){var e=wR(Nx());return e.copy=function(){return Ay(e,VX()).constant(e.constant())},hl.apply(e,arguments)},ui),$t(zf,function ARe(){return hl.apply(CR(TRe,DRe,ll,ty,Tg,vc,WC,KC,bc,PO).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)},[ui,UR]),$t(Uf,function kRe(){return hl.apply(CR(ERe,SRe,cl,ny,Ig,Ou,GC,YC,bc,LO).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)},[ui,UR]),$t(gl,xR,[ui,Ms]),$t(`${gl}-${qg}`,xR,[ui,Ms]),$t(`${gl}-${Ec}`,function UX(){var e=yR(Px()).domain([1,10]);return e.copy=function(){return ju(e,UX()).base(e.base())},Hu.apply(e,arguments)},[ui,Ms,Ec]),$t(`${gl}-${Oy}`,ER,[ui,Ms]),$t(`${gl}-${Ry}`,function ORe(){return ER.apply(null,arguments).exponent(.5)},[ui,Ms]),$t(`${gl}-${jx}`,function HX(){var e=wR(Px());return e.copy=function(){return ju(e,HX()).constant(e.constant())},Hu.apply(e,arguments)},[ui,Ms]),$t(`${Wg}-${qg}`,function jX(){var e=Bf(Lx()(ao));return e.copy=function(){return ju(e,jX())},Hu.apply(e,arguments)},[ui,Ms]),$t(`${Wg}-${Ec}`,function qX(){var e=yR(Lx()).domain([.1,1,10]);return e.copy=function(){return ju(e,qX()).base(e.base())},Hu.apply(e,arguments)},[ui,Ms,Ec]),$t(`${Wg}-${Oy}`,TR,[ui,Ms]),$t(`${Wg}-${Ry}`,function RRe(){return TR.apply(null,arguments).exponent(.5)},[ui,Ms]),$t(`${Wg}-${jx}`,function WX(){var e=wR(Lx());return e.copy=function(){return ju(e,WX()).constant(e.constant())},Hu.apply(e,arguments)},[ui,Ms]),$t(Gg,function GX(){var i,e=[],n=[],t=[];function r(){var s=0,a=Math.max(1,n.length);for(t=new Array(a-1);++s<a;)t[s-1]=jK(e,s/a);return o}function o(s){return null==s||isNaN(s=+s)?i:n[Sy(t,s)]}return o.invertExtent=function(s){var a=n.indexOf(s);return a<0?[NaN,NaN]:[a>0?t[a-1]:e[0],a<t.length?t[a]:e[e.length-1]]},o.domain=function(s){if(!arguments.length)return e.slice();e=[];for(let a of s)null!=a&&!isNaN(a=+a)&&e.push(a);return e.sort(wc),r()},o.range=function(s){return arguments.length?(n=Array.from(s),r()):n.slice()},o.unknown=function(s){return arguments.length?(i=s,o):i},o.quantiles=function(){return t.slice()},o.copy=function(){return GX().domain(e).range(n).unknown(i)},hl.apply(o,arguments)},[Ny,Gg]),$t(qx,function KX(){var o,e=0,n=1,t=1,i=[.5],r=[0,1];function s(l){return null!=l&&l<=l?r[Sy(i,l,0,t)]:o}function a(){var l=-1;for(i=new Array(t);++l<t;)i[l]=((l+1)*n-(l-t)*e)/(t+1);return s}return s.domain=function(l){return arguments.length?([e,n]=l,e=+e,n=+n,a()):[e,n]},s.range=function(l){return arguments.length?(t=(r=Array.from(l)).length-1,a()):r.slice()},s.invertExtent=function(l){var c=r.indexOf(l);return c<0?[NaN,NaN]:c<1?[e,i[0]]:c>=t?[i[t-1],n]:[i[c-1],i[c]]},s.unknown=function(l){return arguments.length&&(o=l),s},s.thresholds=function(){return i.slice()},s.copy=function(){return KX().domain([e,n]).range(r).unknown(o)},hl.apply(Bf(s),arguments)},Ny),$t(Wx,function YX(){var t,e=[.5],n=[0,1],i=1;function r(o){return null!=o&&o<=o?n[Sy(e,o,0,i)]:t}return r.domain=function(o){return arguments.length?(e=Array.from(o),i=Math.min(e.length,n.length-1),r):e.slice()},r.range=function(o){return arguments.length?(n=Array.from(o),i=Math.min(e.length,n.length-1),r):n.slice()},r.invertExtent=function(o){var s=n.indexOf(o);return[e[s-1],e[s]]},r.unknown=function(o){return arguments.length?(t=o,r):t},r.copy=function(){return YX().domain(e).range(n).unknown(t)},hl.apply(r,arguments)},Ny),$t(zR,function xQ(){let e=[],n=[];function t(i){return null==i||i!=i?void 0:n[(Sy(e,i)-1)%n.length]}return t.domain=function(i){return arguments.length?(e=function oFe(e){return rFe.call(e,ir)}(i),t):e.slice()},t.range=function(i){return arguments.length?(n=sFe.call(i),t):n.slice()},t.tickFormat=function(i,r){return MX(e[0],Tt(e),i??10,r)},t.copy=function(){return xQ().domain(t.domain()).range(t.range())},t},[Fy,Ny]),$t(BR,MR,Fy),$t("band",HR,Fy),$t(VR,function iFe(){return CQ(HR().paddingInner(1))},Fy);const uFe=["clamp","base","constant","exponent"];function AQ(e,n){const t=n[0],i=Tt(n)-t;return function(r){return e(t+r*i)}}function Kx(e,n,t){return SR(WR(n||"rgb",t),e)}function kQ(e,n){const t=new Array(n),i=n+1;for(let r=0;r<n;)t[r]=e(++r/i);return t}function OQ(e,n,t){const i=t-n;let r,o,s;return i&&Number.isFinite(i)?(r=(o=e.type).indexOf("-"),o=r<0?o:o.slice(r+1),s=$t(o)().domain([n,t]).range([0,1]),uFe.forEach(a=>e[a]?s[a](e[a]()):0),s):rr(.5)}function WR(e,n){const t=np[function dFe(e){return"interpolate"+e.toLowerCase().split("-").map(n=>n[0].toUpperCase()+n.slice(1)).join("")}(e)];return null!=n&&t&&t.gamma?t.gamma(n):t}function RQ(e){const n=e.length/6|0,t=new Array(n);for(let i=0;i<n;)t[i]="#"+e.slice(6*i,6*++i);return t}function FQ(e,n){for(const t in e)GR(t,n(e[t]))}const NQ={};function GR(e,n){return e=e&&e.toLowerCase(),arguments.length>1?(NQ[e]=n,this):NQ[e]}FQ({category10:"1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf",category20:"1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5",category20b:"393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6",category20c:"3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9",tableau10:"4c78a8f58518e4575672b7b254a24beeca3bb279a2ff9da69d755dbab0ac",tableau20:"4c78a89ecae9f58518ffbf7954a24b88d27ab79a20f2cf5b43989483bcb6e45756ff9d9879706ebab0acd67195fcbfd2b279a2d6a5c99e765fd8b5a5",accent:"7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666",dark2:"1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666",paired:"a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928",pastel1:"fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2",pastel2:"b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc",set1:"e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999",set2:"66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3",set3:"8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f"},RQ),FQ({blues:"cfe1f2bed8eca8cee58fc1de74b2d75ba3cf4592c63181bd206fb2125ca40a4a90",greens:"d3eecdc0e6baabdda594d3917bc77d60ba6c46ab5e329a512089430e7735036429",greys:"e2e2e2d4d4d4c4c4c4b1b1b19d9d9d8888887575756262624d4d4d3535351e1e1e",oranges:"fdd8b3fdc998fdb87bfda55efc9244f87f2cf06b18e4580bd14904b93d029f3303",purples:"e2e1efd4d4e8c4c5e0b4b3d6a3a0cc928ec3827cb97566ae684ea25c3696501f8c",reds:"fdc9b4fcb49afc9e80fc8767fa7051f6573fec3f2fdc2a25c81b1db21218970b13",blueGreen:"d5efedc1e8e0a7ddd18bd2be70c6a958ba9144ad77319c5d2089460e7736036429",bluePurple:"ccddecbad0e4a8c2dd9ab0d4919cc98d85be8b6db28a55a6873c99822287730f71",greenBlue:"d3eecec5e8c3b1e1bb9bd8bb82cec269c2ca51b2cd3c9fc7288abd1675b10b60a1",orangeRed:"fddcaffdcf9bfdc18afdad77fb9562f67d53ee6545e24932d32d1ebf130da70403",purpleBlue:"dbdaebc8cee4b1c3de97b7d87bacd15b9fc93a90c01e7fb70b70ab056199045281",purpleBlueGreen:"dbd8eac8cee4b0c3de93b7d872acd1549fc83892bb1c88a3097f8702736b016353",purpleRed:"dcc9e2d3b3d7ce9eccd186c0da6bb2e14da0e23189d91e6fc61159ab07498f023a",redPurple:"fccfccfcbec0faa9b8f98faff571a5ec539ddb3695c41b8aa908808d0179700174",yellowGreen:"e4f4acd1eca0b9e2949ed68880c97c62bb6e47aa5e3297502083440e723b036034",yellowOrangeBrown:"feeaa1fedd84fecc63feb746fca031f68921eb7215db5e0bc54c05ab3d038f3204",yellowOrangeRed:"fee087fed16ffebd59fea849fd903efc7335f9522bee3423de1b20ca0b22af0225",blueOrange:"134b852f78b35da2cb9dcae1d2e5eff2f0ebfce0bafbbf74e8932fc5690d994a07",brownBlueGreen:"704108a0651ac79548e3c78af3e6c6eef1eac9e9e48ed1c74da79e187a72025147",purpleGreen:"5b1667834792a67fb6c9aed3e6d6e8eff0efd9efd5aedda971bb75368e490e5e29",purpleOrange:"4114696647968f83b7b9b4d6dadbebf3eeeafce0bafbbf74e8932fc5690d994a07",redBlue:"8c0d25bf363adf745ef4ae91fbdbc9f2efeed2e5ef9dcae15da2cb2f78b3134b85",redGrey:"8c0d25bf363adf745ef4ae91fcdccbfaf4f1e2e2e2c0c0c0969696646464343434",yellowGreenBlue:"eff9bddbf1b4bde5b594d5b969c5be45b4c22c9ec02182b82163aa23479c1c3185",redYellowBlue:"a50026d4322cf16e43fcac64fedd90faf8c1dcf1ecabd6e875abd04a74b4313695",redYellowGreen:"a50026d4322cf16e43fcac63fedd8df9f7aed7ee8ea4d86e64bc6122964f006837",pinkYellowGreen:"8e0152c0267edd72adf0b3d6faddedf5f3efe1f2cab6de8780bb474f9125276419",spectral:"9e0142d13c4bf0704afcac63fedd8dfbf8b0e0f3a1a9dda269bda94288b55e4fa2",viridis:"440154470e61481a6c482575472f7d443a834144873d4e8a39568c35608d31688e2d708e2a788e27818e23888e21918d1f988b1fa08822a8842ab07f35b77943bf7154c56866cc5d7ad1518fd744a5db36bcdf27d2e21be9e51afde725",magma:"0000040404130b0924150e3720114b2c11603b0f704a107957157e651a80721f817f24828c29819a2e80a8327db6377ac43c75d1426fde4968e95462f1605df76f5cfa7f5efc8f65fe9f6dfeaf78febf84fece91fddea0fcedaffcfdbf",inferno:"0000040403130c0826170c3b240c4f330a5f420a68500d6c5d126e6b176e781c6d86216b932667a12b62ae305cbb3755c73e4cd24644dd513ae65c30ed6925f3771af8850ffb9506fca50afcb519fac62df6d645f2e661f3f484fcffa4",plasma:"0d088723069033059742039d5002a25d01a66a00a87801a88405a7900da49c179ea72198b12a90ba3488c33d80cb4779d35171da5a69e16462e76e5bed7953f2834cf68f44fa9a3dfca636fdb32ffec029fcce25f9dc24f5ea27f0f921",cividis:"00205100235800265d002961012b65042e670831690d346b11366c16396d1c3c6e213f6e26426e2c456e31476e374a6e3c4d6e42506e47536d4c566d51586e555b6e5a5e6e5e616e62646f66676f6a6a706e6d717270717573727976737c79747f7c75827f758682768985778c8877908b78938e789691789a94789e9778a19b78a59e77a9a177aea575b2a874b6ab73bbaf71c0b26fc5b66dc9b96acebd68d3c065d8c462ddc85fe2cb5ce7cf58ebd355f0d652f3da4ff7de4cfae249fce647",rainbow:"6e40aa883eb1a43db3bf3cafd83fa4ee4395fe4b83ff576eff6659ff7847ff8c38f3a130e2b72fcfcc36bee044aff05b8ff4576ff65b52f6673af27828ea8d1ddfa319d0b81cbecb23abd82f96e03d82e14c6edb5a5dd0664dbf6e40aa",sinebow:"ff4040fc582af47218e78d0bd5a703bfbf00a7d5038de70b72f41858fc2a40ff402afc5818f4720be78d03d5a700bfbf03a7d50b8de71872f42a58fc4040ff582afc7218f48d0be7a703d5bf00bfd503a7e70b8df41872fc2a58ff4040",turbo:"23171b32204a3e2a71453493493eae4b49c54a53d7485ee44569ee4074f53c7ff8378af93295f72e9ff42ba9ef28b3e926bce125c5d925cdcf27d5c629dcbc2de3b232e9a738ee9d3ff39347f68950f9805afc7765fd6e70fe667cfd5e88fc5795fb51a1f84badf545b9f140c5ec3cd0e637dae034e4d931ecd12ef4c92bfac029ffb626ffad24ffa223ff9821ff8d1fff821dff771cfd6c1af76118f05616e84b14df4111d5380fcb2f0dc0260ab61f07ac1805a313029b0f00950c00910b00",browns:"eedbbdecca96e9b97ae4a865dc9856d18954c7784cc0673fb85536ad44339f3632",tealBlues:"bce4d89dd3d181c3cb65b3c245a2b9368fae347da0306a932c5985",teals:"bbdfdfa2d4d58ac9c975bcbb61b0af4da5a43799982b8b8c1e7f7f127273006667",warmGreys:"dcd4d0cec5c1c0b8b4b3aaa7a59c9998908c8b827f7e7673726866665c5a59504e",goldGreen:"f4d166d5ca60b6c35c98bb597cb25760a6564b9c533f8f4f33834a257740146c36",goldOrange:"f4d166f8be5cf8aa4cf5983bf3852aef701be2621fd65322c54923b142239e3a26",goldRed:"f4d166f6be59f9aa51fc964ef6834bee734ae56249db5247cf4244c43141b71d3e",lightGreyRed:"efe9e6e1dad7d5cbc8c8bdb9bbaea9cd967ddc7b43e15f19df4011dc000b",lightGreyTeal:"e4eaead6dcddc8ced2b7c2c7a6b4bc64b0bf22a6c32295c11f85be1876bc",lightMulti:"e0f1f2c4e9d0b0de9fd0e181f6e072f6c053f3993ef77440ef4a3c",lightOrange:"f2e7daf7d5baf9c499fab184fa9c73f68967ef7860e8645bde515bd43d5b",lightTealBlue:"e3e9e0c0dccf9aceca7abfc859afc0389fb9328dad2f7ca0276b95255988",darkBlue:"3232322d46681a5c930074af008cbf05a7ce25c0dd38daed50f3faffffff",darkGold:"3c3c3c584b37725e348c7631ae8b2bcfa424ecc31ef9de30fff184ffffff",darkGreen:"3a3a3a215748006f4d048942489e4276b340a6c63dd2d836ffeb2cffffaa",darkMulti:"3737371f5287197d8c29a86995ce3fffe800ffffff",darkRed:"3434347036339e3c38cc4037e75d1eec8620eeab29f0ce32ffeb2c"},e=>Kx(RQ(e)));const Yx="symbol",pFe="discrete",mFe=e=>oe(e)?e.map(n=>String(n)):String(e),_Fe=(e,n)=>e[1]-n[1],yFe=(e,n)=>n[1]-e[1];function KR(e,n,t){let i;return Ft(n)&&(e.bins&&(n=Math.max(n,e.bins.length)),null!=t&&(n=Math.min(n,Math.floor(J_(e.domain())/t||1)+1))),Ee(n)&&(i=n.step,n=n.interval),xe(n)&&(n=e.type===zf?Rg(n):e.type==Uf?Fg(n):re("Only time and utc scales accept interval strings."),i&&(n=n.every(i))),n}function PQ(e,n,t){let i=e.range(),r=i[0],o=Tt(i),s=_Fe;if(r>o&&(i=o,o=r,r=i,s=yFe),r=Math.floor(r),o=Math.ceil(o),n=n.map(a=>[a,e(a)]).filter(a=>r<=a[1]&&a[1]<=o).sort(s).map(a=>a[0]),t>0&&n.length>1){const a=[n[0],Tt(n)];for(;n.length>t&&n.length>=3;)n=n.filter((l,c)=>!(c%2));n.length<3&&(n=a)}return n}function YR(e,n){return e.bins?PQ(e,e.bins):e.ticks?e.ticks(n):e.domain()}function LQ(e,n,t,i,r,o){const s=n.type;let a=mFe;if(s===zf||r===zf)a=e.timeFormat(i);else if(s===Uf||r===Uf)a=e.utcFormat(i);else if(DQ(s)){const l=e.formatFloat(i);if(o||n.bins)a=l;else{const c=$Q(n,t,!1);a=u=>c(u)?l(u):""}}else if(n.tickFormat){const l=n.domain();a=e.formatSpan(l[0],l[l.length-1],t,i)}else i&&(a=e.format(i));return a}function $Q(e,n,t){const i=YR(e,n),r=e.base(),o=Math.log(r),s=Math.max(1,r*n/i.length),a=l=>{let c=l/Math.pow(r,Math.round(Math.log(l)/o));return c*r<r-.5&&(c*=r),c<=s};return t?i.filter(a):a}const XR={[Gg]:"quantiles",[qx]:"thresholds",[Wx]:"domain"},BQ={[Gg]:"quantiles",[qx]:"domain"};function VQ(e,n){return e.bins?function wFe(e){const n=e.slice(0,-1);return n.max=Tt(e),n}(e.bins):e.type===Ec?$Q(e,n,!0):XR[e.type]?function bFe(e){const n=[-1/0].concat(e);return n.max=1/0,n}(e[XR[e.type]]()):YR(e,n)}const CFe=e=>XR[e.type]||e.bins;function zQ(e,n,t,i,r,o,s){const a=BQ[n.type]&&o!==zf&&o!==Uf?function vFe(e,n,t){const i=n[BQ[n.type]](),r=i.length;let s,o=r>1?i[1]-i[0]:i[0];for(s=1;s<r;++s)o=Math.min(o,i[s]-i[s-1]);return e.formatSpan(0,o,30,t)}(e,n,r):LQ(e,n,t,r,o,s);return i===Yx&&CFe(n)?xFe(a):i===pFe?EFe(a):SFe(a)}const xFe=e=>(n,t,i)=>{const r=UQ(i[t+1],UQ(i.max,1/0)),o=HQ(n,e),s=HQ(r,e);return o&&s?o+" \u2013 "+s:s?"< "+s:"\u2265 "+o},UQ=(e,n)=>e??n,EFe=e=>(n,t)=>t?e(n):null,SFe=e=>n=>e(n),HQ=(e,n)=>Number.isFinite(e)?n(e):null;function jQ(e,n,t){t=t||{};const i=Math.max(3,t.maxlen||7),r=function DFe(e,n,t,i){const r=i||n.type;return xe(t)&&function cFe(e){return Hf(e,UR)}(r)&&(t=t.replace(/%a/g,"%A").replace(/%b/g,"%B")),t||r!==zf?t||r!==Uf?zQ(e,n,5,null,t,i,!0):e.utcFormat("%A, %d %B %Y, %X UTC"):e.timeFormat("%A, %d %B %Y, %X")}(e,n,t.format,t.formatType);if(qR(n.type)){const o=VQ(n).slice(1).map(r),s=o.length;return`${s} boundar${1===s?"y":"ies"}: ${o.join(", ")}`}if(Kg(n.type)){const o=n.domain(),s=o.length;return`${s} value${1===s?"":"s"}: ${s>i?o.slice(0,i-2).map(r).join(", ")+", ending with "+o.slice(-1).map(r):o.map(r).join(", ")}`}{const o=n.domain();return`values from ${r(o[0])} to ${r(Tt(o))}`}}let qQ=0;function QR(e){return e&&e.gradient}function WQ(e,n,t){const i=e.gradient;let r=e.id,o="radial"===i?"p_":"";return r||(r=e.id="gradient_"+qQ++,"radial"===i?(e.x1=ml(e.x1,.5),e.y1=ml(e.y1,.5),e.r1=ml(e.r1,0),e.x2=ml(e.x2,.5),e.y2=ml(e.y2,.5),e.r2=ml(e.r2,.5),o="p_"):(e.x1=ml(e.x1,0),e.y1=ml(e.y1,0),e.x2=ml(e.x2,1),e.y2=ml(e.y2,0))),n[r]=e,"url("+(t||"")+"#"+o+r+")"}function ml(e,n){return e??n}function GQ(e,n){var i,t=[];return i={gradient:"linear",x1:e?e[0]:0,y1:e?e[1]:0,x2:n?n[0]:1,y2:n?n[1]:0,stops:t,stop:function(r,o){return t.push({offset:r,color:o}),i}}}const KQ={basis:{curve:function JOe(e){return new vx(e)}},"basis-closed":{curve:function e3e(e){return new PY(e)}},"basis-open":{curve:function t3e(e){return new LY(e)}},bundle:{curve:n3e,tension:"beta",value:.85},cardinal:{curve:i3e,tension:"tension",value:0},"cardinal-open":{curve:r3e,tension:"tension",value:0},"cardinal-closed":{curve:o3e,tension:"tension",value:0},"catmull-rom":{curve:l3e,tension:"alpha",value:.5},"catmull-rom-closed":{curve:c3e,tension:"alpha",value:.5},"catmull-rom-open":{curve:u3e,tension:"alpha",value:.5},linear:{curve:iR},"linear-closed":{curve:function d3e(e){return new qY(e)}},monotone:{horizontal:function h3e(e){return new YY(e)},vertical:function f3e(e){return new Cx(e)}},natural:{curve:function p3e(e){return new QY(e)}},step:{curve:function g3e(e){return new xx(e,.5)}},"step-after":{curve:function _3e(e){return new xx(e,1)}},"step-before":{curve:function m3e(e){return new xx(e,0)}}};function ZR(e,n,t){var i=$e(KQ,e)&&KQ[e],r=null;return i&&(r=i.curve||i[n||"vertical"],i.tension&&null!=t&&(r=r[i.tension](t))),r}const MFe={m:2,l:2,h:1,v:1,z:0,c:6,s:4,q:4,t:2,a:7},AFe=/[mlhvzcsqta]([^mlhvzcsqta]+|$)/gi,kFe=/^[+-]?(([0-9]*\.[0-9]+)|([0-9]+\.)|([0-9]+))([eE][+-]?[0-9]+)?/,OFe=/^((\s+,?\s*)|(,\s*))/,RFe=/^[01]/;function Yg(e){const n=[];return(e.match(AFe)||[]).forEach(i=>{let r=i[0];const o=r.toLowerCase(),s=MFe[o],a=function FFe(e,n,t){const i=[];for(let r=0;n&&r<t.length;)for(let o=0;o<n;++o){const s="a"!==e||3!==o&&4!==o?kFe:RFe,a=t.slice(r).match(s);if(null===a)throw Error("Invalid SVG path, incorrect parameter type");r+=a[0].length,i.push(+a[0]);const l=t.slice(r).match(OFe);null!==l&&(r+=l[0].length)}return i}(o,s,i.slice(1).trim()),l=a.length;if(l<s||l&&l%s!=0)throw Error("Invalid SVG path, incorrect parameter count");if(n.push([r,...a.slice(0,s)]),l!==s){"m"===o&&(r="M"===r?"L":"l");for(let c=s;c<l;c+=s)n.push([r,...a.slice(c,c+s)])}}),n}const qu=Math.PI/180,jf=Math.PI/2,_l=2*Math.PI,Xg=Math.sqrt(3)/2;var JR={},eF={},YQ=[].join;function LFe(e){const n=YQ.call(e);if(eF[n])return eF[n];var t=e[0],i=e[1],r=e[2],o=e[3],s=e[4],a=e[5],l=e[6],c=e[7];const u=c*s,d=-l*a,f=l*s,h=c*a,p=Math.cos(r),g=Math.sin(r),m=Math.cos(o),_=Math.sin(o),y=.5*(o-r),v=Math.sin(.5*y),b=8/3*v*v/Math.sin(y),w=t+p-b*g,x=i+g+b*p,C=t+m,S=i+_,A=C+b*_,M=S-b*m;return eF[n]=[u*w+d*x,f*w+h*x,u*A+d*M,f*A+h*M,u*C+d*S,f*C+h*S]}const As=["l",0,0,0,0,0,0,0];function $Fe(e,n,t){const i=As[0]=e[0];if("a"===i||"A"===i)As[1]=n*e[1],As[2]=t*e[2],As[3]=e[3],As[4]=e[4],As[5]=e[5],As[6]=n*e[6],As[7]=t*e[7];else if("h"===i||"H"===i)As[1]=n*e[1];else if("v"===i||"V"===i)As[1]=t*e[1];else for(var r=1,o=e.length;r<o;++r)As[r]=(r%2==1?n:t)*e[r];return As}function Py(e,n,t,i,r,o){var s,f,h,p,g,a=null,l=0,c=0,u=0,d=0,m=0,_=0;null==t&&(t=0),null==i&&(i=0),null==r&&(r=1),null==o&&(o=r),e.beginPath&&e.beginPath();for(var y=0,v=n.length;y<v;++y){switch(s=n[y],(1!==r||1!==o)&&(s=$Fe(s,r,o)),s[0]){case"l":e.lineTo((l+=s[1])+t,(c+=s[2])+i);break;case"L":e.lineTo((l=s[1])+t,(c=s[2])+i);break;case"h":e.lineTo((l+=s[1])+t,c+i);break;case"H":e.lineTo((l=s[1])+t,c+i);break;case"v":e.lineTo(l+t,(c+=s[1])+i);break;case"V":e.lineTo(l+t,(c=s[1])+i);break;case"m":m=l+=s[1],_=c+=s[2],e.moveTo(l+t,c+i);break;case"M":m=l=s[1],_=c=s[2],e.moveTo(l+t,c+i);break;case"c":e.bezierCurveTo(l+s[1]+t,c+s[2]+i,(u=l+s[3])+t,(d=c+s[4])+i,(f=l+s[5])+t,(h=c+s[6])+i),l=f,c=h;break;case"C":e.bezierCurveTo(s[1]+t,s[2]+i,(u=s[3])+t,(d=s[4])+i,(l=s[5])+t,(c=s[6])+i);break;case"s":e.bezierCurveTo((u=2*l-u)+t,(d=2*c-d)+i,l+s[1]+t,c+s[2]+i,(f=l+s[3])+t,(h=c+s[4])+i),u=l+s[1],d=c+s[2],l=f,c=h;break;case"S":e.bezierCurveTo((u=2*l-u)+t,(d=2*c-d)+i,s[1]+t,s[2]+i,(f=s[3])+t,(h=s[4])+i),l=f,c=h,u=s[1],d=s[2];break;case"q":e.quadraticCurveTo((u=l+s[1])+t,(d=c+s[2])+i,(f=l+s[3])+t,(h=c+s[4])+i),l=f,c=h;break;case"Q":e.quadraticCurveTo(s[1]+t,s[2]+i,(f=s[3])+t,(h=s[4])+i),l=f,c=h,u=s[1],d=s[2];break;case"t":f=l+s[1],h=c+s[2],null===a[0].match(/[QqTt]/)?(u=l,d=c):"t"===a[0]?(u=2*l-p,d=2*c-g):"q"===a[0]&&(u=2*l-u,d=2*c-d),p=u,g=d,e.quadraticCurveTo(u+t,d+i,f+t,h+i),u=(l=f)+s[1],d=(c=h)+s[2];break;case"T":e.quadraticCurveTo((u=2*l-u)+t,(d=2*c-d)+i,(f=s[1])+t,(h=s[2])+i),l=f,c=h;break;case"a":XQ(e,l+t,c+i,[s[1],s[2],s[3],s[4],s[5],s[6]+l+t,s[7]+c+i]),l+=s[6],c+=s[7];break;case"A":XQ(e,l+t,c+i,[s[1],s[2],s[3],s[4],s[5],s[6]+t,s[7]+i]),l=s[6],c=s[7];break;case"z":case"Z":l=m,c=_,e.closePath()}a=s}}function XQ(e,n,t,i){const r=function PFe(e,n,t,i,r,o,s,a,l){const c=YQ.call(arguments);if(JR[c])return JR[c];const u=s*qu,d=Math.sin(u),f=Math.cos(u),h=f*(a-e)*.5+d*(l-n)*.5,p=f*(l-n)*.5-d*(a-e)*.5;let g=h*h/((t=Math.abs(t))*t)+p*p/((i=Math.abs(i))*i);g>1&&(g=Math.sqrt(g),t*=g,i*=g);const m=f/t,_=d/t,y=-d/i,v=f/i,b=m*a+_*l,w=y*a+v*l,x=m*e+_*n,C=y*e+v*n;let A=1/((x-b)*(x-b)+(C-w)*(C-w))-.25;A<0&&(A=0);let M=Math.sqrt(A);o==r&&(M=-M);const N=.5*(b+x)-M*(C-w),V=.5*(w+C)+M*(x-b),P=Math.atan2(w-V,b-N);let D=Math.atan2(C-V,x-N)-P;D<0&&1===o?D+=_l:D>0&&0===o&&(D-=_l);const I=Math.ceil(Math.abs(D/(jf+.001))),O=[];for(let T=0;T<I;++T)O[T]=[N,V,P+T*D/I,P+(T+1)*D/I,t,i,d,f];return JR[c]=O}(i[5],i[6],i[0],i[1],i[3],i[4],i[2],n,t);for(let o=0;o<r.length;++o){const s=LFe(r[o]);e.bezierCurveTo(s[0],s[1],s[2],s[3],s[4],s[5])}}const QQ=.5773502691896257,ZQ={circle:{draw:function(e,n){const t=Math.sqrt(n)/2;e.moveTo(t,0),e.arc(0,0,t,0,_l)}},cross:{draw:function(e,n){var t=Math.sqrt(n)/2,i=t/2.5;e.moveTo(-t,-i),e.lineTo(-t,i),e.lineTo(-i,i),e.lineTo(-i,t),e.lineTo(i,t),e.lineTo(i,i),e.lineTo(t,i),e.lineTo(t,-i),e.lineTo(i,-i),e.lineTo(i,-t),e.lineTo(-i,-t),e.lineTo(-i,-i),e.closePath()}},diamond:{draw:function(e,n){const t=Math.sqrt(n)/2;e.moveTo(-t,0),e.lineTo(0,-t),e.lineTo(t,0),e.lineTo(0,t),e.closePath()}},square:{draw:function(e,n){var t=Math.sqrt(n),i=-t/2;e.rect(i,i,t,t)}},arrow:{draw:function(e,n){var t=Math.sqrt(n)/2,i=t/7,r=t/2.5,o=t/8;e.moveTo(-i,t),e.lineTo(i,t),e.lineTo(i,-o),e.lineTo(r,-o),e.lineTo(0,-t),e.lineTo(-r,-o),e.lineTo(-i,-o),e.closePath()}},wedge:{draw:function(e,n){var t=Math.sqrt(n)/2,i=Xg*t,r=i-t*QQ,o=t/4;e.moveTo(0,-i-r),e.lineTo(-o,i-r),e.lineTo(o,i-r),e.closePath()}},triangle:{draw:function(e,n){var t=Math.sqrt(n)/2,i=Xg*t,r=i-t*QQ;e.moveTo(0,-i-r),e.lineTo(-t,i-r),e.lineTo(t,i-r),e.closePath()}},"triangle-up":{draw:function(e,n){var t=Math.sqrt(n)/2,i=Xg*t;e.moveTo(0,-i),e.lineTo(-t,i),e.lineTo(t,i),e.closePath()}},"triangle-down":{draw:function(e,n){var t=Math.sqrt(n)/2,i=Xg*t;e.moveTo(0,i),e.lineTo(-t,-i),e.lineTo(t,-i),e.closePath()}},"triangle-right":{draw:function(e,n){var t=Math.sqrt(n)/2,i=Xg*t;e.moveTo(i,0),e.lineTo(-i,-t),e.lineTo(-i,t),e.closePath()}},"triangle-left":{draw:function(e,n){var t=Math.sqrt(n)/2,i=Xg*t;e.moveTo(-i,0),e.lineTo(i,-t),e.lineTo(i,t),e.closePath()}},stroke:{draw:function(e,n){const t=Math.sqrt(n)/2;e.moveTo(-t,0),e.lineTo(t,0)}}};function JQ(e){return $e(ZQ,e)?ZQ[e]:function BFe(e){if(!$e(tF,e)){const n=Yg(e);tF[e]={draw:function(t,i){Py(t,n,0,0,Math.sqrt(i)/2)}}}return tF[e]}(e)}var tF={};const Wu=.448084975506;function VFe(e){return e.x}function zFe(e){return e.y}function UFe(e){return e.width}function HFe(e){return e.height}function Sc(e){return"function"==typeof e?e:()=>+e}function Qx(e,n,t){return Math.max(n,Math.min(e,t))}function eZ(){var e=VFe,n=zFe,t=UFe,i=HFe,r=Sc(0),o=r,s=r,a=r,l=null;function c(u,d,f){var h,p=d??+e.call(this,u),g=f??+n.call(this,u),m=+t.call(this,u),_=+i.call(this,u),y=Math.min(m,_)/2,v=Qx(+r.call(this,u),0,y),b=Qx(+o.call(this,u),0,y),w=Qx(+s.call(this,u),0,y),x=Qx(+a.call(this,u),0,y);if(l||(l=h=Sx()),v<=0&&b<=0&&w<=0&&x<=0)l.rect(p,g,m,_);else{var C=p+m,S=g+_;l.moveTo(p+v,g),l.lineTo(C-b,g),l.bezierCurveTo(C-Wu*b,g,C,g+Wu*b,C,g+b),l.lineTo(C,S-x),l.bezierCurveTo(C,S-Wu*x,C-Wu*x,S,C-x,S),l.lineTo(p+w,S),l.bezierCurveTo(p+Wu*w,S,p,S-Wu*w,p,S-w),l.lineTo(p,g+v),l.bezierCurveTo(p,g+Wu*v,p+Wu*v,g,p+v,g),l.closePath()}if(h)return l=null,h+""||null}return c.x=function(u){return arguments.length?(e=Sc(u),c):e},c.y=function(u){return arguments.length?(n=Sc(u),c):n},c.width=function(u){return arguments.length?(t=Sc(u),c):t},c.height=function(u){return arguments.length?(i=Sc(u),c):i},c.cornerRadius=function(u,d,f,h){return arguments.length?(r=Sc(u),o=null!=d?Sc(d):r,a=null!=f?Sc(f):r,s=null!=h?Sc(h):o,c):r},c.context=function(u){return arguments.length?(l=u??null,c):l},c}function tZ(){var e,n,t,i,o,s,a,l,r=null;function c(d,f,h){const p=h/2;if(o){var g=a-f,m=d-s;if(g||m){var _=Math.hypot(g,m),y=(g/=_)*l,v=(m/=_)*l,b=Math.atan2(m,g);r.moveTo(s-y,a-v),r.lineTo(d-g*p,f-m*p),r.arc(d,f,p,b-Math.PI,b),r.lineTo(s+y,a+v),r.arc(s,a,l,b,b+Math.PI)}else r.arc(d,f,p,0,_l);r.closePath()}else o=1;s=d,a=f,l=p}function u(d){var f,p,m,h=d.length,g=!1;for(null==r&&(r=m=Sx()),f=0;f<=h;++f)!(f<h&&i(p=d[f],f,d))===g&&(g=!g)&&(o=0),g&&c(+e(p,f,d),+n(p,f,d),+t(p,f,d));if(m)return r=null,m+""||null}return u.x=function(d){return arguments.length?(e=d,u):e},u.y=function(d){return arguments.length?(n=d,u):n},u.size=function(d){return arguments.length?(t=d,u):t},u.defined=function(d){return arguments.length?(i=d,u):i},u.context=function(d){return arguments.length?(r=null==d?null:d,u):r},u}function Ly(e,n){return e??n}const $y=e=>e.x||0,By=e=>e.y||0,Zx=e=>!1!==e.defined,aNe=function T3e(){var e=b3e,n=w3e,t=Kt(0),i=null,r=C3e,o=x3e,s=E3e,a=null,l=Tx(c);function c(){var u,d,f=+e.apply(this,arguments),h=+n.apply(this,arguments),p=r.apply(this,arguments)-wx,g=o.apply(this,arguments)-wx,m=BY(g-p),_=g>p;if(a||(a=u=l()),h<f&&(d=h,h=f,f=d),h>lr)if(m>Ey-lr)a.moveTo(h*xc(p),h*so(p)),a.arc(0,0,h,p,g,!_),f>lr&&(a.moveTo(f*xc(g),f*so(g)),a.arc(0,0,f,g,p,_));else{var P,E,y=p,v=g,b=p,w=g,x=m,C=m,S=s.apply(this,arguments)/2,A=S>lr&&(i?+i.apply(this,arguments):vn(f*f+h*h)),M=Vg(BY(h-f)/2,+t.apply(this,arguments)),N=M,V=M;if(A>lr){var D=VY(A/f*so(S)),I=VY(A/h*so(S));(x-=2*D)>lr?(b+=D*=_?1:-1,w-=D):(x=0,b=w=(p+g)/2),(C-=2*I)>lr?(y+=I*=_?1:-1,v-=I):(C=0,y=v=(p+g)/2)}var O=h*xc(y),T=h*so(y),R=f*xc(w),F=f*so(w);if(M>lr){var Q,z=h*xc(v),H=h*so(v),j=f*xc(b),U=f*so(b);if(m<$u)if(Q=function S3e(e,n,t,i,r,o,s,a){var l=t-e,c=i-n,u=s-r,d=a-o,f=d*l-u*c;if(!(f*f<lr))return[e+(f=(u*(n-o)-d*(e-r))/f)*l,n+f*c]}(O,T,j,U,z,H,R,F)){var ue=O-Q[0],te=T-Q[1],me=z-Q[0],X=H-Q[1],se=1/so(function a3e(e){return e>1?0:e<-1?$u:Math.acos(e)}((ue*me+te*X)/(vn(ue*ue+te*te)*vn(me*me+X*X)))/2),ae=vn(Q[0]*Q[0]+Q[1]*Q[1]);N=Vg(M,(f-ae)/(se-1)),V=Vg(M,(h-ae)/(se+1))}else N=V=0}C>lr?V>lr?(P=Dx(j,U,O,T,h,V,_),E=Dx(z,H,R,F,h,V,_),a.moveTo(P.cx+P.x01,P.cy+P.y01),V<M?a.arc(P.cx,P.cy,V,ar(P.y01,P.x01),ar(E.y01,E.x01),!_):(a.arc(P.cx,P.cy,V,ar(P.y01,P.x01),ar(P.y11,P.x11),!_),a.arc(0,0,h,ar(P.cy+P.y11,P.cx+P.x11),ar(E.cy+E.y11,E.cx+E.x11),!_),a.arc(E.cx,E.cy,V,ar(E.y11,E.x11),ar(E.y01,E.x01),!_))):(a.moveTo(O,T),a.arc(0,0,h,y,v,!_)):a.moveTo(O,T),f>lr&&x>lr?N>lr?(P=Dx(R,F,z,H,f,-N,_),E=Dx(O,T,j,U,f,-N,_),a.lineTo(P.cx+P.x01,P.cy+P.y01),N<M?a.arc(P.cx,P.cy,N,ar(P.y01,P.x01),ar(E.y01,E.x01),!_):(a.arc(P.cx,P.cy,N,ar(P.y01,P.x01),ar(P.y11,P.x11),!_),a.arc(0,0,f,ar(P.cy+P.y11,P.cx+P.x11),ar(E.cy+E.y11,E.cx+E.x11),_),a.arc(E.cx,E.cy,N,ar(E.y11,E.x11),ar(E.y01,E.x01),!_))):a.arc(0,0,f,w,b,_):a.lineTo(R,F)}else a.moveTo(0,0);if(a.closePath(),u)return a=null,u+""||null}return c.centroid=function(){var u=(+e.apply(this,arguments)+ +n.apply(this,arguments))/2,d=(+r.apply(this,arguments)+ +o.apply(this,arguments))/2-$u/2;return[xc(d)*u,so(d)*u]},c.innerRadius=function(u){return arguments.length?(e="function"==typeof u?u:Kt(+u),c):e},c.outerRadius=function(u){return arguments.length?(n="function"==typeof u?u:Kt(+u),c):n},c.cornerRadius=function(u){return arguments.length?(t="function"==typeof u?u:Kt(+u),c):t},c.padRadius=function(u){return arguments.length?(i=null==u?null:"function"==typeof u?u:Kt(+u),c):i},c.startAngle=function(u){return arguments.length?(r="function"==typeof u?u:Kt(+u),c):r},c.endAngle=function(u){return arguments.length?(o="function"==typeof u?u:Kt(+u),c):o},c.padAngle=function(u){return arguments.length?(s="function"==typeof u?u:Kt(+u),c):s},c.context=function(u){return arguments.length?(a=u??null,c):a},c}().startAngle(e=>e.startAngle||0).endAngle(e=>e.endAngle||0).padAngle(e=>e.padAngle||0).innerRadius(e=>e.innerRadius||0).outerRadius(e=>e.outerRadius||0).cornerRadius(e=>e.cornerRadius||0),lNe=rX().x($y).y1(By).y0(e=>(e.y||0)+(e.height||0)).defined(Zx),cNe=rX().y(By).x1($y).x0(e=>(e.x||0)+(e.width||0)).defined(Zx),uNe=iX().x($y).y(By).defined(Zx),dNe=eZ().x($y).y(By).width(e=>e.width||0).height(e=>e.height||0).cornerRadius(e=>Ly(e.cornerRadiusTopLeft,e.cornerRadius)||0,e=>Ly(e.cornerRadiusTopRight,e.cornerRadius)||0,e=>Ly(e.cornerRadiusBottomRight,e.cornerRadius)||0,e=>Ly(e.cornerRadiusBottomLeft,e.cornerRadius)||0),fNe=function W3e(e,n){let t=null,i=Tx(r);function r(){let o;if(t||(t=o=i()),e.apply(this,arguments).draw(t,+n.apply(this,arguments)),o)return t=null,o+""||null}return e="function"==typeof e?e:Kt(e||aR),n="function"==typeof n?n:Kt(void 0===n?64:+n),r.type=function(o){return arguments.length?(e="function"==typeof o?o:Kt(o),r):e},r.size=function(o){return arguments.length?(n="function"==typeof o?o:Kt(+o),r):n},r.context=function(o){return arguments.length?(t=o??null,r):t},r}().type(e=>JQ(e.shape||"circle")).size(e=>Ly(e.size,64)),hNe=tZ().x($y).y(By).defined(Zx).size(e=>e.size||1);function nF(e){return e.cornerRadius||e.cornerRadiusTopLeft||e.cornerRadiusTopRight||e.cornerRadiusBottomRight||e.cornerRadiusBottomLeft}function Qg(e,n,t,i){return dNe.context(e)(n,t,i)}var nZ=1;function iZ(){nZ=1}function iF(e,n,t){var i=n.clip,r=e._defs,o=n.clip_id||(n.clip_id="clip"+nZ++),s=r.clipping[o]||(r.clipping[o]={id:o});return ct(i)?s.path=i(null):nF(t)?s.path=Qg(null,t,0,0):(s.width=t.width||0,s.height=t.height||0),"url(#"+o+")"}function ni(e){this.clear(),e&&this.union(e)}function Jx(e){this.mark=e,this.bounds=this.bounds||new ni}function eE(e){Jx.call(this,e),this.items=this.items||[]}function rF(e){this._pending=0,this._loader=e||ex()}function rZ(e){e._pending+=1}function Vy(e){e._pending-=1}function Tc(e,n,t){if(n.stroke&&0!==n.opacity&&0!==n.strokeOpacity){const i=null!=n.strokeWidth?+n.strokeWidth:1;e.expand(i+(t?function bNe(e,n){return e.strokeJoin&&"miter"!==e.strokeJoin?0:n}(n,i):0))}return e}ni.prototype={clone(){return new ni(this)},clear(){return this.x1=+Number.MAX_VALUE,this.y1=+Number.MAX_VALUE,this.x2=-Number.MAX_VALUE,this.y2=-Number.MAX_VALUE,this},empty(){return this.x1===+Number.MAX_VALUE&&this.y1===+Number.MAX_VALUE&&this.x2===-Number.MAX_VALUE&&this.y2===-Number.MAX_VALUE},equals(e){return this.x1===e.x1&&this.y1===e.y1&&this.x2===e.x2&&this.y2===e.y2},set(e,n,t,i){return t<e?(this.x2=e,this.x1=t):(this.x1=e,this.x2=t),i<n?(this.y2=n,this.y1=i):(this.y1=n,this.y2=i),this},add(e,n){return e<this.x1&&(this.x1=e),n<this.y1&&(this.y1=n),e>this.x2&&(this.x2=e),n>this.y2&&(this.y2=n),this},expand(e){return this.x1-=e,this.y1-=e,this.x2+=e,this.y2+=e,this},round(){return this.x1=Math.floor(this.x1),this.y1=Math.floor(this.y1),this.x2=Math.ceil(this.x2),this.y2=Math.ceil(this.y2),this},scale(e){return this.x1*=e,this.y1*=e,this.x2*=e,this.y2*=e,this},translate(e,n){return this.x1+=e,this.x2+=e,this.y1+=n,this.y2+=n,this},rotate(e,n,t){const i=this.rotatedPoints(e,n,t);return this.clear().add(i[0],i[1]).add(i[2],i[3]).add(i[4],i[5]).add(i[6],i[7])},rotatedPoints(e,n,t){var{x1:i,y1:r,x2:o,y2:s}=this,a=Math.cos(e),l=Math.sin(e),c=n-n*a+t*l,u=t-n*l-t*a;return[a*i-l*r+c,l*i+a*r+u,a*i-l*s+c,l*i+a*s+u,a*o-l*r+c,l*o+a*r+u,a*o-l*s+c,l*o+a*s+u]},union(e){return e.x1<this.x1&&(this.x1=e.x1),e.y1<this.y1&&(this.y1=e.y1),e.x2>this.x2&&(this.x2=e.x2),e.y2>this.y2&&(this.y2=e.y2),this},intersect(e){return e.x1>this.x1&&(this.x1=e.x1),e.y1>this.y1&&(this.y1=e.y1),e.x2<this.x2&&(this.x2=e.x2),e.y2<this.y2&&(this.y2=e.y2),this},encloses(e){return e&&this.x1<=e.x1&&this.x2>=e.x2&&this.y1<=e.y1&&this.y2>=e.y2},alignsWith(e){return e&&(this.x1==e.x1||this.x2==e.x2||this.y1==e.y1||this.y2==e.y2)},intersects(e){return e&&!(this.x2<e.x1||this.x1>e.x2||this.y2<e.y1||this.y1>e.y2)},contains(e,n){return!(e<this.x1||e>this.x2||n<this.y1||n>this.y2)},width(){return this.x2-this.x1},height(){return this.y2-this.y1}},pe(eE,Jx),rF.prototype={pending(){return this._pending},sanitizeURL(e){const n=this;return rZ(n),n._loader.sanitize(e,{context:"href"}).then(t=>(Vy(n),t)).catch(()=>(Vy(n),null))},loadImage(e){const n=this,t=typeof Image<"u"?Image:null;return rZ(n),n._loader.sanitize(e,{context:"image"}).then(i=>{const r=i.href;if(!r||!t)throw{url:r};const o=new t,s=$e(i,"crossOrigin")?i.crossOrigin:"anonymous";return null!=s&&(o.crossOrigin=s),o.onload=()=>Vy(n),o.onerror=()=>Vy(n),o.src=r,o}).catch(i=>(Vy(n),{complete:!1,width:0,height:0,src:i&&i.url||""}))},ready(){const e=this;return new Promise(n=>{!function t(i){e.pending()?setTimeout(()=>{t(!0)},10):n(i)}(!1)})}};const wNe=_l-1e-8;let tE,nE,iE,qf,oF,rE,sF,aF;const Gu=(e,n)=>tE.add(e,n),oE=(e,n)=>Gu(nE=e,iE=n),oZ=e=>Gu(e,tE.y1),sZ=e=>Gu(tE.x1,e),Wf=(e,n)=>oF*e+sF*n,Gf=(e,n)=>rE*e+aF*n,lF=(e,n)=>Gu(Wf(e,n),Gf(e,n)),cF=(e,n)=>oE(Wf(e,n),Gf(e,n));function zy(e,n){return tE=e,n?(qf=n*qu,oF=aF=Math.cos(qf),rE=Math.sin(qf),sF=-rE):(oF=aF=1,qf=rE=sF=0),CNe}const CNe={beginPath(){},closePath(){},moveTo:cF,lineTo:cF,rect(e,n,t,i){qf?(lF(e+t,n),lF(e+t,n+i),lF(e,n+i),cF(e,n)):(Gu(e+t,n+i),oE(e,n))},quadraticCurveTo(e,n,t,i){const r=Wf(e,n),o=Gf(e,n),s=Wf(t,i),a=Gf(t,i);aZ(nE,r,s,oZ),aZ(iE,o,a,sZ),oE(s,a)},bezierCurveTo(e,n,t,i,r,o){const s=Wf(e,n),a=Gf(e,n),l=Wf(t,i),c=Gf(t,i),u=Wf(r,o),d=Gf(r,o);lZ(nE,s,l,u,oZ),lZ(iE,a,c,d,sZ),oE(u,d)},arc(e,n,t,i,r,o){if(i+=qf,r+=qf,nE=t*Math.cos(r)+e,iE=t*Math.sin(r)+n,Math.abs(r-i)>wNe)Gu(e-t,n-t),Gu(e+t,n+t);else{const s=c=>Gu(t*Math.cos(c)+e,t*Math.sin(c)+n);let a,l;if(s(i),s(r),r!==i)if((i%=_l)<0&&(i+=_l),(r%=_l)<0&&(r+=_l),r<i&&(o=!o,a=i,i=r,r=a),o)for(r-=_l,a=i-i%jf,l=0;l<4&&a>r;++l,a-=jf)s(a);else for(a=i-i%jf+jf,l=0;l<4&&a<r;++l,a+=jf)s(a)}}};function aZ(e,n,t,i){const r=(e-n)/(e+t-2*n);0<r&&r<1&&i(e+(n-e)*r)}function lZ(e,n,t,i,r){const o=i-e+3*n-3*t,s=e+t-2*n,a=e-n;let u,l=0,c=0;Math.abs(o)>1e-14?(u=s*s+a*o,u>=0&&(u=Math.sqrt(u),l=(-s+u)/o,c=(-s-u)/o)):l=.5*a/s,0<l&&l<1&&r(cZ(l,e,n,t,i)),0<c&&c<1&&r(cZ(c,e,n,t,i))}function cZ(e,n,t,i,r){const o=1-e,s=o*o,a=e*e;return s*o*n+3*s*e*t+3*o*a*i+a*e*r}var Ku=(Ku=Bu(1,1))?Ku.getContext("2d"):null;const uF=new ni;function dF(e){return function(n,t){if(!Ku)return!0;e(Ku,n),uF.clear().union(n.bounds).intersect(t).round();const{x1:i,y1:r,x2:o,y2:s}=uF;for(let a=r;a<=s;++a)for(let l=i;l<=o;++l)if(Ku.isPointInPath(l,a))return!0;return!1}}function fF(e,n){return n.contains(e.x||0,e.y||0)}function uZ(e,n){const t=e.x||0,i=e.y||0;return n.intersects(uF.set(t,i,t+(e.width||0),i+(e.height||0)))}function dZ(e,n){const t=e.x||0,i=e.y||0;return Zg(n,t,i,null!=e.x2?e.x2:t,null!=e.y2?e.y2:i)}function Zg(e,n,t,i,r){const{x1:o,y1:s,x2:a,y2:l}=e,c=i-n,u=r-t;let h,p,g,m,d=0,f=1;for(m=0;m<4;++m){if(0===m&&(h=-c,p=-(o-n)),1===m&&(h=c,p=a-n),2===m&&(h=-u,p=-(s-t)),3===m&&(h=u,p=l-t),Math.abs(h)<1e-10&&p<0)return!1;if(g=p/h,h<0){if(g>f)return!1;g>d&&(d=g)}else if(h>0){if(g<d)return!1;g<f&&(f=g)}}return!0}function Jg(e,n){e.globalCompositeOperation=n.blend||"source-over"}function ua(e,n){return e??n}function fZ(e,n){const t=n.length;for(let i=0;i<t;++i)e.addColorStop(n[i].offset,n[i].color);return e}function hZ(e,n,t){return QR(t)?function xNe(e,n,t){const i=t.width(),r=t.height();let o;if("radial"===n.gradient)o=e.createRadialGradient(t.x1+ua(n.x1,.5)*i,t.y1+ua(n.y1,.5)*r,Math.max(i,r)*ua(n.r1,0),t.x1+ua(n.x2,.5)*i,t.y1+ua(n.y2,.5)*r,Math.max(i,r)*ua(n.r2,.5));else{const s=ua(n.x1,0),a=ua(n.y1,0),l=ua(n.x2,1),c=ua(n.y2,0);if(s!==l&&a!==c&&i!==r){const u=Bu(Math.ceil(i),Math.ceil(r)),d=u.getContext("2d");return d.scale(i,r),d.fillStyle=fZ(d.createLinearGradient(s,a,l,c),n.stops),d.fillRect(0,0,i,r),e.createPattern(u,"no-repeat")}o=e.createLinearGradient(t.x1+s*i,t.y1+a*r,t.x1+l*i,t.y1+c*r)}return fZ(o,n.stops)}(e,t,n.bounds):t}function sE(e,n,t){return(t*=null==n.fillOpacity?1:n.fillOpacity)>0&&(e.globalAlpha=t,e.fillStyle=hZ(e,n,n.fill),!0)}var ENe=[];function em(e,n,t){var i=null!=(i=n.strokeWidth)?i:1;return!(i<=0)&&(t*=null==n.strokeOpacity?1:n.strokeOpacity)>0&&(e.globalAlpha=t,e.strokeStyle=hZ(e,n,n.stroke),e.lineWidth=i,e.lineCap=n.strokeCap||"butt",e.lineJoin=n.strokeJoin||"miter",e.miterLimit=n.strokeMiterLimit||10,e.setLineDash&&(e.setLineDash(n.strokeDash||ENe),e.lineDashOffset=n.strokeDashOffset||0),!0)}function SNe(e,n){return e.zindex-n.zindex||e.index-n.index}function hF(e){if(!e.zdirty)return e.zitems;var i,r,o,n=e.items,t=[];for(r=0,o=n.length;r<o;++r)(i=n[r]).index=r,i.zindex&&t.push(i);return e.zdirty=!1,e.zitems=t.sort(SNe)}function da(e,n){var i,r,t=e.items;if(!t||!t.length)return;const o=hF(e);if(o&&o.length){for(i=0,r=t.length;i<r;++i)t[i].zindex||n(t[i]);t=o}for(i=0,r=t.length;i<r;++i)n(t[i])}function aE(e,n){var i,r,t=e.items;if(!t||!t.length)return null;const o=hF(e);for(o&&o.length&&(t=o),r=t.length;--r>=0;)if(i=n(t[r]))return i;if(t===o)for(r=(t=e.items).length;--r>=0;)if(!t[r].zindex&&(i=n(t[r])))return i;return null}function pF(e){return function(n,t,i){da(t,r=>{(!i||i.intersects(r.bounds))&&pZ(e,n,r,r)})}}function TNe(e){return function(n,t,i){t.items.length&&(!i||i.intersects(t.bounds))&&pZ(e,n,t.items[0],t.items)}}function pZ(e,n,t,i){var r=null==t.opacity?1:t.opacity;0!==r&&(e(n,i)||(Jg(n,t),t.fill&&sE(n,t,r)&&n.fill(),t.stroke&&em(n,t,r)&&n.stroke()))}function lE(e){return e=e||xs,function(n,t,i,r,o,s){return i*=n.pixelRatio,r*=n.pixelRatio,aE(t,a=>{const l=a.bounds;if((!l||l.contains(o,s))&&l&&e(n,a,i,r,o,s))return a})}}function Uy(e,n){return function(t,i,r,o){var u,s=Array.isArray(i)?i[0]:i,a=n??s.fill,l=s.stroke&&t.isPointInStroke;return l&&(u=s.strokeCap,t.lineWidth=s.strokeWidth??1,t.lineCap=u??"butt"),!e(t,i)&&(a&&t.isPointInPath(r,o)||l&&t.isPointInStroke(r,o))}}function gF(e){return lE(Uy(e))}function Kf(e,n){return"translate("+e+","+n+")"}function mF(e){return"rotate("+e+")"}function gZ(e){return Kf(e.x||0,e.y||0)}function _F(e,n,t){function o(s,a){var l=a.x||0,c=a.y||0,u=a.angle||0;s.translate(l,c),u&&s.rotate(u*=qu),s.beginPath(),n(s,a),u&&s.rotate(-u),s.translate(-l,-c)}return{type:e,tag:"path",nested:!1,attr:function i(s,a){s("transform",function INe(e){return Kf(e.x||0,e.y||0)+(e.angle?" "+mF(e.angle):"")}(a)),s("d",n(null,a))},bound:function r(s,a){return n(zy(s,a.angle),a),Tc(s,a).translate(a.x||0,a.y||0)},draw:pF(o),pick:gF(o),isect:t||dF(o)}}var ANe=_F("arc",function pNe(e,n){return aNe.context(e)(n)});function yF(e,n,t){function o(l,c){l.beginPath(),n(l,c)}const s=Uy(o);return{type:e,tag:"path",nested:!0,attr:function i(l,c){var u=c.mark.items;u.length&&l("d",n(null,u))},bound:function r(l,c){var u=c.items;return 0===u.length?l:(n(zy(l),u),Tc(l,u[0]))},draw:TNe(o),pick:function a(l,c,u,d,f,h){var p=c.items,g=c.bounds;return!p||!p.length||g&&!g.contains(f,h)?null:s(l,p,u*=l.pixelRatio,d*=l.pixelRatio)?p[0]:null},isect:fF,tip:t}}var FNe=yF("area",function gNe(e,n){const t=n[0];return("horizontal"===t.orient?cNe:lNe).curve(ZR(t.interpolate||"linear",t.orient,t.tension)).context(e)(n)},function kNe(e,n){for(var s,a,t="horizontal"===e[0].orient?n[1]:n[0],i="horizontal"===e[0].orient?"y":"x",r=e.length,o=1/0;--r>=0;)!1!==e[r].defined&&(a=Math.abs(e[r][i]-t))<o&&(o=a,s=e[r]);return s});function mZ(e,n){e.beginPath(),nF(n)?Qg(e,n,0,0):e.rect(0,0,n.width||0,n.height||0),e.clip()}function _Z(e){const n=ua(e.strokeWidth,1);return null!=e.strokeOffset?e.strokeOffset:e.stroke&&n>.5&&n<1.5?.5-Math.abs(n-1):0}function yZ(e,n){const t=_Z(n);e("d",Qg(null,n,t,t))}function Hy(e,n,t,i){const r=_Z(n);e.beginPath(),Qg(e,n,(t||0)+r,(i||0)+r)}const zNe=Uy(Hy),UNe=Uy(Hy,!1),HNe=Uy(Hy,!0);var GNe={type:"group",tag:"g",nested:!1,attr:function PNe(e,n){e("transform",gZ(n))},bound:function VNe(e,n){if(!n.clip&&n.items){const t=n.items,i=t.length;for(let r=0;r<i;++r)e.union(t[r].bounds)}return(n.clip||n.width||n.height)&&!n.noBound&&e.add(0,0).add(n.width||0,n.height||0),Tc(e,n),e.translate(n.x||0,n.y||0)},draw:function jNe(e,n,t,i){da(n,r=>{const o=r.x||0,s=r.y||0,a=r.strokeForeground,l=null==r.opacity?1:r.opacity;(r.stroke||r.fill)&&l&&(Hy(e,r,o,s),Jg(e,r),r.fill&&sE(e,r,l)&&e.fill(),r.stroke&&!a&&em(e,r,l)&&e.stroke()),e.save(),e.translate(o,s),r.clip&&mZ(e,r),t&&t.translate(-o,-s),da(r,c=>{("group"===c.marktype||null==i||i.includes(c.marktype))&&this.draw(e,c,t,i)}),t&&t.translate(o,s),e.restore(),a&&r.stroke&&l&&(Hy(e,r,o,s),Jg(e,r),em(e,r,l)&&e.stroke())})},pick:function qNe(e,n,t,i,r,o){if(n.bounds&&!n.bounds.contains(r,o)||!n.items)return null;const s=t*e.pixelRatio,a=i*e.pixelRatio;return aE(n,l=>{let c,u,d;const f=l.bounds;if(f&&!f.contains(r,o))return;u=l.x||0,d=l.y||0;const g=l.clip;if(g&&(r<u||r>u+(l.width||0)||o<d||o>d+(l.height||0)))return;if(e.save(),e.translate(u,d),u=r-u,d=o-d,g&&nF(l)&&!HNe(e,l,s,a))return e.restore(),null;const m=l.strokeForeground,_=!1!==n.interactive;return _&&m&&l.stroke&&UNe(e,l,s,a)?(e.restore(),l):(c=aE(l,y=>function WNe(e,n,t){return(!1!==e.interactive||"group"===e.marktype)&&e.bounds&&e.bounds.contains(n,t)}(y,u,d)?this.pick(y,t,i,u,d):null),!c&&_&&(l.fill||!m&&l.stroke)&&zNe(e,l,s,a)&&(c=l),e.restore(),c||null)})},isect:uZ,content:function BNe(e,n,t){e("clip-path",n.clip?iF(t,n,n):null)},background:function LNe(e,n){e("class","background"),e("aria-hidden",!0),yZ(e,n)},foreground:function $Ne(e,n){e("class","foreground"),e("aria-hidden",!0),n.strokeForeground?yZ(e,n):e("d","")}},jy={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",version:"1.1"};function vF(e,n){var t=e.image;return(!t||e.url&&e.url!==t.url)&&(t={complete:!1,width:0,height:0},n.loadImage(e.url).then(i=>{e.image=i,e.image.url=e.url})),t}function bF(e,n){return null!=e.width?e.width:n&&n.width?!1!==e.aspect&&e.height?e.height*n.width/n.height:n.width:0}function wF(e,n){return null!=e.height?e.height:n&&n.height?!1!==e.aspect&&e.width?e.width*n.height/n.width:n.height:0}function cE(e,n){return"center"===e?n/2:"right"===e?n:0}function uE(e,n){return"middle"===e?n/2:"bottom"===e?n:0}var QNe={type:"image",tag:"image",nested:!1,attr:function KNe(e,n,t){const i=vF(n,t),r=bF(n,i),o=wF(n,i),s=(n.x||0)-cE(n.align,r),a=(n.y||0)-uE(n.baseline,o);e("href",!i.src&&i.toDataURL?i.toDataURL():i.src||"",jy["xmlns:xlink"],"xlink:href"),e("transform",Kf(s,a)),e("width",r),e("height",o),e("preserveAspectRatio",!1===n.aspect?"none":"xMidYMid")},bound:function YNe(e,n){const t=n.image,i=bF(n,t),r=wF(n,t),o=(n.x||0)-cE(n.align,i),s=(n.y||0)-uE(n.baseline,r);return e.set(o,s,o+i,s+r)},draw:function XNe(e,n,t){da(n,i=>{if(t&&!t.intersects(i.bounds))return;const r=vF(i,this);let o=bF(i,r),s=wF(i,r);if(0===o||0===s)return;let c,u,d,f,a=(i.x||0)-cE(i.align,o),l=(i.y||0)-uE(i.baseline,s);!1!==i.aspect&&(u=r.width/r.height,d=i.width/i.height,u==u&&d==d&&u!==d&&(d<u?(f=o/u,l+=(s-f)/2,s=f):(f=s*u,a+=(o-f)/2,o=f))),(r.complete||r.toDataURL)&&(Jg(e,i),e.globalAlpha=null!=(c=i.opacity)?c:1,e.imageSmoothingEnabled=!1!==i.smooth,e.drawImage(r,a,l,o,s))})},pick:lE(),isect:xs,get:vF,xOffset:cE,yOffset:uE},ZNe=yF("line",function mNe(e,n){const t=n[0];return uNe.curve(ZR(t.interpolate||"linear",t.orient,t.tension)).context(e)(n)},function ONe(e,n){for(var r,o,t=Math.pow(e[0].strokeWidth||1,2),i=e.length;--i>=0;)if(!1!==e[i].defined&&(r=e[i].x-n[0])*r+(o=e[i].y-n[1])*o<t)return e[i];return null});function dE(e,n){var t=n.path;if(null==t)return!0;var i=n.x||0,r=n.y||0,o=n.scaleX||1,s=n.scaleY||1,a=(n.angle||0)*qu,l=n.pathCache;(!l||l.path!==t)&&((n.pathCache=l=Yg(t)).path=t),a&&e.rotate&&e.translate?(e.translate(i,r),e.rotate(a),Py(e,l,0,0,o,s),e.rotate(-a),e.translate(-i,-r)):Py(e,l,i,r,o,s)}var t4e={type:"path",tag:"path",nested:!1,attr:function JNe(e,n){(1!==(n.scaleX||1)||1!==(n.scaleY||1))&&e("vector-effect","non-scaling-stroke"),e("transform",function MNe(e){return Kf(e.x||0,e.y||0)+(e.angle?" "+mF(e.angle):"")+(e.scaleX||e.scaleY?" "+function DNe(e,n){return"scale("+e+","+n+")"}(e.scaleX||1,e.scaleY||1):"")}(n)),e("d",n.path)},bound:function e4e(e,n){return dE(zy(e,n.angle),n)?e.set(0,0,0,0):Tc(e,n,!0)},draw:pF(dE),pick:gF(dE),isect:dF(dE)};function vZ(e,n){e.beginPath(),Qg(e,n)}var r4e={type:"rect",tag:"path",nested:!1,attr:function n4e(e,n){e("d",Qg(null,n))},bound:function i4e(e,n){var t,i;return Tc(e.set(t=n.x||0,i=n.y||0,t+n.width||0,i+n.height||0),n)},draw:pF(vZ),pick:gF(vZ),isect:uZ};function bZ(e,n,t){var i,r,o,s;return!(!n.stroke||!em(e,n,t)||(i=n.x||0,r=n.y||0,o=null!=n.x2?n.x2:i,s=null!=n.y2?n.y2:r,e.beginPath(),e.moveTo(i,r),e.lineTo(o,s),0))}var c4e={type:"rule",tag:"line",nested:!1,attr:function o4e(e,n){e("transform",gZ(n)),e("x2",null!=n.x2?n.x2-(n.x||0):0),e("y2",null!=n.y2?n.y2-(n.y||0):0)},bound:function s4e(e,n){var t,i;return Tc(e.set(t=n.x||0,i=n.y||0,null!=n.x2?n.x2:t,null!=n.y2?n.y2:i),n)},draw:function a4e(e,n,t){da(n,i=>{if(!t||t.intersects(i.bounds)){var r=null==i.opacity?1:i.opacity;r&&bZ(e,i,r)&&(Jg(e,i),e.stroke())}})},pick:lE(function l4e(e,n,t,i){return!!e.isPointInStroke&&bZ(e,n,1)&&e.isPointInStroke(t,i)}),isect:dZ},u4e=_F("shape",function _Ne(e,n){return(n.mark.shape||n.shape).context(e)(n)}),d4e=_F("symbol",function yNe(e,n){return fNe.context(e)(n)},fF);const wZ=sG();var jo={height:yl,measureWidth:CF,estimateWidth:fE,width:fE,canvas:CZ};function CZ(e){jo.width=e&&Ku?CF:fE}function fE(e,n){return xZ(Xu(e,n),yl(e))}function xZ(e,n){return~~(.8*e.length*n)}function CF(e,n){return yl(e)<=0||!(n=Xu(e,n))?0:EZ(n,hE(e))}function EZ(e,n){const t=`(${n}) ${e}`;let i=wZ.get(t);return void 0===i&&(Ku.font=n,i=Ku.measureText(e).width,wZ.set(t,i)),i}function yl(e){return null!=e.fontSize?+e.fontSize||0:11}function Yu(e){return null!=e.lineHeight?e.lineHeight:yl(e)+2}function qy(e){return function f4e(e){return oe(e)?e.length>1?e:e[0]:e}(e.lineBreak&&e.text&&!oe(e.text)?e.text.split(e.lineBreak):e.text)}function xF(e){const n=qy(e);return(oe(n)?n.length-1:0)*Yu(e)}function Xu(e,n){const t=null==n?"":(n+"").trim();return e.limit>0&&t.length?function p4e(e,n){var t=+e.limit,i=function h4e(e){if(jo.width===CF){const n=hE(e);return t=>EZ(t,n)}if(jo.width===fE){const n=yl(e);return t=>xZ(t,n)}return n=>jo.width(e,n)}(e);if(i(n)<t)return n;var l,r=e.ellipsis||"\u2026",o="rtl"===e.dir,s=0,a=n.length;if(t-=i(r),o){for(;s<a;)i(n.slice(l=s+a>>>1))>t?s=l+1:a=l;return r+n.slice(s)}for(;s<a;)i(n.slice(0,l=1+(s+a>>>1)))<t?s=l:a=l-1;return n.slice(0,s)+r}(e,t):t}function Wy(e,n){var t=e.font;return(n&&t?String(t).replace(/"/g,"'"):t)||"sans-serif"}function hE(e,n){return(e.fontStyle?e.fontStyle+" ":"")+(e.fontVariant?e.fontVariant+" ":"")+(e.fontWeight?e.fontWeight+" ":"")+yl(e)+"px "+Wy(e,n)}function EF(e){var n=e.baseline,t=yl(e);return Math.round("top"===n?.79*t:"middle"===n?.3*t:"bottom"===n?-.21*t:"line-top"===n?.29*t+.5*Yu(e):"line-bottom"===n?.29*t-.5*Yu(e):0)}CZ(!0);const g4e={left:"start",center:"middle",right:"end"},Gy=new ni;function pE(e){var r,n=e.x||0,t=e.y||0,i=e.radius||0;return i&&(r=(e.theta||0)-jf,n+=i*Math.cos(r),t+=i*Math.sin(r)),Gy.x1=n,Gy.y1=t,Gy}function SF(e,n,t){var d,i=jo.height(n),r=n.align,o=pE(n),s=o.x1,a=o.y1,l=n.dx||0,c=(n.dy||0)+EF(n)-Math.round(.8*i),u=qy(n);if(oe(u)?(i+=Yu(n)*(u.length-1),d=u.reduce((f,h)=>Math.max(f,jo.width(n,h)),0)):d=jo.width(n,u),"center"===r?l-=d/2:"right"===r&&(l-=d),e.set(l+=s,c+=a,l+d,c+i),n.angle&&!t)e.rotate(n.angle*qu,s,a);else if(2===t)return e.rotatedPoints(n.angle*qu,s,a);return e}var b4e={type:"text",tag:"text",nested:!1,attr:function m4e(e,n){var l,t=n.dx||0,i=(n.dy||0)+EF(n),r=pE(n),o=r.x1,s=r.y1,a=n.angle||0;e("text-anchor",g4e[n.align]||"start"),a?(l=Kf(o,s)+" "+mF(a),(t||i)&&(l+=" "+Kf(t,i))):l=Kf(o+t,s+i),e("transform",l)},bound:SF,draw:function _4e(e,n,t){da(n,i=>{var o,s,a,l,c,u,d,r=null==i.opacity?1:i.opacity;if(!(t&&!t.intersects(i.bounds)||0===r||i.fontSize<=0||null==i.text||0===i.text.length)){if(e.font=hE(i),e.textAlign=i.align||"left",s=(o=pE(i)).x1,a=o.y1,i.angle&&(e.save(),e.translate(s,a),e.rotate(i.angle*qu),s=a=0),s+=i.dx||0,a+=(i.dy||0)+EF(i),u=qy(i),Jg(e,i),oe(u))for(c=Yu(i),l=0;l<u.length;++l)d=Xu(i,u[l]),i.fill&&sE(e,i,r)&&e.fillText(d,s,a),i.stroke&&em(e,i,r)&&e.strokeText(d,s,a),a+=c;else d=Xu(i,u),i.fill&&sE(e,i,r)&&e.fillText(d,s,a),i.stroke&&em(e,i,r)&&e.strokeText(d,s,a);i.angle&&e.restore()}})},pick:lE(function y4e(e,n,t,i,r,o){if(n.fontSize<=0)return!1;if(!n.angle)return!0;var s=pE(n),a=s.x1,l=s.y1,c=SF(Gy,n,1),u=-n.angle*qu,d=Math.cos(u),f=Math.sin(u);return c.contains(d*r-f*o+(a-d*a+f*l),f*r+d*o+(l-f*a-d*l))}),isect:function v4e(e,n){const t=SF(Gy,e,2);return Zg(n,t[0],t[1],t[2],t[3])||Zg(n,t[0],t[1],t[4],t[5])||Zg(n,t[4],t[5],t[6],t[7])||Zg(n,t[2],t[3],t[6],t[7])}},w4e=yF("trail",function vNe(e,n){return hNe.context(e)(n)},function RNe(e,n){for(var i,r,t=e.length;--t>=0;)if(!1!==e[t].defined&&(i=e[t].x-n[0])*i+(r=e[t].y-n[1])*r<(i=e[t].size||1)*i)return e[t];return null}),qo={arc:ANe,area:FNe,group:GNe,image:QNe,line:ZNe,path:t4e,rect:r4e,rule:c4e,shape:u4e,symbol:d4e,text:b4e,trail:w4e};function TF(e,n,t){var i=qo[e.mark.marktype];return i.nested&&(e=e.mark),(n||i.bound)(e.bounds||(e.bounds=new ni),e,t)}var SZ={mark:null};function TZ(e,n,t){var a,l,c,u,i=qo[e.marktype],r=i.bound,o=e.items,s=o&&o.length;if(i.nested)return s?c=o[0]:(SZ.mark=e,c=SZ),u=TF(c,r,t),n&&n.union(u)||u;if(n=n||e.bounds&&e.bounds.clear()||new ni,s)for(a=0,l=o.length;a<l;++a)n.union(TF(o[a],r,t));return e.bounds=n}const C4e=["marktype","name","role","interactive","clip","items","zindex","x","y","width","height","align","baseline","fill","fillOpacity","opacity","blend","stroke","strokeOpacity","strokeWidth","strokeCap","strokeDash","strokeDashOffset","strokeForeground","strokeOffset","startAngle","endAngle","innerRadius","outerRadius","cornerRadius","padAngle","cornerRadiusTopLeft","cornerRadiusTopRight","cornerRadiusBottomLeft","cornerRadiusBottomRight","interpolate","tension","orient","defined","url","aspect","smooth","path","scaleX","scaleY","x2","y2","size","shape","text","angle","theta","radius","dir","dx","dy","ellipsis","limit","lineBreak","lineHeight","font","fontSize","fontWeight","fontStyle","fontVariant","description","aria","ariaRole","ariaRoleDescription"];function DZ(e,n){return JSON.stringify(e,C4e,n)}function IZ(e){return MZ("string"==typeof e?JSON.parse(e):e)}function MZ(e){var i,r,o,n=e.marktype,t=e.items;if(t)for(r=0,o=t.length;r<o;++r)t[r][i=n?"mark":"group"]=e,t[r].zindex&&(t[r][i].zdirty=!0),"group"===(n||i)&&MZ(t[r]);return n&&TZ(e),e}function DF(e){arguments.length?this.root=IZ(e):(this.root=AZ({marktype:"group",name:"root",role:"frame"}),this.root.items=[new eE(this.root)])}function AZ(e,n){const t={bounds:new ni,clip:!!e.clip,group:n,interactive:!1!==e.interactive,items:[],marktype:e.marktype,name:e.name||void 0,role:e.role||void 0,zindex:e.zindex||0};return null!=e.aria&&(t.aria=e.aria),e.description&&(t.description=e.description),t}function Qu(e,n,t){return!e&&typeof document<"u"&&document.createElement&&(e=document),e?t?e.createElementNS(t,n):e.createElement(n):null}function IF(e,n){n=n.toLowerCase();for(var t=e.childNodes,i=0,r=t.length;i<r;++i)if(t[i].tagName.toLowerCase()===n)return t[i]}function di(e,n,t,i){var o,r=e.childNodes[n];return(!r||r.tagName.toLowerCase()!==t.toLowerCase())&&(o=r||null,r=Qu(e.ownerDocument,t,i),e.insertBefore(r,o)),r}function ks(e,n){for(var t=e.childNodes,i=t.length;i>n;)e.removeChild(t[--i]);return e}function kZ(e){return"mark-"+e.marktype+(e.role?" role-"+e.role:"")+(e.name?" "+e.name:"")}function gE(e,n){const t=n.getBoundingClientRect();return[e.clientX-t.left-(n.clientLeft||0),e.clientY-t.top-(n.clientTop||0)]}function Zu(e,n){this._active=null,this._handlers={},this._loader=e||ex(),this._tooltip=n||E4e}function E4e(e,n,t,i){e.element().setAttribute("title",i||"")}function Wo(e){this._el=null,this._bgcolor=null,this._loader=new rF(e)}DF.prototype={toJSON(e){return DZ(this.root,e||0)},mark(e,n,t){const i=AZ(e,n=n||this.root.items[0]);return n.items[t]=i,i.zindex&&(i.group.zdirty=!0),i}},Zu.prototype={initialize(e,n,t){return this._el=e,this._obj=t||null,this.origin(n)},element(){return this._el},canvas(){return this._el&&this._el.firstChild},origin(e){return arguments.length?(this._origin=e||[0,0],this):this._origin.slice()},scene(e){return arguments.length?(this._scene=e,this):this._scene},on(){},off(){},_handlerIndex(e,n,t){for(let i=e?e.length:0;--i>=0;)if(e[i].type===n&&(!t||e[i].handler===t))return i;return-1},handlers(e){const n=this._handlers,t=[];if(e)t.push(...n[this.eventName(e)]);else for(const i in n)t.push(...n[i]);return t},eventName(e){const n=e.indexOf(".");return n<0?e:e.slice(0,n)},handleHref(e,n,t){this._loader.sanitize(t,{context:"href"}).then(i=>{const r=new MouseEvent(e.type,e),o=Qu(null,"a");for(const s in i)o.setAttribute(s,i[s]);o.dispatchEvent(r)}).catch(()=>{})},handleTooltip(e,n,t){n&&null!=n.tooltip&&(n=function x4e(e,n,t,i){var o,s,r=e&&e.mark;if(r&&(o=qo[r.marktype]).tip){for((s=gE(n,t))[0]-=i[0],s[1]-=i[1];e=e.mark.group;)s[0]-=e.x||0,s[1]-=e.y||0;e=o.tip(r.items,s)}return e}(n,e,this.canvas(),this._origin),this._tooltip.call(this._obj,this,e,n,t&&n&&n.tooltip||null))},getItemBoundingClientRect(e){const n=this.canvas();if(!n)return;const t=n.getBoundingClientRect(),i=this._origin,r=e.bounds,o=r.width(),s=r.height();let a=r.x1+i[0]+t.left,l=r.y1+i[1]+t.top;for(;e.mark&&(e=e.mark.group);)a+=e.x||0,l+=e.y||0;return{x:a,y:l,width:o,height:s,left:a,top:l,right:a+o,bottom:l+s}}},Wo.prototype={initialize(e,n,t,i,r){return this._el=e,this.resize(n,t,i,r)},element(){return this._el},canvas(){return this._el&&this._el.firstChild},background(e){return 0===arguments.length?this._bgcolor:(this._bgcolor=e,this)},resize(e,n,t,i){return this._width=e,this._height=n,this._origin=t||[0,0],this._scale=i||1,this},dirty(){},render(e,n){const t=this;return t._call=function(){t._render(e,n)},t._call(),t._call=null,t},_render(){},renderAsync(e,n){const t=this.render(e,n);return this._ready?this._ready.then(()=>t):Promise.resolve(t)},_load(e,n){var t=this,i=t._loader[e](n);if(!t._ready){const r=t._call;t._ready=t._loader.ready().then(o=>{o&&r(),t._ready=null})}return i},sanitizeURL(e){return this._load("sanitizeURL",e)},loadImage(e){return this._load("loadImage",e)}};const OZ="dragenter",mE="dragleave",RZ="dragover",MF="pointerdown",_E="pointermove",Ky="pointerout",FZ="pointerover",AF="mousedown",NZ="mousemove",kF="mouseout",PZ="mouseover",yE="click",LZ="mousewheel",vE="touchstart",bE="touchmove",wE="touchend",OF=_E,Yy=Ky,RF=yE;function Ju(e,n){Zu.call(this,e,n),this._down=null,this._touch=null,this._first=!0,this._events={}}function $Z(e,n){(e=>e===vE||e===bE||e===wE?[vE,bE,wE]:[e])(n).forEach(t=>function F4e(e,n){const t=e.canvas();t&&!e._events[n]&&(e._events[n]=1,t.addEventListener(n,e[n]?i=>e[n](i):i=>e.fire(n,i)))}(e,t))}function Xy(e,n,t){n.forEach(i=>e.fire(i,t))}function BZ(e,n,t){return function(i){const r=this._active,o=this.pickEvent(i);o===r||((!r||!r.exit)&&Xy(this,t,i),this._active=o,Xy(this,n,i)),Xy(this,e,i)}}function VZ(e){return function(n){Xy(this,e,n),this._active=null}}pe(Ju,Zu,{initialize(e,n,t){return this._canvas=e&&IF(e,"canvas"),[yE,AF,MF,_E,Ky,mE].forEach(i=>$Z(this,i)),Zu.prototype.initialize.call(this,e,n,t)},canvas(){return this._canvas},context(){return this._canvas.getContext("2d")},events:["keydown","keypress","keyup",OZ,mE,RZ,MF,"pointerup",_E,Ky,FZ,AF,"mouseup",NZ,kF,PZ,yE,"dblclick","wheel",LZ,vE,bE,wE],DOMMouseScroll(e){this.fire(LZ,e)},pointermove:BZ([_E,NZ],[FZ,PZ],[Ky,kF]),dragover:BZ([RZ],[OZ],[mE]),pointerout:VZ([Ky,kF]),dragleave:VZ([mE]),pointerdown(e){this._down=this._active,this.fire(MF,e)},mousedown(e){this._down=this._active,this.fire(AF,e)},click(e){this._down===this._active&&(this.fire(yE,e),this._down=null)},touchstart(e){this._touch=this.pickEvent(e.changedTouches[0]),this._first&&(this._active=this._touch,this._first=!1),this.fire(vE,e,!0)},touchmove(e){this.fire(bE,e,!0)},touchend(e){this.fire(wE,e,!0),this._touch=null},fire(e,n,t){const i=t?this._touch:this._active,r=this._handlers[e];if(n.vegaType=e,e===RF&&i&&i.href?this.handleHref(n,i,i.href):(e===OF||e===Yy)&&this.handleTooltip(n,i,e!==Yy),r)for(let o=0,s=r.length;o<s;++o)r[o].handler.call(this._obj,n,i)},on(e,n){const t=this.eventName(e),i=this._handlers;return this._handlerIndex(i[t],e,n)<0&&($Z(this,e),(i[t]||(i[t]=[])).push({type:e,handler:n})),this},off(e,n){const t=this.eventName(e),i=this._handlers[t],r=this._handlerIndex(i,e,n);return r>=0&&i.splice(r,1),this},pickEvent(e){const n=gE(e,this._canvas),t=this._origin;return this.pick(this._scene,n[0],n[1],n[0]-t[0],n[1]-t[1])},pick(e,n,t,i,r){const o=this.context();return qo[e.marktype].pick.call(this,o,e,n,t,i,r)}});var P4e=function N4e(){return typeof window<"u"&&window.devicePixelRatio||1}();function Qy(e){Wo.call(this,e),this._options={},this._redraw=!1,this._dirty=new ni,this._tempb=new ni}const zZ=Wo.prototype;function FF(e,n){Zu.call(this,e,n);const t=this;t._hrefHandler=NF(t,(i,r)=>{r&&r.href&&t.handleHref(i,r,r.href)}),t._tooltipHandler=NF(t,(i,r)=>{t.handleTooltip(i,r,i.type!==Yy)})}pe(Qy,Wo,{initialize(e,n,t,i,r,o){return this._options=o||{},this._canvas=this._options.externalContext?null:Bu(1,1),e&&this._canvas&&(ks(e,0).appendChild(this._canvas),this._canvas.setAttribute("class","marks")),zZ.initialize.call(this,e,n,t,i,r)},resize(e,n,t,i){if(zZ.resize.call(this,e,n,t,i),this._canvas)!function L4e(e,n,t,i,r,o){const s=typeof HTMLElement<"u"&&e instanceof HTMLElement&&null!=e.parentNode,a=e.getContext("2d"),l=s?P4e:r;e.width=n*l,e.height=t*l;for(const c in o)a[c]=o[c];s&&1!==l&&(e.style.width=n+"px",e.style.height=t+"px"),a.pixelRatio=l,a.setTransform(l,0,0,l,l*i[0],l*i[1])}(this._canvas,this._width,this._height,this._origin,this._scale,this._options.context);else{const r=this._options.externalContext;r||re("CanvasRenderer is missing a valid canvas or context"),r.scale(this._scale,this._scale),r.translate(this._origin[0],this._origin[1])}return this._redraw=!0,this},canvas(){return this._canvas},context(){return this._options.externalContext||(this._canvas?this._canvas.getContext("2d"):null)},dirty(e){const n=this._tempb.clear().union(e.bounds);let t=e.mark.group;for(;t;)n.translate(t.x||0,t.y||0),t=t.mark.group;this._dirty.union(n)},_render(e,n){const t=this.context(),i=this._origin,r=this._width,o=this._height,s=this._dirty,a=((e,n,t)=>(new ni).set(0,0,n,t).translate(-e[0],-e[1]))(i,r,o);t.save();const l=this._redraw||s.empty()?(this._redraw=!1,a.expand(1)):function B4e(e,n,t){return n.expand(1).round(),e.pixelRatio%1&&n.scale(e.pixelRatio).round().scale(1/e.pixelRatio),n.translate(-t[0]%1,-t[1]%1),e.beginPath(),e.rect(n.x1,n.y1,n.width(),n.height()),e.clip(),n}(t,a.intersect(s),i);return this.clear(-i[0],-i[1],r,o),this.draw(t,e,l,n),t.restore(),s.clear(),this},draw(e,n,t,i){if("group"!==n.marktype&&null!=i&&!i.includes(n.marktype))return;const r=qo[n.marktype];n.clip&&function NNe(e,n){var t=n.clip;e.save(),ct(t)?(e.beginPath(),t(e),e.clip()):mZ(e,n.group)}(e,n),r.draw.call(this,e,n,t,i),n.clip&&e.restore()},clear(e,n,t,i){const r=this._options,o=this.context();"pdf"!==r.type&&!r.externalContext&&o.clearRect(e,n,t,i),null!=this._bgcolor&&(o.fillStyle=this._bgcolor,o.fillRect(e,n,t,i))}});const NF=(e,n)=>t=>{let i=t.target.__data__;i=Array.isArray(i)?i[0]:i,t.vegaType=t.type,n.call(e._obj,t,i)};pe(FF,Zu,{initialize(e,n,t){let i=this._svg;return i&&(i.removeEventListener(RF,this._hrefHandler),i.removeEventListener(OF,this._tooltipHandler),i.removeEventListener(Yy,this._tooltipHandler)),this._svg=i=e&&IF(e,"svg"),i&&(i.addEventListener(RF,this._hrefHandler),i.addEventListener(OF,this._tooltipHandler),i.addEventListener(Yy,this._tooltipHandler)),Zu.prototype.initialize.call(this,e,n,t)},canvas(){return this._svg},on(e,n){const t=this.eventName(e),i=this._handlers;if(this._handlerIndex(i[t],e,n)<0){const o={type:e,handler:n,listener:NF(this,n)};(i[t]||(i[t]=[])).push(o),this._svg&&this._svg.addEventListener(t,o.listener)}return this},off(e,n){const t=this.eventName(e),i=this._handlers[t],r=this._handlerIndex(i,e,n);return r>=0&&(this._svg&&this._svg.removeEventListener(t,i[r].listener),i.splice(r,1)),this}});const UZ="aria-hidden",PF="aria-label",LF="role",$F="aria-roledescription",HZ="graphics-object",BF="graphics-symbol",jZ=(e,n,t)=>({[LF]:e,[$F]:n,[PF]:t||void 0}),V4e=oa(["axis-domain","axis-grid","axis-label","axis-tick","axis-title","legend-band","legend-entry","legend-gradient","legend-label","legend-title","legend-symbol","title"]),qZ={axis:{desc:"axis",caption:function H4e(e){const n=e.datum,t=e.orient,i=n.title?XZ(e):null,r=e.context,o=r.scales[n.scale].value,s=r.dataflow.locale(),a=o.type;return("left"===t||"right"===t?"Y":"X")+"-axis"+(i?` titled '${i}'`:"")+` for a ${Kg(a)?"discrete":a} scale with ${jQ(s,o,e)}`}},legend:{desc:"legend",caption:function j4e(e){const n=e.datum,t=n.title?XZ(e):null,i=`${n.type||""} legend`.trim(),r=n.scales,o=Object.keys(r),s=e.context,a=s.scales[r[o[0]]].value,l=s.dataflow.locale();return function W4e(e){return e.length?e[0].toUpperCase()+e.slice(1):e}(i)+(t?` titled '${t}'`:"")+` for ${function q4e(e){return e=e.map(n=>n+("fill"===n||"stroke"===n?" color":"")),e.length<2?e[0]:e.slice(0,-1).join(", ")+" and "+Tt(e)}(o)} with ${jQ(l,a,e)}`}},"title-text":{desc:"title",caption:e=>`Title text '${YZ(e)}'`},"title-subtitle":{desc:"subtitle",caption:e=>`Subtitle text '${YZ(e)}'`}},WZ={ariaRole:LF,ariaRoleDescription:$F,description:PF};function GZ(e,n){const t=!1===n.aria;if(e(UZ,t||void 0),t||null==n.description)for(const i in WZ)e(WZ[i],void 0);else{const i=n.mark.marktype;e(PF,n.description),e(LF,n.ariaRole||("group"===i?HZ:BF)),e($F,n.ariaRoleDescription||`${i} mark`)}}function KZ(e){return!1===e.aria?{[UZ]:!0}:V4e[e.role]?null:qZ[e.role]?function U4e(e,n){try{const t=e.items[0];return jZ(n.role||BF,n.desc,t.description||(n.caption||(()=>""))(t))}catch{return null}}(e,qZ[e.role]):function z4e(e){const n=e.marktype,t="group"===n||"text"===n||e.items.some(i=>null!=i.description&&!1!==i.aria);return jZ(t?HZ:BF,`${n} mark container`,e.description)}(e)}function YZ(e){return Ce(e.text).join(" ")}function XZ(e){try{return Ce(Tt(e.items).items[0].text).join(" ")}catch{return null}}const QZ=e=>(e+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),G4e=e=>QZ(e).replace(/"/g,"&quot;").replace(/\t/g,"&#x9;").replace(/\n/g,"&#xA;").replace(/\r/g,"&#xD;");function VF(){let e="",n="",t="";const i=[],r=()=>n=t="",s=(l,c)=>(null!=c&&(n+=` ${l}="${G4e(c)}"`),a),a={open(l){(l=>{n&&(e+=`${n}>${t}`,r()),i.push(l)})(l),n="<"+l;for(var c=arguments.length,u=new Array(c>1?c-1:0),d=1;d<c;d++)u[d-1]=arguments[d];for(const f of u)for(const h in f)s(h,f[h]);return a},close(){const l=i.pop();return e+=n?n+(t?`>${t}</${l}>`:"/>"):`</${l}>`,r(),a},attr:s,text:l=>(t+=QZ(l),a),toString:()=>e};return a}const ZZ=e=>JZ(VF(),e)+"";function JZ(e,n){if(e.open(n.tagName),n.hasAttributes()){const t=n.attributes,i=t.length;for(let r=0;r<i;++r)e.attr(t[r].name,t[r].value)}if(n.hasChildNodes()){const t=n.childNodes;for(const i of t)3===i.nodeType?e.text(i.nodeValue):JZ(e,i)}return e.close()}const CE={fill:"fill",fillOpacity:"fill-opacity",stroke:"stroke",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",strokeCap:"stroke-linecap",strokeJoin:"stroke-linejoin",strokeDash:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeMiterLimit:"stroke-miterlimit",opacity:"opacity"},xE={blend:"mix-blend-mode"},eJ={fill:"none","stroke-miterlimit":10},tJ="http://www.w3.org/2000/xmlns/",fi=jy.xmlns;function EE(e){Wo.call(this,e),this._dirtyID=0,this._dirty=[],this._svg=null,this._root=null,this._defs=null}const zF=Wo.prototype;function nJ(e,n){for(;e&&e.dirty!==n;e=e.mark.group){if(e.dirty=n,!e.mark||e.mark.dirty===n)return;e.mark.dirty=n}}function K4e(e,n,t){let i,r,o;if("radial"===n.gradient){let s=di(e,t++,"pattern",fi);ed(s,{id:"p_"+n.id,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),s=di(s,0,"rect",fi),ed(s,{width:1,height:1,fill:`url(${rJ()}#${n.id})`}),ed(e=di(e,t++,"radialGradient",fi),{id:n.id,fx:n.x1,fy:n.y1,fr:n.r1,cx:n.x2,cy:n.y2,r:n.r2})}else ed(e=di(e,t++,"linearGradient",fi),{id:n.id,x1:n.x1,x2:n.x2,y1:n.y1,y2:n.y2});for(i=0,r=n.stops.length;i<r;++i)o=di(e,i,"stop",fi),o.setAttribute("offset",n.stops[i].offset),o.setAttribute("stop-color",n.stops[i].color);return ks(e,i),t}function Y4e(e,n,t){let i;return(e=di(e,t,"clipPath",fi)).setAttribute("id",n.id),n.path?(i=di(e,0,"path",fi),i.setAttribute("d",n.path)):(i=di(e,0,"rect",fi),ed(i,{x:0,y:0,width:n.width,height:n.height})),ks(e,1),t+1}function iJ(e,n,t,i,r){let s,o=e._svg;if(!o&&(s=n.ownerDocument,o=Qu(s,i,fi),e._svg=o,e.mark&&(o.__data__=e,o.__values__={fill:"default"},"g"===i))){const a=Qu(s,"path",fi);o.appendChild(a),a.__data__=e;const l=Qu(s,"g",fi);o.appendChild(l),l.__data__=e;const c=Qu(s,"path",fi);o.appendChild(c),c.__data__=e,c.__values__={fill:"default"}}return(o.ownerSVGElement!==r||function Q4e(e,n){return e.parentNode&&e.parentNode.childNodes.length>1&&e.previousSibling!=n}(o,t))&&n.insertBefore(o,t?t.nextSibling:n.firstChild),o}pe(EE,Wo,{initialize(e,n,t,i,r){return this._defs={},this._clearDefs(),e&&(this._svg=di(e,0,"svg",fi),this._svg.setAttributeNS(tJ,"xmlns",fi),this._svg.setAttributeNS(tJ,"xmlns:xlink",jy["xmlns:xlink"]),this._svg.setAttribute("version",jy.version),this._svg.setAttribute("class","marks"),ks(e,1),this._root=di(this._svg,0,"g",fi),ed(this._root,eJ),ks(this._svg,1)),this.background(this._bgcolor),zF.initialize.call(this,e,n,t,i,r)},background(e){return arguments.length&&this._svg&&this._svg.style.setProperty("background-color",e),zF.background.apply(this,arguments)},resize(e,n,t,i){return zF.resize.call(this,e,n,t,i),this._svg&&(ed(this._svg,{width:this._width*this._scale,height:this._height*this._scale,viewBox:`0 0 ${this._width} ${this._height}`}),this._root.setAttribute("transform",`translate(${this._origin})`)),this._dirty=[],this},canvas(){return this._svg},svg(){const e=this._svg,n=this._bgcolor;if(!e)return null;let t;n&&(e.removeAttribute("style"),t=di(e,0,"rect",fi),ed(t,{width:this._width,height:this._height,fill:n}));const i=ZZ(e);return n&&(e.removeChild(t),this._svg.style.setProperty("background-color",n)),i},_render(e,n){return this._dirtyCheck()&&(this._dirtyAll&&this._clearDefs(),this.mark(this._root,e,void 0,n),ks(this._root,1)),this.defs(),this._dirty=[],++this._dirtyID,this},dirty(e){e.dirty!==this._dirtyID&&(e.dirty=this._dirtyID,this._dirty.push(e))},isDirty(e){return this._dirtyAll||!e._svg||!e._svg.ownerSVGElement||e.dirty===this._dirtyID},_dirtyCheck(){this._dirtyAll=!0;const e=this._dirty;if(!e.length||!this._dirtyID)return!0;const n=++this._dirtyID;let t,i,r,o,s,a,l;for(s=0,a=e.length;s<a;++s)if(t=e[s],i=t.mark,i.marktype!==r&&(r=i.marktype,o=qo[r]),i.zdirty&&i.dirty!==n&&(this._dirtyAll=!1,nJ(t,n),i.items.forEach(c=>{c.dirty=n})),!i.zdirty){if(t.exit){o.nested&&i.items.length?(l=i.items[0],l._svg&&this._update(o,l._svg,l)):t._svg&&(l=t._svg.parentNode,l&&l.removeChild(t._svg)),t._svg=null;continue}t=o.nested?i.items[0]:t,t._update!==n&&(t._svg&&t._svg.ownerSVGElement?this._update(o,t._svg,t):(this._dirtyAll=!1,nJ(t,n)),t._update=n)}return!this._dirtyAll},mark(e,n,t,i){if(!this.isDirty(n))return n._svg;const r=this._svg,o=n.marktype,s=qo[o],a=!1===n.interactive?"none":null,l="g"===s.tag,c=iJ(n,e,t,"g",r);if("group"!==o&&null!=i&&!i.includes(o))return ks(c,0),n._svg;c.setAttribute("class",kZ(n));const u=KZ(n);for(const p in u)Ar(c,p,u[p]);l||Ar(c,"pointer-events",a),Ar(c,"clip-path",n.clip?iF(this,n,n.group):null);let d=null,f=0;const h=p=>{const g=this.isDirty(p),m=iJ(p,c,d,s.tag,r);g&&(this._update(s,m,p),l&&function X4e(e,n,t,i){n=n.lastChild.previousSibling;let r,o=0;da(t,s=>{r=e.mark(n,s,r,i),++o}),ks(n,1+o)}(this,m,p,i)),d=m,++f};return s.nested?n.items.length&&h(n.items[0]):da(n,h),ks(c,f),c},_update(e,n,t){Dc=n,cr=n.__values__,GZ(Jy,t),e.attr(Jy,t,this);const i=Z4e[e.type];i&&i.call(this,e,n,t),Dc&&this.style(Dc,t)},style(e,n){if(null!=n){for(const t in CE){let i="font"===t?Wy(n):n[t];if(i===cr[t])continue;const r=CE[t];null==i?e.removeAttribute(r):(QR(i)&&(i=WQ(i,this._defs.gradient,rJ())),e.setAttribute(r,i+"")),cr[t]=i}for(const t in xE)SE(e,xE[t],n[t])}},defs(){const e=this._svg,n=this._defs;let t=n.el,i=0;for(const r in n.gradient)t||(n.el=t=di(e,1,"defs",fi)),i=K4e(t,n.gradient[r],i);for(const r in n.clipping)t||(n.el=t=di(e,1,"defs",fi)),i=Y4e(t,n.clipping[r],i);t&&(0===i?(e.removeChild(t),n.el=null):ks(t,i))},_clearDefs(){const e=this._defs;e.gradient={},e.clipping={}}});let Dc=null,cr=null;const Z4e={group(e,n,t){const i=Dc=n.childNodes[2];cr=i.__values__,e.foreground(Jy,t,this),cr=n.__values__,Dc=n.childNodes[1],e.content(Jy,t,this);const r=Dc=n.childNodes[0];e.background(Jy,t,this);const o=!1===t.mark.interactive?"none":null;if(o!==cr.events&&(Ar(i,"pointer-events",o),Ar(r,"pointer-events",o),cr.events=o),t.strokeForeground&&t.stroke){const s=t.fill;Ar(i,"display",null),this.style(r,t),Ar(r,"stroke",null),s&&(t.fill=null),cr=i.__values__,this.style(i,t),s&&(t.fill=s),Dc=null}else Ar(i,"display","none")},image(e,n,t){!1===t.smooth?(SE(n,"image-rendering","optimizeSpeed"),SE(n,"image-rendering","pixelated")):SE(n,"image-rendering",null)},text(e,n,t){const i=qy(t);let r,o,s,a;oe(i)?(o=i.map(l=>Xu(t,l)),r=o.join("\n"),r!==cr.text&&(ks(n,0),s=n.ownerDocument,a=Yu(t),o.forEach((l,c)=>{const u=Qu(s,"tspan",fi);u.__data__=t,u.textContent=l,c&&(u.setAttribute("x",0),u.setAttribute("dy",a)),n.appendChild(u)}),cr.text=r)):(o=Xu(t,i),o!==cr.text&&(n.textContent=o,cr.text=o)),Ar(n,"font-family",Wy(t)),Ar(n,"font-size",yl(t)+"px"),Ar(n,"font-style",t.fontStyle),Ar(n,"font-variant",t.fontVariant),Ar(n,"font-weight",t.fontWeight)}};function Jy(e,n,t){n!==cr[e]&&(t?function J4e(e,n,t,i){null!=t?e.setAttributeNS(i,n,t):e.removeAttributeNS(i,n)}(Dc,e,n,t):Ar(Dc,e,n),cr[e]=n)}function SE(e,n,t){t!==cr[n]&&(null==t?e.style.removeProperty(n):e.style.setProperty(n,t+""),cr[n]=t)}function ed(e,n){for(const t in n)Ar(e,t,n[t])}function Ar(e,n,t){null!=t?e.setAttribute(n,t):e.removeAttribute(n)}function rJ(){let e;return typeof window>"u"?"":(e=window.location).hash?e.href.slice(0,-e.hash.length):e.href}function UF(e){Wo.call(this,e),this._text=null,this._defs={gradient:{},clipping:{}}}pe(UF,Wo,{svg(){return this._text},_render(e){const n=VF();n.open("svg",ut({},jy,{class:"marks",width:this._width*this._scale,height:this._height*this._scale,viewBox:`0 0 ${this._width} ${this._height}`}));const t=this._bgcolor;return t&&"transparent"!==t&&"none"!==t&&n.open("rect",{width:this._width,height:this._height,fill:t}).close(),n.open("g",eJ,{transform:"translate("+this._origin+")"}),this.mark(n,e),n.close(),this.defs(n),this._text=n.close()+"",this},mark(e,n){const t=qo[n.marktype],i=t.tag,r=[GZ,t.attr];e.open("g",{class:kZ(n),"clip-path":n.clip?iF(this,n,n.group):null},KZ(n),{"pointer-events":"g"!==i&&!1===n.interactive?"none":null});const o=s=>{const a=this.href(s);if(a&&e.open("a",a),e.open(i,this.attr(n,s,r,"g"!==i?i:null)),"text"===i){const l=qy(s);if(oe(l)){const c={x:0,dy:Yu(s)};for(let u=0;u<l.length;++u)e.open("tspan",u?c:null).text(Xu(s,l[u])).close()}else e.text(Xu(s,l))}else if("g"===i){const l=s.strokeForeground,c=s.fill,u=s.stroke;l&&u&&(s.stroke=null),e.open("path",this.attr(n,s,t.background,"bgrect")).close(),e.open("g",this.attr(n,s,t.content)),da(s,d=>this.mark(e,d)),e.close(),l&&u?(c&&(s.fill=null),s.stroke=u,e.open("path",this.attr(n,s,t.foreground,"bgrect")).close(),c&&(s.fill=c)):e.open("path",this.attr(n,s,t.foreground,"bgfore")).close()}e.close(),a&&e.close()};return t.nested?n.items&&n.items.length&&o(n.items[0]):da(n,o),e.close()},href(e){const n=e.href;let t;if(n){if(t=this._hrefs&&this._hrefs[n])return t;this.sanitizeURL(n).then(i=>{i["xlink:href"]=i.href,i.href=null,(this._hrefs||(this._hrefs={}))[n]=i})}return null},attr(e,n,t,i){const r={},o=(s,a,l,c)=>{r[c||s]=a};return Array.isArray(t)?t.forEach(s=>s(o,n,this)):t(o,n,this),i&&function ePe(e,n,t,i,r){let o;if(null==n||("bgrect"===i&&!1===t.interactive&&(e["pointer-events"]="none"),"bgfore"===i&&(!1===t.interactive&&(e["pointer-events"]="none"),e.display="none",null!==n.fill)))return e;"image"===i&&!1===n.smooth&&(o=["image-rendering: optimizeSpeed;","image-rendering: pixelated;"]),"text"===i&&(e["font-family"]=Wy(n),e["font-size"]=yl(n)+"px",e["font-style"]=n.fontStyle,e["font-variant"]=n.fontVariant,e["font-weight"]=n.fontWeight);for(const s in CE){let a=n[s];const l=CE[s];"transparent"===a&&("fill"===l||"stroke"===l)||null!=a&&(QR(a)&&(a=WQ(a,r.gradient,"")),e[l]=a)}for(const s in xE){const a=n[s];null!=a&&(o=o||[],o.push(`${xE[s]}: ${a};`))}o&&(e.style=o.join(" "))}(r,n,e,i,this._defs),r},defs(e){const n=this._defs.gradient,t=this._defs.clipping;if(Object.keys(n).length+Object.keys(t).length!==0){e.open("defs");for(const r in n){const o=n[r],s=o.stops;"radial"===o.gradient?(e.open("pattern",{id:"p_"+r,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),e.open("rect",{width:"1",height:"1",fill:"url(#"+r+")"}).close(),e.close(),e.open("radialGradient",{id:r,fx:o.x1,fy:o.y1,fr:o.r1,cx:o.x2,cy:o.y2,r:o.r2})):e.open("linearGradient",{id:r,x1:o.x1,x2:o.x2,y1:o.y1,y2:o.y2});for(let a=0;a<s.length;++a)e.open("stop",{offset:s[a].offset,"stop-color":s[a].color}).close();e.close()}for(const r in t){const o=t[r];e.open("clipPath",{id:r}),o.path?e.open("path",{d:o.path}).close():e.open("rect",{x:0,y:0,width:o.width,height:o.height}).close(),e.close()}e.close()}}});const fa={svgMarkTypes:["text"],svgOnTop:!0,debug:!1};function tPe(e){fa.svgMarkTypes=e.svgMarkTypes??["text"],fa.svgOnTop=e.svgOnTop??!0,fa.debug=e.debug??!1}function TE(e){Wo.call(this,e),this._svgRenderer=new EE(e),this._canvasRenderer=new Qy(e)}const oJ=Wo.prototype;function HF(e,n){Ju.call(this,e,n)}pe(TE,Wo,{initialize(e,n,t,i,r){this._root_el=di(e,0,"div");const o=di(this._root_el,0,"div"),s=di(this._root_el,1,"div");return this._root_el.style.position="relative",fa.debug||(o.style.height="100%",s.style.position="absolute",s.style.top="0",s.style.left="0",s.style.height="100%",s.style.width="100%"),this._svgEl=fa.svgOnTop?s:o,this._canvasEl=fa.svgOnTop?o:s,this._svgEl.style.pointerEvents="none",this._canvasRenderer.initialize(this._canvasEl,n,t,i,r),this._svgRenderer.initialize(this._svgEl,n,t,i,r),oJ.initialize.call(this,e,n,t,i,r)},dirty(e){return fa.svgMarkTypes.includes(e.mark.marktype)?this._svgRenderer.dirty(e):this._canvasRenderer.dirty(e),this},_render(e,n){const i=(n??["arc","area","image","line","path","rect","rule","shape","symbol","text","trail"]).filter(r=>!fa.svgMarkTypes.includes(r));this._svgRenderer.render(e,fa.svgMarkTypes),this._canvasRenderer.render(e,i)},resize(e,n,t,i){return oJ.resize.call(this,e,n,t,i),this._svgRenderer.resize(e,n,t,i),this._canvasRenderer.resize(e,n,t,i),this},background(e){return fa.svgOnTop?this._canvasRenderer.background(e):this._svgRenderer.background(e),this}}),pe(HF,Ju,{initialize(e,n,t){const i=di(di(e,0,"div"),fa.svgOnTop?0:1,"div");return Ju.prototype.initialize.call(this,i,n,t)}});const td={Canvas:"canvas",PNG:"png",SVG:"svg",Hybrid:"hybrid",None:"none"},Yf={};function DE(e,n){return e=String(e||"").toLowerCase(),arguments.length>1?(Yf[e]=n,this):Yf[e]}function dJ(e,n,t){const i=[],r=(new ni).union(n),o=e.marktype;return o?fJ(e,r,t,i):"group"===o?hJ(e,r,t,i):re("Intersect scene must be mark node or group item.")}function fJ(e,n,t,i){if(function nPe(e,n,t){return e.bounds&&n.intersects(e.bounds)&&("group"===e.marktype||!1!==e.interactive&&(!t||t(e)))}(e,n,t)){const r=e.items,o=e.marktype,s=r.length;let a=0;if("group"===o)for(;a<s;++a)hJ(r[a],n,t,i);else for(const l=qo[o].isect;a<s;++a){const c=r[a];pJ(c,n,l)&&i.push(c)}}return i}function hJ(e,n,t,i){t&&t(e.mark)&&pJ(e,n,qo.group.isect)&&i.push(e);const r=e.items,o=r&&r.length;if(o){const s=e.x||0,a=e.y||0;n.translate(-s,-a);for(let l=0;l<o;++l)fJ(r[l],n,t,i);n.translate(s,a)}return i}function pJ(e,n,t){const i=e.bounds;return n.encloses(i)||n.intersects(i)&&t(e,n)}Yf.canvas=Yf.png={renderer:Qy,headless:Qy,handler:Ju},Yf.svg={renderer:EE,headless:UF,handler:FF},Yf.hybrid={renderer:TE,headless:TE,handler:HF},Yf.none={};const jF=new ni;function gJ(e){const n=e.clip;if(ct(n))n(zy(jF.clear()));else{if(!n)return;jF.set(0,0,e.group.width,e.group.height)}e.bounds.intersect(jF)}const iPe=1e-9;function qF(e,n,t){return e===n||("path"===t?mJ(e,n):e instanceof Date&&n instanceof Date?+e==+n:Ft(e)&&Ft(n)?Math.abs(e-n)<=iPe:e&&n&&(Ee(e)||Ee(n))?function rPe(e,n){var r,o,t=Object.keys(e),i=Object.keys(n);if(t.length!==i.length)return!1;for(t.sort(),i.sort(),o=t.length-1;o>=0;o--)if(t[o]!=i[o])return!1;for(o=t.length-1;o>=0;o--)if(!qF(e[r=t[o]],n[r],r))return!1;return typeof e==typeof n}(e,n):e==n)}function mJ(e,n){return qF(Yg(e),Yg(n))}function oPe(){iZ(),function IFe(){qQ=0}()}const tm="top",ha="left",pa="right",nd="bottom",WF="start",GF="middle",kr="end",uPe="x",dPe="y",IE="group",KF="axis",YF="title",XF="legend",_J="row-header",yJ="row-footer",vJ="row-title",bJ="column-header",wJ="column-footer",CJ="column-title",QF="none",ME="all",ZF="each",JF="flush",id="column",rd="row";function TJ(e){Z.call(this,null,e)}function AE(e,n,t){return n(e.bounds.clear(),e,t)}pe(TJ,Z,{transform(e,n){const t=n.dataflow,i=e.mark,r=i.marktype,o=qo[r],s=o.bound;let l,a=i.bounds;if(o.nested)i.items.length&&t.dirty(i.items[0]),a=AE(i,s),i.items.forEach(c=>{c.bounds.clear().union(a)});else if(r===IE||e.modified())switch(n.visit(n.MOD,c=>t.dirty(c)),a.clear(),i.items.forEach(c=>a.union(AE(c,s))),i.role){case KF:case XF:case YF:n.reflow()}else l=n.changed(n.REM),n.visit(n.ADD,c=>{a.union(AE(c,s))}),n.visit(n.MOD,c=>{l=l||a.alignsWith(c.bounds),t.dirty(c),a.union(AE(c,s))}),l&&(a.clear(),i.items.forEach(c=>a.union(c.bounds)));return gJ(i),n.modifies("bounds")}});const DJ=":vega_identifier:";function eN(e){Z.call(this,0,e)}function IJ(e){Z.call(this,null,e)}function MJ(e){Z.call(this,null,e)}eN.Definition={type:"Identifier",metadata:{modifies:!0},params:[{name:"as",type:"string",required:!0}]},pe(eN,Z,{transform(e,n){const t=function _Pe(e){return e._signals[DJ]||(e._signals[DJ]=e.add(0))}(n.dataflow),i=e.as;let r=t.value;return n.visit(n.ADD,o=>o[i]=o[i]||++r),t.set(this.value=r),n}}),pe(IJ,Z,{transform(e,n){let t=this.value;t||(t=n.dataflow.scenegraph().mark(e.markdef,function yPe(e){const n=e.groups,t=e.parent;return n&&1===n.size?n.get(Object.keys(n.object)[0]):n&&t?n.lookup(t):null}(e),e.index),t.group.context=e.context,e.context.group||(e.context.group=t.group),t.source=this.source,t.clip=e.clip,t.interactive=e.interactive,this.value=t);const i=t.marktype===IE?eE:Jx;return n.visit(n.ADD,r=>i.call(r,t)),(e.modified("clip")||e.modified("interactive"))&&(t.clip=e.clip,t.interactive=!!e.interactive,t.zdirty=!0,n.reflow()),t.items=n.source,n}});const AJ={parity:e=>e.filter((n,t)=>t%2?n.opacity=0:1),greedy:(e,n)=>{let t;return e.filter((i,r)=>r&&kJ(t.bounds,i.bounds,n)?i.opacity=0:(t=i,1))}},kJ=(e,n,t)=>t>Math.max(n.x1-e.x2,e.x1-n.x2,n.y1-e.y2,e.y1-n.y2),OJ=(e,n)=>{for(var o,t=1,i=e.length,r=e[0].bounds;t<i;r=o,++t)if(kJ(r,o=e[t].bounds,n))return!0},vPe=e=>{const n=e.bounds;return n.width()>1&&n.height()>1},RJ=e=>(e.forEach(n=>n.opacity=1),e),FJ=(e,n)=>e.reflow(n.modified()).modifies("opacity");function NJ(e){Z.call(this,null,e)}pe(MJ,Z,{transform(e,n){const t=AJ[e.method]||AJ.parity,i=e.separation||0;let o,s,r=n.materialize(n.SOURCE).source;if(!r||!r.length)return;if(!e.method)return e.modified("method")&&(RJ(r),n=FJ(n,e)),n;if(r=r.filter(vPe),!r.length)return;if(e.sort&&(r=r.slice().sort(e.sort)),o=RJ(r),n=FJ(n,e),o.length>=3&&OJ(o,i)){do{o=t(o,i)}while(o.length>=3&&OJ(o,i));o.length<3&&!Tt(r).opacity&&(o.length>1&&(Tt(o).opacity=0),Tt(r).opacity=1)}e.boundScale&&e.boundTolerance>=0&&(s=((e,n,t)=>{var i=e.range(),r=new ni;return n===tm||n===nd?r.set(i[0],-1/0,i[1],1/0):r.set(-1/0,i[0],1/0,i[1]),r.expand(t||1),o=>r.encloses(o.bounds)})(e.boundScale,e.boundOrient,+e.boundTolerance),r.forEach(l=>{s(l)||(l.opacity=0)}));const a=o[0].mark.bounds.clear();return r.forEach(l=>{l.opacity&&a.union(l.bounds)}),n}}),pe(NJ,Z,{transform(e,n){const t=n.dataflow;if(n.visit(n.ALL,i=>t.dirty(i)),n.fields&&n.fields.zindex){const i=n.source&&n.source[0];i&&(i.mark.zdirty=!0)}}});const ur=new ni;function nm(e,n,t){return e[n]===t?0:(e[n]=t,1)}function wPe(e){var n=e.items[0].orient;return n===ha||n===pa}function xPe(e,n,t,i){var b,w,r=n.items[0],o=r.datum,s=null!=r.translate?r.translate:.5,a=r.orient,l=function CPe(e){let n=+e.grid;return[e.ticks?n++:-1,e.labels?n++:-1,n+ +e.domain]}(o),c=r.range,u=r.offset,d=r.position,f=r.minExtent,h=r.maxExtent,p=o.title&&r.items[l[2]].items[0],g=r.titlePadding,m=r.bounds,_=p&&xF(p),y=0,v=0;switch(ur.clear().union(m),m.clear(),(b=l[0])>-1&&m.union(r.items[b].bounds),(b=l[1])>-1&&m.union(r.items[b].bounds),a){case tm:y=d||0,v=-u,w=Math.max(f,Math.min(h,-m.y1)),m.add(0,-w).add(c,0),p&&kE(e,p,w,g,_,0,-1,m);break;case ha:y=-u,v=d||0,w=Math.max(f,Math.min(h,-m.x1)),m.add(-w,0).add(0,c),p&&kE(e,p,w,g,_,1,-1,m);break;case pa:y=t+u,v=d||0,w=Math.max(f,Math.min(h,m.x2)),m.add(0,0).add(w,c),p&&kE(e,p,w,g,_,1,1,m);break;case nd:y=d||0,v=i+u,w=Math.max(f,Math.min(h,m.y2)),m.add(0,0).add(c,w),p&&kE(e,p,w,g,0,0,1,m);break;default:y=r.x,v=r.y}return Tc(m.translate(y,v),r),nm(r,"x",y+s)|nm(r,"y",v+s)&&(r.bounds=ur,e.dirty(r),r.bounds=m,e.dirty(r)),r.mark.bounds.clear().union(m)}function kE(e,n,t,i,r,o,s,a){const l=n.bounds;if(n.auto){const c=s*(t+r+i);let u=0,d=0;e.dirty(n),o?u=(n.x||0)-(n.x=c):d=(n.y||0)-(n.y=c),n.mark.bounds.clear().union(l.translate(-u,-d)),e.dirty(n)}a.union(l)}const PJ=(e,n)=>Math.floor(Math.min(e,n)),LJ=(e,n)=>Math.ceil(Math.max(e,n));function SPe(e){return(new ni).set(0,0,e.width||0,e.height||0)}function TPe(e){const n=e.bounds.clone();return n.empty()?n.set(0,0,0,0):n.translate(-(e.x||0),-(e.y||0))}function Sn(e,n,t){return(Ee(e)?e[n]:e)??(void 0!==t?t:0)}function $J(e){return e<0?Math.ceil(-e):0}function BJ(e,n,t){var x,C,S,A,M,N,V,P,E,D,I,i=!t.nodirty,r=t.bounds===JF?SPe:TPe,o=ur.set(0,0,0,0),s=Sn(t.align,id),a=Sn(t.align,rd),l=Sn(t.padding,id),c=Sn(t.padding,rd),u=t.columns||n.length,d=u<=0?1:Math.ceil(n.length/u),f=n.length,h=Array(f),p=Array(u),g=0,m=Array(f),_=Array(d),y=0,v=Array(f),b=Array(f),w=Array(f);for(C=0;C<u;++C)p[C]=0;for(C=0;C<d;++C)_[C]=0;for(C=0;C<f;++C)M=w[C]=r(N=n[C]),N.x=N.x||0,v[C]=0,N.y=N.y||0,b[C]=0,S=C%u,A=~~(C/u),g=Math.max(g,V=Math.ceil(M.x2)),y=Math.max(y,P=Math.ceil(M.y2)),p[S]=Math.max(p[S],V),_[A]=Math.max(_[A],P),h[C]=l+$J(M.x1),m[C]=c+$J(M.y1),i&&e.dirty(n[C]);for(C=0;C<f;++C)C%u==0&&(h[C]=0),C<u&&(m[C]=0);if(s===ZF)for(S=1;S<u;++S){for(I=0,C=S;C<f;C+=u)I<h[C]&&(I=h[C]);for(C=S;C<f;C+=u)h[C]=I+p[S-1]}else if(s===ME){for(I=0,C=0;C<f;++C)C%u&&I<h[C]&&(I=h[C]);for(C=0;C<f;++C)C%u&&(h[C]=I+g)}else for(s=!1,S=1;S<u;++S)for(C=S;C<f;C+=u)h[C]+=p[S-1];if(a===ZF)for(A=1;A<d;++A){for(I=0,x=(C=A*u)+u;C<x;++C)I<m[C]&&(I=m[C]);for(C=A*u;C<x;++C)m[C]=I+_[A-1]}else if(a===ME){for(I=0,C=u;C<f;++C)I<m[C]&&(I=m[C]);for(C=u;C<f;++C)m[C]=I+y}else for(a=!1,A=1;A<d;++A)for(x=(C=A*u)+u;C<x;++C)m[C]+=_[A-1];for(E=0,C=0;C<f;++C)v[C]+=(E=h[C]+(C%u?E:0))-n[C].x;for(S=0;S<u;++S)for(D=0,C=S;C<f;C+=u)b[C]+=(D+=m[C])-n[C].y;if(s&&Sn(t.center,id)&&d>1)for(C=0;C<f;++C)(E=(M=s===ME?g:p[C%u])-w[C].x2-n[C].x-v[C])>0&&(v[C]+=E/2);if(a&&Sn(t.center,rd)&&1!==u)for(C=0;C<f;++C)(D=(M=a===ME?y:_[~~(C/u)])-w[C].y2-n[C].y-b[C])>0&&(b[C]+=D/2);for(C=0;C<f;++C)o.union(w[C].translate(v[C],b[C]));switch(E=Sn(t.anchor,uPe),D=Sn(t.anchor,dPe),Sn(t.anchor,id)){case kr:E-=o.width();break;case GF:E-=o.width()/2}switch(Sn(t.anchor,rd)){case kr:D-=o.height();break;case GF:D-=o.height()/2}for(E=Math.round(E),D=Math.round(D),o.clear(),C=0;C<f;++C)n[C].mark.bounds.clear();for(C=0;C<f;++C)(N=n[C]).x+=v[C]+=E,N.y+=b[C]+=D,o.union(N.mark.bounds.union(N.bounds.translate(v[C],b[C]))),i&&e.dirty(N);return o}function IPe(e,n){return"x1"===n?e.x||0:"y1"===n?e.y||0:"x2"===n?(e.x||0)+(e.width||0):"y2"===n?(e.y||0)+(e.height||0):void 0}function MPe(e,n){return e.bounds[n]}function OE(e,n,t,i,r,o,s,a,l,c,u,d,f,h){var _,y,v,b,w,x,C,S,A,p=t.length,g=0,m=0;if(!p)return g;for(_=u;_<p;_+=d)t[_]&&(g=s(g,l(t[_],c)));if(!n.length)return g;for(n.length>r&&(e.warn("Grid headers exceed limit: "+r),n=n.slice(0,r)),g+=o,y=0,b=n.length;y<b;++y)e.dirty(n[y]),n[y].mark.bounds.clear();for(_=u,y=0,b=n.length;y<b;++y,_+=d){for(w=(x=n[y]).mark.bounds,v=_;v>=0&&null==(C=t[v]);v-=f);a?(S=null==h?C.x:Math.round(C.bounds.x1+h*C.bounds.width()),A=g):(S=g,A=null==h?C.y:Math.round(C.bounds.y1+h*C.bounds.height())),w.union(x.bounds.translate(S-(x.x||0),A-(x.y||0))),x.x=S,x.y=A,e.dirty(x),m=s(m,w[c])}return m}function VJ(e,n,t,i,r,o){if(n){e.dirty(n);var s=t,a=t;i?s=Math.round(r.x1+o*r.width()):a=Math.round(r.y1+o*r.height()),n.bounds.translate(s-(n.x||0),a-(n.y||0)),n.mark.bounds.clear().union(n.bounds),n.x=s,n.y=a,e.dirty(n)}}function OPe(e,n,t,i,r,o,s){const a=function APe(e,n){const t=e[n]||{};return(i,r)=>null!=t[i]?t[i]:null!=e[i]?e[i]:r}(t,n),l=function kPe(e,n){let t=-1/0;return e.forEach(i=>{null!=i.offset&&(t=Math.max(t,i.offset))}),t>-1/0?t:n}(e,a("offset",0)),c=a("anchor",WF),u=c===kr?1:c===GF?.5:0,d={align:ZF,bounds:a("bounds",JF),columns:"vertical"===a("direction")?1:e.length,padding:a("margin",8),center:a("center"),nodirty:!0};switch(n){case ha:d.anchor={x:Math.floor(i.x1)-l,column:kr,y:u*(s||i.height()+2*i.y1),row:c};break;case pa:d.anchor={x:Math.ceil(i.x2)+l,y:u*(s||i.height()+2*i.y1),row:c};break;case tm:d.anchor={y:Math.floor(r.y1)-l,row:kr,x:u*(o||r.width()+2*r.x1),column:c};break;case nd:d.anchor={y:Math.ceil(r.y2)+l,x:u*(o||r.width()+2*r.x1),column:c};break;case"top-left":d.anchor={x:l,y:l};break;case"top-right":d.anchor={x:o-l,y:l,column:kr};break;case"bottom-left":d.anchor={x:l,y:s-l,row:kr};break;case"bottom-right":d.anchor={x:o-l,y:s-l,column:kr,row:kr}}return d}function RPe(e,n){var l,c,t=n.items[0],i=t.datum,r=t.orient,o=t.bounds,s=t.x,a=t.y;return t._bounds?t._bounds.clear().union(o):t._bounds=o.clone(),o.clear(),function NPe(e,n,t){var i=n.padding,r=i-t.x,o=i-t.y;if(n.datum.title){var s=n.items[1].items[0],a=s.anchor,l=n.titlePadding||0,c=i-s.x,u=i-s.y;switch(s.orient){case ha:r+=Math.ceil(s.bounds.width())+l;break;case pa:case nd:break;default:o+=s.bounds.height()+l}switch((r||o)&&e1(e,t,r,o),s.orient){case ha:u+=im(n,t,s,a,1,1);break;case pa:c+=im(n,t,s,kr,0,0)+l,u+=im(n,t,s,a,1,1);break;case nd:c+=im(n,t,s,a,0,0),u+=im(n,t,s,kr,-1,0,1)+l;break;default:c+=im(n,t,s,a,0,0)}(c||u)&&e1(e,s,c,u),(c=Math.round(s.bounds.x1-i))<0&&(e1(e,t,-c,0),e1(e,s,-c,0))}else(r||o)&&e1(e,t,r,o)}(e,t,t.items[0].items[0]),o=function FPe(e,n){return e.items.forEach(t=>n.union(t.bounds)),n.x1=e.padding,n.y1=e.padding,n}(t,o),l=2*t.padding,c=2*t.padding,o.empty()||(l=Math.ceil(o.width()+l),c=Math.ceil(o.height()+c)),"symbol"===i.type&&function PPe(e){const n=e.reduce((t,i)=>(t[i.column]=Math.max(i.bounds.x2-i.x,t[i.column]||0),t),{});e.forEach(t=>{t.width=n[t.column],t.height=t.bounds.y2-t.y})}(t.items[0].items[0].items[0].items),r!==QF&&(t.x=s=0,t.y=a=0),t.width=l,t.height=c,Tc(o.set(s,a,s+l,a+c),t),t.mark.bounds.clear().union(o),t}function im(e,n,t,i,r,o,s){const l=t.datum.vgrad,u=("symbol"===e.datum.type||!o&&l||s?n:n.items[0]).bounds[r?"y2":"x2"]-e.padding,d=l&&o?u:0,f=l&&o?0:u,h=r<=0?0:xF(t);return Math.round(i===WF?d:i===kr?f-h:.5*(u-h))}function e1(e,n,t,i){n.x+=t,n.y+=i,n.bounds.translate(t,i),n.mark.bounds.translate(t,i),e.dirty(n)}function zJ(e){Z.call(this,null,e)}function UJ(e,n){let t=0;if(void 0===n)for(let i of e)(i=+i)&&(t+=i);else{let i=-1;for(let r of e)(r=+n(r,++i,e))&&(t+=r)}return t}function HJ(e){Z.call(this,null,e)}function jJ(e){Z.call(this,null,e)}function zPe(){return qt({})}function qJ(e){Z.call(this,null,e)}function WJ(e){Z.call(this,[],e)}pe(zJ,Z,{transform(e,n){const t=n.dataflow;return e.mark.items.forEach(i=>{e.layout&&function DPe(e,n,t){var u,d,f,h,p,g,m,i=function EPe(e){var r,o,n=e.items,t=n.length,i=0;const s={marks:[],rowheaders:[],rowfooters:[],colheaders:[],colfooters:[],rowtitle:null,coltitle:null};for(;i<t;++i)if(o=(r=n[i]).items,r.marktype===IE)switch(r.role){case KF:case XF:case YF:break;case _J:s.rowheaders.push(...o);break;case yJ:s.rowfooters.push(...o);break;case bJ:s.colheaders.push(...o);break;case wJ:s.colfooters.push(...o);break;case vJ:s.rowtitle=o[0];break;case CJ:s.coltitle=o[0];break;default:s.marks.push(...o)}return s}(n),r=i.marks,o=t.bounds===JF?IPe:MPe,s=t.offset,a=t.columns||r.length,l=a<=0?1:Math.ceil(r.length/a),c=l*a;const _=BJ(e,r,t);_.empty()&&_.set(0,0,0,0),i.rowheaders&&(g=Sn(t.headerBand,rd,null),u=OE(e,i.rowheaders,r,0,l,-Sn(s,"rowHeader"),PJ,0,o,"x1",0,a,1,g)),i.colheaders&&(g=Sn(t.headerBand,id,null),d=OE(e,i.colheaders,r,0,a,-Sn(s,"columnHeader"),PJ,1,o,"y1",0,1,a,g)),i.rowfooters&&(g=Sn(t.footerBand,rd,null),f=OE(e,i.rowfooters,r,0,l,Sn(s,"rowFooter"),LJ,0,o,"x2",a-1,a,1,g)),i.colfooters&&(g=Sn(t.footerBand,id,null),h=OE(e,i.colfooters,r,0,a,Sn(s,"columnFooter"),LJ,1,o,"y2",c-a,1,a,g)),i.rowtitle&&(p=Sn(t.titleAnchor,rd),m=Sn(s,"rowTitle"),m=p===kr?f+m:u-m,g=Sn(t.titleBand,rd,.5),VJ(e,i.rowtitle,m,0,_,g)),i.coltitle&&(p=Sn(t.titleAnchor,id),m=Sn(s,"columnTitle"),m=p===kr?h+m:d-m,g=Sn(t.titleBand,id,.5),VJ(e,i.coltitle,m,1,_,g))}(t,i,e.layout),function BPe(e,n,t){var u,d,f,p,g,i=n.items,r=Math.max(0,n.width||0),o=Math.max(0,n.height||0),s=(new ni).set(0,0,r,o),a=s.clone(),l=s.clone(),c=[];for(p=0,g=i.length;p<g;++p)switch(d=i[p],d.role){case KF:(wPe(d)?a:l).union(xPe(e,d,r,o));break;case YF:u=d;break;case XF:c.push(RPe(e,d));break;case"frame":case"scope":case _J:case yJ:case vJ:case bJ:case wJ:case CJ:a.union(d.bounds),l.union(d.bounds);break;default:s.union(d.bounds)}if(c.length){const m={};c.forEach(_=>{(f=_.orient||pa)!==QF&&(m[f]||(m[f]=[])).push(_)});for(const _ in m){const y=m[_];BJ(e,y,OPe(y,_,t.legends,a,l,r,o))}c.forEach(_=>{const y=_.bounds;if(y.equals(_._bounds)||(_.bounds=_._bounds,e.dirty(_),_.bounds=y,e.dirty(_)),!t.autosize||"fit"!==t.autosize.type&&"fit-x"!==t.autosize.type&&"fit-y"!==t.autosize.type)s.union(y);else switch(_.orient){case ha:case pa:s.add(y.x1,0).add(y.x2,0);break;case tm:case nd:s.add(0,y.y1).add(0,y.y2)}})}s.union(a).union(l),u&&s.union(function LPe(e,n,t,i,r){var v,o=n.items[0],a=o.orient,l=o.anchor,c=o.offset,u=o.padding,d=o.items[0].items[0],f=o.items[1]&&o.items[1].items[0],h=a===ha||a===pa?i:t,p=0,g=0,m=0,_=0,y=0;if(o.frame!==IE?a===ha?(p=r.y2,h=r.y1):a===pa?(p=r.y1,h=r.y2):(p=r.x1,h=r.x2):a===ha&&(p=i,h=0),v=l===WF?p:l===kr?h:(p+h)/2,f&&f.text){switch(a){case tm:case nd:y=d.bounds.height()+u;break;case ha:_=d.bounds.width()+u;break;case pa:_=-d.bounds.width()-u}ur.clear().union(f.bounds),ur.translate(_-(f.x||0),y-(f.y||0)),nm(f,"x",_)|nm(f,"y",y)&&(e.dirty(f),f.bounds.clear().union(ur),f.mark.bounds.clear().union(ur),e.dirty(f)),ur.clear().union(f.bounds)}else ur.clear();switch(ur.union(d.bounds),a){case tm:g=v,m=r.y1-ur.height()-c;break;case ha:g=r.x1-ur.width()-c,m=v;break;case pa:g=r.x2+ur.width()+c,m=v;break;case nd:g=v,m=r.y2+c;break;default:g=o.x,m=o.y}return nm(o,"x",g)|nm(o,"y",m)&&(ur.translate(g,m),e.dirty(o),o.bounds.clear().union(ur),n.bounds.clear().union(ur),e.dirty(o)),o.bounds}(e,u,r,o,s)),n.clip&&s.set(0,0,n.width||0,n.height||0),function VPe(e,n,t,i){const r=i.autosize||{},o=r.type;if(e._autosize<1||!o)return;let s=e._width,a=e._height,l=Math.max(0,n.width||0),c=Math.max(0,Math.ceil(-t.x1)),u=Math.max(0,n.height||0),d=Math.max(0,Math.ceil(-t.y1));const f=Math.max(0,Math.ceil(t.x2-l)),h=Math.max(0,Math.ceil(t.y2-u));if("padding"===r.contains){const p=e.padding();s-=p.left+p.right,a-=p.top+p.bottom}o===QF?(c=0,d=0,l=s,u=a):"fit"===o?(l=Math.max(0,s-c-f),u=Math.max(0,a-d-h)):"fit-x"===o?(l=Math.max(0,s-c-f),a=u+d+h):"fit-y"===o?(s=l+c+f,u=Math.max(0,a-d-h)):"pad"===o&&(s=l+c+f,a=u+d+h),e._resizeView(s,a,l,u,[c,d],r.resize)}(e,n,s,t)}(t,i,e)}),function $Pe(e){return e&&"legend-entry"!==e.mark.role}(e.mark.group)?n.reflow():n}}),pe(HJ,Z,{transform(e,n){if(this.value&&!e.modified())return n.StopPropagation;var t=n.dataflow.locale(),i=n.fork(n.NO_SOURCE|n.NO_FIELDS),r=this.value,o=e.scale,a=KR(o,null==e.count?e.values?e.values.length:10:e.count,e.minstep),l=e.format||LQ(t,o,a,e.formatSpecifier,e.formatType,!!e.values),c=e.values?PQ(o,e.values,a):YR(o,a);return r&&(i.rem=r),r=c.map((u,d)=>qt({index:d/(c.length-1||1),value:u,label:l(u)})),e.extra&&r.length&&r.push(qt({index:-1,extra:{value:r[0].value},label:""})),i.source=r,i.add=r,this.value=r,i}}),pe(jJ,Z,{transform(e,n){var t=n.dataflow,i=n.fork(n.NO_SOURCE|n.NO_FIELDS),r=e.item||zPe,o=e.key||Be,s=this.value;return oe(i.encode)&&(i.encode=null),s&&(e.modified("key")||n.modified(o))&&re("DataJoin does not support modified key function or fields."),s||(n=n.addAll(),this.value=s=function UPe(e){const n=xg().test(t=>t.exit);return n.lookup=t=>n.get(e(t)),n}(o)),n.visit(n.ADD,a=>{const l=o(a);let c=s.get(l);c?c.exit?(s.empty--,i.add.push(c)):i.mod.push(c):(c=r(a),s.set(l,c),i.add.push(c)),c.datum=a,c.exit=!1}),n.visit(n.MOD,a=>{const l=o(a),c=s.get(l);c&&(c.datum=a,i.mod.push(c))}),n.visit(n.REM,a=>{const l=o(a),c=s.get(l);a===c.datum&&!c.exit&&(i.rem.push(c),c.exit=!0,++s.empty)}),n.changed(n.ADD_MOD)&&i.modifies("datum"),(n.clean()||e.clean&&s.empty>t.cleanThreshold)&&t.runAfter(s.clean),i}}),pe(qJ,Z,{transform(e,n){var t=n.fork(n.ADD_REM),i=e.mod||!1,r=e.encoders,o=n.encode;if(oe(o)){if(!t.changed()&&!o.every(d=>r[d]))return n.StopPropagation;o=o[0],t.encode=null}var s="enter"===o,a=r.update||Du,l=r.enter||Du,c=r.exit||Du,u=(o&&!s?r[o]:a)||Du;if(n.changed(n.ADD)&&(n.visit(n.ADD,d=>{l(d,e),a(d,e)}),t.modifies(l.output),t.modifies(a.output),u!==Du&&u!==a&&(n.visit(n.ADD,d=>{u(d,e)}),t.modifies(u.output))),n.changed(n.REM)&&c!==Du&&(n.visit(n.REM,d=>{c(d,e)}),t.modifies(c.output)),s||u!==Du){const d=n.MOD|(e.modified()?n.REFLOW:0);s?(n.visit(d,f=>{const h=l(f,e)||i;(u(f,e)||h)&&t.mod.push(f)}),t.mod.length&&t.modifies(l.output)):n.visit(d,f=>{(u(f,e)||i)&&t.mod.push(f)}),t.mod.length&&t.modifies(u.output)}return t.changed()?t:n.StopPropagation}}),pe(WJ,Z,{transform(e,n){if(null!=this.value&&!e.modified())return n.StopPropagation;var f,h,p,g,m,t=n.dataflow.locale(),i=n.fork(n.NO_SOURCE|n.NO_FIELDS),r=this.value,o=e.type||Yx,s=e.scale,a=+e.limit,l=KR(s,null==e.count?5:e.count,e.minstep),u=e.format||zQ(t,s,l,o,e.formatSpecifier,e.formatType,!!e.values||o===Yx),d=e.values||VQ(s,l);return r&&(i.rem=r),o===Yx?(a&&d.length>a?(n.dataflow.warn("Symbol legend count exceeds limit, filtering items."),r=d.slice(0,a-1),m=!0):r=d,ct(p=e.size)?(!e.values&&0===s(r[0])&&(r=r.slice(1)),g=r.reduce((_,y)=>Math.max(_,p(y,e)),0)):p=rr(g=p||8),r=r.map((_,y)=>qt({index:y,label:u(_,y,r),value:_,offset:g,size:p(_,e)})),m&&r.push(qt({index:r.length,label:`\u2026${d.length-r.length} entries`,value:m=d[r.length],offset:g,size:p(m,e)}))):"gradient"===o?(f=s.domain(),h=OQ(s,f[0],Tt(f)),d.length<3&&!e.values&&f[0]!==Tt(f)&&(d=[f[0],Tt(f)]),r=d.map((_,y)=>qt({index:y,label:u(_,y,d),value:_,perc:h(_)}))):(p=d.length-1,h=function TFe(e){const n=e.domain(),t=n.length-1;let i=+n[0],r=+Tt(n),o=r-i;if(e.type===Wx){const s=t?o/t:.1;i-=s,r+=s,o=r-i}return s=>(s-i)/o}(s),r=d.map((_,y)=>qt({index:y,label:u(_,y,d),value:_,perc:y?h(_):0,perc2:y===p?1:h(d[y+1])}))),i.source=r,i.add=r,this.value=r,i}});const HPe=e=>e.source.x,jPe=e=>e.source.y,qPe=e=>e.target.x,WPe=e=>e.target.y;function tN(e){Z.call(this,{},e)}tN.Definition={type:"LinkPath",metadata:{modifies:!0},params:[{name:"sourceX",type:"field",default:"source.x"},{name:"sourceY",type:"field",default:"source.y"},{name:"targetX",type:"field",default:"target.x"},{name:"targetY",type:"field",default:"target.y"},{name:"orient",type:"enum",default:"vertical",values:["horizontal","vertical","radial"]},{name:"shape",type:"enum",default:"line",values:["line","arc","curve","diagonal","orthogonal"]},{name:"require",type:"signal"},{name:"as",type:"string",default:"path"}]},pe(tN,Z,{transform(e,n){var t=e.sourceX||HPe,i=e.sourceY||jPe,r=e.targetX||qPe,o=e.targetY||WPe,s=e.as||"path",l=e.shape||"line",c=XJ.get(l+"-"+(e.orient||"vertical"))||XJ.get(l);return c||re("LinkPath unsupported type: "+e.shape+(e.orient?"-"+e.orient:"")),n.visit(n.SOURCE,u=>{u[s]=c(t(u),i(u),r(u),o(u))}),n.reflow(e.modified()).modifies(s)}});const GJ=(e,n,t,i)=>"M"+e+","+n+"L"+t+","+i,KJ=(e,n,t,i)=>{var r=t-e,o=i-n,s=Math.hypot(r,o)/2;return"M"+e+","+n+"A"+s+","+s+" "+180*Math.atan2(o,r)/Math.PI+" 0 1 "+t+","+i},YJ=(e,n,t,i)=>{const r=t-e,o=i-n,s=.2*(r+o),a=.2*(o-r);return"M"+e+","+n+"C"+(e+s)+","+(n+a)+" "+(t+a)+","+(i-s)+" "+t+","+i},XJ=xg({line:GJ,"line-radial":(e,n,t,i)=>GJ(n*Math.cos(e),n*Math.sin(e),i*Math.cos(t),i*Math.sin(t)),arc:KJ,"arc-radial":(e,n,t,i)=>KJ(n*Math.cos(e),n*Math.sin(e),i*Math.cos(t),i*Math.sin(t)),curve:YJ,"curve-radial":(e,n,t,i)=>YJ(n*Math.cos(e),n*Math.sin(e),i*Math.cos(t),i*Math.sin(t)),"orthogonal-horizontal":(e,n,t,i)=>"M"+e+","+n+"V"+i+"H"+t,"orthogonal-vertical":(e,n,t,i)=>"M"+e+","+n+"H"+t+"V"+i,"orthogonal-radial":(e,n,t,i)=>{const r=Math.cos(e),o=Math.sin(e),s=Math.cos(t),a=Math.sin(t);return"M"+n*r+","+n*o+"A"+n+","+n+" 0 0,"+((Math.abs(t-e)>Math.PI?t<=e:t>e)?1:0)+" "+n*s+","+n*a+"L"+i*s+","+i*a},"diagonal-horizontal":(e,n,t,i)=>{const r=(e+t)/2;return"M"+e+","+n+"C"+r+","+n+" "+r+","+i+" "+t+","+i},"diagonal-vertical":(e,n,t,i)=>{const r=(n+i)/2;return"M"+e+","+n+"C"+e+","+r+" "+t+","+r+" "+t+","+i},"diagonal-radial":(e,n,t,i)=>{const r=Math.cos(e),o=Math.sin(e),s=Math.cos(t),a=Math.sin(t),l=(n+i)/2;return"M"+n*r+","+n*o+"C"+l*r+","+l*o+" "+l*s+","+l*a+" "+i*s+","+i*a}});function nN(e){Z.call(this,null,e)}nN.Definition={type:"Pie",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"startAngle",type:"number",default:0},{name:"endAngle",type:"number",default:6.283185307179586},{name:"sort",type:"boolean",default:!1},{name:"as",type:"string",array:!0,length:2,default:["startAngle","endAngle"]}]},pe(nN,Z,{transform(e,n){var p,g,m,t=e.as||["startAngle","endAngle"],i=t[0],r=t[1],s=e.startAngle||0,a=null!=e.endAngle?e.endAngle:2*Math.PI,l=n.source,c=l.map(e.field||bg),u=c.length,d=s,f=(a-s)/UJ(c),h=Ho(u);for(e.sort&&h.sort((_,y)=>c[_]-c[y]),p=0;p<u;++p)m=c[h[p]],(g=l[h[p]])[i]=d,g[r]=d+=m*f;return this.value=c,n.reflow(e.modified()).modifies(t)}});function QJ(e){return jR(e)&&e!==gl}const QPe=oa(["set","modified","clear","type","scheme","schemeExtent","schemeCount","domain","domainMin","domainMid","domainMax","domainRaw","domainImplicit","nice","zero","bins","range","rangeStep","round","reverse","interpolate","interpolateGamma"]);function ZJ(e){Z.call(this,null,e),this.modified(!0)}function JJ(e,n,t){return DQ(e)&&Math.abs(n.reduce((r,o)=>r+(o<0?-1:o>0?1:0),0))!==n.length&&t.warn("Log scale domain includes zero: "+ge(n)),n}function eee(e,n,t){return ct(e)&&(n||t)?AQ(e,iN(n||[0,1],t)):e}function iN(e,n){return n?e.slice().reverse():e}function tee(e){Z.call(this,null,e)}pe(ZJ,Z,{transform(e,n){var t=n.dataflow,i=this.value,r=function ZPe(e){var i,n=e.type,t="";return n===gl?gl+"-"+qg:(function JPe(e){const n=e.type;return jR(n)&&n!==zf&&n!==Uf&&(e.scheme||e.range&&e.range.length&&e.range.every(xe))}(e)&&(t=2===(i=e.rawDomain?e.rawDomain.length:e.domain?e.domain.length+ +(null!=e.domainMid):0)?gl+"-":3===i?Wg+"-":""),(t+n||qg).toLowerCase())}(e);for(r in(!i||r!==i.type)&&(this.value=i=$t(r)()),e)if(!QPe[r]){if("padding"===r&&QJ(i.type))continue;ct(i[r])?i[r](e[r]):t.warn("Unsupported scale property: "+r)}return function rLe(e,n,t){var i=e.type,r=n.round||!1,o=n.range;if(null!=n.rangeStep)o=function oLe(e,n,t){return"band"!==e&&e!==VR&&re("Only band and point scales support rangeStep."),[0,n.rangeStep*$R(t,e===VR?1:(null!=n.paddingInner?n.paddingInner:n.padding)||0,(null!=n.paddingOuter?n.paddingOuter:n.padding)||0)]}(i,n,t);else if(n.scheme&&(o=function sLe(e,n,t){var o,i=n.schemeExtent;return oe(n.scheme)?o=Kx(n.scheme,n.interpolate,n.interpolateGamma):(o=GR(n.scheme.toLowerCase()))||re(`Unrecognized scheme name: ${n.scheme}`),t=e===Wx?t+1:e===zR?t-1:e===Gg||e===qx?+n.schemeCount||5:t,IQ(e)?eee(o,i,n.reverse):ct(o)?kQ(eee(o,i),t):e===BR?o:o.slice(0,t)}(i,n,t),ct(o))){if(e.interpolator)return e.interpolator(o);re(`Scale type ${i} does not support interpolating color schemes.`)}if(o&&IQ(i))return e.interpolator(Kx(iN(o,n.reverse),n.interpolate,n.interpolateGamma));o&&n.interpolate&&e.interpolate?e.interpolate(WR(n.interpolate,n.interpolateGamma)):ct(e.round)?e.round(r):ct(e.rangeRound)&&e.interpolate(r?My:Uu),o&&e.range(iN(o,n.reverse))}(i,e,function iLe(e,n,t){let i=n.bins;if(i&&!oe(i)){const r=e.domain(),o=r[0],s=Tt(r),a=i.step;let l=null==i.start?o:i.start,c=null==i.stop?s:i.stop;a||re("Scale bins parameter missing step property."),l<o&&(l=a*Math.ceil(o/a)),c>s&&(c=a*Math.floor(s/a)),i=Ho(l,c+a/2,a)}return i?e.bins=i:e.bins&&delete e.bins,e.type===zR&&(i?!n.domain&&!n.domainRaw&&(e.domain(i),t=i.length):e.bins=e.domain()),t}(i,e,function eLe(e,n,t){const i=function tLe(e,n,t){return n?(e.domain(JJ(e.type,n,t)),n.length):-1}(e,n.domainRaw,t);if(i>-1)return i;var a,l,r=n.domain,o=e.type,s=n.zero||void 0===n.zero&&function XPe(e){const n=e.type;return!e.bins&&(n===qg||n===Oy||n===Ry)}(e);if(!r)return 0;if(QJ(o)&&n.padding&&r[0]!==Tt(r)&&(r=function nLe(e,n,t,i,r,o){var s=Math.abs(Tt(t)-t[0]),a=s/(s-2*i),l=e===Ec?sO(n,null,a):e===Ry?LC(n,null,a,.5):e===Oy?LC(n,null,a,r||1):e===jx?aO(n,null,a,o||1):oO(n,null,a);return(n=n.slice())[0]=l[0],n[n.length-1]=l[1],n}(o,r,n.range,n.padding,n.exponent,n.constant)),(s||null!=n.domainMin||null!=n.domainMax||null!=n.domainMid)&&(a=(r=r.slice()).length-1||1,s&&(r[0]>0&&(r[0]=0),r[a]<0&&(r[a]=0)),null!=n.domainMin&&(r[0]=n.domainMin),null!=n.domainMax&&(r[a]=n.domainMax),null!=n.domainMid)){const c=(l=n.domainMid)>r[a]?a+1:l<r[0]?0:a;c!==a&&t.warn("Scale domainMid exceeds domain min or max.",l),r.splice(c,0,l)}return e.domain(JJ(o,r,t)),o===BR&&e.unknown(n.domainImplicit?IR:void 0),n.nice&&e.nice&&e.nice(!0!==n.nice&&KR(e,n.nice)||null),r.length}(i,e,t))),n.fork(n.NO_SOURCE|n.NO_FIELDS)}}),pe(tee,Z,{transform(e,n){const t=e.modified("sort")||n.changed(n.ADD)||n.modified(e.sort.fields)||n.modified("datum");return t&&n.source.sort(Rf(e.sort)),this.modified(t),n}});const oee=["y0","y1"];function rN(e){Z.call(this,null,e)}function aLe(e,n,t,i,r){for(var l,o=(n-e.sum)/2,s=e.length,a=0;a<s;++a)(l=e[a])[i]=o,l[r]=o+=Math.abs(t(l))}function lLe(e,n,t,i,r){for(var u,o=1/e.sum,s=0,a=e.length,l=0,c=0;l<a;++l)(u=e[l])[i]=s,u[r]=s=o*(c+=Math.abs(t(u)))}function cLe(e,n,t,i,r){for(var c,u,o=0,s=0,a=e.length,l=0;l<a;++l)(c=+t(u=e[l]))<0?(u[i]=s,u[r]=s+=c):(u[i]=o,u[r]=o+=c)}rN.Definition={type:"Stack",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"groupby",type:"field",array:!0},{name:"sort",type:"compare"},{name:"offset",type:"enum",default:"zero",values:["zero","center","normalize"]},{name:"as",type:"string",array:!0,length:2,default:oee}]},pe(rN,Z,{transform(e,n){var l,c,u,d,t=e.as||oee,i=t[0],r=t[1],o=Rf(e.sort),s=e.field||bg,a="center"===e.offset?aLe:"normalize"===e.offset?lLe:cLe;for(l=function uLe(e,n,t,i){var s,a,l,c,u,d,f,h,p,r=[],o=g=>g(u);if(null==n)r.push(e.slice());else for(s={},a=0,l=e.length;a<l;++a)u=e[a],(f=s[d=n.map(o)])||(s[d]=f=[],r.push(f)),f.push(u);for(d=0,p=0,c=r.length;d<c;++d){for(a=0,h=0,l=(f=r[d]).length;a<l;++a)h+=Math.abs(i(f[a]));f.sum=h,h>p&&(p=h),t&&f.sort(t)}return r.max=p,r}(n.source,e.groupby,o,s),c=0,u=l.length,d=l.max;c<u;++c)a(l[c],d,s,i,r);return n.reflow(e.modified()).modifies(t)}});const t1=e=>e;function RE(e,n){e&&aee.hasOwnProperty(e.type)&&aee[e.type](e,n)}var see={Feature:function(e,n){RE(e.geometry,n)},FeatureCollection:function(e,n){for(var t=e.features,i=-1,r=t.length;++i<r;)RE(t[i].geometry,n)}},aee={Sphere:function(e,n){n.sphere()},Point:function(e,n){n.point((e=e.coordinates)[0],e[1],e[2])},MultiPoint:function(e,n){for(var t=e.coordinates,i=-1,r=t.length;++i<r;)n.point((e=t[i])[0],e[1],e[2])},LineString:function(e,n){oN(e.coordinates,n,0)},MultiLineString:function(e,n){for(var t=e.coordinates,i=-1,r=t.length;++i<r;)oN(t[i],n,0)},Polygon:function(e,n){lee(e.coordinates,n)},MultiPolygon:function(e,n){for(var t=e.coordinates,i=-1,r=t.length;++i<r;)lee(t[i],n)},GeometryCollection:function(e,n){for(var t=e.geometries,i=-1,r=t.length;++i<r;)RE(t[i],n)}};function oN(e,n,t){var o,i=-1,r=e.length-t;for(n.lineStart();++i<r;)n.point((o=e[i])[0],o[1],o[2]);n.lineEnd()}function lee(e,n){var t=-1,i=e.length;for(n.polygonStart();++t<i;)oN(e[t],n,1);n.polygonEnd()}function Ic(e,n){e&&see.hasOwnProperty(e.type)?see[e.type](e,n):RE(e,n)}class Vi{constructor(){this._partials=new Float64Array(32),this._n=0}add(n){const t=this._partials;let i=0;for(let r=0;r<this._n&&r<32;r++){const o=t[r],s=n+o,a=Math.abs(n)<Math.abs(o)?n-(s-o):o-(s-n);a&&(t[i++]=a),n=s}return t[i]=n,this._n=i+1,this}valueOf(){const n=this._partials;let i,r,o,t=this._n,s=0;if(t>0){for(s=n[--t];t>0&&(i=s,r=n[--t],s=i+r,o=r-(s-i),!o););t>0&&(o<0&&n[t-1]<0||o>0&&n[t-1]>0)&&(r=2*o,i=s+r,r==i-s&&(s=i))}return s}}var ze=1e-6,FE=1e-12,yt=Math.PI,$n=yt/2,NE=yt/4,Or=2*yt,Kn=180/yt,gt=yt/180,Dt=Math.abs,rm=Math.atan,Os=Math.atan2,We=Math.cos,PE=Math.ceil,cee=Math.exp,sN=(Math,Math.hypot),LE=Math.log,aN=Math.pow,Le=Math.sin,Rs=Math.sign||function(e){return e>0?1:e<0?-1:0},Rr=Math.sqrt,lN=Math.tan;function uee(e){return e>1?0:e<-1?yt:Math.acos(e)}function lo(e){return e>1?$n:e<-1?-$n:Math.asin(e)}function zi(){}var dee,fee,dN,fN,cN=new Vi,uN=new Vi,od={point:zi,lineStart:zi,lineEnd:zi,polygonStart:function(){od.lineStart=dLe,od.lineEnd=hLe},polygonEnd:function(){od.lineStart=od.lineEnd=od.point=zi,cN.add(Dt(uN)),uN=new Vi},result:function(){var e=cN/2;return cN=new Vi,e}};function dLe(){od.point=fLe}function fLe(e,n){od.point=hee,dee=dN=e,fee=fN=n}function hee(e,n){uN.add(fN*e-dN*n),dN=e,fN=n}function hLe(){hee(dee,fee)}const pee=od;var om=1/0,$E=om,n1=-om,BE=n1,pLe={point:function gLe(e,n){e<om&&(om=e),e>n1&&(n1=e),n<$E&&($E=n),n>BE&&(BE=n)},lineStart:zi,lineEnd:zi,polygonStart:zi,polygonEnd:zi,result:function(){var e=[[om,$E],[n1,BE]];return n1=BE=-($E=om=1/0),e}};const VE=pLe;var gee,mee,vl,bl,hN=0,pN=0,r1=0,zE=0,UE=0,sm=0,gN=0,mN=0,o1=0,ga={point:Xf,lineStart:_ee,lineEnd:yee,polygonStart:function(){ga.lineStart=yLe,ga.lineEnd=vLe},polygonEnd:function(){ga.point=Xf,ga.lineStart=_ee,ga.lineEnd=yee},result:function(){var e=o1?[gN/o1,mN/o1]:sm?[zE/sm,UE/sm]:r1?[hN/r1,pN/r1]:[NaN,NaN];return hN=pN=r1=zE=UE=sm=gN=mN=o1=0,e}};function Xf(e,n){hN+=e,pN+=n,++r1}function _ee(){ga.point=mLe}function mLe(e,n){ga.point=_Le,Xf(vl=e,bl=n)}function _Le(e,n){var t=e-vl,i=n-bl,r=Rr(t*t+i*i);zE+=r*(vl+e)/2,UE+=r*(bl+n)/2,sm+=r,Xf(vl=e,bl=n)}function yee(){ga.point=Xf}function yLe(){ga.point=bLe}function vLe(){vee(gee,mee)}function bLe(e,n){ga.point=vee,Xf(gee=vl=e,mee=bl=n)}function vee(e,n){var t=e-vl,i=n-bl,r=Rr(t*t+i*i);zE+=r*(vl+e)/2,UE+=r*(bl+n)/2,sm+=r,gN+=(r=bl*e-vl*n)*(vl+e),mN+=r*(bl+n),o1+=3*r,Xf(vl=e,bl=n)}const bee=ga;function wee(e){this._context=e}wee.prototype={_radius:4.5,pointRadius:function(e){return this._radius=e,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._context.closePath(),this._point=NaN},point:function(e,n){switch(this._point){case 0:this._context.moveTo(e,n),this._point=1;break;case 1:this._context.lineTo(e,n);break;default:this._context.moveTo(e+this._radius,n),this._context.arc(e,n,this._radius,0,Or)}},result:zi};var yN,Cee,xee,s1,a1,_N=new Vi,HE={point:zi,lineStart:function(){HE.point=wLe},lineEnd:function(){yN&&Eee(Cee,xee),HE.point=zi},polygonStart:function(){yN=!0},polygonEnd:function(){yN=null},result:function(){var e=+_N;return _N=new Vi,e}};function wLe(e,n){HE.point=Eee,Cee=s1=e,xee=a1=n}function Eee(e,n){_N.add(Rr((s1-=e)*s1+(a1-=n)*a1)),s1=e,a1=n}const See=HE;let Tee,jE,Dee,Iee;class Mee{constructor(n){this._append=null==n?Aee:function CLe(e){const n=Math.floor(e);if(!(n>=0))throw new RangeError(`invalid digits: ${e}`);if(n>15)return Aee;if(n!==Tee){const t=10**n;Tee=n,jE=function(r){let o=1;this._+=r[0];for(const s=r.length;o<s;++o)this._+=Math.round(arguments[o]*t)/t+r[o]}}return jE}(n),this._radius=4.5,this._=""}pointRadius(n){return this._radius=+n,this}polygonStart(){this._line=0}polygonEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){0===this._line&&(this._+="Z"),this._point=NaN}point(n,t){switch(this._point){case 0:this._append`M${n},${t}`,this._point=1;break;case 1:this._append`L${n},${t}`;break;default:if(this._append`M${n},${t}`,this._radius!==Dee||this._append!==jE){const i=this._radius,r=this._;this._="",this._append`m0,${i}a${i},${i} 0 1,1 0,${-2*i}a${i},${i} 0 1,1 0,${2*i}z`,Dee=i,jE=this._append,Iee=this._,this._=r}this._+=Iee}}result(){const n=this._;return this._="",n.length?n:null}}function Aee(e){let n=1;this._+=e[0];for(const t=e.length;n<t;++n)this._+=arguments[n]+e[n]}function kee(e,n){let r,o,t=3,i=4.5;function s(a){return a&&("function"==typeof i&&o.pointRadius(+i.apply(this,arguments)),Ic(a,r(o))),o.result()}return s.area=function(a){return Ic(a,r(pee)),pee.result()},s.measure=function(a){return Ic(a,r(See)),See.result()},s.bounds=function(a){return Ic(a,r(VE)),VE.result()},s.centroid=function(a){return Ic(a,r(bee)),bee.result()},s.projection=function(a){return arguments.length?(r=null==a?(e=null,t1):(e=a).stream,s):e},s.context=function(a){return arguments.length?(o=null==a?(n=null,new Mee(t)):new wee(n=a),"function"!=typeof i&&o.pointRadius(i),s):n},s.pointRadius=function(a){return arguments.length?(i="function"==typeof a?a:(o.pointRadius(+a),+a),s):i},s.digits=function(a){if(!arguments.length)return t;if(null==a)t=null;else{const l=Math.floor(a);if(!(l>=0))throw new RangeError(`invalid digits: ${a}`);t=l}return null===n&&(o=new Mee(t)),s},s.projection(e).digits(t).context(n)}function Oee(){var n,e=[];return{point:function(t,i,r){n.push([t,i,r])},lineStart:function(){e.push(n=[])},lineEnd:zi,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var t=e;return e=[],n=null,t}}}function qE(e,n){return Dt(e[0]-n[0])<ze&&Dt(e[1]-n[1])<ze}function WE(e,n,t,i){this.x=e,this.z=n,this.o=t,this.e=i,this.v=!1,this.n=this.p=null}function Ree(e,n,t,i,r){var a,l,o=[],s=[];if(e.forEach(function(p){if(!((g=p.length-1)<=0)){var g,y,m=p[0],_=p[g];if(qE(m,_)){if(!m[2]&&!_[2]){for(r.lineStart(),a=0;a<g;++a)r.point((m=p[a])[0],m[1]);return void r.lineEnd()}_[0]+=2*ze}o.push(y=new WE(m,p,null,!0)),s.push(y.o=new WE(m,null,y,!1)),o.push(y=new WE(_,p,null,!1)),s.push(y.o=new WE(_,null,y,!0))}}),o.length){for(s.sort(n),Fee(o),Fee(s),a=0,l=s.length;a<l;++a)s[a].e=t=!t;for(var u,d,c=o[0];;){for(var f=c,h=!0;f.v;)if((f=f.n)===c)return;u=f.z,r.lineStart();do{if(f.v=f.o.v=!0,f.e){if(h)for(a=0,l=u.length;a<l;++a)r.point((d=u[a])[0],d[1]);else i(f.x,f.n.x,1,r);f=f.n}else{if(h)for(a=(u=f.p.z).length-1;a>=0;--a)r.point((d=u[a])[0],d[1]);else i(f.x,f.p.x,-1,r);f=f.p}u=(f=f.o).z,h=!h}while(!f.v);r.lineEnd()}}}function Fee(e){if(n=e.length){for(var n,r,t=0,i=e[0];++t<n;)i.n=r=e[t],r.p=i,i=r;i.n=r=e[0],r.p=i}}function GE(e){return[Os(e[1],e[0]),lo(e[2])]}function Qf(e){var n=e[0],t=e[1],i=We(t);return[i*We(n),i*Le(n),Le(t)]}function KE(e,n){return e[0]*n[0]+e[1]*n[1]+e[2]*n[2]}function am(e,n){return[e[1]*n[2]-e[2]*n[1],e[2]*n[0]-e[0]*n[2],e[0]*n[1]-e[1]*n[0]]}function vN(e,n){e[0]+=n[0],e[1]+=n[1],e[2]+=n[2]}function YE(e,n){return[e[0]*n,e[1]*n,e[2]*n]}function XE(e){var n=Rr(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=n,e[1]/=n,e[2]/=n}function bN(e){return Dt(e[0])<=yt?e[0]:Rs(e[0])*((Dt(e[0])+yt)%Or-yt)}function Nee(e){return Array.from(function*ELe(e){for(const n of e)yield*n}(e))}function Pee(e,n,t,i){return function(r){var c,u,d,o=n(r),s=Oee(),a=n(s),l=!1,f={point:h,lineStart:g,lineEnd:m,polygonStart:function(){f.point=_,f.lineStart=y,f.lineEnd=v,u=[],c=[]},polygonEnd:function(){f.point=h,f.lineStart=g,f.lineEnd=m,u=Nee(u);var b=function xLe(e,n){var t=bN(n),i=n[1],r=Le(i),o=[Le(t),-We(t),0],s=0,a=0,l=new Vi;1===r?i=$n+ze:-1===r&&(i=-$n-ze);for(var c=0,u=e.length;c<u;++c)if(f=(d=e[c]).length)for(var d,f,h=d[f-1],p=bN(h),g=h[1]/2+NE,m=Le(g),_=We(g),y=0;y<f;++y,p=b,m=x,_=C,h=v){var v=d[y],b=bN(v),w=v[1]/2+NE,x=Le(w),C=We(w),S=b-p,A=S>=0?1:-1,M=A*S,N=M>yt,V=m*x;if(l.add(Os(V*A*Le(M),_*C+V*We(M))),s+=N?S+A*Or:S,N^p>=t^b>=t){var P=am(Qf(h),Qf(v));XE(P);var E=am(o,P);XE(E);var D=(N^S>=0?-1:1)*lo(E[2]);(i>D||i===D&&(P[0]||P[1]))&&(a+=N^S>=0?1:-1)}}return(s<-ze||s<ze&&l<-FE)^1&a}(c,i);u.length?(l||(r.polygonStart(),l=!0),Ree(u,TLe,b,t,r)):b&&(l||(r.polygonStart(),l=!0),r.lineStart(),t(null,null,1,r),r.lineEnd()),l&&(r.polygonEnd(),l=!1),u=c=null},sphere:function(){r.polygonStart(),r.lineStart(),t(null,null,1,r),r.lineEnd(),r.polygonEnd()}};function h(b,w){e(b,w)&&r.point(b,w)}function p(b,w){o.point(b,w)}function g(){f.point=p,o.lineStart()}function m(){f.point=h,o.lineEnd()}function _(b,w){d.push([b,w]),a.point(b,w)}function y(){a.lineStart(),d=[]}function v(){_(d[0][0],d[0][1]),a.lineEnd();var x,S,A,M,b=a.clean(),w=s.result(),C=w.length;if(d.pop(),c.push(d),d=null,C){if(1&b){if((S=(A=w[0]).length-1)>0){for(l||(r.polygonStart(),l=!0),r.lineStart(),x=0;x<S;++x)r.point((M=A[x])[0],M[1]);r.lineEnd()}return}C>1&&2&b&&w.push(w.pop().concat(w.shift())),u.push(w.filter(SLe))}}return f}}function SLe(e){return e.length>1}function TLe(e,n){return((e=e.x)[0]<0?e[1]-$n-ze:$n-e[1])-((n=n.x)[0]<0?n[1]-$n-ze:$n-n[1])}const Lee=Pee(function(){return!0},function DLe(e){var r,n=NaN,t=NaN,i=NaN;return{lineStart:function(){e.lineStart(),r=1},point:function(o,s){var a=o>0?yt:-yt,l=Dt(o-n);Dt(l-yt)<ze?(e.point(n,t=(t+s)/2>0?$n:-$n),e.point(i,t),e.lineEnd(),e.lineStart(),e.point(a,t),e.point(o,t),r=0):i!==a&&l>=yt&&(Dt(n-i)<ze&&(n-=i*ze),Dt(o-a)<ze&&(o-=a*ze),t=function ILe(e,n,t,i){var r,o,s=Le(e-t);return Dt(s)>ze?rm((Le(n)*(o=We(i))*Le(t)-Le(i)*(r=We(n))*Le(e))/(r*o*s)):(n+i)/2}(n,t,o,s),e.point(i,t),e.lineEnd(),e.lineStart(),e.point(a,t),r=0),e.point(n=o,t=s),i=a},lineEnd:function(){e.lineEnd(),n=t=NaN},clean:function(){return 2-r}}},function MLe(e,n,t,i){var r;if(null==e)i.point(-yt,r=t*$n),i.point(0,r),i.point(yt,r),i.point(yt,0),i.point(yt,-r),i.point(0,-r),i.point(-yt,-r),i.point(-yt,0),i.point(-yt,r);else if(Dt(e[0]-n[0])>ze){var o=e[0]<n[0]?yt:-yt;i.point(-o,r=t*o/2),i.point(0,r),i.point(o,r)}else i.point(n[0],n[1])},[-yt,-$n]);function Bee(e,n){(n=Qf(n))[0]-=e,XE(n);var t=uee(-n[1]);return((-n[2]<0?-t:t)+Or-ze)%Or}var l1=1e9,QE=-l1;function Vee(e,n,t,i){function r(c,u){return e<=c&&c<=t&&n<=u&&u<=i}function o(c,u,d,f){var h=0,p=0;if(null==c||(h=s(c,d))!==(p=s(u,d))||l(c,u)<0^d>0)do{f.point(0===h||3===h?e:t,h>1?i:n)}while((h=(h+d+4)%4)!==p);else f.point(u[0],u[1])}function s(c,u){return Dt(c[0]-e)<ze?u>0?0:3:Dt(c[0]-t)<ze?u>0?2:1:Dt(c[1]-n)<ze?u>0?1:0:u>0?3:2}function a(c,u){return l(c.x,u.x)}function l(c,u){var d=s(c,1),f=s(u,1);return d!==f?d-f:0===d?u[1]-c[1]:1===d?c[0]-u[0]:2===d?c[1]-u[1]:u[0]-c[0]}return function(c){var f,h,p,g,m,_,y,v,b,w,x,u=c,d=Oee(),C={point:S,lineStart:function V(){C.point=E,h&&h.push(p=[]),w=!0,b=!1,y=v=NaN},lineEnd:function P(){f&&(E(g,m),_&&b&&d.rejoin(),f.push(d.result())),C.point=S,b&&u.lineEnd()},polygonStart:function M(){u=d,f=[],h=[],x=!0},polygonEnd:function N(){var D=function A(){for(var D=0,I=0,O=h.length;I<O;++I)for(var H,j,T=h[I],R=1,F=T.length,z=T[0],U=z[0],Q=z[1];R<F;++R)H=U,j=Q,U=(z=T[R])[0],Q=z[1],j<=i?Q>i&&(U-H)*(i-j)>(Q-j)*(e-H)&&++D:Q<=i&&(U-H)*(i-j)<(Q-j)*(e-H)&&--D;return D}(),I=x&&D,O=(f=Nee(f)).length;(I||O)&&(c.polygonStart(),I&&(c.lineStart(),o(null,null,1,c),c.lineEnd()),O&&Ree(f,a,D,o,c),c.polygonEnd()),u=c,f=h=p=null}};function S(D,I){r(D,I)&&u.point(D,I)}function E(D,I){var O=r(D,I);if(h&&p.push([D,I]),w)g=D,m=I,_=O,w=!1,O&&(u.lineStart(),u.point(D,I));else if(O&&b)u.point(D,I);else{var T=[y=Math.max(QE,Math.min(l1,y)),v=Math.max(QE,Math.min(l1,v))],R=[D=Math.max(QE,Math.min(l1,D)),I=Math.max(QE,Math.min(l1,I))];!function kLe(e,n,t,i,r,o){var p,s=e[0],a=e[1],u=0,d=1,f=n[0]-s,h=n[1]-a;if(p=t-s,f||!(p>0)){if(p/=f,f<0){if(p<u)return;p<d&&(d=p)}else if(f>0){if(p>d)return;p>u&&(u=p)}if(p=r-s,f||!(p<0)){if(p/=f,f<0){if(p>d)return;p>u&&(u=p)}else if(f>0){if(p<u)return;p<d&&(d=p)}if(p=i-a,h||!(p>0)){if(p/=h,h<0){if(p<u)return;p<d&&(d=p)}else if(h>0){if(p>d)return;p>u&&(u=p)}if(p=o-a,h||!(p<0)){if(p/=h,h<0){if(p>d)return;p>u&&(u=p)}else if(h>0){if(p<u)return;p<d&&(d=p)}return u>0&&(e[0]=s+u*f,e[1]=a+u*h),d<1&&(n[0]=s+d*f,n[1]=a+d*h),!0}}}}}(T,R,e,n,t,i)?O&&(u.lineStart(),u.point(D,I),x=!1):(b||(u.lineStart(),u.point(T[0],T[1])),u.point(R[0],R[1]),O||u.lineEnd(),x=!1)}y=D,v=I,b=O}return C}}function wN(e,n){function t(i,r){return i=e(i,r),n(i[0],i[1])}return e.invert&&n.invert&&(t.invert=function(i,r){return(i=n.invert(i,r))&&e.invert(i[0],i[1])}),t}function CN(e,n){return Dt(e)>yt&&(e-=Math.round(e/Or)*Or),[e,n]}function zee(e,n,t){return(e%=Or)?n||t?wN(Hee(e),jee(n,t)):Hee(e):n||t?jee(n,t):CN}function Uee(e){return function(n,t){return Dt(n+=e)>yt&&(n-=Math.round(n/Or)*Or),[n,t]}}function Hee(e){var n=Uee(e);return n.invert=Uee(-e),n}function jee(e,n){var t=We(e),i=Le(e),r=We(n),o=Le(n);function s(a,l){var c=We(l),u=We(a)*c,d=Le(a)*c,f=Le(l),h=f*t+u*i;return[Os(d*r-h*o,u*t-f*i),lo(h*r+d*o)]}return s.invert=function(a,l){var c=We(l),u=We(a)*c,d=Le(a)*c,f=Le(l),h=f*r-d*o;return[Os(d*r+f*o,u*t+h*i),lo(h*t-u*i)]},s}function c1(e){return function(n){var t=new xN;for(var i in e)t[i]=e[i];return t.stream=n,t}}function xN(){}function EN(e,n,t){var i=e.clipExtent&&e.clipExtent();return e.scale(150).translate([0,0]),null!=i&&e.clipExtent(null),Ic(t,e.stream(VE)),n(VE.result()),null!=i&&e.clipExtent(i),e}function ZE(e,n,t){return EN(e,function(i){var r=n[1][0]-n[0][0],o=n[1][1]-n[0][1],s=Math.min(r/(i[1][0]-i[0][0]),o/(i[1][1]-i[0][1])),a=+n[0][0]+(r-s*(i[1][0]+i[0][0]))/2,l=+n[0][1]+(o-s*(i[1][1]+i[0][1]))/2;e.scale(150*s).translate([a,l])},t)}function SN(e,n,t){return ZE(e,[[0,0],n],t)}function TN(e,n,t){return EN(e,function(i){var r=+n,o=r/(i[1][0]-i[0][0]),s=(r-o*(i[1][0]+i[0][0]))/2,a=-o*i[0][1];e.scale(150*o).translate([s,a])},t)}function DN(e,n,t){return EN(e,function(i){var r=+n,o=r/(i[1][1]-i[0][1]),s=-o*i[0][0],a=(r-o*(i[1][1]+i[0][1]))/2;e.scale(150*o).translate([s,a])},t)}CN.invert=CN,xN.prototype={constructor:xN,point:function(e,n){this.stream.point(e,n)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};var qee=16,RLe=We(30*gt);function Wee(e,n){return+n?function NLe(e,n){function t(i,r,o,s,a,l,c,u,d,f,h,p,g,m){var _=c-i,y=u-r,v=_*_+y*y;if(v>4*n&&g--){var b=s+f,w=a+h,x=l+p,C=Rr(b*b+w*w+x*x),S=lo(x/=C),A=Dt(Dt(x)-1)<ze||Dt(o-d)<ze?(o+d)/2:Os(w,b),M=e(A,S),N=M[0],V=M[1],P=N-i,E=V-r,D=y*P-_*E;(D*D/v>n||Dt((_*P+y*E)/v-.5)>.3||s*f+a*h+l*p<RLe)&&(t(i,r,o,s,a,l,N,V,A,b/=C,w/=C,x,g,m),m.point(N,V),t(N,V,A,b,w,x,c,u,d,f,h,p,g,m))}}return function(i){var r,o,s,a,l,c,u,d,f,h,p,g,m={point:_,lineStart:y,lineEnd:b,polygonStart:function(){i.polygonStart(),m.lineStart=w},polygonEnd:function(){i.polygonEnd(),m.lineStart=y}};function _(S,A){S=e(S,A),i.point(S[0],S[1])}function y(){d=NaN,m.point=v,i.lineStart()}function v(S,A){var M=Qf([S,A]),N=e(S,A);t(d,f,u,h,p,g,d=N[0],f=N[1],u=S,h=M[0],p=M[1],g=M[2],qee,i),i.point(d,f)}function b(){m.point=_,i.lineEnd()}function w(){y(),m.point=x,m.lineEnd=C}function x(S,A){v(r=S,A),o=d,s=f,a=h,l=p,c=g,m.point=v}function C(){t(d,f,u,h,p,g,o,s,r,a,l,c,qee,i),m.lineEnd=b,b()}return m}}(e,n):function FLe(e){return c1({point:function(n,t){n=e(n,t),this.stream.point(n[0],n[1])}})}(e)}var PLe=c1({point:function(e,n){this.stream.point(e*gt,n*gt)}});function Gee(e,n,t,i,r,o){if(!o)return function $Le(e,n,t,i,r){function o(s,a){return[n+e*(s*=i),t-e*(a*=r)]}return o.invert=function(s,a){return[(s-n)/e*i,(t-a)/e*r]},o}(e,n,t,i,r);var s=We(o),a=Le(o),l=s*e,c=a*e,u=s/e,d=a/e,f=(a*t-s*n)/e,h=(a*n+s*t)/e;function p(g,m){return[l*(g*=i)-c*(m*=r)+n,t-c*g-l*m]}return p.invert=function(g,m){return[i*(u*g-d*m+f),r*(h-d*g-u*m)]},p}function wl(e){return Kee(function(){return e})()}function Kee(e){var n,u,_,y,v,x,C,S,A,M,t=150,i=480,r=250,o=0,s=0,a=0,l=0,c=0,d=0,f=1,h=1,p=null,g=Lee,m=null,b=t1,w=.5;function N(D){return S(D[0]*gt,D[1]*gt)}function V(D){return(D=S.invert(D[0],D[1]))&&[D[0]*Kn,D[1]*Kn]}function P(){var D=Gee(t,0,0,f,h,d).apply(null,n(o,s)),I=Gee(t,i-D[0],r-D[1],f,h,d);return u=zee(a,l,c),C=wN(n,I),S=wN(u,C),x=Wee(C,w),E()}function E(){return A=M=null,N}return N.stream=function(D){return A&&M===D?A:A=PLe(function LLe(e){return c1({point:function(n,t){var i=e(n,t);return this.stream.point(i[0],i[1])}})}(u)(g(x(b(M=D)))))},N.preclip=function(D){return arguments.length?(g=D,p=void 0,E()):g},N.postclip=function(D){return arguments.length?(b=D,m=_=y=v=null,E()):b},N.clipAngle=function(D){return arguments.length?(g=+D?function ALe(e){var n=We(e),t=6*gt,i=n>0,r=Dt(n)>ze;function s(u,d){return We(u)*We(d)>n}function l(u,d,f){var g=[1,0,0],m=am(Qf(u),Qf(d)),_=KE(m,m),y=m[0],v=_-y*y;if(!v)return!f&&u;var b=n*_/v,w=-n*y/v,x=am(g,m),C=YE(g,b);vN(C,YE(m,w));var A=x,M=KE(C,A),N=KE(A,A),V=M*M-N*(KE(C,C)-1);if(!(V<0)){var P=Rr(V),E=YE(A,(-M-P)/N);if(vN(E,C),E=GE(E),!f)return E;var R,D=u[0],I=d[0],O=u[1],T=d[1];I<D&&(R=D,D=I,I=R);var F=I-D,z=Dt(F-yt)<ze;if(!z&&T<O&&(R=O,O=T,T=R),z||F<ze?z?O+T>0^E[1]<(Dt(E[0]-D)<ze?O:T):O<=E[1]&&E[1]<=T:F>yt^(D<=E[0]&&E[0]<=I)){var j=YE(A,(-M+P)/N);return vN(j,C),[E,GE(j)]}}}function c(u,d){var f=i?e:yt-e,h=0;return u<-f?h|=1:u>f&&(h|=2),d<-f?h|=4:d>f&&(h|=8),h}return Pee(s,function a(u){var d,f,h,p,g;return{lineStart:function(){p=h=!1,g=1},point:function(m,_){var v,y=[m,_],b=s(m,_),w=i?b?0:c(m,_):b?c(m+(m<0?yt:-yt),_):0;if(!d&&(p=h=b)&&u.lineStart(),b!==h&&(!(v=l(d,y))||qE(d,v)||qE(y,v))&&(y[2]=1),b!==h)g=0,b?(u.lineStart(),v=l(y,d),u.point(v[0],v[1])):(v=l(d,y),u.point(v[0],v[1],2),u.lineEnd()),d=v;else if(r&&d&&i^b){var x;!(w&f)&&(x=l(y,d,!0))&&(g=0,i?(u.lineStart(),u.point(x[0][0],x[0][1]),u.point(x[1][0],x[1][1]),u.lineEnd()):(u.point(x[1][0],x[1][1]),u.lineEnd(),u.lineStart(),u.point(x[0][0],x[0][1],3)))}b&&(!d||!qE(d,y))&&u.point(y[0],y[1]),d=y,h=b,f=w},lineEnd:function(){h&&u.lineEnd(),d=null},clean:function(){return g|(p&&h)<<1}}},function o(u,d,f,h){!function $ee(e,n,t,i,r,o){if(t){var s=We(n),a=Le(n),l=i*t;null==r?(r=n+i*Or,o=n-l/2):(r=Bee(s,r),o=Bee(s,o),(i>0?r<o:r>o)&&(r+=i*Or));for(var c,u=r;i>0?u>o:u<o;u-=l)c=GE([s,-a*We(u),-a*Le(u)]),e.point(c[0],c[1])}}(h,e,t,f,u,d)},i?[0,-e]:[-yt,e-yt])}(p=D*gt):(p=null,Lee),E()):p*Kn},N.clipExtent=function(D){return arguments.length?(b=null==D?(m=_=y=v=null,t1):Vee(m=+D[0][0],_=+D[0][1],y=+D[1][0],v=+D[1][1]),E()):null==m?null:[[m,_],[y,v]]},N.scale=function(D){return arguments.length?(t=+D,P()):t},N.translate=function(D){return arguments.length?(i=+D[0],r=+D[1],P()):[i,r]},N.center=function(D){return arguments.length?(o=D[0]%360*gt,s=D[1]%360*gt,P()):[o*Kn,s*Kn]},N.rotate=function(D){return arguments.length?(a=D[0]%360*gt,l=D[1]%360*gt,c=D.length>2?D[2]%360*gt:0,P()):[a*Kn,l*Kn,c*Kn]},N.angle=function(D){return arguments.length?(d=D%360*gt,P()):d*Kn},N.reflectX=function(D){return arguments.length?(f=D?-1:1,P()):f<0},N.reflectY=function(D){return arguments.length?(h=D?-1:1,P()):h<0},N.precision=function(D){return arguments.length?(x=Wee(C,w=D*D),E()):Rr(w)},N.fitExtent=function(D,I){return ZE(N,D,I)},N.fitSize=function(D,I){return SN(N,D,I)},N.fitWidth=function(D,I){return TN(N,D,I)},N.fitHeight=function(D,I){return DN(N,D,I)},function(){return n=e.apply(this,arguments),N.invert=n.invert&&V,P()}}function IN(e){var n=0,t=yt/3,i=Kee(e),r=i(n,t);return r.parallels=function(o){return arguments.length?i(n=o[0]*gt,t=o[1]*gt):[n*Kn,t*Kn]},r}function VLe(e,n){var t=Le(e),i=(t+Le(n))/2;if(Dt(i)<ze)return function BLe(e){var n=We(e);function t(i,r){return[i*n,Le(r)/n]}return t.invert=function(i,r){return[i/n,lo(r*n)]},t}(e);var r=1+t*(2*i-t),o=Rr(r)/i;function s(a,l){var c=Rr(r-2*i*Le(l))/i;return[c*Le(a*=i),o-c*We(a)]}return s.invert=function(a,l){var c=o-l,u=Os(a,Dt(c))*Rs(c);return c*i<0&&(u-=yt*Rs(a)*Rs(c)),[u/i,lo((r-(a*a+c*c)*i*i)/(2*i))]},s}function JE(){return IN(VLe).scale(155.424).center([0,33.6442])}function Yee(){return JE().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function Xee(e){return function(n,t){var i=We(n),r=We(t),o=e(i*r);return o===1/0?[2,0]:[o*r*Le(n),o*Le(t)]}}function u1(e){return function(n,t){var i=Rr(n*n+t*t),r=e(i),o=Le(r),s=We(r);return[Os(n*o,i*s),lo(i&&t*o/i)]}}var Qee=Xee(function(e){return Rr(2/(1+e))});Qee.invert=u1(function(e){return 2*lo(e/2)});var Zee=Xee(function(e){return(e=uee(e))&&e/Le(e)});function eS(e,n){return[e,LE(lN(($n+n)/2))]}function Jee(e){var a,l,c,n=wl(e),t=n.center,i=n.scale,r=n.translate,o=n.clipExtent,s=null;function u(){var d=yt*i(),f=n(function OLe(e){function n(t){return(t=e(t[0]*gt,t[1]*gt))[0]*=Kn,t[1]*=Kn,t}return e=zee(e[0]*gt,e[1]*gt,e.length>2?e[2]*gt:0),n.invert=function(t){return(t=e.invert(t[0]*gt,t[1]*gt))[0]*=Kn,t[1]*=Kn,t},n}(n.rotate()).invert([0,0]));return o(null==s?[[f[0]-d,f[1]-d],[f[0]+d,f[1]+d]]:e===eS?[[Math.max(f[0]-d,s),a],[Math.min(f[0]+d,l),c]]:[[s,Math.max(f[1]-d,a)],[l,Math.min(f[1]+d,c)]])}return n.scale=function(d){return arguments.length?(i(d),u()):i()},n.translate=function(d){return arguments.length?(r(d),u()):r()},n.center=function(d){return arguments.length?(t(d),u()):t()},n.clipExtent=function(d){return arguments.length?(null==d?s=a=l=c=null:(s=+d[0][0],a=+d[0][1],l=+d[1][0],c=+d[1][1]),u()):null==s?null:[[s,a],[l,c]]},u()}function tS(e){return lN(($n+e)/2)}function WLe(e,n){var t=We(e),i=e===n?Le(e):LE(t/We(n))/LE(tS(n)/tS(e)),r=t*aN(tS(e),i)/i;if(!i)return eS;function o(s,a){r>0?a<-$n+ze&&(a=-$n+ze):a>$n-ze&&(a=$n-ze);var l=r/aN(tS(a),i);return[l*Le(i*s),r-l*We(i*s)]}return o.invert=function(s,a){var l=r-a,c=Rs(i)*Rr(s*s+l*l),u=Os(s,Dt(l))*Rs(l);return l*i<0&&(u-=yt*Rs(s)*Rs(l)),[u/i,2*rm(aN(r/c,1/i))-$n]},o}function nS(e,n){return[e,n]}function YLe(e,n){var t=We(e),i=e===n?Le(e):(t-We(n))/(n-e),r=t/i+e;if(Dt(i)<ze)return nS;function o(s,a){var l=r-a,c=i*s;return[l*Le(c),r-l*We(c)]}return o.invert=function(s,a){var l=r-a,c=Os(s,Dt(l))*Rs(l);return l*i<0&&(c-=yt*Rs(s)*Rs(l)),[c/i,r-Rs(i)*Rr(s*s+l*l)]},o}Zee.invert=u1(function(e){return e}),eS.invert=function(e,n){return[e,2*rm(cee(n))-$n]},nS.invert=nS;var d1=1.340264,f1=-.081106,h1=893e-6,p1=.003796,iS=Rr(3)/2;function ete(e,n){var t=lo(iS*Le(n)),i=t*t,r=i*i*i;return[e*We(t)/(iS*(d1+3*f1*i+r*(7*h1+9*p1*i))),t*(d1+f1*i+r*(h1+p1*i))]}function tte(e,n){var t=We(n),i=We(e)*t;return[t*Le(e)/i,Le(n)/i]}function nte(e,n){var t=n*n,i=t*t;return[e*(.8707-.131979*t+i*(i*(.003971*t-.001529*i)-.013791)),n*(1.007226+t*(.015085+i*(.028874*t-.044475-.005916*i)))]}function ite(e,n){return[We(n)*Le(e),Le(n)]}function rte(e,n){var t=We(n),i=1+We(e)*t;return[t*Le(e)/i,Le(n)/i]}function ote(e,n){return[LE(lN(($n+n)/2)),-e]}ete.invert=function(e,n){for(var s,t=n,i=t*t,r=i*i*i,o=0;o<12&&(r=(i=(t-=s=(t*(d1+f1*i+r*(h1+p1*i))-n)/(d1+3*f1*i+r*(7*h1+9*p1*i)))*t)*i*i,!(Dt(s)<FE));++o);return[iS*e*(d1+3*f1*i+r*(7*h1+9*p1*i))/We(t),lo(Le(t)/iS)]},tte.invert=u1(rm),nte.invert=function(e,n){var r,t=n,i=25;do{var o=t*t,s=o*o;t-=r=(t*(1.007226+o*(.015085+s*(.028874*o-.044475-.005916*s)))-n)/(1.007226+o*(.045255+s*(.259866*o-.311325-.005916*11*s)))}while(Dt(r)>ze&&--i>0);return[e/(.8707+(o=t*t)*(o*(o*o*o*(.003971-.001529*o)-.013791)-.131979)),t]},ite.invert=u1(lo),rte.invert=u1(function(e){return 2*rm(e)}),ote.invert=function(e,n){return[-n,2*rm(cee(e))-$n]};var o5e=Math.abs,MN=(Math,Math,Math,Math.cos),rS=(Math,Math,Math,Math,Math,Math,Math,Math,Math.sin),s5e=(Math,1e-6),sd=Math.PI,AN=sd/2,ate=(Math,oS(2));function lte(e){return e>1?AN:e<-1?-AN:Math.asin(e)}function oS(e){return e>0?Math.sqrt(e):0}function a5e(e,n){var r,t=e*rS(n),i=30;do{n-=r=(n+rS(n)-t)/(1+MN(n))}while(o5e(r)>s5e&&--i>0);return n/2}oS(sd);var c5e=function l5e(e,n,t){function i(r,o){return[e*r*MN(o=a5e(t,o)),n*rS(o)]}return i.invert=function(r,o){return o=lte(o/n),[r/(e*MN(o)),lte((2*o+rS(2*o))/t)]},i}(ate/AN,ate,sd);const d5e=kee(),kN=["clipAngle","clipExtent","scale","translate","center","rotate","parallels","precision","reflectX","reflectY","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"];function ON(e,n){if(!e||"string"!=typeof e)throw new Error("Projection type must be a name string.");return e=e.toLowerCase(),arguments.length>1?(sS[e]=function f5e(e,n){return function t(){const i=n();return i.type=e,i.path=kee().projection(i),i.copy=i.copy||function(){const r=t();return kN.forEach(o=>{i[o]&&r[o](i[o]())}),r.path.pointRadius(i.path.pointRadius()),r},SQ(i)}}(e,n),this):sS[e]||null}function cte(e){return e&&e.path||d5e}const sS={albers:Yee,albersusa:function ULe(){var e,n,i,o,a,l,t=Yee(),r=JE().rotate([154,0]).center([-2,58.5]).parallels([55,65]),s=JE().rotate([157,0]).center([-3,19.9]).parallels([8,18]),c={point:function(f,h){l=[f,h]}};function u(f){var h=f[0],p=f[1];return l=null,i.point(h,p),l||(o.point(h,p),l)||(a.point(h,p),l)}function d(){return e=n=null,u}return u.invert=function(f){var h=t.scale(),p=t.translate(),g=(f[0]-p[0])/h,m=(f[1]-p[1])/h;return(m>=.12&&m<.234&&g>=-.425&&g<-.214?r:m>=.166&&m<.234&&g>=-.214&&g<-.115?s:t).invert(f)},u.stream=function(f){return e&&n===f?e:e=function zLe(e){var n=e.length;return{point:function(t,i){for(var r=-1;++r<n;)e[r].point(t,i)},sphere:function(){for(var t=-1;++t<n;)e[t].sphere()},lineStart:function(){for(var t=-1;++t<n;)e[t].lineStart()},lineEnd:function(){for(var t=-1;++t<n;)e[t].lineEnd()},polygonStart:function(){for(var t=-1;++t<n;)e[t].polygonStart()},polygonEnd:function(){for(var t=-1;++t<n;)e[t].polygonEnd()}}}([t.stream(n=f),r.stream(f),s.stream(f)])},u.precision=function(f){return arguments.length?(t.precision(f),r.precision(f),s.precision(f),d()):t.precision()},u.scale=function(f){return arguments.length?(t.scale(f),r.scale(.35*f),s.scale(f),u.translate(t.translate())):t.scale()},u.translate=function(f){if(!arguments.length)return t.translate();var h=t.scale(),p=+f[0],g=+f[1];return i=t.translate(f).clipExtent([[p-.455*h,g-.238*h],[p+.455*h,g+.238*h]]).stream(c),o=r.translate([p-.307*h,g+.201*h]).clipExtent([[p-.425*h+ze,g+.12*h+ze],[p-.214*h-ze,g+.234*h-ze]]).stream(c),a=s.translate([p-.205*h,g+.212*h]).clipExtent([[p-.214*h+ze,g+.166*h+ze],[p-.115*h-ze,g+.234*h-ze]]).stream(c),d()},u.fitExtent=function(f,h){return ZE(u,f,h)},u.fitSize=function(f,h){return SN(u,f,h)},u.fitWidth=function(f,h){return TN(u,f,h)},u.fitHeight=function(f,h){return DN(u,f,h)},u.scale(1070)},azimuthalequalarea:function HLe(){return wl(Qee).scale(124.75).clipAngle(179.999)},azimuthalequidistant:function jLe(){return wl(Zee).scale(79.4188).clipAngle(179.999)},conicconformal:function GLe(){return IN(WLe).scale(109.5).parallels([30,30])},conicequalarea:JE,conicequidistant:function XLe(){return IN(YLe).scale(131.154).center([0,13.9389])},equalEarth:function ZLe(){return wl(ete).scale(177.158)},equirectangular:function KLe(){return wl(nS).scale(152.63)},gnomonic:function JLe(){return wl(tte).scale(144.049).clipAngle(60)},identity:function e5e(){var s,a,c,u,d,m,_,e=1,n=0,t=0,i=1,r=1,o=0,l=null,f=1,h=1,p=c1({point:function(b,w){var x=v([b,w]);this.stream.point(x[0],x[1])}}),g=t1;function y(){return f=e*i,h=e*r,m=_=null,v}function v(b){var w=b[0]*f,x=b[1]*h;if(o){var C=x*s-w*a;w=w*s+x*a,x=C}return[w+n,x+t]}return v.invert=function(b){var w=b[0]-n,x=b[1]-t;if(o){var C=x*s+w*a;w=w*s-x*a,x=C}return[w/f,x/h]},v.stream=function(b){return m&&_===b?m:m=p(g(_=b))},v.postclip=function(b){return arguments.length?(g=b,l=c=u=d=null,y()):g},v.clipExtent=function(b){return arguments.length?(g=null==b?(l=c=u=d=null,t1):Vee(l=+b[0][0],c=+b[0][1],u=+b[1][0],d=+b[1][1]),y()):null==l?null:[[l,c],[u,d]]},v.scale=function(b){return arguments.length?(e=+b,y()):e},v.translate=function(b){return arguments.length?(n=+b[0],t=+b[1],y()):[n,t]},v.angle=function(b){return arguments.length?(a=Le(o=b%360*gt),s=We(o),y()):o*Kn},v.reflectX=function(b){return arguments.length?(i=b?-1:1,y()):i<0},v.reflectY=function(b){return arguments.length?(r=b?-1:1,y()):r<0},v.fitExtent=function(b,w){return ZE(v,b,w)},v.fitSize=function(b,w){return SN(v,b,w)},v.fitWidth=function(b,w){return TN(v,b,w)},v.fitHeight=function(b,w){return DN(v,b,w)},v},mercator:function qLe(){return Jee(eS).scale(961/Or)},mollweide:function u5e(){return wl(c5e).scale(169.529)},naturalEarth1:function t5e(){return wl(nte).scale(175.295)},orthographic:function n5e(){return wl(ite).scale(249.5).clipAngle(90+ze)},stereographic:function i5e(){return wl(rte).scale(250).clipAngle(142)},transversemercator:function r5e(){var e=Jee(ote),n=e.center,t=e.rotate;return e.center=function(i){return arguments.length?n([-i[1],i[0]]):[(i=n())[1],-i[0]]},e.rotate=function(i){return arguments.length?t([i[0],i[1],i.length>2?i[2]+90:90]):[(i=t())[0],i[1],i[2]-90]},t([0,0,90]).scale(159.155)}};for(const e in sS)ON(e,sS[e]);function ute(e,n,t){var i=Ho(e,n-ze,t).concat(n);return function(r){return i.map(function(o){return[r,o]})}}function dte(e,n,t){var i=Ho(e,n-ze,t).concat(n);return function(r){return i.map(function(o){return[o,r]})}}function h5e(){}const Mc=[[],[[[1,1.5],[.5,1]]],[[[1.5,1],[1,1.5]]],[[[1.5,1],[.5,1]]],[[[1,.5],[1.5,1]]],[[[1,1.5],[.5,1]],[[1,.5],[1.5,1]]],[[[1,.5],[1,1.5]]],[[[1,.5],[.5,1]]],[[[.5,1],[1,.5]]],[[[1,1.5],[1,.5]]],[[[.5,1],[1,.5]],[[1.5,1],[1,1.5]]],[[[1.5,1],[1,.5]]],[[[.5,1],[1.5,1]]],[[[1,1.5],[1.5,1]]],[[[.5,1],[1,1.5]]],[]];function hte(){var e=1,n=1,t=a;function i(l,c){return c.map(u=>r(l,u))}function r(l,c){var u=[],d=[];return function o(l,c,u){var h,p,m,_,y,d=new Array,f=new Array;for(h=p=-1,Mc[(m=l[0]>=c)<<1].forEach(v);++h<e-1;)Mc[m|(m=l[h+1]>=c)<<1].forEach(v);for(Mc[m<<0].forEach(v);++p<n-1;){for(h=-1,Mc[(m=l[p*e+e]>=c)<<1|(_=l[p*e]>=c)<<2].forEach(v);++h<e-1;)y=_,Mc[m|(m=l[p*e+e+h+1]>=c)<<1|(_=l[p*e+h+1]>=c)<<2|y<<3].forEach(v);Mc[m|_<<3].forEach(v)}for(h=-1,Mc[(_=l[p*e]>=c)<<2].forEach(v);++h<e-1;)y=_,Mc[(_=l[p*e+h+1]>=c)<<2|y<<3].forEach(v);function v(b){var A,M,w=[b[0][0]+h,b[0][1]+p],x=[b[1][0]+h,b[1][1]+p],C=s(w),S=s(x);(A=f[C])?(M=d[S])?(delete f[A.end],delete d[M.start],A===M?(A.ring.push(x),u(A.ring)):d[A.start]=f[M.end]={start:A.start,end:M.end,ring:A.ring.concat(M.ring)}):(delete f[A.end],A.ring.push(x),f[A.end=S]=A):(A=d[S])?(M=f[C])?(delete d[A.start],delete f[M.end],A===M?(A.ring.push(x),u(A.ring)):d[M.start]=f[A.end]={start:M.start,end:A.end,ring:M.ring.concat(A.ring)}):(delete d[A.start],A.ring.unshift(w),d[A.start=C]=A):d[C]=f[S]={start:C,end:S,ring:[w,x]}}Mc[_<<3].forEach(v)}(l,c,f=>{t(f,l,c),function p5e(e){for(var n=0,t=e.length,i=e[t-1][1]*e[0][0]-e[t-1][0]*e[0][1];++n<t;)i+=e[n-1][1]*e[n][0]-e[n-1][0]*e[n][1];return i}(f)>0?u.push([f]):d.push(f)}),d.forEach(f=>{for(var g,h=0,p=u.length;h<p;++h)if(-1!==g5e((g=u[h])[0],f))return void g.push(f)}),{type:"MultiPolygon",value:c,coordinates:u}}function s(l){return 2*l[0]+l[1]*(e+1)*4}function a(l,c,u){l.forEach(d=>{var m,f=d[0],h=d[1],p=0|f,g=0|h,_=c[g*e+p];f>0&&f<e&&p===f&&(d[0]=f+(u-(m=c[g*e+p-1]))/(_-m)-.5),h>0&&h<n&&g===h&&(d[1]=h+(u-(m=c[(g-1)*e+p]))/(_-m)-.5)})}return i.contour=r,i.size=function(l){if(!arguments.length)return[e,n];var c=Math.floor(l[0]),u=Math.floor(l[1]);return c>=0&&u>=0||re("invalid size"),e=c,n=u,i},i.smooth=function(l){return arguments.length?(t=l?a:h5e,i):t===a},i}function g5e(e,n){for(var r,t=-1,i=n.length;++t<i;)if(r=m5e(e,n[t]))return r;return 0}function m5e(e,n){for(var t=n[0],i=n[1],r=-1,o=0,s=e.length,a=s-1;o<s;a=o++){var l=e[o],c=l[0],u=l[1],d=e[a],f=d[0],h=d[1];if(_5e(l,d,n))return 0;u>i!=h>i&&t<(f-c)*(i-u)/(h-u)+c&&(r=-r)}return r}function _5e(e,n,t){var i;return function y5e(e,n,t){return(n[0]-e[0])*(t[1]-e[1])==(t[0]-e[0])*(n[1]-e[1])}(e,n,t)&&function v5e(e,n,t){return e<=n&&n<=t||t<=n&&n<=e}(e[i=+(e[0]===n[0])],t[i],n[i])}function pte(e,n,t){return function(i){var r=al(i),o=t?Math.min(r[0],0):r[0],s=r[1],a=s-o,l=n?ku(o,s,e):a/(e+1);return Ho(o+l,s,l)}}function RN(e){Z.call(this,null,e)}function gte(e,n,t,i,r){const o=e.x1||0,s=e.y1||0,a=n*t<0;function l(d){d.forEach(c)}function c(d){a&&d.reverse(),d.forEach(u)}function u(d){d[0]=(d[0]-o)*n+i,d[1]=(d[1]-s)*t+r}return function(d){return d.coordinates.forEach(l),d}}function mte(e,n,t){const i=e>=0?e:u3(n,t);return Math.round((Math.sqrt(4*i*i+1)-1)/2)}function FN(e){return ct(e)?e:rr(+e)}function _te(){var e=l=>l[0],n=l=>l[1],t=bg,i=[-1,-1],r=960,o=500,s=2;function a(l,c){const u=mte(i[0],l,e)>>s,d=mte(i[1],l,n)>>s,f=u?u+2:0,h=d?d+2:0,p=2*f+(r>>s),g=2*h+(o>>s),m=new Float32Array(p*g),_=new Float32Array(p*g);let y=m;l.forEach(b=>{const w=f+(+e(b)>>s),x=h+(+n(b)>>s);w>=0&&w<p&&x>=0&&x<g&&(m[w+x*p]+=+t(b))}),u>0&&d>0?(lm(p,g,m,_,u),cm(p,g,_,m,d),lm(p,g,m,_,u),cm(p,g,_,m,d),lm(p,g,m,_,u),cm(p,g,_,m,d)):u>0?(lm(p,g,m,_,u),lm(p,g,_,m,u),lm(p,g,m,_,u),y=_):d>0&&(cm(p,g,m,_,d),cm(p,g,_,m,d),cm(p,g,m,_,d),y=_);const v=c?Math.pow(2,-2*s):1/UJ(y);for(let b=0,w=p*g;b<w;++b)y[b]*=v;return{values:y,scale:1<<s,width:p,height:g,x1:f,y1:h,x2:f+(r>>s),y2:h+(o>>s)}}return a.x=function(l){return arguments.length?(e=FN(l),a):e},a.y=function(l){return arguments.length?(n=FN(l),a):n},a.weight=function(l){return arguments.length?(t=FN(l),a):t},a.size=function(l){if(!arguments.length)return[r,o];var c=+l[0],u=+l[1];return c>=0&&u>=0||re("invalid size"),r=c,o=u,a},a.cellSize=function(l){return arguments.length?((l=+l)>=1||re("invalid cell size"),s=Math.floor(Math.log(l)/Math.LN2),a):1<<s},a.bandwidth=function(l){return arguments.length?(1===(l=Ce(l)).length&&(l=[+l[0],+l[0]]),2!==l.length&&re("invalid bandwidth"),i=l,a):i},a}function lm(e,n,t,i,r){const o=1+(r<<1);for(let s=0;s<n;++s)for(let a=0,l=0;a<e+r;++a)a<e&&(l+=t[a+s*e]),a>=r&&(a>=o&&(l-=t[a-o+s*e]),i[a-r+s*e]=l/Math.min(a+1,e-1+o-a,o))}function cm(e,n,t,i,r){const o=1+(r<<1);for(let s=0;s<e;++s)for(let a=0,l=0;a<n+r;++a)a<n&&(l+=t[s+a*e]),a>=r&&(a>=o&&(l-=t[s+(a-o)*e]),i[s+(a-r)*e]=l/Math.min(a+1,n-1+o-a,o))}function NN(e){Z.call(this,null,e)}RN.Definition={type:"Isocontour",metadata:{generates:!0},params:[{name:"field",type:"field"},{name:"thresholds",type:"number",array:!0},{name:"levels",type:"number"},{name:"nice",type:"boolean",default:!1},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"zero",type:"boolean",default:!0},{name:"smooth",type:"boolean",default:!0},{name:"scale",type:"number",expr:!0},{name:"translate",type:"number",array:!0,expr:!0},{name:"as",type:"string",null:!0,default:"contour"}]},pe(RN,Z,{transform(e,n){if(this.value&&!n.changed()&&!e.modified())return n.StopPropagation;var t=n.fork(n.NO_SOURCE|n.NO_FIELDS),i=n.materialize(n.SOURCE).source,r=e.field||nr,o=hte().smooth(!1!==e.smooth),s=e.thresholds||function b5e(e,n,t){const i=pte(t.levels||10,t.nice,!1!==t.zero);return"shared"!==t.resolve?i:i(e.map(r=>Ff(n(r).values)))}(i,r,e),a=null===e.as?null:e.as||"contour",l=[];return i.forEach(c=>{const u=r(c),d=o.size([u.width,u.height])(u.values,oe(s)?s:s(u.values));(function w5e(e,n,t,i){let r=i.scale||n.scale,o=i.translate||n.translate;if(ct(r)&&(r=r(t,i)),ct(o)&&(o=o(t,i)),(1===r||null==r)&&!o)return;const s=(Ft(r)?r:r[0])||1,a=(Ft(r)?r:r[1])||1;e.forEach(gte(n,s,a,o&&o[0]||0,o&&o[1]||0))})(d,u,c,e),d.forEach(f=>{l.push(rx(c,qt(null!=a?{[a]:f}:f)))})}),this.value&&(t.rem=this.value),this.value=t.source=t.add=l,t}}),NN.Definition={type:"KDE2D",metadata:{generates:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"weight",type:"field"},{name:"groupby",type:"field",array:!0},{name:"cellSize",type:"number"},{name:"bandwidth",type:"number",array:!0,length:2},{name:"counts",type:"boolean",default:!1},{name:"as",type:"string",default:"grid"}]};const C5e=["x","y","weight","size","cellSize","bandwidth"];function yte(e,n){return C5e.forEach(t=>null!=n[t]?e[t](n[t]):0),e}function PN(e){Z.call(this,null,e)}pe(NN,Z,{transform(e,n){if(this.value&&!n.changed()&&!e.modified())return n.StopPropagation;var l,t=n.fork(n.NO_SOURCE|n.NO_FIELDS),r=function x5e(e,n){var r,o,s,a,l,c,t=[],i=u=>u(a);if(null==n)t.push(e);else for(r={},o=0,s=e.length;o<s;++o)a=e[o],(c=r[l=n.map(i)])||(r[l]=c=[],c.dims=l,t.push(c)),c.push(a);return t}(n.materialize(n.SOURCE).source,e.groupby),o=(e.groupby||[]).map(Ln),s=yte(_te(),e),a=e.as||"grid";return l=r.map(u=>qt(function c(u,d){for(let f=0;f<o.length;++f)u[o[f]]=d[f];return u}({[a]:s(u,e.counts)},u.dims))),this.value&&(t.rem=this.value),this.value=t.source=t.add=l,t}}),PN.Definition={type:"Contour",metadata:{generates:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"values",type:"number",array:!0},{name:"x",type:"field"},{name:"y",type:"field"},{name:"weight",type:"field"},{name:"cellSize",type:"number"},{name:"bandwidth",type:"number"},{name:"count",type:"number"},{name:"nice",type:"boolean",default:!1},{name:"thresholds",type:"number",array:!0},{name:"smooth",type:"boolean",default:!0}]},pe(PN,Z,{transform(e,n){if(this.value&&!n.changed()&&!e.modified())return n.StopPropagation;var a,l,t=n.fork(n.NO_SOURCE|n.NO_FIELDS),i=hte().smooth(!1!==e.smooth),r=e.values,o=e.thresholds||pte(e.count||10,e.nice,!!r),s=e.size;return r||(r=n.materialize(n.SOURCE).source,l=gte(a=yte(_te(),e)(r,!0),a.scale||1,a.scale||1,0,0),s=[a.width,a.height],r=a.values),o=oe(o)?o:o(r),r=i.size(s)(r,o),l&&r.forEach(l),this.value&&(t.rem=this.value),this.value=t.source=t.add=(r||[]).map(qt),t}});const LN="Feature",$N="FeatureCollection";function BN(e){Z.call(this,null,e)}function VN(e){Z.call(this,null,e)}function zN(e){Z.call(this,null,e)}function UN(e){Z.call(this,null,e)}function HN(e){Z.call(this,[],e),this.generator=function fte(){var e,n,t,i,r,o,s,a,f,h,p,g,l=10,c=l,u=90,d=360,m=2.5;function _(){return{type:"MultiLineString",coordinates:y()}}function y(){return Ho(PE(i/u)*u,t,u).map(p).concat(Ho(PE(a/d)*d,s,d).map(g)).concat(Ho(PE(n/l)*l,e,l).filter(function(v){return Dt(v%u)>ze}).map(f)).concat(Ho(PE(o/c)*c,r,c).filter(function(v){return Dt(v%d)>ze}).map(h))}return _.lines=function(){return y().map(function(v){return{type:"LineString",coordinates:v}})},_.outline=function(){return{type:"Polygon",coordinates:[p(i).concat(g(s).slice(1),p(t).reverse().slice(1),g(a).reverse().slice(1))]}},_.extent=function(v){return arguments.length?_.extentMajor(v).extentMinor(v):_.extentMinor()},_.extentMajor=function(v){return arguments.length?(a=+v[0][1],s=+v[1][1],(i=+v[0][0])>(t=+v[1][0])&&(v=i,i=t,t=v),a>s&&(v=a,a=s,s=v),_.precision(m)):[[i,a],[t,s]]},_.extentMinor=function(v){return arguments.length?(o=+v[0][1],r=+v[1][1],(n=+v[0][0])>(e=+v[1][0])&&(v=n,n=e,e=v),o>r&&(v=o,o=r,r=v),_.precision(m)):[[n,o],[e,r]]},_.step=function(v){return arguments.length?_.stepMajor(v).stepMinor(v):_.stepMinor()},_.stepMajor=function(v){return arguments.length?(u=+v[0],d=+v[1],_):[u,d]},_.stepMinor=function(v){return arguments.length?(l=+v[0],c=+v[1],_):[l,c]},_.precision=function(v){return arguments.length?(m=+v,f=ute(o,r,90),h=dte(n,e,m),p=ute(a,s,90),g=dte(i,t,m),_):m},_.extentMajor([[-180,-90+ze],[180,90-ze]]).extentMinor([[-180,-80-ze],[180,80+ze]])}()}function jN(e){Z.call(this,null,e)}function vte(e){if(!ct(e))return!1;const n=oa(tr(e));return n.$x||n.$y||n.$value||n.$max}function bte(e){Z.call(this,null,e),this.modified(!0)}function wte(e,n,t){ct(e[n])&&e[n](t)}function Cte(e,n,t,i){if(isNaN(n)||isNaN(t))return e;var r,d,f,h,p,g,m,_,y,o=e._root,s={data:i},a=e._x0,l=e._y0,c=e._x1,u=e._y1;if(!o)return e._root=s,e;for(;o.length;)if((g=n>=(d=(a+c)/2))?a=d:c=d,(m=t>=(f=(l+u)/2))?l=f:u=f,r=o,!(o=o[_=m<<1|g]))return r[_]=s,e;if(h=+e._x.call(null,o.data),p=+e._y.call(null,o.data),n===h&&t===p)return s.next=o,r?r[_]=s:e._root=s,e;do{r=r?r[_]=new Array(4):e._root=new Array(4),(g=n>=(d=(a+c)/2))?a=d:c=d,(m=t>=(f=(l+u)/2))?l=f:u=f}while((_=m<<1|g)==(y=(p>=f)<<1|h>=d));return r[y]=o,r[_]=s,e}function Fr(e,n,t,i,r){this.node=e,this.x0=n,this.y0=t,this.x1=i,this.y1=r}function G5e(e){return e[0]}function Y5e(e){return e[1]}function qN(e,n,t){var i=new WN(n??G5e,t??Y5e,NaN,NaN,NaN,NaN);return null==e?i:i.addAll(e)}function WN(e,n,t,i,r,o){this._x=e,this._y=n,this._x0=t,this._y0=i,this._x1=r,this._y1=o,this._root=void 0}function xte(e){for(var n={data:e.data},t=n;e=e.next;)t=t.next={data:e.data};return n}BN.Definition={type:"GeoJSON",metadata:{},params:[{name:"fields",type:"field",array:!0,length:2},{name:"geojson",type:"field"}]},pe(BN,Z,{transform(e,n){var c,t=this._features,i=this._points,r=e.fields,o=r&&r[0],s=r&&r[1],a=e.geojson||!r&&nr,l=n.ADD;c=e.modified()||n.changed(n.REM)||n.modified(tr(a))||o&&n.modified(tr(o))||s&&n.modified(tr(s)),(!this.value||c)&&(l=n.SOURCE,this._features=t=[],this._points=i=[]),a&&n.visit(l,u=>t.push(a(u))),o&&s&&(n.visit(l,u=>{var d=o(u),f=s(u);null!=d&&null!=f&&(d=+d)===d&&(f=+f)===f&&i.push([d,f])}),t=t.concat({type:LN,geometry:{type:"MultiPoint",coordinates:i}})),this.value={type:$N,features:t}}}),VN.Definition={type:"GeoPath",metadata:{modifies:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",default:"path"}]},pe(VN,Z,{transform(e,n){var t=n.fork(n.ALL),i=this.value,r=e.field||nr,o=e.as||"path",s=t.SOURCE;!i||e.modified()?(this.value=i=cte(e.projection),t.materialize().reflow()):s=r===nr||n.modified(r.fields)?t.ADD_MOD:t.ADD;const a=function S5e(e,n){const t=e.pointRadius();return e.context(null),null!=n&&e.pointRadius(n),t}(i,e.pointRadius);return t.visit(s,l=>l[o]=i(r(l))),i.pointRadius(a),t.modifies(o)}}),zN.Definition={type:"GeoPoint",metadata:{modifies:!0},params:[{name:"projection",type:"projection",required:!0},{name:"fields",type:"field",array:!0,required:!0,length:2},{name:"as",type:"string",array:!0,length:2,default:["x","y"]}]},pe(zN,Z,{transform(e,n){var l,t=e.projection,i=e.fields[0],r=e.fields[1],o=e.as||["x","y"],s=o[0],a=o[1];function c(u){const d=t([i(u),r(u)]);d?(u[s]=d[0],u[a]=d[1]):(u[s]=void 0,u[a]=void 0)}return e.modified()?n=n.materialize().reflow(!0).visit(n.SOURCE,c):(l=n.modified(i.fields)||n.modified(r.fields),n.visit(l?n.ADD_MOD:n.ADD,c)),n.modifies(o)}}),UN.Definition={type:"GeoShape",metadata:{modifies:!0,nomod:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field",default:"datum"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",default:"shape"}]},pe(UN,Z,{transform(e,n){var t=n.fork(n.ALL),i=this.value,r=e.as||"shape",o=t.ADD;return(!i||e.modified())&&(this.value=i=function T5e(e,n,t){const i=null==t?r=>e(n(r)):r=>{var o=e.pointRadius(),s=e.pointRadius(t)(n(r));return e.pointRadius(o),s};return i.context=r=>(e.context(r),i),i}(cte(e.projection),e.field||Cs("datum"),e.pointRadius),t.materialize().reflow(),o=t.SOURCE),t.visit(o,s=>s[r]=i),t.modifies(r)}}),HN.Definition={type:"Graticule",metadata:{changes:!0,generates:!0},params:[{name:"extent",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMajor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMinor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"step",type:"number",array:!0,length:2},{name:"stepMajor",type:"number",array:!0,length:2,default:[90,360]},{name:"stepMinor",type:"number",array:!0,length:2,default:[10,10]},{name:"precision",type:"number",default:2.5}]},pe(HN,Z,{transform(e,n){var r,t=this.value,i=this.generator;if(!t.length||e.modified())for(const o in e)ct(i[o])&&i[o](e[o]);return r=i(),t.length?n.mod.push(MK(t[0],r)):n.add.push(qt(r)),t[0]=r,n}}),jN.Definition={type:"heatmap",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"color",type:"string",expr:!0},{name:"opacity",type:"number",expr:!0},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"as",type:"string",default:"image"}]},pe(jN,Z,{transform(e,n){if(!n.changed()&&!e.modified())return n.StopPropagation;var t=n.materialize(n.SOURCE).source,i="shared"===e.resolve,r=e.field||nr,o=function I5e(e,n){let t;return ct(e)?(t=i=>e(i,n),t.dep=vte(e)):e?t=rr(e):(t=i=>i.$value/i.$max||0,t.dep=!0),t}(e.opacity,e),s=function D5e(e,n){let t;return ct(e)?(t=i=>zu(e(i,n)),t.dep=vte(e)):t=rr(zu(e||"#888")),t}(e.color,e),a=e.as||"image",l={$x:0,$y:0,$value:0,$max:i?Ff(t.map(c=>Ff(r(c).values))):0};return t.forEach(c=>{const u=r(c),d=ut({},c,l);i||(d.$max=Ff(u.values||[])),c[a]=function M5e(e,n,t,i){const r=e.width,s=e.x1||0,a=e.y1||0,l=e.x2||r,c=e.y2||e.height,u=e.values,d=u?m=>u[m]:Tu,f=Bu(l-s,c-a),h=f.getContext("2d"),p=h.getImageData(0,0,l-s,c-a),g=p.data;for(let m=a,_=0;m<c;++m){n.$y=m-a;for(let y=s,v=m*r;y<l;++y,_+=4){n.$x=y-s,n.$value=d(y+v);const b=t(n);g[_+0]=b.r,g[_+1]=b.g,g[_+2]=b.b,g[_+3]=~~(255*i(n))}}return h.putImageData(p,0,0),f}(u,d,s.dep?s:rr(s(d)),o.dep?o:rr(o(d)))}),n.reflow(!0).modifies(a)}}),pe(bte,Z,{transform(e,n){let t=this.value;return!t||e.modified("type")?(this.value=t=function k5e(e){const n=ON((e||"mercator").toLowerCase());return n||re("Unrecognized projection type: "+e),n()}(e.type),kN.forEach(i=>{null!=e[i]&&wte(t,i,e[i])})):kN.forEach(i=>{e.modified(i)&&wte(t,i,e[i])}),null!=e.pointRadius&&t.path.pointRadius(e.pointRadius),e.fit&&function A5e(e,n){const t=function O5e(e){return 1===(e=Ce(e)).length?e[0]:{type:$N,features:e.reduce((n,t)=>n.concat(function R5e(e){return e.type===$N?e.features:Ce(e).filter(n=>null!=n).map(n=>n.type===LN?n:{type:LN,geometry:n})}(t)),[])}}(n.fit);n.extent?e.fitExtent(n.extent,t):n.size&&e.fitSize(n.size,t)}(t,e),n.fork(n.NO_SOURCE|n.NO_FIELDS)}});var Nr=qN.prototype=WN.prototype;function Pr(e){return function(){return e}}function ad(e){return 1e-6*(e()-.5)}function Q5e(e){return e.x+e.vx}function Z5e(e){return e.y+e.vy}Nr.copy=function(){var t,i,e=new WN(this._x,this._y,this._x0,this._y0,this._x1,this._y1),n=this._root;if(!n)return e;if(!n.length)return e._root=xte(n),e;for(t=[{source:n,target:e._root=new Array(4)}];n=t.pop();)for(var r=0;r<4;++r)(i=n.source[r])&&(i.length?t.push({source:i,target:n.target[r]=new Array(4)}):n.target[r]=xte(i));return e},Nr.add=function N5e(e){const n=+this._x.call(null,e),t=+this._y.call(null,e);return Cte(this.cover(n,t),n,t,e)},Nr.addAll=function P5e(e){var n,t,r,o,i=e.length,s=new Array(i),a=new Array(i),l=1/0,c=1/0,u=-1/0,d=-1/0;for(t=0;t<i;++t)isNaN(r=+this._x.call(null,n=e[t]))||isNaN(o=+this._y.call(null,n))||(s[t]=r,a[t]=o,r<l&&(l=r),r>u&&(u=r),o<c&&(c=o),o>d&&(d=o));if(l>u||c>d)return this;for(this.cover(l,c).cover(u,d),t=0;t<i;++t)Cte(this,s[t],a[t],e[t]);return this},Nr.cover=function L5e(e,n){if(isNaN(e=+e)||isNaN(n=+n))return this;var t=this._x0,i=this._y0,r=this._x1,o=this._y1;if(isNaN(t))r=(t=Math.floor(e))+1,o=(i=Math.floor(n))+1;else{for(var l,c,s=r-t||1,a=this._root;t>e||e>=r||i>n||n>=o;)switch(c=(n<i)<<1|e<t,l=new Array(4),l[c]=a,a=l,s*=2,c){case 0:r=t+s,o=i+s;break;case 1:t=r-s,o=i+s;break;case 2:r=t+s,i=o-s;break;case 3:t=r-s,i=o-s}this._root&&this._root.length&&(this._root=a)}return this._x0=t,this._y0=i,this._x1=r,this._y1=o,this},Nr.data=function $5e(){var e=[];return this.visit(function(n){if(!n.length)do{e.push(n.data)}while(n=n.next)}),e},Nr.extent=function B5e(e){return arguments.length?this.cover(+e[0][0],+e[0][1]).cover(+e[1][0],+e[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]},Nr.find=function V5e(e,n,t){var i,s,a,l,c,p,g,r=this._x0,o=this._y0,u=this._x1,d=this._y1,f=[],h=this._root;for(h&&f.push(new Fr(h,r,o,u,d)),null==t?t=1/0:(r=e-t,o=n-t,u=e+t,d=n+t,t*=t);p=f.pop();)if(!(!(h=p.node)||(s=p.x0)>u||(a=p.y0)>d||(l=p.x1)<r||(c=p.y1)<o))if(h.length){var m=(s+l)/2,_=(a+c)/2;f.push(new Fr(h[3],m,_,l,c),new Fr(h[2],s,_,m,c),new Fr(h[1],m,a,l,_),new Fr(h[0],s,a,m,_)),(g=(n>=_)<<1|e>=m)&&(p=f[f.length-1],f[f.length-1]=f[f.length-1-g],f[f.length-1-g]=p)}else{var y=e-+this._x.call(null,h.data),v=n-+this._y.call(null,h.data),b=y*y+v*v;if(b<t){var w=Math.sqrt(t=b);r=e-w,o=n-w,u=e+w,d=n+w,i=h.data}}return i},Nr.remove=function z5e(e){if(isNaN(u=+this._x.call(null,e))||isNaN(d=+this._y.call(null,e)))return this;var n,i,r,o,u,d,f,h,p,g,m,_,t=this._root,s=this._x0,a=this._y0,l=this._x1,c=this._y1;if(!t)return this;if(t.length)for(;;){if((p=u>=(f=(s+l)/2))?s=f:l=f,(g=d>=(h=(a+c)/2))?a=h:c=h,n=t,!(t=t[m=g<<1|p]))return this;if(!t.length)break;(n[m+1&3]||n[m+2&3]||n[m+3&3])&&(i=n,_=m)}for(;t.data!==e;)if(r=t,!(t=t.next))return this;return(o=t.next)&&delete t.next,r?(o?r.next=o:delete r.next,this):n?(o?n[m]=o:delete n[m],(t=n[0]||n[1]||n[2]||n[3])&&t===(n[3]||n[2]||n[1]||n[0])&&!t.length&&(i?i[_]=t:this._root=t),this):(this._root=o,this)},Nr.removeAll=function U5e(e){for(var n=0,t=e.length;n<t;++n)this.remove(e[n]);return this},Nr.root=function H5e(){return this._root},Nr.size=function j5e(){var e=0;return this.visit(function(n){if(!n.length)do{++e}while(n=n.next)}),e},Nr.visit=function q5e(e){var t,r,o,s,a,l,n=[],i=this._root;for(i&&n.push(new Fr(i,this._x0,this._y0,this._x1,this._y1));t=n.pop();)if(!e(i=t.node,o=t.x0,s=t.y0,a=t.x1,l=t.y1)&&i.length){var c=(o+a)/2,u=(s+l)/2;(r=i[3])&&n.push(new Fr(r,c,u,a,l)),(r=i[2])&&n.push(new Fr(r,o,u,c,l)),(r=i[1])&&n.push(new Fr(r,c,s,a,u)),(r=i[0])&&n.push(new Fr(r,o,s,c,u))}return this},Nr.visitAfter=function W5e(e){var i,n=[],t=[];for(this._root&&n.push(new Fr(this._root,this._x0,this._y0,this._x1,this._y1));i=n.pop();){var r=i.node;if(r.length){var o,s=i.x0,a=i.y0,l=i.x1,c=i.y1,u=(s+l)/2,d=(a+c)/2;(o=r[0])&&n.push(new Fr(o,s,a,u,d)),(o=r[1])&&n.push(new Fr(o,u,a,l,d)),(o=r[2])&&n.push(new Fr(o,s,d,u,c)),(o=r[3])&&n.push(new Fr(o,u,d,l,c))}t.push(i)}for(;i=t.pop();)e(i.node,i.x0,i.y0,i.x1,i.y1);return this},Nr.x=function K5e(e){return arguments.length?(this._x=e,this):this._x},Nr.y=function X5e(e){return arguments.length?(this._y=e,this):this._y};var e6e={value:()=>{}};function Ete(){for(var i,e=0,n=arguments.length,t={};e<n;++e){if(!(i=arguments[e]+"")||i in t||/[\s.]/.test(i))throw new Error("illegal type: "+i);t[i]=[]}return new aS(t)}function aS(e){this._=e}function n6e(e,n){for(var r,t=0,i=e.length;t<i;++t)if((r=e[t]).name===n)return r.value}function Ste(e,n,t){for(var i=0,r=e.length;i<r;++i)if(e[i].name===n){e[i]=e6e,e=e.slice(0,i).concat(e.slice(i+1));break}return null!=t&&e.push({name:n,value:t}),e}aS.prototype=Ete.prototype={constructor:aS,on:function(e,n){var r,t=this._,i=function t6e(e,n){return e.trim().split(/^|\s+/).map(function(t){var i="",r=t.indexOf(".");if(r>=0&&(i=t.slice(r+1),t=t.slice(0,r)),t&&!n.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:i}})}(e+"",t),o=-1,s=i.length;if(!(arguments.length<2)){if(null!=n&&"function"!=typeof n)throw new Error("invalid callback: "+n);for(;++o<s;)if(r=(e=i[o]).type)t[r]=Ste(t[r],e.name,n);else if(null==n)for(r in t)t[r]=Ste(t[r],e.name,null);return this}for(;++o<s;)if((r=(e=i[o]).type)&&(r=n6e(t[r],e.name)))return r},copy:function(){var e={},n=this._;for(var t in n)e[t]=n[t].slice();return new aS(e)},call:function(e,n){if((r=arguments.length-2)>0)for(var r,o,t=new Array(r),i=0;i<r;++i)t[i]=arguments[i+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(i=0,r=(o=this._[e]).length;i<r;++i)o[i].value.apply(n,t)},apply:function(e,n,t){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var i=this._[e],r=0,o=i.length;r<o;++r)i[r].value.apply(n,t)}};const i6e=Ete;var lS,y1,um=0,m1=0,_1=0,Tte=1e3,cS=0,Zf=0,uS=0,v1="object"==typeof performance&&performance.now?performance:Date,Dte="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function GN(){return Zf||(Dte(r6e),Zf=v1.now()+uS)}function r6e(){Zf=0}function dS(){this._call=this._time=this._next=null}function Ite(e,n,t){var i=new dS;return i.restart(e,n,t),i}function Mte(){Zf=(cS=v1.now())+uS,um=m1=0;try{!function o6e(){GN(),++um;for(var n,e=lS;e;)(n=Zf-e._time)>=0&&e._call.call(void 0,n),e=e._next;--um}()}finally{um=0,function a6e(){for(var e,t,n=lS,i=1/0;n;)n._call?(i>n._time&&(i=n._time),e=n,n=n._next):(t=n._next,n._next=null,n=e?e._next=t:lS=t);y1=e,KN(i)}(),Zf=0}}function s6e(){var e=v1.now(),n=e-cS;n>Tte&&(uS-=n,cS=e)}function KN(e){um||(m1&&(m1=clearTimeout(m1)),e-Zf>24?(e<1/0&&(m1=setTimeout(Mte,e-v1.now()-uS)),_1&&(_1=clearInterval(_1))):(_1||(cS=v1.now(),_1=setInterval(s6e,Tte)),um=1,Dte(Mte)))}dS.prototype=Ite.prototype={constructor:dS,restart:function(e,n,t){if("function"!=typeof e)throw new TypeError("callback is not a function");t=(null==t?GN():+t)+(null==n?0:+n),!this._next&&y1!==this&&(y1?y1._next=this:lS=this,y1=this),this._call=e,this._time=t,KN()},stop:function(){this._call&&(this._call=null,this._time=1/0,KN())}};function d6e(e){return e.x}function f6e(e){return e.y}var p6e=Math.PI*(3-Math.sqrt(5));function _6e(e){return e.index}function kte(e,n){var t=e.get(n);if(!t)throw new Error("node not found: "+n);return t}const Ote={center:function F5e(e,n){var t,i=1;function r(){var o,a,s=t.length,l=0,c=0;for(o=0;o<s;++o)l+=(a=t[o]).x,c+=a.y;for(l=(l/s-e)*i,c=(c/s-n)*i,o=0;o<s;++o)(a=t[o]).x-=l,a.y-=c}return null==e&&(e=0),null==n&&(n=0),r.initialize=function(o){t=o},r.x=function(o){return arguments.length?(e=+o,r):e},r.y=function(o){return arguments.length?(n=+o,r):n},r.strength=function(o){return arguments.length?(i=+o,r):i},r},collide:function J5e(e){var n,t,i,r=1,o=1;function s(){for(var c,d,f,h,p,g,m,u=n.length,_=0;_<o;++_)for(d=qN(n,Q5e,Z5e).visitAfter(a),c=0;c<u;++c)m=(g=t[(f=n[c]).index])*g,h=f.x+f.vx,p=f.y+f.vy,d.visit(y);function y(v,b,w,x,C){var S=v.data,A=v.r,M=g+A;if(!S)return b>h+M||x<h-M||w>p+M||C<p-M;if(S.index>f.index){var N=h-S.x-S.vx,V=p-S.y-S.vy,P=N*N+V*V;P<M*M&&(0===N&&(P+=(N=ad(i))*N),0===V&&(P+=(V=ad(i))*V),P=(M-(P=Math.sqrt(P)))/P*r,f.vx+=(N*=P)*(M=(A*=A)/(m+A)),f.vy+=(V*=P)*M,S.vx-=N*(M=1-M),S.vy-=V*M)}}}function a(c){if(c.data)return c.r=t[c.data.index];for(var u=c.r=0;u<4;++u)c[u]&&c[u].r>c.r&&(c.r=c[u].r)}function l(){if(n){var c,d,u=n.length;for(t=new Array(u),c=0;c<u;++c)t[(d=n[c]).index]=+e(d,c,n)}}return"function"!=typeof e&&(e=Pr(null==e?1:+e)),s.initialize=function(c,u){n=c,i=u,l()},s.iterations=function(c){return arguments.length?(o=+c,s):o},s.strength=function(c){return arguments.length?(r=+c,s):r},s.radius=function(c){return arguments.length?(e="function"==typeof c?c:Pr(+c),l(),s):e},s},nbody:function m6e(){var e,n,t,i,o,r=Pr(-30),s=1,a=1/0,l=.81;function c(h){var p,g=e.length,m=qN(e,d6e,f6e).visitAfter(d);for(i=h,p=0;p<g;++p)n=e[p],m.visit(f)}function u(){if(e){var h,g,p=e.length;for(o=new Array(p),h=0;h<p;++h)o[(g=e[h]).index]=+r(g,h,e)}}function d(h){var g,m,y,v,b,p=0,_=0;if(h.length){for(y=v=b=0;b<4;++b)(g=h[b])&&(m=Math.abs(g.value))&&(p+=g.value,_+=m,y+=m*g.x,v+=m*g.y);h.x=y/_,h.y=v/_}else{(g=h).x=g.data.x,g.y=g.data.y;do{p+=o[g.data.index]}while(g=g.next)}h.value=p}function f(h,p,g,m){if(!h.value)return!0;var _=h.x-n.x,y=h.y-n.y,v=m-p,b=_*_+y*y;if(v*v/l<b)return b<a&&(0===_&&(b+=(_=ad(t))*_),0===y&&(b+=(y=ad(t))*y),b<s&&(b=Math.sqrt(s*b)),n.vx+=_*h.value*i/b,n.vy+=y*h.value*i/b),!0;if(!(h.length||b>=a)){(h.data!==n||h.next)&&(0===_&&(b+=(_=ad(t))*_),0===y&&(b+=(y=ad(t))*y),b<s&&(b=Math.sqrt(s*b)));do{h.data!==n&&(n.vx+=_*(v=o[h.data.index]*i/b),n.vy+=y*v)}while(h=h.next)}}return c.initialize=function(h,p){e=h,t=p,u()},c.strength=function(h){return arguments.length?(r="function"==typeof h?h:Pr(+h),u(),c):r},c.distanceMin=function(h){return arguments.length?(s=h*h,c):Math.sqrt(s)},c.distanceMax=function(h){return arguments.length?(a=h*h,c):Math.sqrt(a)},c.theta=function(h){return arguments.length?(l=h*h,c):Math.sqrt(l)},c},link:function y6e(e){var i,o,s,a,l,c,n=_6e,t=function d(m){return 1/Math.min(a[m.source.index],a[m.target.index])},r=Pr(30),u=1;function f(m){for(var _=0,y=e.length;_<u;++_)for(var b,w,x,C,S,A,M,v=0;v<y;++v)C=(x=(b=e[v]).target).x+x.vx-(w=b.source).x-w.vx||ad(c),S=x.y+x.vy-w.y-w.vy||ad(c),S*=A=((A=Math.sqrt(C*C+S*S))-o[v])/A*m*i[v],x.vx-=(C*=A)*(M=l[v]),x.vy-=S*M,w.vx+=C*(M=1-M),w.vy+=S*M}function h(){if(s){var m,b,_=s.length,y=e.length,v=new Map(s.map((w,x)=>[n(w,x,s),w]));for(m=0,a=new Array(_);m<y;++m)(b=e[m]).index=m,"object"!=typeof b.source&&(b.source=kte(v,b.source)),"object"!=typeof b.target&&(b.target=kte(v,b.target)),a[b.source.index]=(a[b.source.index]||0)+1,a[b.target.index]=(a[b.target.index]||0)+1;for(m=0,l=new Array(y);m<y;++m)l[m]=a[(b=e[m]).source.index]/(a[b.source.index]+a[b.target.index]);i=new Array(y),p(),o=new Array(y),g()}}function p(){if(s)for(var m=0,_=e.length;m<_;++m)i[m]=+t(e[m],m,e)}function g(){if(s)for(var m=0,_=e.length;m<_;++m)o[m]=+r(e[m],m,e)}return null==e&&(e=[]),f.initialize=function(m,_){s=m,c=_,h()},f.links=function(m){return arguments.length?(e=m,h(),f):e},f.id=function(m){return arguments.length?(n=m,f):n},f.iterations=function(m){return arguments.length?(u=+m,f):u},f.strength=function(m){return arguments.length?(t="function"==typeof m?m:Pr(+m),p(),f):t},f.distance=function(m){return arguments.length?(r="function"==typeof m?m:Pr(+m),g(),f):r},f},x:function v6e(e){var t,i,r,n=Pr(.1);function o(a){for(var u,l=0,c=t.length;l<c;++l)(u=t[l]).vx+=(r[l]-u.x)*i[l]*a}function s(){if(t){var a,l=t.length;for(i=new Array(l),r=new Array(l),a=0;a<l;++a)i[a]=isNaN(r[a]=+e(t[a],a,t))?0:+n(t[a],a,t)}}return"function"!=typeof e&&(e=Pr(null==e?0:+e)),o.initialize=function(a){t=a,s()},o.strength=function(a){return arguments.length?(n="function"==typeof a?a:Pr(+a),s(),o):n},o.x=function(a){return arguments.length?(e="function"==typeof a?a:Pr(+a),s(),o):e},o},y:function b6e(e){var t,i,r,n=Pr(.1);function o(a){for(var u,l=0,c=t.length;l<c;++l)(u=t[l]).vy+=(r[l]-u.y)*i[l]*a}function s(){if(t){var a,l=t.length;for(i=new Array(l),r=new Array(l),a=0;a<l;++a)i[a]=isNaN(r[a]=+e(t[a],a,t))?0:+n(t[a],a,t)}}return"function"!=typeof e&&(e=Pr(null==e?0:+e)),o.initialize=function(a){t=a,s()},o.strength=function(a){return arguments.length?(n="function"==typeof a?a:Pr(+a),s(),o):n},o.y=function(a){return arguments.length?(e="function"==typeof a?a:Pr(+a),s(),o):e},o}},b1="forces",YN=["alpha","alphaMin","alphaTarget","velocityDecay","forces"],w6e=["static","iterations"],Rte=["x","y","vx","vy"];function XN(e){Z.call(this,null,e)}function Fte(e,n,t,i){var o,s,a,l,r=Ce(n.forces);for(o=0,s=YN.length;o<s;++o)(a=YN[o])!==b1&&n.modified(a)&&e[a](n[a]);for(o=0,s=r.length;o<s;++o)l=b1+o,(a=t||n.modified(b1,o)?S6e(r[o]):i&&E6e(r[o],i)?e.force(l):null)&&e.force(l,a);for(s=e.numForces||0;o<s;++o)e.force(b1+o,null);return e.numForces=r.length,e}function E6e(e,n){var t,i;for(t in e)if(ct(i=e[t])&&n.modified(tr(i)))return 1;return 0}function S6e(e){var n,t;for(t in $e(Ote,e.force)||re("Unrecognized force: "+e.force),n=Ote[e.force](),e)ct(n[t])&&T6e(n[t],e[t],e);return n}function T6e(e,n,t){e(ct(n)?i=>n(i,t):n)}function D6e(e){var n=0,t=e.children,i=t&&t.length;if(i)for(;--i>=0;)n+=t[i].value;else n=1;e.value=n}function QN(e,n){e instanceof Map?(e=[void 0,e],void 0===n&&(n=j6e)):void 0===n&&(n=H6e);for(var i,o,s,a,l,t=new dm(e),r=[t];i=r.pop();)if((s=n(i.data))&&(l=(s=Array.from(s)).length))for(i.children=s,a=l-1;a>=0;--a)r.push(o=s[a]=new dm(s[a])),o.parent=i,o.depth=i.depth+1;return t.eachBefore(Nte)}function H6e(e){return e.children}function j6e(e){return Array.isArray(e)?e[1]:null}function q6e(e){void 0!==e.data.value&&(e.value=e.data.value),e.data=e.data.data}function Nte(e){var n=0;do{e.height=n}while((e=e.parent)&&e.height<++n)}function dm(e){this.data=e,this.depth=this.height=0,this.parent=null}function fS(e){return null==e?null:Pte(e)}function Pte(e){if("function"!=typeof e)throw new Error;return e}function Jf(){return 0}function fm(e){return function(){return e}}XN.Definition={type:"Force",metadata:{modifies:!0},params:[{name:"static",type:"boolean",default:!1},{name:"restart",type:"boolean",default:!1},{name:"iterations",type:"number",default:300},{name:"alpha",type:"number",default:1},{name:"alphaMin",type:"number",default:.001},{name:"alphaTarget",type:"number",default:0},{name:"velocityDecay",type:"number",default:.4},{name:"forces",type:"param",array:!0,params:[{key:{force:"center"},params:[{name:"x",type:"number",default:0},{name:"y",type:"number",default:0}]},{key:{force:"collide"},params:[{name:"radius",type:"number",expr:!0},{name:"strength",type:"number",default:.7},{name:"iterations",type:"number",default:1}]},{key:{force:"nbody"},params:[{name:"strength",type:"number",default:-30,expr:!0},{name:"theta",type:"number",default:.9},{name:"distanceMin",type:"number",default:1},{name:"distanceMax",type:"number"}]},{key:{force:"link"},params:[{name:"links",type:"data"},{name:"id",type:"field"},{name:"distance",type:"number",default:30,expr:!0},{name:"strength",type:"number",expr:!0},{name:"iterations",type:"number",default:1}]},{key:{force:"x"},params:[{name:"strength",type:"number",default:.1},{name:"x",type:"field"}]},{key:{force:"y"},params:[{name:"strength",type:"number",default:.1},{name:"y",type:"field"}]}]},{name:"as",type:"string",array:!0,modify:!1,default:Rte}]},pe(XN,Z,{transform(e,n){var t=this.value,i=n.changed(n.ADD_REM),r=e.modified(YN),o=e.iterations||300;if(t?(i&&(n.modifies("index"),t.nodes(n.source)),(r||n.changed(n.MOD))&&Fte(t,e,0,n)):(this.value=t=function x6e(e,n){const t=function g6e(e){var n,t=1,i=.001,r=1-Math.pow(i,1/300),o=0,s=.6,a=new Map,l=Ite(d),c=i6e("tick","end"),u=function u6e(){let e=1;return()=>(e=(1664525*e+1013904223)%4294967296)/4294967296}();function d(){f(),c.call("tick",n),t<i&&(l.stop(),c.call("end",n))}function f(g){var m,y,_=e.length;void 0===g&&(g=1);for(var v=0;v<g;++v)for(t+=(o-t)*r,a.forEach(function(b){b(t)}),m=0;m<_;++m)null==(y=e[m]).fx?y.x+=y.vx*=s:(y.x=y.fx,y.vx=0),null==y.fy?y.y+=y.vy*=s:(y.y=y.fy,y.vy=0);return n}function h(){for(var _,g=0,m=e.length;g<m;++g){if((_=e[g]).index=g,null!=_.fx&&(_.x=_.fx),null!=_.fy&&(_.y=_.fy),isNaN(_.x)||isNaN(_.y)){var y=10*Math.sqrt(.5+g),v=g*p6e;_.x=y*Math.cos(v),_.y=y*Math.sin(v)}(isNaN(_.vx)||isNaN(_.vy))&&(_.vx=_.vy=0)}}function p(g){return g.initialize&&g.initialize(e,u),g}return null==e&&(e=[]),h(),n={tick:f,restart:function(){return l.restart(d),n},stop:function(){return l.stop(),n},nodes:function(g){return arguments.length?(e=g,h(),a.forEach(p),n):e},alpha:function(g){return arguments.length?(t=+g,n):t},alphaMin:function(g){return arguments.length?(i=+g,n):i},alphaDecay:function(g){return arguments.length?(r=+g,n):+r},alphaTarget:function(g){return arguments.length?(o=+g,n):o},velocityDecay:function(g){return arguments.length?(s=1-g,n):1-s},randomSource:function(g){return arguments.length?(u=g,a.forEach(p),n):u},force:function(g,m){return arguments.length>1?(null==m?a.delete(g):a.set(g,p(m)),n):a.get(g)},find:function(g,m,_){var b,w,x,C,S,y=0,v=e.length;for(null==_?_=1/0:_*=_,y=0;y<v;++y)(x=(b=g-(C=e[y]).x)*b+(w=m-C.y)*w)<_&&(S=C,_=x);return S},on:function(g,m){return arguments.length>1?(c.on(g,m),n):c.on(g)}}}(e),i=t.stop,r=t.restart;let o=!1;return t.stopped=()=>o,t.restart=()=>(o=!1,r()),t.stop=()=>(o=!0,i()),Fte(t,n,!0).on("end",()=>o=!0)}(n.source,e),t.on("tick",function C6e(e,n){return()=>e.touch(n).run()}(n.dataflow,this)),e.static||(i=!0,t.tick()),n.modifies("index")),r||i||e.modified(w6e)||n.changed()&&e.restart)if(t.alpha(Math.max(t.alpha(),e.alpha||1)).alphaDecay(1-Math.pow(t.alphaMin(),1/o)),e.static)for(t.stop();--o>=0;)t.tick();else if(t.stopped()&&t.restart(),!i)return n.StopPropagation;return this.finish(e,n)},finish(e,n){const t=n.dataflow;for(let u,a=this._argops,l=0,c=a.length;l<c;++l)if(u=a[l],u.name===b1&&"link"===u.op._argval.force)for(var s,i=u.op._argops,r=0,o=i.length;r<o;++r)if("links"===i[r].name&&(s=i[r].op.source)){t.pulse(s,t.changeset().reflow());break}return n.reflow(e.modified()).modifies(Rte)}}),dm.prototype=QN.prototype={constructor:dm,count:function I6e(){return this.eachAfter(D6e)},each:function M6e(e,n){let t=-1;for(const i of this)e.call(n,i,++t,this);return this},eachAfter:function k6e(e,n){for(var o,s,a,t=this,i=[t],r=[],l=-1;t=i.pop();)if(r.push(t),o=t.children)for(s=0,a=o.length;s<a;++s)i.push(o[s]);for(;t=r.pop();)e.call(n,t,++l,this);return this},eachBefore:function A6e(e,n){for(var r,o,t=this,i=[t],s=-1;t=i.pop();)if(e.call(n,t,++s,this),r=t.children)for(o=r.length-1;o>=0;--o)i.push(r[o]);return this},find:function O6e(e,n){let t=-1;for(const i of this)if(e.call(n,i,++t,this))return i},sum:function R6e(e){return this.eachAfter(function(n){for(var t=+e(n.data)||0,i=n.children,r=i&&i.length;--r>=0;)t+=i[r].value;n.value=t})},sort:function F6e(e){return this.eachBefore(function(n){n.children&&n.children.sort(e)})},path:function N6e(e){for(var n=this,t=function P6e(e,n){if(e===n)return e;var t=e.ancestors(),i=n.ancestors(),r=null;for(e=t.pop(),n=i.pop();e===n;)r=e,e=t.pop(),n=i.pop();return r}(n,e),i=[n];n!==t;)i.push(n=n.parent);for(var r=i.length;e!==t;)i.splice(r,0,e),e=e.parent;return i},ancestors:function L6e(){for(var e=this,n=[e];e=e.parent;)n.push(e);return n},descendants:function $6e(){return Array.from(this)},leaves:function B6e(){var e=[];return this.eachBefore(function(n){n.children||e.push(n)}),e},links:function V6e(){var e=this,n=[];return e.each(function(t){t!==e&&n.push({source:t.parent,target:t})}),n},copy:function U6e(){return QN(this).eachBefore(q6e)},[Symbol.iterator]:function*z6e(){var n,i,r,o,e=this,t=[e];do{for(n=t.reverse(),t=[];e=n.pop();)if(yield e,i=e.children)for(r=0,o=i.length;r<o;++r)t.push(i[r])}while(t.length)}};function Q6e(e,n){var t,i;if(ZN(n,e))return[n];for(t=0;t<e.length;++t)if(hS(n,e[t])&&ZN(w1(e[t],n),e))return[e[t],n];for(t=0;t<e.length-1;++t)for(i=t+1;i<e.length;++i)if(hS(w1(e[t],e[i]),n)&&hS(w1(e[t],n),e[i])&&hS(w1(e[i],n),e[t])&&ZN(Vte(e[t],e[i],n),e))return[e[t],e[i],n];throw new Error}function hS(e,n){var t=e.r-n.r,i=n.x-e.x,r=n.y-e.y;return t<0||t*t<i*i+r*r}function Bte(e,n){var t=e.r-n.r+1e-9*Math.max(e.r,n.r,1),i=n.x-e.x,r=n.y-e.y;return t>0&&t*t>i*i+r*r}function ZN(e,n){for(var t=0;t<n.length;++t)if(!Bte(e,n[t]))return!1;return!0}function Z6e(e){switch(e.length){case 1:return function J6e(e){return{x:e.x,y:e.y,r:e.r}}(e[0]);case 2:return w1(e[0],e[1]);case 3:return Vte(e[0],e[1],e[2])}}function w1(e,n){var t=e.x,i=e.y,r=e.r,o=n.x,s=n.y,a=n.r,l=o-t,c=s-i,u=a-r,d=Math.sqrt(l*l+c*c);return{x:(t+o+l/d*u)/2,y:(i+s+c/d*u)/2,r:(d+r+a)/2}}function Vte(e,n,t){var i=e.x,r=e.y,o=e.r,s=n.x,a=n.y,l=n.r,c=t.x,u=t.y,d=t.r,f=i-s,h=i-c,p=r-a,g=r-u,m=l-o,_=d-o,y=i*i+r*r-o*o,v=y-s*s-a*a+l*l,b=y-c*c-u*u+d*d,w=h*p-f*g,x=(p*b-g*v)/(2*w)-i,C=(g*m-p*_)/w,S=(h*v-f*b)/(2*w)-r,A=(f*_-h*m)/w,M=C*C+A*A-1,N=2*(o+x*C+S*A),V=x*x+S*S-o*o,P=-(Math.abs(M)>1e-6?(N+Math.sqrt(N*N-4*M*V))/(2*M):V/N);return{x:i+x+C*P,y:r+S+A*P,r:P}}function zte(e,n,t){var r,o,a,l,i=e.x-n.x,s=e.y-n.y,c=i*i+s*s;c?(o=n.r+t.r,l=e.r+t.r,(o*=o)>(l*=l)?(r=(c+l-o)/(2*c),a=Math.sqrt(Math.max(0,l/c-r*r)),t.x=e.x-r*i-a*s,t.y=e.y-r*s+a*i):(r=(c+o-l)/(2*c),a=Math.sqrt(Math.max(0,o/c-r*r)),t.x=n.x+r*i-a*s,t.y=n.y+r*s+a*i)):(t.x=n.x+t.r,t.y=n.y)}function Ute(e,n){var t=e.r+n.r-1e-6,i=n.x-e.x,r=n.y-e.y;return t>0&&t*t>i*i+r*r}function Hte(e){var n=e._,t=e.next._,i=n.r+t.r,r=(n.x*t.r+t.x*n.r)/i,o=(n.y*t.r+t.y*n.r)/i;return r*r+o*o}function pS(e){this._=e,this.next=null,this.previous=null}function jte(e,n){if(!(o=(e=function Y6e(e){return"object"==typeof e&&"length"in e?e:Array.from(e)}(e)).length))return 0;var t,i,r,o,s,a,l,c,u,d,f;if((t=e[0]).x=0,t.y=0,!(o>1))return t.r;if(t.x=-(i=e[1]).r,i.x=t.r,i.y=0,!(o>2))return t.r+i.r;zte(i,t,r=e[2]),t=new pS(t),i=new pS(i),r=new pS(r),t.next=r.previous=i,i.next=t.previous=r,r.next=i.previous=t;e:for(l=3;l<o;++l){zte(t._,i._,r=e[l]),r=new pS(r),c=i.next,u=t.previous,d=i._.r,f=t._.r;do{if(d<=f){if(Ute(c._,r._)){t.next=i=c,i.previous=t,--l;continue e}d+=c._.r,c=c.next}else{if(Ute(u._,r._)){(t=u).next=i,i.previous=t,--l;continue e}f+=u._.r,u=u.previous}}while(c!==u.next);for(r.previous=t,r.next=i,t.next=i.previous=i=r,s=Hte(t);(r=r.next)!==i;)(a=Hte(r))<s&&(t=r,s=a);i=t.next}for(t=[i._],r=i;(r=r.next)!==i;)t.push(r._);for(r=function $te(e,n){for(var o,s,t=0,i=(e=function X6e(e,n){let i,r,t=e.length;for(;t;)r=n()*t--|0,i=e[t],e[t]=e[r],e[r]=i;return e}(Array.from(e),n)).length,r=[];t<i;)o=e[t],s&&Bte(s,o)?++t:(s=Z6e(r=Q6e(r,o)),t=0);return s}(t,n),l=0;l<o;++l)(t=e[l]).x-=r.x,t.y-=r.y;return r.r}function e9e(e){return Math.sqrt(e.value)}function qte(e){return function(n){n.children||(n.r=Math.max(0,+e(n)||0))}}function JN(e,n,t){return function(i){if(r=i.children){var r,o,l,s=r.length,a=e(i)*n||0;if(a)for(o=0;o<s;++o)r[o].r+=a;if(l=jte(r,t),a)for(o=0;o<s;++o)r[o].r-=a;i.r=l+a}}}function Wte(e){return function(n){var t=n.parent;n.r*=e,t&&(n.x=t.x+e*n.x,n.y=t.y+e*n.y)}}function Gte(e){e.x0=Math.round(e.x0),e.y0=Math.round(e.y0),e.x1=Math.round(e.x1),e.y1=Math.round(e.y1)}function C1(e,n,t,i,r){for(var s,o=e.children,a=-1,l=o.length,c=e.value&&(i-n)/e.value;++a<l;)(s=o[a]).y0=t,s.y1=r,s.x0=n,s.x1=n+=s.value*c}var i9e={depth:-1},Kte={},e4={};function r9e(e){return e.id}function o9e(e){return e.parentId}function Yte(){var t,e=r9e,n=o9e;function i(r){var l,c,u,d,f,h,p,g,o=Array.from(r),s=e,a=n,m=new Map;if(null!=t){const _=o.map((b,w)=>function s9e(e){let n=(e=`${e}`).length;return t4(e,n-1)&&!t4(e,n-2)&&(e=e.slice(0,-1)),"/"===e[0]?e:`/${e}`}(t(b,w,r))),y=_.map(Xte),v=new Set(_).add("");for(const b of y)v.has(b)||(v.add(b),_.push(b),y.push(Xte(b)),o.push(e4));s=(b,w)=>_[w],a=(b,w)=>y[w]}for(u=0,l=o.length;u<l;++u)h=o[u]=new dm(c=o[u]),null!=(p=s(c,u,r))&&(p+="")&&(g=h.id=p,m.set(g,m.has(g)?Kte:h)),null!=(p=a(c,u,r))&&(p+="")&&(h.parent=p);for(u=0;u<l;++u)if(p=(h=o[u]).parent){if(!(f=m.get(p)))throw new Error("missing: "+p);if(f===Kte)throw new Error("ambiguous: "+p);f.children?f.children.push(h):f.children=[h],h.parent=f}else{if(d)throw new Error("multiple roots");d=h}if(!d)throw new Error("no root");if(null!=t){for(;d.data===e4&&1===d.children.length;)d=d.children[0],--l;for(let _=o.length-1;_>=0&&(h=o[_]).data===e4;--_)h.data=null}if(d.parent=i9e,d.eachBefore(function(_){_.depth=_.parent.depth+1,--l}).eachBefore(Nte),d.parent=null,l>0)throw new Error("cycle");return d}return i.id=function(r){return arguments.length?(e=fS(r),i):e},i.parentId=function(r){return arguments.length?(n=fS(r),i):n},i.path=function(r){return arguments.length?(t=fS(r),i):t},i}function Xte(e){let n=e.length;if(n<2)return"";for(;--n>1&&!t4(e,n););return e.slice(0,n)}function t4(e,n){if("/"===e[n]){let t=0;for(;n>0&&"\\"===e[--n];)++t;if(!(1&t))return!0}return!1}function a9e(e,n){return e.parent===n.parent?1:2}function n4(e){var n=e.children;return n?n[0]:e.t}function r4(e){var n=e.children;return n?n[n.length-1]:e.t}function l9e(e,n,t){var i=t/(n.i-e.i);n.c-=i,n.s+=t,e.c+=i,n.z+=t,n.m+=t}function u9e(e,n,t){return e.a.parent===n.parent?e.a:t}function gS(e,n){this._=e,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=n}function h9e(e,n){return e.parent===n.parent?1:2}function g9e(e,n){return e+n.x}function _9e(e,n){return Math.max(e,n.y)}function mS(e,n,t,i,r){for(var s,o=e.children,a=-1,l=o.length,c=e.value&&(r-t)/e.value;++a<l;)(s=o[a]).x0=n,s.x1=i,s.y0=t,s.y1=t+=s.value*c}gS.prototype=Object.create(dm.prototype);var Qte=(1+Math.sqrt(5))/2;function Zte(e,n,t,i,r,o){for(var l,c,h,p,m,_,y,v,b,w,x,s=[],a=n.children,u=0,d=0,f=a.length,g=n.value;u<f;){h=r-t,p=o-i;do{m=a[d++].value}while(!m&&d<f);for(_=y=m,x=m*m*(w=Math.max(p/h,h/p)/(g*e)),b=Math.max(y/x,x/_);d<f;++d){if(m+=c=a[d].value,c<_&&(_=c),c>y&&(y=c),x=m*m*w,(v=Math.max(y/x,x/_))>b){m-=c;break}b=v}s.push(l={value:m,dice:h<p,children:a.slice(u,d)}),l.dice?C1(l,t,i,r,g?i+=p*m/g:o):mS(l,t,i,g?t+=h*m/g:r,o),g-=m,u=d}return s}const Jte=function e(n){function t(i,r,o,s,a){Zte(n,i,r,o,s,a)}return t.ratio=function(i){return e((i=+i)>1?i:1)},t}(Qte),x9e=function e(n){function t(i,r,o,s,a){if((l=i._squarify)&&l.ratio===n)for(var l,c,u,d,h,f=-1,p=l.length,g=i.value;++f<p;){for(u=(c=l[f]).children,d=c.value=0,h=u.length;d<h;++d)c.value+=u[d].value;c.dice?C1(c,r,o,s,g?o+=(a-o)*c.value/g:a):mS(c,r,o,g?r+=(s-r)*c.value/g:s,a),g-=c.value}else i._squarify=l=Zte(n,i,r,o,s,a),l.ratio=n}return t.ratio=function(i){return e((i=+i)>1?i:1)},t}(Qte);function o4(e,n,t){const i={};return e.each(r=>{const o=r.data;t(o)&&(i[n(o)]=r)}),e.lookup=i,e}function s4(e){Z.call(this,null,e)}s4.Definition={type:"Nest",metadata:{treesource:!0,changes:!0},params:[{name:"keys",type:"field",array:!0},{name:"generate",type:"boolean"}]};const S9e=e=>e.values;function T9e(){const e=[],n={entries:r=>i(t(r,0),0),key:r=>(e.push(r),n)};function t(r,o){if(o>=e.length)return r;const s=r.length,a=e[o++],l={},c={};let d,f,h,u=-1;for(;++u<s;)d=a(f=r[u])+"",(h=l[d])?h.push(f):l[d]=[f];for(d in l)c[d]=t(l[d],o);return c}function i(r,o){if(++o>e.length)return r;const s=[];for(const a in r)s.push({key:a,values:i(r[a],o)});return s}return n}function Ac(e){Z.call(this,null,e)}pe(s4,Z,{transform(e,n){n.source||re("Nest transform requires an upstream data source.");var t=e.generate,i=e.modified(),r=n.clone(),o=this.value;return(!o||i||n.changed())&&(o&&o.each(s=>{s.children&&ix(s.data)&&r.rem.push(s.data)}),this.value=o=QN({values:Ce(e.keys).reduce((s,a)=>(s.key(a),s),T9e()).entries(r.source)},S9e),t&&o.each(s=>{s.children&&(s=qt(s.data),r.add.push(s),r.source.push(s))}),o4(o,Be,Be)),r.source.root=o,r}});const D9e=(e,n)=>e.parent===n.parent?1:2;pe(Ac,Z,{transform(e,n){(!n.source||!n.source.root)&&re(this.constructor.name+" transform requires a backing tree data source.");const t=this.layout(e.method),i=this.fields,r=n.source.root,o=e.as||i;e.field?r.sum(e.field):r.count(),e.sort&&r.sort(Rf(e.sort,s=>s.data)),function I9e(e,n,t){for(let i,r=0,o=n.length;r<o;++r)i=n[r],i in t&&e[i](t[i])}(t,this.params,e),t.separation&&t.separation(!1!==e.separation?D9e:bg);try{this.value=t(r)}catch(s){re(s)}return r.each(s=>function M9e(e,n,t){const i=e.data,r=n.length-1;for(let o=0;o<r;++o)i[t[o]]=e[n[o]];i[t[r]]=e.children?e.children.length:0}(s,i,o)),n.reflow(e.modified()).modifies(o).modifies("leaf")}});const a4=["x","y","r","depth","children"];function l4(e){Ac.call(this,e)}l4.Definition={type:"Pack",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"radius",type:"field",default:null},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:a4.length,default:a4}]},pe(l4,Ac,{layout:function t9e(){var e=null,n=1,t=1,i=Jf;function r(o){const s=function K6e(){let e=1;return()=>(e=(1664525*e+1013904223)%4294967296)/4294967296}();return o.x=n/2,o.y=t/2,e?o.eachBefore(qte(e)).eachAfter(JN(i,.5,s)).eachBefore(Wte(1)):o.eachBefore(qte(e9e)).eachAfter(JN(Jf,1,s)).eachAfter(JN(i,o.r/Math.min(n,t),s)).eachBefore(Wte(Math.min(n,t)/(2*o.r))),o}return r.radius=function(o){return arguments.length?(e=fS(o),r):e},r.size=function(o){return arguments.length?(n=+o[0],t=+o[1],r):[n,t]},r.padding=function(o){return arguments.length?(i="function"==typeof o?o:fm(+o),r):i},r},params:["radius","size","padding"],fields:a4});const c4=["x0","y0","x1","y1","depth","children"];function u4(e){Ac.call(this,e)}function d4(e){Z.call(this,null,e)}u4.Definition={type:"Partition",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:c4.length,default:c4}]},pe(u4,Ac,{layout:function n9e(){var e=1,n=1,t=0,i=!1;function r(s){var a=s.height+1;return s.x0=s.y0=t,s.x1=e,s.y1=n/a,s.eachBefore(function o(s,a){return function(l){l.children&&C1(l,l.x0,s*(l.depth+1)/a,l.x1,s*(l.depth+2)/a);var c=l.x0,u=l.y0,d=l.x1-t,f=l.y1-t;d<c&&(c=d=(c+d)/2),f<u&&(u=f=(u+f)/2),l.x0=c,l.y0=u,l.x1=d,l.y1=f}}(n,a)),i&&s.eachBefore(Gte),s}return r.round=function(s){return arguments.length?(i=!!s,r):i},r.size=function(s){return arguments.length?(e=+s[0],n=+s[1],r):[e,n]},r.padding=function(s){return arguments.length?(t=+s,r):t},r},params:["size","round","padding"],fields:c4}),d4.Definition={type:"Stratify",metadata:{treesource:!0},params:[{name:"key",type:"field",required:!0},{name:"parentKey",type:"field",required:!0}]},pe(d4,Z,{transform(e,n){n.source||re("Stratify transform requires an upstream data source.");let t=this.value;const i=e.modified(),r=n.fork(n.ALL).materialize(n.SOURCE),o=!t||i||n.changed(n.ADD_REM)||n.modified(e.key.fields)||n.modified(e.parentKey.fields);return r.source=r.source.slice(),o&&(t=r.source.length?o4(Yte().id(e.key).parentId(e.parentKey)(r.source),e.key,xs):o4(Yte()([{}]),e.key,e.key)),r.source.root=this.value=t,r}});const ene={tidy:function f9e(){var e=a9e,n=1,t=1,i=null;function r(c){var u=function d9e(e){for(var t,r,o,s,a,n=new gS(e,0),i=[n];t=i.pop();)if(o=t._.children)for(t.children=new Array(a=o.length),s=a-1;s>=0;--s)i.push(r=t.children[s]=new gS(o[s],s)),r.parent=t;return(n.parent=new gS(null,0)).children=[n],n}(c);if(u.eachAfter(o),u.parent.m=-u.z,u.eachBefore(s),i)c.eachBefore(l);else{var d=c,f=c,h=c;c.eachBefore(function(y){y.x<d.x&&(d=y),y.x>f.x&&(f=y),y.depth>h.depth&&(h=y)});var p=d===f?1:e(d,f)/2,g=p-d.x,m=n/(f.x+p+g),_=t/(h.depth||1);c.eachBefore(function(y){y.x=(y.x+g)*m,y.y=y.depth*_})}return c}function o(c){var u=c.children,d=c.parent.children,f=c.i?d[c.i-1]:null;if(u){!function c9e(e){for(var o,n=0,t=0,i=e.children,r=i.length;--r>=0;)(o=i[r]).z+=n,o.m+=n,n+=o.s+(t+=o.c)}(c);var h=(u[0].z+u[u.length-1].z)/2;f?(c.z=f.z+e(c._,f._),c.m=c.z-h):c.z=h}else f&&(c.z=f.z+e(c._,f._));c.parent.A=function a(c,u,d){if(u){for(var b,f=c,h=c,p=u,g=f.parent.children[0],m=f.m,_=h.m,y=p.m,v=g.m;p=r4(p),f=n4(f),p&&f;)g=n4(g),(h=r4(h)).a=c,(b=p.z+y-f.z-m+e(p._,f._))>0&&(l9e(u9e(p,c,d),c,b),m+=b,_+=b),y+=p.m,m+=f.m,v+=g.m,_+=h.m;p&&!r4(h)&&(h.t=p,h.m+=y-_),f&&!n4(g)&&(g.t=f,g.m+=m-v,d=c)}return d}(c,f,c.parent.A||d[0])}function s(c){c._.x=c.z+c.parent.m,c.m+=c.parent.m}function l(c){c.x*=n,c.y=c.depth*t}return r.separation=function(c){return arguments.length?(e=c,r):e},r.size=function(c){return arguments.length?(i=!1,n=+c[0],t=+c[1],r):i?null:[n,t]},r.nodeSize=function(c){return arguments.length?(i=!0,n=+c[0],t=+c[1],r):i?[n,t]:null},r},cluster:function b9e(){var e=h9e,n=1,t=1,i=!1;function r(o){var s,a=0;o.eachAfter(function(f){var h=f.children;h?(f.x=function p9e(e){return e.reduce(g9e,0)/e.length}(h),f.y=function m9e(e){return 1+e.reduce(_9e,0)}(h)):(f.x=s?a+=e(f,s):0,f.y=0,s=f)});var l=function y9e(e){for(var n;n=e.children;)e=n[0];return e}(o),c=function v9e(e){for(var n;n=e.children;)e=n[n.length-1];return e}(o),u=l.x-e(l,c)/2,d=c.x+e(c,l)/2;return o.eachAfter(i?function(f){f.x=(f.x-o.x)*n,f.y=(o.y-f.y)*t}:function(f){f.x=(f.x-u)/(d-u)*n,f.y=(1-(o.y?f.y/o.y:1))*t})}return r.separation=function(o){return arguments.length?(e=o,r):e},r.size=function(o){return arguments.length?(i=!1,n=+o[0],t=+o[1],r):i?null:[n,t]},r.nodeSize=function(o){return arguments.length?(i=!0,n=+o[0],t=+o[1],r):i?[n,t]:null},r}},f4=["x","y","depth","children"];function h4(e){Ac.call(this,e)}function p4(e){Z.call(this,[],e)}h4.Definition={type:"Tree",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"tidy",values:["tidy","cluster"]},{name:"size",type:"number",array:!0,length:2},{name:"nodeSize",type:"number",array:!0,length:2},{name:"separation",type:"boolean",default:!0},{name:"as",type:"string",array:!0,length:f4.length,default:f4}]},pe(h4,Ac,{layout(e){const n=e||"tidy";if($e(ene,n))return ene[n]();re("Unrecognized Tree layout method: "+n)},params:["size","nodeSize"],fields:f4}),p4.Definition={type:"TreeLinks",metadata:{tree:!0,generates:!0,changes:!0},params:[]},pe(p4,Z,{transform(e,n){const t=this.value,i=n.source&&n.source.root,r=n.fork(n.NO_SOURCE),o={};return i||re("TreeLinks transform requires a tree data source."),n.changed(n.ADD_REM)?(r.rem=t,n.visit(n.SOURCE,s=>o[Be(s)]=1),i.each(s=>{const a=s.data,l=s.parent&&s.parent.data;l&&o[Be(a)]&&o[Be(l)]&&r.add.push(qt({source:l,target:a}))}),this.value=r.add):n.changed(n.MOD)&&(n.visit(n.MOD,s=>o[Be(s)]=1),t.forEach(s=>{(o[Be(s.source)]||o[Be(s.target)])&&r.mod.push(s)})),r}});const tne={binary:function w9e(e,n,t,i,r){var s,l,o=e.children,a=o.length,c=new Array(a+1);for(c[0]=l=s=0;s<a;++s)c[s+1]=l+=o[s].value;!function u(d,f,h,p,g,m,_){if(d>=f-1){var y=o[d];return y.x0=p,y.y0=g,y.x1=m,void(y.y1=_)}for(var v=c[d],b=h/2+v,w=d+1,x=f-1;w<x;){var C=w+x>>>1;c[C]<b?w=C+1:x=C}b-c[w-1]<c[w]-b&&d+1<w&&--w;var S=c[w]-v,A=h-S;if(m-p>_-g){var M=h?(p*A+m*S)/h:m;u(d,w,S,p,g,M,_),u(w,f,A,M,g,m,_)}else{var N=h?(g*A+_*S)/h:_;u(d,w,S,p,g,m,N),u(w,f,A,p,N,m,_)}}(0,a,e.value,n,t,i,r)},dice:C1,slice:mS,slicedice:function C9e(e,n,t,i,r){(1&e.depth?mS:C1)(e,n,t,i,r)},squarify:Jte,resquarify:x9e},g4=["x0","y0","x1","y1","depth","children"];function m4(e){Ac.call(this,e)}m4.Definition={type:"Treemap",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"squarify",values:["squarify","resquarify","binary","dice","slice","slicedice"]},{name:"padding",type:"number",default:0},{name:"paddingInner",type:"number",default:0},{name:"paddingOuter",type:"number",default:0},{name:"paddingTop",type:"number",default:0},{name:"paddingRight",type:"number",default:0},{name:"paddingBottom",type:"number",default:0},{name:"paddingLeft",type:"number",default:0},{name:"ratio",type:"number",default:1.618033988749895},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:g4.length,default:g4}]},pe(m4,Ac,{layout(){const e=function E9e(){var e=Jte,n=!1,t=1,i=1,r=[0],o=Jf,s=Jf,a=Jf,l=Jf,c=Jf;function u(f){return f.x0=f.y0=0,f.x1=t,f.y1=i,f.eachBefore(d),r=[0],n&&f.eachBefore(Gte),f}function d(f){var h=r[f.depth],p=f.x0+h,g=f.y0+h,m=f.x1-h,_=f.y1-h;m<p&&(p=m=(p+m)/2),_<g&&(g=_=(g+_)/2),f.x0=p,f.y0=g,f.x1=m,f.y1=_,f.children&&(h=r[f.depth+1]=o(f)/2,p+=c(f)-h,g+=s(f)-h,(m-=a(f)-h)<p&&(p=m=(p+m)/2),(_-=l(f)-h)<g&&(g=_=(g+_)/2),e(f,p,g,m,_))}return u.round=function(f){return arguments.length?(n=!!f,u):n},u.size=function(f){return arguments.length?(t=+f[0],i=+f[1],u):[t,i]},u.tile=function(f){return arguments.length?(e=Pte(f),u):e},u.padding=function(f){return arguments.length?u.paddingInner(f).paddingOuter(f):u.paddingInner()},u.paddingInner=function(f){return arguments.length?(o="function"==typeof f?f:fm(+f),u):o},u.paddingOuter=function(f){return arguments.length?u.paddingTop(f).paddingRight(f).paddingBottom(f).paddingLeft(f):u.paddingTop()},u.paddingTop=function(f){return arguments.length?(s="function"==typeof f?f:fm(+f),u):s},u.paddingRight=function(f){return arguments.length?(a="function"==typeof f?f:fm(+f),u):a},u.paddingBottom=function(f){return arguments.length?(l="function"==typeof f?f:fm(+f),u):l},u.paddingLeft=function(f){return arguments.length?(c="function"==typeof f?f:fm(+f),u):c},u}();return e.ratio=n=>{const t=e.tile();t.ratio&&e.tile(t.ratio(n))},e.method=n=>{$e(tne,n)?e.tile(tne[n]):re("Unrecognized Treemap layout method: "+n)},e},params:["method","ratio","size","round","padding","paddingInner","paddingOuter","paddingTop","paddingRight","paddingBottom","paddingLeft"],fields:g4});const _4=4278190080;function y4(e,n,t){return new Uint32Array(e.getImageData(0,0,n,t).data.buffer)}function _S(e,n,t){if(!n.length)return;const i=n[0].mark.marktype;"group"===i?n.forEach(r=>{r.items.forEach(o=>_S(e,o.items,t))}):qo[i].draw(e,{items:t?n.map(O9e):n})}function O9e(e){const n=rx(e,{});return n.stroke&&0!==n.strokeOpacity||n.fill&&0!==n.fillOpacity?{...n,strokeOpacity:1,stroke:"#000",fillOpacity:0}:n}const kc=5,Lr=31,x1=32,ld=new Uint32Array(x1+1),ma=new Uint32Array(x1+1);ma[0]=0,ld[0]=~ma[0];for(let e=1;e<=x1;++e)ma[e]=ma[e-1]<<1|1,ld[e]=~ma[e];function yS(e,n,t,i,r,o){let s=t/2;return e-s<0||e+s>r||n-(s=i/2)<0||n+s>o}function cd(e,n,t,i,r,o,s,a){const l=r*o/(2*i),c=e(n-l),u=e(n+l),d=e(t-(o/=2)),f=e(t+o);return s.outOfBounds(c,d,u,f)||s.getRange(c,d,u,f)||a&&a.getRange(c,d,u,f)}const L9e=[-1,-1,1,1],$9e=[-1,1,-1,1],V9e=["right","center","left"],z9e=["bottom","middle","top"];function nne(e,n,t,i,r,o,s,a,l,c,u,d){return!(r.outOfBounds(e,t,n,i)||(d&&o||r).getRange(e,t,n,i))}const H9e={"top-left":0,top:1,"top-right":2,left:4,middle:5,right:6,"bottom-left":8,bottom:9,"bottom-right":10},j9e={naive:function N9e(e,n,t,i){const r=e.width,o=e.height;return function(s){const a=s.datum.datum.items[i].items,l=a.length,c=s.datum.fontSize,u=jo.width(s.datum,s.datum.text);let f,h,p,g,m,_,y,d=0;for(let v=0;v<l;++v)f=a[v].x,p=a[v].y,h=void 0===a[v].x2?f:a[v].x2,g=void 0===a[v].y2?p:a[v].y2,m=(f+h)/2,_=(p+g)/2,y=Math.abs(h-f+g-p),y>=d&&(d=y,s.x=m,s.y=_);return m=u/2,_=c/2,f=s.x-m,h=s.x+m,p=s.y-_,g=s.y+_,s.align="center",f<0&&h<=r?s.align="left":0<=f&&r<h&&(s.align="right"),s.baseline="middle",p<0&&g<=o?s.baseline="top":0<=p&&o<g&&(s.baseline="bottom"),!0}},"reduced-search":function P9e(e,n,t,i){const r=e.width,o=e.height,s=n[0],a=n[1];function l(c,u,d,f,h){const p=e.invert(c),g=e.invert(u);let y,m=d,_=o;if(!yS(p,g,f,h,r,o)&&!cd(e,p,g,h,f,m,s,a)&&!cd(e,p,g,h,f,h,s,null)){for(;_-m>=1;)y=(m+_)/2,cd(e,p,g,h,f,y,s,a)?_=y:m=y;if(m>d)return[p,g,m,!0]}}return function(c){const u=c.datum.datum.items[i].items,d=u.length,f=c.datum.fontSize,h=jo.width(c.datum,c.datum.text);let y,v,b,w,x,C,S,A,M,N,V,P,E,D,I,O,T,p=t?f:0,g=!1,m=!1,_=0;for(let R=0;R<d;++R){for(y=u[R].x,b=u[R].y,v=void 0===u[R].x2?y:u[R].x2,w=void 0===u[R].y2?b:u[R].y2,y>v&&(T=y,y=v,v=T),b>w&&(T=b,b=w,w=T),M=e(y),V=e(v),N=~~((M+V)/2),P=e(b),D=e(w),E=~~((P+D)/2),S=N;S>=M;--S)for(A=E;A>=P;--A)O=l(S,A,p,h,f),O&&([c.x,c.y,p,g]=O);for(S=N;S<=V;++S)for(A=E;A<=D;++A)O=l(S,A,p,h,f),O&&([c.x,c.y,p,g]=O);!g&&!t&&(I=Math.abs(v-y+w-b),x=(y+v)/2,C=(b+w)/2,I>=_&&!yS(x,C,h,f,r,o)&&!cd(e,x,C,f,h,f,s,null)&&(_=I,c.x=x,c.y=C,m=!0))}return!(!g&&!m||(x=h/2,C=f/2,s.setRange(e(c.x-x),e(c.y-C),e(c.x+x),e(c.y+C)),c.align="center",c.baseline="middle",0))}},floodfill:function B9e(e,n,t,i){const r=e.width,o=e.height,s=n[0],a=n[1],l=e.bitmap();return function(c){const u=c.datum.datum.items[i].items,d=u.length,f=c.datum.fontSize,h=jo.width(c.datum,c.datum.text),p=[];let v,b,w,x,C,S,A,M,N,V,P,E,g=t?f:0,m=!1,_=!1,y=0;for(let D=0;D<d;++D){for(v=u[D].x,w=u[D].y,b=void 0===u[D].x2?v:u[D].x2,x=void 0===u[D].y2?w:u[D].y2,p.push([e((v+b)/2),e((w+x)/2)]);p.length;)if([A,M]=p.pop(),!(s.get(A,M)||a.get(A,M)||l.get(A,M))){l.set(A,M);for(let I=0;I<4;++I)C=A+L9e[I],S=M+$9e[I],l.outOfBounds(C,S,C,S)||p.push([C,S]);if(C=e.invert(A),S=e.invert(M),N=g,V=o,!yS(C,S,h,f,r,o)&&!cd(e,C,S,f,h,N,s,a)&&!cd(e,C,S,f,h,f,s,null)){for(;V-N>=1;)P=(N+V)/2,cd(e,C,S,f,h,P,s,a)?V=P:N=P;N>g&&(c.x=C,c.y=S,g=N,m=!0)}}!m&&!t&&(E=Math.abs(b-v+x-w),C=(v+b)/2,S=(w+x)/2,E>=y&&!yS(C,S,h,f,r,o)&&!cd(e,C,S,f,h,f,s,null)&&(y=E,c.x=C,c.y=S,_=!0))}return!(!m&&!_||(C=h/2,S=f/2,s.setRange(e(c.x-C),e(c.y-S),e(c.x+C),e(c.y+S)),c.align="center",c.baseline="middle",0))}}};function q9e(e,n,t,i,r,o,s,a,l,c,u){if(!e.length)return e;const d=Math.max(i.length,r.length),f=function W9e(e,n){const t=new Float64Array(n),i=e.length;for(let r=0;r<i;++r)t[r]=e[r]||0;for(let r=i;r<n;++r)t[r]=t[i-1];return t}(i,d),h=function G9e(e,n){const t=new Int8Array(n),i=e.length;for(let r=0;r<i;++r)t[r]|=H9e[e[r]];for(let r=i;r<n;++r)t[r]=t[i-1];return t}(r,d),p=function K9e(e){return e&&e.mark&&e.mark.marktype}(e[0].datum),g="group"===p&&e[0].datum.items[l].marktype,m="area"===g,_=function Y9e(e,n,t,i){const r=o=>[o.x,o.x,o.x,o.y,o.y,o.y];return e?"line"===e||"area"===e?o=>r(o.datum):"line"===n?o=>{const s=o.datum.items[i].items;return r(s.length?s["start"===t?0:s.length-1]:{x:NaN,y:NaN})}:o=>{const s=o.datum.bounds;return[s.x1,(s.x1+s.x2)/2,s.x2,s.y1,(s.y1+s.y2)/2,s.y2]}:r}(p,g,a,l),y=null===c||c===1/0,v=m&&"naive"===u;let b=-1,w=-1;const x=e.map(M=>{const N=y?jo.width(M,M.text):void 0;return b=Math.max(b,N),w=Math.max(w,M.fontSize),{datum:M,opacity:0,x:void 0,y:void 0,align:void 0,baseline:void 0,boundary:_(M),textWidth:N}});c=null===c||c===1/0?Math.max(b,w)+Math.max(...i):c;const C=function F9e(e,n,t){const i=Math.max(1,Math.sqrt(e*n/1e6)),r=~~((e+2*t+i)/i),o=~~((n+2*t+i)/i),s=a=>~~((a+t)/i);return s.invert=a=>a*i-t,s.bitmap=()=>function R9e(e,n){const t=new Uint32Array(~~((e*n+x1)/x1));function i(o,s){t[o]|=s}function r(o,s){t[o]&=s}return{array:t,get:(o,s)=>{const a=s*e+o;return t[a>>>kc]&1<<(a&Lr)},set:(o,s)=>{const a=s*e+o;i(a>>>kc,1<<(a&Lr))},clear:(o,s)=>{const a=s*e+o;r(a>>>kc,~(1<<(a&Lr)))},getRange:(o,s,a,l)=>{let u,d,f,h,c=l;for(;c>=s;--c)if(u=c*e+o,d=c*e+a,f=u>>>kc,h=d>>>kc,f===h){if(t[f]&ld[u&Lr]&ma[1+(d&Lr)])return!0}else{if(t[f]&ld[u&Lr]||t[h]&ma[1+(d&Lr)])return!0;for(let p=f+1;p<h;++p)if(t[p])return!0}return!1},setRange:(o,s,a,l)=>{let c,u,d,f,h;for(;s<=l;++s)if(c=s*e+o,u=s*e+a,d=c>>>kc,f=u>>>kc,d===f)i(d,ld[c&Lr]&ma[1+(u&Lr)]);else for(i(d,ld[c&Lr]),i(f,ma[1+(u&Lr)]),h=d+1;h<f;++h)i(h,4294967295)},clearRange:(o,s,a,l)=>{let c,u,d,f,h;for(;s<=l;++s)if(c=s*e+o,u=s*e+a,d=c>>>kc,f=u>>>kc,d===f)r(d,ma[c&Lr]|ld[1+(u&Lr)]);else for(r(d,ma[c&Lr]),r(f,ld[1+(u&Lr)]),h=d+1;h<f;++h)r(h,0)},outOfBounds:(o,s,a,l)=>o<0||s<0||l>=n||a>=e}}(r,o),s.ratio=i,s.padding=t,s.width=e,s.height=n,s}(n[0],n[1],c);let S;if(!v){t&&x.sort((V,P)=>t(V.datum,P.datum));let M=!1;for(let V=0;V<h.length&&!M;++V)M=5===h[V]||f[V]<0;const N=(p&&s||m)&&e.map(V=>V.datum);S=o.length||N?function k9e(e,n,t,i,r){const o=e.width,s=e.height,a=i||r,l=Bu(o,s).getContext("2d"),c=Bu(o,s).getContext("2d"),u=a&&Bu(o,s).getContext("2d");t.forEach(S=>_S(l,S,!1)),_S(c,n,!1),a&&_S(u,n,!0);const d=y4(l,o,s),f=y4(c,o,s),h=a&&y4(u,o,s),p=e.bitmap(),g=a&&e.bitmap();let m,_,y,v,b,w,x,C;for(_=0;_<s;++_)for(m=0;m<o;++m)b=_*o+m,w=d[b]&_4,C=f[b]&_4,x=a&&h[b]&_4,(w||x||C)&&(y=e(m),v=e(_),!r&&(w||C)&&p.set(y,v),a&&(w||x)&&g.set(y,v));return[p,g]}(C,N||[],o,M,m):function A9e(e,n){const t=e.bitmap();return(n||[]).forEach(i=>t.set(e(i.boundary[0]),e(i.boundary[3]))),[t,void 0]}(C,s&&x)}const A=m?j9e[u](C,S,s,l):function U9e(e,n,t,i){const r=e.width,o=e.height,s=n[0],a=n[1],l=i.length;return function(c){const u=c.boundary,d=c.datum.fontSize;if(u[2]<0||u[5]<0||u[0]>r||u[3]>o)return!1;let h,p,g,m,_,y,v,b,w,x,C,S,A,M,N,f=c.textWidth??0;for(let V=0;V<l;++V){if(h=(3&t[V])-1,p=(t[V]>>>2&3)-1,g=0===h&&0===p||i[V]<0,m=h&&p?Math.SQRT1_2:1,_=i[V]<0?-1:1,y=u[1+h]+i[V]*h*m,C=u[4+p]+_*d*p/2+i[V]*p*m,b=C-d/2,w=C+d/2,S=e(y),M=e(b),N=e(w),!f){if(!nne(S,S,M,N,s,a,0,0,0,0,0,g))continue;f=jo.width(c.datum,c.datum.text)}if(x=y+_*f*h/2,y=x-f/2,v=x+f/2,S=e(y),A=e(v),nne(S,A,M,N,s,a,0,0,0,0,0,g))return c.x=h?h*_<0?v:y:x,c.y=p?p*_<0?w:b:C,c.align=V9e[h*_+1],c.baseline=z9e[p*_+1],s.setRange(S,M,A,N),!0}return!1}}(C,S,h,f);return x.forEach(M=>M.opacity=+A(M)),x}const S4=["x","y","opacity","align","baseline"],ine=["top-left","left","bottom-left","top","bottom","top-right","right","bottom-right"];function T4(e){Z.call(this,null,e)}function rne(e,n){var r,o,s,a,l,c,t=[],i=function(u){return u(a)};if(null==n)t.push(e);else for(r={},o=0,s=e.length;o<s;++o)a=e[o],(c=r[l=n.map(i)])||(r[l]=c=[],c.dims=l,t.push(c)),c.push(a);return t}function D4(e){Z.call(this,null,e)}T4.Definition={type:"Label",metadata:{modifies:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"sort",type:"compare"},{name:"anchor",type:"string",array:!0,default:ine},{name:"offset",type:"number",array:!0,default:[1]},{name:"padding",type:"number",default:0,null:!0},{name:"lineAnchor",type:"string",values:["start","end"],default:"end"},{name:"markIndex",type:"number",default:0},{name:"avoidBaseMark",type:"boolean",default:!0},{name:"avoidMarks",type:"data",array:!0},{name:"method",type:"string",default:"naive"},{name:"as",type:"string",array:!0,length:S4.length,default:S4}]},pe(T4,Z,{transform(e,n){const i=e.modified();if(!(i||n.changed(n.ADD_REM)||function t(o){const s=e[o];return ct(s)&&n.modified(s.fields)}("sort")))return;(!e.size||2!==e.size.length)&&re("Size parameter should be specified as a [width, height] array.");const r=e.as||S4;return q9e(n.materialize(n.SOURCE).source||[],e.size,e.sort,Ce(null==e.offset?1:e.offset),Ce(e.anchor||ine),e.avoidMarks||[],!1!==e.avoidBaseMark,e.lineAnchor||"end",e.markIndex||0,void 0===e.padding?0:e.padding,e.method||"naive").forEach(o=>{const s=o.datum;s[r[0]]=o.x,s[r[1]]=o.y,s[r[2]]=o.opacity,s[r[3]]=o.align,s[r[4]]=o.baseline}),n.reflow(i).modifies(r)}}),D4.Definition={type:"Loess",metadata:{generates:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"bandwidth",type:"number",default:.3},{name:"as",type:"string",array:!0}]},pe(D4,Z,{transform(e,n){const t=n.fork(n.NO_SOURCE|n.NO_FIELDS);if(!this.value||n.changed()||e.modified()){const r=rne(n.materialize(n.SOURCE).source,e.groupby),o=(e.groupby||[]).map(Ln),s=o.length,a=e.as||[Ln(e.x),Ln(e.y)],l=[];r.forEach(c=>{sY(c,e.x,e.y,e.bandwidth||.3).forEach(u=>{const d={};for(let f=0;f<s;++f)d[o[f]]=c.dims[f];d[a[0]]=u[0],d[a[1]]=u[1],l.push(qt(d))})}),this.value&&(t.rem=this.value),this.value=t.add=t.source=l}return t}});const I4={constant:C3,linear:x3,log:eY,exp:tY,pow:nY,quad:E3,poly:iY};function M4(e){Z.call(this,null,e)}M4.Definition={type:"Regression",metadata:{generates:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"method",type:"string",default:"linear",values:Object.keys(I4)},{name:"order",type:"number",default:3},{name:"extent",type:"number",array:!0,length:2},{name:"params",type:"boolean",default:!1},{name:"as",type:"string",array:!0}]},pe(M4,Z,{transform(e,n){const t=n.fork(n.NO_SOURCE|n.NO_FIELDS);if(!this.value||n.changed()||e.modified()){const r=rne(n.materialize(n.SOURCE).source,e.groupby),o=(e.groupby||[]).map(Ln),s=e.method||"linear",a=null==e.order?3:e.order,l=((e,n)=>"poly"===e?n:"quad"===e?2:1)(s,a),c=e.as||[Ln(e.x),Ln(e.y)],u=I4[s],d=[];let f=e.extent;$e(I4,s)||re("Invalid regression method: "+s),null!=f&&"log"===s&&f[0]<=0&&(n.dataflow.warn("Ignoring extent with values <= 0 for log regression."),f=null),r.forEach(h=>{if(h.length<=l)return void n.dataflow.warn("Skipping regression with more parameters than data points.");const g=u(h,e.x,e.y,a);if(e.params)return void d.push(qt({keys:h.dims,coef:g.coef,rSquared:g.rSquared}));const m=f||al(h,e.x),_=y=>{const v={};for(let b=0;b<o.length;++b)v[o[b]]=h.dims[b];v[c[0]]=y[0],v[c[1]]=y[1],d.push(qt(v))};"linear"===s||"constant"===s?m.forEach(y=>_([y,g.predict(y)])):gx(g.predict,m,25,200).forEach(_)}),this.value&&(t.rem=this.value),this.value=t.add=t.source=d}return t}});const hi=134217729;function E1(e,n,t,i,r){let o,s,a,l,c=n[0],u=i[0],d=0,f=0;u>c==u>-c?(o=c,c=n[++d]):(o=u,u=i[++f]);let h=0;if(d<e&&f<t)for(u>c==u>-c?(s=c+o,a=o-(s-c),c=n[++d]):(s=u+o,a=o-(s-u),u=i[++f]),o=s,0!==a&&(r[h++]=a);d<e&&f<t;)u>c==u>-c?(s=o+c,l=s-o,a=o-(s-l)+(c-l),c=n[++d]):(s=o+u,l=s-o,a=o-(s-l)+(u-l),u=i[++f]),o=s,0!==a&&(r[h++]=a);for(;d<e;)s=o+c,l=s-o,a=o-(s-l)+(c-l),c=n[++d],o=s,0!==a&&(r[h++]=a);for(;f<t;)s=o+u,l=s-o,a=o-(s-l)+(u-l),u=i[++f],o=s,0!==a&&(r[h++]=a);return(0!==o||0===h)&&(r[h++]=o),h}function de(e){return new Float64Array(e)}const hm=de(4),one=de(8),sne=de(12),ane=de(16),$r=de(4);function vS(e,n,t,i,r,o){const s=(n-o)*(t-r),a=(e-r)*(i-o),l=s-a,c=Math.abs(s+a);return Math.abs(l)>=33306690738754716e-32*c?l:-function n8e(e,n,t,i,r,o,s){let a,l,c,u,d,f,h,p,g,m,_,y,v,b,w,x,C,S;const A=e-r,M=t-r,N=n-o,V=i-o;b=A*V,f=hi*A,h=f-(f-A),p=A-h,f=hi*V,g=f-(f-V),m=V-g,w=p*m-(b-h*g-p*g-h*m),x=N*M,f=hi*N,h=f-(f-N),p=N-h,f=hi*M,g=f-(f-M),m=M-g,C=p*m-(x-h*g-p*g-h*m),_=w-C,d=w-_,hm[0]=w-(_+d)+(d-C),y=b+_,d=y-b,v=b-(y-d)+(_-d),_=v-x,d=v-_,hm[1]=v-(_+d)+(d-x),S=y+_,d=S-y,hm[2]=y-(S-d)+(_-d),hm[3]=S;let P=function Z9e(e,n){let t=n[0];for(let i=1;i<e;i++)t+=n[i];return t}(4,hm),E=22204460492503146e-32*s;if(P>=E||-P>=E||(d=e-A,a=e-(A+d)+(d-r),d=t-M,c=t-(M+d)+(d-r),d=n-N,l=n-(N+d)+(d-o),d=i-V,u=i-(V+d)+(d-o),0===a&&0===l&&0===c&&0===u)||(E=11093356479670487e-47*s+33306690738754706e-32*Math.abs(P),P+=A*u+V*a-(N*c+M*l),P>=E||-P>=E))return P;b=a*V,f=hi*a,h=f-(f-a),p=a-h,f=hi*V,g=f-(f-V),m=V-g,w=p*m-(b-h*g-p*g-h*m),x=l*M,f=hi*l,h=f-(f-l),p=l-h,f=hi*M,g=f-(f-M),m=M-g,C=p*m-(x-h*g-p*g-h*m),_=w-C,d=w-_,$r[0]=w-(_+d)+(d-C),y=b+_,d=y-b,v=b-(y-d)+(_-d),_=v-x,d=v-_,$r[1]=v-(_+d)+(d-x),S=y+_,d=S-y,$r[2]=y-(S-d)+(_-d),$r[3]=S;const D=E1(4,hm,4,$r,one);b=A*u,f=hi*A,h=f-(f-A),p=A-h,f=hi*u,g=f-(f-u),m=u-g,w=p*m-(b-h*g-p*g-h*m),x=N*c,f=hi*N,h=f-(f-N),p=N-h,f=hi*c,g=f-(f-c),m=c-g,C=p*m-(x-h*g-p*g-h*m),_=w-C,d=w-_,$r[0]=w-(_+d)+(d-C),y=b+_,d=y-b,v=b-(y-d)+(_-d),_=v-x,d=v-_,$r[1]=v-(_+d)+(d-x),S=y+_,d=S-y,$r[2]=y-(S-d)+(_-d),$r[3]=S;const I=E1(D,one,4,$r,sne);b=a*u,f=hi*a,h=f-(f-a),p=a-h,f=hi*u,g=f-(f-u),m=u-g,w=p*m-(b-h*g-p*g-h*m),x=l*c,f=hi*l,h=f-(f-l),p=l-h,f=hi*c,g=f-(f-c),m=c-g,C=p*m-(x-h*g-p*g-h*m),_=w-C,d=w-_,$r[0]=w-(_+d)+(d-C),y=b+_,d=y-b,v=b-(y-d)+(_-d),_=v-x,d=v-_,$r[1]=v-(_+d)+(d-x),S=y+_,d=S-y,$r[2]=y-(S-d)+(_-d),$r[3]=S;const O=E1(I,sne,4,$r,ane);return ane[O-1]}(e,n,t,i,r,o,c)}de(4),de(4),de(4),de(4),de(4),de(4),de(4),de(4),de(4),de(8),de(8),de(8),de(4),de(8),de(8),de(8),de(12),de(192),de(192),de(4),de(4),de(4),de(4),de(4),de(4),de(4),de(4),de(8),de(8),de(8),de(8),de(8),de(8),de(8),de(8),de(8),de(4),de(4),de(4),de(8),de(16),de(16),de(16),de(32),de(32),de(48),de(64),de(1152),de(1152),de(4),de(4),de(4),de(4),de(4),de(4),de(4),de(4),de(4),de(4),de(24),de(24),de(24),de(24),de(24),de(24),de(24),de(24),de(24),de(24),de(1152),de(1152),de(1152),de(1152),de(1152),de(2304),de(2304),de(3456),de(5760),de(8),de(8),de(8),de(16),de(24),de(48),de(48),de(96),de(192),de(384),de(384),de(384),de(768),de(96),de(96),de(96),de(1152);const Ine=Math.pow(2,-52),MS=new Uint32Array(512);class AS{static from(n,t=C8e,i=x8e){const r=n.length,o=new Float64Array(2*r);for(let s=0;s<r;s++){const a=n[s];o[2*s]=t(a),o[2*s+1]=i(a)}return new AS(o)}constructor(n){const t=n.length>>1;if(t>0&&"number"!=typeof n[0])throw new Error("Expected coords to contain numbers.");this.coords=n;const i=Math.max(2*t-5,0);this._triangles=new Uint32Array(3*i),this._halfedges=new Int32Array(3*i),this._hashSize=Math.ceil(Math.sqrt(t)),this._hullPrev=new Uint32Array(t),this._hullNext=new Uint32Array(t),this._hullTri=new Uint32Array(t),this._hullHash=new Int32Array(this._hashSize).fill(-1),this._ids=new Uint32Array(t),this._dists=new Float64Array(t),this.update()}update(){const{coords:n,_hullPrev:t,_hullNext:i,_hullTri:r,_hullHash:o}=this,s=n.length>>1;let a=1/0,l=1/0,c=-1/0,u=-1/0;for(let M=0;M<s;M++){const N=n[2*M],V=n[2*M+1];N<a&&(a=N),V<l&&(l=V),N>c&&(c=N),V>u&&(u=V),this._ids[M]=M}const d=(a+c)/2,f=(l+u)/2;let p,g,m,h=1/0;for(let M=0;M<s;M++){const N=tP(d,f,n[2*M],n[2*M+1]);N<h&&(p=M,h=N)}const _=n[2*p],y=n[2*p+1];h=1/0;for(let M=0;M<s;M++){if(M===p)continue;const N=tP(_,y,n[2*M],n[2*M+1]);N<h&&N>0&&(g=M,h=N)}let v=n[2*g],b=n[2*g+1],w=1/0;for(let M=0;M<s;M++){if(M===p||M===g)continue;const N=b8e(_,y,v,b,n[2*M],n[2*M+1]);N<w&&(m=M,w=N)}let x=n[2*m],C=n[2*m+1];if(w===1/0){for(let V=0;V<s;V++)this._dists[V]=n[2*V]-n[0]||n[2*V+1]-n[1];wm(this._ids,this._dists,0,s-1);const M=new Uint32Array(s);let N=0;for(let V=0,P=-1/0;V<s;V++){const E=this._ids[V];this._dists[E]>P&&(M[N++]=E,P=this._dists[E])}return this.hull=M.subarray(0,N),this.triangles=new Uint32Array(0),void(this.halfedges=new Uint32Array(0))}if(vS(_,y,v,b,x,C)<0){const M=g,N=v,V=b;g=m,v=x,b=C,m=M,x=N,C=V}const S=function w8e(e,n,t,i,r,o){const s=t-e,a=i-n,l=r-e,c=o-n,u=s*s+a*a,d=l*l+c*c,f=.5/(s*c-a*l);return{x:e+(c*u-a*d)*f,y:n+(s*d-l*u)*f}}(_,y,v,b,x,C);this._cx=S.x,this._cy=S.y;for(let M=0;M<s;M++)this._dists[M]=tP(n[2*M],n[2*M+1],S.x,S.y);wm(this._ids,this._dists,0,s-1),this._hullStart=p;let A=3;i[p]=t[m]=g,i[g]=t[p]=m,i[m]=t[g]=p,r[p]=0,r[g]=1,r[m]=2,o.fill(-1),o[this._hashKey(_,y)]=p,o[this._hashKey(v,b)]=g,o[this._hashKey(x,C)]=m,this.trianglesLen=0,this._addTriangle(p,g,m,-1,-1,-1);for(let N,V,M=0;M<this._ids.length;M++){const P=this._ids[M],E=n[2*P],D=n[2*P+1];if(M>0&&Math.abs(E-N)<=Ine&&Math.abs(D-V)<=Ine||(N=E,V=D,P===p||P===g||P===m))continue;let I=0;for(let z=0,H=this._hashKey(E,D);z<this._hashSize&&(I=o[(H+z)%this._hashSize],-1===I||I===i[I]);z++);I=t[I];let T,O=I;for(;T=i[O],vS(E,D,n[2*O],n[2*O+1],n[2*T],n[2*T+1])>=0;)if(O=T,O===I){O=-1;break}if(-1===O)continue;let R=this._addTriangle(O,P,i[O],-1,-1,r[O]);r[P]=this._legalize(R+2),r[O]=R,A++;let F=i[O];for(;T=i[F],vS(E,D,n[2*F],n[2*F+1],n[2*T],n[2*T+1])<0;)R=this._addTriangle(F,P,T,r[P],-1,r[F]),r[P]=this._legalize(R+2),i[F]=F,A--,F=T;if(O===I)for(;T=t[O],vS(E,D,n[2*T],n[2*T+1],n[2*O],n[2*O+1])<0;)R=this._addTriangle(T,P,O,-1,r[O],r[T]),this._legalize(R+2),r[T]=R,i[O]=O,A--,O=T;this._hullStart=t[P]=O,i[O]=t[F]=P,i[P]=F,o[this._hashKey(E,D)]=P,o[this._hashKey(n[2*O],n[2*O+1])]=O}this.hull=new Uint32Array(A);for(let M=0,N=this._hullStart;M<A;M++)this.hull[M]=N,N=i[N];this.triangles=this._triangles.subarray(0,this.trianglesLen),this.halfedges=this._halfedges.subarray(0,this.trianglesLen)}_hashKey(n,t){return Math.floor(function y8e(e,n){const t=e/(Math.abs(e)+Math.abs(n));return(n>0?3-t:1+t)/4}(n-this._cx,t-this._cy)*this._hashSize)%this._hashSize}_legalize(n){const{_triangles:t,_halfedges:i,coords:r}=this;let o=0,s=0;for(;;){const a=i[n],l=n-n%3;if(s=l+(n+2)%3,-1===a){if(0===o)break;n=MS[--o];continue}const c=a-a%3,d=c+(a+2)%3,f=t[s],h=t[n],p=t[l+(n+1)%3],g=t[d];if(v8e(r[2*f],r[2*f+1],r[2*h],r[2*h+1],r[2*p],r[2*p+1],r[2*g],r[2*g+1])){t[n]=g,t[a]=f;const _=i[d];if(-1===_){let v=this._hullStart;do{if(this._hullTri[v]===d){this._hullTri[v]=n;break}v=this._hullPrev[v]}while(v!==this._hullStart)}this._link(n,_),this._link(a,i[s]),this._link(s,d),o<MS.length&&(MS[o++]=c+(a+1)%3)}else{if(0===o)break;n=MS[--o]}}return s}_link(n,t){this._halfedges[n]=t,-1!==t&&(this._halfedges[t]=n)}_addTriangle(n,t,i,r,o,s){const a=this.trianglesLen;return this._triangles[a]=n,this._triangles[a+1]=t,this._triangles[a+2]=i,this._link(a,r),this._link(a+1,o),this._link(a+2,s),this.trianglesLen+=3,a}}function tP(e,n,t,i){const r=e-t,o=n-i;return r*r+o*o}function v8e(e,n,t,i,r,o,s,a){const l=e-s,c=n-a,u=t-s,d=i-a,f=r-s,h=o-a,g=u*u+d*d,m=f*f+h*h;return l*(d*m-g*h)-c*(u*m-g*f)+(l*l+c*c)*(u*h-d*f)<0}function b8e(e,n,t,i,r,o){const s=t-e,a=i-n,l=r-e,c=o-n,u=s*s+a*a,d=l*l+c*c,f=.5/(s*c-a*l),h=(c*u-a*d)*f,p=(s*d-l*u)*f;return h*h+p*p}function wm(e,n,t,i){if(i-t<=20)for(let r=t+1;r<=i;r++){const o=e[r],s=n[o];let a=r-1;for(;a>=t&&n[e[a]]>s;)e[a+1]=e[a--];e[a+1]=o}else{let o=t+1,s=i;I1(e,t+i>>1,o),n[e[t]]>n[e[i]]&&I1(e,t,i),n[e[o]]>n[e[i]]&&I1(e,o,i),n[e[t]]>n[e[o]]&&I1(e,t,o);const a=e[o],l=n[a];for(;;){do{o++}while(n[e[o]]<l);do{s--}while(n[e[s]]>l);if(s<o)break;I1(e,o,s)}e[t+1]=e[s],e[s]=a,i-o+1>=s-t?(wm(e,n,o,i),wm(e,n,t,s-1)):(wm(e,n,t,s-1),wm(e,n,o,i))}}function I1(e,n,t){const i=e[n];e[n]=e[t],e[t]=i}function C8e(e){return e[0]}function x8e(e){return e[1]}class lh{constructor(){this._x0=this._y0=this._x1=this._y1=null,this._=""}moveTo(n,t){this._+=`M${this._x0=this._x1=+n},${this._y0=this._y1=+t}`}closePath(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")}lineTo(n,t){this._+=`L${this._x1=+n},${this._y1=+t}`}arc(n,t,i){const r=(n=+n)+(i=+i),o=t=+t;if(i<0)throw new Error("negative radius");null===this._x1?this._+=`M${r},${o}`:(Math.abs(this._x1-r)>1e-6||Math.abs(this._y1-o)>1e-6)&&(this._+="L"+r+","+o),i&&(this._+=`A${i},${i},0,1,1,${n-i},${t}A${i},${i},0,1,1,${this._x1=r},${this._y1=o}`)}rect(n,t,i,r){this._+=`M${this._x0=this._x1=+n},${this._y0=this._y1=+t}h${+i}v${+r}h${-i}Z`}value(){return this._||null}}class nP{constructor(){this._=[]}moveTo(n,t){this._.push([n,t])}closePath(){this._.push(this._[0].slice())}lineTo(n,t){this._.push([n,t])}value(){return this._.length?this._:null}}class E8e{constructor(n,[t,i,r,o]=[0,0,960,500]){if(!((r=+r)>=(t=+t)&&(o=+o)>=(i=+i)))throw new Error("invalid bounds");this.delaunay=n,this._circumcenters=new Float64Array(2*n.points.length),this.vectors=new Float64Array(2*n.points.length),this.xmax=r,this.xmin=t,this.ymax=o,this.ymin=i,this._init()}update(){return this.delaunay.update(),this._init(),this}_init(){const{delaunay:{points:n,hull:t,triangles:i},vectors:r}=this;let o,s;const a=this.circumcenters=this._circumcenters.subarray(0,i.length/3*2);for(let y,v,g=0,m=0,_=i.length;g<_;g+=3,m+=2){const b=2*i[g],w=2*i[g+1],x=2*i[g+2],C=n[b],S=n[b+1],N=n[x],V=n[x+1],P=n[w]-C,E=n[w+1]-S,D=N-C,I=V-S,O=2*(P*I-E*D);if(Math.abs(O)<1e-9){if(void 0===o){o=s=0;for(const R of t)o+=n[2*R],s+=n[2*R+1];o/=t.length,s/=t.length}const T=1e9*Math.sign((o-C)*I-(s-S)*D);y=(C+N)/2-T*I,v=(S+V)/2+T*D}else{const T=1/O,R=P*P+E*E,F=D*D+I*I;y=C+(I*R-E*F)*T,v=S+(P*F-D*R)*T}a[m]=y,a[m+1]=v}let c,d,h,l=t[t.length-1],u=4*l,f=n[2*l],p=n[2*l+1];r.fill(0);for(let g=0;g<t.length;++g)l=t[g],c=u,d=f,h=p,u=4*l,f=n[2*l],p=n[2*l+1],r[c+2]=r[u]=h-p,r[c+3]=r[u+1]=f-d}render(n){const t=null==n?n=new lh:void 0,{delaunay:{halfedges:i,inedges:r,hull:o},circumcenters:s,vectors:a}=this;if(o.length<=1)return null;for(let u=0,d=i.length;u<d;++u){const f=i[u];if(f<u)continue;const h=2*Math.floor(u/3),p=2*Math.floor(f/3);this._renderSegment(s[h],s[h+1],s[p],s[p+1],n)}let l,c=o[o.length-1];for(let u=0;u<o.length;++u){l=c,c=o[u];const d=2*Math.floor(r[c]/3),f=s[d],h=s[d+1],p=4*l,g=this._project(f,h,a[p+2],a[p+3]);g&&this._renderSegment(f,h,g[0],g[1],n)}return t&&t.value()}renderBounds(n){const t=null==n?n=new lh:void 0;return n.rect(this.xmin,this.ymin,this.xmax-this.xmin,this.ymax-this.ymin),t&&t.value()}renderCell(n,t){const i=null==t?t=new lh:void 0,r=this._clip(n);if(null===r||!r.length)return;t.moveTo(r[0],r[1]);let o=r.length;for(;r[0]===r[o-2]&&r[1]===r[o-1]&&o>1;)o-=2;for(let s=2;s<o;s+=2)(r[s]!==r[s-2]||r[s+1]!==r[s-1])&&t.lineTo(r[s],r[s+1]);return t.closePath(),i&&i.value()}*cellPolygons(){const{delaunay:{points:n}}=this;for(let t=0,i=n.length/2;t<i;++t){const r=this.cellPolygon(t);r&&(r.index=t,yield r)}}cellPolygon(n){const t=new nP;return this.renderCell(n,t),t.value()}_renderSegment(n,t,i,r,o){let s;const a=this._regioncode(n,t),l=this._regioncode(i,r);0===a&&0===l?(o.moveTo(n,t),o.lineTo(i,r)):(s=this._clipSegment(n,t,i,r,a,l))&&(o.moveTo(s[0],s[1]),o.lineTo(s[2],s[3]))}contains(n,t,i){return(t=+t)==t&&(i=+i)==i&&this.delaunay._step(n,t,i)===n}*neighbors(n){const t=this._clip(n);if(t)for(const i of this.delaunay.neighbors(n)){const r=this._clip(i);if(r)e:for(let o=0,s=t.length;o<s;o+=2)for(let a=0,l=r.length;a<l;a+=2)if(t[o]===r[a]&&t[o+1]===r[a+1]&&t[(o+2)%s]===r[(a+l-2)%l]&&t[(o+3)%s]===r[(a+l-1)%l]){yield i;break e}}}_cell(n){const{circumcenters:t,delaunay:{inedges:i,halfedges:r,triangles:o}}=this,s=i[n];if(-1===s)return null;const a=[];let l=s;do{const c=Math.floor(l/3);if(a.push(t[2*c],t[2*c+1]),l=l%3==2?l-2:l+1,o[l]!==n)break;l=r[l]}while(l!==s&&-1!==l);return a}_clip(n){if(0===n&&1===this.delaunay.hull.length)return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];const t=this._cell(n);if(null===t)return null;const{vectors:i}=this,r=4*n;return this._simplify(i[r]||i[r+1]?this._clipInfinite(n,t,i[r],i[r+1],i[r+2],i[r+3]):this._clipFinite(n,t))}_clipFinite(n,t){const i=t.length;let o,s,c,d,r=null,a=t[i-2],l=t[i-1],u=this._regioncode(a,l),f=0;for(let h=0;h<i;h+=2)if(o=a,s=l,a=t[h],l=t[h+1],c=u,u=this._regioncode(a,l),0===c&&0===u)d=f,f=0,r?r.push(a,l):r=[a,l];else{let p,g,m,_,y;if(0===c){if(null===(p=this._clipSegment(o,s,a,l,c,u)))continue;[g,m,_,y]=p}else{if(null===(p=this._clipSegment(a,l,o,s,u,c)))continue;[_,y,g,m]=p,d=f,f=this._edgecode(g,m),d&&f&&this._edge(n,d,f,r,r.length),r?r.push(g,m):r=[g,m]}d=f,f=this._edgecode(_,y),d&&f&&this._edge(n,d,f,r,r.length),r?r.push(_,y):r=[_,y]}if(r)d=f,f=this._edgecode(r[0],r[1]),d&&f&&this._edge(n,d,f,r,r.length);else if(this.contains(n,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2))return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];return r}_clipSegment(n,t,i,r,o,s){const a=o<s;for(a&&([n,t,i,r,o,s]=[i,r,n,t,s,o]);;){if(0===o&&0===s)return a?[i,r,n,t]:[n,t,i,r];if(o&s)return null;let l,c,u=o||s;8&u?(l=n+(i-n)*(this.ymax-t)/(r-t),c=this.ymax):4&u?(l=n+(i-n)*(this.ymin-t)/(r-t),c=this.ymin):2&u?(c=t+(r-t)*(this.xmax-n)/(i-n),l=this.xmax):(c=t+(r-t)*(this.xmin-n)/(i-n),l=this.xmin),o?o=this._regioncode(n=l,t=c):s=this._regioncode(i=l,r=c)}}_clipInfinite(n,t,i,r,o,s){let l,a=Array.from(t);if((l=this._project(a[0],a[1],i,r))&&a.unshift(l[0],l[1]),(l=this._project(a[a.length-2],a[a.length-1],o,s))&&a.push(l[0],l[1]),a=this._clipFinite(n,a))for(let d,c=0,u=a.length,f=this._edgecode(a[u-2],a[u-1]);c<u;c+=2)d=f,f=this._edgecode(a[c],a[c+1]),d&&f&&(c=this._edge(n,d,f,a,c),u=a.length);else this.contains(n,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2)&&(a=[this.xmin,this.ymin,this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax]);return a}_edge(n,t,i,r,o){for(;t!==i;){let s,a;switch(t){case 5:t=4;continue;case 4:t=6,s=this.xmax,a=this.ymin;break;case 6:t=2;continue;case 2:t=10,s=this.xmax,a=this.ymax;break;case 10:t=8;continue;case 8:t=9,s=this.xmin,a=this.ymax;break;case 9:t=1;continue;case 1:t=5,s=this.xmin,a=this.ymin}(r[o]!==s||r[o+1]!==a)&&this.contains(n,s,a)&&(r.splice(o,0,s,a),o+=2)}return o}_project(n,t,i,r){let s,a,l,o=1/0;if(r<0){if(t<=this.ymin)return null;(s=(this.ymin-t)/r)<o&&(l=this.ymin,a=n+(o=s)*i)}else if(r>0){if(t>=this.ymax)return null;(s=(this.ymax-t)/r)<o&&(l=this.ymax,a=n+(o=s)*i)}if(i>0){if(n>=this.xmax)return null;(s=(this.xmax-n)/i)<o&&(a=this.xmax,l=t+(o=s)*r)}else if(i<0){if(n<=this.xmin)return null;(s=(this.xmin-n)/i)<o&&(a=this.xmin,l=t+(o=s)*r)}return[a,l]}_edgecode(n,t){return(n===this.xmin?1:n===this.xmax?2:0)|(t===this.ymin?4:t===this.ymax?8:0)}_regioncode(n,t){return(n<this.xmin?1:n>this.xmax?2:0)|(t<this.ymin?4:t>this.ymax?8:0)}_simplify(n){if(n&&n.length>4){for(let t=0;t<n.length;t+=2){const i=(t+2)%n.length,r=(t+4)%n.length;(n[t]===n[i]&&n[i]===n[r]||n[t+1]===n[i+1]&&n[i+1]===n[r+1])&&(n.splice(i,2),t-=2)}n.length||(n=null)}return n}}const S8e=2*Math.PI,Cm=Math.pow;function T8e(e){return e[0]}function D8e(e){return e[1]}function M8e(e,n,t){return[e+Math.sin(e+n)*t,n+Math.cos(e-n)*t]}class iP{static from(n,t=T8e,i=D8e,r){return new iP("length"in n?function A8e(e,n,t,i){const r=e.length,o=new Float64Array(2*r);for(let s=0;s<r;++s){const a=e[s];o[2*s]=n.call(i,a,s,e),o[2*s+1]=t.call(i,a,s,e)}return o}(n,t,i,r):Float64Array.from(function*k8e(e,n,t,i){let r=0;for(const o of e)yield n.call(i,o,r,e),yield t.call(i,o,r,e),++r}(n,t,i,r)))}constructor(n){this._delaunator=new AS(n),this.inedges=new Int32Array(n.length/2),this._hullIndex=new Int32Array(n.length/2),this.points=this._delaunator.coords,this._init()}update(){return this._delaunator.update(),this._init(),this}_init(){const n=this._delaunator,t=this.points;if(n.hull&&n.hull.length>2&&function I8e(e){const{triangles:n,coords:t}=e;for(let i=0;i<n.length;i+=3){const r=2*n[i],o=2*n[i+1],s=2*n[i+2];if((t[s]-t[r])*(t[o+1]-t[r+1])-(t[o]-t[r])*(t[s+1]-t[r+1])>1e-10)return!1}return!0}(n)){this.collinear=Int32Array.from({length:t.length/2},(f,h)=>h).sort((f,h)=>t[2*f]-t[2*h]||t[2*f+1]-t[2*h+1]);const l=this.collinear[0],c=this.collinear[this.collinear.length-1],u=[t[2*l],t[2*l+1],t[2*c],t[2*c+1]],d=1e-8*Math.hypot(u[3]-u[1],u[2]-u[0]);for(let f=0,h=t.length/2;f<h;++f){const p=M8e(t[2*f],t[2*f+1],d);t[2*f]=p[0],t[2*f+1]=p[1]}this._delaunator=new AS(t)}else delete this.collinear;const i=this.halfedges=this._delaunator.halfedges,r=this.hull=this._delaunator.hull,o=this.triangles=this._delaunator.triangles,s=this.inedges.fill(-1),a=this._hullIndex.fill(-1);for(let l=0,c=i.length;l<c;++l){const u=o[l%3==2?l-2:l+1];(-1===i[l]||-1===s[u])&&(s[u]=l)}for(let l=0,c=r.length;l<c;++l)a[r[l]]=l;r.length<=2&&r.length>0&&(this.triangles=new Int32Array(3).fill(-1),this.halfedges=new Int32Array(3).fill(-1),this.triangles[0]=r[0],s[r[0]]=1,2===r.length&&(s[r[1]]=0,this.triangles[1]=r[1],this.triangles[2]=r[1]))}voronoi(n){return new E8e(this,n)}*neighbors(n){const{inedges:t,hull:i,_hullIndex:r,halfedges:o,triangles:s,collinear:a}=this;if(a){const d=a.indexOf(n);return d>0&&(yield a[d-1]),void(d<a.length-1&&(yield a[d+1]))}const l=t[n];if(-1===l)return;let c=l,u=-1;do{if(yield u=s[c],c=c%3==2?c-2:c+1,s[c]!==n)return;if(c=o[c],-1===c){const d=i[(r[n]+1)%i.length];return void(d!==u&&(yield d))}}while(c!==l)}find(n,t,i=0){if((n=+n)!=n||(t=+t)!=t)return-1;const r=i;let o;for(;(o=this._step(i,n,t))>=0&&o!==i&&o!==r;)i=o;return o}_step(n,t,i){const{inedges:r,hull:o,_hullIndex:s,halfedges:a,triangles:l,points:c}=this;if(-1===r[n]||!c.length)return(n+1)%(c.length>>1);let u=n,d=Cm(t-c[2*n],2)+Cm(i-c[2*n+1],2);const f=r[n];let h=f;do{let p=l[h];const g=Cm(t-c[2*p],2)+Cm(i-c[2*p+1],2);if(g<d&&(d=g,u=p),h=h%3==2?h-2:h+1,l[h]!==n)break;if(h=a[h],-1===h){if(h=o[(s[n]+1)%o.length],h!==p&&Cm(t-c[2*h],2)+Cm(i-c[2*h+1],2)<d)return h;break}}while(h!==f);return u}render(n){const t=null==n?n=new lh:void 0,{points:i,halfedges:r,triangles:o}=this;for(let s=0,a=r.length;s<a;++s){const l=r[s];if(l<s)continue;const c=2*o[s],u=2*o[l];n.moveTo(i[c],i[c+1]),n.lineTo(i[u],i[u+1])}return this.renderHull(n),t&&t.value()}renderPoints(n,t){void 0===t&&(!n||"function"!=typeof n.moveTo)&&(t=n,n=null),t=null==t?2:+t;const i=null==n?n=new lh:void 0,{points:r}=this;for(let o=0,s=r.length;o<s;o+=2){const a=r[o],l=r[o+1];n.moveTo(a+t,l),n.arc(a,l,t,0,S8e)}return i&&i.value()}renderHull(n){const t=null==n?n=new lh:void 0,{hull:i,points:r}=this,o=2*i[0],s=i.length;n.moveTo(r[o],r[o+1]);for(let a=1;a<s;++a){const l=2*i[a];n.lineTo(r[l],r[l+1])}return n.closePath(),t&&t.value()}hullPolygon(){const n=new nP;return this.renderHull(n),n.value()}renderTriangle(n,t){const i=null==t?t=new lh:void 0,{points:r,triangles:o}=this,s=2*o[n*=3],a=2*o[n+1],l=2*o[n+2];return t.moveTo(r[s],r[s+1]),t.lineTo(r[a],r[a+1]),t.lineTo(r[l],r[l+1]),t.closePath(),i&&i.value()}*trianglePolygons(){const{triangles:n}=this;for(let t=0,i=n.length/3;t<i;++t)yield this.trianglePolygon(t)}trianglePolygon(n){const t=new nP;return this.renderTriangle(n,t),t.value()}}function rP(e){Z.call(this,null,e)}rP.Definition={type:"Voronoi",metadata:{modifies:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"size",type:"number",array:!0,length:2},{name:"extent",type:"array",array:!0,length:2,default:[[-1e5,-1e5],[1e5,1e5]],content:{type:"number",array:!0,length:2}},{name:"as",type:"string",default:"path"}]};const O8e=[-1e5,-1e5,1e5,1e5];function R8e(e){const n=e[0][0],t=e[0][1];let i=e.length-1;for(;e[i][0]===n&&e[i][1]===t;--i);return"M"+e.slice(0,i+1).join("L")+"Z"}function F8e(e){return 2===e.length&&e[0][0]===e[1][0]&&e[0][1]===e[1][1]}pe(rP,Z,{transform(e,n){const t=e.as||"path",i=n.source;if(!i||!i.length)return n;let r=e.size;r=r?[0,0,r[0],r[1]]:(r=e.extent)?[r[0][0],r[0][1],r[1][0],r[1][1]]:O8e;const o=this.value=iP.from(i,e.x,e.y).voronoi(r);for(let s=0,a=i.length;s<a;++s){const l=o.cellPolygon(s);i[s][t]=l&&!F8e(l)?R8e(l):null}return n.reflow(e.modified()).modifies(t)}});var oP=Math.PI/180,M1=64,kS=2048;function P8e(e,n,t,i){if(!n.sprite){var r=e.context,o=e.ratio;r.clearRect(0,0,(M1<<5)/o,kS/o);var u,d,f,h,p,s=0,a=0,l=0,c=t.length;for(--i;++i<c;){if(n=t[i],r.save(),r.font=n.style+" "+n.weight+" "+~~((n.size+1)/o)+"px "+n.font,u=r.measureText(n.text+"m").width*o,f=n.size<<1,n.rotate){var g=Math.sin(n.rotate*oP),m=Math.cos(n.rotate*oP),_=u*m,y=u*g,v=f*m,b=f*g;u=Math.max(Math.abs(_+b),Math.abs(_-b))+31>>5<<5,f=~~Math.max(Math.abs(y+v),Math.abs(y-v))}else u=u+31>>5<<5;if(f>l&&(l=f),s+u>=M1<<5&&(s=0,a+=l,l=0),a+f>=kS)break;r.translate((s+(u>>1))/o,(a+(f>>1))/o),n.rotate&&r.rotate(n.rotate*oP),r.fillText(n.text,0,0),n.padding&&(r.lineWidth=2*n.padding,r.strokeText(n.text,0,0)),r.restore(),n.width=u,n.height=f,n.xoff=s,n.yoff=a,n.x1=u>>1,n.y1=f>>1,n.x0=-n.x1,n.y0=-n.y1,n.hasText=!0,s+=u}for(var w=r.getImageData(0,0,(M1<<5)/o,kS/o).data,x=[];--i>=0;)if((n=t[i]).hasText){for(d=(u=n.width)>>5,f=n.y1-n.y0,h=0;h<f*d;h++)x[h]=0;if(null==(s=n.xoff))return;a=n.yoff;var C=0,S=-1;for(p=0;p<f;p++){for(h=0;h<u;h++){var M=w[(a+p)*(M1<<5)+(s+h)<<2]?1<<31-h%32:0;x[d*p+(h>>5)]|=M,C|=M}C?S=p:(n.y0++,f--,p--,a++)}n.y1=n.y0+S,n.sprite=x.slice(0,(n.y1-n.y0)*d)}}}function L8e(e,n,t){for(var u,i=e.sprite,r=e.width>>5,o=e.x-(r<<4),s=127&o,a=32-s,l=e.y1-e.y0,c=(e.y+e.y0)*(t>>=5)+(o>>5),d=0;d<l;d++){u=0;for(var f=0;f<=r;f++)if((u<<a|(f<r?(u=i[d*r+f])>>>s:0))&n[c+f])return!0;c+=t}return!1}function $8e(e,n){var t=e[0],i=e[1];n.x+n.x0<t.x&&(t.x=n.x+n.x0),n.y+n.y0<t.y&&(t.y=n.y+n.y0),n.x+n.x1>i.x&&(i.x=n.x+n.x1),n.y+n.y1>i.y&&(i.y=n.y+n.y1)}function B8e(e,n){return e.x+e.x1>n[0].x&&e.x+e.x0<n[1].x&&e.y+e.y1>n[0].y&&e.y+e.y0<n[1].y}function Ane(e){var n=e[0]/e[1];return function(t){return[n*(t*=.1)*Math.cos(t),t*Math.sin(t)]}}function ch(e){return"function"==typeof e?e:function(){return e}}var U8e={archimedean:Ane,rectangular:function V8e(e){var t=4*e[0]/e[1],i=0,r=0;return function(o){var s=o<0?-1:1;switch(Math.sqrt(1+4*s*o)-s&3){case 0:i+=t;break;case 1:r+=4;break;case 2:i-=t;break;default:r-=4}return[i,r]}}};const kne=["x","y","font","fontSize","fontStyle","fontWeight","angle"],H8e=["text","font","rotate","fontSize","fontStyle","fontWeight"];function sP(e){Z.call(this,function N8e(){var n,t,i,r,o,s,a,e=[256,256],l=Ane,c=[],u=Math.random,d={};function h(p,g,m){for(var C,S,A,_=g.x,y=g.y,v=Math.sqrt(e[0]*e[0]+e[1]*e[1]),b=l(e),w=u()<.5?1:-1,x=-w;(C=b(x+=w))&&(S=~~C[0],A=~~C[1],!(Math.min(Math.abs(S),Math.abs(A))>=v));)if(g.x=_+S,g.y=y+A,!(g.x+g.x0<0||g.y+g.y0<0||g.x+g.x1>e[0]||g.y+g.y1>e[1])&&(!m||!L8e(g,p,e[0]))&&(!m||B8e(g,m))){for(var T,M=g.sprite,N=g.width>>5,V=e[0]>>5,P=g.x-(N<<4),E=127&P,D=32-E,I=g.y1-g.y0,O=(g.y+g.y0)*V+(P>>5),R=0;R<I;R++){T=0;for(var F=0;F<=N;F++)p[O+F]|=T<<D|(F<N?(T=M[R*N+F])>>>E:0);O+=V}return g.sprite=null,!0}return!1}return d.layout=function(){for(var p=function f(p){p.width=p.height=1;var g=Math.sqrt(p.getContext("2d").getImageData(0,0,1,1).data.length>>2);p.width=(M1<<5)/g,p.height=kS/g;var m=p.getContext("2d");return m.fillStyle=m.strokeStyle="red",m.textAlign="center",{context:m,ratio:g}}(Bu()),g=function z8e(e){for(var n=[],t=-1;++t<e;)n[t]=0;return n}((e[0]>>5)*e[1]),m=null,_=c.length,y=-1,v=[],b=c.map(x=>({text:n(x),font:t(x),style:r(x),weight:o(x),rotate:s(x),size:~~(i(x)+1e-14),padding:a(x),xoff:0,yoff:0,x1:0,y1:0,x0:0,y0:0,hasText:!1,sprite:null,datum:x})).sort((x,C)=>C.size-x.size);++y<_;){var w=b[y];w.x=e[0]*(u()+.5)>>1,w.y=e[1]*(u()+.5)>>1,P8e(p,w,b,y),w.hasText&&h(g,w,m)&&(v.push(w),m?$8e(m,w):m=[{x:w.x+w.x0,y:w.y+w.y0},{x:w.x+w.x1,y:w.y+w.y1}],w.x-=e[0]>>1,w.y-=e[1]>>1)}return v},d.words=function(p){return arguments.length?(c=p,d):c},d.size=function(p){return arguments.length?(e=[+p[0],+p[1]],d):e},d.font=function(p){return arguments.length?(t=ch(p),d):t},d.fontStyle=function(p){return arguments.length?(r=ch(p),d):r},d.fontWeight=function(p){return arguments.length?(o=ch(p),d):o},d.rotate=function(p){return arguments.length?(s=ch(p),d):s},d.text=function(p){return arguments.length?(n=ch(p),d):n},d.spiral=function(p){return arguments.length?(l=U8e[p]||p,d):l},d.fontSize=function(p){return arguments.length?(i=ch(p),d):i},d.padding=function(p){return arguments.length?(a=ch(p),d):a},d.random=function(p){return arguments.length?(u=p,d):u},d}(),e)}sP.Definition={type:"Wordcloud",metadata:{modifies:!0},params:[{name:"size",type:"number",array:!0,length:2},{name:"font",type:"string",expr:!0,default:"sans-serif"},{name:"fontStyle",type:"string",expr:!0,default:"normal"},{name:"fontWeight",type:"string",expr:!0,default:"normal"},{name:"fontSize",type:"number",expr:!0,default:14},{name:"fontSizeRange",type:"number",array:"nullable",default:[10,50]},{name:"rotate",type:"number",expr:!0,default:0},{name:"text",type:"field"},{name:"spiral",type:"string",values:["archimedean","rectangular"]},{name:"padding",type:"number",expr:!0},{name:"as",type:"string",array:!0,length:7,default:kne}]},pe(sP,Z,{transform(e,n){e.size&&(!e.size[0]||!e.size[1])&&re("Wordcloud size dimensions must be non-zero.");const i=e.modified();if(!(i||n.changed(n.ADD_REM)||H8e.some(function t(p){const g=e[p];return ct(g)&&n.modified(g.fields)})))return;const r=n.materialize(n.SOURCE).source,o=this.value,s=e.as||kne;let l,a=e.fontSize||14;if(ct(a)?l=e.fontSizeRange:a=rr(a),l){const p=a,g=$t("sqrt")().domain(al(r,p)).range(l);a=m=>g(p(m))}r.forEach(p=>{p[s[0]]=NaN,p[s[1]]=NaN,p[s[3]]=0});const c=o.words(r).text(e.text).size(e.size||[500,500]).padding(e.padding||1).spiral(e.spiral||"archimedean").rotate(e.rotate||0).font(e.font||"sans-serif").fontStyle(e.fontStyle||"normal").fontWeight(e.fontWeight||"normal").fontSize(a).random(Ts).layout(),u=o.size(),d=u[0]>>1,f=u[1]>>1,h=c.length;for(let g,m,p=0;p<h;++p)g=c[p],m=g.datum,m[s[0]]=g.x+d,m[s[1]]=g.y+f,m[s[2]]=g.font,m[s[3]]=g.size,m[s[4]]=g.style,m[s[5]]=g.weight,m[s[6]]=g.rotate;return n.reflow(i).modifies(s)}});const q8e=e=>new Uint8Array(e),W8e=e=>new Uint16Array(e),A1=e=>new Uint32Array(e);function OS(e,n,t){const i=(n<257?q8e:n<65537?W8e:A1)(e);return t&&i.set(t),i}function One(e,n,t){const i=1<<n;return{one:i,zero:~i,range:t.slice(),bisect:e.bisect,index:e.index,size:e.size,onAdd(r,o){const s=this,a=s.bisect(s.range,r.value),l=r.index,c=a[0],u=a[1],d=l.length;let f;for(f=0;f<c;++f)o[l[f]]|=i;for(f=u;f<d;++f)o[l[f]]|=i;return s}}}function Rne(){let e=A1(0),n=[],t=0;return{insert:function i(a,l,c){if(!l.length)return[];const u=t,d=l.length,f=A1(d);let p,g,m,h=Array(d);for(m=0;m<d;++m)h[m]=a(l[m]),f[m]=m;if(h=function Y8e(e,n){return e.sort.call(n,(t,i)=>{const r=e[t],o=e[i];return r<o?-1:r>o?1:0}),function j8e(e,n){return Array.from(n,t=>e[t])}(e,n)}(h,f),u)p=n,g=e,n=Array(u+d),e=A1(u+d),function X8e(e,n,t,i,r,o,s,a,l){let d,c=0,u=0;for(d=0;c<i&&u<s;++d)n[c]<r[u]?(a[d]=n[c],l[d]=t[c++]):(a[d]=r[u],l[d]=o[u++]+e);for(;c<i;++c,++d)a[d]=n[c],l[d]=t[c];for(;u<s;++u,++d)a[d]=r[u],l[d]=o[u]+e}(c,p,g,u,h,f,d,n,e);else{if(c>0)for(m=0;m<d;++m)f[m]+=c;n=h,e=f}return t=u+d,{index:f,value:h}},remove:function r(a,l){const c=t;let u,d,f;for(d=0;!l[e[d]]&&d<c;++d);for(f=d;d<c;++d)l[u=e[d]]||(e[f]=u,n[f]=n[d],++f);t=c-a},bisect:function s(a,l){let c;return l?c=l.length:(l=n,c=t),[K3e(l,a[0],0,c),Ix(l,a[1],0,c)]},reindex:function o(a){for(let l=0,c=t;l<c;++l)e[l]=a[e[l]]},index:()=>e,size:()=>t}}function aP(e){Z.call(this,function G8e(){let e=8,n=[],t=A1(0),i=OS(0,e),r=OS(0,e);return{data:()=>n,seen:()=>t=function K8e(e,n,t){return e.length>=n?e:((t=t||new e.constructor(n)).set(e),t)}(t,n.length),add(o){for(let c,s=0,a=n.length,l=o.length;s<l;++s)c=o[s],c._index=a++,n.push(c)},remove(o,s){const a=n.length,l=Array(a-o),c=n;let u,d,f;for(d=0;!s[d]&&d<a;++d)l[d]=n[d],c[d]=d;for(f=d;d<a;++d)u=n[d],s[d]?c[d]=-1:(c[d]=f,i[f]=i[d],r[f]=r[d],l[f]=u,u._index=f++),i[d]=0;return n=l,c},size:()=>n.length,curr:()=>i,prev:()=>r,reset:o=>r[o]=i[o],all:()=>e<257?255:e<65537?65535:4294967295,set(o,s){i[o]|=s},clear(o,s){i[o]&=~s},resize(o,s){(o>i.length||s>e)&&(e=Math.max(s,e),i=OS(o,e,i),r=OS(o,e))}}}(),e),this._indices=null,this._dims=null}function lP(e){Z.call(this,null,e)}aP.Definition={type:"CrossFilter",metadata:{},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"query",type:"array",array:!0,required:!0,content:{type:"number",array:!0,length:2}}]},pe(aP,Z,{transform(e,n){return this._dims?e.modified("fields")||e.fields.some(i=>n.modified(i.fields))?this.reinit(e,n):this.eval(e,n):this.init(e,n)},init(e,n){const t=e.fields,i=e.query,r=this._indices={},o=this._dims=[],s=i.length;let l,c,a=0;for(;a<s;++a)l=t[a].fname,c=r[l]||(r[l]=Rne()),o.push(One(c,a,i[a]));return this.eval(e,n)},reinit(e,n){const t=n.materialize().fork(),i=e.fields,r=e.query,o=this._indices,s=this._dims,a=this.value,l=a.curr(),c=a.prev(),u=a.all(),d=t.rem=t.add,f=t.mod,h=r.length,p={};let g,m,_,y,v,b,w,x,C;if(c.set(l),n.rem.length&&(v=this.remove(e,n,t)),n.add.length&&a.add(n.add),n.mod.length)for(b={},y=n.mod,w=0,x=y.length;w<x;++w)b[y[w]._index]=1;for(w=0;w<h;++w)C=i[w],(!s[w]||e.modified("fields",w)||n.modified(C.fields))&&(_=C.fname,(g=p[_])||(o[_]=m=Rne(),p[_]=g=m.insert(C,n.source,0)),s[w]=One(m,w,r[w]).onAdd(g,l));for(w=0,x=a.data().length;w<x;++w)v[w]||(c[w]!==l[w]?d.push(w):b[w]&&l[w]!==u&&f.push(w));return a.mask=(1<<h)-1,t},eval(e,n){const t=n.materialize().fork(),i=this._dims.length;let r=0;return n.rem.length&&(this.remove(e,n,t),r|=(1<<i)-1),e.modified("query")&&!e.modified("fields")&&(r|=this.update(e,n,t)),n.add.length&&(this.insert(e,n,t),r|=(1<<i)-1),n.mod.length&&(this.modify(n,t),r|=(1<<i)-1),this.value.mask=r,t},insert(e,n,t){const i=n.add,r=this.value,o=this._dims,s=this._indices,a=e.fields,l={},c=t.add,u=r.size()+i.length,d=o.length;let h,p,g,f=r.size();r.resize(u,d),r.add(i);const m=r.curr(),_=r.prev(),y=r.all();for(h=0;h<d;++h)p=a[h].fname,g=l[p]||(l[p]=s[p].insert(a[h],i,f)),o[h].onAdd(g,m);for(;f<u;++f)_[f]=y,m[f]!==y&&c.push(f)},modify(e,n){const t=n.mod,i=this.value,r=i.curr(),o=i.all(),s=e.mod;let a,l,c;for(a=0,l=s.length;a<l;++a)c=s[a]._index,r[c]!==o&&t.push(c)},remove(e,n,t){const i=this._indices,r=this.value,o=r.curr(),s=r.prev(),a=r.all(),l={},c=t.rem,u=n.rem;let d,f,h,p;for(d=0,f=u.length;d<f;++d)h=u[d]._index,l[h]=1,s[h]=p=o[h],o[h]=a,p!==a&&c.push(h);for(h in i)i[h].remove(f,l);return this.reindex(n,f,l),l},reindex(e,n,t){const i=this._indices,r=this.value;e.runAfter(()=>{const o=r.remove(n,t);for(const s in i)i[s].reindex(o)})},update(e,n,t){const i=this._dims,r=e.query,o=n.stamp,s=i.length;let l,c,a=0;for(t.filters=0,c=0;c<s;++c)e.modified("query",c)&&(l=c,++a);if(1===a)a=i[l].one,this.incrementOne(i[l],r[l],t.add,t.rem);else for(c=0,a=0;c<s;++c)e.modified("query",c)&&(a|=i[c].one,this.incrementAll(i[c],r[c],o,t.add),t.rem=t.add);return a},incrementAll(e,n,t,i){const r=this.value,o=r.seen(),s=r.curr(),a=r.prev(),l=e.index(),c=e.bisect(e.range),u=e.bisect(n),d=u[0],f=u[1],h=c[0],p=c[1],g=e.one;let m,_,y;if(d<h)for(m=d,_=Math.min(h,f);m<_;++m)y=l[m],o[y]!==t&&(a[y]=s[y],o[y]=t,i.push(y)),s[y]^=g;else if(d>h)for(m=h,_=Math.min(d,p);m<_;++m)y=l[m],o[y]!==t&&(a[y]=s[y],o[y]=t,i.push(y)),s[y]^=g;if(f>p)for(m=Math.max(d,p),_=f;m<_;++m)y=l[m],o[y]!==t&&(a[y]=s[y],o[y]=t,i.push(y)),s[y]^=g;else if(f<p)for(m=Math.max(h,f),_=p;m<_;++m)y=l[m],o[y]!==t&&(a[y]=s[y],o[y]=t,i.push(y)),s[y]^=g;e.range=n.slice()},incrementOne(e,n,t,i){const o=this.value.curr(),s=e.index(),a=e.bisect(e.range),l=e.bisect(n),c=l[0],u=l[1],d=a[0],f=a[1],h=e.one;let p,g,m;if(c<d)for(p=c,g=Math.min(d,u);p<g;++p)m=s[p],o[m]^=h,t.push(m);else if(c>d)for(p=d,g=Math.min(c,f);p<g;++p)m=s[p],o[m]^=h,i.push(m);if(u>f)for(p=Math.max(c,f),g=u;p<g;++p)m=s[p],o[m]^=h,t.push(m);else if(u<f)for(p=Math.max(d,u),g=f;p<g;++p)m=s[p],o[m]^=h,i.push(m);e.range=n.slice()}}),lP.Definition={type:"ResolveFilter",metadata:{},params:[{name:"ignore",type:"number",required:!0,description:"A bit mask indicating which filters to ignore."},{name:"filter",type:"object",required:!0,description:"Per-tuple filter bitmaps from a CrossFilter transform."}]},pe(lP,Z,{transform(e,n){const t=~(e.ignore||0),i=e.filter,r=i.mask;if(!(r&t))return n.StopPropagation;const o=n.fork(n.ALL),s=i.data(),a=i.curr(),l=i.prev(),c=u=>a[u]&t?null:s[u];return o.filter(o.MOD,c),r&r-1?(o.filter(o.ADD,u=>{const d=a[u]&t;return!d&&d^l[u]&t?s[u]:null}),o.filter(o.REM,u=>{const d=a[u]&t;return!d||d^d^l[u]&t?null:s[u]})):(o.filter(o.ADD,c),o.filter(o.REM,u=>(a[u]&t)===r?s[u]:null)),o.filter(o.SOURCE,u=>c(u._index))}});const uh="Literal",Fne="CallExpression";function va(e){this.type=e}va.prototype.visit=function(e){let n,t,i;if(e(this))return 1;for(n=function a7e(e){switch(e.type){case"ArrayExpression":return e.elements;case"BinaryExpression":case"LogicalExpression":return[e.left,e.right];case Fne:return[e.callee].concat(e.arguments);case"ConditionalExpression":return[e.test,e.consequent,e.alternate];case"MemberExpression":return[e.object,e.property];case"ObjectExpression":return e.properties;case"Property":return[e.key,e.value];case"UnaryExpression":return[e.argument];default:return[]}}(this),t=0,i=n.length;t<i;++t)if(n[t].visit(e))return 1};var Tl,Fe,ie,dr,rn,RS=1,k1=2,dh=3,gd=4,FS=5,fh=6,fo=7,O1=8;(Tl={})[RS]="Boolean",Tl[k1]="<end>",Tl[dh]="Identifier",Tl[gd]="Keyword",Tl[FS]="Null",Tl[fh]="Numeric",Tl[fo]="Punctuator",Tl[O1]="String",Tl[9]="RegularExpression";var c7e="ArrayExpression",u7e="BinaryExpression",d7e="CallExpression",f7e="ConditionalExpression",Nne="Identifier",h7e="Literal",p7e="LogicalExpression",g7e="MemberExpression",m7e="ObjectExpression",_7e="Property",y7e="UnaryExpression",vi="Unexpected token %0",v7e="Unexpected number",b7e="Unexpected string",w7e="Unexpected identifier",C7e="Unexpected reserved word",x7e="Unexpected end of input",cP="Invalid regular expression",uP="Invalid regular expression: missing /",Pne="Octal literals are not allowed in strict mode.",E7e="Duplicate data property in object literal not allowed in strict mode",Ui="ILLEGAL",R1="Disabled.",S7e=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0370-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0620-\\u064A\\u066E\\u066F\\u0671-\\u06D3\\u06D5\\u06E5\\u06E6\\u06EE\\u06EF\\u06FA-\\u06FC\\u06FF\\u0710\\u0712-\\u072F\\u074D-\\u07A5\\u07B1\\u07CA-\\u07EA\\u07F4\\u07F5\\u07FA\\u0800-\\u0815\\u081A\\u0824\\u0828\\u0840-\\u0858\\u08A0-\\u08B2\\u0904-\\u0939\\u093D\\u0950\\u0958-\\u0961\\u0971-\\u0980\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BD\\u09CE\\u09DC\\u09DD\\u09DF-\\u09E1\\u09F0\\u09F1\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A59-\\u0A5C\\u0A5E\\u0A72-\\u0A74\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABD\\u0AD0\\u0AE0\\u0AE1\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3D\\u0B5C\\u0B5D\\u0B5F-\\u0B61\\u0B71\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BD0\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D\\u0C58\\u0C59\\u0C60\\u0C61\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBD\\u0CDE\\u0CE0\\u0CE1\\u0CF1\\u0CF2\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D\\u0D4E\\u0D60\\u0D61\\u0D7A-\\u0D7F\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0E01-\\u0E30\\u0E32\\u0E33\\u0E40-\\u0E46\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB0\\u0EB2\\u0EB3\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EDC-\\u0EDF\\u0F00\\u0F40-\\u0F47\\u0F49-\\u0F6C\\u0F88-\\u0F8C\\u1000-\\u102A\\u103F\\u1050-\\u1055\\u105A-\\u105D\\u1061\\u1065\\u1066\\u106E-\\u1070\\u1075-\\u1081\\u108E\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176C\\u176E-\\u1770\\u1780-\\u17B3\\u17D7\\u17DC\\u1820-\\u1877\\u1880-\\u18A8\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1950-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19C1-\\u19C7\\u1A00-\\u1A16\\u1A20-\\u1A54\\u1AA7\\u1B05-\\u1B33\\u1B45-\\u1B4B\\u1B83-\\u1BA0\\u1BAE\\u1BAF\\u1BBA-\\u1BE5\\u1C00-\\u1C23\\u1C4D-\\u1C4F\\u1C5A-\\u1C7D\\u1CE9-\\u1CEC\\u1CEE-\\u1CF1\\u1CF5\\u1CF6\\u1D00-\\u1DBF\\u1E00-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u2071\\u207F\\u2090-\\u209C\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CEE\\u2CF2\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D80-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2E2F\\u3005-\\u3007\\u3021-\\u3029\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA61F\\uA62A\\uA62B\\uA640-\\uA66E\\uA67F-\\uA69D\\uA6A0-\\uA6EF\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA801\\uA803-\\uA805\\uA807-\\uA80A\\uA80C-\\uA822\\uA840-\\uA873\\uA882-\\uA8B3\\uA8F2-\\uA8F7\\uA8FB\\uA90A-\\uA925\\uA930-\\uA946\\uA960-\\uA97C\\uA984-\\uA9B2\\uA9CF\\uA9E0-\\uA9E4\\uA9E6-\\uA9EF\\uA9FA-\\uA9FE\\uAA00-\\uAA28\\uAA40-\\uAA42\\uAA44-\\uAA4B\\uAA60-\\uAA76\\uAA7A\\uAA7E-\\uAAAF\\uAAB1\\uAAB5\\uAAB6\\uAAB9-\\uAABD\\uAAC0\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEA\\uAAF2-\\uAAF4\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABE2\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D\\uFB1F-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF21-\\uFF3A\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]"),T7e=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0300-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u0483-\\u0487\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u0591-\\u05BD\\u05BF\\u05C1\\u05C2\\u05C4\\u05C5\\u05C7\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0610-\\u061A\\u0620-\\u0669\\u066E-\\u06D3\\u06D5-\\u06DC\\u06DF-\\u06E8\\u06EA-\\u06FC\\u06FF\\u0710-\\u074A\\u074D-\\u07B1\\u07C0-\\u07F5\\u07FA\\u0800-\\u082D\\u0840-\\u085B\\u08A0-\\u08B2\\u08E4-\\u0963\\u0966-\\u096F\\u0971-\\u0983\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BC-\\u09C4\\u09C7\\u09C8\\u09CB-\\u09CE\\u09D7\\u09DC\\u09DD\\u09DF-\\u09E3\\u09E6-\\u09F1\\u0A01-\\u0A03\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A3C\\u0A3E-\\u0A42\\u0A47\\u0A48\\u0A4B-\\u0A4D\\u0A51\\u0A59-\\u0A5C\\u0A5E\\u0A66-\\u0A75\\u0A81-\\u0A83\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABC-\\u0AC5\\u0AC7-\\u0AC9\\u0ACB-\\u0ACD\\u0AD0\\u0AE0-\\u0AE3\\u0AE6-\\u0AEF\\u0B01-\\u0B03\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3C-\\u0B44\\u0B47\\u0B48\\u0B4B-\\u0B4D\\u0B56\\u0B57\\u0B5C\\u0B5D\\u0B5F-\\u0B63\\u0B66-\\u0B6F\\u0B71\\u0B82\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BBE-\\u0BC2\\u0BC6-\\u0BC8\\u0BCA-\\u0BCD\\u0BD0\\u0BD7\\u0BE6-\\u0BEF\\u0C00-\\u0C03\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D-\\u0C44\\u0C46-\\u0C48\\u0C4A-\\u0C4D\\u0C55\\u0C56\\u0C58\\u0C59\\u0C60-\\u0C63\\u0C66-\\u0C6F\\u0C81-\\u0C83\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBC-\\u0CC4\\u0CC6-\\u0CC8\\u0CCA-\\u0CCD\\u0CD5\\u0CD6\\u0CDE\\u0CE0-\\u0CE3\\u0CE6-\\u0CEF\\u0CF1\\u0CF2\\u0D01-\\u0D03\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D-\\u0D44\\u0D46-\\u0D48\\u0D4A-\\u0D4E\\u0D57\\u0D60-\\u0D63\\u0D66-\\u0D6F\\u0D7A-\\u0D7F\\u0D82\\u0D83\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0DCA\\u0DCF-\\u0DD4\\u0DD6\\u0DD8-\\u0DDF\\u0DE6-\\u0DEF\\u0DF2\\u0DF3\\u0E01-\\u0E3A\\u0E40-\\u0E4E\\u0E50-\\u0E59\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB9\\u0EBB-\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EC8-\\u0ECD\\u0ED0-\\u0ED9\\u0EDC-\\u0EDF\\u0F00\\u0F18\\u0F19\\u0F20-\\u0F29\\u0F35\\u0F37\\u0F39\\u0F3E-\\u0F47\\u0F49-\\u0F6C\\u0F71-\\u0F84\\u0F86-\\u0F97\\u0F99-\\u0FBC\\u0FC6\\u1000-\\u1049\\u1050-\\u109D\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u135D-\\u135F\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1714\\u1720-\\u1734\\u1740-\\u1753\\u1760-\\u176C\\u176E-\\u1770\\u1772\\u1773\\u1780-\\u17D3\\u17D7\\u17DC\\u17DD\\u17E0-\\u17E9\\u180B-\\u180D\\u1810-\\u1819\\u1820-\\u1877\\u1880-\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1920-\\u192B\\u1930-\\u193B\\u1946-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19B0-\\u19C9\\u19D0-\\u19D9\\u1A00-\\u1A1B\\u1A20-\\u1A5E\\u1A60-\\u1A7C\\u1A7F-\\u1A89\\u1A90-\\u1A99\\u1AA7\\u1AB0-\\u1ABD\\u1B00-\\u1B4B\\u1B50-\\u1B59\\u1B6B-\\u1B73\\u1B80-\\u1BF3\\u1C00-\\u1C37\\u1C40-\\u1C49\\u1C4D-\\u1C7D\\u1CD0-\\u1CD2\\u1CD4-\\u1CF6\\u1CF8\\u1CF9\\u1D00-\\u1DF5\\u1DFC-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u200C\\u200D\\u203F\\u2040\\u2054\\u2071\\u207F\\u2090-\\u209C\\u20D0-\\u20DC\\u20E1\\u20E5-\\u20F0\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D7F-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2DE0-\\u2DFF\\u2E2F\\u3005-\\u3007\\u3021-\\u302F\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u3099\\u309A\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA62B\\uA640-\\uA66F\\uA674-\\uA67D\\uA67F-\\uA69D\\uA69F-\\uA6F1\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA827\\uA840-\\uA873\\uA880-\\uA8C4\\uA8D0-\\uA8D9\\uA8E0-\\uA8F7\\uA8FB\\uA900-\\uA92D\\uA930-\\uA953\\uA960-\\uA97C\\uA980-\\uA9C0\\uA9CF-\\uA9D9\\uA9E0-\\uA9FE\\uAA00-\\uAA36\\uAA40-\\uAA4D\\uAA50-\\uAA59\\uAA60-\\uAA76\\uAA7A-\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEF\\uAAF2-\\uAAF6\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABEA\\uABEC\\uABED\\uABF0-\\uABF9\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE00-\\uFE0F\\uFE20-\\uFE2D\\uFE33\\uFE34\\uFE4D-\\uFE4F\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF10-\\uFF19\\uFF21-\\uFF3A\\uFF3F\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]");function NS(e,n){if(!e)throw new Error("ASSERT: "+n)}function Oc(e){return e>=48&&e<=57}function dP(e){return"0123456789abcdefABCDEF".indexOf(e)>=0}function F1(e){return"01234567".indexOf(e)>=0}function D7e(e){return 32===e||9===e||11===e||12===e||160===e||e>=5760&&[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].indexOf(e)>=0}function N1(e){return 10===e||13===e||8232===e||8233===e}function P1(e){return 36===e||95===e||e>=65&&e<=90||e>=97&&e<=122||92===e||e>=128&&S7e.test(String.fromCharCode(e))}function PS(e){return 36===e||95===e||e>=65&&e<=90||e>=97&&e<=122||e>=48&&e<=57||92===e||e>=128&&T7e.test(String.fromCharCode(e))}const I7e={if:1,in:1,do:1,var:1,for:1,new:1,try:1,let:1,this:1,else:1,case:1,void:1,with:1,enum:1,while:1,break:1,catch:1,throw:1,const:1,yield:1,class:1,super:1,return:1,typeof:1,delete:1,switch:1,export:1,import:1,public:1,static:1,default:1,finally:1,extends:1,package:1,private:1,function:1,continue:1,debugger:1,interface:1,protected:1,instanceof:1,implements:1};function Lne(){for(;ie<dr;){const e=Fe.charCodeAt(ie);if(!D7e(e)&&!N1(e))break;++ie}}function fP(e){var n,t,i,r=0;for(t="u"===e?4:2,n=0;n<t;++n)ie<dr&&dP(Fe[ie])?(i=Fe[ie++],r=16*r+"0123456789abcdef".indexOf(i.toLowerCase())):Bt({},vi,Ui);return String.fromCharCode(r)}function M7e(){var e,n;for(n=0,"}"===(e=Fe[ie])&&Bt({},vi,Ui);ie<dr&&dP(e=Fe[ie++]);)n=16*n+"0123456789abcdef".indexOf(e.toLowerCase());return(n>1114111||"}"!==e)&&Bt({},vi,Ui),n<=65535?String.fromCharCode(n):String.fromCharCode(55296+(n-65536>>10),56320+(n-65536&1023))}function $ne(){var e,n;for(e=Fe.charCodeAt(ie++),n=String.fromCharCode(e),92===e&&(117!==Fe.charCodeAt(ie)&&Bt({},vi,Ui),++ie,(!(e=fP("u"))||"\\"===e||!P1(e.charCodeAt(0)))&&Bt({},vi,Ui),n=e);ie<dr&&PS(e=Fe.charCodeAt(ie));)++ie,n+=String.fromCharCode(e),92===e&&(n=n.substr(0,n.length-1),117!==Fe.charCodeAt(ie)&&Bt({},vi,Ui),++ie,(!(e=fP("u"))||"\\"===e||!PS(e.charCodeAt(0)))&&Bt({},vi,Ui),n+=e);return n}function hP(){var t,r,o,s,e=ie,n=Fe.charCodeAt(ie),i=Fe[ie];switch(n){case 46:case 40:case 41:case 59:case 44:case 123:case 125:case 91:case 93:case 58:case 63:case 126:return++ie,{type:fo,value:String.fromCharCode(n),start:e,end:ie};default:if(61===(t=Fe.charCodeAt(ie+1)))switch(n){case 43:case 45:case 47:case 60:case 62:case 94:case 124:case 37:case 38:case 42:return ie+=2,{type:fo,value:String.fromCharCode(n)+String.fromCharCode(t),start:e,end:ie};case 33:case 61:return 61===Fe.charCodeAt(ie+=2)&&++ie,{type:fo,value:Fe.slice(e,ie),start:e,end:ie}}}return">>>="===(s=Fe.substr(ie,4))?{type:fo,value:s,start:e,end:ie+=4}:">>>"===(o=s.substr(0,3))||"<<="===o||">>="===o?{type:fo,value:o,start:e,end:ie+=3}:i===(r=o.substr(0,2))[1]&&"+-<>&|".indexOf(i)>=0||"=>"===r?{type:fo,value:r,start:e,end:ie+=2}:("//"===r&&Bt({},vi,Ui),"<>=!+-*%&|^/".indexOf(i)>=0?(++ie,{type:fo,value:i,start:e,end:ie}):void Bt({},vi,Ui))}function Bne(){var e,n,t;if(NS(Oc((t=Fe[ie]).charCodeAt(0))||"."===t,"Numeric literal must start with a decimal digit or a decimal point"),n=ie,e="","."!==t){if(e=Fe[ie++],t=Fe[ie],"0"===e){if("x"===t||"X"===t)return++ie,function O7e(e){let n="";for(;ie<dr&&dP(Fe[ie]);)n+=Fe[ie++];return 0===n.length&&Bt({},vi,Ui),P1(Fe.charCodeAt(ie))&&Bt({},vi,Ui),{type:fh,value:parseInt("0x"+n,16),start:e,end:ie}}(n);if(F1(t))return function R7e(e){let n="0"+Fe[ie++];for(;ie<dr&&F1(Fe[ie]);)n+=Fe[ie++];return(P1(Fe.charCodeAt(ie))||Oc(Fe.charCodeAt(ie)))&&Bt({},vi,Ui),{type:fh,value:parseInt(n,8),octal:!0,start:e,end:ie}}(n);t&&Oc(t.charCodeAt(0))&&Bt({},vi,Ui)}for(;Oc(Fe.charCodeAt(ie));)e+=Fe[ie++];t=Fe[ie]}if("."===t){for(e+=Fe[ie++];Oc(Fe.charCodeAt(ie));)e+=Fe[ie++];t=Fe[ie]}if("e"===t||"E"===t)if(e+=Fe[ie++],("+"===(t=Fe[ie])||"-"===t)&&(e+=Fe[ie++]),Oc(Fe.charCodeAt(ie)))for(;Oc(Fe.charCodeAt(ie));)e+=Fe[ie++];else Bt({},vi,Ui);return P1(Fe.charCodeAt(ie))&&Bt({},vi,Ui),{type:fh,value:parseFloat(e),start:n,end:ie}}function Vne(){if(Lne(),ie>=dr)return{type:k1,start:ie,end:ie};const e=Fe.charCodeAt(ie);return P1(e)?function k7e(){var e,n;return e=ie,n=92===Fe.charCodeAt(ie)?$ne():function A7e(){var e,n;for(e=ie++;ie<dr;){if(92===(n=Fe.charCodeAt(ie)))return ie=e,$ne();if(!PS(n))break;++ie}return Fe.slice(e,ie)}(),{type:1===n.length?dh:I7e.hasOwnProperty(n)?gd:"null"===n?FS:"true"===n||"false"===n?RS:dh,value:n,start:e,end:ie}}():40===e||41===e||59===e?hP():39===e||34===e?function F7e(){var n,t,i,r,e="",o=!1;for(NS("'"===(n=Fe[ie])||'"'===n,"String literal must starts with a quote"),t=ie,++ie;ie<dr;){if((i=Fe[ie++])===n){n="";break}if("\\"===i)if((i=Fe[ie++])&&N1(i.charCodeAt(0)))"\r"===i&&"\n"===Fe[ie]&&++ie;else switch(i){case"u":case"x":"{"===Fe[ie]?(++ie,e+=M7e()):e+=fP(i);break;case"n":e+="\n";break;case"r":e+="\r";break;case"t":e+="\t";break;case"b":e+="\b";break;case"f":e+="\f";break;case"v":e+="\v";break;default:F1(i)?(0!==(r="01234567".indexOf(i))&&(o=!0),ie<dr&&F1(Fe[ie])&&(o=!0,r=8*r+"01234567".indexOf(Fe[ie++]),"0123".indexOf(i)>=0&&ie<dr&&F1(Fe[ie])&&(r=8*r+"01234567".indexOf(Fe[ie++]))),e+=String.fromCharCode(r)):e+=i}else{if(N1(i.charCodeAt(0)))break;e+=i}}return""!==n&&Bt({},vi,Ui),{type:O1,value:e,octal:o,start:t,end:ie}}():46===e?Oc(Fe.charCodeAt(ie+1))?Bne():hP():Oc(e)?Bne():hP()}function ho(){const e=rn;return ie=e.end,rn=Vne(),ie=e.end,e}function zne(){const e=ie;rn=Vne(),ie=e}function Une(e,n,t){const i=new va("||"===e||"&&"===e?p7e:u7e);return i.operator=e,i.left=n,i.right=t,i}function z7e(e,n){const t=new va(d7e);return t.callee=e,t.arguments=n,t}function pP(e){const n=new va(Nne);return n.name=e,n}function L1(e){const n=new va(h7e);return n.value=e.value,n.raw=Fe.slice(e.start,e.end),e.regex&&("//"===n.raw&&(n.raw="/(?:)/"),n.regex=e.regex),n}function Hne(e,n,t){const i=new va(g7e);return i.computed="["===e,i.object=n,i.property=t,i.computed||(t.member=!0),i}function jne(e,n,t){const i=new va(_7e);return i.key=n,i.value=t,i.kind=e,i}function Bt(e,n){var t,i=Array.prototype.slice.call(arguments,2),r=n.replace(/%(\d)/g,(o,s)=>(NS(s<i.length,"Message reference must be in range"),i[s]));throw(t=new Error(r)).index=ie,t.description=r,t}function LS(e){e.type===k1&&Bt(e,x7e),e.type===fh&&Bt(e,v7e),e.type===O1&&Bt(e,b7e),e.type===dh&&Bt(e,w7e),e.type===gd&&Bt(e,C7e),Bt(e,vi,e.value)}function fr(e){const n=ho();(n.type!==fo||n.value!==e)&&LS(n)}function bn(e){return rn.type===fo&&rn.value===e}function gP(e){return rn.type===gd&&rn.value===e}function qne(){ie=rn.start;const e=ho();return e.type===O1||e.type===fh?(e.octal&&Bt(e,Pne),L1(e)):pP(e.value)}function W7e(){var e,n,t;return ie=rn.start,(e=rn).type===dh?(t=qne(),fr(":"),jne("init",t,hh())):e.type!==k1&&e.type!==fo?(n=qne(),fr(":"),jne("init",n,hh())):void LS(e)}const Y7e={if:1};function X7e(){var e,n,t;if(bn("("))return function K7e(){fr("(");const e=mP();return fr(")"),e}();if(bn("["))return function q7e(){const e=[];for(ie=rn.start,fr("[");!bn("]");)bn(",")?(ho(),e.push(null)):(e.push(hh()),bn("]")||fr(","));return ho(),function V7e(e){const n=new va(c7e);return n.elements=e,n}(e)}();if(bn("{"))return function G7e(){var n,i,e=[],r={},o=String;for(ie=rn.start,fr("{");!bn("}");)i="$"+((n=W7e()).key.type===Nne?n.key.name:o(n.key.value)),Object.prototype.hasOwnProperty.call(r,i)?Bt({},E7e):r[i]=!0,e.push(n),bn("}")||fr(",");return fr("}"),function H7e(e){const n=new va(m7e);return n.properties=e,n}(e)}();if(ie=rn.start,(e=rn.type)===dh||Y7e[rn.value])t=pP(ho().value);else if(e===O1||e===fh)rn.octal&&Bt(rn,Pne),t=L1(ho());else{if(e===gd)throw new Error(R1);e===RS?((n=ho()).value="true"===n.value,t=L1(n)):e===FS?((n=ho()).value=null,t=L1(n)):bn("/")||bn("/=")?(t=L1(function $7e(){var e,n,t,i;return rn=null,Lne(),e=ie,n=function P7e(){var e,n,t,i;for(NS("/"===(e=Fe[ie]),"Regular expression literal must start with a slash"),n=Fe[ie++],t=!1,i=!1;ie<dr;)if(n+=e=Fe[ie++],"\\"===e)N1((e=Fe[ie++]).charCodeAt(0))&&Bt({},uP),n+=e;else if(N1(e.charCodeAt(0)))Bt({},uP);else if(t)"]"===e&&(t=!1);else{if("/"===e){i=!0;break}"["===e&&(t=!0)}return i||Bt({},uP),{value:n.substr(1,n.length-2),literal:n}}(),t=function L7e(){var e,n,t;for(n="",t="";ie<dr&&PS((e=Fe[ie]).charCodeAt(0));)++ie,"\\"===e&&ie<dr?Bt({},vi,Ui):(t+=e,n+=e);return t.search(/[^gimuy]/g)>=0&&Bt({},cP,t),{value:t,literal:n}}(),i=function N7e(e,n){let t=e;n.indexOf("u")>=0&&(t=t.replace(/\\u\{([0-9a-fA-F]+)\}/g,(i,r)=>{if(parseInt(r,16)<=1114111)return"x";Bt({},cP)}).replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"x"));try{new RegExp(t)}catch{Bt({},cP)}try{return new RegExp(e,n)}catch{return null}}(n.value,t.value),{literal:n.literal+t.literal,value:i,regex:{pattern:n.value,flags:t.value},start:e,end:ie}}()),zne()):LS(ho())}return t}function Q7e(){const e=[];if(fr("("),!bn(")"))for(;ie<dr&&(e.push(hh()),!bn(")"));)fr(",");return fr(")"),e}function Z7e(){ie=rn.start;const e=ho();return function B7e(e){return e.type===dh||e.type===gd||e.type===RS||e.type===FS}(e)||LS(e),pP(e.value)}function e$e(){fr("[");const e=mP();return fr("]"),e}function Wne(){const e=function t$e(){var e;for(e=X7e();;)if(bn("."))fr("."),e=Hne(".",e,Z7e());else if(bn("("))e=z7e(e,Q7e());else{if(!bn("["))break;e=Hne("[",e,e$e())}return e}();if(rn.type===fo&&(bn("++")||bn("--")))throw new Error(R1);return e}function $S(){var e,n;if(rn.type!==fo&&rn.type!==gd)n=Wne();else{if(bn("++")||bn("--"))throw new Error(R1);if(bn("+")||bn("-")||bn("~")||bn("!"))e=ho(),n=$S(),n=function j7e(e,n){const t=new va(y7e);return t.operator=e,t.argument=n,t.prefix=!0,t}(e.value,n);else{if(gP("delete")||gP("void")||gP("typeof"))throw new Error(R1);n=Wne()}}return n}function Gne(e){let n=0;if(e.type!==fo&&e.type!==gd)return 0;switch(e.value){case"||":n=1;break;case"&&":n=2;break;case"|":n=3;break;case"^":n=4;break;case"&":n=5;break;case"==":case"!=":case"===":case"!==":n=6;break;case"<":case">":case"<=":case">=":case"instanceof":case"in":n=7;break;case"<<":case">>":case">>>":n=8;break;case"+":case"-":n=9;break;case"*":case"/":case"%":n=11}return n}function hh(){var e,n;return e=function n$e(){var e,n,t,i,r,o,s,a,l,c;if(e=rn,l=$S(),0===(r=Gne(i=rn)))return l;for(i.prec=r,ho(),n=[e,rn],o=[l,i,s=$S()];(r=Gne(rn))>0;){for(;o.length>2&&r<=o[o.length-2].prec;)s=o.pop(),a=o.pop().value,l=o.pop(),n.pop(),t=Une(a,l,s),o.push(t);(i=ho()).prec=r,o.push(i),n.push(rn),t=$S(),o.push(t)}for(t=o[c=o.length-1],n.pop();c>1;)n.pop(),t=Une(o[c-1].value,o[c-2],t),c-=2;return t}(),bn("?")&&(ho(),n=hh(),fr(":"),e=function U7e(e,n,t){const i=new va(f7e);return i.test=e,i.consequent=n,i.alternate=t,i}(e,n,hh())),e}function mP(){const e=hh();if(bn(","))throw new Error(R1);return e}function _P(e){ie=0,dr=(Fe=e).length,rn=null,zne();const n=mP();if(rn.type!==k1)throw new Error("Unexpect token after expression.");return n}var Kne={NaN:"NaN",E:"Math.E",LN2:"Math.LN2",LN10:"Math.LN10",LOG2E:"Math.LOG2E",LOG10E:"Math.LOG10E",PI:"Math.PI",SQRT1_2:"Math.SQRT1_2",SQRT2:"Math.SQRT2",MIN_VALUE:"Number.MIN_VALUE",MAX_VALUE:"Number.MAX_VALUE"};function Yne(e){function t(s,a,l){return c=>function n(s,a,l,c){let u=e(a[0]);return l&&(u=l+"("+u+")",0===l.lastIndexOf("new ",0)&&(u="("+u+")")),u+"."+s+(c<0?"":0===c?"()":"("+a.slice(1).map(e).join(",")+")")}(s,c,a,l)}const i="new Date",r="String",o="RegExp";return{isNaN:"Number.isNaN",isFinite:"Number.isFinite",abs:"Math.abs",acos:"Math.acos",asin:"Math.asin",atan:"Math.atan",atan2:"Math.atan2",ceil:"Math.ceil",cos:"Math.cos",exp:"Math.exp",floor:"Math.floor",hypot:"Math.hypot",log:"Math.log",max:"Math.max",min:"Math.min",pow:"Math.pow",random:"Math.random",round:"Math.round",sin:"Math.sin",sqrt:"Math.sqrt",tan:"Math.tan",clamp:function(s){s.length<3&&re("Missing arguments to clamp function."),s.length>3&&re("Too many arguments to clamp function.");const a=s.map(e);return"Math.max("+a[1]+", Math.min("+a[2]+","+a[0]+"))"},now:"Date.now",utc:"Date.UTC",datetime:i,date:t("getDate",i,0),day:t("getDay",i,0),year:t("getFullYear",i,0),month:t("getMonth",i,0),hours:t("getHours",i,0),minutes:t("getMinutes",i,0),seconds:t("getSeconds",i,0),milliseconds:t("getMilliseconds",i,0),time:t("getTime",i,0),timezoneoffset:t("getTimezoneOffset",i,0),utcdate:t("getUTCDate",i,0),utcday:t("getUTCDay",i,0),utcyear:t("getUTCFullYear",i,0),utcmonth:t("getUTCMonth",i,0),utchours:t("getUTCHours",i,0),utcminutes:t("getUTCMinutes",i,0),utcseconds:t("getUTCSeconds",i,0),utcmilliseconds:t("getUTCMilliseconds",i,0),length:t("length",null,-1),parseFloat:"parseFloat",parseInt:"parseInt",upper:t("toUpperCase",r,0),lower:t("toLowerCase",r,0),substring:t("substring",r),split:t("split",r),trim:t("trim",r,0),regexp:o,test:t("test",o),if:function(s){s.length<3&&re("Missing arguments to if function."),s.length>3&&re("Too many arguments to if function.");const a=s.map(e);return"("+a[0]+"?"+a[1]+":"+a[2]+")"}}}function Xne(e){const n=(e=e||{}).allowed?oa(e.allowed):{},t=e.forbidden?oa(e.forbidden):{},i=e.constants||Kne,r=(e.functions||Yne)(d),o=e.globalvar,s=e.fieldvar,a=ct(o)?o:p=>`${o}["${p}"]`;let l={},c={},u=0;function d(p){if(xe(p))return p;const g=f[p.type];return null==g&&re("Unsupported type: "+p.type),g(p)}const f={Literal:p=>p.raw,Identifier:p=>{const g=p.name;return u>0?g:$e(t,g)?re("Illegal identifier: "+g):$e(i,g)?i[g]:$e(n,g)?g:(l[g]=1,a(g))},MemberExpression:p=>{const g=!p.computed,m=d(p.object);g&&(u+=1);const _=d(p.property);return m===s&&(c[function i$e(e){const n=e&&e.length-1;return n&&('"'===e[0]&&'"'===e[n]||"'"===e[0]&&"'"===e[n])?e.slice(1,-1):e}(_)]=1),g&&(u-=1),m+(g?"."+_:"["+_+"]")},CallExpression:p=>{"Identifier"!==p.callee.type&&re("Illegal callee type: "+p.callee.type);const g=p.callee.name,m=p.arguments,_=$e(r,g)&&r[g];return _||re("Unrecognized function: "+g),ct(_)?_(m):_+"("+m.map(d).join(",")+")"},ArrayExpression:p=>"["+p.elements.map(d).join(",")+"]",BinaryExpression:p=>"("+d(p.left)+" "+p.operator+" "+d(p.right)+")",UnaryExpression:p=>"("+p.operator+d(p.argument)+")",ConditionalExpression:p=>"("+d(p.test)+"?"+d(p.consequent)+":"+d(p.alternate)+")",LogicalExpression:p=>"("+d(p.left)+p.operator+d(p.right)+")",ObjectExpression:p=>"{"+p.properties.map(d).join(",")+"}",Property:p=>{u+=1;const g=d(p.key);return u-=1,g+":"+d(p.value)}};function h(p){const g={code:d(p),globals:Object.keys(l),fields:Object.keys(c)};return l={},c={},g}return h.functions=r,h.constants=i,h}var Qne,Zne,yP,vP,bP,BS=new Vi,VS=new Vi,Dl={point:zi,lineStart:zi,lineEnd:zi,polygonStart:function(){BS=new Vi,Dl.lineStart=r$e,Dl.lineEnd=o$e},polygonEnd:function(){var e=+BS;VS.add(e<0?Or+e:e),this.lineStart=this.lineEnd=this.point=zi},sphere:function(){VS.add(Or)}};function r$e(){Dl.point=s$e}function o$e(){Jne(Qne,Zne)}function s$e(e,n){Dl.point=Jne,Qne=e,Zne=n,yP=e*=gt,vP=We(n=(n*=gt)/2+NE),bP=Le(n)}function Jne(e,n){var t=(e*=gt)-yP,i=t>=0?1:-1,r=i*t,o=We(n=(n*=gt)/2+NE),s=Le(n),a=bP*s,l=vP*o+a*We(r),c=a*i*Le(r);BS.add(Os(c,l)),yP=e,vP=o,bP=s}var On,po,Bn,Jo,ph,eie,tie,xm,$1,md,Rc,Fc={point:wP,lineStart:iie,lineEnd:rie,polygonStart:function(){Fc.point=oie,Fc.lineStart=l$e,Fc.lineEnd=c$e,$1=new Vi,Dl.polygonStart()},polygonEnd:function(){Dl.polygonEnd(),Fc.point=wP,Fc.lineStart=iie,Fc.lineEnd=rie,BS<0?(On=-(Bn=180),po=-(Jo=90)):$1>ze?Jo=90:$1<-ze&&(po=-90),Rc[0]=On,Rc[1]=Bn},sphere:function(){On=-(Bn=180),po=-(Jo=90)}};function wP(e,n){md.push(Rc=[On=e,Bn=e]),n<po&&(po=n),n>Jo&&(Jo=n)}function nie(e,n){var t=Qf([e*gt,n*gt]);if(xm){var i=am(xm,t),o=am([i[1],-i[0],0],i);XE(o),o=GE(o);var c,s=e-ph,a=s>0?1:-1,l=o[0]*Kn*a,u=Dt(s)>180;u^(a*ph<l&&l<a*e)?(c=o[1]*Kn)>Jo&&(Jo=c):u^(a*ph<(l=(l+360)%360-180)&&l<a*e)?(c=-o[1]*Kn)<po&&(po=c):(n<po&&(po=n),n>Jo&&(Jo=n)),u?e<ph?es(On,e)>es(On,Bn)&&(Bn=e):es(e,Bn)>es(On,Bn)&&(On=e):Bn>=On?(e<On&&(On=e),e>Bn&&(Bn=e)):e>ph?es(On,e)>es(On,Bn)&&(Bn=e):es(e,Bn)>es(On,Bn)&&(On=e)}else md.push(Rc=[On=e,Bn=e]);n<po&&(po=n),n>Jo&&(Jo=n),xm=t,ph=e}function iie(){Fc.point=nie}function rie(){Rc[0]=On,Rc[1]=Bn,Fc.point=wP,xm=null}function oie(e,n){if(xm){var t=e-ph;$1.add(Dt(t)>180?t+(t>0?360:-360):t)}else eie=e,tie=n;Dl.point(e,n),nie(e,n)}function l$e(){Dl.lineStart()}function c$e(){oie(eie,tie),Dl.lineEnd(),Dt($1)>ze&&(On=-(Bn=180)),Rc[0]=On,Rc[1]=Bn,xm=null}function es(e,n){return(n-=e)<0?n+360:n}function u$e(e,n){return e[0]-n[0]}function sie(e,n){return e[0]<=e[1]?e[0]<=n&&n<=e[1]:n<e[0]||e[1]<n}var B1,zS,US,HS,jS,qS,WS,GS,CP,xP,EP,aie,lie,zr,Ur,Hr,ba={sphere:zi,point:SP,lineStart:cie,lineEnd:uie,polygonStart:function(){ba.lineStart=p$e,ba.lineEnd=g$e},polygonEnd:function(){ba.lineStart=cie,ba.lineEnd=uie}};function SP(e,n){e*=gt;var t=We(n*=gt);V1(t*We(e),t*Le(e),Le(n))}function V1(e,n,t){++B1,US+=(e-US)/B1,HS+=(n-HS)/B1,jS+=(t-jS)/B1}function cie(){ba.point=f$e}function f$e(e,n){e*=gt;var t=We(n*=gt);zr=t*We(e),Ur=t*Le(e),Hr=Le(n),ba.point=h$e,V1(zr,Ur,Hr)}function h$e(e,n){e*=gt;var t=We(n*=gt),i=t*We(e),r=t*Le(e),o=Le(n),s=Os(Rr((s=Ur*o-Hr*r)*s+(s=Hr*i-zr*o)*s+(s=zr*r-Ur*i)*s),zr*i+Ur*r+Hr*o);zS+=s,qS+=s*(zr+(zr=i)),WS+=s*(Ur+(Ur=r)),GS+=s*(Hr+(Hr=o)),V1(zr,Ur,Hr)}function uie(){ba.point=SP}function p$e(){ba.point=m$e}function g$e(){die(aie,lie),ba.point=SP}function m$e(e,n){aie=e,lie=n,e*=gt,n*=gt,ba.point=die;var t=We(n);zr=t*We(e),Ur=t*Le(e),Hr=Le(n),V1(zr,Ur,Hr)}function die(e,n){e*=gt;var t=We(n*=gt),i=t*We(e),r=t*Le(e),o=Le(n),s=Ur*o-Hr*r,a=Hr*i-zr*o,l=zr*r-Ur*i,c=sN(s,a,l),u=lo(c),d=c&&-u/c;CP.add(d*s),xP.add(d*a),EP.add(d*l),zS+=u,qS+=u*(zr+(zr=i)),WS+=u*(Ur+(Ur=r)),GS+=u*(Hr+(Hr=o)),V1(zr,Ur,Hr)}function b$e(e){return e instanceof $x?e:new $x(e)}const fie=Symbol("vega_selection_getter");function hie(e){return(!e.getter||!e.getter[fie])&&(e.getter=Cs(e.field),e.getter[fie]=!0),e.getter}const TP="intersect",Il="_vgsid_",z1=Cs(Il),KS="index:unit";function mie(e,n){for(var s,a,t=n.fields,i=n.values,r=t.length,o=0;o<r;++o)if(Mu(s=hie(a=t[o])(e))&&(s=ir(s)),Mu(i[o])&&(i[o]=ir(i[o])),oe(i[o])&&Mu(i[o][0])&&(i[o]=i[o].map(ir)),"E"===a.type){if(oe(i[o])?i[o].indexOf(s)<0:s!==i[o])return!1}else if("R"===a.type){if(!Eg(s,i[o]))return!1}else if("R-RE"===a.type){if(!Eg(s,i[o],!0,!1))return!1}else if("R-E"===a.type){if(!Eg(s,i[o],!1,!1))return!1}else if("R-LE"===a.type&&!Eg(s,i[o],!1,!0))return!1;return!0}const _ie=kg(z1),A$e=_ie.left,k$e=_ie.right;var DP={[`${Il}_union`]:function y$e(...e){const n=new $x;for(const t of e)for(const i of t)n.add(i);return n},[`${Il}_intersect`]:function v$e(e,...n){e=new $x(e),n=n.map(b$e);e:for(const t of e)for(const i of n)if(!i.has(t)){e.delete(t);continue e}return e},E_union:function(e,n){if(!e.length)return n;for(var t=0,i=n.length;t<i;++t)e.indexOf(n[t])<0&&e.push(n[t]);return e},E_intersect:function(e,n){return e.length?e.filter(t=>n.indexOf(t)>=0):n},R_union:function(e,n){var t=ir(n[0]),i=ir(n[1]);return t>i&&(t=n[1],i=n[0]),e.length?(e[0]>t&&(e[0]=t),e[1]<i&&(e[1]=i),e):[t,i]},R_intersect:function(e,n){var t=ir(n[0]),i=ir(n[1]);return t>i&&(t=n[1],i=n[0]),e.length?i<e[0]||e[1]<t?[]:(e[0]<t&&(e[0]=t),e[1]>i&&(e[1]=i),e):[t,i]}};function IP(e,n,t,i){n[0].type!==uh&&re("First argument to selection functions must be a string literal.");const r=n[0].value,s="unit",a="@"+s,l=":"+r;(n.length>=2&&Tt(n).value)===TP&&!$e(i,a)&&(i[a]=t.getData(r).indataRef(t,s)),$e(i,l)||(i[l]=t.getData(r).tuplesRef())}function yie(e){const n=this.context.data[e];return n?n.values.value:[]}const U1=e=>function(n,t){return this.context.dataflow.locale()[e](t)(n)},V$e=U1("format"),vie=U1("timeFormat"),z$e=U1("utcFormat"),U$e=U1("timeParse"),H$e=U1("utcParse"),YS=new Date(2e3,0,1);function XS(e,n,t){return Number.isInteger(e)&&Number.isInteger(n)?(YS.setYear(2e3),YS.setMonth(e),YS.setDate(n),vie.call(this,YS,t)):""}const MP="%",bie="$";function AP(e,n,t,i){n[0].type!==uh&&re("First argument to data functions must be a string literal.");const r=n[0].value,o=":"+r;if(!$e(o,i))try{i[o]=t.getData(r).tuplesRef()}catch{}}function jr(e,n,t,i){if(n[0].type===uh)wie(t,i,n[0].value);else for(e in t.scales)wie(t,i,e)}function wie(e,n,t){const i=MP+t;if(!$e(n,i))try{n[i]=e.scaleRef(t)}catch{}}function Ml(e,n){if(ct(e))return e;if(xe(e)){const t=n.scales[e];return t&&function aFe(e){return e&&!0===e[EQ]}(t.value)?t.value:void 0}}function kP(e,n){return function(t,i,r){if(t){const o=Ml(t,(r||this).context);return o&&o.path[e](i)}return n(i)}}const Z$e=kP("area",function a$e(e){return VS=new Vi,Ic(e,Dl),2*VS}),J$e=kP("bounds",function d$e(e){var n,t,i,r,o,s,a;if(Jo=Bn=-(On=po=1/0),md=[],Ic(e,Fc),t=md.length){for(md.sort(u$e),n=1,o=[i=md[0]];n<t;++n)sie(i,(r=md[n])[0])||sie(i,r[1])?(es(i[0],r[1])>es(i[0],i[1])&&(i[1]=r[1]),es(r[0],i[1])>es(i[0],i[1])&&(i[0]=r[0])):o.push(i=r);for(s=-1/0,n=0,i=o[t=o.length-1];n<=t;i=r,++n)(a=es(i[1],(r=o[n])[0]))>s&&(s=a,On=r[0],Bn=i[1])}return md=Rc=null,On===1/0||po===1/0?[[NaN,NaN],[NaN,NaN]]:[[On,po],[Bn,Jo]]}),eBe=kP("centroid",function _$e(e){B1=zS=US=HS=jS=qS=WS=GS=0,CP=new Vi,xP=new Vi,EP=new Vi,Ic(e,ba);var n=+CP,t=+xP,i=+EP,r=sN(n,t,i);return r<FE&&(n=qS,t=WS,i=GS,zS<ze&&(n=US,t=HS,i=jS),(r=sN(n,t,i))<FE)?[NaN,NaN]:[Os(t,n)*Kn,lo(i/r)*Kn]});function OP(e,n,t){try{e[n].apply(e,["EXPRESSION"].concat([].slice.call(t)))}catch(i){e.warn(i)}return t[t.length-1]}function RP(e){const n=e/255;return n<=.03928?n/12.92:Math.pow((n+.055)/1.055,2.4)}function FP(e){const n=zu(e);return.2126*RP(n.r)+.7152*RP(n.g)+.0722*RP(n.b)}function Cie(e,n){return e===n||e!=e&&n!=n||(oe(e)?!(!oe(n)||e.length!==n.length)&&function lBe(e,n){for(let t=0,i=e.length;t<i;++t)if(!Cie(e[t],n[t]))return!1;return!0}(e,n):!(!Ee(e)||!Ee(n))&&xie(e,n))}function xie(e,n){for(const t in e)if(!Cie(e[t],n[t]))return!1;return!0}function Eie(e){return n=>xie(e,n)}const Sie={};function NP(e){return oe(e)||ArrayBuffer.isView(e)?e:null}function PP(e){return NP(e)||(xe(e)?e:null)}const Tie=e=>e.data;function Die(e,n){const t=yie.call(n,e);return t.root&&t.root.lookup||{}}const Iie=()=>typeof window<"u"&&window||null;function Mie(e,n,t){if(!e)return[];const[i,r]=e,o=(new ni).set(i[0],i[1],r[0],r[1]);return dJ(t||this.context.dataflow.scenegraph().root,o,function FBe(e){let n=null;if(e){const t=Ce(e.marktype),i=Ce(e.markname);n=r=>(!t.length||t.some(o=>r.marktype===o))&&(!i.length||i.some(o=>r.name===o))}return n}(n))}const H1={random:()=>Ts(),cumulativeNormal:fx,cumulativeLogNormal:m3,cumulativeUniform:b3,densityNormal:d3,densityLogNormal:g3,densityUniform:v3,quantileNormal:hx,quantileLogNormal:_3,quantileUniform:w3,sampleNormal:dx,sampleLogNormal:p3,sampleUniform:y3,isArray:oe,isBoolean:Iu,isDate:Mu,isDefined:e=>void 0!==e,isNumber:Ft,isObject:Ee,isRegExp:rG,isString:xe,isTuple:ix,isValid:e=>null!=e&&e==e,toBoolean:dO,toDate:e=>fO(e),toNumber:ir,toString:hO,indexof:function pBe(e){for(var n=arguments.length,t=new Array(n>1?n-1:0),i=1;i<n;i++)t[i-1]=arguments[i];return PP(e).indexOf(...t)},join:function hBe(e){for(var n=arguments.length,t=new Array(n>1?n-1:0),i=1;i<n;i++)t[i-1]=arguments[i];return NP(e).join(...t)},lastindexof:function gBe(e){for(var n=arguments.length,t=new Array(n>1?n-1:0),i=1;i<n;i++)t[i-1]=arguments[i];return PP(e).lastIndexOf(...t)},replace:function _Be(e,n,t){return ct(t)&&re("Function argument passed to replace."),String(e).replace(n,t)},reverse:function yBe(e){return NP(e).slice().reverse()},slice:function mBe(e){for(var n=arguments.length,t=new Array(n>1?n-1:0),i=1;i<n;i++)t[i-1]=arguments[i];return PP(e).slice(...t)},flush:nG,lerp:oG,merge:function aBe(){const e=[].slice.call(arguments);return e.unshift({}),ut(...e)},pad:lG,peek:Tt,pluck:function fBe(e,n){const t=Sie[n]||(Sie[n]=Cs(n));return oe(e)?e.map(t):t(e)},span:J_,inrange:Eg,truncate:cG,rgb:zu,lab:zx,hcl:Ux,hsl:kx,luminance:FP,contrast:function sBe(e,n){const t=FP(e),i=FP(n);return(Math.max(t,i)+.05)/(Math.min(t,i)+.05)},sequence:Ho,format:V$e,utcFormat:z$e,utcParse:H$e,utcOffset:BG,utcSequence:UG,timeFormat:vie,timeParse:U$e,timeOffset:$G,timeSequence:zG,timeUnitSpecifier:DG,monthFormat:function j$e(e){return XS.call(this,e,1,"%B")},monthAbbrevFormat:function q$e(e){return XS.call(this,e,1,"%b")},dayFormat:function W$e(e){return XS.call(this,0,2+e,"%A")},dayAbbrevFormat:function G$e(e){return XS.call(this,0,2+e,"%a")},quarter:ZW,utcquarter:JW,week:MG,utcweek:OG,dayofyear:IG,utcdayofyear:kG,warn:function iBe(){return OP(this.context.dataflow,"warn",arguments)},info:function rBe(){return OP(this.context.dataflow,"info",arguments)},debug:function oBe(){return OP(this.context.dataflow,"debug",arguments)},extent:e=>al(e),inScope:function nBe(e){const n=this.context.group;let t=!1;if(n)for(;e;){if(e===n){t=!0;break}e=e.mark.group}return t},intersect:Mie,clampRange:eG,pinchDistance:function uBe(e){const n=e.touches;return Math.hypot(n[0].clientX-n[1].clientX,n[0].clientY-n[1].clientY)},pinchAngle:function dBe(e){const n=e.touches;return Math.atan2(n[0].clientY-n[1].clientY,n[0].clientX-n[1].clientX)},screen:function kBe(){const e=Iie();return e?e.screen:{}},containerSize:function RBe(){const e=this.context.dataflow,n=e.container&&e.container();return n?[n.clientWidth,n.clientHeight]:[void 0,void 0]},windowSize:function OBe(){const e=Iie();return e?[e.innerWidth,e.innerHeight]:[void 0,void 0]},bandspace:function vBe(e,n,t){return $R(e||0,n||0,t||0)},setdata:function $$e(e,n){const t=this.context.dataflow;return t.pulse(this.context.data[e].input,t.changeset().remove(xs).insert(n)),1},pathShape:function IBe(e){let n=null;return function(t){return t?Py(t,n=n||Yg(e)):e}},panLinear:KW,panLog:YW,panPow:XW,panSymlog:QW,zoomLinear:oO,zoomLog:sO,zoomPow:LC,zoomSymlog:aO,encode:function B$e(e,n,t){if(e){const i=this.context.dataflow;i.pulse(e.mark.source,i.changeset().encode(e,n))}return void 0!==t?t:e},modify:function cBe(e,n,t,i,r,o){const s=this.context.dataflow,a=this.context.data[e],l=a.input,c=s.stamp();let d,f,u=a.changes;if(!1===s._trigger||!(l.value.length||n||i))return 0;if((!u||u.stamp<c)&&(a.changes=u=s.changeset(),u.stamp=c,s.runAfter(()=>{a.modified=!0,s.pulse(l,u).run()},!0,1)),t&&(d=!0===t?xs:oe(t)||ix(t)?t:Eie(t),u.remove(d)),n&&u.insert(n),i&&(d=Eie(i),l.value.some(d)?u.remove(d):u.insert(i)),r)for(f in o)u.modify(r,f,o[f]);return 1},lassoAppend:function NBe(e,n,t){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:5;const r=(e=Ce(e))[e.length-1];return void 0===r||Math.hypot(r[0]-n,r[1]-t)>i?[...e,[n,t]]:e},lassoPath:function PBe(e){return Ce(e).reduce((n,t,i)=>{let[r,o]=t;return n+(0==i?`M ${r},${o} `:i===e.length-1?" Z":`L ${r},${o} `)},"")},intersectLasso:function LBe(e,n,t){const{x:i,y:r,mark:o}=t,s=(new ni).set(Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER,Number.MIN_SAFE_INTEGER,Number.MIN_SAFE_INTEGER);for(const[l,c]of n)l<s.x1&&(s.x1=l),l>s.x2&&(s.x2=l),c<s.y1&&(s.y1=c),c>s.y2&&(s.y2=c);return s.translate(i,r),Mie([[s.x1,s.y1],[s.x2,s.y2]],e,o).filter(l=>function $Be(e,n,t){let i=0;for(let r=0,o=t.length-1;r<t.length;o=r++){const[s,a]=t[o],[l,c]=t[r];c>n!=a>n&&e<(s-l)*(n-c)/(a-c)+l&&i++}return 1&i}(l.x,l.y,n))}},BBe=["view","item","group","xy","x","y"],Aie="this.",LP={},kie={forbidden:["_"],allowed:["datum","event","item"],fieldvar:"datum",globalvar:e=>`_[${ge(bie+e)}]`,functions:function zBe(e){const n=Yne(e);BBe.forEach(t=>n[t]="event.vega."+t);for(const t in H1)n[t]=Aie+t;return ut(n,function Q$e(e,n,t){n.__bandwidth=r=>r&&r.bandwidth?r.bandwidth():0,t._bandwidth=jr,t._range=jr,t._scale=jr;const i=r=>"_["+(r.type===uh?ge(MP+r.value):ge(MP)+"+"+e(r))+"]";return{_bandwidth:r=>`this.__bandwidth(${i(r[0])})`,_range:r=>`${i(r[0])}.range()`,_scale:r=>`${i(r[0])}(${e(r[1])})`}}(e,H1,LP)),n},constants:Kne,visitors:LP},$P=Xne(kie);function Yn(e,n,t){return 1===arguments.length?H1[e]:(H1[e]=n,t&&(LP[e]=t),$P&&($P.functions[e]=Aie+e),this)}function Al(e,n){const t={};let i;try{i=_P(e=xe(e)?e:ge(e)+"")}catch{re("Expression parse error: "+e)}i.visit(o=>{if(o.type!==Fne)return;const s=o.callee.name,a=kie.visitors[s];a&&a(s,o.arguments,n,t)});const r=$P(i);return r.globals.forEach(o=>{const s=bie+o;!$e(t,s)&&n.getSignal(o)&&(t[s]=n.signalRef(o))}),{$expr:ut({code:r.code},n.options.ast?{ast:i}:null),$fields:r.fields,$params:t}}Yn("bandwidth",function bBe(e,n){const t=Ml(e,(n||this).context);return t&&t.bandwidth?t.bandwidth():0},jr),Yn("copy",function wBe(e,n){const t=Ml(e,(n||this).context);return t?t.copy():void 0},jr),Yn("domain",function CBe(e,n){const t=Ml(e,(n||this).context);return t?t.domain():[]},jr),Yn("range",function EBe(e,n){const t=Ml(e,(n||this).context);return t&&t.range?t.range():[]},jr),Yn("invert",function xBe(e,n,t){const i=Ml(e,(t||this).context);return i?oe(n)?(i.invertRange||i.invert)(n):(i.invert||i.invertExtent)(n):void 0},jr),Yn("scale",function SBe(e,n,t){const i=Ml(e,(t||this).context);return i?i(n):void 0},jr),Yn("gradient",function TBe(e,n,t,i,r){e=Ml(e,(r||this).context);const o=GQ(n,t);let s=e.domain(),a=s[0],l=Tt(s),c=nr;return l-a?c=OQ(e,a,l):e=(e.interpolator?$t("sequential")().interpolator(e.interpolator()):$t("linear")().interpolate(e.interpolate()).range(e.range())).domain([a=0,l=1]),e.ticks&&(s=e.ticks(+i||15),a!==s[0]&&s.unshift(a),l!==Tt(s)&&s.push(l)),s.forEach(u=>o.stop(c(u),e(u))),o},jr),Yn("geoArea",Z$e,jr),Yn("geoBounds",J$e,jr),Yn("geoCentroid",eBe,jr),Yn("geoShape",function DBe(e,n,t){const i=Ml(e,(t||this).context);return function(r){return i?i.path.context(r)(n):""}},jr),Yn("geoScale",function tBe(e,n){const t=Ml(e,(n||this).context);return t&&t.scale()},jr),Yn("indata",function L$e(e,n,t){const i=this.context.data[e]["index:"+n],r=i?i.value.get(t):void 0;return r&&r.count},function X$e(e,n,t,i){n[0].type!==uh&&re("First argument to indata must be a string literal."),n[1].type!==uh&&re("Second argument to indata must be a string literal.");const r=n[0].value,o=n[1].value,s="@"+o;$e(s,i)||(i[s]=t.getData(r).indataRef(t,o))}),Yn("data",yie,AP),Yn("treePath",function MBe(e,n,t){const i=Die(e,this),r=i[n],o=i[t];return r&&o?r.path(o).map(Tie):void 0},AP),Yn("treeAncestors",function ABe(e,n){const t=Die(e,this)[n];return t?t.ancestors().map(Tie):void 0},AP),Yn("vlSelectionTest",function M$e(e,n,t){for(var c,u,d,f,h,i=this.context.data[e],r=i?i.values.value:[],o=i?i[KS]&&i[KS].value:void 0,s=t===TP,a=r.length,l=0;l<a;++l)if(c=r[l],o&&s){if(-1===(d=(u=u||{})[f=c.unit]||0))continue;if(h=mie(n,c),u[f]=h?-1:++d,h&&1===o.size)return!0;if(!h&&d===o.get(f).count)return!1}else if(s^(h=mie(n,c)))return h;return a&&s},IP),Yn("vlSelectionIdTest",function O$e(e,n,t){const i=this.context.data[e],r=i?i.values.value:[],o=i?i[KS]&&i[KS].value:void 0,s=t===TP,a=z1(n),l=A$e(r,a);if(l===r.length||z1(r[l])!==a)return!1;if(o&&s){if(1===o.size)return!0;if(k$e(r,a)-l<o.size)return!1}return!0},IP),Yn("vlSelectionResolve",function F$e(e,n,t,i){for(var c,u,d,f,h,p,g,m,_,w,x,r=this.context.data[e],o=r?r.values.value:[],s={},a={},l={},v=o.length,b=0;b<v;++b)if(f=(c=o[b]).unit,d=c.values,(u=c.fields)&&d){for(w=0,x=u.length;w<x;++w)m=(g=s[(h=u[w]).field]||(s[h.field]={}))[f]||(g[f]=[]),l[h.field]=_=h.type.charAt(0),g[f]=(0,DP[`${_}_union`])(m,Ce(d[w]));t&&(m=a[f]||(a[f]=[])).push(Ce(d).reduce((C,S,A)=>(C[u[A].field]=S,C),{}))}else h=Il,p=z1(c),(m=(g=s[h]||(s[h]={}))[f]||(g[f]=[])).push(p),t&&(m=a[f]||(a[f]=[])).push({[Il]:p});return n=n||"union",s[Il]?s[Il]=DP[`${Il}_${n}`](...Object.values(s[Il])):Object.keys(s).forEach(C=>{s[C]=Object.keys(s[C]).map(S=>s[C][S]).reduce((S,A)=>void 0===S?A:DP[`${l[C]}_${n}`](S,A))}),o=Object.keys(a),t&&o.length&&(s[i?"vlPoint":"vlMulti"]="union"===n?{or:o.reduce((S,A)=>(S.push(...a[A]),S),[])}:{and:o.map(S=>({or:a[S]}))}),s},IP),Yn("vlSelectionTuples",function R$e(e,n){return e.map(t=>ut(n.fields?{values:n.fields.map(i=>hie(i)(t.datum))}:{[Il]:z1(t.datum)},n))});const HBe=oa(["rule"]),Oie=oa(["group","image","rect"]);function BP(e){return(e+"").toLowerCase()}function j1(e,n,t){t.endsWith(";")||(t="return("+t+");");const i=Function(...n.concat(t));return e&&e.functions?i.bind(e.functions):i}var KBe={operator:(e,n)=>j1(e,["_"],n.code),parameter:(e,n)=>j1(e,["datum","_"],n.code),event:(e,n)=>j1(e,["event"],n.code),handler:(e,n)=>j1(e,["_","event"],`var datum=event.item&&event.item.datum;return ${n.code};`),encode:(e,n)=>{const{marktype:t,channels:i}=n;let r="var o=item,datum=o.datum,m=0,$;";for(const o in i){const s="o["+ge(o)+"]";r+=`$=${i[o].code};if(${s}!==$)${s}=$,m=1;`}return r+=function jBe(e,n){let t="";return HBe[n]||(e.x2&&(e.x?(Oie[n]&&(t+="if(o.x>o.x2)$=o.x,o.x=o.x2,o.x2=$;"),t+="o.width=o.x2-o.x;"):t+="o.x=o.x2-(o.width||0);"),e.xc&&(t+="o.x=o.xc-(o.width||0)/2;"),e.y2&&(e.y?(Oie[n]&&(t+="if(o.y>o.y2)$=o.y,o.y=o.y2,o.y2=$;"),t+="o.height=o.y2-o.y;"):t+="o.y=o.y2-(o.height||0);"),e.yc&&(t+="o.y=o.yc-(o.height||0)/2;")),t}(i,t),r+="return m;",j1(e,["item","_"],r)},codegen:{get(e){const n=`[${e.map(ge).join("][")}]`,t=Function("_",`return _${n};`);return t.path=n,t},comparator(e,n){let t;const r=Function("a","b","var u, v; return "+e.map((o,s)=>{const a=n[s];let l,c;return o.path?(l=`a${o.path}`,c=`b${o.path}`):((t=t||{})["f"+s]=o,l=`this.f${s}(a)`,c=`this.f${s}(b)`),function GBe(e,n,t,i){return`((u = ${e}) < (v = ${n}) || u == null) && v != null ? ${t}\n  : (u > v || v == null) && u != null ? ${i}\n  : ((v = v instanceof Date ? +v : v), (u = u instanceof Date ? +u : u)) !== u && v === v ? ${t}\n  : v !== v && u === u ? ${i} : `}(l,c,-a,a)}).join("")+"0;");return t?r.bind(t):r}}};function Rie(e,n,t){if(!e||!Ee(e))return e;for(let o,i=0,r=Fie.length;i<r;++i)if(o=Fie[i],$e(e,o.key))return o.parse(e,n,t);return e}var Fie=[{key:"$ref",parse:function ZBe(e,n){return n.get(e.$ref)||re("Operator not defined: "+e.$ref)}},{key:"$key",parse:function eVe(e,n){const t="k:"+e.$key+"_"+!!e.$flat;return n.fn[t]||(n.fn[t]=uO(e.$key,e.$flat,n.expr.codegen))}},{key:"$expr",parse:function JBe(e,n,t){e.$params&&n.parseParameters(e.$params,t);const i="e:"+e.$expr.code;return n.fn[i]||(n.fn[i]=no(n.parameterExpression(e.$expr),e.$fields))}},{key:"$field",parse:function tVe(e,n){if(!e.$field)return null;const t="f:"+e.$field+"_"+e.$name;return n.fn[t]||(n.fn[t]=Cs(e.$field,e.$name,n.expr.codegen))}},{key:"$encode",parse:function iVe(e,n){const t=e.$encode,i={};for(const r in t){const o=t[r];i[r]=no(n.encodeExpression(o.$expr),o.$fields),i[r].output=o.$output}return i}},{key:"$compare",parse:function nVe(e,n){const t="c:"+e.$compare+"_"+e.$order,i=Ce(e.$compare).map(r=>r&&r.$tupleid?Be:r);return n.fn[t]||(n.fn[t]=lO(i,e.$order,n.expr.codegen))}},{key:"$context",parse:function rVe(e,n){return n}},{key:"$subflow",parse:function oVe(e,n){const t=e.$subflow;return function(i,r,o){const s=n.fork().parse(t),a=s.get(t.operators[0].id),l=s.signals.parent;return l&&l.set(o),a.detachSubflow=()=>n.detach(s),a}}},{key:"$tupleid",parse:function sVe(){return Be}}];const cVe={skip:!0};function Nie(e,n,t,i){return new Pie(e,n,t,i)}function Pie(e,n,t,i){this.dataflow=e,this.transforms=n,this.events=e.events.bind(e),this.expr=i||KBe,this.signals={},this.scales={},this.nodes={},this.data={},this.fn={},t&&(this.functions=Object.create(t),this.functions.context=this)}function Lie(e){this.dataflow=e.dataflow,this.transforms=e.transforms,this.events=e.events,this.expr=e.expr,this.signals=Object.create(e.signals),this.scales=Object.create(e.scales),this.nodes=Object.create(e.nodes),this.data=Object.create(e.data),this.fn=Object.create(e.fn),e.functions&&(this.functions=Object.create(e.functions),this.functions.context=this)}function $ie(e,n){e&&(null==n?e.removeAttribute("aria-label"):e.setAttribute("aria-label",n))}Pie.prototype=Lie.prototype={fork(){const e=new Lie(this);return(this.subcontext||(this.subcontext=[])).push(e),e},detach(e){this.subcontext=this.subcontext.filter(t=>t!==e);const n=Object.keys(e.nodes);for(const t of n)e.nodes[t]._targets=null;for(const t of n)e.nodes[t].detach();e.nodes=null},get(e){return this.nodes[e]},set(e,n){return this.nodes[e]=n},add(e,n){const t=this,i=t.dataflow,r=e.value;if(t.set(e.id,n),function WBe(e){return"collect"===BP(e)}(e.type)&&r&&(r.$ingest?i.ingest(n,r.$ingest,r.$format):r.$request?i.preload(n,r.$request,r.$format):i.pulse(n,i.changeset().insert(r))),e.root&&(t.root=n),e.parent){let o=t.get(e.parent.$ref);o?(i.connect(o,[n]),n.targets().add(o)):(t.unresolved=t.unresolved||[]).push(()=>{o=t.get(e.parent.$ref),i.connect(o,[n]),n.targets().add(o)})}if(e.signal&&(t.signals[e.signal]=n),e.scale&&(t.scales[e.scale]=n),e.data)for(const o in e.data){const s=t.data[o]||(t.data[o]={});e.data[o].forEach(a=>s[a]=n)}},resolve(){return(this.unresolved||[]).forEach(e=>e()),delete this.unresolved,this},operator(e,n){this.add(e,this.dataflow.add(e.value,n))},transform(e,n){this.add(e,this.dataflow.add(this.transforms[BP(n)]))},stream(e,n){this.set(e.id,n)},update(e,n,t,i,r){this.dataflow.on(n,t,i,r,e.options)},operatorExpression(e){return this.expr.operator(this,e)},parameterExpression(e){return this.expr.parameter(this,e)},eventExpression(e){return this.expr.event(this,e)},handlerExpression(e){return this.expr.handler(this,e)},encodeExpression(e){return this.expr.encode(this,e)},parse:function UBe(e){const n=this,t=e.operators||[];return e.background&&(n.background=e.background),e.eventConfig&&(n.eventConfig=e.eventConfig),e.locale&&(n.locale=e.locale),t.forEach(i=>n.parseOperator(i)),t.forEach(i=>n.parseOperatorParameters(i)),(e.streams||[]).forEach(i=>n.parseStream(i)),(e.updates||[]).forEach(i=>n.parseUpdate(i)),n.resolve()},parseOperator:function YBe(e){const n=this;!function qBe(e){return"operator"===BP(e)}(e.type)&&e.type?n.transform(e,e.type):n.operator(e,e.update?n.operatorExpression(e.update):null)},parseOperatorParameters:function XBe(e){const n=this;if(e.params){const t=n.get(e.id);t||re("Invalid operator id: "+e.id),n.dataflow.connect(t,t.parameters(n.parseParameters(e.params),e.react,e.initonly))}},parseParameters:function QBe(e,n){n=n||{};const t=this;for(const i in e){const r=e[i];n[i]=oe(r)?r.map(o=>Rie(o,t,n)):Rie(r,t,n)}return n},parseStream:function aVe(e){var r,n=this,t=null!=e.filter?n.eventExpression(e.filter):void 0,i=null!=e.stream?n.get(e.stream):void 0;e.source?i=n.events(e.source,e.type,t):e.merge&&(i=(r=e.merge.map(o=>n.get(o)))[0].merge.apply(r[0],r.slice(1))),e.between&&(r=e.between.map(o=>n.get(o)),i=i.between(r[0],r[1])),e.filter&&(i=i.filter(t)),null!=e.throttle&&(i=i.throttle(+e.throttle)),null!=e.debounce&&(i=i.debounce(+e.debounce)),null==i&&re("Invalid stream definition: "+JSON.stringify(e)),e.consume&&i.consume(!0),n.stream(e,i)},parseUpdate:function lVe(e){var r,n=this,t=Ee(t=e.source)?t.$ref:t,i=n.get(t),o=e.update,s=void 0;i||re("Source not defined: "+e.source),r=e.target&&e.target.$expr?n.eventExpression(e.target.$expr):n.get(e.target),o&&o.$expr&&(o.$params&&(s=n.parseParameters(o.$params)),o=n.handlerExpression(o.$expr)),n.update(e,i,r,o,s)},getState:function uVe(e){var n=this,t={};if(e.signals){var i=t.signals={};Object.keys(n.signals).forEach(o=>{const s=n.signals[o];e.signals(o,s)&&(i[o]=s.value)})}if(e.data){var r=t.data={};Object.keys(n.data).forEach(o=>{const s=n.data[o];e.data(o,s)&&(r[o]=s.input.value)})}return n.subcontext&&!1!==e.recurse&&(t.subcontext=n.subcontext.map(o=>o.getState(e))),t},setState:function dVe(e){var n=this,t=n.dataflow,i=e.data,r=e.signals;Object.keys(r||{}).forEach(o=>{t.update(n.signals[o],r[o],cVe)}),Object.keys(i||{}).forEach(o=>{t.pulse(n.data[o].input,t.changeset().remove(xs).insert(i[o]))}),(e.subcontext||[]).forEach((o,s)=>{const a=n.subcontext[s];a&&a.setState(o)})}};const VP="default";function zP(e,n){const t=e.globalCursor()?typeof document<"u"&&document.body:e.container();if(t)return null==n?t.style.removeProperty("cursor"):t.style.cursor=n}function QS(e,n){var t=e._runtime.data;return $e(t,n)||re("Unrecognized data set: "+n),t[n]}function ZS(e,n){AK(n)||re("Second argument to changes must be a changeset.");const t=QS(this,e);return t.modified=!0,this.pulse(t.input,n)}function Bie(e){var n=e.padding();return Math.max(0,e._viewWidth+n.left+n.right)}function Vie(e){var n=e.padding();return Math.max(0,e._viewHeight+n.top+n.bottom)}function JS(e){var n=e.padding(),t=e._origin;return[n.left+t[0],n.top+t[1]]}const EVe={trap:!1};function Uie(e,n,t,i){e._eventListeners.push({type:t,sources:Ce(n),handler:i})}function e2(e,n,t){const i=e._eventConfig&&e._eventConfig[n];return!(!1===i||Ee(i)&&!i[t])||(e.warn(`Blocked ${n} ${t} event listener.`),!1)}function Hie(e){return e.item}function jie(e){return e.item.mark.source}function qie(e){return function(n,t){return t.vega.view().changeset().encode(t.item,e)}}function ts(e,n,t){const i=document.createElement(e);for(const r in n)i.setAttribute(r,n[r]);return null!=t&&(i.textContent=t),i}const AVe="vega-bind",kVe="vega-bind-name",OVe="vega-bind-radio";function RVe(e,n,t){if(!n)return;const i=t.param;let r=t.state;return r||(r=t.state={elements:null,active:!1,set:null,update:s=>{s!=e.signal(i.signal)&&e.runAsync(null,()=>{r.source=!0,e.signal(i.signal,s)})}},i.debounce&&(r.update=cO(i.debounce,r.update))),(null==i.input&&i.element?FVe:PVe)(r,n,i,e),r.active||(e.on(e._signals[i.signal],null,()=>{r.source?r.source=!1:r.set(e.signal(i.signal))}),r.active=!0),r}function FVe(e,n,t,i){const r=t.event||"input",o=()=>e.update(n.value);i.signal(t.signal,n.value),n.addEventListener(r,o),Uie(i,n,r,o),e.set=s=>{n.value=s,n.dispatchEvent(function NVe(e){return typeof Event<"u"?new Event(e):{type:e}}(r))}}function PVe(e,n,t,i){const r=i.signal(t.signal),o=ts("div",{class:AVe}),s="radio"===t.input?o:o.appendChild(ts("label"));s.appendChild(ts("span",{class:kVe},t.name||t.signal)),n.appendChild(o);let a=LVe;switch(t.input){case"checkbox":a=$Ve;break;case"select":a=BVe;break;case"radio":a=VVe;break;case"range":a=zVe}a(e,s,t,r)}function LVe(e,n,t,i){const r=ts("input");for(const o in t)"signal"!==o&&"element"!==o&&r.setAttribute("input"===o?"type":o,t[o]);r.setAttribute("name",t.signal),r.value=i,n.appendChild(r),r.addEventListener("input",()=>e.update(r.value)),e.elements=[r],e.set=o=>r.value=o}function $Ve(e,n,t,i){const r={type:"checkbox",name:t.signal};i&&(r.checked=!0);const o=ts("input",r);n.appendChild(o),o.addEventListener("change",()=>e.update(o.checked)),e.elements=[o],e.set=s=>o.checked=!!s||null}function BVe(e,n,t,i){const r=ts("select",{name:t.signal}),o=t.labels||[];t.options.forEach((s,a)=>{const l={value:s};t2(s,i)&&(l.selected=!0),r.appendChild(ts("option",l,(o[a]||s)+""))}),n.appendChild(r),r.addEventListener("change",()=>{e.update(t.options[r.selectedIndex])}),e.elements=[r],e.set=s=>{for(let a=0,l=t.options.length;a<l;++a)if(t2(t.options[a],s))return void(r.selectedIndex=a)}}function VVe(e,n,t,i){const r=ts("span",{class:OVe}),o=t.labels||[];n.appendChild(r),e.elements=t.options.map((s,a)=>{const l={type:"radio",name:t.signal,value:s};t2(s,i)&&(l.checked=!0);const c=ts("input",l);c.addEventListener("change",()=>e.update(s));const u=ts("label",{},(o[a]||s)+"");return u.prepend(c),r.appendChild(u),c}),e.set=s=>{const a=e.elements,l=a.length;for(let c=0;c<l;++c)t2(a[c].value,s)&&(a[c].checked=!0)}}function zVe(e,n,t,i){i=void 0!==i?i:(+t.max+ +t.min)/2;const r=null!=t.max?t.max:Math.max(100,+i)||100,o=t.min||Math.min(0,r,+i)||0,s=t.step||ku(o,r,100),a=ts("input",{type:"range",name:t.signal,min:o,max:r,step:s});a.value=i;const l=ts("span",{},+i);n.appendChild(a),n.appendChild(l);const c=()=>{l.textContent=a.value,e.update(+a.value)};a.addEventListener("input",c),a.addEventListener("change",c),e.elements=[a],e.set=u=>{a.value=u,l.textContent=u}}function t2(e,n){return e===n||e+""==n+""}function Wie(e,n,t,i,r,o){return(n=n||new i(e.loader())).initialize(t,Bie(e),Vie(e),JS(e),r,o).background(e.background())}function UP(e,n){return n?function(){try{n.apply(this,arguments)}catch(t){e.error(t)}}:null}function HP(e,n,t){if("string"==typeof n){if(!(typeof document<"u"))return e.error("DOM document instance not found."),null;if(!(n=document.querySelector(n)))return e.error("Signal bind element not found: "+n),null}if(n&&t)try{n.textContent=""}catch(i){n=null,e.error(i)}return n}const q1=e=>+e||0;function Gie(e){return Ee(e)?{top:q1(e.top),bottom:q1(e.bottom),left:q1(e.left),right:q1(e.right)}:(e=>({top:e,bottom:e,left:e,right:e}))(q1(e))}function jP(e,n,t,i){return qP.apply(this,arguments)}function qP(){return qP=Re(function*(e,n,t,i){const r=DE(n),o=r&&r.headless;return o||re("Unrecognized renderer type: "+n),yield e.runAsync(),Wie(e,null,null,o,t,i).renderAsync(e._scenegraph.root)}),qP.apply(this,arguments)}function WP(){return WP=Re(function*(e,n){e!==td.Canvas&&e!==td.SVG&&e!==td.PNG&&re("Unrecognized image type: "+e);const t=yield jP(this,e,n);return e===td.SVG?function WVe(e,n){const t=new Blob([e],{type:n});return window.URL.createObjectURL(t)}(t.svg(),"image/svg+xml"):t.canvas().toDataURL("image/png")}),WP.apply(this,arguments)}function GP(){return GP=Re(function*(e,n){return(yield jP(this,td.Canvas,e,n)).canvas()}),GP.apply(this,arguments)}function KP(){return KP=Re(function*(e){return(yield jP(this,td.SVG,e)).svg()}),KP.apply(this,arguments)}var Kie="width",Yie="height",YP="padding",Xie={skip:!0};function Qie(e,n){var t=e.autosize(),i=e.padding();return n-(t&&t.contains===YP?i.left+i.right:0)}function Zie(e,n){var t=e.autosize(),i=e.padding();return n-(t&&t.contains===YP?i.top+i.bottom:0)}function eze(e,n){return n.modified&&oe(n.input.value)&&e.indexOf("_:vega:_")}function tze(e,n){return!("parent"===e||n instanceof $g.proxy)}function rze(e,n,t,i){const r=e.element();r&&r.setAttribute("title",function oze(e){return null==e?"":oe(e)?Jie(e):Ee(e)&&!Mu(e)?function sze(e){return Object.keys(e).map(n=>{const t=e[n];return n+": "+(oe(t)?Jie(t):ere(t))}).join("\n")}(e):e+""}(i))}function Jie(e){return"["+e.map(ere).join(", ")+"]"}function ere(e){return oe(e)?"[\u2026]":Ee(e)&&!Mu(e)?"{\u2026}":e}function tre(e,n){const t=this;if(n=n||{},Lg.call(t),n.loader&&t.loader(n.loader),n.logger&&t.logger(n.logger),null!=n.logLevel&&t.logLevel(n.logLevel),n.locale||e.locale){const o=ut({},e.locale,n.locale);t.locale(yK(o.number,o.time))}t._el=null,t._elBind=null,t._renderType=n.renderer||td.Canvas,t._scenegraph=new DF;const i=t._scenegraph.root;t._renderer=null,t._tooltip=n.tooltip||rze,t._redraw=!0,t._handler=(new Ju).scene(i),t._globalCursor=!1,t._preventDefault=!1,t._timers=[],t._eventListeners=[],t._resizeListeners=[],t._eventConfig=function SVe(e){const n=ut({defaults:{}},e),t=(i,r)=>{r.forEach(o=>{oe(i[o])&&(i[o]=oa(i[o]))})};return t(n.defaults,["prevent","allow"]),t(n,["view","window","selector"]),n}(e.eventConfig),t.globalCursor(t._eventConfig.globalCursor);const r=function YVe(e,n,t){return Nie(e,$g,H1,t).parse(n)}(t,e,n.expr);t._runtime=r,t._signals=r.signals,t._bind=(e.bindings||[]).map(o=>({state:null,param:ut({},o)})),r.root&&r.root.set(i),i.source=r.data.root.input,t.pulse(r.data.root.input,t.changeset().insert(i.items)),t._width=t.width(),t._height=t.height(),t._viewWidth=Qie(t,t._width),t._viewHeight=Zie(t,t._height),t._origin=[0,0],t._resize=0,t._autosize=1,function QVe(e){var n=e._signals,t=n[Kie],i=n[Yie],r=n[YP];function o(){e._autosize=e._resize=1}e._resizeWidth=e.add(null,a=>{e._width=a.size,e._viewWidth=Qie(e,a.size),o()},{size:t}),e._resizeHeight=e.add(null,a=>{e._height=a.size,e._viewHeight=Zie(e,a.size),o()},{size:i});const s=e.add(null,o,{pad:r});e._resizeWidth.rank=t.rank+1,e._resizeHeight.rank=i.rank+1,s.rank=r.rank+1}(t),function pVe(e){e.add(null,n=>(e._background=n.bg,e._resize=1,n.bg),{bg:e._signals.background})}(t),function gVe(e){const n=e._signals.cursor||(e._signals.cursor=e.add({user:VP,item:null}));e.on(e.events("view","mousemove"),n,(t,i)=>{const r=n.value,o=r?xe(r)?r:r.user:VP,s=i.item&&i.item.cursor||null;return r&&o===r.user&&s==r.item?r:{user:o,item:s}}),e.add(null,function(t){let i=t.cursor,r=this.value;return xe(i)||(r=i.item,i=i.user),zP(e,i&&i!==VP?i:r||i),r},{cursor:n})}(t),t.description(e.description),n.hover&&t.hover(),n.container&&t.initialize(n.container,n.bind)}function n2(e,n){return $e(e._signals,n)?e._signals[n]:re("Unrecognized signal name: "+ge(n))}function nre(e,n){const t=(e._targets||[]).filter(i=>i._update&&i._update.handler===n);return t.length?t[0]:null}function ire(e,n,t,i){let r=nre(t,i);return r||(r=UP(e,()=>i(n,t.value)),r.handler=i,e.on(t,null,r)),e}function rre(e,n,t){const i=nre(n,t);return i&&n._targets.remove(i),e}pe(tre,Lg,{evaluate(e,n,t){var i=this;return Re(function*(){if(yield Lg.prototype.evaluate.call(i,e,n),i._redraw||i._resize)try{i._renderer&&(i._resize&&(i._resize=0,function vVe(e){var n=JS(e),t=Bie(e),i=Vie(e);e._renderer.background(e.background()),e._renderer.resize(t,i,n),e._handler.origin(n),e._resizeListeners.forEach(r=>{try{r(t,i)}catch(o){e.error(o)}})}(i)),yield i._renderer.renderAsync(i._scenegraph.root)),i._redraw=!1}catch(r){i.error(r)}return t&&nx(i,t),i})()},dirty(e){this._redraw=!0,this._renderer&&this._renderer.dirty(e)},description(e){if(arguments.length){const n=null!=e?e+"":null;return n!==this._desc&&$ie(this._el,this._desc=n),this}return this._desc},container(){return this._el},scenegraph(){return this._scenegraph},origin(){return this._origin.slice()},signal(e,n,t){const i=n2(this,e);return 1===arguments.length?i.value:this.update(i,n,t)},width(e){return arguments.length?this.signal("width",e):this.signal("width")},height(e){return arguments.length?this.signal("height",e):this.signal("height")},padding(e){return arguments.length?this.signal("padding",Gie(e)):Gie(this.signal("padding"))},autosize(e){return arguments.length?this.signal("autosize",e):this.signal("autosize")},background(e){return arguments.length?this.signal("background",e):this.signal("background")},renderer(e){return arguments.length?(DE(e)||re("Unrecognized renderer type: "+e),e!==this._renderType&&(this._renderType=e,this._resetRenderer()),this):this._renderType},tooltip(e){return arguments.length?(e!==this._tooltip&&(this._tooltip=e,this._resetRenderer()),this):this._tooltip},loader(e){return arguments.length?(e!==this._loader&&(Lg.prototype.loader.call(this,e),this._resetRenderer()),this):this._loader},resize(){return this._autosize=1,this.touch(n2(this,"autosize"))},_resetRenderer(){this._renderer&&(this._renderer=null,this.initialize(this._el,this._elBind))},_resizeView:function ZVe(e,n,t,i,r,o){this.runAfter(s=>{let a=0;s._autosize=0,s.width()!==t&&(a=1,s.signal(Kie,t,Xie),s._resizeWidth.skip(!0)),s.height()!==i&&(a=1,s.signal(Yie,i,Xie),s._resizeHeight.skip(!0)),s._viewWidth!==e&&(s._resize=1,s._viewWidth=e),s._viewHeight!==n&&(s._resize=1,s._viewHeight=n),(s._origin[0]!==r[0]||s._origin[1]!==r[1])&&(s._resize=1,s._origin=r),a&&s.run("enter"),o&&s.runAfter(l=>l.resize())},!1,1)},addEventListener(e,n,t){let i=n;return t&&!1===t.trap||(i=UP(this,n),i.raw=n),this._handler.on(e,i),this},removeEventListener(e,n){for(var r,o,t=this._handler.handlers(e),i=t.length;--i>=0;)if(r=t[i].handler,e===(o=t[i].type)&&(n===r||n===r.raw)){this._handler.off(o,r);break}return this},addResizeListener(e){const n=this._resizeListeners;return n.indexOf(e)<0&&n.push(e),this},removeResizeListener(e){var n=this._resizeListeners,t=n.indexOf(e);return t>=0&&n.splice(t,1),this},addSignalListener(e,n){return ire(this,e,n2(this,e),n)},removeSignalListener(e,n){return rre(this,n2(this,e),n)},addDataListener(e,n){return ire(this,e,QS(this,e).values,n)},removeDataListener(e,n){return rre(this,QS(this,e).values,n)},globalCursor(e){if(arguments.length){if(this._globalCursor!==!!e){const n=zP(this,null);this._globalCursor=!!e,n&&zP(this,n)}return this}return this._globalCursor},preventDefault(e){return arguments.length?(this._preventDefault=e,this):this._preventDefault},timer:function ize(e,n){this._timers.push(function fVe(e,n,t){var i=new dS,r=n;return null==n?(i.restart(e,n,t),i):(i._restart=i.restart,i.restart=function(o,s,a){s=+s,a=null==a?GN():+a,i._restart(function l(c){c+=r,i._restart(l,r+=s,a),o(c)},s,a)},i.restart(e,n,t),i)}(function t(i){e({timestamp:Date.now(),elapsed:i})},n))},events:function DVe(e,n,t){var s,i=this,r=new ax(t),o=function(c,u){i.runAsync(null,()=>{"view"===e&&function TVe(e,n){var t=e._eventConfig.defaults,i=t.prevent,r=t.allow;return!1!==i&&!0!==r&&(!0===i||!1===r||(i?i[n]:r?!r[n]:e.preventDefault()))}(i,n)&&c.preventDefault(),r.receive(function bVe(e,n,t){var o,a,i=e._renderer,r=i&&i.canvas();return r&&(a=JS(e),(o=gE(n.changedTouches?n.changedTouches[0]:n,r))[0]-=a[0],o[1]-=a[1]),n.dataflow=e,n.item=t,n.vega=function wVe(e,n,t){const i=n?"group"===n.mark.marktype?n:n.mark.group:null;function r(s){var l,a=i;if(s)for(l=n;l;l=l.mark.group)if(l.mark.name===s){a=l;break}return a&&a.mark&&a.mark.interactive?a:{}}function o(s){if(!s)return t;xe(s)&&(s=r(s));const a=t.slice();for(;s;)a[0]-=s.x||0,a[1]-=s.y||0,s=s.mark&&s.mark.group;return a}return{view:rr(e),item:rr(n||{}),group:r,xy:o,x:s=>o(s)[0],y:s=>o(s)[1]}}(e,t,o),n}(i,c,u))})};if("timer"===e)e2(i,"timer",n)&&i.timer(o,n);else if("view"===e)e2(i,"view",n)&&i.addEventListener(n,o,EVe);else if("window"===e?e2(i,"window",n)&&typeof window<"u"&&(s=[window]):typeof document<"u"&&e2(i,"selector",n)&&(s=Array.from(document.querySelectorAll(e))),s){for(var a=0,l=s.length;a<l;++a)s[a].addEventListener(n,o);Uie(i,s,n,o)}else i.warn("Can not resolve event source: "+e);return r},finalize:function MVe(){var i,r,o,e=this._tooltip,n=this._timers,t=this._eventListeners;for(i=n.length;--i>=0;)n[i].stop();for(i=t.length;--i>=0;)for(r=(o=t[i]).sources.length;--r>=0;)o.sources[r].removeEventListener(o.type,o.handler);return e&&e.call(this,this._handler,null,null,null),this},hover:function IVe(e,n){return n=[n||"update",(e=[e||"hover"])[0]],this.on(this.events("view","mouseover",Hie),jie,qie(e)),this.on(this.events("view","mouseout",Hie),jie,qie(n)),this},data:function mVe(e,n){return arguments.length<2?QS(this,e).values.value:ZS.call(this,e,Gn().remove(xs).insert(n))},change:ZS,insert:function _Ve(e,n){return ZS.call(this,e,Gn().insert(n))},remove:function yVe(e,n){return ZS.call(this,e,Gn().remove(n))},scale:function XVe(e){var n=this._runtime.scales;return $e(n,e)||re("Unrecognized scale or projection: "+e),n[e].value},initialize:function HVe(e,n){const t=this,i=t._renderType,r=t._eventConfig.bind,o=DE(i);e=t._el=e?HP(t,e,!0):null,function hVe(e){const n=e.container();n&&(n.setAttribute("role","graphics-document"),n.setAttribute("aria-roleDescription","visualization"),$ie(n,e.description()))}(t),o||t.error("Unrecognized renderer type: "+i);const s=o.handler||Ju,a=e?o.renderer:o.headless;return t._renderer=a?Wie(t,t._renderer,e,a):null,t._handler=function UVe(e,n,t,i){const r=new i(e.loader(),UP(e,e.tooltip())).scene(e.scenegraph().root).initialize(t,JS(e),e);return n&&n.handlers().forEach(o=>{r.on(o.type,o.handler)}),r}(t,t._handler,e,s),t._redraw=!0,e&&"none"!==r&&(n=n?t._elBind=HP(t,n,!0):e.appendChild(ts("form",{class:"vega-bindings"})),t._bind.forEach(l=>{l.param.element&&"container"!==r&&(l.element=HP(t,l.param.element,!!l.param.input))}),t._bind.forEach(l=>{RVe(t,l.element||n,l)})),t},toImageURL:function qVe(e,n){return WP.apply(this,arguments)},toCanvas:function GVe(e,n){return GP.apply(this,arguments)},toSVG:function KVe(e){return KP.apply(this,arguments)},getState:function JVe(e){return this._runtime.getState(e||{data:eze,signals:tze,recurse:!0})},setState:function nze(e){return this.runAsync(null,n=>{n._trigger=!1,n._runtime.setState(e)},n=>{n._trigger=!0}),this}});const aze="view",r2="[",o2="]",ore="{",sre="}",lze=":",are=",",cze="@",uze=">",dze=/[[\]{}]/,fze={"*":1,arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1};let lre,cre;function _d(e,n,t){return lre=n||aze,cre=t||fze,ure(e.trim()).map(XP)}function W1(e,n,t,i,r){const o=e.length;let a,s=0;for(;n<o;++n){if(a=e[n],!s&&a===t)return n;r&&r.indexOf(a)>=0?--s:i&&i.indexOf(a)>=0&&++s}return n}function ure(e){const n=[],t=e.length;let i=0,r=0;for(;r<t;)r=W1(e,r,are,r2+ore,o2+sre),n.push(e.substring(i,r).trim()),i=++r;if(0===n.length)throw"Empty event selector: "+e;return n}function XP(e){return"["===e[0]?function pze(e){const n=e.length;let i,t=1;if(t=W1(e,t,o2,r2,o2),t===n)throw"Empty between selector: "+e;if(i=ure(e.substring(1,t)),2!==i.length)throw"Between selector must have two elements: "+e;if((e=e.slice(t+1).trim())[0]!==uze)throw"Expected '>' after between selector: "+e;i=i.map(XP);const r=XP(e.slice(1).trim());return r.between?{between:i,stream:r}:(r.between=i,r)}(e):function gze(e){const n={source:lre},t=[];let l,c,i=[0,0],r=0,o=0,s=e.length,a=0;if(e[s-1]===sre){if(a=e.lastIndexOf(ore),!(a>=0))throw"Unmatched right brace: "+e;try{i=function mze(e){const n=e.split(are);if(!e.length||n.length>2)throw e;return n.map(t=>{const i=+t;if(i!=i)throw e;return i})}(e.substring(a+1,s-1))}catch{throw"Invalid throttle specification: "+e}s=(e=e.slice(0,a).trim()).length,a=0}if(!s)throw e;if(e[0]===cze&&(r=++a),l=W1(e,a,lze),l<s&&(t.push(e.substring(o,l).trim()),o=a=++l),a=W1(e,a,r2),a===s)t.push(e.substring(o,s).trim());else if(t.push(e.substring(o,a).trim()),c=[],o=++a,o===s)throw"Unmatched left bracket: "+e;for(;a<s;){if(a=W1(e,a,o2),a===s)throw"Unmatched left bracket: "+e;if(c.push(e.substring(o,a).trim()),a<s-1&&e[++a]!==r2)throw"Expected left bracket: "+e;o=++a}if(!(s=t.length)||dze.test(t[s-1]))throw"Invalid event selector: "+e;return s>1?(n.type=t[1],r?n.markname=t[0].slice(1):function hze(e){return cre[e]}(t[0])?n.marktype=t[0]:n.source=t[0]):n.type=t[0],"!"===n.type.slice(-1)&&(n.consume=!0,n.type=n.type.slice(0,-1)),null!=c&&(n.filter=c),i[0]&&(n.throttle=i[0]),i[1]&&(n.debounce=i[1]),n}(e)}function _ze(e){return Ee(e)?e:{type:e||"pad"}}const G1=e=>+e||0,yze=e=>({top:e,bottom:e,left:e,right:e});function vze(e){return Ee(e)?e.signal?e:{top:G1(e.top),bottom:G1(e.bottom),left:G1(e.left),right:G1(e.right)}:yze(G1(e))}const bi=e=>Ee(e)&&!oe(e)?ut({},e):{value:e};function dre(e,n,t,i){return null!=t?(Ee(t)&&!oe(t)||oe(t)&&t.length&&Ee(t[0])?e.update[n]=t:e[i||"enter"][n]={value:t},1):0}function Hi(e,n,t){for(const i in n)dre(e,i,n[i]);for(const i in t)dre(e,i,t[i],"update")}function Em(e,n,t){for(const i in n)t&&$e(t,i)||(e[i]=ut(e[i]||{},n[i]));return e}function Sm(e,n){return n&&(n.enter&&n.enter[e]||n.update&&n.update[e])}const QP="mark",ZP="frame",JP="scope",bze="axis",wze="axis-domain",Cze="axis-grid",xze="axis-label",Eze="axis-tick",Sze="axis-title",Tze="legend",Dze="legend-band",Ize="legend-entry",Mze="legend-gradient",fre="legend-label",Aze="legend-symbol",kze="legend-title",Oze="title",Rze="title-text",Fze="title-subtitle";function eL(e,n,t){e[n]=t&&t.signal?{signal:t.signal}:{value:t}}const hre=e=>xe(e)?ge(e):e.signal?`(${e.signal})`:pre(e);function s2(e){if(null!=e.gradient)return function Lze(e){const n=[e.start,e.stop,e.count].map(t=>null==t?null:ge(t));for(;n.length&&null==Tt(n);)n.pop();return n.unshift(hre(e.gradient)),`gradient(${n.join(",")})`}(e);let n=e.signal?`(${e.signal})`:e.color?function Pze(e){return e.c?a2("hcl",e.h,e.c,e.l):e.h||e.s?a2("hsl",e.h,e.s,e.l):e.l||e.a?a2("lab",e.l,e.a,e.b):e.r||e.g||e.b?a2("rgb",e.r,e.g,e.b):null}(e.color):null!=e.field?pre(e.field):void 0!==e.value?ge(e.value):void 0;return null!=e.scale&&(n=function $ze(e,n){const t=hre(e.scale);return null!=e.range?n=`lerp(_range(${t}), ${+e.range})`:(void 0!==n&&(n=`_scale(${t}, ${n})`),e.band&&(n=(n?n+"+":"")+`_bandwidth(${t})`+(1==+e.band?"":"*"+l2(e.band)),e.extra&&(n=`(datum.extra ? _scale(${t}, datum.extra.value) : ${n})`)),null==n&&(n="0")),n}(e,n)),void 0===n&&(n=null),null!=e.exponent&&(n=`pow(${n},${l2(e.exponent)})`),null!=e.mult&&(n+=`*${l2(e.mult)}`),null!=e.offset&&(n+=`+${l2(e.offset)}`),e.round&&(n=`round(${n})`),n}const a2=(e,n,t,i)=>`(${e}(${[n,t,i].map(s2).join(",")})+'')`;function l2(e){return Ee(e)?"("+s2(e)+")":e}function pre(e){return gre(Ee(e)?e:{datum:e})}function gre(e){let n,t,i;if(e.signal)n="datum",i=e.signal;else if(e.group||e.parent){for(t=Math.max(1,e.level||1),n="item";t-- >0;)n+=".mark.group";e.parent?(i=e.parent,n+=".datum"):i=e.group}else e.datum?(n="datum",i=e.datum):re("Invalid field reference: "+ge(e));return e.signal||(i=xe(i)?sl(i).map(ge).join("]["):gre(i)),n+"["+i+"]"}function mre(e,n,t,i,r,o){const s={};(o=o||{}).encoders={$encode:s},e=function Nze(e,n,t,i,r){const o={},s={};let a,l,c,u;for(l in l="lineBreak","text"===n&&null!=r[l]&&!Sm(l,e)&&eL(o,l,r[l]),("legend"==t||String(t).startsWith("axis"))&&(t=null),u=t===ZP?r.group:t===QP?ut({},r.mark,r[n]):null,u)c=Sm(l,e)||("fill"===l||"stroke"===l)&&(Sm("fill",e)||Sm("stroke",e)),c||eL(o,l,u[l]);for(l in Ce(i).forEach(d=>{const f=r.style&&r.style[d];for(const h in f)Sm(h,e)||eL(o,h,f[h])}),e=ut({},e),o)u=o[l],u.signal?(a=a||{})[l]=u:s[l]=u;return e.enter=ut(s,e.enter),a&&(e.update=ut(a,e.update)),e}(e,n,t,i,r.config);for(const a in e)s[a]=Vze(e[a],n,o,r);return o}function Vze(e,n,t,i){const r={},o={};for(const s in e)null!=e[s]&&(r[s]=Uze(zze(e[s]),i,t,o));return{$expr:{marktype:n,channels:r},$fields:Object.keys(o),$output:Object.keys(e)}}function zze(e){return oe(e)?function Bze(e){let n="";return e.forEach(t=>{const i=s2(t);n+=t.test?`(${t.test})?${i}:`:i}),":"===Tt(n)&&(n+="null"),n}(e):s2(e)}function Uze(e,n,t,i){const r=Al(e,n);return r.$fields.forEach(o=>i[o]=1),ut(t,r.$params),r.$expr}const Hze="outer",jze=["value","update","init","react","bind"];function _re(e,n){re(e+' for "outer" push: '+ge(n))}function yre(e,n){const t=e.name;if(e.push===Hze)n.signals[t]||_re("No prior signal definition",t),jze.forEach(i=>{void 0!==e[i]&&_re("Invalid property ",i)});else{const i=n.addSignal(t,e.value);!1===e.react&&(i.react=!1),e.bind&&n.addBinding(t,e.bind)}}function tL(e,n,t,i){this.id=-1,this.type=e,this.value=n,this.params=t,i&&(this.parent=i)}function c2(e,n,t,i){return new tL(e,n,t,i)}function u2(e,n){return c2("operator",e,n)}function Ve(e){const n={$ref:e.id};return e.id<0&&(e.refs=e.refs||[]).push(n),n}function K1(e,n){return n?{$field:e,$name:n}:{$field:e}}const nL=K1("key");function vre(e,n){return{$compare:e,$order:n}}function d2(e,n){return(e&&e.signal?"$"+e.signal:e||"")+(e&&n?"_":"")+(n&&n.signal?"$"+n.signal:n||"")}const iL="scope",rL="view";function pi(e){return e&&e.signal}function f2(e){if(pi(e))return!0;if(Ee(e))for(const n in e)if(f2(e[n]))return!0;return!1}function wa(e,n){return e??n}function gh(e){return e&&e.signal||e}const bre="timer";function Y1(e,n){return(e.merge?Qze:e.stream?Zze:e.type?Jze:re("Invalid stream specification: "+ge(e)))(e,n)}function Qze(e,n){const i=oL({merge:e.merge.map(r=>Y1(r,n))},e,n);return n.addStream(i).id}function Zze(e,n){const i=oL({stream:Y1(e.stream,n)},e,n);return n.addStream(i).id}function Jze(e,n){let t;e.type===bre?(t=n.event(bre,e.throttle),e={between:e.between,filter:e.filter}):t=n.event(function Xze(e){return e===iL?rL:e||rL}(e.source),e.type);const i=oL({stream:t},e,n);return 1===Object.keys(i).length?t:n.addStream(i).id}function oL(e,n,t){let i=n.between;return i&&(2!==i.length&&re('Stream "between" parameter must have 2 entries: '+ge(n)),e.between=[Y1(i[0],t),Y1(i[1],t)]),i=n.filter?[].concat(n.filter):[],(n.marktype||n.markname||n.markrole)&&i.push(function eUe(e,n,t){const i="event.item";return i+(e&&"*"!==e?"&&"+i+".mark.marktype==='"+e+"'":"")+(t?"&&"+i+".mark.role==='"+t+"'":"")+(n?"&&"+i+".mark.name==='"+n+"'":"")}(n.marktype,n.markname,n.markrole)),n.source===iL&&i.push("inScope(event.item)"),i.length&&(e.filter=Al("("+i.join(")&&(")+")",t).$expr),null!=(i=n.throttle)&&(e.throttle=+i),null!=(i=n.debounce)&&(e.debounce=+i),n.consume&&(e.consume=!0),e}const tUe={code:"_.$value",ast:{type:"Identifier",value:"value"}};function rUe(e){return{signal:"["+e.map(n=>n.scale?'scale("'+n.scale+'")':n.signal)+"]"}}const sn=e=>(n,t,i)=>c2(e,t,n||void 0,i),wre=sn("aggregate"),sUe=sn("axisticks"),Cre=sn("bound"),Ca=sn("collect"),xre=sn("compare"),aUe=sn("datajoin"),Ere=sn("encode"),lUe=sn("expression"),cUe=sn("facet"),uUe=sn("field"),dUe=sn("key"),fUe=sn("legendentries"),hUe=sn("load"),pUe=sn("mark"),gUe=sn("multiextent"),mUe=sn("multivalues"),_Ue=sn("overlap"),yUe=sn("params"),Sre=sn("prefacet"),vUe=sn("projection"),bUe=sn("proxy"),wUe=sn("relay"),Tre=sn("render"),CUe=sn("scale"),mh=sn("sieve"),xUe=sn("sortitems"),Dre=sn("viewlayout"),EUe=sn("values");let SUe=0;const Ire={min:"min",max:"max",count:"sum"};function DUe(e,n){const t=n.getScale(e.name).params;let i;for(i in t.domain=Mre(e.domain,e,n),null!=e.range&&(t.range=kre(e,n,t)),null!=e.interpolate&&function LUe(e,n){n.interpolate=Fs(e.type||e),null!=e.gamma&&(n.interpolateGamma=Fs(e.gamma))}(e.interpolate,t),null!=e.nice&&(t.nice=function PUe(e){return Ee(e)?{interval:Fs(e.interval),step:Fs(e.step)}:Fs(e)}(e.nice)),null!=e.bins&&(t.bins=function NUe(e,n){return e.signal||oe(e)?h2(e,n):n.objectProperty(e)}(e.bins,n)),e)$e(t,i)||"name"===i||(t[i]=Fs(e[i],n))}function Fs(e,n){return Ee(e)?e.signal?n.signalRef(e.signal):re("Unsupported object: "+ge(e)):e}function h2(e,n){return e.signal?n.signalRef(e.signal):e.map(t=>Fs(t,n))}function p2(e){re("Can not find data set: "+ge(e))}function Mre(e,n,t){if(e)return e.signal?t.signalRef(e.signal):(oe(e)?IUe:e.fields?AUe:MUe)(e,n,t);(null!=n.domainMin||null!=n.domainMax)&&re("No scale domain defined for domainMin/domainMax to override.")}function IUe(e,n,t){return e.map(i=>Fs(i,t))}function MUe(e,n,t){const i=t.getData(e.data);return i||p2(e.data),Kg(n.type)?i.valuesRef(t,e.field,Are(e.sort,!1)):MQ(n.type)?i.domainRef(t,e.field):i.extentRef(t,e.field)}function AUe(e,n,t){const i=e.data,r=e.fields.reduce((o,s)=>(s=xe(s)?{data:i,field:s}:oe(s)||s.signal?function kUe(e,n){const t="_:vega:_"+SUe++,i=Ca({});if(oe(e))i.value={$ingest:e};else if(e.signal){const r="setdata("+ge(t)+","+e.signal+")";i.params.input=n.signalRef(r)}return n.addDataPipeline(t,[i,mh({})]),{data:t,field:"data"}}(s,t):s,o.push(s),o),[]);return(Kg(n.type)?OUe:MQ(n.type)?RUe:FUe)(e,t,r)}function OUe(e,n,t){const i=Are(e.sort,!0);let r,o;const s=t.map(c=>{const u=n.getData(c.data);return u||p2(c.data),u.countsRef(n,c.field,i)}),a={groupby:nL,pulse:s};i&&(r=i.op||"count",o=i.field?d2(r,i.field):"count",a.ops=[Ire[r]],a.fields=[n.fieldRef(o)],a.as=[o]),r=n.add(wre(a));const l=n.add(Ca({pulse:Ve(r)}));return o=n.add(EUe({field:nL,sort:n.sortRef(i),pulse:Ve(l)})),Ve(o)}function Are(e,n){return e&&(e.field||e.op?e.field||"count"===e.op?n&&e.field&&e.op&&!Ire[e.op]&&re("Multiple domain scales can not be sorted using "+e.op):re("No field provided for sort aggregate op: "+e.op):Ee(e)?e.field="key":e={field:"key"}),e}function RUe(e,n,t){const i=t.map(r=>{const o=n.getData(r.data);return o||p2(r.data),o.domainRef(n,r.field)});return Ve(n.add(mUe({values:i})))}function FUe(e,n,t){const i=t.map(r=>{const o=n.getData(r.data);return o||p2(r.data),o.extentRef(n,r.field)});return Ve(n.add(gUe({extents:i})))}function kre(e,n,t){const i=n.config.range;let r=e.range;if(r.signal)return n.signalRef(r.signal);if(xe(r)){if(i&&$e(i,r))return kre(e=ut({},e,{range:i[r]}),n,t);"width"===r?r=[0,{signal:"width"}]:"height"===r?r=Kg(e.type)?[0,{signal:"height"}]:[{signal:"height"},0]:re("Unrecognized scale range value: "+ge(r))}else{if(r.scheme)return t.scheme=oe(r.scheme)?h2(r.scheme,n):Fs(r.scheme,n),r.extent&&(t.schemeExtent=h2(r.extent,n)),void(r.count&&(t.schemeCount=Fs(r.count,n)));if(r.step)return void(t.rangeStep=Fs(r.step,n));if(Kg(e.type)&&!oe(r))return Mre(r,e,n);oe(r)||re("Unsupported range type: "+ge(r))}return r.map(o=>(oe(o)?h2:Fs)(o,n))}function sL(e,n,t){return oe(e)?e.map(i=>sL(i,n,t)):Ee(e)?e.signal?t.signalRef(e.signal):"fit"===n?e:re("Unsupported parameter object: "+ge(e)):e}const xa="top",Tm="left",Dm="right",yd="bottom",BUe="vertical",VUe="start",UUe="end",aL="index",lL="label",HUe="offset",Im="perc",jUe="perc2",Ns="value",X1="guide-label",cL="guide-title",qUe="group-title",WUe="group-subtitle",Rre="symbol",g2="gradient",uL="discrete",dL="size",fL=[dL,"shape","fill","stroke","strokeWidth","strokeDash","opacity"],Q1={name:1,style:1,interactive:1},Ot={value:0},Ps={value:1},m2="group",Fre="rect",hL="rule",GUe="symbol",_h="text";function Z1(e){return e.type=m2,e.interactive=e.interactive||!1,e}function go(e,n){const t=(i,r)=>wa(e[i],wa(n[i],r));return t.isVertical=i=>BUe===wa(e.direction,n.direction||(i?n.symbolDirection:n.gradientDirection)),t.gradientLength=()=>wa(e.gradientLength,n.gradientLength||n.gradientWidth),t.gradientThickness=()=>wa(e.gradientThickness,n.gradientThickness||n.gradientHeight),t.entryColumns=()=>wa(e.columns,wa(n.columns,+t.isVertical(!0))),t}function Nre(e,n){const t=n&&(n.update&&n.update[e]||n.enter&&n.enter[e]);return t&&t.signal?t:t?t.value:null}function _2(e,n,t){return`item.anchor === '${VUe}' ? ${e} : item.anchor === '${UUe}' ? ${n} : ${t}`}const pL=_2(ge(Tm),ge(Dm),ge("center"));function Pre(e,n){return n?e?Ee(e)?Object.assign({},e,{offset:Pre(e.offset,n)}):{value:e,offset:n}:n:e}function ns(e,n){return n?(e.name=n.name,e.style=n.style||e.style,e.interactive=!!n.interactive,e.encode=Em(e.encode,n,Q1)):e.interactive=!1,e}function XUe(e,n,t,i){const r=go(e,t),o=r.isVertical(),s=r.gradientThickness(),a=r.gradientLength();let l,c,u,d,f;o?(c=[0,1],u=[0,0],d=s,f=a):(c=[0,0],u=[1,0],d=a,f=s);const h={enter:l={opacity:Ot,x:Ot,y:Ot,width:bi(d),height:bi(f)},update:ut({},l,{opacity:Ps,fill:{gradient:n,start:c,stop:u}}),exit:{opacity:Ot}};return Hi(h,{stroke:r("gradientStrokeColor"),strokeWidth:r("gradientStrokeWidth")},{opacity:r("gradientOpacity")}),ns({type:Fre,role:Mze,encode:h},i)}function QUe(e,n,t,i,r){const o=go(e,t),s=o.isVertical(),a=o.gradientThickness(),l=o.gradientLength();let c,u,d,f,h="";s?(c="y",d="y2",u="x",f="width",h="1-"):(c="x",d="x2",u="y",f="height");const p={opacity:Ot,fill:{scale:n,field:Ns}};p[c]={signal:h+"datum."+Im,mult:l},p[u]=Ot,p[d]={signal:h+"datum."+jUe,mult:l},p[f]=bi(a);const g={enter:p,update:ut({},p,{opacity:Ps}),exit:{opacity:Ot}};return Hi(g,{stroke:o("gradientStrokeColor"),strokeWidth:o("gradientStrokeWidth")},{opacity:o("gradientOpacity")}),ns({type:Fre,role:Dze,key:Ns,from:r,encode:g},i)}const ZUe=`datum.${Im}<=0?"${Tm}":datum.${Im}>=1?"${Dm}":"center"`,JUe=`datum.${Im}<=0?"${yd}":datum.${Im}>=1?"${xa}":"middle"`;function Lre(e,n,t,i){const r=go(e,n),o=r.isVertical(),s=bi(r.gradientThickness()),a=r.gradientLength();let c,u,d,f,l=r("labelOverlap"),h="";const p={enter:c={opacity:Ot},update:u={opacity:Ps,text:{field:lL}},exit:{opacity:Ot}};return Hi(p,{fill:r("labelColor"),fillOpacity:r("labelOpacity"),font:r("labelFont"),fontSize:r("labelFontSize"),fontStyle:r("labelFontStyle"),fontWeight:r("labelFontWeight"),limit:wa(e.labelLimit,n.gradientLabelLimit)}),o?(c.align={value:"left"},c.baseline=u.baseline={signal:JUe},d="y",f="x",h="1-"):(c.align=u.align={signal:ZUe},c.baseline={value:"top"},d="x",f="y"),c[d]=u[d]={signal:h+"datum."+Im,mult:a},c[f]=u[f]=s,s.offset=wa(e.labelOffset,n.gradientLabelOffset)||0,l=l?{separation:r("labelSeparation"),method:l,order:"datum."+aL}:void 0,ns({type:_h,role:fre,style:X1,key:Ns,from:i,encode:p,overlap:l},t)}function eHe(e,n,t,i,r){const o=go(e,n),s=t.entries,a=!(!s||!s.interactive),l=s?s.name:void 0,c=o("clipHeight"),u=o("symbolOffset"),d={data:"value"},f=`(${r}) ? datum.${HUe} : datum.${dL}`,h=c?bi(c):{field:dL},p=`datum.${aL}`,g=`max(1, ${r})`;let m,_,y,v,b;h.mult=.5,m={enter:_={opacity:Ot,x:{signal:f,mult:.5,offset:u},y:h},update:y={opacity:Ps,x:_.x,y:_.y},exit:{opacity:Ot}};let w=null,x=null;e.fill||(w=n.symbolBaseFillColor,x=n.symbolBaseStrokeColor),Hi(m,{fill:o("symbolFillColor",w),shape:o("symbolType"),size:o("symbolSize"),stroke:o("symbolStrokeColor",x),strokeDash:o("symbolDash"),strokeDashOffset:o("symbolDashOffset"),strokeWidth:o("symbolStrokeWidth")},{opacity:o("symbolOpacity")}),fL.forEach(M=>{e[M]&&(y[M]=_[M]={scale:e[M],field:Ns})});const C=ns({type:GUe,role:Aze,key:Ns,from:d,clip:!!c||void 0,encode:m},t.symbols),S=bi(u);S.offset=o("labelOffset"),m={enter:_={opacity:Ot,x:{signal:f,offset:S},y:h},update:y={opacity:Ps,text:{field:lL},x:_.x,y:_.y},exit:{opacity:Ot}},Hi(m,{align:o("labelAlign"),baseline:o("labelBaseline"),fill:o("labelColor"),fillOpacity:o("labelOpacity"),font:o("labelFont"),fontSize:o("labelFontSize"),fontStyle:o("labelFontStyle"),fontWeight:o("labelFontWeight"),limit:o("labelLimit")});const A=ns({type:_h,role:fre,style:X1,key:Ns,from:d,encode:m},t.labels);return m={enter:{noBound:{value:!c},width:Ot,height:c?bi(c):Ot,opacity:Ot},exit:{opacity:Ot},update:y={opacity:Ps,row:{signal:null},column:{signal:null}}},o.isVertical(!0)?(v=`ceil(item.mark.items.length / ${g})`,y.row.signal=`${p}%${v}`,y.column.signal=`floor(${p} / ${v})`,b={field:["row",p]}):(y.row.signal=`floor(${p} / ${g})`,y.column.signal=`${p} % ${g}`,b={field:p}),y.column.signal=`(${r})?${y.column.signal}:${p}`,Z1({role:JP,from:i={facet:{data:i,name:"value",groupby:aL}},encode:Em(m,s,Q1),marks:[C,A],name:l,interactive:a,sort:b})}const gL='item.orient === "left"',mL='item.orient === "right"',y2=`(${gL} || ${mL})`,nHe=`datum.vgrad && ${y2}`,iHe=_2('"top"','"bottom"','"middle"'),oHe=`datum.vgrad && ${mL} ? (${_2('"right"','"left"','"center"')}) : (${y2} && !(datum.vgrad && ${gL})) ? "left" : ${pL}`,sHe=`item._anchor || (${y2} ? "middle" : "start")`,aHe=`${nHe} ? (${gL} ? -90 : 90) : 0`,lHe=`${y2} ? (datum.vgrad ? (${mL} ? "bottom" : "top") : ${iHe}) : "top"`;function uHe(e,n){let t;return Ee(e)&&(e.signal?t=e.signal:e.path?t="pathShape("+$re(e.path)+")":e.sphere&&(t="geoShape("+$re(e.sphere)+', {type: "Sphere"})')),t?n.signalRef(t):!!e}function $re(e){return Ee(e)&&e.signal?e.signal:ge(e)}function Bre(e){const n=e.role||"";return n.indexOf("axis")&&n.indexOf("legend")&&n.indexOf("title")?e.type===m2?JP:n||QP:n}function dHe(e){return{marktype:e.type,name:e.name||void 0,role:e.role||Bre(e),zindex:+e.zindex||void 0,aria:e.aria,description:e.description}}function fHe(e,n){return e&&e.signal?n.signalRef(e.signal):!1!==e}function _L(e,n){const t=BK(e.type);t||re("Unrecognized transform type: "+ge(e.type));const i=c2(t.type.toLowerCase(),null,Vre(t,e,n));return e.signal&&n.addSignal(e.signal,n.proxy(i)),i.metadata=t.metadata||{},i}function Vre(e,n,t){const i={},r=e.params.length;for(let o=0;o<r;++o){const s=e.params[o];i[s.name]=hHe(s,n,t)}return i}function hHe(e,n,t){const i=e.type,r=n[e.name];return"index"===i?function pHe(e,n,t){return xe(n.from)||re('Lookup "from" parameter must be a string literal.'),t.getData(n.from).lookupRef(t,n.key)}(0,n,t):void 0!==r?"param"===i?function gHe(e,n,t){const i=n[e.name];return e.array?(oe(i)||re("Expected an array of sub-parameters. Instead: "+ge(i)),i.map(r=>Ure(e,r,t))):Ure(e,i,t)}(e,n,t):"projection"===i?t.projectionRef(n[e.name]):e.array&&!pi(r)?r.map(o=>zre(e,o,t)):zre(e,r,t):void(e.required&&re("Missing required "+ge(n.type)+" parameter: "+ge(e.name)))}function zre(e,n,t){const i=e.type;if(pi(n))return Hre(i)?re("Expression references can not be signals."):yL(i)?t.fieldRef(n):jre(i)?t.compareRef(n):t.signalRef(n.signal);{const r=e.expr||yL(i);return r&&mHe(n)?t.exprRef(n.expr,n.as):r&&_He(n)?K1(n.field,n.as):Hre(i)?Al(n,t):yHe(i)?Ve(t.getData(n).values):yL(i)?K1(n):jre(i)?t.compareRef(n):n}}function Ure(e,n,t){const i=e.params.length;let r;for(let s=0;s<i;++s){r=e.params[s];for(const a in r.key)if(r.key[a]!==n[a]){r=null;break}if(r)break}r||re("Unsupported parameter: "+ge(n));const o=ut(Vre(r,n,t),r.key);return Ve(t.add(yUe(o)))}const mHe=e=>e&&e.expr,_He=e=>e&&e.field,yHe=e=>"data"===e,Hre=e=>"expr"===e,yL=e=>"field"===e,jre=e=>"compare"===e;function v2(e,n){return e.$ref?e:e.data&&e.data.$ref?e.data:Ve(n.getData(e.data).output)}function yh(e,n,t,i,r){this.scope=e,this.input=n,this.output=t,this.values=i,this.aggregate=r,this.index={}}function qre(e){return xe(e)?e:null}function Wre(e,n,t){const i=d2(t.op,t.field);let r;if(n.ops){for(let o=0,s=n.as.length;o<s;++o)if(n.as[o]===i)return}else n.ops=["count"],n.fields=[null],n.as=["count"];t.op&&(n.ops.push((r=t.op.signal)?e.signalRef(r):t.op),n.fields.push(e.fieldRef(t.field)),n.as.push(i))}function J1(e,n,t,i,r,o,s){const a=n[t]||(n[t]={}),l=function Kze(e){return Ee(e)?("descending"===e.order?"-":"+")+d2(e.op,e.field):""}(o);let u,d,c=qre(r);if(null!=c&&(e=n.scope,c+=l?"|"+l:"",u=a[c]),!u){const f=o?{field:nL,pulse:n.countsRef(e,r,o)}:{field:e.fieldRef(r),pulse:Ve(n.output)};l&&(f.sort=e.sortRef(o)),d=e.add(c2(i,void 0,f)),s&&(n.index[r]=d),u=Ve(d),null!=c&&(a[c]=u)}return u}function Gre(e,n,t){const i=e.remove,r=e.insert,o=e.toggle,s=e.modify,a=e.values,l=n.add(u2()),u=Al("if("+e.trigger+',modify("'+t+'",'+[r,i,o,s,a].map(d=>d??"null").join(",")+"),0)",n);l.update=u.$expr,l.params=u.$params}function b2(e,n){const t=Bre(e),i=e.type===m2,r=e.from&&e.from.facet,o=e.overlap;let a,l,c,u,d,f,h,s=e.layout||t===JP||t===ZP;const p=t===QP||s||r,g=function vHe(e,n,t){let i,r,o,s,a;return e?(i=e.facet)&&(n||re("Only group marks can be faceted."),null!=i.field?s=a=v2(i,t):(e.data?a=Ve(t.getData(e.data).aggregate):(o=_L(ut({type:"aggregate",groupby:Ce(i.groupby)},i.aggregate),t),o.params.key=t.keyRef(i.groupby),o.params.pulse=v2(i,t),s=a=Ve(t.add(o))),r=t.keyRef(i.groupby,!0))):s=Ve(t.add(Ca(null,[{}]))),s||(s=v2(e,t)),{key:r,pulse:s,parent:a}}(e.from,i,n);l=n.add(aUe({key:g.key||(e.key?K1(e.key):void 0),pulse:g.pulse,clean:!i}));const m=Ve(l);l=c=n.add(Ca({pulse:m})),l=n.add(pUe({markdef:dHe(e),interactive:fHe(e.interactive,n),clip:uHe(e.clip,n),context:{$context:!0},groups:n.lookup(),parent:n.signals.parent?n.signalRef("parent"):null,index:n.markpath(),pulse:Ve(l)}));const _=Ve(l);l=u=n.add(Ere(mre(e.encode,e.type,t,e.style,n,{mod:!1,pulse:_}))),l.params.parent=n.encode(),e.transform&&e.transform.forEach(x=>{const C=_L(x,n),S=C.metadata;(S.generates||S.changes)&&re("Mark transforms should not generate new data."),S.nomod||(u.params.mod=!0),C.params.pulse=Ve(l),n.add(l=C)}),e.sort&&(l=n.add(xUe({sort:n.compareRef(e.sort),pulse:Ve(l)})));const y=Ve(l);(r||s)&&(s=n.add(Dre({layout:n.objectProperty(e.layout),legends:n.legends,mark:_,pulse:y})),f=Ve(s));const v=n.add(Cre({mark:_,pulse:f||y}));h=Ve(v),i&&(p&&(a=n.operators,a.pop(),s&&a.pop()),n.pushState(y,f||h,m),r?function bHe(e,n,t){const i=e.from.facet,r=i.name,o=v2(i,n);let s;i.name||re("Facet must have a name: "+ge(i)),i.data||re("Facet must reference a data set: "+ge(i)),i.field?s=n.add(Sre({field:n.fieldRef(i.field),pulse:o})):i.groupby?s=n.add(cUe({key:n.keyRef(i.groupby),group:Ve(n.proxy(t.parent)),pulse:o})):re("Facet must specify groupby or field: "+ge(i));const a=n.fork(),l=a.add(Ca()),c=a.add(mh({pulse:Ve(l)}));a.addData(r,new yh(a,l,l,c)),a.addSignal("parent",null),s.params.subflow={$subflow:a.parse(e).toRuntime()}}(e,n,g):p?function wHe(e,n,t){const i=n.add(Sre({pulse:t.pulse})),r=n.fork();r.add(mh()),r.addSignal("parent",null),i.params.subflow={$subflow:r.parse(e).toRuntime()}}(e,n,g):n.parse(e),n.popState(),p&&(s&&a.push(s),a.push(v))),o&&(h=function CHe(e,n,t){const i=e.method,r=e.bound,o=e.separation,s={separation:pi(o)?t.signalRef(o.signal):o,method:pi(i)?t.signalRef(i.signal):i,pulse:n};if(e.order&&(s.sort=t.compareRef({field:e.order})),r){const a=r.tolerance;s.boundTolerance=pi(a)?t.signalRef(a.signal):+a,s.boundScale=t.scaleRef(r.scale),s.boundOrient=r.orient}return Ve(t.add(_Ue(s)))}(o,h,n));const b=n.add(Tre({pulse:h})),w=n.add(mh({pulse:Ve(b)},void 0,n.parent()));null!=e.name&&(d=e.name,n.addData(d,new yh(n,c,b,w)),e.on&&e.on.forEach(x=>{(x.insert||x.remove||x.toggle)&&re("Marks only support modify triggers."),Gre(x,n,d)}))}function THe(e,n,t){const i={enter:{},update:{}};return Hi(i,{orient:e("orient"),offset:e("offset"),padding:e("padding"),titlePadding:e("titlePadding"),cornerRadius:e("cornerRadius"),fill:e("fillColor"),stroke:e("strokeColor"),strokeWidth:t.strokeWidth,strokeDash:t.strokeDash,x:e("legendX"),y:e("legendY"),format:n.format,formatType:n.formatType}),i}function Kre(e,n,t){return n[e]?`scale("${n[e]}",datum)`:Nre(e,t[0].encode)}yh.fromEntries=function(e,n){const t=n.length,i=n[t-1],r=n[t-2];let o=n[0],s=null,a=1;for(o&&"load"===o.type&&(o=n[1]),e.add(n[0]);a<t;++a)n[a].params.pulse=Ve(n[a-1]),e.add(n[a]),"aggregate"===n[a].type&&(s=n[a]);return new yh(e,o,r,i,s)},yh.prototype={countsRef(e,n,t){const i=this,r=i.counts||(i.counts={}),o=qre(n);let s,a,l;return null!=o&&(e=i.scope,s=r[o]),s?t&&t.field&&Wre(e,s.agg.params,t):(l={groupby:e.fieldRef(n,"key"),pulse:Ve(i.output)},t&&t.field&&Wre(e,l,t),a=e.add(wre(l)),s=e.add(Ca({pulse:Ve(a)})),s={agg:a,ref:Ve(s)},null!=o&&(r[o]=s)),s.ref},tuplesRef(){return Ve(this.values)},extentRef(e,n){return J1(e,this,"extent","extent",n,!1)},domainRef(e,n){return J1(e,this,"domain","values",n,!1)},valuesRef(e,n,t){return J1(e,this,"vals","values",n,t||!0)},lookupRef(e,n){return J1(e,this,"lookup","tupleindex",n,!1)},indataRef(e,n){return J1(e,this,"indata","tupleindex",n,!0,!0)}};const MHe=`item.orient==="${Tm}"?-90:item.orient==="${Dm}"?90:0`;function OHe(e,n){const t={enter:{},update:{}};return Hi(t,{orient:e("orient"),anchor:e("anchor"),align:{signal:pL},angle:{signal:MHe},limit:e("limit"),frame:e("frame"),offset:e("offset")||0,padding:e("subtitlePadding")}),Em(t,n,Q1)}function vh(e){const n=Ca({},e);return n.metadata={source:!0},n}function Yre(e,n){return hUe({url:n.url?e.property(n.url):void 0,async:n.async?e.property(n.async):void 0,values:n.values?e.property(n.values):void 0,format:e.objectProperty(n.format)})}const Xre=e=>e===yd||e===xa,w2=(e,n,t)=>pi(e)?VHe(e.signal,n,t):e===Tm||e===xa?n:t,wi=(e,n,t)=>pi(e)?$He(e.signal,n,t):Xre(e)?n:t,Ea=(e,n,t)=>pi(e)?BHe(e.signal,n,t):Xre(e)?t:n,Qre=(e,n,t)=>pi(e)?zHe(e.signal,n,t):e===xa?{value:n}:{value:t},LHe=(e,n,t)=>pi(e)?UHe(e.signal,n,t):e===Dm?{value:n}:{value:t},$He=(e,n,t)=>Zre(`${e} === '${xa}' || ${e} === '${yd}'`,n,t),BHe=(e,n,t)=>Zre(`${e} !== '${xa}' && ${e} !== '${yd}'`,n,t),VHe=(e,n,t)=>vL(`${e} === '${Tm}' || ${e} === '${xa}'`,n,t),zHe=(e,n,t)=>vL(`${e} === '${xa}'`,n,t),UHe=(e,n,t)=>vL(`${e} === '${Dm}'`,n,t),Zre=(e,n,t)=>(n=null!=n?bi(n):n,t=null!=t?bi(t):t,Jre(n)&&Jre(t)?{signal:`${e} ? (${n=n?n.signal||ge(n.value):null}) : (${t=t?t.signal||ge(t.value):null})`}:[ut({test:e},n)].concat(t||[])),Jre=e=>null==e||1===Object.keys(e).length,vL=(e,n,t)=>({signal:`${e} ? (${Mm(n)}) : (${Mm(t)})`}),HHe=(e,n,t,i,r)=>({signal:(null!=i?`${e} === '${Tm}' ? (${Mm(i)}) : `:"")+(null!=t?`${e} === '${yd}' ? (${Mm(t)}) : `:"")+(null!=r?`${e} === '${Dm}' ? (${Mm(r)}) : `:"")+(null!=n?`${e} === '${xa}' ? (${Mm(n)}) : `:"")+"(null)"}),Mm=e=>pi(e)?e.signal:null==e?null:ge(e),jHe=(e,n)=>0===n?0:pi(e)?{signal:`(${e.signal}) * ${n}`}:{value:e*n},Am=(e,n)=>{const t=e.signal;return t&&t.endsWith("(null)")?{signal:t.slice(0,-6)+n.signal}:e};function km(e,n,t,i){let r;if(n&&$e(n,e))return n[e];if($e(t,e))return t[e];if(e.startsWith("title")){switch(e){case"titleColor":r="fill";break;case"titleFont":case"titleFontSize":case"titleFontWeight":r=e[5].toLowerCase()+e.slice(6)}return i[cL][r]}if(e.startsWith("label")){switch(e){case"labelColor":r="fill";break;case"labelFont":case"labelFontSize":r=e[5].toLowerCase()+e.slice(6)}return i[X1][r]}return null}function eoe(e){const n={};for(const t of e)if(t)for(const i in t)n[i]=1;return Object.keys(n)}function toe(e,n){return{scale:e.scale,range:n}}function bL(e,n,t,i,r){return{signal:'flush(range("'+e+'"), scale("'+e+'", datum.value), '+n+","+t+","+i+","+r+")"}}function JHe(e,n){const t=function qHe(e,n){var a,l,c,t=n.config,i=t.style,r=t.axis,o="band"===n.scaleType(e.scale)&&t.axisBand,s=e.orient;if(pi(s)){const d=eoe([t.axisX,t.axisY]),f=eoe([t.axisTop,t.axisBottom,t.axisLeft,t.axisRight]);for(c of(a={},d))a[c]=wi(s,km(c,t.axisX,r,i),km(c,t.axisY,r,i));for(c of(l={},f))l[c]=HHe(s.signal,km(c,t.axisTop,r,i),km(c,t.axisBottom,r,i),km(c,t.axisLeft,r,i),km(c,t.axisRight,r,i))}else a=s===xa||s===yd?t.axisX:t.axisY,l=t["axis"+s[0].toUpperCase()+s.slice(1)];return a||l||o?ut({},r,a,l,o):r}(e,n),i=e.encode||{},r=i.axis||{},o=r.name||void 0,s=r.interactive,a=r.style,l=go(e,t),c=function YUe(e){const n=e("tickBand");let i,r,t=e("tickOffset");return n?n.signal?(i={signal:`(${n.signal}) === 'extent' ? 1 : 0.5`},r={signal:`(${n.signal}) === 'extent'`},Ee(t)||(t={signal:`(${n.signal}) === 'extent' ? 0 : ${t}`})):"extent"===n?(i=1,r=!0,t=0):(i=.5,r=!1):(i=e("bandPosition"),r=e("tickExtra")),{extra:r,band:i,offset:t}}(l),u={scale:e.scale,ticks:!!l("ticks"),labels:!!l("labels"),grid:!!l("grid"),domain:!!l("domain"),title:null!=e.title},d=Ve(n.add(Ca({},[u]))),f=Ve(n.add(sUe({scale:n.scaleRef(e.scale),extra:n.property(c.extra),count:n.objectProperty(e.tickCount),values:n.objectProperty(e.values),minstep:n.property(e.tickMinStep),formatType:n.property(e.formatType),formatSpecifier:n.property(e.format)}))),h=[];let p;return u.grid&&h.push(function GHe(e,n,t,i,r){const o=go(e,n),s=e.orient,a=e.gridScale,l=w2(s,1,-1),c=function KHe(e,n){if(1!==n)if(Ee(e)){let t=e=ut({},e);for(;null!=t.mult;){if(!Ee(t.mult))return t.mult=pi(n)?{signal:`(${t.mult}) * (${n.signal})`}:t.mult*n,e;t=t.mult=ut({},t.mult)}t.mult=n}else e=pi(n)?{signal:`(${n.signal}) * (${e||0})`}:n*(e||0);return e}(e.offset,l);let u,d,f;const h={enter:u={opacity:Ot},update:f={opacity:Ps},exit:d={opacity:Ot}};Hi(h,{stroke:o("gridColor"),strokeCap:o("gridCap"),strokeDash:o("gridDash"),strokeDashOffset:o("gridDashOffset"),strokeOpacity:o("gridOpacity"),strokeWidth:o("gridWidth")});const p={scale:e.scale,field:Ns,band:r.band,extra:r.extra,offset:r.offset,round:o("tickRound")},g=wi(s,{signal:"height"},{signal:"width"}),m=a?{scale:a,range:0,mult:l,offset:c}:{value:0,offset:c},_=a?{scale:a,range:1,mult:l,offset:c}:ut(g,{mult:l,offset:c});return u.x=f.x=wi(s,p,m),u.y=f.y=Ea(s,p,m),u.x2=f.x2=Ea(s,_),u.y2=f.y2=wi(s,_),d.x=wi(s,p),d.y=Ea(s,p),ns({type:hL,role:Cze,key:Ns,from:i,encode:h},t)}(e,t,i.grid,f,c)),u.ticks&&(p=l("tickSize"),h.push(function YHe(e,n,t,i,r,o){const s=go(e,n),a=e.orient,l=w2(a,-1,1);let c,u,d;const f={enter:c={opacity:Ot},update:d={opacity:Ps},exit:u={opacity:Ot}};Hi(f,{stroke:s("tickColor"),strokeCap:s("tickCap"),strokeDash:s("tickDash"),strokeDashOffset:s("tickDashOffset"),strokeOpacity:s("tickOpacity"),strokeWidth:s("tickWidth")});const h=bi(r);h.mult=l;const p={scale:e.scale,field:Ns,band:o.band,extra:o.extra,offset:o.offset,round:s("tickRound")};return d.y=c.y=wi(a,Ot,p),d.y2=c.y2=wi(a,h),u.x=wi(a,p),d.x=c.x=Ea(a,Ot,p),d.x2=c.x2=Ea(a,h),u.y=Ea(a,p),ns({type:hL,role:Eze,key:Ns,from:i,encode:f},t)}(e,t,i.ticks,f,p,c))),u.labels&&(p=u.ticks?p:0,h.push(function XHe(e,n,t,i,r,o){const s=go(e,n),a=e.orient,l=e.scale,c=w2(a,-1,1),u=gh(s("labelFlush")),d=gh(s("labelFlushOffset")),f=s("labelAlign"),h=s("labelBaseline");let g,p=0===u||!!u;const m=bi(r);m.mult=c,m.offset=bi(s("labelPadding")||0),m.offset.mult=c;const _={scale:l,field:Ns,band:.5,offset:Pre(o.offset,s("labelOffset"))},y=wi(a,p?bL(l,u,'"left"','"right"','"center"'):{value:"center"},LHe(a,"left","right")),v=wi(a,Qre(a,"bottom","top"),p?bL(l,u,'"top"','"bottom"','"middle"'):{value:"middle"}),b=bL(l,u,`-(${d})`,d,0);p=p&&d;const w={opacity:Ot,x:wi(a,_,m),y:Ea(a,_,m)},x={enter:w,update:g={opacity:Ps,text:{field:lL},x:w.x,y:w.y,align:y,baseline:v},exit:{opacity:Ot,x:w.x,y:w.y}};Hi(x,{dx:!f&&p?wi(a,b):null,dy:!h&&p?Ea(a,b):null}),Hi(x,{angle:s("labelAngle"),fill:s("labelColor"),fillOpacity:s("labelOpacity"),font:s("labelFont"),fontSize:s("labelFontSize"),fontWeight:s("labelFontWeight"),fontStyle:s("labelFontStyle"),limit:s("labelLimit"),lineHeight:s("labelLineHeight")},{align:f,baseline:h});const C=s("labelBound");let S=s("labelOverlap");return S=S||C?{separation:s("labelSeparation"),method:S,order:"datum.index",bound:C?{scale:l,orient:a,tolerance:C}:null}:void 0,g.align!==y&&(g.align=Am(g.align,y)),g.baseline!==v&&(g.baseline=Am(g.baseline,v)),ns({type:_h,role:xze,style:X1,key:Ns,from:i,encode:x,overlap:S},t)}(e,t,i.labels,f,p,c))),u.domain&&h.push(function WHe(e,n,t,i){const r=go(e,n),o=e.orient;let s,a;const l={enter:s={opacity:Ot},update:a={opacity:Ps},exit:{opacity:Ot}};Hi(l,{stroke:r("domainColor"),strokeCap:r("domainCap"),strokeDash:r("domainDash"),strokeDashOffset:r("domainDashOffset"),strokeWidth:r("domainWidth"),strokeOpacity:r("domainOpacity")});const c=toe(e,0),u=toe(e,1);return s.x=a.x=wi(o,c,Ot),s.x2=a.x2=wi(o,u),s.y=a.y=Ea(o,c,Ot),s.y2=a.y2=Ea(o,u),ns({type:hL,role:wze,from:i,encode:l},t)}(e,t,i.domain,d)),u.title&&h.push(function QHe(e,n,t,i){const r=go(e,n),o=e.orient,s=w2(o,-1,1);let a,l;const c={enter:a={opacity:Ot,anchor:bi(r("titleAnchor",null)),align:{signal:pL}},update:l=ut({},a,{opacity:Ps,text:bi(e.title)}),exit:{opacity:Ot}},u={signal:`lerp(range("${e.scale}"), ${_2(0,1,.5)})`};return l.x=wi(o,u),l.y=Ea(o,u),a.angle=wi(o,Ot,jHe(s,90)),a.baseline=wi(o,Qre(o,yd,xa),{value:yd}),l.angle=a.angle,l.baseline=a.baseline,Hi(c,{fill:r("titleColor"),fillOpacity:r("titleOpacity"),font:r("titleFont"),fontSize:r("titleFontSize"),fontStyle:r("titleFontStyle"),fontWeight:r("titleFontWeight"),limit:r("titleLimit"),lineHeight:r("titleLineHeight")},{align:r("titleAlign"),angle:r("titleAngle"),baseline:r("titleBaseline")}),function ZHe(e,n,t,i){const r=(a,l)=>null!=a?(t.update[l]=Am(bi(a),t.update[l]),!1):!Sm(l,i),o=r(e("titleX"),"x"),s=r(e("titleY"),"y");t.enter.auto=s===o?bi(s):wi(n,bi(s),bi(o))}(r,o,c,t),c.update.align=Am(c.update.align,a.align),c.update.angle=Am(c.update.angle,a.angle),c.update.baseline=Am(c.update.baseline,a.baseline),ns({type:_h,role:Sze,style:cL,from:i,encode:c},t)}(e,t,i.title,d)),b2(Z1({role:bze,from:d,encode:Em(eje(l,e),r,Q1),marks:h,aria:l("aria"),description:l("description"),zindex:l("zindex"),name:o,interactive:s,style:a}),n)}function eje(e,n){const t={enter:{},update:{}};return Hi(t,{orient:e("orient"),offset:e("offset")||0,position:wa(n.position,0),titlePadding:e("titlePadding"),minExtent:e("minExtent"),maxExtent:e("maxExtent"),range:{signal:`abs(span(range("${n.scale}")))`},translate:e("translate"),format:n.format,formatType:n.formatType}),t}function noe(e,n,t){const i=Ce(e.signals),r=Ce(e.scales);return t||i.forEach(o=>yre(o,n)),Ce(e.projections).forEach(o=>function $Ue(e,n){const t=n.config.projection||{},i={};for(const r in e)"name"!==r&&(i[r]=sL(e[r],r,n));for(const r in t)null==i[r]&&(i[r]=sL(t[r],r,n));n.addProjection(e.name,i)}(o,n)),r.forEach(o=>function TUe(e,n){const t=e.type||"linear";TQ(t)||re("Unrecognized scale type: "+ge(t)),n.addScale(e.name,{type:t,domain:void 0})}(o,n)),Ce(e.data).forEach(o=>function NHe(e,n){const t=[];e.transform&&e.transform.forEach(i=>{t.push(_L(i,n))}),e.on&&e.on.forEach(i=>{Gre(i,n,e.name)}),n.addDataPipeline(e.name,function PHe(e,n,t){const i=[];let a,l,c,u,d,r=null,o=!1,s=!1;for(e.values?pi(e.values)||f2(e.format)?(i.push(Yre(n,e)),i.push(r=vh())):i.push(r=vh({$ingest:e.values,$format:e.format})):e.url?f2(e.url)||f2(e.format)?(i.push(Yre(n,e)),i.push(r=vh())):i.push(r=vh({$request:e.url,$format:e.format})):e.source&&(r=a=Ce(e.source).map(f=>Ve(n.getData(f).output)),i.push(null)),l=0,c=t.length;l<c;++l)u=t[l],d=u.metadata,!r&&!d.source&&i.push(r=vh()),i.push(u),d.generates&&(s=!0),d.modifies&&!s&&(o=!0),d.source?r=u:d.changes&&(r=null);return a&&(c=a.length-1,i[0]=wUe({derive:o,pulse:c?a:a[0]}),(o||c)&&i.splice(1,0,vh())),r||i.push(vh()),i.push(mh({})),i}(e,n,t))}(o,n)),r.forEach(o=>DUe(o,n)),(t||i).forEach(o=>function oUe(e,n){const t=n.getSignal(e.name);let i=e.update;e.init&&(i?re("Signals can not include both init and update expressions."):(i=e.init,t.initonly=!0)),i&&(i=Al(i,n),t.update=i.$expr,t.params=i.$params),e.on&&e.on.forEach(r=>function nUe(e,n,t){const i=e.encode,r={target:t};let o=e.events,s=e.update,a=[];o||re("Signal update missing events specification."),xe(o)&&(o=_d(o,n.isSubscope()?iL:rL)),o=Ce(o).filter(l=>l.signal||l.scale?(a.push(l),0):1),a.length>1&&(a=[rUe(a)]),o.length&&a.push(o.length>1?{merge:o}:o[0]),null!=i&&(s&&re("Signal encode and update are mutually exclusive."),s="encode(item(),"+ge(i)+")"),r.update=xe(s)?Al(s,n):null!=s.expr?Al(s.expr,n):null!=s.value?s.value:null!=s.signal?{$expr:tUe,$params:{$value:n.signalRef(s.signal)}}:re("Invalid signal update specification."),e.force&&(r.options={force:!0}),a.forEach(l=>n.addUpdate(ut(function iUe(e,n){return{source:e.signal?n.signalRef(e.signal):e.scale?n.scaleRef(e.scale):Y1(e,n)}}(l,n),r)))}(r,n,t.id))}(o,n)),Ce(e.axes).forEach(o=>JHe(o,n)),Ce(e.marks).forEach(o=>b2(o,n)),Ce(e.legends).forEach(o=>function xHe(e,n){const t=n.config.legend,i=e.encode||{},r=go(e,t),o=i.legend||{},s=o.name||void 0,a=o.interactive,l=o.style,c={};let d,f,h,u=0;fL.forEach(v=>e[v]?(c[v]=e[v],u=u||e[v]):0),u||re("Missing valid scale for legend.");const p=function EHe(e,n){let t=e.type||Rre;return!e.type&&1===function SHe(e){return fL.reduce((n,t)=>n+(e[t]?1:0),0)}(e)&&(e.fill||e.stroke)&&(t=jR(n)?g2:qR(n)?uL:Rre),t!==g2?t:qR(n)?uL:g2}(e,n.scaleType(u)),g={title:null!=e.title,scales:c,type:p,vgrad:"symbol"!==p&&r.isVertical()},m=Ve(n.add(Ca(null,[g]))),y=Ve(n.add(fUe(f={type:p,scale:n.scaleRef(u),count:n.objectProperty(r("tickCount")),limit:n.property(r("symbolLimit")),values:n.objectProperty(e.values),minstep:n.property(e.tickMinStep),formatType:n.property(e.formatType),formatSpecifier:n.property(e.format)})));return p===g2?(h=[XUe(e,u,t,i.gradient),Lre(e,t,i.labels,y)],f.count=f.count||n.signalRef(`max(2,2*floor((${gh(r.gradientLength())})/100))`)):p===uL?h=[QUe(e,u,t,i.gradient,y),Lre(e,t,i.labels,y)]:(d=function tHe(e,n){const t=go(e,n);return{align:t("gridAlign"),columns:t.entryColumns(),center:{row:!0,column:!1},padding:{row:t("rowPadding"),column:t("columnPadding")}}}(e,t),h=[eHe(e,t,i,y,gh(d.columns))],f.size=function DHe(e,n,t){const i=gh(Kre("size",e,t)),r=gh(Kre("strokeWidth",e,t)),o=gh(function IHe(e,n,t){return Nre("fontSize",e)||function KUe(e,n,t){const i=n.config.style[t];return i&&i[e]}("fontSize",n,t)}(t[1].encode,n,X1));return Al(`max(ceil(sqrt(${i})+${r}),${o})`,n)}(e,n,h[0].marks)),h=[Z1({role:Ize,from:m,encode:{enter:{x:{value:0},y:{value:0}}},marks:h,layout:d,interactive:a})],g.title&&h.push(function cHe(e,n,t,i){const r=go(e,n),o={enter:{opacity:Ot},update:{opacity:Ps,x:{field:{group:"padding"}},y:{field:{group:"padding"}}},exit:{opacity:Ot}};return Hi(o,{orient:r("titleOrient"),_anchor:r("titleAnchor"),anchor:{signal:sHe},angle:{signal:aHe},align:{signal:oHe},baseline:{signal:lHe},text:e.title,fill:r("titleColor"),fillOpacity:r("titleOpacity"),font:r("titleFont"),fontSize:r("titleFontSize"),fontStyle:r("titleFontStyle"),fontWeight:r("titleFontWeight"),limit:r("titleLimit"),lineHeight:r("titleLineHeight")},{align:r("titleAlign"),baseline:r("titleBaseline")}),ns({type:_h,role:kze,style:cL,from:i,encode:o},t)}(e,t,i.title,m)),b2(Z1({role:Tze,from:m,encode:Em(THe(r,e,t),o,Q1),marks:h,aria:r("aria"),description:r("description"),zindex:r("zindex"),name:s,interactive:a,style:l}),n)}(o,n)),e.title&&function AHe(e,n){const t=go(e=xe(e)?{text:e}:e,n.config.title),i=e.encode||{},r=i.group||{},o=r.name||void 0,s=r.interactive,a=r.style,l=[],u=Ve(n.add(Ca(null,[{}])));return l.push(function RHe(e,n,t,i){const r={value:0},s={enter:{opacity:r},update:{opacity:{value:1}},exit:{opacity:r}};return Hi(s,{text:e.text,align:{signal:"item.mark.group.align"},angle:{signal:"item.mark.group.angle"},limit:{signal:"item.mark.group.limit"},baseline:"top",dx:n("dx"),dy:n("dy"),fill:n("color"),font:n("font"),fontSize:n("fontSize"),fontStyle:n("fontStyle"),fontWeight:n("fontWeight"),lineHeight:n("lineHeight")},{align:n("align"),angle:n("angle"),baseline:n("baseline")}),ns({type:_h,role:Rze,style:qUe,from:i,encode:s},t)}(e,t,function kHe(e){const n=e.encode;return n&&n.title||ut({name:e.name,interactive:e.interactive,style:e.style},n)}(e),u)),e.subtitle&&l.push(function FHe(e,n,t,i){const r={value:0},s={enter:{opacity:r},update:{opacity:{value:1}},exit:{opacity:r}};return Hi(s,{text:e.subtitle,align:{signal:"item.mark.group.align"},angle:{signal:"item.mark.group.angle"},limit:{signal:"item.mark.group.limit"},baseline:"top",dx:n("dx"),dy:n("dy"),fill:n("subtitleColor"),font:n("subtitleFont"),fontSize:n("subtitleFontSize"),fontStyle:n("subtitleFontStyle"),fontWeight:n("subtitleFontWeight"),lineHeight:n("subtitleLineHeight")},{align:n("align"),angle:n("angle"),baseline:n("baseline")}),ns({type:_h,role:Fze,style:WUe,from:i,encode:s},t)}(e,t,i.subtitle,u)),b2(Z1({role:Oze,from:u,encode:OHe(t,r),marks:l,aria:t("aria"),description:t("description"),zindex:t("zindex"),name:o,interactive:s,style:a}),n)}(e.title,n),n.parseLambdas(),n}const tje=e=>Em({enter:{x:{value:0},y:{value:0}},update:{width:{signal:"width"},height:{signal:"height"}}},e);function ev(e,n){return n&&n.signal?{name:e,update:n.signal}:{name:e,value:n}}function ioe(e,n){this.config=e||{},this.options=n||{},this.bindings=[],this.field={},this.signals={},this.lambdas={},this.scales={},this.events={},this.data={},this.streams=[],this.updates=[],this.operators=[],this.eventConfig=null,this.locale=null,this._id=0,this._subid=0,this._nextsub=[0],this._parent=[],this._encode=[],this._lookup=[],this._markpath=[]}function roe(e){this.config=e.config,this.options=e.options,this.legends=e.legends,this.field=Object.create(e.field),this.signals=Object.create(e.signals),this.lambdas=Object.create(e.lambdas),this.scales=Object.create(e.scales),this.events=Object.create(e.events),this.data=Object.create(e.data),this.streams=[],this.updates=[],this.operators=[],this._id=0,this._subid=++e._nextsub[0],this._nextsub=e._nextsub,this._parent=e._parent.slice(),this._encode=e._encode.slice(),this._lookup=e._lookup.slice(),this._markpath=e._markpath}function wL(e){return(oe(e)?rje:oje)(e)}function rje(e){const n=e.length;let t="[";for(let i=0;i<n;++i){const r=e[i];t+=(i>0?",":"")+(Ee(r)?r.signal||wL(r):ge(r))}return t+"]"}function oje(e){let i,r,n="{",t=0;for(i in e)r=e[i],n+=(++t>1?",":"")+ge(i)+":"+(Ee(r)?r.signal||wL(r):ge(r));return n+"}"}function aje(e,n,t){return Ee(e)||re("Input Vega specification must be an object."),function nje(e,n){const t=n.config,i=Ve(n.root=n.add(u2())),r=function ije(e,n){const t=s=>wa(e[s],n[s]),i=[ev("background",t("background")),ev("autosize",_ze(t("autosize"))),ev("padding",vze(t("padding"))),ev("width",t("width")||0),ev("height",t("height")||0)],r=i.reduce((s,a)=>(s[a.name]=a,s),{}),o={};return Ce(e.signals).forEach(s=>{$e(r,s.name)?s=ut(r[s.name],s):i.push(s),o[s.name]=s}),Ce(n.signals).forEach(s=>{!$e(o,s.name)&&!$e(r,s.name)&&i.push(s)}),i}(e,t);r.forEach(c=>yre(c,n)),n.description=e.description||t.description,n.eventConfig=t.events,n.legends=n.objectProperty(t.legend&&t.legend.layout),n.locale=t.locale;const o=n.add(Ca()),s=n.add(Ere(mre(tje(e.encode),m2,ZP,e.style,n,{pulse:Ve(o)}))),a=n.add(Dre({layout:n.objectProperty(e.layout),legends:n.legends,autosize:n.signalRef("autosize"),mark:i,pulse:Ve(s)}));n.operators.pop(),n.pushState(Ve(s),Ve(a),null),noe(e,n,r),n.operators.push(a);let l=n.add(Cre({mark:i,pulse:Ve(a)}));return l=n.add(Tre({pulse:Ve(l)})),l=n.add(mh({pulse:Ve(l)})),n.addData("root",new yh(n,o,o,l)),n}(e,new ioe(n=wg(function sje(){const e="sans-serif",i="#4c78a8",r="#000",o="#888",s="#ddd";return{description:"Vega visualization",padding:0,autosize:"pad",background:null,events:{defaults:{allow:["wheel"]}},group:null,mark:null,arc:{fill:i},area:{fill:i},image:null,line:{stroke:i,strokeWidth:2},path:{stroke:i},rect:{fill:i},rule:{stroke:r},shape:{stroke:i},symbol:{fill:i,size:64},text:{fill:r,font:e,fontSize:11},trail:{fill:i,size:2},style:{"guide-label":{fill:r,font:e,fontSize:10},"guide-title":{fill:r,font:e,fontSize:11,fontWeight:"bold"},"group-title":{fill:r,font:e,fontSize:13,fontWeight:"bold"},"group-subtitle":{fill:r,font:e,fontSize:12},point:{size:30,strokeWidth:2,shape:"circle"},circle:{size:30,strokeWidth:2},square:{size:30,strokeWidth:2,shape:"square"},cell:{fill:"transparent",stroke:s},view:{fill:"transparent"}},title:{orient:"top",anchor:"middle",offset:4,subtitlePadding:3},axis:{minExtent:0,maxExtent:200,bandPosition:.5,domain:!0,domainWidth:1,domainColor:o,grid:!1,gridWidth:1,gridColor:s,labels:!0,labelAngle:0,labelLimit:180,labelOffset:0,labelPadding:2,ticks:!0,tickColor:o,tickOffset:0,tickRound:!0,tickSize:5,tickWidth:1,titlePadding:4},axisBand:{tickOffset:-.5},projection:{type:"mercator"},legend:{orient:"right",padding:0,gridAlign:"each",columnPadding:10,rowPadding:2,symbolDirection:"vertical",gradientDirection:"vertical",gradientLength:200,gradientThickness:16,gradientStrokeColor:s,gradientStrokeWidth:0,gradientLabelOffset:2,labelAlign:"left",labelBaseline:"middle",labelLimit:160,labelOffset:4,labelOverlap:!0,symbolLimit:30,symbolType:"circle",symbolSize:100,symbolOffset:0,symbolStrokeWidth:1.5,symbolBaseFillColor:"transparent",symbolBaseStrokeColor:o,titleLimit:180,titleOrient:"top",titlePadding:5,layout:{offset:18,direction:"horizontal",left:{direction:"vertical"},right:{direction:"vertical"}}},range:{category:{scheme:"tableau10"},ordinal:{scheme:"blues"},heatmap:{scheme:"yellowgreenblue"},ramp:{scheme:"blues"},diverging:{scheme:"blueorange",extent:[1,0]},symbol:["circle","square","triangle-up","cross","diamond","triangle-right","triangle-down","triangle-left"]}}}(),n,e.config),t)).toRuntime()}ioe.prototype=roe.prototype={parse(e){return noe(e,this)},fork(){return new roe(this)},isSubscope(){return this._subid>0},toRuntime(){return this.finish(),{description:this.description,operators:this.operators,streams:this.streams,updates:this.updates,bindings:this.bindings,eventConfig:this.eventConfig,locale:this.locale}},id(){return(this._subid?this._subid+":":0)+this._id++},add(e){return this.operators.push(e),e.id=this.id(),e.refs&&(e.refs.forEach(n=>{n.$ref=e.id}),e.refs=null),e},proxy(e){const n=e instanceof tL?Ve(e):e;return this.add(bUe({value:n}))},addStream(e){return this.streams.push(e),e.id=this.id(),e},addUpdate(e){return this.updates.push(e),e},finish(){let e,n;for(e in this.root&&(this.root.root=!0),this.signals)this.signals[e].signal=e;for(e in this.scales)this.scales[e].scale=e;function t(i,r,o){let s,a;i&&(s=i.data||(i.data={}),a=s[r]||(s[r]=[]),a.push(o))}for(e in this.data){n=this.data[e],t(n.input,e,"input"),t(n.output,e,"output"),t(n.values,e,"values");for(const i in n.index)t(n.index[i],e,"index:"+i)}return this},pushState(e,n,t){this._encode.push(Ve(this.add(mh({pulse:e})))),this._parent.push(n),this._lookup.push(t?Ve(this.proxy(t)):null),this._markpath.push(-1)},popState(){this._encode.pop(),this._parent.pop(),this._lookup.pop(),this._markpath.pop()},parent(){return Tt(this._parent)},encode(){return Tt(this._encode)},lookup(){return Tt(this._lookup)},markpath(){const e=this._markpath;return++e[e.length-1]},fieldRef(e,n){if(xe(e))return K1(e,n);e.signal||re("Unsupported field reference: "+ge(e));const t=e.signal;let i=this.field[t];if(!i){const r={name:this.signalRef(t)};n&&(r.as=n),this.field[t]=i=Ve(this.add(uUe(r)))}return i},compareRef(e){let n=!1;const t=o=>pi(o)?(n=!0,this.signalRef(o.signal)):function Yze(e){return e&&e.expr}(o)?(n=!0,this.exprRef(o.expr)):o,i=Ce(e.field).map(t),r=Ce(e.order).map(t);return n?Ve(this.add(xre({fields:i,orders:r}))):vre(i,r)},keyRef(e,n){let t=!1;const r=this.signals;return e=Ce(e).map(o=>pi(o)?(t=!0,Ve(r[o.signal])):o),t?Ve(this.add(dUe({fields:e,flat:n}))):function qze(e,n){const t={$key:e};return n&&(t.$flat=!0),t}(e,n)},sortRef(e){if(!e)return e;const n=d2(e.op,e.field),t=e.order||"ascending";return t.signal?Ve(this.add(xre({fields:n,orders:this.signalRef(t.signal)}))):vre(n,t)},event(e,n){const t=e+":"+n;if(!this.events[t]){const i=this.id();this.streams.push({id:i,source:e,type:n}),this.events[t]=i}return this.events[t]},hasOwnSignal(e){return $e(this.signals,e)},addSignal(e,n){this.hasOwnSignal(e)&&re("Duplicate signal name: "+ge(e));const t=n instanceof tL?n:this.add(u2(n));return this.signals[e]=t},getSignal(e){return this.signals[e]||re("Unrecognized signal name: "+ge(e)),this.signals[e]},signalRef(e){return this.signals[e]?Ve(this.signals[e]):($e(this.lambdas,e)||(this.lambdas[e]=this.add(u2(null))),Ve(this.lambdas[e]))},parseLambdas(){const e=Object.keys(this.lambdas);for(let n=0,t=e.length;n<t;++n){const i=e[n],r=Al(i,this),o=this.lambdas[i];o.params=r.$params,o.update=r.$expr}},property(e){return e&&e.signal?this.signalRef(e.signal):e},objectProperty(e){return e&&Ee(e)?this.signalRef(e.signal||wL(e)):e},exprRef(e,n){const t={expr:Al(e,this)};return n&&(t.expr.$name=n),Ve(this.add(lUe(t)))},addBinding(e,n){this.bindings||re("Nested signals do not support binding: "+ge(e)),this.bindings.push(ut({signal:e},n))},addScaleProj(e,n){$e(this.scales,e)&&re("Duplicate scale or projection name: "+ge(e)),this.scales[e]=this.add(n)},addScale(e,n){this.addScaleProj(e,CUe(n))},addProjection(e,n){this.addScaleProj(e,vUe(n))},getScale(e){return this.scales[e]||re("Unrecognized scale name: "+ge(e)),this.scales[e]},scaleRef(e){return Ve(this.getScale(e))},scaleType(e){return this.getScale(e).params.type},projectionRef(e){return this.scaleRef(e)},projectionType(e){return this.scaleType(e)},addData(e,n){return $e(this.data,e)&&re("Duplicate data set name: "+ge(e)),this.data[e]=n},getData(e){return this.data[e]||re("Undefined data set name: "+ge(e)),this.data[e]},addDataPipeline(e,n){return $e(this.data,e)&&re("Duplicate data set name: "+ge(e)),this.addData(e,yh.fromEntries(this,n))}};var lje="5.26.1";ut($g,Zc,Jc,ip,Oi,jd,qd,f0,Co,Kl,Wd,Gd);var uje={NaN:NaN,E:Math.E,LN2:Math.LN2,LN10:Math.LN10,LOG2E:Math.LOG2E,LOG10E:Math.LOG10E,PI:Math.PI,SQRT1_2:Math.SQRT1_2,SQRT2:Math.SQRT2,MIN_VALUE:Number.MIN_VALUE,MAX_VALUE:Number.MAX_VALUE},dje={"*":(e,n)=>e*n,"+":(e,n)=>e+n,"-":(e,n)=>e-n,"/":(e,n)=>e/n,"%":(e,n)=>e%n,">":(e,n)=>e>n,"<":(e,n)=>e<n,"<=":(e,n)=>e<=n,">=":(e,n)=>e>=n,"==":(e,n)=>e==n,"!=":(e,n)=>e!=n,"===":(e,n)=>e===n,"!==":(e,n)=>e!==n,"&":(e,n)=>e&n,"|":(e,n)=>e|n,"^":(e,n)=>e^n,"<<":(e,n)=>e<<n,">>":(e,n)=>e>>n,">>>":(e,n)=>e>>>n},fje={"+":e=>+e,"-":e=>-e,"~":e=>~e,"!":e=>!e};const hje=Array.prototype.slice,bh=(e,n,t)=>{const i=t?t(n[0]):n[0];return i[e].apply(i,hje.call(n,1))};var gje={isNaN:Number.isNaN,isFinite:Number.isFinite,abs:Math.abs,acos:Math.acos,asin:Math.asin,atan:Math.atan,atan2:Math.atan2,ceil:Math.ceil,cos:Math.cos,exp:Math.exp,floor:Math.floor,log:Math.log,max:Math.max,min:Math.min,pow:Math.pow,random:Math.random,round:Math.round,sin:Math.sin,sqrt:Math.sqrt,tan:Math.tan,clamp:(e,n,t)=>Math.max(n,Math.min(t,e)),now:Date.now,utc:Date.UTC,datetime:(e,n,t,i,r,o,s)=>new Date(e,n||0,t??1,i||0,r||0,o||0,s||0),date:e=>new Date(e).getDate(),day:e=>new Date(e).getDay(),year:e=>new Date(e).getFullYear(),month:e=>new Date(e).getMonth(),hours:e=>new Date(e).getHours(),minutes:e=>new Date(e).getMinutes(),seconds:e=>new Date(e).getSeconds(),milliseconds:e=>new Date(e).getMilliseconds(),time:e=>new Date(e).getTime(),timezoneoffset:e=>new Date(e).getTimezoneOffset(),utcdate:e=>new Date(e).getUTCDate(),utcday:e=>new Date(e).getUTCDay(),utcyear:e=>new Date(e).getUTCFullYear(),utcmonth:e=>new Date(e).getUTCMonth(),utchours:e=>new Date(e).getUTCHours(),utcminutes:e=>new Date(e).getUTCMinutes(),utcseconds:e=>new Date(e).getUTCSeconds(),utcmilliseconds:e=>new Date(e).getUTCMilliseconds(),length:e=>e.length,join:function(){return bh("join",arguments)},indexof:function(){return bh("indexOf",arguments)},lastindexof:function(){return bh("lastIndexOf",arguments)},slice:function(){return bh("slice",arguments)},reverse:e=>e.slice().reverse(),parseFloat,parseInt,upper:e=>String(e).toUpperCase(),lower:e=>String(e).toLowerCase(),substring:function(){return bh("substring",arguments,String)},split:function(){return bh("split",arguments,String)},replace:function(){return bh("replace",arguments,String)},trim:e=>String(e).trim(),regexp:RegExp,test:(e,n)=>RegExp(e).test(n)};const mje=["view","item","group","xy","x","y"],CL=new Set([Function,eval,setTimeout,setInterval]);"function"==typeof setImmediate&&CL.add(setImmediate);const _je={Literal:(e,n)=>n.value,Identifier:(e,n)=>{const t=n.name;return e.memberDepth>0?t:"datum"===t?e.datum:"event"===t?e.event:"item"===t?e.item:uje[t]||e.params["$"+t]},MemberExpression:(e,n)=>{const t=!n.computed,i=e(n.object);t&&(e.memberDepth+=1);const r=e(n.property);if(t&&(e.memberDepth-=1),!CL.has(i[r]))return i[r];console.error(`Prevented interpretation of member "${r}" which could lead to insecure code execution`)},CallExpression:(e,n)=>{const t=n.arguments;let i=n.callee.name;return i.startsWith("_")&&(i=i.slice(1)),"if"===i?e(t[0])?e(t[1]):e(t[2]):(e.fn[i]||gje[i]).apply(e.fn,t.map(e))},ArrayExpression:(e,n)=>n.elements.map(e),BinaryExpression:(e,n)=>dje[n.operator](e(n.left),e(n.right)),UnaryExpression:(e,n)=>fje[n.operator](e(n.argument)),ConditionalExpression:(e,n)=>e(n.test)?e(n.consequent):e(n.alternate),LogicalExpression:(e,n)=>"&&"===n.operator?e(n.left)&&e(n.right):e(n.left)||e(n.right),ObjectExpression:(e,n)=>n.properties.reduce((t,i)=>{e.memberDepth+=1;const r=e(i.key);return e.memberDepth-=1,CL.has(e(i.value))?console.error(`Prevented interpretation of property "${r}" which could lead to insecure code execution`):t[r]=e(i.value),t},{})};function tv(e,n,t,i,r,o){const s=a=>_je[a.type](s,a);return s.memberDepth=0,s.fn=Object.create(n),s.params=t,s.datum=i,s.event=r,s.item=o,mje.forEach(a=>s.fn[a]=function(){return r.vega[a](...arguments)}),s(e)}var yje={operator(e,n){const t=n.ast,i=e.functions;return r=>tv(t,i,r)},parameter(e,n){const t=n.ast,i=e.functions;return(r,o)=>tv(t,i,o,r)},event(e,n){const t=n.ast,i=e.functions;return r=>tv(t,i,void 0,void 0,r)},handler(e,n){const t=n.ast,i=e.functions;return(r,o)=>tv(t,i,r,o.item&&o.item.datum,o)},encode(e,n){const{marktype:t,channels:i}=n,r=e.functions,o="group"===t||"image"===t||"rect"===t;return(s,a)=>{const l=s.datum;let u,c=0;for(const d in i)u=tv(i[d].ast,r,a,l,void 0,s),s[d]!==u&&(s[d]=u,c=1);return"rule"!==t&&function cje(e,n,t){let i;n.x2&&(n.x?(t&&e.x>e.x2&&(i=e.x,e.x=e.x2,e.x2=i),e.width=e.x2-e.x):e.x=e.x2-(e.width||0)),n.xc&&(e.x=e.xc-(e.width||0)/2),n.y2&&(n.y?(t&&e.y>e.y2&&(i=e.y,e.y=e.y2,e.y2=i),e.height=e.y2-e.y):e.y=e.y2-(e.height||0)),n.yc&&(e.y=e.yc-(e.height||0)/2)}(s,i,o),c}}};function xL(e){return!!e.or}function EL(e){return!!e.and}function SL(e){return!!e.not}function C2(e,n){if(SL(e))C2(e.not,n);else if(EL(e))for(const t of e.and)C2(t,n);else if(xL(e))for(const t of e.or)C2(t,n);else n(e)}function Om(e,n){return SL(e)?{not:Om(e.not,n)}:EL(e)?{and:e.and.map(t=>Om(t,n))}:xL(e)?{or:e.or.map(t=>Om(t,n))}:n(e)}const tt=structuredClone;function ooe(e){throw new Error(e)}function Rm(e,n){const t={};for(const i of n)$e(e,i)&&(t[i]=e[i]);return t}function mo(e,n){const t={...e};for(const i of n)delete t[i];return t}function Et(e){if(Ft(e))return e;const n=xe(e)?e:ln(e);if(n.length<250)return n;let t=0;for(let i=0;i<n.length;i++)t=(t<<5)-t+n.charCodeAt(i),t&=t;return t}function TL(e){return!1===e||null===e}function St(e,n){return e.includes(n)}function wh(e,n){let t=0;for(const[i,r]of e.entries())if(n(r,i,t++))return!0;return!1}function DL(e,n){let t=0;for(const[i,r]of e.entries())if(!n(r,i,t++))return!1;return!0}function soe(e,...n){for(const t of n)bje(e,t??{});return e}function bje(e,n){for(const t of ce(n))Cg(e,t,n[t],!0)}function kl(e,n){const t=[],i={};let r;for(const o of e)r=n(o),!(r in i)&&(i[r]=1,t.push(o));return t}function wje(e,n){const t=ce(e),i=ce(n);if(t.length!==i.length)return!1;for(const r of t)if(e[r]!==n[r])return!1;return!0}function aoe(e,n){if(e.size!==n.size)return!1;for(const t of e)if(!n.has(t))return!1;return!0}function IL(e,n){for(const t of e)if(n.has(t))return!0;return!1}function ML(e){const n=new Set;for(const t of e){const r=sl(t).map((s,a)=>0===a?s:`[${s}]`),o=r.map((s,a)=>r.slice(0,a+1).join(""));for(const s of o)n.add(s)}return n}function AL(e,n){return void 0===e||void 0===n||IL(ML(e),ML(n))}function an(e){return 0===ce(e).length}Set.prototype.toJSON=function(){return`Set(${[...this].map(e=>ln(e)).join(",")})`};const ce=Object.keys,ji=Object.values,vd=Object.entries;function nv(e){return!0===e||!1===e}function In(e){const n=e.replace(/\W/g,"_");return(e.match(/^\d+/)?"_":"")+n}function iv(e,n){return SL(e)?`!(${iv(e.not,n)})`:EL(e)?`(${e.and.map(t=>iv(t,n)).join(") && (")})`:xL(e)?`(${e.or.map(t=>iv(t,n)).join(") || (")})`:n(e)}function x2(e,n){if(0===n.length)return!0;const t=n.shift();return t in e&&x2(e[t],n)&&delete e[t],an(e)}function rv(e){return e.charAt(0).toUpperCase()+e.substr(1)}function kL(e,n="datum"){const t=sl(e),i=[];for(let r=1;r<=t.length;r++){const o=`[${t.slice(0,r).map(ge).join("][")}]`;i.push(`${n}${o}`)}return i.join(" && ")}function loe(e,n="datum"){return`${n}[${ge(sl(e).join("."))}]`}function Cje(e){return e.replace(/(\[|\]|\.|'|")/g,"\\$1")}function Ls(e){return`${sl(e).map(Cje).join("\\.")}`}function Ch(e,n,t){return e.replace(new RegExp(n.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&"),"g"),t)}function OL(e){return`${sl(e).join(".")}`}function Fm(e){return e?sl(e).length:0}function Xn(...e){for(const n of e)if(void 0!==n)return n}let coe=42;function uoe(e){const n=++coe;return e?String(e)+n:n}function xje(){coe=42}function doe(e){return foe(e)?e:`__${e}`}function foe(e){return e.startsWith("__")}function ov(e){if(void 0!==e)return(e%360+360)%360}function E2(e){return!!Ft(e)||!isNaN(e)&&!isNaN(parseFloat(e))}const hoe=Object.getPrototypeOf(structuredClone({}));function is(e,n){if(e===n)return!0;if(e&&n&&"object"==typeof e&&"object"==typeof n){if(e.constructor.name!==n.constructor.name)return!1;let t,i;if(Array.isArray(e)){if(t=e.length,t!=n.length)return!1;for(i=t;0!=i--;)if(!is(e[i],n[i]))return!1;return!0}if(e instanceof Map&&n instanceof Map){if(e.size!==n.size)return!1;for(i of e.entries())if(!n.has(i[0]))return!1;for(i of e.entries())if(!is(i[1],n.get(i[0])))return!1;return!0}if(e instanceof Set&&n instanceof Set){if(e.size!==n.size)return!1;for(i of e.entries())if(!n.has(i[0]))return!1;return!0}if(ArrayBuffer.isView(e)&&ArrayBuffer.isView(n)){if(t=e.length,t!=n.length)return!1;for(i=t;0!=i--;)if(e[i]!==n[i])return!1;return!0}if(e.constructor===RegExp)return e.source===n.source&&e.flags===n.flags;if(e.valueOf!==Object.prototype.valueOf&&e.valueOf!==hoe.valueOf)return e.valueOf()===n.valueOf();if(e.toString!==Object.prototype.toString&&e.toString!==hoe.toString)return e.toString()===n.toString();const r=Object.keys(e);if(t=r.length,t!==Object.keys(n).length)return!1;for(i=t;0!=i--;)if(!Object.prototype.hasOwnProperty.call(n,r[i]))return!1;for(i=t;0!=i--;){const o=r[i];if(!is(e[o],n[o]))return!1}return!0}return e!=e&&n!=n}function ln(e){const n=[];return function t(i){if(i&&i.toJSON&&"function"==typeof i.toJSON&&(i=i.toJSON()),void 0===i)return;if("number"==typeof i)return isFinite(i)?""+i:"null";if("object"!=typeof i)return JSON.stringify(i);let r,o;if(Array.isArray(i)){for(o="[",r=0;r<i.length;r++)r&&(o+=","),o+=t(i[r])||"null";return o+"]"}if(null===i)return"null";if(n.includes(i))throw new TypeError("Converting circular structure to JSON");const s=n.push(i)-1,a=Object.keys(i).sort();for(o="",r=0;r<a.length;r++){const l=a[r],c=t(i[l]);c&&(o&&(o+=","),o+=JSON.stringify(l)+":"+c)}return n.splice(s,1),`{${o}}`}(e)}const Nc="row",Pc="column",S2="facet",Mn="x",Ci="y",Sa="x2",Ol="y2",bd="xOffset",Nm="yOffset",Ta="radius",Lc="radius2",$s="theta",$c="theta2",Da="latitude",Ia="longitude",Ma="latitude2",Bs="longitude2",_o="color",Rl="fill",Fl="stroke",yo="shape",Bc="size",xh="angle",Vc="opacity",wd="fillOpacity",Cd="strokeOpacity",xd="strokeWidth",Ed="strokeDash",sv="text",Pm="order",av="detail",T2="key",Eh="tooltip",D2="href",I2="url",M2="description",poe={theta:1,theta2:1,radius:1,radius2:1};function goe(e){return e in poe}const RL={longitude:1,longitude2:1,latitude:1,latitude2:1};function moe(e){switch(e){case Da:return"y";case Ma:return"y2";case Ia:return"x";case Bs:return"x2"}}function _oe(e){return e in RL}const Sje=ce(RL),FL={x:1,y:1,x2:1,y2:1,...poe,...RL,xOffset:1,yOffset:1,color:1,fill:1,stroke:1,opacity:1,fillOpacity:1,strokeOpacity:1,strokeWidth:1,strokeDash:1,size:1,angle:1,shape:1,order:1,text:1,detail:1,key:1,tooltip:1,href:1,url:1,description:1};function Lm(e){return e===_o||e===Rl||e===Fl}const yoe={row:1,column:1,facet:1},Vs=ce(yoe),NL={...FL,...yoe},Tje=ce(NL),{order:$yt,detail:Byt,tooltip:Vyt,...voe}=NL,{row:zyt,column:Uyt,facet:Hyt,...boe}=voe;function Dje(e){return!!boe[e]}function woe(e){return!!NL[e]}ce(voe),ce(boe);const Ije=[Sa,Ol,Ma,Bs,$c,Lc];function Coe(e){return Sh(e)!==e}function Sh(e){switch(e){case Sa:return Mn;case Ol:return Ci;case Ma:return Da;case Bs:return Ia;case $c:return $s;case Lc:return Ta}return e}function Sd(e){if(goe(e))switch(e){case $s:return"startAngle";case $c:return"endAngle";case Ta:return"outerRadius";case Lc:return"innerRadius"}return e}function Nl(e){switch(e){case Mn:return Sa;case Ci:return Ol;case Da:return Ma;case Ia:return Bs;case $s:return $c;case Ta:return Lc}}function vo(e){switch(e){case Mn:case Sa:return"width";case Ci:case Ol:return"height"}}function xoe(e){switch(e){case Mn:return"xOffset";case Ci:return"yOffset";case Sa:return"x2Offset";case Ol:return"y2Offset";case $s:return"thetaOffset";case Ta:return"radiusOffset";case $c:return"theta2Offset";case Lc:return"radius2Offset"}}function PL(e){switch(e){case Mn:return"xOffset";case Ci:return"yOffset"}}function Mje(e){switch(e){case"xOffset":return"x";case"yOffset":return"y"}}const Aje=ce(FL),{x:Wyt,y:Gyt,x2:Kyt,y2:Yyt,xOffset:Xyt,yOffset:Qyt,latitude:Zyt,longitude:Jyt,latitude2:e1t,longitude2:t1t,theta:n1t,theta2:i1t,radius:r1t,radius2:o1t,...LL}=FL,kje=ce(LL),$L={x:1,y:1},Pl=ce($L);function Qn(e){return e in $L}const BL={theta:1,radius:1},Oje=ce(BL);function A2(e){return"width"===e?Mn:Ci}const VL={xOffset:1,yOffset:1};function lv(e){return e in VL}ce(VL);const{text:a1t,tooltip:l1t,href:c1t,url:u1t,description:d1t,detail:f1t,key:h1t,order:p1t,...Eoe}=LL,Rje=ce(Eoe),Soe={...$L,...BL,...VL,...Eoe},k2=ce(Soe);function zc(e){return!!Soe[e]}const Toe={arc:"always",area:"always",bar:"always",circle:"always",geoshape:"always",image:"always",line:"always",rule:"always",point:"always",rect:"always",square:"always",trail:"always",text:"always",tick:"always"},{geoshape:g1t,...Lje}=Toe;function zL(e){switch(e){case Mn:case Ci:case $s:case Ta:case bd:case Nm:case Bc:case xh:case xd:case Vc:case wd:case Cd:case Sa:case Ol:case $c:case Lc:return;case S2:case Nc:case Pc:case yo:case Ed:case sv:case Eh:case D2:case I2:case M2:return"discrete";case _o:case Rl:case Fl:return"flexible";case Da:case Ia:case Ma:case Bs:case av:case T2:case Pm:return}}const Bje={argmax:1,argmin:1,average:1,count:1,distinct:1,product:1,max:1,mean:1,median:1,min:1,missing:1,q1:1,q3:1,ci0:1,ci1:1,stderr:1,stdev:1,stdevp:1,sum:1,valid:1,values:1,variance:1,variancep:1},Vje={count:1,min:1,max:1};function Uc(e){return!!e&&!!e.argmin}function Td(e){return!!e&&!!e.argmax}function UL(e){return xe(e)&&!!Bje[e]}const zje=new Set(["count","valid","missing","distinct"]);function Doe(e){return xe(e)&&zje.has(e)}const Hje=new Set(["count","sum","distinct","valid","missing"]),jje=new Set(["mean","average","median","q1","q3","min","max"]);function Ioe(e){return Iu(e)&&(e=Z2(e,void 0)),"bin"+ce(e).map(n=>O2(e[n])?In(`_${n}_${vd(e[n])}`):In(`_${n}_${e[n]}`)).join("")}function _n(e){return!0===e||Th(e)&&!e.binned}function qi(e){return"binned"===e||Th(e)&&!0===e.binned}function Th(e){return Ee(e)}function O2(e){return e?.param}function Moe(e){switch(e){case Nc:case Pc:case Bc:case _o:case Rl:case Fl:case xd:case Vc:case wd:case Cd:case yo:return 6;case Ed:return 4;default:return 10}}function cv(e){return!!e?.expr}function bo(e){const n=ce(e||{}),t={};for(const i of n)t[i]=rs(e[i]);return t}function Aoe(e){const{anchor:n,frame:t,offset:i,orient:r,angle:o,limit:s,color:a,subtitleColor:l,subtitleFont:c,subtitleFontSize:u,subtitleFontStyle:d,subtitleFontWeight:f,subtitleLineHeight:h,subtitlePadding:p,...g}=e,_={...n?{anchor:n}:{},...t?{frame:t}:{},...i?{offset:i}:{},...r?{orient:r}:{},...void 0!==o?{angle:o}:{},...void 0!==s?{limit:s}:{}},y={...l?{subtitleColor:l}:{},...c?{subtitleFont:c}:{},...u?{subtitleFontSize:u}:{},...d?{subtitleFontStyle:d}:{},...f?{subtitleFontWeight:f}:{},...h?{subtitleLineHeight:h}:{},...p?{subtitlePadding:p}:{}};return{titleMarkConfig:{...g,...a?{fill:a}:{}},subtitleMarkConfig:Rm(e,["align","baseline","dx","dy","limit"]),nonMarkTitleProperties:_,subtitle:y}}function Dd(e){return xe(e)||oe(e)&&xe(e[0])}function Pe(e){return!!e?.signal}function Id(e){return!!e.step}function Hc(e){return!oe(e)&&"field"in e&&"data"in e}const Gje=ce({aria:1,description:1,ariaRole:1,ariaRoleDescription:1,blend:1,opacity:1,fill:1,fillOpacity:1,stroke:1,strokeCap:1,strokeWidth:1,strokeOpacity:1,strokeDash:1,strokeDashOffset:1,strokeJoin:1,strokeOffset:1,strokeMiterLimit:1,startAngle:1,endAngle:1,padAngle:1,innerRadius:1,outerRadius:1,size:1,shape:1,interpolate:1,tension:1,orient:1,align:1,baseline:1,text:1,dir:1,dx:1,dy:1,ellipsis:1,limit:1,radius:1,theta:1,angle:1,font:1,fontSize:1,fontWeight:1,fontStyle:1,lineBreak:1,lineHeight:1,cursor:1,href:1,tooltip:1,cornerRadius:1,cornerRadiusTopLeft:1,cornerRadiusTopRight:1,cornerRadiusBottomLeft:1,cornerRadiusBottomRight:1,aspect:1,width:1,height:1,url:1,smooth:1}),Kje={arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1},HL=["cornerRadius","cornerRadiusTopLeft","cornerRadiusTopRight","cornerRadiusBottomLeft","cornerRadiusBottomRight"];function koe(e){const n=oe(e.condition)?e.condition.map(Ooe):Ooe(e.condition);return{...rs(e),condition:n}}function rs(e){if(cv(e)){const{expr:n,...t}=e;return{signal:n,...t}}return e}function Ooe(e){if(cv(e)){const{expr:n,...t}=e;return{signal:n,...t}}return e}function wn(e){if(cv(e)){const{expr:n,...t}=e;return{signal:n,...t}}return Pe(e)?e:void 0!==e?{value:e}:void 0}function Yje(e){return Pe(e)?e.signal:ge(e)}function Roe(e){return Pe(e)?e.signal:ge(e.value)}function Aa(e){return Pe(e)?e.signal:null==e?null:ge(e)}function Xje(e,n,t){for(const i of t){const r=jc(i,n.markDef,n.config);void 0!==r&&(e[i]=wn(r))}return e}function Foe(e){return[].concat(e.type,e.style??[])}function Zt(e,n,t,i={}){const{vgChannel:r,ignoreVgConfig:o}=i;return r&&void 0!==n[r]?n[r]:void 0!==n[e]?n[e]:!o||r&&r!==e?jc(e,n,t,i):void 0}function jc(e,n,t,{vgChannel:i}={}){return Xn(i?R2(e,n,t.style):void 0,R2(e,n,t.style),i?t[n.type][i]:void 0,t[n.type][e],i?t.mark[i]:t.mark[e])}function R2(e,n,t){return Noe(e,Foe(n),t)}function Noe(e,n,t){let i;n=Ce(n);for(const r of n){const o=t[r];o&&void 0!==o[e]&&(i=o[e])}return i}function Poe(e,n){return Ce(e).reduce((t,i)=>(t.field.push(ye(i,n)),t.order.push(i.sort??"ascending"),t),{field:[],order:[]})}function Loe(e,n){const t=[...e];return n.forEach(i=>{for(const r of t)if(is(r,i))return;t.push(i)}),t}function $oe(e,n){return is(e,n)||!n?e:e?[...Ce(e),...Ce(n)].join(", "):n}function Boe(e,n){const t=e.value,i=n.value;if(null==t||null===i)return{explicit:e.explicit,value:null};if((Dd(t)||Pe(t))&&(Dd(i)||Pe(i)))return{explicit:e.explicit,value:$oe(t,i)};if(Dd(t)||Pe(t))return{explicit:e.explicit,value:t};if(Dd(i)||Pe(i))return{explicit:e.explicit,value:i};if(!(Dd(t)||Pe(t)||Dd(i)||Pe(i)))return{explicit:e.explicit,value:Loe(t,i)};throw new Error("It should never reach here")}function jL(e){return`Invalid specification ${ln(e)}. Make sure the specification includes at least one of the following properties: "mark", "layer", "facet", "hconcat", "vconcat", "concat", or "repeat".`}const Qje='Autosize "fit" only works for single views and layered views.';function Voe(e){return("width"==e?"Width":"Height")+' "container" only works for single views and layered views.'}function zoe(e){return`${"width"==e?"Width":"Height"} "container" only works well with autosize "fit" or "fit-${"width"==e?"x":"y"}".`}function Uoe(e){return e?`Dropping "fit-${e}" because spec has discrete ${vo(e)}.`:'Dropping "fit" because spec has discrete size.'}function qL(e){return`Unknown field for ${e}. Cannot calculate view size.`}function Hoe(e){return`Cannot project a selection on encoding channel "${e}", which has no field.`}function Zje(e,n){return`Cannot project a selection on encoding channel "${e}" as it uses an aggregate function ("${n}").`}function joe(e){return`Selection not supported for ${e} yet.`}function qoe(e){return`The "columns" property cannot be used when "${e}" has nested row/column.`}function Woe(e,n,t){return`An ancestor parsed field "${e}" as ${t} but a child wants to parse the field as ${n}.`}function dqe(e){return`Ignoring an invalid transform: ${ln(e)}.`}function Goe(e){return`Config.customFormatTypes is not true, thus custom format type and format for channel ${e} are dropped.`}function gqe(e){return`${e}Offset dropped because ${e} is continuous`}function Koe(e){return`Invalid field type "${e}".`}function Yoe(e,n){const{fill:t,stroke:i}=n;return`Dropping color ${e} as the plot also has ${t&&i?"fill and stroke":t?"fill":"stroke"}.`}function WL(e,n){return`Dropping ${ln(e)} from channel "${n}" since it does not contain any data field, datum, value, or signal.`}function F2(e,n,t){return`${e} dropped as it is incompatible with "${n}"${t?` when ${t}`:""}.`}function wqe(e){return`${e}-encoding is dropped as ${e} is not a valid encoding channel.`}function Cqe(e){return`${e} encoding should be discrete (ordinal / nominal / binned).`}function xqe(e){return`${e} encoding should be discrete (ordinal / nominal / binned) or use a discretizing scale (e.g. threshold).`}function GL(e,n){return`Using discrete channel "${e}" to encode "${n}" field can be misleading as it does not encode ${"ordinal"===n?"order":"magnitude"}.`}function Aqe(e){return`Using unaggregated domain with raw field has no effect (${ln(e)}).`}function kqe(e){return`Unaggregated domain not applicable for "${e}" since it produces values outside the origin domain of the source data.`}function Oqe(e){return`Unaggregated domain is currently unsupported for log scale (${ln(e)}).`}function Xoe(e,n,t){return`${t}-scale's "${n}" is dropped as it does not work with ${e} scale.`}function Qoe(e){return`The step for "${e}" is dropped because the ${"width"===e?"x":"y"} is continuous.`}const Zoe="Domains that should be unioned has conflicting sort properties. Sort will be set to true.";function N2(e,n){return`Invalid ${e}: ${ln(n)}.`}function Joe(e){return`1D error band does not support ${e}.`}function ese(e){return`Channel ${e} is required for "binned" bin.`}const tse=rO(iO);let Ll=tse;function fe(...e){Ll.warn(...e)}function Dh(e){if(e&&Ee(e))for(const n of YL)if(n in e)return!0;return!1}const ise=["january","february","march","april","may","june","july","august","september","october","november","december"],nWe=ise.map(e=>e.substr(0,3)),rse=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"],iWe=rse.map(e=>e.substr(0,3));function KL(e,n){const t=[];if(n&&void 0!==e.day&&ce(e).length>1&&(fe(function Wqe(e){return`Dropping day from datetime ${ln(e)} as day cannot be combined with other units.`}(e)),delete(e=tt(e)).day),t.push(void 0!==e.year?e.year:2012),void 0!==e.month){const i=n?function oWe(e){if(E2(e)&&(e=+e),Ft(e))return e-1;{const n=e.toLowerCase(),t=ise.indexOf(n);if(-1!==t)return t;const i=n.substr(0,3),r=nWe.indexOf(i);if(-1!==r)return r;throw new Error(N2("month",e))}}(e.month):e.month;t.push(i)}else if(void 0!==e.quarter){const i=n?function rWe(e){if(E2(e)&&(e=+e),Ft(e))return e>4&&fe(N2("quarter",e)),e-1;throw new Error(N2("quarter",e))}(e.quarter):e.quarter;t.push(Ft(i)?3*i:`${i}*3`)}else t.push(0);if(void 0!==e.date)t.push(e.date);else if(void 0!==e.day){const i=n?function sWe(e){if(E2(e)&&(e=+e),Ft(e))return e%7;{const n=e.toLowerCase(),t=rse.indexOf(n);if(-1!==t)return t;const i=n.substr(0,3),r=iWe.indexOf(i);if(-1!==r)return r;throw new Error(N2("day",e))}}(e.day):e.day;t.push(Ft(i)?i+1:`${i}+1`)}else t.push(1);for(const i of["hours","minutes","seconds","milliseconds"]){const r=e[i];t.push(typeof r>"u"?0:r)}return t}function Ih(e){const t=KL(e,!0).join(", ");return e.utc?`utc(${t})`:`datetime(${t})`}const ose={year:1,quarter:1,month:1,week:1,day:1,dayofyear:1,date:1,hours:1,minutes:1,seconds:1,milliseconds:1},YL=ce(ose);function Mh(e){return Ee(e)?e.binned:sse(e)}function sse(e){return e&&e.startsWith("binned")}function XL(e){return e.startsWith("utc")}const dWe={"year-month":"%b %Y ","year-month-date":"%b %d, %Y "};function P2(e){return YL.filter(n=>lse(e,n))}function ase(e){const n=P2(e);return n[n.length-1]}function lse(e,n){const t=e.indexOf(n);return!(t<0||t>0&&"seconds"===n&&"i"===e.charAt(t-1)||e.length>t+3&&"day"===n&&"o"===e.charAt(t+3)||t>0&&"year"===n&&"f"===e.charAt(t-1))}function cse(e){if(e)return`timeUnitSpecifier(${ln(P2(e))}, ${ln(dWe)})`}function xi(e){if(!e)return;let n;return xe(e)?n=sse(e)?{unit:e.substring(6),binned:!0}:{unit:e}:Ee(e)&&(n={...e,...e.unit?{unit:e.unit}:{}}),XL(n.unit)&&(n.utc=!0,n.unit=function uWe(e){return e.substring(3)}(n.unit)),n}function use(e,n=(t=>t)){const t=xi(e),i=ase(t.unit);if(i&&"day"!==i){const r={year:2001,month:1,date:1,hours:0,minutes:0,seconds:0,milliseconds:0},{step:o,part:s}=dse(i,t.step);return`${n(Ih({...r,[s]:+r[s]+o}))} - ${n(Ih(r))}`}}const gWe={year:1,month:1,date:1,hours:1,minutes:1,seconds:1,milliseconds:1};function dse(e,n=1){if(function mWe(e){return!!gWe[e]}(e))return{part:e,step:n};switch(e){case"day":case"dayofyear":return{part:"date",step:n};case"quarter":return{part:"month",step:3*n};case"week":return{part:"date",step:7*n}}}function QL(e){return!!e?.field&&void 0!==e.equal}function ZL(e){return!!e?.field&&void 0!==e.lt}function JL(e){return!!e?.field&&void 0!==e.lte}function e5(e){return!!e?.field&&void 0!==e.gt}function t5(e){return!!e?.field&&void 0!==e.gte}function n5(e){if(e?.field){if(oe(e.range)&&2===e.range.length)return!0;if(Pe(e.range))return!0}return!1}function r5(e){return!!e?.field&&(oe(e.oneOf)||oe(e.in))}function fse(e){return r5(e)||QL(e)||n5(e)||ZL(e)||e5(e)||JL(e)||t5(e)}function $l(e,n){return J2(e,{timeUnit:n,wrapTime:!0})}function hse(e,n=!0){const{field:t}=e,i=xi(e.timeUnit),{unit:r,binned:o}=i||{},s=ye(e,{expr:"datum"}),a=r?`time(${o?s:function fWe(e,n,{end:t}={end:!1}){const i=kL(n),r=XL(e)?"utc":"";function o(l){return"quarter"===l?`(${r}quarter(${i})-1)`:`${r}${l}(${i})`}let s;const a={};for(const l of YL)lse(e,l)&&(a[l]=o(l),s=l);return t&&(a[s]+="+1"),function aWe(e){const t=KL(e,!1).join(", ");return e.utc?`utc(${t})`:`datetime(${t})`}(a)}(r,t)})`:s;if(QL(e))return`${a}===${$l(e.equal,r)}`;if(ZL(e))return`${a}<${$l(e.lt,r)}`;if(e5(e))return`${a}>${$l(e.gt,r)}`;if(JL(e))return`${a}<=${$l(e.lte,r)}`;if(t5(e))return`${a}>=${$l(e.gte,r)}`;if(r5(e))return`indexof([${function vWe(e,n){return e.map(t=>$l(t,n))}(e.oneOf,r).join(",")}], ${a}) !== -1`;if(function yWe(e){return!!e?.field&&void 0!==e.valid}(e))return o5(a,e.valid);if(n5(e)){const{range:l}=e,c=Pe(l)?{signal:`${l.signal}[0]`}:l[0],u=Pe(l)?{signal:`${l.signal}[1]`}:l[1];if(null!==c&&null!==u&&n)return"inrange("+a+", ["+$l(c,r)+", "+$l(u,r)+"])";const d=[];return null!==c&&d.push(`${a} >= ${$l(c,r)}`),null!==u&&d.push(`${a} <= ${$l(u,r)}`),d.length>0?d.join(" && "):"true"}throw new Error(`Invalid field predicate: ${ln(e)}`)}function o5(e,n=!0){return n?`isValid(${e}) && isFinite(+${e})`:`!isValid(${e}) || !isFinite(+${e})`}function bWe(e){return fse(e)&&e.timeUnit?{...e,timeUnit:xi(e.timeUnit)}:e}const Ah={quantitative:"quantitative",ordinal:"ordinal",temporal:"temporal",nominal:"nominal",geojson:"geojson"};function wWe(e){return"quantitative"===e||"temporal"===e}function pse(e){return"ordinal"===e||"nominal"===e}const kh=Ah.quantitative,s5=Ah.ordinal,$m=Ah.temporal,a5=Ah.nominal,Bm=Ah.geojson;ce(Ah);const wo={LINEAR:"linear",LOG:"log",POW:"pow",SQRT:"sqrt",SYMLOG:"symlog",IDENTITY:"identity",SEQUENTIAL:"sequential",TIME:"time",UTC:"utc",QUANTILE:"quantile",QUANTIZE:"quantize",THRESHOLD:"threshold",BIN_ORDINAL:"bin-ordinal",ORDINAL:"ordinal",POINT:"point",BAND:"band"},L2={linear:"numeric",log:"numeric",pow:"numeric",sqrt:"numeric",symlog:"numeric",identity:"numeric",sequential:"numeric",time:"time",utc:"time",ordinal:"ordinal","bin-ordinal":"bin-ordinal",point:"ordinal-position",band:"ordinal-position",quantile:"discretizing",quantize:"discretizing",threshold:"discretizing"};function xWe(e,n){const t=L2[e],i=L2[n];return t===i||"ordinal-position"===t&&"time"===i||"ordinal-position"===i&&"time"===t}ce(L2);const EWe={linear:0,log:1,pow:1,sqrt:1,symlog:1,identity:1,sequential:1,time:0,utc:0,point:10,band:11,ordinal:0,"bin-ordinal":0,quantile:0,quantize:0,threshold:0};function gse(e){return EWe[e]}const mse=new Set(["linear","log","pow","sqrt","symlog"]),_se=new Set([...mse,"time","utc"]);function yse(e){return mse.has(e)}const vse=new Set(["quantile","quantize","threshold"]),SWe=new Set([..._se,...vse,"sequential","identity"]),TWe=new Set(["ordinal","bin-ordinal","point","band"]);function Ei(e){return TWe.has(e)}function os(e){return SWe.has(e)}function ka(e){return _se.has(e)}function Vm(e){return vse.has(e)}function bse(e){return e?.param}const wse={type:1,domain:1,domainMax:1,domainMin:1,domainMid:1,domainRaw:1,align:1,range:1,rangeMax:1,rangeMin:1,scheme:1,bins:1,reverse:1,round:1,clamp:1,nice:1,base:1,exponent:1,constant:1,interpolate:1,zero:1,padding:1,paddingInner:1,paddingOuter:1},{type:L1t,domain:$1t,range:B1t,rangeMax:V1t,rangeMin:z1t,scheme:U1t,...kWe}=(ce(wse),wse),OWe=ce(kWe);function l5(e,n){switch(n){case"type":case"domain":case"reverse":case"range":return!0;case"scheme":case"interpolate":return!["point","band","identity"].includes(e);case"bins":return!["point","band","identity","ordinal"].includes(e);case"round":return ka(e)||"band"===e||"point"===e;case"padding":case"rangeMin":case"rangeMax":return ka(e)||["point","band"].includes(e);case"paddingOuter":case"align":return["point","band"].includes(e);case"paddingInner":return"band"===e;case"domainMax":case"domainMid":case"domainMin":case"domainRaw":case"clamp":return ka(e);case"nice":return ka(e)||"quantize"===e||"threshold"===e;case"exponent":return"pow"===e;case"base":return"log"===e;case"constant":return"symlog"===e;case"zero":return os(e)&&!St(["log","time","utc","threshold","quantile"],e)}}function Cse(e,n){switch(n){case"interpolate":case"scheme":case"domainMid":return Lm(e)?void 0:function Iqe(e){return`Cannot use the scale property "${e}" with non-color channel.`}(n);case"align":case"type":case"bins":case"domain":case"domainMax":case"domainMin":case"domainRaw":case"range":case"base":case"exponent":case"constant":case"nice":case"padding":case"paddingInner":case"paddingOuter":case"rangeMax":case"rangeMin":case"reverse":case"round":case"clamp":case"zero":return}}const hr={arc:"arc",area:"area",bar:"bar",image:"image",line:"line",point:"point",rect:"rect",rule:"rule",text:"text",tick:"tick",trail:"trail",circle:"circle",square:"square",geoshape:"geoshape"},xse=hr.arc,$2=hr.area,B2=hr.bar,NWe=hr.image,V2=hr.line,z2=hr.point,PWe=hr.rect,U2=hr.rule,Ese=hr.text,c5=hr.tick,LWe=hr.trail,u5=hr.circle,d5=hr.square,Sse=hr.geoshape;function Ad(e){return["line","area","trail"].includes(e)}function dv(e){return["rect","bar","image","arc"].includes(e)}const Tse=new Set(ce(hr));function Oa(e){return e.type}const VWe=["stroke","strokeWidth","strokeDash","strokeDashOffset","strokeOpacity","strokeJoin","strokeMiterLimit","fill","fillOpacity"],Dse=ce({color:1,filled:1,invalid:1,order:1,radius2:1,theta2:1,timeUnitBandSize:1,timeUnitBandPosition:1}),Ise=ce({mark:1,arc:1,area:1,bar:1,circle:1,image:1,line:1,point:1,rect:1,rule:1,square:1,text:1,tick:1,trail:1,geoshape:1});function Oh(e){return e&&null!=e.band}const HWe={horizontal:["cornerRadiusTopRight","cornerRadiusBottomRight"],vertical:["cornerRadiusTopLeft","cornerRadiusTopRight"]};function f5(e){const{channel:n,channelDef:t,markDef:i,scale:r,config:o}=e,s=p5(e);return he(t)&&!Doe(t.aggregate)&&r&&ka(r.get("type"))?function KWe({fieldDef:e,channel:n,markDef:t,ref:i,config:r}){return Ad(t.type)?i:null===Zt("invalid",t,r)?[YWe(e,n),i]:i}({fieldDef:t,channel:n,markDef:i,ref:s,config:o}):s}function YWe(e,n){return{test:h5(e,!0),..."y"===Sh(n)?{field:{group:"height"}}:{value:0}}}function h5(e,n=!0){return o5(xe(e)?e:ye(e,{expr:"datum"}),!n)}function Rh(e,n,t,i){const r={};if(n&&(r.scale=n),Vl(e)){const{datum:o}=e;Dh(o)?r.signal=Ih(o):Pe(o)?r.signal=o.signal:cv(o)?r.signal=o.expr:r.value=o}else r.field=ye(e,t);if(i){const{offset:o,band:s}=i;o&&(r.offset=o),s&&(r.band=s)}return r}function H2({scaleName:e,fieldOrDatumDef:n,fieldOrDatumDef2:t,offset:i,startSuffix:r,endSuffix:o="end",bandPosition:s=.5}){const a=!Pe(s)&&0<s&&s<1?"datum":void 0,l=ye(n,{expr:a,suffix:r}),c=void 0!==t?ye(t,{expr:a}):ye(n,{suffix:o,expr:a}),u={};if(0===s||1===s)u.scale=e,u.field=0===s?l:c;else{const d=Pe(s)?`(1-${s.signal}) * ${l} + ${s.signal} * ${c}`:`${1-s} * ${l} + ${s} * ${c}`;u.signal=`scale("${e}", ${d})`}return i&&(u.offset=i),u}function p5({channel:e,channelDef:n,channel2Def:t,markDef:i,config:r,scaleName:o,scale:s,stack:a,offset:l,defaultRef:c,bandPosition:u}){if(n){if(ot(n)){const d=s?.get("type");if(qr(n)){u??(u=kd({fieldDef:n,fieldDef2:t,markDef:i,config:r}));const{bin:f,timeUnit:h,type:p}=n;if(_n(f)||u&&h&&p===$m)return a?.impute?Rh(n,o,{binSuffix:"mid"},{offset:l}):u&&!Ei(d)?H2({scaleName:o,fieldOrDatumDef:n,bandPosition:u,offset:l}):Rh(n,o,mv(n,e)?{binSuffix:"range"}:{},{offset:l});if(qi(f)){if(he(t))return H2({scaleName:o,fieldOrDatumDef:n,fieldOrDatumDef2:t,bandPosition:u,offset:l});fe(ese(e===Mn?Sa:Ol))}}return Rh(n,o,Ei(d)?{binSuffix:"range"}:{},{offset:l,band:"band"===d?u??n.bandPosition??.5:void 0})}if(Fa(n)){const f=l?{offset:l}:{};return{...fv(e,n.value),...f}}}return ct(c)&&(c=c()),c&&{...c,...l?{offset:l}:{}}}function fv(e,n){return St(["x","x2"],e)&&"width"===n?{field:{group:"width"}}:St(["y","y2"],e)&&"height"===n?{field:{group:"height"}}:wn(n)}function Fh(e){return e&&"number"!==e&&"time"!==e}function Ase(e,n,t){return`${e}(${n}${t?`, ${ln(t)}`:""})`}const ZWe=" \u2013 ";function g5({fieldOrDatumDef:e,format:n,formatType:t,expr:i,normalizeStack:r,config:o}){if(Fh(t))return Ra({fieldOrDatumDef:e,format:n,formatType:t,expr:i,config:o});const s=kse(e,i,r),a=zm(e);if(void 0===n&&void 0===t&&o.customFormatTypes){if("quantitative"===a){if(r&&o.normalizedNumberFormatType)return Ra({fieldOrDatumDef:e,format:o.normalizedNumberFormat,formatType:o.normalizedNumberFormatType,expr:i,config:o});if(o.numberFormatType)return Ra({fieldOrDatumDef:e,format:o.numberFormat,formatType:o.numberFormatType,expr:i,config:o})}if("temporal"===a&&o.timeFormatType&&he(e)&&void 0===e.timeUnit)return Ra({fieldOrDatumDef:e,format:o.timeFormat,formatType:o.timeFormatType,expr:i,config:o})}if(qm(e)){const l=function eGe({field:e,timeUnit:n,format:t,formatType:i,rawTimeFormat:r,isUTCScale:o}){return!n||t?!n&&i?`${i}(${e}, '${t}')`:`${o?"utc":"time"}Format(${e}, '${t=xe(t)?t:r}')`:function hWe(e,n,t){if(!e)return;const i=cse(e);return`${t||XL(e)?"utc":"time"}Format(${n}, ${i})`}(n,e,o)}({field:s,timeUnit:he(e)?xi(e.timeUnit)?.unit:void 0,format:n,formatType:o.timeFormatType,rawTimeFormat:o.timeFormat,isUTCScale:Nh(e)&&e.scale?.type===wo.UTC});return l?{signal:l}:void 0}return n=m5({type:a,specifiedFormat:n,config:o,normalizeStack:r}),he(e)&&_n(e.bin)?{signal:hv(s,ye(e,{expr:i,binSuffix:"end"}),n,t,o)}:n||"quantitative"===zm(e)?{signal:`${Fse(s,n)}`}:{signal:`isValid(${s}) ? ${s} : ""+${s}`}}function kse(e,n,t){return he(e)?t?`${ye(e,{expr:n,suffix:"end"})}-${ye(e,{expr:n,suffix:"start"})}`:ye(e,{expr:n}):function XWe(e){const{datum:n}=e;return Dh(n)?Ih(n):`${ln(n)}`}(e)}function Ra({fieldOrDatumDef:e,format:n,formatType:t,expr:i,normalizeStack:r,config:o,field:s}){return s??(s=kse(e,i,r)),"datum.value"!==s&&he(e)&&_n(e.bin)?{signal:hv(s,ye(e,{expr:i,binSuffix:"end"}),n,t,o)}:{signal:Ase(t,s,n)}}function Ose(e,n,t,i,r,o){if(!(xe(i)&&Fh(i)||void 0===t&&void 0===i&&r.customFormatTypes&&"quantitative"===zm(e)&&(r.normalizedNumberFormatType&&Um(e)&&"normalize"===e.stack||r.numberFormatType))){if(Um(e)&&"normalize"===e.stack&&r.normalizedNumberFormat)return m5({type:"quantitative",config:r,normalizeStack:!0});if(qm(e)){const s=he(e)?xi(e.timeUnit)?.unit:void 0;return void 0===s&&r.customFormatTypes&&r.timeFormatType?void 0:function JWe({specifiedFormat:e,timeUnit:n,config:t,omitTimeFormatConfig:i}){return e||(n?{signal:cse(n)}:i?void 0:t.timeFormat)}({specifiedFormat:t,timeUnit:s,config:r,omitTimeFormatConfig:o})}return m5({type:n,specifiedFormat:t,config:r})}}function Rse(e,n,t){return e&&(Pe(e)||"number"===e||"time"===e)?e:qm(n)&&"time"!==t&&"utc"!==t?he(n)&&xi(n?.timeUnit)?.utc?"utc":"time":void 0}function m5({type:e,specifiedFormat:n,config:t,normalizeStack:i}){return xe(n)?n:e===kh?i?t.normalizedNumberFormat:t.numberFormat:void 0}function Fse(e,n){return`format(${e}, "${n||""}")`}function Nse(e,n,t,i){return Fh(t)?Ase(t,e,n):Fse(e,(xe(n)?n:void 0)??i.numberFormat)}function hv(e,n,t,i,r){if(void 0===t&&void 0===i&&r.customFormatTypes&&r.numberFormatType)return hv(e,n,r.numberFormat,r.numberFormatType,r);const o=Nse(e,t,i,r),s=Nse(n,t,i,r);return`${o5(e,!1)} ? "null" : ${o} + "${ZWe}" + ${s}`}const j2="min",tGe={x:1,y:1,color:1,fill:1,stroke:1,strokeWidth:1,size:1,shape:1,fillOpacity:1,strokeOpacity:1,opacity:1,text:1};function Pse(e){return e in tGe}function Lse(e){return!!e?.encoding}function Bl(e){return e&&("count"===e.op||!!e.field)}function $se(e){return e&&oe(e)}function pv(e){return"row"in e||"column"in e}function _5(e){return!!e&&"header"in e}function q2(e){return"facet"in e}function Bse(e){const{field:n,timeUnit:t,bin:i,aggregate:r}=e;return{...t?{timeUnit:t}:{},...i?{bin:i}:{},...r?{aggregate:r}:{},field:n}}function y5(e){return"sort"in e}function kd({fieldDef:e,fieldDef2:n,markDef:t,config:i}){if(ot(e)&&void 0!==e.bandPosition)return e.bandPosition;if(he(e)){const{timeUnit:r,bin:o}=e;if(r&&!n)return jc("timeUnitBandPosition",t,i);if(_n(o))return.5}}function Vse({channel:e,fieldDef:n,fieldDef2:t,markDef:i,config:r,scaleType:o,useVlSizeChannel:s}){const a=vo(e),l=Zt(s?"size":a,i,r,{vgChannel:a});if(void 0!==l)return l;if(he(n)){const{timeUnit:c,bin:u}=n;if(c&&!t)return{band:jc("timeUnitBandSize",i,r)};if(_n(u)&&!Ei(o))return{band:1}}return dv(i.type)?o?Ei(o)?r[i.type]?.discreteBandSize||{band:1}:r[i.type]?.continuousBandSize:r[i.type]?.discreteBandSize:void 0}function zse(e,n,t,i){return!!(_n(e.bin)||e.timeUnit&&qr(e)&&"temporal"===e.type)&&void 0!==kd({fieldDef:e,fieldDef2:n,markDef:t,config:i})}function Use(e){return e&&!!e.sort&&!e.field}function W2(e){return e&&"condition"in e}function G2(e){const n=e?.condition;return!!n&&!oe(n)&&he(n)}function gv(e){const n=e?.condition;return!!n&&!oe(n)&&ot(n)}function he(e){return e&&(!!e.field||"count"===e.aggregate)}function zm(e){return e?.type}function Vl(e){return e&&"datum"in e}function Od(e){return qr(e)&&!Y2(e)||K2(e)}function Hse(e){return qr(e)&&"quantitative"===e.type&&!e.bin||K2(e)}function K2(e){return Vl(e)&&Ft(e.datum)}function ot(e){return he(e)||Vl(e)}function qr(e){return e&&("field"in e||"count"===e.aggregate)&&"type"in e}function Fa(e){return e&&"value"in e&&"value"in e}function Nh(e){return e&&("scale"in e||"sort"in e)}function Um(e){return e&&("axis"in e||"stack"in e||"impute"in e)}function jse(e){return e&&"legend"in e}function qse(e){return e&&("format"in e||"formatType"in e)}function oGe(e){return mo(e,["legend","axis","header","scale"])}function ye(e,n={}){let t=e.field;const i=n.prefix;let r=n.suffix,o="";if(function lGe(e){return"count"===e.aggregate}(e))t=doe("count");else{let s;if(!n.nofn)if(function sGe(e){return"op"in e}(e))s=e.op;else{const{bin:a,aggregate:l,timeUnit:c}=e;_n(a)?(s=Ioe(a),r=(n.binSuffix??"")+(n.suffix??"")):l?Td(l)?(o=`["${t}"]`,t=`argmax_${l.argmax}`):Uc(l)?(o=`["${t}"]`,t=`argmin_${l.argmin}`):s=String(l):c&&!Mh(c)&&(s=function pWe(e){const{utc:n,...t}=xi(e);return t.unit?(n?"utc":"")+ce(t).map(i=>In(`${"unit"===i?"":`_${i}_`}${t[i]}`)).join(""):(n?"utc":"")+"timeunit"+ce(t).map(i=>In(`_${i}_${t[i]}`)).join("")}(c),r=(!["range","mid"].includes(n.binSuffix)&&n.binSuffix||"")+(n.suffix??""))}s&&(t=t?`${s}_${t}`:s)}return r&&(t=`${t}_${r}`),i&&(t=`${i}_${t}`),n.forAs?OL(t):n.expr?loe(t,n.expr)+o:Ls(t)+o}function Y2(e){switch(e.type){case"nominal":case"ordinal":case"geojson":return!0;case"quantitative":return he(e)&&!!e.bin;case"temporal":return!1}throw new Error(Koe(e.type))}const Wse=(e,n)=>{switch(n.fieldTitle){case"plain":return e.field;case"functional":return function uGe(e){const{aggregate:n,bin:t,timeUnit:i,field:r}=e;if(Td(n))return`${r} for argmax(${n.argmax})`;if(Uc(n))return`${r} for argmin(${n.argmin})`;const o=i&&!Mh(i)?xi(i):void 0,s=n||o?.unit||o?.maxbins&&"timeunit"||_n(t)&&"bin";return s?`${s.toUpperCase()}(${r})`:r}(e);default:return function cGe(e,n){const{field:t,bin:i,timeUnit:r,aggregate:o}=e;if("count"===o)return n.countTitle;if(_n(i))return`${t} (binned)`;if(r&&!Mh(r)){const s=xi(r)?.unit;if(s)return`${t} (${P2(s).join("-")})`}else if(o)return Td(o)?`${t} for max ${o.argmax}`:Uc(o)?`${t} for min ${o.argmin}`:`${rv(o)} of ${t}`;return t}(e,n)}};let Gse=Wse;function Kse(e){Gse=e}function Hm(e,n,{allowDisabling:t,includeDefault:i=!0}){const r=v5(e)?.title;if(!he(e))return r??e.title;const o=e,s=i?b5(o,n):void 0;return t?Xn(r,o.title,s):r??o.title??s}function v5(e){return Um(e)&&e.axis?e.axis:jse(e)&&e.legend?e.legend:_5(e)&&e.header?e.header:void 0}function b5(e,n){return Gse(e,n)}function X2(e){if(qse(e)){const{format:n,formatType:t}=e;return{format:n,formatType:t}}{const n=v5(e)??{},{format:t,formatType:i}=n;return{format:t,formatType:i}}}function zl(e){return he(e)?e:G2(e)?e.condition:void 0}function gi(e){return ot(e)?e:gv(e)?e.condition:void 0}function Yse(e,n,t,i={}){return xe(e)||Ft(e)||Iu(e)?(fe(function mqe(e,n,t){return`Channel ${e} is a ${n}. Converted to {value: ${ln(t)}}.`}(n,xe(e)?"string":Ft(e)?"number":"boolean",e)),{value:e}):ot(e)?Q2(e,n,t,i):gv(e)?{...e,condition:Q2(e.condition,n,t,i)}:e}function Q2(e,n,t,i){if(qse(e)){const{format:r,formatType:o,...s}=e;if(Fh(o)&&!t.customFormatTypes)return fe(Goe(n)),Q2(s,n,t,i)}else{const r=Um(e)?"axis":jse(e)?"legend":_5(e)?"header":null;if(r&&e[r]){const{format:o,formatType:s,...a}=e[r];if(Fh(s)&&!t.customFormatTypes)return fe(Goe(n)),Q2({...e,[r]:a},n,t,i)}}return he(e)?w5(e,n,i):function hGe(e){let n=e.type;if(n)return e;const{datum:t}=e;return n=Ft(t)?"quantitative":xe(t)?"nominal":Dh(t)?"temporal":void 0,{...e,type:n}}(e)}function w5(e,n,{compositeMark:t=!1}={}){const{aggregate:i,timeUnit:r,bin:o,field:s}=e,a={...e};if(!t&&i&&!UL(i)&&!Td(i)&&!Uc(i)&&(fe(function yqe(e){return`Invalid aggregation operator "${e}".`}(i)),delete a.aggregate),r&&(a.timeUnit=xi(r)),s&&(a.field=`${s}`),_n(o)&&(a.bin=Z2(o,n)),qi(o)&&!Qn(n)&&fe(function Xqe(e){return`Channel ${e} should not be used with "binned" bin.`}(n)),qr(a)){const{type:l}=a,c=function CWe(e){if(e)switch(e=e.toLowerCase(),e){case"q":case kh:return"quantitative";case"t":case $m:return"temporal";case"o":case s5:return"ordinal";case"n":case a5:return"nominal";case Bm:return"geojson"}}(l);l!==c&&(a.type=c),"quantitative"!==l&&Doe(i)&&(fe(function _qe(e,n){return`Invalid field type "${e}" for aggregate: "${n}", using "quantitative" instead.`}(l,i)),a.type="quantitative")}else if(!Coe(n)){const l=function fGe(e,n){switch(n){case"latitude":case"longitude":return"quantitative";case"row":case"column":case"facet":case"shape":case"strokeDash":return"nominal";case"order":return"ordinal"}if(y5(e)&&oe(e.sort))return"ordinal";const{aggregate:t,bin:i,timeUnit:r}=e;if(r)return"temporal";if(i||t&&!Td(t)&&!Uc(t))return"quantitative";if(Nh(e)&&e.scale?.type)switch(L2[e.scale.type]){case"numeric":case"discretizing":return"quantitative";case"time":return"temporal"}return"nominal"}(a,n);a.type=l}if(qr(a)){const{compatible:l,warning:c}=function pGe(e,n){const t=e.type;if("geojson"===t&&"shape"!==n)return{compatible:!1,warning:`Channel ${n} should not be used with a geojson data.`};switch(n){case Nc:case Pc:case S2:return Y2(e)?jm:{compatible:!1,warning:Cqe(n)};case Mn:case Ci:case bd:case Nm:case _o:case Rl:case Fl:case sv:case av:case T2:case Eh:case D2:case I2:case xh:case $s:case Ta:case M2:return jm;case Ia:case Bs:case Da:case Ma:return t!==kh?{compatible:!1,warning:`Channel ${n} should be used with a quantitative field only, not ${e.type} field.`}:jm;case Vc:case wd:case Cd:case xd:case Bc:case $c:case Lc:case Sa:case Ol:return"nominal"!==t||e.sort?jm:{compatible:!1,warning:`Channel ${n} should not be used with an unsorted discrete field.`};case yo:case Ed:return Y2(e)||function aGe(e){return Nh(e)&&Vm(e.scale?.type)}(e)?jm:{compatible:!1,warning:xqe(n)};case Pm:return"nominal"!==e.type||"sort"in e?jm:{compatible:!1,warning:"Channel order is inappropriate for nominal field, which has no inherent order."}}}(a,n)||{};!1===l&&fe(c)}if(y5(a)&&xe(a.sort)){const{sort:l}=a;if(Pse(l))return{...a,sort:{encoding:l}};const c=l.substr(1);if("-"===l.charAt(0)&&Pse(c))return{...a,sort:{encoding:c,order:"descending"}}}if(_5(a)){const{header:l}=a;if(l){const{orient:c,...u}=l;if(c)return{...a,header:{...u,labelOrient:l.labelOrient||c,titleOrient:l.titleOrient||c}}}}return a}function Z2(e,n){return Iu(e)?{maxbins:Moe(n)}:"binned"===e?{binned:!0}:e.maxbins||e.step?e:{...e,maxbins:Moe(n)}}const jm={compatible:!0};function qm(e){const{formatType:n}=X2(e);return"time"===n||!n&&function gGe(e){return e&&("temporal"===e.type||he(e)&&!!e.timeUnit)}(e)}function J2(e,{timeUnit:n,type:t,wrapTime:i,undefinedIfExprNotRequired:r}){const o=n&&xi(n)?.unit;let a,s=o||"temporal"===t;return cv(e)?a=e.expr:Pe(e)?a=e.signal:Dh(e)?(s=!0,a=Ih(e)):(xe(e)||Ft(e))&&s&&(a=`datetime(${ln(e)})`,function cWe(e){return!!ose[e]}(o)&&(Ft(e)&&e<1e4||xe(e)&&isNaN(Date.parse(e)))&&(a=Ih({[o]:e}))),a?i&&s?`time(${a})`:a:r?void 0:ln(e)}function Xse(e,n){const{type:t}=e;return n.map(i=>{const o=J2(i,{timeUnit:he(e)&&!Mh(e.timeUnit)?e.timeUnit:void 0,type:t,undefinedIfExprNotRequired:!0});return void 0!==o?{signal:o}:i})}function mv(e,n){return _n(e.bin)?zc(n)&&["ordinal","nominal"].includes(e.type):(console.warn("Only call this method for binned field defs."),!1)}const Qse={labelAlign:{part:"labels",vgProp:"align"},labelBaseline:{part:"labels",vgProp:"baseline"},labelColor:{part:"labels",vgProp:"fill"},labelFont:{part:"labels",vgProp:"font"},labelFontSize:{part:"labels",vgProp:"fontSize"},labelFontStyle:{part:"labels",vgProp:"fontStyle"},labelFontWeight:{part:"labels",vgProp:"fontWeight"},labelOpacity:{part:"labels",vgProp:"opacity"},labelOffset:null,labelPadding:null,gridColor:{part:"grid",vgProp:"stroke"},gridDash:{part:"grid",vgProp:"strokeDash"},gridDashOffset:{part:"grid",vgProp:"strokeDashOffset"},gridOpacity:{part:"grid",vgProp:"opacity"},gridWidth:{part:"grid",vgProp:"strokeWidth"},tickColor:{part:"ticks",vgProp:"stroke"},tickDash:{part:"ticks",vgProp:"strokeDash"},tickDashOffset:{part:"ticks",vgProp:"strokeDashOffset"},tickOpacity:{part:"ticks",vgProp:"opacity"},tickSize:null,tickWidth:{part:"ticks",vgProp:"strokeWidth"}};function _v(e){return e?.condition}const Zse=["domain","grid","labels","ticks","title"],mGe={grid:"grid",gridCap:"grid",gridColor:"grid",gridDash:"grid",gridDashOffset:"grid",gridOpacity:"grid",gridScale:"grid",gridWidth:"grid",orient:"main",bandPosition:"both",aria:"main",description:"main",domain:"main",domainCap:"main",domainColor:"main",domainDash:"main",domainDashOffset:"main",domainOpacity:"main",domainWidth:"main",format:"main",formatType:"main",labelAlign:"main",labelAngle:"main",labelBaseline:"main",labelBound:"main",labelColor:"main",labelFlush:"main",labelFlushOffset:"main",labelFont:"main",labelFontSize:"main",labelFontStyle:"main",labelFontWeight:"main",labelLimit:"main",labelLineHeight:"main",labelOffset:"main",labelOpacity:"main",labelOverlap:"main",labelPadding:"main",labels:"main",labelSeparation:"main",maxExtent:"main",minExtent:"main",offset:"both",position:"main",tickCap:"main",tickColor:"main",tickDash:"main",tickDashOffset:"main",tickMinStep:"both",tickOffset:"both",tickOpacity:"main",tickRound:"both",ticks:"main",tickSize:"main",tickWidth:"both",title:"main",titleAlign:"main",titleAnchor:"main",titleAngle:"main",titleBaseline:"main",titleColor:"main",titleFont:"main",titleFontSize:"main",titleFontStyle:"main",titleFontWeight:"main",titleLimit:"main",titleLineHeight:"main",titleOpacity:"main",titlePadding:"main",titleX:"main",titleY:"main",encode:"both",scale:"both",tickBand:"both",tickCount:"both",tickExtra:"both",translate:"both",values:"both",zindex:"both"},Jse={orient:1,aria:1,bandPosition:1,description:1,domain:1,domainCap:1,domainColor:1,domainDash:1,domainDashOffset:1,domainOpacity:1,domainWidth:1,format:1,formatType:1,grid:1,gridCap:1,gridColor:1,gridDash:1,gridDashOffset:1,gridOpacity:1,gridWidth:1,labelAlign:1,labelAngle:1,labelBaseline:1,labelBound:1,labelColor:1,labelFlush:1,labelFlushOffset:1,labelFont:1,labelFontSize:1,labelFontStyle:1,labelFontWeight:1,labelLimit:1,labelLineHeight:1,labelOffset:1,labelOpacity:1,labelOverlap:1,labelPadding:1,labels:1,labelSeparation:1,maxExtent:1,minExtent:1,offset:1,position:1,tickBand:1,tickCap:1,tickColor:1,tickCount:1,tickDash:1,tickDashOffset:1,tickExtra:1,tickMinStep:1,tickOffset:1,tickOpacity:1,tickRound:1,ticks:1,tickSize:1,tickWidth:1,title:1,titleAlign:1,titleAnchor:1,titleAngle:1,titleBaseline:1,titleColor:1,titleFont:1,titleFontSize:1,titleFontStyle:1,titleFontWeight:1,titleLimit:1,titleLineHeight:1,titleOpacity:1,titlePadding:1,titleX:1,titleY:1,translate:1,values:1,zindex:1},eae={...Jse,style:1,labelExpr:1,encoding:1};function tae(e){return!!eae[e]}ce(eae);const nae=ce({axis:1,axisBand:1,axisBottom:1,axisDiscrete:1,axisLeft:1,axisPoint:1,axisQuantitative:1,axisRight:1,axisTemporal:1,axisTop:1,axisX:1,axisXBand:1,axisXDiscrete:1,axisXPoint:1,axisXQuantitative:1,axisXTemporal:1,axisY:1,axisYBand:1,axisYDiscrete:1,axisYPoint:1,axisYQuantitative:1,axisYTemporal:1});function qc(e){return"mark"in e}class eT{constructor(n,t){this.name=n,this.run=t}hasMatchingType(n){return!!qc(n)&&function GWe(e){return Oa(e)?e.type:e}(n.mark)===this.name}}function Ph(e,n){const t=e&&e[n];return!!t&&(oe(t)?wh(t,i=>!!i.field):he(t)||G2(t))}function iae(e,n){const t=e&&e[n];return!!t&&(oe(t)?wh(t,i=>!!i.field):he(t)||Vl(t)||gv(t))}function rae(e,n){if(Qn(n)){const t=e[n];if((he(t)||Vl(t))&&(pse(t.type)||he(t)&&t.timeUnit))return iae(e,PL(n))}return!1}function C5(e){return wh(Tje,n=>{if(Ph(e,n)){const t=e[n];if(oe(t))return wh(t,i=>!!i.aggregate);{const i=zl(t);return i&&!!i.aggregate}}return!1})}function oae(e,n){const t=[],i=[],r=[],o=[],s={};return x5(e,(a,l)=>{if(he(a)){const{field:c,aggregate:u,bin:d,timeUnit:f,...h}=a;if(u||f||d){const g=v5(a)?.title;let m=ye(a,{forAs:!0});const _={...g?[]:{title:Hm(a,n,{allowDisabling:!0})},...h,field:m};if(u){let y;if(Td(u)?(y="argmax",m=ye({op:"argmax",field:u.argmax},{forAs:!0}),_.field=`${m}.${c}`):Uc(u)?(y="argmin",m=ye({op:"argmin",field:u.argmin},{forAs:!0}),_.field=`${m}.${c}`):"boxplot"!==u&&"errorbar"!==u&&"errorband"!==u&&(y=u),y){const v={op:y,as:m};c&&(v.field=c),o.push(v)}}else if(t.push(m),qr(a)&&_n(d))i.push({bin:d,field:c,as:m}),t.push(ye(a,{binSuffix:"end"})),mv(a,l)&&t.push(ye(a,{binSuffix:"range"})),Qn(l)&&(s[`${l}2`]={field:`${m}_end`}),_.bin="binned",Coe(l)||(_.type=kh);else if(f&&!Mh(f)){r.push({timeUnit:f,field:c,as:m});const y=qr(a)&&a.type!==$m&&"time";y&&(l===sv||l===Eh?_.formatType=y:function Fje(e){return!!LL[e]}(l)?_.legend={formatType:y,..._.legend}:Qn(l)&&(_.axis={formatType:y,..._.axis}))}s[l]=_}else t.push(c),s[l]=e[l]}else s[l]=e[l]}),{bins:i,timeUnits:r,aggregate:o,groupby:t,encoding:s}}function _Ge(e,n,t){const i=function Pje(e,n){return function $je(e){switch(e){case _o:case Rl:case Fl:case M2:case av:case T2:case Eh:case D2:case Pm:case Vc:case wd:case Cd:case xd:case S2:case Nc:case Pc:return Toe;case Mn:case Ci:case bd:case Nm:case Da:case Ia:return Lje;case Sa:case Ol:case Ma:case Bs:return{area:"always",bar:"always",image:"always",rect:"always",rule:"always",circle:"binned",point:"binned",square:"binned",tick:"binned",line:"binned",trail:"binned"};case Bc:return{point:"always",tick:"always",rule:"always",circle:"always",square:"always",bar:"always",text:"always",line:"always",trail:"always"};case Ed:return{line:"always",point:"always",tick:"always",rule:"always",circle:"always",square:"always",bar:"always",geoshape:"always"};case yo:return{point:"always",geoshape:"always"};case sv:return{text:"always"};case xh:return{point:"always",square:"always",text:"always"};case I2:return{image:"always"};case $s:case Ta:return{text:"always",arc:"always"};case $c:case Lc:return{arc:"always"}}}(e)[n]}(n,t);if(!i)return!1;if("binned"===i){const r=e[n===Sa?Mn:Ci];return!!(he(r)&&he(e[n])&&qi(r.bin))}return!0}function tT(e,n){const t={};for(const i of ce(e)){const r=Yse(e[i],i,n,{compositeMark:!0});t[i]=r}return t}function x5(e,n,t){if(e)for(const i of ce(e)){const r=e[i];if(oe(r))for(const o of r)n.call(t,o,i);else n.call(t,r,i)}}function sae(e,n){return ce(n).reduce((t,i)=>{switch(i){case Mn:case Ci:case D2:case M2:case I2:case Sa:case Ol:case bd:case Nm:case $s:case $c:case Ta:case Lc:case Da:case Ia:case Ma:case Bs:case sv:case yo:case xh:case Eh:return t;case Pm:if("line"===e||"trail"===e)return t;case av:case T2:{const r=n[i];if(oe(r)||he(r))for(const o of Ce(r))o.aggregate||t.push(ye(o,{}));return t}case Bc:if("trail"===e)return t;case _o:case Rl:case Fl:case Vc:case wd:case Cd:case Ed:case xd:{const r=zl(n[i]);return r&&!r.aggregate&&t.push(ye(r,{})),t}}},[])}function E5(e,n,t,i=!0){if("tooltip"in t)return{tooltip:t.tooltip};const r=e.map(({fieldPrefix:s,titlePrefix:a})=>{const l=i?` of ${S5(n)}`:"";return{field:s+n.field,type:n.type,title:Pe(a)?{signal:`${a}"${escape(l)}"`}:a+l}}),o=function vGe(e){const n=[];for(const t of ce(e))if(Ph(e,t)){const r=Ce(e[t]);for(const o of r)he(o)?n.push(o):G2(o)&&n.push(o.condition)}return n}(t).map(oGe);return{tooltip:[...r,...kl(o,Et)]}}function S5(e){const{title:n,field:t}=e;return Xn(n,t)}function T5(e,n,t,i,r){const{scale:o,axis:s}=t;return({partName:a,mark:l,positionPrefix:c,endPositionPrefix:u,extraEncoding:d={}})=>{const f=S5(t);return aae(e,a,r,{mark:l,encoding:{[n]:{field:`${c}_${t.field}`,type:t.type,...void 0!==f?{title:f}:{},...void 0!==o?{scale:o}:{},...void 0!==s?{axis:s}:{}},...xe(u)?{[`${n}2`]:{field:`${u}_${t.field}`}}:{},...i,...d}})}}function aae(e,n,t,i){const{clip:r,color:o,opacity:s}=e,a=e.type;return e[n]||void 0===e[n]&&t[n]?[{...i,mark:{...t[n],...r?{clip:r}:{},...o?{color:o}:{},...s?{opacity:s}:{},...Oa(i.mark)?i.mark:{type:i.mark},style:`${a}-${String(n)}`,...Iu(e[n])?{}:e[n]}}]:[]}function lae(e,n,t){const{encoding:i}=e,r="vertical"===n?"y":"x",s=i[`${r}2`],a=i[`${r}Error`],l=i[`${r}Error2`];return{continuousAxisChannelDef:nT(i[r],t),continuousAxisChannelDef2:nT(s,t),continuousAxisChannelDefError:nT(a,t),continuousAxisChannelDefError2:nT(l,t),continuousAxis:r}}function nT(e,n){if(e?.aggregate){const{aggregate:t,...i}=e;return t!==n&&fe(function Yqe(e,n){return`Continuous axis should not have customized aggregation function ${e}; ${n} already agregates the axis.`}(t,n)),i}return e}function cae(e,n){const{mark:t,encoding:i}=e,{x:r,y:o}=i;if(Oa(t)&&t.orient)return t.orient;if(Od(r)){if(Od(o)){const s=he(r)&&r.aggregate,a=he(o)&&o.aggregate;if(!s&&a===n)return"vertical";if(!a&&s===n)return"horizontal";if(s===n&&a===n)throw new Error("Both x and y cannot have aggregate");return qm(o)&&!qm(r)?"horizontal":"vertical"}return"horizontal"}if(Od(o))return"vertical";throw new Error(`Need a valid continuous axis for ${n}s`)}const iT="boxplot",xGe=new eT(iT,dae);function uae(e){return Ft(e)?"tukey":e}function dae(e,{config:n}){e={...e,encoding:tT(e.encoding,n)};const{mark:t,encoding:i,params:r,projection:o,...s}=e,a=Oa(t)?t:{type:t};r&&fe(joe("boxplot"));const l=a.extent??n.boxplot.extent,c=Zt("size",a,n),u=a.invalid,d=uae(l),{bins:f,timeUnits:h,transform:p,continuousAxisChannelDef:g,continuousAxis:m,groupby:_,aggregate:y,encodingWithoutContinuousAxis:v,ticksOrient:b,boxOrient:w,customTooltipWithoutAggregatedField:x}=function EGe(e,n,t){const i=cae(e,iT),{continuousAxisChannelDef:r,continuousAxis:o}=lae(e,i,iT),s=r.field,a=uae(n),l=[...fae(s),{op:"median",field:s,as:`mid_box_${s}`},{op:"min",field:s,as:("min-max"===a?"lower_whisker_":"min_")+s},{op:"max",field:s,as:("min-max"===a?"upper_whisker_":"max_")+s}],c="min-max"===a||"tukey"===a?[]:[{calculate:`datum["upper_box_${s}"] - datum["lower_box_${s}"]`,as:`iqr_${s}`},{calculate:`min(datum["upper_box_${s}"] + datum["iqr_${s}"] * ${n}, datum["max_${s}"])`,as:`upper_whisker_${s}`},{calculate:`max(datum["lower_box_${s}"] - datum["iqr_${s}"] * ${n}, datum["min_${s}"])`,as:`lower_whisker_${s}`}],{[o]:u,...d}=e.encoding,{customTooltipWithoutAggregatedField:f,filteredEncoding:h}=function wGe(e){const{tooltip:n,...t}=e;if(!n)return{filteredEncoding:t};let i,r;if(oe(n)){for(const o of n)o.aggregate?(i||(i=[]),i.push(o)):(r||(r=[]),r.push(o));i&&(t.tooltip=i)}else n.aggregate?t.tooltip=n:r=n;return oe(r)&&1===r.length&&(r=r[0]),{customTooltipWithoutAggregatedField:r,filteredEncoding:t}}(d),{bins:p,timeUnits:g,aggregate:m,groupby:_,encoding:y}=oae(h,t),v="vertical"===i?"horizontal":"vertical",b=i;return{bins:p,timeUnits:g,transform:[...p,...g,{aggregate:[...m,...l],groupby:_},...c],groupby:_,aggregate:m,continuousAxisChannelDef:r,continuousAxis:o,encodingWithoutContinuousAxis:y,ticksOrient:v,boxOrient:b,customTooltipWithoutAggregatedField:f}}(e,l,n),{color:C,size:S,...A}=v,M=Ne=>T5(a,m,g,Ne,n.boxplot),N=M(A),V=M(v),P=M({...A,...S?{size:S}:{}}),E=E5([{fieldPrefix:"min-max"===d?"upper_whisker_":"max_",titlePrefix:"Max"},{fieldPrefix:"upper_box_",titlePrefix:"Q3"},{fieldPrefix:"mid_box_",titlePrefix:"Median"},{fieldPrefix:"lower_box_",titlePrefix:"Q1"},{fieldPrefix:"min-max"===d?"lower_whisker_":"min_",titlePrefix:"Min"}],g,v),D={type:"tick",color:"black",opacity:1,orient:b,invalid:u,aria:!1},I="min-max"===d?E:E5([{fieldPrefix:"upper_whisker_",titlePrefix:"Upper Whisker"},{fieldPrefix:"lower_whisker_",titlePrefix:"Lower Whisker"}],g,v),O=[...N({partName:"rule",mark:{type:"rule",invalid:u,aria:!1},positionPrefix:"lower_whisker",endPositionPrefix:"lower_box",extraEncoding:I}),...N({partName:"rule",mark:{type:"rule",invalid:u,aria:!1},positionPrefix:"upper_box",endPositionPrefix:"upper_whisker",extraEncoding:I}),...N({partName:"ticks",mark:D,positionPrefix:"lower_whisker",extraEncoding:I}),...N({partName:"ticks",mark:D,positionPrefix:"upper_whisker",extraEncoding:I})],T=[..."tukey"!==d?O:[],...V({partName:"box",mark:{type:"bar",...c?{size:c}:{},orient:w,invalid:u,ariaRoleDescription:"box"},positionPrefix:"lower_box",endPositionPrefix:"upper_box",extraEncoding:E}),...P({partName:"median",mark:{type:"tick",invalid:u,...Ee(n.boxplot.median)&&n.boxplot.median.color?{color:n.boxplot.median.color}:{},...c?{size:c}:{},orient:b,aria:!1},positionPrefix:"mid_box",extraEncoding:E})];if("min-max"===d)return{...s,transform:(s.transform??[]).concat(p),layer:T};const R=`datum["lower_box_${g.field}"]`,F=`datum["upper_box_${g.field}"]`,z=`(${F} - ${R})`,H=`${R} - ${l} * ${z}`,j=`${F} + ${l} * ${z}`,U=`datum["${g.field}"]`,Q={joinaggregate:fae(g.field),groupby:_},ue={transform:[{filter:`(${H} <= ${U}) && (${U} <= ${j})`},{aggregate:[{op:"min",field:g.field,as:`lower_whisker_${g.field}`},{op:"max",field:g.field,as:`upper_whisker_${g.field}`},{op:"min",field:`lower_box_${g.field}`,as:`lower_box_${g.field}`},{op:"max",field:`upper_box_${g.field}`,as:`upper_box_${g.field}`},...y],groupby:_}],layer:O},{tooltip:te,...me}=A,{scale:X,axis:se}=g,ae=S5(g),K=mo(se,["title"]),be=aae(a,"outliers",n.boxplot,{transform:[{filter:`(${U} < ${H}) || (${U} > ${j})`}],mark:"point",encoding:{[m]:{field:g.field,type:g.type,...void 0!==ae?{title:ae}:{},...void 0!==X?{scale:X}:{},...an(K)?{}:{axis:K}},...me,...C?{color:C}:{},...x?{tooltip:x}:{}}})[0];let Ae;const Ge=[...f,...h,Q];return be?Ae={transform:Ge,layer:[be,ue]}:(Ae=ue,Ae.transform.unshift(...Ge)),{...s,layer:[Ae,{transform:p,layer:T}]}}function fae(e){return[{op:"q1",field:e,as:`lower_box_${e}`},{op:"q3",field:e,as:`upper_box_${e}`}]}const D5="errorbar",TGe=new eT(D5,hae);function hae(e,{config:n}){e={...e,encoding:tT(e.encoding,n)};const{transform:t,continuousAxisChannelDef:i,continuousAxis:r,encodingWithoutContinuousAxis:o,ticksOrient:s,markDef:a,outerSpec:l,tooltipEncoding:c}=pae(e,D5,n);delete o.size;const u=T5(a,r,i,o,n.errorbar),d=a.thickness,f=a.size,h={type:"tick",orient:s,aria:!1,...void 0!==d?{thickness:d}:{},...void 0!==f?{size:f}:{}},p=[...u({partName:"ticks",mark:h,positionPrefix:"lower",extraEncoding:c}),...u({partName:"ticks",mark:h,positionPrefix:"upper",extraEncoding:c}),...u({partName:"rule",mark:{type:"rule",ariaRoleDescription:"errorbar",...void 0!==d?{size:d}:{}},positionPrefix:"lower",endPositionPrefix:"upper",extraEncoding:c})];return{...l,transform:t,...p.length>1?{layer:p}:{...p[0]}}}function pae(e,n,t){const{mark:i,encoding:r,params:o,projection:s,...a}=e,l=Oa(i)?i:{type:i};o&&fe(joe(n));const{orient:c,inputType:u}=function DGe(e,n){const{encoding:t}=e;if(function IGe(e){return(ot(e.x)||ot(e.y))&&!ot(e.x2)&&!ot(e.y2)&&!ot(e.xError)&&!ot(e.xError2)&&!ot(e.yError)&&!ot(e.yError2)}(t))return{orient:cae(e,n),inputType:"raw"};const i=function MGe(e){return ot(e.x2)||ot(e.y2)}(t),r=function AGe(e){return ot(e.xError)||ot(e.xError2)||ot(e.yError)||ot(e.yError2)}(t),o=t.x,s=t.y;if(i){if(r)throw new Error(`${n} cannot be both type aggregated-upper-lower and aggregated-error`);const a=t.x2,l=t.y2;if(ot(a)&&ot(l))throw new Error(`${n} cannot have both x2 and y2`);if(ot(a)){if(Od(o))return{orient:"horizontal",inputType:"aggregated-upper-lower"};throw new Error(`Both x and x2 have to be quantitative in ${n}`)}if(ot(l)){if(Od(s))return{orient:"vertical",inputType:"aggregated-upper-lower"};throw new Error(`Both y and y2 have to be quantitative in ${n}`)}throw new Error("No ranged axis")}{const a=t.xError,c=t.yError,u=t.yError2;if(ot(t.xError2)&&!ot(a))throw new Error(`${n} cannot have xError2 without xError`);if(ot(u)&&!ot(c))throw new Error(`${n} cannot have yError2 without yError`);if(ot(a)&&ot(c))throw new Error(`${n} cannot have both xError and yError with both are quantiative`);if(ot(a)){if(Od(o))return{orient:"horizontal",inputType:"aggregated-error"};throw new Error("All x, xError, and xError2 (if exist) have to be quantitative")}if(ot(c)){if(Od(s))return{orient:"vertical",inputType:"aggregated-error"};throw new Error("All y, yError, and yError2 (if exist) have to be quantitative")}throw new Error("No ranged axis")}}(e,n),{continuousAxisChannelDef:d,continuousAxisChannelDef2:f,continuousAxisChannelDefError:h,continuousAxisChannelDefError2:p,continuousAxis:g}=lae(e,c,n),{errorBarSpecificAggregate:m,postAggregateCalculates:_,tooltipSummary:y,tooltipTitleWithFieldName:v}=function kGe(e,n,t,i,r,o,s,a){let l=[],c=[];const u=n.field;let d,f=!1;if("raw"===o){const h=e.center?e.center:e.extent?"iqr"===e.extent?"median":"mean":a.errorbar.center,p=e.extent?e.extent:"mean"===h?"stderr":"iqr";if("median"===h!=("iqr"===p)&&fe(function Kqe(e,n,t){return`${e} is not usually used with ${n} for ${t}.`}(h,p,s)),"stderr"===p||"stdev"===p)l=[{op:p,field:u,as:`extent_${u}`},{op:h,field:u,as:`center_${u}`}],c=[{calculate:`datum["center_${u}"] + datum["extent_${u}"]`,as:`upper_${u}`},{calculate:`datum["center_${u}"] - datum["extent_${u}"]`,as:`lower_${u}`}],d=[{fieldPrefix:"center_",titlePrefix:rv(h)},{fieldPrefix:"upper_",titlePrefix:gae(h,p,"+")},{fieldPrefix:"lower_",titlePrefix:gae(h,p,"-")}],f=!0;else{let g,m,_;"ci"===p?(g="mean",m="ci0",_="ci1"):(g="median",m="q1",_="q3"),l=[{op:m,field:u,as:`lower_${u}`},{op:_,field:u,as:`upper_${u}`},{op:g,field:u,as:`center_${u}`}],d=[{fieldPrefix:"upper_",titlePrefix:Hm({field:u,aggregate:_,type:"quantitative"},a,{allowDisabling:!1})},{fieldPrefix:"lower_",titlePrefix:Hm({field:u,aggregate:m,type:"quantitative"},a,{allowDisabling:!1})},{fieldPrefix:"center_",titlePrefix:Hm({field:u,aggregate:g,type:"quantitative"},a,{allowDisabling:!1})}]}}else{(e.center||e.extent)&&fe(function Gqe(e,n){return`${n?"extent ":""}${n&&e?"and ":""}${e?"center ":""}${n&&e?"are ":"is "}not needed when data are aggregated.`}(e.center,e.extent)),"aggregated-upper-lower"===o?(d=[],c=[{calculate:`datum["${t.field}"]`,as:`upper_${u}`},{calculate:`datum["${u}"]`,as:`lower_${u}`}]):"aggregated-error"===o&&(d=[{fieldPrefix:"",titlePrefix:u}],c=[{calculate:`datum["${u}"] + datum["${i.field}"]`,as:`upper_${u}`}],c.push(r?{calculate:`datum["${u}"] + datum["${r.field}"]`,as:`lower_${u}`}:{calculate:`datum["${u}"] - datum["${i.field}"]`,as:`lower_${u}`}));for(const h of c)d.push({fieldPrefix:h.as.substring(0,6),titlePrefix:Ch(Ch(h.calculate,'datum["',""),'"]',"")})}return{postAggregateCalculates:c,errorBarSpecificAggregate:l,tooltipSummary:d,tooltipTitleWithFieldName:f}}(l,d,f,h,p,u,n,t),{[g]:b,["x"===g?"x2":"y2"]:w,["x"===g?"xError":"yError"]:x,["x"===g?"xError2":"yError2"]:C,...S}=r,{bins:A,timeUnits:M,aggregate:N,groupby:V,encoding:P}=oae(S,t),E=[...N,...m],D="raw"!==u?[]:V,I=E5(y,d,P,v);return{transform:[...a.transform??[],...A,...M,...0===E.length?[]:[{aggregate:E,groupby:D}],..._],groupby:D,continuousAxisChannelDef:d,continuousAxis:g,encodingWithoutContinuousAxis:P,ticksOrient:"vertical"===c?"horizontal":"vertical",markDef:l,outerSpec:a,tooltipEncoding:I}}function gae(e,n,t){return`${rv(e)} ${t} ${n}`}const I5="errorband",RGe=new eT(I5,mae);function mae(e,{config:n}){e={...e,encoding:tT(e.encoding,n)};const{transform:t,continuousAxisChannelDef:i,continuousAxis:r,encodingWithoutContinuousAxis:o,markDef:s,outerSpec:a,tooltipEncoding:l}=pae(e,I5,n),c=s,u=T5(c,r,i,o,n.errorband),d=void 0!==e.encoding.x&&void 0!==e.encoding.y;let f={type:d?"area":"rect"},h={type:d?"line":"rule"};const p={...c.interpolate?{interpolate:c.interpolate}:{},...c.tension&&c.interpolate?{tension:c.tension}:{}};return d?(f={...f,...p,ariaRoleDescription:"errorband"},h={...h,...p,aria:!1}):c.interpolate?fe(Joe("interpolate")):c.tension&&fe(Joe("tension")),{...a,transform:t,layer:[...u({partName:"band",mark:f,positionPrefix:"lower",endPositionPrefix:"upper",extraEncoding:l}),...u({partName:"borders",mark:h,positionPrefix:"lower",extraEncoding:l}),...u({partName:"borders",mark:h,positionPrefix:"upper",extraEncoding:l})]}}const M5={};function A5(e,n,t){const i=new eT(e,n);M5[e]={normalizer:i,parts:t}}A5(iT,dae,["box","median","outliers","rule","ticks"]),A5(D5,hae,["ticks","rule"]),A5(I5,mae,["band","borders"]);const NGe=["gradientHorizontalMaxLength","gradientHorizontalMinLength","gradientVerticalMaxLength","gradientVerticalMinLength","unselectedOpacity"],_ae={titleAlign:"align",titleAnchor:"anchor",titleAngle:"angle",titleBaseline:"baseline",titleColor:"color",titleFont:"font",titleFontSize:"fontSize",titleFontStyle:"fontStyle",titleFontWeight:"fontWeight",titleLimit:"limit",titleLineHeight:"lineHeight",titleOrient:"orient",titlePadding:"offset"},yae={labelAlign:"align",labelAnchor:"anchor",labelAngle:"angle",labelBaseline:"baseline",labelColor:"color",labelFont:"font",labelFontSize:"fontSize",labelFontStyle:"fontStyle",labelFontWeight:"fontWeight",labelLimit:"limit",labelLineHeight:"lineHeight",labelOrient:"orient",labelPadding:"offset"},PGe=ce(_ae),LGe=ce(yae),vae=ce({header:1,headerRow:1,headerColumn:1,headerFacet:1}),bae=["size","shape","fill","stroke","strokeDash","strokeWidth","opacity"],wae={aria:1,clipHeight:1,columnPadding:1,columns:1,cornerRadius:1,description:1,direction:1,fillColor:1,format:1,formatType:1,gradientLength:1,gradientOpacity:1,gradientStrokeColor:1,gradientStrokeWidth:1,gradientThickness:1,gridAlign:1,labelAlign:1,labelBaseline:1,labelColor:1,labelFont:1,labelFontSize:1,labelFontStyle:1,labelFontWeight:1,labelLimit:1,labelOffset:1,labelOpacity:1,labelOverlap:1,labelPadding:1,labelSeparation:1,legendX:1,legendY:1,offset:1,orient:1,padding:1,rowPadding:1,strokeColor:1,symbolDash:1,symbolDashOffset:1,symbolFillColor:1,symbolLimit:1,symbolOffset:1,symbolOpacity:1,symbolSize:1,symbolStrokeColor:1,symbolStrokeWidth:1,symbolType:1,tickCount:1,tickMinStep:1,title:1,titleAlign:1,titleAnchor:1,titleBaseline:1,titleColor:1,titleFont:1,titleFontSize:1,titleFontStyle:1,titleFontWeight:1,titleLimit:1,titleLineHeight:1,titleOpacity:1,titleOrient:1,titlePadding:1,type:1,values:1,zindex:1},Na=(ce(wae),"_vgsid_"),BGe={point:{on:"click",fields:[Na],toggle:"event.shiftKey",resolve:"global",clear:"dblclick"},interval:{on:"[pointerdown, window:pointerup] > window:pointermove!",encodings:["x","y"],translate:"[pointerdown, window:pointerup] > window:pointermove!",zoom:"wheel!",mark:{fill:"#333",fillOpacity:.125,stroke:"white"},resolve:"global",clear:"dblclick"}};function k5(e){return"legend"===e||!!e?.legend}function O5(e){return k5(e)&&Ee(e)}function R5(e){return!!e?.select}function Cae(e){const n=[];for(const t of e||[]){if(R5(t))continue;const{expr:i,bind:r,...o}=t;if(r&&i){const s={...o,bind:r,init:i};n.push(s)}else{const s={...o,...i?{update:i}:{},...r?{bind:r}:{}};n.push(s)}}return n}function F5(e){return"concat"in e}function rT(e){return"vconcat"in e}function N5(e){return"hconcat"in e}function xae({step:e,offsetIsDiscrete:n}){return n?e.for??"offset":"position"}function Ul(e){return Ee(e)&&void 0!==e.step}function Eae(e){return e.view||e.width||e.height}const zGe=ce({align:1,bounds:1,center:1,columns:1,spacing:1});function P5(e,n){return e[n]??e["width"===n?"continuousWidth":"continuousHeight"]}function oT(e,n){const t=sT(e,n);return Ul(t)?t.step:Tae}function sT(e,n){return Xn(e[n]??e["width"===n?"discreteWidth":"discreteHeight"],{step:e.step})}const Tae=20,jGe={background:"white",padding:5,timeFormat:"%b %d, %Y",countTitle:"Count of Records",view:{continuousWidth:200,continuousHeight:200,step:Tae},mark:{color:"#4c78a8",invalid:"filter",timeUnitBandSize:1},arc:{},area:{},bar:{binSpacing:1,continuousBandSize:5,minBandSize:.25,timeUnitBandPosition:.5},circle:{},geoshape:{},image:{},line:{},point:{},rect:{binSpacing:0,continuousBandSize:5,minBandSize:.25,timeUnitBandPosition:.5},rule:{color:"black"},square:{},text:{color:"black"},tick:{thickness:1},trail:{},boxplot:{size:14,extent:1.5,box:{},median:{color:"white"},outliers:{},rule:{},ticks:null},errorbar:{center:"mean",rule:!0,ticks:!1},errorband:{band:{opacity:.3},borders:!1},scale:{pointPadding:.5,barBandPaddingInner:.1,rectBandPaddingInner:0,bandWithNestedOffsetPaddingInner:.2,bandWithNestedOffsetPaddingOuter:.2,minBandSize:2,minFontSize:8,maxFontSize:40,minOpacity:.3,maxOpacity:.8,minSize:9,minStrokeWidth:1,maxStrokeWidth:4,quantileCount:4,quantizeCount:4,zero:!0},projection:{},legend:{gradientHorizontalMaxLength:200,gradientHorizontalMinLength:100,gradientVerticalMaxLength:200,gradientVerticalMinLength:64,unselectedOpacity:.35},header:{titlePadding:10,labelPadding:10},headerColumn:{},headerRow:{},headerFacet:{},selection:BGe,style:{},title:{},facet:{spacing:20},concat:{spacing:20},normalizedNumberFormat:".0%"},Wc=["#4c78a8","#f58518","#e45756","#72b7b2","#54a24b","#eeca3b","#b279a2","#ff9da6","#9d755d","#bab0ac"],Dae={text:11,guideLabel:10,guideTitle:11,groupTitle:13,groupSubtitle:12},Iae={blue:Wc[0],orange:Wc[1],red:Wc[2],teal:Wc[3],green:Wc[4],yellow:Wc[5],purple:Wc[6],pink:Wc[7],brown:Wc[8],gray0:"#000",gray1:"#111",gray2:"#222",gray3:"#333",gray4:"#444",gray5:"#555",gray6:"#666",gray7:"#777",gray8:"#888",gray9:"#999",gray10:"#aaa",gray11:"#bbb",gray12:"#ccc",gray13:"#ddd",gray14:"#eee",gray15:"#fff"};function Mae(e){const n=ce(e||{}),t={};for(const i of n){const r=e[i];t[i]=_v(r)?koe(r):rs(r)}return t}const YGe=[...Ise,...nae,...vae,"background","padding","legend","lineBreak","scale","style","title","view"];function Aae(e={}){const{color:n,font:t,fontSize:i,selection:r,...o}=e,s=wg({},tt(jGe),t?function GGe(e){return{text:{font:e},style:{"guide-label":{font:e},"guide-title":{font:e},"group-title":{font:e},"group-subtitle":{font:e}}}}(t):{},n?function qGe(e={}){return{signals:[{name:"color",value:Ee(e)?{...Iae,...e}:Iae}],mark:{color:{signal:"color.blue"}},rule:{color:{signal:"color.gray0"}},text:{color:{signal:"color.gray0"}},style:{"guide-label":{fill:{signal:"color.gray0"}},"guide-title":{fill:{signal:"color.gray0"}},"group-title":{fill:{signal:"color.gray0"}},"group-subtitle":{fill:{signal:"color.gray0"}},cell:{stroke:{signal:"color.gray8"}}},axis:{domainColor:{signal:"color.gray13"},gridColor:{signal:"color.gray8"},tickColor:{signal:"color.gray13"}},range:{category:[{signal:"color.blue"},{signal:"color.orange"},{signal:"color.red"},{signal:"color.teal"},{signal:"color.green"},{signal:"color.yellow"},{signal:"color.purple"},{signal:"color.pink"},{signal:"color.brown"},{signal:"color.grey8"}]}}}(n):{},i?function WGe(e){return{signals:[{name:"fontSize",value:Ee(e)?{...Dae,...e}:Dae}],text:{fontSize:{signal:"fontSize.text"}},style:{"guide-label":{fontSize:{signal:"fontSize.guideLabel"}},"guide-title":{fontSize:{signal:"fontSize.guideTitle"}},"group-title":{fontSize:{signal:"fontSize.groupTitle"}},"group-subtitle":{fontSize:{signal:"fontSize.groupSubtitle"}}}}}(i):{},o||{});r&&Cg(s,"selection",r,!0);const a=mo(s,YGe);for(const l of["background","lineBreak","padding"])s[l]&&(a[l]=rs(s[l]));for(const l of Ise)s[l]&&(a[l]=bo(s[l]));for(const l of nae)s[l]&&(a[l]=Mae(s[l]));for(const l of vae)s[l]&&(a[l]=bo(s[l]));return s.legend&&(a.legend=bo(s.legend)),s.scale&&(a.scale=bo(s.scale)),s.style&&(a.style=function KGe(e){const n=ce(e),t={};for(const i of n)t[i]=Mae(e[i]);return t}(s.style)),s.title&&(a.title=bo(s.title)),s.view&&(a.view=bo(s.view)),a}const XGe=new Set(["view",...Tse]),QGe=["color","fontSize","background","padding","facet","concat","numberFormat","numberFormatType","normalizedNumberFormat","normalizedNumberFormatType","timeFormat","countTitle","header","axisQuantitative","axisTemporal","axisDiscrete","axisPoint","axisXBand","axisXPoint","axisXDiscrete","axisXQuantitative","axisXTemporal","axisYBand","axisYPoint","axisYDiscrete","axisYQuantitative","axisYTemporal","scale","selection","overlay"],ZGe={view:["continuousWidth","continuousHeight","discreteWidth","discreteHeight","step"],area:["line","point"],bar:["binSpacing","continuousBandSize","discreteBandSize","minBandSize"],rect:["binSpacing","continuousBandSize","discreteBandSize","minBandSize"],line:["point"],tick:["bandSize","thickness"]};function tKe(e,n,t,i){"view"===n&&(t="cell");const o={...i?e[n][i]:e[n],...e.style[t??n]};an(o)||(e.style[t??n]=o),i||delete e[n]}function aT(e){return"layer"in e}class L5{map(n,t){return q2(n)?this.mapFacet(n,t):function nKe(e){return"repeat"in e}(n)?this.mapRepeat(n,t):N5(n)?this.mapHConcat(n,t):rT(n)?this.mapVConcat(n,t):F5(n)?this.mapConcat(n,t):this.mapLayerOrUnit(n,t)}mapLayerOrUnit(n,t){if(aT(n))return this.mapLayer(n,t);if(qc(n))return this.mapUnit(n,t);throw new Error(jL(n))}mapLayer(n,t){return{...n,layer:n.layer.map(i=>this.mapLayerOrUnit(i,t))}}mapHConcat(n,t){return{...n,hconcat:n.hconcat.map(i=>this.map(i,t))}}mapVConcat(n,t){return{...n,vconcat:n.vconcat.map(i=>this.map(i,t))}}mapConcat(n,t){const{concat:i,...r}=n;return{...r,concat:i.map(o=>this.map(o,t))}}mapFacet(n,t){return{...n,spec:this.map(n.spec,t)}}mapRepeat(n,t){return{...n,spec:this.map(n.spec,t)}}}const rKe={zero:1,center:1,normalize:1},sKe=new Set([xse,B2,$2,U2,z2,u5,d5,V2,Ese,c5]),aKe=new Set([B2,$2,xse]);function Wm(e){return he(e)&&"quantitative"===zm(e)&&!e.bin}function kae(e,n,{orient:t,type:i}){const r="x"===n?"y":"radius",o="x"===n&&["bar","area"].includes(i),s=e[n],a=e[r];if(he(s)&&he(a))if(Wm(s)&&Wm(a)){if(s.stack)return n;if(a.stack)return r;const l=he(s)&&!!s.aggregate;if(l!==(he(a)&&!!a.aggregate))return l?n:r;if(o){if("vertical"===t)return r;if("horizontal"===t)return n}}else{if(Wm(s))return n;if(Wm(a))return r}else{if(Wm(s))return o&&"vertical"===t?void 0:n;if(Wm(a))return o&&"horizontal"===t?void 0:r}}function Oae(e,n){const t=Oa(e)?e:{type:e},i=t.type;if(!sKe.has(i))return null;const r=kae(n,"x",t)||kae(n,"theta",t);if(!r)return null;const o=n[r],s=he(o)?ye(o,{}):void 0,a=function lKe(e){switch(e){case"x":return"y";case"y":return"x";case"theta":return"radius";case"radius":return"theta"}}(r),l=[],c=new Set;if(n[a]){const g=n[a],m=he(g)?ye(g,{}):void 0;m&&m!==s&&(l.push(a),c.add(m))}const u="x"===a?"xOffset":"yOffset",d=n[u],f=he(d)?ye(d,{}):void 0;f&&f!==s&&(l.push(u),c.add(f));const h=kje.reduce((g,m)=>{if("tooltip"!==m&&Ph(n,m)){const _=n[m];for(const y of Ce(_)){const v=zl(y);if(v.aggregate)continue;const b=ye(v,{});(!b||!c.has(b))&&g.push({channel:m,fieldDef:v})}}return g},[]);let p;return void 0!==o.stack?p=Iu(o.stack)?o.stack?"zero":null:o.stack:aKe.has(i)&&(p="zero"),!p||!function oKe(e){return e in rKe}(p)||C5(n)&&0===h.length?null:o?.scale?.type&&o?.scale?.type!==wo.LINEAR?(o?.stack&&fe(function jqe(e){return`Cannot stack non-linear scale (${e}).`}(o.scale.type)),null):ot(n[Nl(r)])?(void 0!==o.stack&&fe(function Hqe(e){return`Cannot stack "${e}" if there is already "${e}2".`}(r)),null):(he(o)&&o.aggregate&&!Hje.has(o.aggregate)&&fe(function qqe(e){return`Stacking is applied even though the aggregate function is non-summative ("${e}").`}(o.aggregate)),{groupbyChannels:l,groupbyFields:c,fieldChannel:r,impute:null!==o.impute&&Ad(i),stackBy:h,offset:p})}function Rae(e,n,t){const i=bo(e),r=Zt("orient",i,t);if(i.orient=function fKe(e,n,t){switch(e){case z2:case u5:case d5:case Ese:case PWe:case NWe:return}const{x:i,y:r,x2:o,y2:s}=n;switch(e){case B2:if(he(i)&&(qi(i.bin)||he(r)&&r.aggregate&&!i.aggregate))return"vertical";if(he(r)&&(qi(r.bin)||he(i)&&i.aggregate&&!r.aggregate))return"horizontal";if(s||o){if(t)return t;if(!o)return(he(i)&&i.type===kh&&!_n(i.bin)||K2(i))&&he(r)&&qi(r.bin)?"horizontal":"vertical";if(!s)return(he(r)&&r.type===kh&&!_n(r.bin)||K2(r))&&he(i)&&qi(i.bin)?"vertical":"horizontal"}case U2:if(o&&(!he(i)||!qi(i.bin))&&s&&(!he(r)||!qi(r.bin)))return;case $2:if(s)return he(r)&&qi(r.bin)?"horizontal":"vertical";if(o)return he(i)&&qi(i.bin)?"vertical":"horizontal";if(e===U2){if(i&&!r)return"vertical";if(r&&!i)return"horizontal"}case V2:case c5:{const a=Hse(i),l=Hse(r);if(t)return t;if(a&&!l)return"tick"!==e?"horizontal":"vertical";if(!a&&l)return"tick"!==e?"vertical":"horizontal";if(a&&l)return"vertical";{const c=qr(i)&&i.type===$m,u=qr(r)&&r.type===$m;if(c&&!u)return"vertical";if(!c&&u)return"horizontal"}return}}return"vertical"}(i.type,n,r),void 0!==r&&r!==i.orient&&fe(function Dqe(e,n){return`Specified orient "${e}" overridden with "${n}".`}(i.orient,r)),"bar"===i.type&&i.orient){const a=Zt("cornerRadiusEnd",i,t);if(void 0!==a){const l="horizontal"===i.orient&&n.x2||"vertical"===i.orient&&n.y2?["cornerRadius"]:HWe[i.orient];for(const c of l)i[c]=a;void 0!==i.cornerRadiusEnd&&delete i.cornerRadiusEnd}}return void 0===Zt("opacity",i,t)&&(i.opacity=function uKe(e,n){if(St([z2,c5,u5,d5],e)&&!C5(n))return.7}(i.type,n)),void 0===Zt("cursor",i,t)&&(i.cursor=function cKe(e,n,t){return n.href||e.href||Zt("href",e,t)?"pointer":e.cursor}(i,n,t)),i}function hKe(e){const{point:n,line:t,...i}=e;return ce(i).length>1?i:i.type}function pKe(e){for(const n of["line","area","rule","trail"])e[n]&&(e={...e,[n]:mo(e[n],["point","line"])});return e}function $5(e,n={},t){return"transparent"===e.point?{opacity:0}:e.point?Ee(e.point)?e.point:{}:void 0!==e.point?null:n.point||t.shape?Ee(n.point)?n.point:{}:void 0}function Fae(e,n={}){return e.line?!0===e.line?{}:e.line:void 0!==e.line?null:n.line?!0===n.line?{}:n.line:void 0}class gKe{constructor(){this.name="path-overlay"}hasMatchingType(n,t){if(qc(n)){const{mark:i,encoding:r}=n,o=Oa(i)?i:{type:i};switch(o.type){case"line":case"rule":case"trail":return!!$5(o,t[o.type],r);case"area":return!!$5(o,t[o.type],r)||!!Fae(o,t[o.type])}}return!1}run(n,t,i){const{config:r}=t,{params:o,projection:s,mark:a,name:l,encoding:c,...u}=n,d=tT(c,r),f=Oa(a)?a:{type:a},h=$5(f,r[f.type],d),p="area"===f.type&&Fae(f,r[f.type]),g=[{name:l,...o?{params:o}:{},mark:hKe({..."area"===f.type&&void 0===f.opacity&&void 0===f.fillOpacity?{opacity:.7}:{},...f}),encoding:mo(d,["shape"])}],m=Oae(Rae(f,d,r),d);let _=d;if(m){const{fieldChannel:y,offset:v}=m;_={...d,[y]:{...d[y],...v?{stack:v}:{}}}}return _=mo(_,["y2","x2"]),p&&g.push({...s?{projection:s}:{},mark:{type:"line",...Rm(f,["clip","interpolate","tension","tooltip"]),...p},encoding:_}),h&&g.push({...s?{projection:s}:{},mark:{type:"point",opacity:1,filled:!0,...Rm(f,["clip","tooltip"]),...h},encoding:_}),i({...u,layer:g},{...t,config:pKe(r)})}}function mKe(e,n){return n?pv(e)?$ae(e,n):Nae(e,n):e}function B5(e,n){return n?$ae(e,n):e}function V5(e,n,t){const i=n[e];return function iGe(e){return e&&!xe(e)&&"repeat"in e}(i)?i.repeat in t?{...n,[e]:t[i.repeat]}:void fe(function aqe(e){return`Unknown repeated value "${e}".`}(i.repeat)):n}function Nae(e,n){if(void 0!==(e=V5("field",e,n))){if(null===e)return null;if(y5(e)&&Bl(e.sort)){const t=V5("field",e.sort,n);e={...e,...t?{sort:t}:{}}}return e}}function Pae(e,n){if(he(e))return Nae(e,n);{const t=V5("datum",e,n);return t!==e&&!t.type&&(t.type="nominal"),t}}function Lae(e,n){if(!ot(e)){if(gv(e)){const t=Pae(e.condition,n);if(t)return{...e,condition:t};{const{condition:i,...r}=e;return r}}return e}{const t=Pae(e,n);if(t)return t;if(W2(e))return{condition:e.condition}}}function $ae(e,n){const t={};for(const i in e)if($e(e,i)){const r=e[i];if(oe(r))t[i]=r.map(o=>Lae(o,n)).filter(o=>o);else{const o=Lae(r,n);void 0!==o&&(t[i]=o)}}return t}class _Ke{constructor(){this.name="RuleForRangedLine"}hasMatchingType(n){if(qc(n)){const{encoding:t,mark:i}=n;if("line"===i||Oa(i)&&"line"===i.type)for(const r of Ije){const s=t[Sh(r)];if(t[r]&&(he(s)&&!qi(s.bin)||Vl(s)))return!0}}return!1}run(n,t,i){const{encoding:r,mark:o}=n;return fe(function Tqe(e,n){return`Line mark is for continuous lines and thus cannot be used with ${e&&n?"x2 and y2":e?"x2":"y2"}. We will use the rule mark (line segments) instead.`}(!!r.x2,!!r.y2)),i({...n,mark:Ee(o)?{...o,type:"rule"}:"rule"},t)}}function Bae({parentEncoding:e,encoding:n={},layer:t}){let i={};if(e){const r=new Set([...ce(e),...ce(n)]);for(const o of r){const s=n[o],a=e[o];if(ot(s)){const l={...a,...s};i[o]=l}else gv(s)?i[o]={...s,condition:{...a,...s.condition}}:s||null===s?i[o]=s:(t||Fa(a)||Pe(a)||ot(a)||oe(a))&&(i[o]=a)}}else i=n;return!i||an(i)?void 0:i}function Vae(e){const{parentProjection:n,projection:t}=e;return n&&t&&fe(function hqe(e){const{parentProjection:n,projection:t}=e;return`Layer's shared projection ${ln(n)} is overridden by a child projection ${ln(t)}.`}({parentProjection:n,projection:t})),t??n}function z5(e){return"filter"in e}function vKe(e){return void 0!==e?.stop}function zae(e){return"lookup"in e}function CKe(e){return"pivot"in e}function xKe(e){return"density"in e}function EKe(e){return"quantile"in e}function SKe(e){return"regression"in e}function TKe(e){return"loess"in e}function DKe(e){return"sample"in e}function IKe(e){return"window"in e}function MKe(e){return"joinaggregate"in e}function AKe(e){return"flatten"in e}function kKe(e){return"calculate"in e}function Uae(e){return"bin"in e}function OKe(e){return"impute"in e}function RKe(e){return"timeUnit"in e}function FKe(e){return"aggregate"in e}function NKe(e){return"stack"in e}function PKe(e){return"fold"in e}function LKe(e){return"extent"in e&&!("density"in e)}function Hae(e,n){const{transform:t,...i}=e;return t?{...i,transform:t.map(o=>{if(z5(o))return{filter:U5(o,n)};if(Uae(o)&&Th(o.bin))return{...o,bin:qae(o.bin)};if(zae(o)){const{selection:s,...a}=o.from;return s?{...o,from:{param:s,...a}}:o}return o})}:e}function jae(e,n){const t=tt(e);if(he(t)&&Th(t.bin)&&(t.bin=qae(t.bin)),Nh(t)&&t.scale?.domain?.selection){const{selection:i,...r}=t.scale.domain;t.scale.domain={...r,...i?{param:i}:{}}}if(W2(t))if(oe(t.condition))t.condition=t.condition.map(i=>{const{selection:r,param:o,test:s,...a}=i;return o?i:{...a,test:U5(i,n)}});else{const{selection:i,param:r,test:o,...s}=jae(t.condition,n);t.condition=r?t.condition:{...s,test:U5(t.condition,n)}}return t}function qae(e){const n=e.extent;if(n?.selection){const{selection:t,...i}=n;return{...e,extent:{...i,param:t}}}return e}function U5(e,n){const t=i=>Om(i,r=>{var o;const a={param:r,empty:n.emptySelections[r]??!0};return(o=n.selectionPredicates)[r]??(o[r]=[]),n.selectionPredicates[r].push(a),a});return e.selection?t(e.selection):Om(e.test||e.filter,i=>i.selection?t(i.selection):i)}class H5 extends L5{map(n,t){const i=t.selections??[];if(n.params&&!qc(n)){const r=[];for(const o of n.params)R5(o)?i.push(o):r.push(o);n.params=r}return t.selections=i,super.map(n,t)}mapUnit(n,t){const i=t.selections;if(!i||!i.length)return n;const r=(t.path??[]).concat(n.name),o=[];for(const s of i)if(s.views&&s.views.length)for(const a of s.views)(xe(a)&&(a===n.name||r.includes(a))||oe(a)&&a.map(l=>r.indexOf(l)).every((l,c,u)=>-1!==l&&(0===c||l>u[c-1])))&&o.push(s);else o.push(s);return o.length&&(n.params=o),n}}for(const e of["mapFacet","mapRepeat","mapHConcat","mapVConcat","mapLayer"]){const n=H5.prototype[e];H5.prototype[e]=function(t,i){return n.call(this,t,VKe(t,i))}}function VKe(e,n){return e.name?{...n,path:(n.path??[]).concat(e.name)}:n}function Wae(e,n){void 0===n&&(n=Aae(e.config));const t=function jKe(e,n={}){const t={config:n};return HKe.map(zKe.map(UKe.map(e,t),t),t)}(e,n),{width:i,height:r}=e,o=function qKe(e,n,t){let{width:i,height:r}=n;const o=qc(e)||aT(e),s={};o?"container"==i&&"container"==r?(s.type="fit",s.contains="padding"):"container"==i?(s.type="fit-x",s.contains="padding"):"container"==r&&(s.type="fit-y",s.contains="padding"):("container"==i&&(fe(Voe("width")),i=void 0),"container"==r&&(fe(Voe("height")),r=void 0));const a={type:"pad",...s,...t?Gae(t.autosize):{},...Gae(e.autosize)};if("fit"===a.type&&!o&&(fe(Qje),a.type="pad"),"container"==i&&!("fit"==a.type||"fit-x"==a.type)&&fe(zoe("width")),"container"==r&&!("fit"==a.type||"fit-y"==a.type)&&fe(zoe("height")),!is(a,{type:"pad"}))return a}(t,{width:i,height:r,autosize:e.autosize},n);return{...t,...o?{autosize:o}:{}}}const zKe=new class yKe extends L5{constructor(){super(...arguments),this.nonFacetUnitNormalizers=[xGe,TGe,RGe,new gKe,new _Ke]}map(n,t){if(qc(n)){const i=Ph(n.encoding,Nc),r=Ph(n.encoding,Pc),o=Ph(n.encoding,S2);if(i||r||o)return this.mapFacetedUnit(n,t)}return super.map(n,t)}mapUnit(n,t){const{parentEncoding:i,parentProjection:r}=t,o=B5(n.encoding,t.repeater),s={...n,...n.name?{name:[t.repeaterPrefix,n.name].filter(l=>l).join("_")}:{},...o?{encoding:o}:{}};if(i||r)return this.mapUnitWithParentEncodingOrProjection(s,t);const a=this.mapLayerOrUnit.bind(this);for(const l of this.nonFacetUnitNormalizers)if(l.hasMatchingType(s,t.config))return l.run(s,t,a);return s}mapRepeat(n,t){return function iKe(e){return!oe(e.repeat)&&e.repeat.layer}(n)?this.mapLayerRepeat(n,t):this.mapNonLayerRepeat(n,t)}mapLayerRepeat(n,t){const{repeat:i,spec:r,...o}=n,{row:s,column:a,layer:l}=i,{repeater:c={},repeaterPrefix:u=""}=t;return s||a?this.mapRepeat({...n,repeat:{...s?{row:s}:{},...a?{column:a}:{}},spec:{repeat:{layer:l},spec:r}},t):{...o,layer:l.map(d=>{const f={...c,layer:d},h=`${(r.name?`${r.name}_`:"")+u}child__layer_${In(d)}`,p=this.mapLayerOrUnit(r,{...t,repeater:f,repeaterPrefix:h});return p.name=h,p})}}mapNonLayerRepeat(n,t){const{repeat:i,spec:r,data:o,...s}=n;!oe(i)&&n.columns&&(n=mo(n,["columns"]),fe(qoe("repeat")));const a=[],{repeater:l={},repeaterPrefix:c=""}=t,u=!oe(i)&&i.row||[l?l.row:null],d=!oe(i)&&i.column||[l?l.column:null],f=oe(i)&&i||[l?l.repeat:null];for(const p of f)for(const g of u)for(const m of d){const _={repeat:p,row:g,column:m,layer:l.layer},y=(r.name?`${r.name}_`:"")+c+"child__"+(oe(i)?`${In(p)}`:(i.row?`row_${In(g)}`:"")+(i.column?`column_${In(m)}`:"")),v=this.map(r,{...t,repeater:_,repeaterPrefix:y});v.name=y,a.push(mo(v,["data"]))}const h=oe(i)?n.columns:i.column?i.column.length:1;return{data:r.data??o,align:"all",...s,columns:h,concat:a}}mapFacet(n,t){const{facet:i}=n;return pv(i)&&n.columns&&(n=mo(n,["columns"]),fe(qoe("facet"))),super.mapFacet(n,t)}mapUnitWithParentEncodingOrProjection(n,t){const{encoding:i,projection:r}=n,{parentEncoding:o,parentProjection:s,config:a}=t,l=Vae({parentProjection:s,projection:r}),c=Bae({parentEncoding:o,encoding:B5(i,t.repeater)});return this.mapUnit({...n,...l?{projection:l}:{},...c?{encoding:c}:{}},{config:a})}mapFacetedUnit(n,t){const{row:i,column:r,facet:o,...s}=n.encoding,{mark:a,width:l,projection:c,height:u,view:d,params:f,encoding:h,...p}=n,{facetMapping:g,layout:m}=this.getFacetMappingAndLayout({row:i,column:r,facet:o},t),_=B5(s,t.repeater);return this.mapFacet({...p,...m,facet:g,spec:{...l?{width:l}:{},...u?{height:u}:{},...d?{view:d}:{},...c?{projection:c}:{},mark:a,encoding:_,...f?{params:f}:{}}},t)}getFacetMappingAndLayout(n,t){const{row:i,column:r,facet:o}=n;if(i||r){o&&fe(function Eqe(e){return`Facet encoding dropped as ${e.join(" and ")} ${e.length>1?"are":"is"} also specified.`}([...i?[Nc]:[],...r?[Pc]:[]]));const s={},a={};for(const l of[Nc,Pc]){const c=n[l];if(c){const{align:u,center:d,spacing:f,columns:h,...p}=c;s[l]=p;for(const g of["align","center","spacing"])void 0!==c[g]&&(a[g]??(a[g]={}),a[g][l]=c[g])}}return{facetMapping:s,layout:a}}{const{align:s,center:a,spacing:l,columns:c,...u}=o;return{facetMapping:mKe(u,t.repeater),layout:{...s?{align:s}:{},...a?{center:a}:{},...l?{spacing:l}:{},...c?{columns:c}:{}}}}}mapLayer(n,{parentEncoding:t,parentProjection:i,...r}){const{encoding:o,projection:s,...a}=n,l={...r,parentEncoding:Bae({parentEncoding:t,encoding:o,layer:!0}),parentProjection:Vae({parentProjection:i,projection:s})};return super.mapLayer({...a,...n.name?{name:[l.repeaterPrefix,n.name].filter(c=>c).join("_")}:{}},l)}},UKe=new class BKe extends L5{map(n,t){return t.emptySelections??(t.emptySelections={}),t.selectionPredicates??(t.selectionPredicates={}),n=Hae(n,t),super.map(n,t)}mapLayerOrUnit(n,t){if((n=Hae(n,t)).encoding){const i={};for(const[r,o]of vd(n.encoding))i[r]=jae(o,t);n={...n,encoding:i}}return super.mapLayerOrUnit(n,t)}mapUnit(n,t){const{selection:i,...r}=n;return i?{...r,params:vd(i).map(([o,s])=>{const{init:a,bind:l,empty:c,...u}=s;"single"===u.type?(u.type="point",u.toggle=!1):"multi"===u.type&&(u.type="point"),t.emptySelections[o]="none"!==c;for(const d of ji(t.selectionPredicates[o]??{}))d.empty="none"!==c;return{name:o,value:a,select:u,bind:l}})}:n}},HKe=new H5;function Gae(e){return xe(e)?{type:e}:e??{}}const KKe=["background","padding"];function Kae(e,n){const t={};for(const i of KKe)e&&void 0!==e[i]&&(t[i]=rs(e[i]));return n&&(t.params=e.params),t}class Gc{constructor(n={},t={}){this.explicit=n,this.implicit=t}clone(){return new Gc(tt(this.explicit),tt(this.implicit))}combine(){return{...this.explicit,...this.implicit}}get(n){return Xn(this.explicit[n],this.implicit[n])}getWithExplicit(n){return void 0!==this.explicit[n]?{explicit:!0,value:this.explicit[n]}:void 0!==this.implicit[n]?{explicit:!1,value:this.implicit[n]}:{explicit:!1,value:void 0}}setWithExplicit(n,{value:t,explicit:i}){void 0!==t&&this.set(n,t,i)}set(n,t,i){return delete this[i?"implicit":"explicit"][n],this[i?"explicit":"implicit"][n]=t,this}copyKeyFromSplit(n,{explicit:t,implicit:i}){void 0!==t[n]?this.set(n,t[n],!0):void 0!==i[n]&&this.set(n,i[n],!1)}copyKeyFromObject(n,t){void 0!==t[n]&&this.set(n,t[n],!0)}copyAll(n){for(const t of ce(n.combine())){const i=n.getWithExplicit(t);this.setWithExplicit(t,i)}}}function Hl(e){return{explicit:!0,value:e}}function ss(e){return{explicit:!1,value:e}}function Yae(e){return(n,t,i,r)=>{const o=e(n.value,t.value);return o>0?n:o<0?t:lT(n,t,i,r)}}function lT(e,n,t,i){return e.explicit&&n.explicit&&fe(function Pqe(e,n,t,i){return`Conflicting ${n.toString()} property "${e.toString()}" (${ln(t)} and ${ln(i)}). Using ${ln(t)}.`}(t,i,e.value,n.value)),e}function Rd(e,n,t,i,r=lT){return void 0===e||void 0===e.value?n:e.explicit&&!n.explicit?e:n.explicit&&!e.explicit?n:is(e.value,n.value)?e:r(e,n,t,i)}class YKe extends Gc{constructor(n={},t={},i=!1){super(n,t),this.explicit=n,this.implicit=t,this.parseNothing=i}clone(){const n=super.clone();return n.parseNothing=this.parseNothing,n}}function Gm(e){return"url"in e}function yv(e){return"values"in e}function Xae(e){return"name"in e&&!Gm(e)&&!yv(e)&&!Fd(e)}function Fd(e){return e&&(Qae(e)||Zae(e)||j5(e))}function Qae(e){return"sequence"in e}function Zae(e){return"sphere"in e}function j5(e){return"graticule"in e}var Cn=function(e){return e[e.Raw=0]="Raw",e[e.Main=1]="Main",e[e.Row=2]="Row",e[e.Column=3]="Column",e[e.Lookup=4]="Lookup",e}(Cn||{});function Jae(e){const{signals:n,hasLegend:t,index:i,...r}=e;return r.field=Ls(r.field),r}function Lh(e,n=!0,t=nr){if(oe(e)){const i=e.map(r=>Lh(r,n,t));return n?`[${i.join(", ")}]`:i}return Dh(e)?t(n?Ih(e):function lWe(e){const n=KL(e,!0);return e.utc?+new Date(Date.UTC(...n)):+new Date(...n)}(e)):n?t(ln(e)):e}function XKe(e,n){for(const t of ji(e.component.selection??{})){const i=t.name;let r=`${i}${Pd}, ${"global"===t.resolve?"true":`{unit: ${Bh(e)}}`}`;for(const o of gT)o.defined(t)&&(o.signals&&(n=o.signals(e,t,n)),o.modifyExpr&&(r=o.modifyExpr(e,t,r)));n.push({name:i+MYe,on:[{events:{signal:t.name+Pd},update:`modify(${ge(t.name+$h)}, ${r})`}]})}return q5(n)}function QKe(e,n){if(e.component.selection&&ce(e.component.selection).length){const t=ge(e.getName("cell"));n.unshift({name:"facet",value:{},on:[{events:_d("pointermove","scope"),update:`isTuple(facet) ? facet : group(${t}).datum`}]})}return q5(n)}function ele(e,n){for(const t of ji(e.component.selection??{}))for(const i of gT)i.defined(t)&&i.marks&&(n=i.marks(e,t,n));return n}function q5(e){return e.map(n=>(n.on&&!n.on.length&&delete n.on,n))}class on{constructor(n,t){this.debugName=t,this._children=[],this._parent=null,n&&(this.parent=n)}clone(){throw new Error("Cannot clone node")}get parent(){return this._parent}set parent(n){this._parent=n,n&&n.addChild(this)}get children(){return this._children}numChildren(){return this._children.length}addChild(n,t){this._children.includes(n)?fe("Attempt to add the same child twice."):void 0!==t?this._children.splice(t,0,n):this._children.push(n)}removeChild(n){const t=this._children.indexOf(n);return this._children.splice(t,1),t}remove(){let n=this._parent.removeChild(this);for(const t of this._children)t._parent=this._parent,this._parent.addChild(t,n++)}insertAsParentOf(n){const t=n.parent;t.removeChild(this),this.parent=t,n.parent=this}swapWithParent(){const n=this._parent,t=n.parent;for(const r of this._children)r.parent=n;this._children=[],n.removeChild(this);const i=n.parent.removeChild(n);this._parent=t,t.addChild(this,i),n.parent=this}}class Wr extends on{clone(){const n=new this.constructor;return n.debugName=`clone_${this.debugName}`,n._source=this._source,n._name=`clone_${this._name}`,n.type=this.type,n.refCounts=this.refCounts,n.refCounts[n._name]=0,n}constructor(n,t,i,r){super(n,t),this.type=i,this.refCounts=r,this._source=this._name=t,this.refCounts&&!(this._name in this.refCounts)&&(this.refCounts[this._name]=0)}dependentFields(){return new Set}producedFields(){return new Set}hash(){return void 0===this._hash&&(this._hash=`Output ${uoe()}`),this._hash}getSource(){return this.refCounts[this._name]++,this._source}isRequired(){return!!this.refCounts[this._name]}setSource(n){this._source=n}}function W5(e){return void 0!==e.as}function tle(e){return`${e}_end`}class jl extends on{clone(){return new jl(null,tt(this.timeUnits))}constructor(n,t){super(n),this.timeUnits=t}static makeFromEncoding(n,t){const i=t.reduceFieldDef((r,o,s)=>{const{field:a,timeUnit:l}=o;if(l){let c;if(Mh(l)){if(Vn(t)){const{mark:u,markDef:d,config:f}=t,h=kd({fieldDef:o,markDef:d,config:f});(dv(u)||h)&&(c={timeUnit:xi(l),field:a})}}else c={as:ye(o,{forAs:!0}),field:a,timeUnit:l};if(Vn(t)){const{mark:u,markDef:d,config:f}=t,h=kd({fieldDef:o,markDef:d,config:f});dv(u)&&Qn(s)&&.5!==h&&(c.rectBandPosition=h)}c&&(r[Et(c)]=c)}return r},{});return an(i)?null:new jl(n,i)}static makeFromTransform(n,t){const{timeUnit:i,...r}={...t},s={...r,timeUnit:xi(i)};return new jl(n,{[Et(s)]:s})}merge(n){this.timeUnits={...this.timeUnits};for(const t in n.timeUnits)this.timeUnits[t]||(this.timeUnits[t]=n.timeUnits[t]);for(const t of n.children)n.removeChild(t),t.parent=this;n.remove()}removeFormulas(n){const t={};for(const[i,r]of vd(this.timeUnits)){const o=W5(r)?r.as:`${r.field}_end`;n.has(o)||(t[i]=r)}this.timeUnits=t}producedFields(){return new Set(ji(this.timeUnits).map(n=>W5(n)?n.as:tle(n.field)))}dependentFields(){return new Set(ji(this.timeUnits).map(n=>n.field))}hash(){return`TimeUnit ${Et(this.timeUnits)}`}assemble(){const n=[];for(const t of ji(this.timeUnits)){const{rectBandPosition:i}=t,r=xi(t.timeUnit);if(W5(t)){const{field:o,as:s}=t,{unit:a,utc:l,...c}=r,u=[s,`${s}_end`];n.push({field:Ls(o),type:"timeunit",...a?{units:P2(a)}:{},...l?{timezone:"utc"}:{},...c,as:u}),n.push(...ile(u,i,r))}else if(t){const{field:o}=t,s=o.replaceAll("\\.","."),a=nle({timeUnit:r,field:s}),l=tle(s);n.push({type:"formula",expr:a,as:l}),n.push(...ile([s,l],i,r))}}return n}}const cT="offsetted_rect_start",uT="offsetted_rect_end";function nle({timeUnit:e,field:n,reverse:t}){const{unit:i,utc:r}=e,o=ase(i),{part:s,step:a}=dse(o,e.step);return`${r?"utcOffset":"timeOffset"}('${s}', datum['${n}'], ${t?-a:a})`}function ile([e,n],t,i){if(void 0!==t&&.5!==t){const r=`datum['${e}']`,o=`datum['${n}']`;return[{type:"formula",expr:rle([nle({timeUnit:i,field:e,reverse:!0}),r],t+.5),as:`${e}_${cT}`},{type:"formula",expr:rle([r,o],t+.5),as:`${e}_${uT}`}]}return[]}function rle([e,n],t){return`${1-t} * ${e} + ${t} * ${n}`}const vv="_tuple_fields";class nYe{constructor(...n){this.items=n,this.hasChannel={},this.hasField={},this.hasSelectionId=!1}}const iYe={defined:()=>!0,parse:(e,n,t)=>{const i=n.name,r=n.project??(n.project=new nYe),o={},s={},a=new Set,l=(p,g)=>{const m="visual"===g?p.channel:p.field;let _=In(`${i}_${m}`);for(let y=1;a.has(_);y++)_=In(`${i}_${m}_${y}`);return a.add(_),{[g]:_}},c=n.type,u=e.config.selection[c],d=void 0!==t.value?Ce(t.value):null;let{fields:f,encodings:h}=Ee(t.select)?t.select:{};if(!f&&!h&&d)for(const p of d)if(Ee(p))for(const g of ce(p))Dje(g)?(h||(h=[])).push(g):"interval"===c?(fe('Interval selections should be initialized using "x", "y", "longitude", or "latitude" keys.'),h=u.encodings):(f??(f=[])).push(g);!f&&!h&&(h=u.encodings,"fields"in u&&(f=u.fields));for(const p of h??[]){const g=e.fieldDef(p);if(g){let m=g.field;if(g.aggregate){fe(Zje(p,g.aggregate));continue}if(!m){fe(Hoe(p));continue}if(g.timeUnit&&!Mh(g.timeUnit)){m=e.vgField(p);const _={timeUnit:g.timeUnit,as:m,field:g.field};s[Et(_)]=_}if(!o[m]){const y={field:m,channel:p,type:"interval"===c&&zc(p)&&os(e.getScaleComponent(p).get("type"))?"R":g.bin?"R-RE":"E",index:r.items.length};y.signals={...l(y,"data"),...l(y,"visual")},r.items.push(o[m]=y),r.hasField[m]=o[m],r.hasSelectionId=r.hasSelectionId||m===Na,_oe(p)?(y.geoChannel=p,y.channel=moe(p),r.hasChannel[y.channel]=o[m]):r.hasChannel[p]=o[m]}}else fe(Hoe(p))}for(const p of f??[]){if(r.hasField[p])continue;const g={type:"E",field:p,index:r.items.length};g.signals={...l(g,"data")},r.items.push(g),r.hasField[p]=g,r.hasSelectionId=r.hasSelectionId||p===Na}d&&(n.init=d.map(p=>r.items.map(g=>Ee(p)?void 0!==p[g.geoChannel||g.channel]?p[g.geoChannel||g.channel]:p[g.field]:p))),an(s)||(r.timeUnit=new jl(null,s))},signals:(e,n,t)=>{const i=n.name+vv;return t.filter(o=>o.name===i).length>0||n.project.hasSelectionId?t:t.concat({name:i,value:n.project.items.map(Jae)})}},Kc={defined:e=>"interval"===e.type&&"global"===e.resolve&&e.bind&&"scales"===e.bind,parse:(e,n)=>{const t=n.scales=[];for(const i of n.project.items){const r=i.channel;if(!zc(r))continue;const o=e.getScaleComponent(r),s=o?o.get("type"):void 0;o&&os(s)?(o.set("selectionExtent",{param:n.name,field:i.field},!0),t.push(i)):fe("Scale bindings are currently only supported for scales with unbinned, continuous domains.")}},topLevelSignals:(e,n,t)=>{const i=n.scales.filter(s=>0===t.filter(a=>a.name===s.signals.data).length);if(!e.parent||ole(e)||0===i.length)return t;const r=t.filter(s=>s.name===n.name)[0];let o=r.update;if(o.indexOf(Ile)>=0)r.update=`{${i.map(s=>`${ge(Ls(s.field))}: ${s.signals.data}`).join(", ")}}`;else{for(const s of i){const a=`${ge(Ls(s.field))}: ${s.signals.data}`;o.includes(a)||(o=`${o.substring(0,o.length-1)}, ${a}}`)}r.update=o}return t.concat(i.map(s=>({name:s.signals.data})))},signals:(e,n,t)=>{if(e.parent&&!ole(e))for(const i of n.scales){const r=t.filter(o=>o.name===i.signals.data)[0];r.push="outer",delete r.value,delete r.update}return t}};function G5(e,n){return`domain(${ge(e.scaleName(n))})`}function ole(e){return e.parent&&r0(e.parent)&&!e.parent.parent}const Km="_brush",sle="_scale_trigger",bv="geo_interval_init_tick",oYe={defined:e=>"interval"===e.type,parse:(e,n,t)=>{var i;if(e.hasProjection){const r={...Ee(t.select)?t.select:{}};r.fields=[Na],r.encodings||(r.encodings=t.value?ce(t.value):[Ia,Da]),t.select={type:"interval",...r}}if(n.translate&&!Kc.defined(n)){const r=`!event.item || event.item.mark.name !== ${ge(n.name+Km)}`;for(const o of n.events){if(!o.between){fe(`${o} is not an ordered event stream for interval selections.`);continue}const s=Ce((i=o.between[0]).filter??(i.filter=[]));s.indexOf(r)<0&&s.push(r)}}},signals:(e,n,t)=>{const i=n.name,r=i+Pd,o=ji(n.project.hasChannel).filter(a=>a.channel===Mn||a.channel===Ci),s=n.init?n.init[0]:null;if(t.push(...o.reduce((a,l)=>a.concat(function sYe(e,n,t,i){const r=!e.hasProjection,o=t.channel,s=t.signals.visual,a=ge(r?e.scaleName(o):e.projectionName()),l=f=>`scale(${a}, ${f})`,c=e.getSizeSignalRef(o===Mn?"width":"height").signal,u=`${o}(unit)`,d=n.events.reduce((f,h)=>[...f,{events:h.between[0],update:`[${u}, ${u}]`},{events:h,update:`[${s}[0], clamp(${u}, 0, ${c})]`}],[]);if(r){const f=t.signals.data,h=Kc.defined(n),p=e.getScaleComponent(o),g=p?p.get("type"):void 0,m=i?{init:Lh(i,!0,l)}:{value:[]};return d.push({events:{signal:n.name+sle},update:os(g)?`[${l(`${f}[0]`)}, ${l(`${f}[1]`)}]`:"[0, 0]"}),h?[{name:f,on:[]}]:[{name:s,...m,on:d},{name:f,...i?{init:Lh(i)}:{},on:[{events:{signal:s},update:`${s}[0] === ${s}[1] ? null : invert(${a}, ${s})`}]}]}{const f=o===Mn?0:1,h=n.name+"_init";return[{name:s,...i?{init:`[${h}[0][${f}], ${h}[1][${f}]]`}:{value:[]},on:d}]}}(e,n,l,s&&s[l.index])),[])),e.hasProjection){const a=ge(e.projectionName()),l=e.projectionName()+"_center",{x:c,y:u}=n.project.hasChannel,d=c&&c.signals.visual,f=u&&u.signals.visual,h=c?s&&s[c.index]:`${l}[0]`,p=u?s&&s[u.index]:`${l}[1]`,g=w=>e.getSizeSignalRef(w).signal,m=`[[${d?d+"[0]":"0"}, ${f?f+"[0]":"0"}],[${d?d+"[1]":g("width")}, ${f?f+"[1]":g("height")}]]`;s&&(t.unshift({name:i+"_init",init:`[scale(${a}, [${c?h[0]:h}, ${u?p[0]:p}]), scale(${a}, [${c?h[1]:h}, ${u?p[1]:p}])]`}),(!c||!u)&&(t.find(x=>x.name===l)||t.unshift({name:l,update:`invert(${a}, [${g("width")}/2, ${g("height")}/2])`})));const v=`vlSelectionTuples(intersect(${m}, {markname: ${ge(e.getName("marks"))}}, unit.mark), {unit: ${Bh(e)}})`,b=o.map(w=>w.signals.visual);return t.concat({name:r,on:[{events:[...b.length?[{signal:b.join(" || ")}]:[],...s?[{signal:bv}]:[]],update:v}]})}{if(!Kc.defined(n)){const c=i+sle,u=o.map(d=>{const f=d.channel,{data:h,visual:p}=d.signals,g=ge(e.scaleName(f)),_=os(e.getScaleComponent(f).get("type"))?"+":"";return`(!isArray(${h}) || (${_}invert(${g}, ${p})[0] === ${_}${h}[0] && ${_}invert(${g}, ${p})[1] === ${_}${h}[1]))`});u.length&&t.push({name:c,value:{},on:[{events:o.map(d=>({scale:e.scaleName(d.channel)})),update:u.join(" && ")+` ? ${c} : {}`}]})}const a=o.map(c=>c.signals.data),l=`unit: ${Bh(e)}, fields: ${i+vv}, values`;return t.concat({name:r,...s?{init:`{${l}: ${Lh(s)}}`}:{},...a.length?{on:[{events:[{signal:a.join(" || ")}],update:`${a.join(" && ")} ? {${l}: [${a}]} : null`}]}:{}})}},topLevelSignals:(e,n,t)=>(Vn(e)&&e.hasProjection&&n.init&&(t.filter(r=>r.name===bv).length||t.unshift({name:bv,value:null,on:[{events:"timer{1}",update:`${bv} === null ? {} : ${bv}`}]})),t),marks:(e,n,t)=>{const i=n.name,{x:r,y:o}=n.project.hasChannel,s=r?.signals.visual,a=o?.signals.visual,l=`data(${ge(n.name+$h)})`;if(Kc.defined(n)||!r&&!o)return t;const c={x:void 0!==r?{signal:`${s}[0]`}:{value:0},y:void 0!==o?{signal:`${a}[0]`}:{value:0},x2:void 0!==r?{signal:`${s}[1]`}:{field:{group:"width"}},y2:void 0!==o?{signal:`${a}[1]`}:{field:{group:"height"}}};if("global"===n.resolve)for(const g of ce(c))c[g]=[{test:`${l}.length && ${l}[0].unit === ${Bh(e)}`,...c[g]},{value:0}];const{fill:u,fillOpacity:d,cursor:f,...h}=n.mark,p=ce(h).reduce((g,m)=>(g[m]=[{test:[void 0!==r&&`${s}[0] !== ${s}[1]`,void 0!==o&&`${a}[0] !== ${a}[1]`].filter(_=>_).join(" && "),value:h[m]},{value:null}],g),{});return[{name:`${i+Km}_bg`,type:"rect",clip:!0,encode:{enter:{fill:{value:u},fillOpacity:{value:d}},update:c}},...t,{name:i+Km,type:"rect",clip:!0,encode:{enter:{...f?{cursor:{value:f}}:{},fill:{value:"transparent"}},update:{...c,...p}}}]}},aYe={defined:e=>"point"===e.type,signals:(e,n,t)=>{const i=n.name,r=i+vv,o=n.project,s="(item().isVoronoi ? datum.datum : datum)",a=ji(e.component.selection??{}).reduce((d,f)=>"interval"===f.type?d.concat(f.name+Km):d,[]).map(d=>`indexof(item().mark.name, '${d}') < 0`).join(" && "),l="datum && item().mark.marktype !== 'group' && indexof(item().mark.role, 'legend') < 0"+(a?` && ${a}`:"");let c=`unit: ${Bh(e)}, `;c+=n.project.hasSelectionId?`${Na}: ${s}[${ge(Na)}]`:`fields: ${r}, values: [${o.items.map(f=>e.fieldDef(f.channel)?.bin?`[${s}[${ge(e.vgField(f.channel,{}))}], ${s}[${ge(e.vgField(f.channel,{binSuffix:"end"}))}]]`:`${s}[${ge(f.field)}]`).join(", ")}]`;const u=n.events;return t.concat([{name:i+Pd,on:u?[{events:u,update:`${l} ? {${c}} : null`,force:!0}]:[]}])}};function Ym(e,n,t,i){const r=W2(n)&&n.condition,o=i(n);return r?{[t]:[...Ce(r).map(l=>{const c=i(l);if(function nGe(e){return e.param}(l)){const{param:u,empty:d}=l;return{test:Ole(e,{param:u,empty:d}),...c}}return{test:mT(e,l.test),...c}}),...void 0!==o?[o]:[]]}:void 0!==o?{[t]:o}:{}}function K5(e,n="text"){return Ym(e,e.encoding[n],n,i=>dT(i,e.config))}function dT(e,n,t="datum"){if(e){if(Fa(e))return wn(e.value);if(ot(e)){const{format:i,formatType:r}=X2(e);return g5({fieldOrDatumDef:e,format:i,formatType:r,expr:t,config:n})}}}function lle(e,n={}){const{encoding:t,markDef:i,config:r,stack:o}=e,s=t.tooltip;if(oe(s))return{tooltip:ule({tooltip:s},o,r,n)};{const a=n.reactiveGeom?"datum.datum":"datum";return Ym(e,s,"tooltip",l=>{const c=dT(l,r,a);if(c)return c;if(null===l)return;let u=Zt("tooltip",i,r);return!0===u&&(u={content:"encoding"}),xe(u)?{value:u}:Ee(u)?Pe(u)?u:"encoding"===u.content?ule(t,o,r,n):{signal:a}:void 0})}}function cle(e,n,t,{reactiveGeom:i}={}){const r={...t,...t.tooltipFormat},o={},s=i?"datum.datum":"datum",a=[];function l(u,d){const f=Sh(d),h=qr(u)?u:{...u,type:e[f].type},g=Ce(h.title||b5(h,r)).join(", ").replaceAll(/"/g,'\\"');let m;if(Qn(d)){const _="x"===d?"x2":"y2",y=zl(e[_]);if(qi(h.bin)&&y){const v=ye(h,{expr:s}),b=ye(y,{expr:s}),{format:w,formatType:x}=X2(h);m=hv(v,b,w,x,r),o[_]=!0}}if((Qn(d)||d===$s||d===Ta)&&n&&n.fieldChannel===d&&"normalize"===n.offset){const{format:_,formatType:y}=X2(h);m=g5({fieldOrDatumDef:h,format:_,formatType:y,expr:s,config:r,normalizeStack:!0}).signal}m??(m=dT(h,r,s).signal),a.push({channel:d,key:g,value:m})}x5(e,(u,d)=>{he(u)?l(u,d):G2(u)&&l(u.condition,d)});const c={};for(const{channel:u,key:d,value:f}of a)!o[u]&&!c[d]&&(c[d]=f);return c}function ule(e,n,t,{reactiveGeom:i}={}){const r=cle(e,n,t,{reactiveGeom:i}),o=vd(r).map(([s,a])=>`"${s}": ${a}`);return o.length>0?{signal:`{${o.join(", ")}}`}:void 0}function lYe(e){const{markDef:n,config:t}=e,i=Zt("aria",n,t);return!1===i?{}:{...i?{aria:i}:{},...cYe(e),...uYe(e)}}function cYe(e){const{mark:n,markDef:t,config:i}=e;if(!1===i.aria)return{};const r=Zt("ariaRoleDescription",t,i);return null!=r?{ariaRoleDescription:{value:r}}:n in Kje?{}:{ariaRoleDescription:{value:n}}}function uYe(e){const{encoding:n,markDef:t,config:i,stack:r}=e,o=n.description;if(o)return Ym(e,o,"description",l=>dT(l,e.config));const s=Zt("description",t,i);if(null!=s)return{description:wn(s)};if(!1===i.aria)return{};const a=cle(n,r,i);return an(a)?void 0:{description:{signal:vd(a).map(([l,c],u)=>`"${u>0?"; ":""}${l}: " + (${c})`).join(" + ")}}}function Si(e,n,t={}){const{markDef:i,encoding:r,config:o}=n,{vgChannel:s}=t;let{defaultRef:a,defaultValue:l}=t;return void 0===a&&(l??(l=Zt(e,i,o,{vgChannel:s,ignoreVgConfig:!0})),void 0!==l&&(a=wn(l))),Ym(n,r[e],s??e,u=>p5({channel:e,channelDef:u,markDef:i,config:o,scaleName:n.scaleName(e),scale:n.getScaleComponent(e),stack:null,defaultRef:a}))}function dle(e,n={filled:void 0}){const{markDef:t,encoding:i,config:r}=e,{type:o}=t,s=n.filled??Zt("filled",t,r),a=St(["bar","point","circle","square","geoshape"],o)?"transparent":void 0,l=Zt(!0===s?"color":void 0,t,r,{vgChannel:"fill"})??r.mark[!0===s&&"color"]??a,c=Zt(!1===s?"color":void 0,t,r,{vgChannel:"stroke"})??r.mark[!1===s&&"color"],u=s?"fill":"stroke",d={...l?{fill:wn(l)}:{},...c?{stroke:wn(c)}:{}};return t.color&&(s?t.fill:t.stroke)&&fe(Yoe("property",{fill:"fill"in t,stroke:"stroke"in t})),{...d,...Si("color",e,{vgChannel:u,defaultValue:s?l:c}),...Si("fill",e,{defaultValue:i.fill?l:void 0}),...Si("stroke",e,{defaultValue:i.stroke?c:void 0})}}function dYe(e){const{encoding:n,mark:t}=e,i=n.order;return!Ad(t)&&Fa(i)?Ym(e,i,"zindex",r=>wn(r.value)):{}}function Xm({channel:e,markDef:n,encoding:t={},model:i,bandPosition:r}){const o=`${e}Offset`,s=n[o],a=t[o];if(("xOffset"===o||"yOffset"===o)&&a)return{offsetType:"encoding",offset:p5({channel:o,channelDef:a,markDef:n,config:i?.config,scaleName:i.scaleName(o),scale:i.getScaleComponent(o),stack:null,defaultRef:wn(s),bandPosition:r})};const l=n[o];return l?{offsetType:"visual",offset:l}:{}}function pr(e,n,{defaultPos:t,vgChannel:i}){const{encoding:r,markDef:o,config:s,stack:a}=n,l=r[e],c=r[Nl(e)],u=n.scaleName(e),d=n.getScaleComponent(e),{offset:f,offsetType:h}=Xm({channel:e,markDef:o,encoding:r,model:n,bandPosition:.5}),p=Y5({model:n,defaultPos:t,channel:e,scaleName:u,scale:d}),g=!l&&Qn(e)&&(r.latitude||r.longitude)?{field:n.getName(e)}:function fYe(e){const{channel:n,channelDef:t,scaleName:i,stack:r,offset:o,markDef:s}=e;if(ot(t)&&r&&n===r.fieldChannel){if(he(t)){let a=t.bandPosition;if(void 0===a&&"text"===s.type&&("radius"===n||"theta"===n)&&(a=.5),void 0!==a)return H2({scaleName:i,fieldOrDatumDef:t,startSuffix:"start",bandPosition:a,offset:o})}return Rh(t,i,{suffix:"end"},{offset:o})}return f5(e)}({channel:e,channelDef:l,channel2Def:c,markDef:o,config:s,scaleName:u,scale:d,stack:a,offset:f,defaultRef:p,bandPosition:"encoding"===h?0:void 0});return g?{[i||e]:g}:void 0}function Y5({model:e,defaultPos:n,channel:t,scaleName:i,scale:r}){const{markDef:o,config:s}=e;return()=>{const a=Sh(t),l=Sd(t),c=Zt(t,o,s,{vgChannel:l});if(void 0!==c)return fv(t,c);switch(n){case"zeroOrMin":case"zeroOrMax":if(i){const u=r.get("type");if(!St([wo.LOG,wo.TIME,wo.UTC],u)&&r.domainDefinitelyIncludesZero())return{scale:i,value:0}}if("zeroOrMin"===n)return"y"===a?{field:{group:"height"}}:{value:0};switch(a){case"radius":return{signal:`min(${e.width.signal},${e.height.signal})/2`};case"theta":return{signal:"2*PI"};case"x":return{field:{group:"width"}};case"y":return{value:0}}break;case"mid":return{...e[vo(t)],mult:.5}}}}const hYe={left:"x",center:"xc",right:"x2"},pYe={top:"y",middle:"yc",bottom:"y2"};function fle(e,n,t,i="middle"){if("radius"===e||"theta"===e)return Sd(e);const r="x"===e?"align":"baseline",o=Zt(r,n,t);let s;return Pe(o)?(fe(function Sqe(e){return`The ${e} for range marks cannot be an expression`}(r)),s=void 0):s=o,"x"===e?hYe[s||("top"===i?"left":"center")]:pYe[s||i]}function fT(e,n,{defaultPos:t,defaultPos2:i,range:r}){return r?hle(e,n,{defaultPos:t,defaultPos2:i}):pr(e,n,{defaultPos:t})}function hle(e,n,{defaultPos:t,defaultPos2:i}){const{markDef:r,config:o}=n,s=Nl(e),a=vo(e),l=function gYe(e,n,t){const{encoding:i,mark:r,markDef:o,stack:s,config:a}=e,l=Sh(t),c=vo(t),u=Sd(t),d=i[l],f=e.scaleName(l),h=e.getScaleComponent(l),{offset:p}=Xm(t in i||t in o?{channel:t,markDef:o,encoding:i,model:e}:{channel:l,markDef:o,encoding:i,model:e});if(!d&&("x2"===t||"y2"===t)&&(i.latitude||i.longitude)){const m=vo(t),_=e.markDef[m];return null!=_?{[m]:{value:_}}:{[u]:{field:e.getName(t)}}}const g=function mYe({channel:e,channelDef:n,channel2Def:t,markDef:i,config:r,scaleName:o,scale:s,stack:a,offset:l,defaultRef:c}){return ot(n)&&a&&e.charAt(0)===a.fieldChannel.charAt(0)?Rh(n,o,{suffix:"start"},{offset:l}):f5({channel:e,channelDef:t,scaleName:o,scale:s,stack:a,markDef:i,config:r,offset:l,defaultRef:c})}({channel:t,channelDef:d,channel2Def:i[t],markDef:o,config:a,scaleName:f,scale:h,stack:s,offset:p,defaultRef:void 0});return void 0!==g?{[u]:g}:hT(t,o)||hT(t,{[t]:R2(t,o,a.style),[c]:R2(c,o,a.style)})||hT(t,a[r])||hT(t,a.mark)||{[u]:Y5({model:e,defaultPos:n,channel:t,scaleName:f,scale:h})()}}(n,i,s);return{...pr(e,n,{defaultPos:t,vgChannel:l[a]?fle(e,r,o):Sd(e)}),...l}}function hT(e,n){const t=vo(e),i=Sd(e);if(void 0!==n[i])return{[i]:fv(e,n[i])};if(void 0!==n[e])return{[i]:fv(e,n[e])};if(n[t]){const r=n[t];if(!Oh(r))return{[t]:fv(e,r)};fe(function vqe(e){return`Position range does not support relative band size for ${e}.`}(t))}}function Nd(e,n){const{config:t,encoding:i,markDef:r}=e,o=r.type,s=Nl(n),a=vo(n),l=i[n],c=i[s],u=e.getScaleComponent(n),d=u?u.get("type"):void 0,f=r.orient,h=i[a]??i.size??Zt("size",r,t,{vgChannel:a}),p=xoe(n),g="bar"===o&&("x"===n?"vertical"===f:"horizontal"===f);return!he(l)||!(_n(l.bin)||qi(l.bin)||l.timeUnit&&!c)||h&&!Oh(h)||i[p]||Ei(d)?(ot(l)&&Ei(d)||g)&&!c?function yYe(e,n,t){const{markDef:i,encoding:r,config:o,stack:s}=t,a=i.orient,l=t.scaleName(n),c=t.getScaleComponent(n),u=vo(n),d=Nl(n),f=xoe(n),h=t.scaleName(f),p=t.getScaleComponent(PL(n)),g="horizontal"===a&&"y"===n||"vertical"===a&&"x"===n;let m;(r.size||i.size)&&(g?m=Si("size",t,{vgChannel:u,defaultRef:wn(i.size)}):fe(function Rqe(e){return`Cannot apply size to non-oriented mark "${e}".`}(i.type)));const _=!!m,y=Vse({channel:n,fieldDef:e,markDef:i,config:o,scaleType:(c||p)?.get("type"),useVlSizeChannel:g});m=m||{[u]:_Ye(u,h||l,p||c,o,y,!!e,i.type)};const b=fle(n,i,o,"band"===(c||p)?.get("type")&&Oh(y)&&!_?"top":"middle"),w="xc"===b||"yc"===b,{offset:x,offsetType:C}=Xm({channel:n,markDef:i,encoding:r,model:t,bandPosition:w?.5:0}),S=f5({channel:n,channelDef:e,markDef:i,config:o,scaleName:l,scale:c,stack:s,offset:x,defaultRef:Y5({model:t,defaultPos:"mid",channel:n,scaleName:l,scale:c}),bandPosition:w?"encoding"===C?0:.5:Pe(y)?{signal:`(1-${y})/2`}:Oh(y)?(1-y.band)/2:0});if(u)return{[b]:S,...m};{const A=Sd(d),M=m[u],N=x?{...M,offset:x}:M;return{[b]:S,[A]:oe(S)?[S[0],{...S[1],offset:N}]:{...S,offset:N}}}}(l,n,e):hle(n,e,{defaultPos:"zeroOrMax",defaultPos2:"zeroOrMin"}):function vYe({fieldDef:e,fieldDef2:n,channel:t,model:i}){const{config:r,markDef:o,encoding:s}=i,a=i.getScaleComponent(t),l=i.scaleName(t),c=a?a.get("type"):void 0,u=a.get("reverse"),d=Vse({channel:t,fieldDef:e,markDef:o,config:r,scaleType:c}),h=i.component.axes[t]?.[0]?.get("translate")??.5,p=Qn(t)?Zt("binSpacing",o,r)??0:0,g=Nl(t),m=Sd(t),_=Sd(g),y=jc("minBandSize",o,r),{offset:v}=Xm({channel:t,markDef:o,encoding:s,model:i,bandPosition:0}),{offset:b}=Xm({channel:g,markDef:o,encoding:s,model:i,bandPosition:0}),w=function QWe({scaleName:e,fieldDef:n}){const t=ye(n,{expr:"datum"});return`abs(scale("${e}", ${ye(n,{expr:"datum",suffix:"end"})}) - scale("${e}", ${t}))`}({fieldDef:e,scaleName:l}),x=ple(t,p,u,h,v,y,w),C=ple(g,p,u,h,b??v,y,w),S=Pe(d)?{signal:`(1-${d.signal})/2`}:Oh(d)?(1-d.band)/2:.5,A=kd({fieldDef:e,fieldDef2:n,markDef:o,config:r});if(_n(e.bin)||e.timeUnit){const M=e.timeUnit&&.5!==A;return{[_]:gle({fieldDef:e,scaleName:l,bandPosition:S,offset:C,useRectOffsetField:M}),[m]:gle({fieldDef:e,scaleName:l,bandPosition:Pe(S)?{signal:`1-${S.signal}`}:1-S,offset:x,useRectOffsetField:M})}}if(qi(e.bin)){const M=Rh(e,l,{},{offset:C});if(he(n))return{[_]:M,[m]:Rh(n,l,{},{offset:x})};if(Th(e.bin)&&e.bin.step)return{[_]:M,[m]:{signal:`scale("${l}", ${ye(e,{expr:"datum"})} + ${e.bin.step})`,offset:x}}}fe(ese(g))}({fieldDef:l,fieldDef2:c,channel:n,model:e})}function _Ye(e,n,t,i,r,o,s){if(Oh(r)){if(!t)return{mult:r.band,field:{group:e}};{const l=t.get("type");if("band"===l){let c=`bandwidth('${n}')`;1!==r.band&&(c=`${r.band} * ${c}`);const u=jc("minBandSize",{type:s},i);return{signal:u?`max(${Aa(u)}, ${c})`:c}}1!==r.band&&(fe(function Mqe(e){return`Cannot use the relative band size with ${e} scale.`}(l)),r=void 0)}}else{if(Pe(r))return r;if(r)return{value:r}}if(t){const l=t.get("range");if(Id(l)&&Ft(l.step))return{value:l.step-2}}if(!o){const{bandPaddingInner:l,barBandPaddingInner:c,rectBandPaddingInner:u}=i.scale,d=Xn(l,"bar"===s?c:u);if(Pe(d))return{signal:`(1 - (${d.signal})) * ${e}`};if(Ft(d))return{signal:`${1-d} * ${e}`}}return{value:oT(i.view,e)-2}}function ple(e,n,t,i,r,o,s){if(goe(e))return 0;const a="x"===e||"y2"===e,l=a?-n/2:n/2;if(Pe(t)||Pe(r)||Pe(i)||o){const c=Aa(t),u=Aa(r),d=Aa(i),f=Aa(o),p=o?`(${s} < ${f} ? ${a?"":"-"}0.5 * (${f} - (${s})) : ${l})`:l;return{signal:(d?`${d} + `:"")+(c?`(${c} ? -1 : 1) * `:"")+(u?`(${u} + ${p})`:p)}}return r=r||0,i+(t?-r-l:+r+l)}function gle({fieldDef:e,scaleName:n,bandPosition:t,offset:i,useRectOffsetField:r}){return H2({scaleName:n,fieldOrDatumDef:e,bandPosition:t,offset:i,...r?{startSuffix:cT,endSuffix:uT}:{}})}const bYe=new Set(["aria","width","height"]);function zs(e,n){const{fill:t,stroke:i}="include"===n.color?dle(e):{};return{...wYe(e.markDef,n),...mle(e,"fill",t),...mle(e,"stroke",i),...Si("opacity",e),...Si("fillOpacity",e),...Si("strokeOpacity",e),...Si("strokeWidth",e),...Si("strokeDash",e),...dYe(e),...lle(e),...K5(e,"href"),...lYe(e)}}function mle(e,n,t){const{config:i,mark:r,markDef:o}=e;if("hide"===Zt("invalid",o,i)&&t&&!Ad(r)){const a=function CYe(e,{invalid:n=!1,channels:t}){const i=t.reduce((o,s)=>{const a=e.getScaleComponent(s);if(a){const l=a.get("type"),c=e.vgField(s,{expr:"datum"});c&&os(l)&&(o[c]=!0)}return o},{}),r=ce(i);if(r.length>0){const o=n?"||":"&&";return r.map(s=>h5(s,n)).join(` ${o} `)}}(e,{invalid:!0,channels:k2});if(a)return{[n]:[{test:a,value:null},...Ce(t)]}}return t?{[n]:t}:{}}function wYe(e,n){return Gje.reduce((t,i)=>(!bYe.has(i)&&void 0!==e[i]&&"ignore"!==n[i]&&(t[i]=wn(e[i])),t),{})}function X5(e){const{config:n,markDef:t}=e;if(Zt("invalid",t,n)){const r=function xYe(e,{invalid:n=!1,channels:t}){const i=t.reduce((o,s)=>{const a=e.getScaleComponent(s);if(a){const l=a.get("type"),c=e.vgField(s,{expr:"datum",binSuffix:e.stack?.impute?"mid":void 0});c&&os(l)&&(o[c]=!0)}return o},{}),r=ce(i);if(r.length>0){const o=n?"||":"&&";return r.map(s=>h5(s,n)).join(` ${o} `)}}(e,{channels:Pl});if(r)return{defined:{signal:r}}}return{}}function _le(e,n){if(void 0!==n)return{[e]:wn(n)}}const Q5="voronoi",yle={defined:e=>"point"===e.type&&e.nearest,parse:(e,n)=>{if(n.events)for(const t of n.events)t.markname=e.getName(Q5)},marks:(e,n,t)=>{const{x:i,y:r}=n.project.hasChannel,o=e.mark;if(Ad(o))return fe(function Jje(e){return`The "nearest" transform is not supported for ${e} marks.`}(o)),t;const s={name:e.getName(Q5),type:"path",interactive:!0,from:{data:e.getName("marks")},encode:{update:{fill:{value:"transparent"},strokeWidth:{value:.35},stroke:{value:"transparent"},isVoronoi:{value:!0},...lle(e,{reactiveGeom:!0})}},transform:[{type:"voronoi",x:{expr:i||!r?"datum.datum.x || 0":"0"},y:{expr:r||!i?"datum.datum.y || 0":"0"},size:[e.getSizeSignalRef("width"),e.getSizeSignalRef("height")]}]};let a=0,l=!1;return t.forEach((c,u)=>{const d=c.name??"";d===e.component.mark[0].name?a=u:d.indexOf(Q5)>=0&&(l=!0)}),l||t.splice(a+1,0,s),t}},vle={defined:e=>"point"===e.type&&"global"===e.resolve&&e.bind&&"scales"!==e.bind&&!k5(e.bind),parse:(e,n,t)=>Mle(n,t),topLevelSignals:(e,n,t)=>{const i=n.name,r=n.project,o=n.bind,s=n.init&&n.init[0],a=yle.defined(n)?"(item().isVoronoi ? datum.datum : datum)":"datum";return r.items.forEach((l,c)=>{const u=In(`${i}_${l.field}`);t.filter(f=>f.name===u).length||t.unshift({name:u,...s?{init:Lh(s[c])}:{value:null},on:n.events?[{events:n.events,update:`datum && item().mark.marktype !== 'group' ? ${a}[${ge(l.field)}] : null`}]:[],bind:o[l.field]??o[l.channel]??o})}),t},signals:(e,n,t)=>{const i=n.name,r=n.project,o=t.filter(c=>c.name===i+Pd)[0],s=i+vv,a=r.items.map(c=>In(`${i}_${c.field}`)),l=a.map(c=>`${c} !== null`).join(" && ");return a.length&&(o.update=`${l} ? {fields: ${s}, values: [${a.join(", ")}]} : null`),delete o.value,delete o.on,t}},pT="_toggle",ble={defined:e=>"point"===e.type&&!!e.toggle,signals:(e,n,t)=>t.concat({name:n.name+pT,value:!1,on:[{events:n.events,update:n.toggle}]}),modifyExpr:(e,n)=>{const t=n.name+Pd,i=n.name+pT;return`${i} ? null : ${t}, `+("global"===n.resolve?`${i} ? null : true, `:`${i} ? null : {unit: ${Bh(e)}}, `)+`${i} ? ${t} : null`}},EYe={defined:e=>void 0!==e.clear&&!1!==e.clear,parse:(e,n)=>{n.clear&&(n.clear=xe(n.clear)?_d(n.clear,"view"):n.clear)},topLevelSignals:(e,n,t)=>{if(vle.defined(n))for(const i of n.project.items){const r=t.findIndex(o=>o.name===In(`${n.name}_${i.field}`));-1!==r&&t[r].on.push({events:n.clear,update:"null"})}return t},signals:(e,n,t)=>{function i(r,o){-1!==r&&t[r].on&&t[r].on.push({events:n.clear,update:o})}if("interval"===n.type)for(const r of n.project.items){const o=t.findIndex(s=>s.name===r.signals.visual);i(o,"[0, 0]"),-1===o&&i(t.findIndex(a=>a.name===r.signals.data),"null")}else{let r=t.findIndex(o=>o.name===n.name+Pd);i(r,"null"),ble.defined(n)&&(r=t.findIndex(o=>o.name===n.name+pT),i(r,"false"))}return t}},wle={defined:e=>{const n="global"===e.resolve&&e.bind&&k5(e.bind),t=1===e.project.items.length&&e.project.items[0].field!==Na;return n&&!t&&fe("Legend bindings are only supported for selections over an individual field or encoding channel."),n&&t},parse:(e,n,t)=>{const i=tt(t);if(i.select=xe(i.select)?{type:i.select,toggle:n.toggle}:{...i.select,toggle:n.toggle},Mle(n,i),Ee(t.select)&&(t.select.on||t.select.clear)){const s='event.item && indexof(event.item.mark.role, "legend") < 0';for(const a of n.events)a.filter=Ce(a.filter??[]),a.filter.includes(s)||a.filter.push(s)}const r=O5(n.bind)?n.bind.legend:"click",o=xe(r)?_d(r,"view"):Ce(r);n.bind={legend:{merge:o}}},topLevelSignals:(e,n,t)=>{const i=n.name,r=O5(n.bind)&&n.bind.legend,o=s=>a=>{const l=tt(a);return l.markname=s,l};for(const s of n.project.items){if(!s.hasLegend)continue;const a=`${In(s.field)}_legend`,l=`${i}_${a}`;if(0===t.filter(u=>u.name===l).length){const u=r.merge.map(o(`${a}_symbols`)).concat(r.merge.map(o(`${a}_labels`))).concat(r.merge.map(o(`${a}_entries`)));t.unshift({name:l,...n.init?{}:{value:null},on:[{events:u,update:"isDefined(datum.value) ? datum.value : item().items[0].items[0].datum.value",force:!0},{events:r.merge,update:`!event.item || !datum ? null : ${l}`,force:!0}]})}}return t},signals:(e,n,t)=>{const i=n.name,r=n.project,o=t.find(f=>f.name===i+Pd),s=i+vv,a=r.items.filter(f=>f.hasLegend).map(f=>In(`${i}_${In(f.field)}_legend`)),c=`${a.map(f=>`${f} !== null`).join(" && ")} ? {fields: ${s}, values: [${a.join(", ")}]} : null`;n.events&&a.length>0?o.on.push({events:a.map(f=>({signal:f})),update:c}):a.length>0&&(o.update=c,delete o.value,delete o.on);const u=t.find(f=>f.name===i+pT),d=O5(n.bind)&&n.bind.legend;return u&&(n.events?u.on.push({...u.on[0],events:d}):u.on[0].events=d),t}},Cle="_translate_anchor",xle="_translate_delta",DYe={defined:e=>"interval"===e.type&&e.translate,signals:(e,n,t)=>{const i=n.name,r=Kc.defined(n),o=i+Cle,{x:s,y:a}=n.project.hasChannel;let l=_d(n.translate,"scope");return r||(l=l.map(c=>(c.between[0].markname=i+Km,c))),t.push({name:o,value:{},on:[{events:l.map(c=>c.between[0]),update:"{x: x(unit), y: y(unit)"+(void 0!==s?`, extent_x: ${r?G5(e,Mn):`slice(${s.signals.visual})`}`:"")+(void 0!==a?`, extent_y: ${r?G5(e,Ci):`slice(${a.signals.visual})`}`:"")+"}"}]},{name:i+xle,value:{},on:[{events:l,update:`{x: ${o}.x - x(unit), y: ${o}.y - y(unit)}`}]}),void 0!==s&&Ele(e,n,s,"width",t),void 0!==a&&Ele(e,n,a,"height",t),t}};function Ele(e,n,t,i,r){const o=n.name,s=o+Cle,a=o+xle,l=t.channel,c=Kc.defined(n),u=r.filter(w=>w.name===t.signals[c?"data":"visual"])[0],d=e.getSizeSignalRef(i).signal,f=e.getScaleComponent(l),h=f&&f.get("type"),p=f&&f.get("reverse"),m=`${s}.extent_${l}`,b=`${c&&f?"log"===h?"panLog":"symlog"===h?"panSymlog":"pow"===h?"panPow":"panLinear":"panLinear"}(${m}, ${c?l===Mn?p?"":"-":p?"-":"":""}${a}.${l} / ${c?`${d}`:`span(${m})`}${c?"pow"===h?`, ${f.get("exponent")??1}`:"symlog"===h?`, ${f.get("constant")??1}`:"":""})`;u.on.push({events:{signal:a},update:c?b:`clampRange(${b}, 0, ${d})`})}const Sle="_zoom_anchor",Tle="_zoom_delta",IYe={defined:e=>"interval"===e.type&&e.zoom,signals:(e,n,t)=>{const i=n.name,r=Kc.defined(n),o=i+Tle,{x:s,y:a}=n.project.hasChannel,l=ge(e.scaleName(Mn)),c=ge(e.scaleName(Ci));let u=_d(n.zoom,"scope");return r||(u=u.map(d=>(d.markname=i+Km,d))),t.push({name:i+Sle,on:[{events:u,update:r?"{"+[l?`x: invert(${l}, x(unit))`:"",c?`y: invert(${c}, y(unit))`:""].filter(d=>d).join(", ")+"}":"{x: x(unit), y: y(unit)}"}]},{name:o,on:[{events:u,force:!0,update:"pow(1.001, event.deltaY * pow(16, event.deltaMode))"}]}),void 0!==s&&Dle(e,n,s,"width",t),void 0!==a&&Dle(e,n,a,"height",t),t}};function Dle(e,n,t,i,r){const o=n.name,s=t.channel,a=Kc.defined(n),l=r.filter(y=>y.name===t.signals[a?"data":"visual"])[0],c=e.getSizeSignalRef(i).signal,u=e.getScaleComponent(s),d=u&&u.get("type"),f=a?G5(e,s):l.name,h=o+Tle,_=`${a&&u?"log"===d?"zoomLog":"symlog"===d?"zoomSymlog":"pow"===d?"zoomPow":"zoomLinear":"zoomLinear"}(${f}, ${o}${Sle}.${s}, ${h}${a?"pow"===d?`, ${u.get("exponent")??1}`:"symlog"===d?`, ${u.get("constant")??1}`:"":""})`;l.on.push({events:{signal:h},update:a?_:`clampRange(${_}, 0, ${c})`})}const $h="_store",Pd="_tuple",MYe="_modify",Ile="vlSelectionResolve",gT=[aYe,oYe,iYe,ble,vle,Kc,wle,EYe,DYe,IYe,yle];function Bh(e,{escape:n}={escape:!0}){let t=n?ge(e.name):e.name;const i=function AYe(e){let n=e.parent;for(;n&&!$a(n);)n=n.parent;return n}(e);if(i){const{facet:r}=i;for(const o of Vs)r[o]&&(t+=` + '__facet_${o}_' + (facet[${ge(i.vgField(o))}])`)}return t}function Z5(e){return ji(e.component.selection??{}).reduce((n,t)=>n||t.project.hasSelectionId,!1)}function Mle(e,n){(xe(n.select)||!n.select.on)&&delete e.events,(xe(n.select)||!n.select.clear)&&delete e.clear,(xe(n.select)||!n.select.toggle)&&delete e.toggle}function J5(e){const n=[];return"Identifier"===e.type?[e.name]:"Literal"===e.type?[e.value]:("MemberExpression"===e.type&&(n.push(...J5(e.object)),n.push(...J5(e.property))),n)}function Ale(e){return"MemberExpression"===e.object.type?Ale(e.object):"datum"===e.object.name}function kle(e){const n=_P(e),t=new Set;return n.visit(i=>{"MemberExpression"===i.type&&Ale(i)&&t.add(J5(i).slice(1).join("."))}),t}class Qm extends on{clone(){return new Qm(null,this.model,tt(this.filter))}constructor(n,t,i){super(n),this.model=t,this.filter=i,this.expr=mT(this.model,this.filter,this),this._dependentFields=kle(this.expr)}dependentFields(){return this._dependentFields}producedFields(){return new Set}assemble(){return{type:"filter",expr:this.expr}}hash(){return`Filter ${this.expr}`}}function Ole(e,n,t,i="datum"){const r=xe(n)?n:n.param,o=In(r),s=ge(o+$h);let a;try{a=e.getSelectionComponent(o,r)}catch{return`!!${o}`}if(a.project.timeUnit){const f=t??e.component.data.raw,h=a.project.timeUnit.clone();f.parent?h.insertAsParentOf(f):f.parent=h}const u=`${a.project.hasSelectionId?"vlSelectionIdTest(":"vlSelectionTest("}${s}, ${i}${"global"===a.resolve?")":`, ${ge(a.resolve)})`}`,d=`length(data(${s}))`;return!1===n.empty?`${d} && ${u}`:`!${d} || ${u}`}function Rle(e,n,t){const i=In(n),r=t.encoding;let s,o=t.field;try{s=e.getSelectionComponent(i,n)}catch{return i}if(r||o){if(r&&!o){const a=s.project.items.filter(l=>l.channel===r);!a.length||a.length>1?(o=s.project.items[0].field,fe((a.length?"Multiple ":"No ")+`matching ${ge(r)} encoding found for selection ${ge(t.param)}. Using "field": ${ge(o)}.`)):o=a[0].field}}else o=s.project.items[0].field,s.project.items.length>1&&fe(`A "field" or "encoding" must be specified when using a selection as a scale domain. Using "field": ${ge(o)}.`);return`${s.name}[${ge(Ls(o))}]`}function mT(e,n,t){return iv(n,i=>xe(i)?i:function _We(e){return e?.param}(i)?Ole(e,i,t):hse(i))}function e6(e,n,t,i){var r,o;e.encode??(e.encode={}),(r=e.encode)[n]??(r[n]={}),(o=e.encode[n]).update??(o.update={}),e.encode[n].update[t]=i}function wv(e,n,t,i={header:!1}){const{disable:r,orient:o,scale:s,labelExpr:a,title:l,zindex:c,...u}=e.combine();if(!r){for(const d in u){const f=mGe[d],h=u[d];if(f&&f!==n&&"both"!==f)delete u[d];else if(_v(h)){const{condition:p,...g}=h,m=Ce(p),_=Qse[d];if(_){const{vgProp:y,part:v}=_;e6(u,v,y,[...m.map(w=>{const{test:x,...C}=w;return{test:mT(null,x),...C}}),g]),delete u[d]}else if(null===_){const y={signal:m.map(v=>{const{test:b,...w}=v;return`${mT(null,b)} ? ${Roe(w)} : `}).join("")+Roe(g)};u[d]=y}}else if(Pe(h)){const p=Qse[d];if(p){const{vgProp:g,part:m}=p;e6(u,m,g,h),delete u[d]}}St(["labelAlign","labelBaseline"],d)&&null===u[d]&&delete u[d]}if("grid"===n){if(!u.grid)return;if(u.encode){const{grid:d}=u.encode;u.encode={...d?{grid:d}:{}},an(u.encode)&&delete u.encode}return{scale:s,orient:o,...u,domain:!1,labels:!1,aria:!1,maxExtent:0,minExtent:0,ticks:!1,zindex:Xn(c,0)}}{if(!i.header&&e.mainExtracted)return;if(void 0!==a){let f=a;u.encode?.labels?.update&&Pe(u.encode.labels.update.text)&&(f=Ch(a,"datum.label",u.encode.labels.update.text.signal)),e6(u,"labels","text",{signal:f})}if(null===u.labelAlign&&delete u.labelAlign,u.encode){for(const f of Zse)e.hasAxisPart(f)||delete u.encode[f];an(u.encode)&&delete u.encode}const d=function RYe(e,n){if(e)return oe(e)&&!Dd(e)?e.map(t=>b5(t,n)).join(", "):e}(l,t);return{scale:s,orient:o,grid:!1,...d?{title:d}:{},...u,...!1===t.aria?{aria:!1}:{},zindex:Xn(c,0)}}}}function Fle(e){const{axes:n}=e.component,t=[];for(const i of Pl)if(n[i])for(const r of n[i])if(!r.get("disable")&&!r.get("gridScale")){const o="x"===i?"height":"width",s=e.getSizeSignalRef(o).signal;o!==s&&t.push({name:o,update:s})}return t}function Nle(e,n,t,i){return Object.assign.apply(null,[{},...e.map(r=>{if("axisOrient"===r){const o="x"===t?"bottom":"left",s=n["x"===t?"axisBottom":"axisLeft"]||{},a=n["x"===t?"axisTop":"axisRight"]||{},l=new Set([...ce(s),...ce(a)]),c={};for(const u of l.values())c[u]={signal:`${i.signal} === "${o}" ? ${Aa(s[u])} : ${Aa(a[u])}`};return c}return n[r]})])}function PYe(e,n){const t=[{}];for(const i of e){let r=n[i]?.style;if(r){r=Ce(r);for(const o of r)t.push(n.style[o])}}return Object.assign.apply(null,t)}function t6(e,n,t,i={}){const r=Noe(e,t,n);if(void 0!==r)return{configFrom:"style",configValue:r};for(const o of["vlOnlyAxisConfig","vgAxisConfig","axisConfigStyle"])if(void 0!==i[o]?.[e])return{configFrom:o,configValue:i[o][e]};return{}}const Ple={scale:({model:e,channel:n})=>e.scaleName(n),format:({format:e})=>e,formatType:({formatType:e})=>e,grid:({fieldOrDatumDef:e,axis:n,scaleType:t})=>n.grid??function LYe(e,n){return!Ei(e)&&he(n)&&!_n(n?.bin)&&!qi(n?.bin)}(t,e),gridScale:({model:e,channel:n})=>function $Ye(e,n){const t="x"===n?"y":"x";if(e.getScaleComponent(t))return e.scaleName(t)}(e,n),labelAlign:({axis:e,labelAngle:n,orient:t,channel:i})=>e.labelAlign||$le(n,t,i),labelAngle:({labelAngle:e})=>e,labelBaseline:({axis:e,labelAngle:n,orient:t,channel:i})=>e.labelBaseline||Lle(n,t,i),labelFlush:({axis:e,fieldOrDatumDef:n,channel:t})=>e.labelFlush??function VYe(e,n){if("x"===n&&St(["quantitative","temporal"],e))return!0}(n.type,t),labelOverlap:({axis:e,fieldOrDatumDef:n,scaleType:t})=>e.labelOverlap??function zYe(e,n,t,i){if(t&&!Ee(i)||"nominal"!==e&&"ordinal"!==e)return"log"!==n&&"symlog"!==n||"greedy"}(n.type,t,he(n)&&!!n.timeUnit,he(n)?n.sort:void 0),orient:({orient:e})=>e,tickCount:({channel:e,model:n,axis:t,fieldOrDatumDef:i,scaleType:r})=>{const o="x"===e?"width":"y"===e?"height":void 0,s=o?n.getSizeSignalRef(o):void 0;return t.tickCount??function HYe({fieldOrDatumDef:e,scaleType:n,size:t,values:i}){if(!i&&!Ei(n)&&"log"!==n){if(he(e)){if(_n(e.bin))return{signal:`ceil(${t.signal}/10)`};if(e.timeUnit&&St(["month","hours","day","quarter"],xi(e.timeUnit)?.unit))return}return{signal:`ceil(${t.signal}/40)`}}}({fieldOrDatumDef:i,scaleType:r,size:s,values:t.values})},tickMinStep:function jYe({format:e,fieldOrDatumDef:n}){if("d"===e)return 1;if(he(n)){const{timeUnit:t}=n;if(t){const i=use(t);if(i)return{signal:i}}}},title:({axis:e,model:n,channel:t})=>{if(void 0!==e.title)return e.title;const i=Ble(n,t);if(void 0!==i)return i;const r=n.typedFieldDef(t),s=n.fieldDef("x"===t?"x2":"y2");return Loe(r?[Bse(r)]:[],he(s)?[Bse(s)]:[])},values:({axis:e,fieldOrDatumDef:n})=>function qYe(e,n){const t=e.values;return oe(t)?Xse(n,t):Pe(t)?t:void 0}(e,n),zindex:({axis:e,fieldOrDatumDef:n,mark:t})=>e.zindex??function WYe(e,n){return"rect"===e&&Y2(n)?1:0}(t,n)};function n6(e){return`(((${e.signal} % 360) + 360) % 360)`}function Lle(e,n,t,i){if(void 0!==e){if("x"===t){if(Pe(e)){const r=n6(e);return{signal:`(45 < ${r} && ${r} < 135) || (225 < ${r} && ${r} < 315) ? "middle" :(${r} <= 45 || 315 <= ${r}) === ${Pe(n)?`(${n.signal} === "top")`:"top"===n} ? "bottom" : "top"`}}return 45<e&&e<135||225<e&&e<315?"middle":Pe(n)?{signal:`${n.signal} ${e<=45||315<=e?"===":"!=="} "top" ? "bottom" : "top"`}:(e<=45||315<=e)==("top"===n)?"bottom":"top"}if(Pe(e)){const r=n6(e);return{signal:`${r} <= 45 || 315 <= ${r} || (135 <= ${r} && ${r} <= 225) ? ${i?'"middle"':"null"} : (45 <= ${r} && ${r} <= 135) === ${Pe(n)?`(${n.signal} === "left")`:"left"===n} ? "top" : "bottom"`}}return e<=45||315<=e||135<=e&&e<=225?i?"middle":null:Pe(n)?{signal:`${n.signal} ${45<=e&&e<=135?"===":"!=="} "left" ? "top" : "bottom"`}:(45<=e&&e<=135)==("left"===n)?"top":"bottom"}}function $le(e,n,t){if(void 0===e)return;const i="x"===t,r=i?0:90,o=i?"bottom":"left";if(Pe(e)){const s=n6(e);return{signal:`(${r?`(${s} + 90)`:s} % 180 === 0) ? ${i?null:'"center"'} :(${r} < ${s} && ${s} < ${180+r}) === ${Pe(n)?`(${n.signal} === "${o}")`:n===o} ? "left" : "right"`}}return(e+r)%180==0?i?null:"center":Pe(n)?{signal:`${n.signal} ${r<e&&e<180+r?"===":"!=="} "${o}" ? "left" : "right"`}:(r<e&&e<180+r)==(n===o)?"left":"right"}function Ble(e,n){const t="x"===n?"x2":"y2",i=e.fieldDef(n),r=e.fieldDef(t),o=i?i.title:void 0,s=r?r.title:void 0;return o&&s?$oe(o,s):o||s||(void 0!==o?o:void 0!==s?s:void 0)}class Zm extends on{clone(){return new Zm(null,tt(this.transform))}constructor(n,t){super(n),this.transform=t,this._dependentFields=kle(this.transform.calculate)}static parseAllForSortIndex(n,t){return t.forEachFieldDef((i,r)=>{if(Nh(i)&&$se(i.sort)){const{field:o,timeUnit:s}=i,a=i.sort,l=a.map((c,u)=>`${hse({field:o,timeUnit:s,equal:c})} ? ${u} : `).join("")+a.length;n=new Zm(n,{calculate:l,as:Jm(i,r,{forAs:!0})})}}),n}producedFields(){return new Set([this.transform.as])}dependentFields(){return this._dependentFields}assemble(){return{type:"formula",expr:this.transform.calculate,as:this.transform.as}}hash(){return`Calculate ${Et(this.transform)}`}}function Jm(e,n,t){return ye(e,{prefix:n,suffix:"sort_index",...t??{}})}function _T(e,n){return St(["top","bottom"],n)?"column":St(["left","right"],n)||"row"===e?"row":"column"}function e0(e,n,t,i){return Xn((n||{})[e],("row"===i?t.headerRow:"column"===i?t.headerColumn:t.headerFacet)[e],t.header[e])}function yT(e,n,t,i){const r={};for(const o of e){const s=e0(o,n||{},t,i);void 0!==s&&(r[o]=s)}return r}const r6=["row","column"],o6=["header","footer"];function GYe(e,n){const t=e.component.layoutHeaders[n].title,i=e.config?e.config:void 0,r=e.component.layoutHeaders[n].facetFieldDef?e.component.layoutHeaders[n].facetFieldDef:void 0,{titleAnchor:o,titleAngle:s,titleOrient:a}=yT(["titleAnchor","titleAngle","titleOrient"],r.header,i,n),l=_T(n,a),c=ov(s);return{name:`${n}-title`,type:"group",role:`${l}-title`,title:{text:t,..."row"===n?{orient:"left"}:{},style:"guide-title",...zle(c,l),...Vle(l,c,o),...Ule(i,r,n,PGe,_ae)}}}function Vle(e,n,t="middle"){switch(t){case"start":return{align:"left"};case"end":return{align:"right"}}const i=$le(n,"row"===e?"left":"top","row"===e?"y":"x");return i?{align:i}:{}}function zle(e,n){const t=Lle(e,"row"===n?"left":"top","row"===n?"y":"x",!0);return t?{baseline:t}:{}}function KYe(e,n){const t=e.component.layoutHeaders[n],i=[];for(const r of o6)if(t[r])for(const o of t[r]){const s=XYe(e,n,r,t,o);null!=s&&i.push(s)}return i}function YYe(e,n){const{sort:t}=e;return Bl(t)?{field:ye(t,{expr:"datum"}),order:t.order??"ascending"}:oe(t)?{field:Jm(e,n,{expr:"datum"}),order:"ascending"}:{field:ye(e,{expr:"datum"}),order:t??"ascending"}}function s6(e,n,t){const{format:i,formatType:r,labelAngle:o,labelAnchor:s,labelOrient:a,labelExpr:l}=yT(["format","formatType","labelAngle","labelAnchor","labelOrient","labelExpr"],e.header,t,n),c=g5({fieldOrDatumDef:e,format:i,formatType:r,expr:"parent",config:t}).signal,u=_T(n,a);return{text:{signal:l?Ch(Ch(l,"datum.label",c),"datum.value",ye(e,{expr:"parent"})):c},..."row"===n?{orient:"left"}:{},style:"guide-label",frame:"group",...zle(o,u),...Vle(u,o,s),...Ule(t,e,n,LGe,yae)}}function XYe(e,n,t,i,r){if(r){let o=null;const{facetFieldDef:s}=i,a=e.config?e.config:void 0;if(s&&r.labels){const{labelOrient:d}=yT(["labelOrient"],s.header,a,n);("row"===n&&!St(["top","bottom"],d)||"column"===n&&!St(["left","right"],d))&&(o=s6(s,n,a))}const l=$a(e)&&!pv(e.facet),c=r.axes,u=c?.length>0;if(o||u){const d="row"===n?"height":"width";return{name:e.getName(`${n}_${t}`),type:"group",role:`${n}-${t}`,...i.facetFieldDef?{from:{data:e.getName(`${n}_domain`)},sort:YYe(s,n)}:{},...u&&l?{from:{data:e.getName(`facet_domain_${n}`)}}:{},...o?{title:o}:{},...r.sizeSignal?{encode:{update:{[d]:r.sizeSignal}}}:{},...u?{axes:c}:{}}}}return null}const QYe={column:{start:0,end:1},row:{start:1,end:0}};function ZYe(e,n){return QYe[n][e]}function Ule(e,n,t,i,r){const o={};for(const s of i){if(!r[s])continue;const a=e0(s,n?.header,e,t);void 0!==a&&(o[r[s]]=a)}return o}function a6(e){return[...vT(e,"width"),...vT(e,"height"),...vT(e,"childWidth"),...vT(e,"childHeight")]}function vT(e,n){const t="width"===n?"x":"y",i=e.component.layoutSize.get(n);if(!i||"merged"===i)return[];const r=e.getSizeSignalRef(n).signal;if("step"===i){const o=e.getScaleComponent(t);if(o){const s=o.get("type"),a=o.get("range");if(Ei(s)&&Id(a)){const l=e.scaleName(t);return $a(e.parent)&&"independent"===e.parent.component.resolve.scale[t]?[Hle(l,a)]:[Hle(l,a),{name:r,update:jle(l,o,`domain('${l}').length`)}]}}throw new Error("layout size is step although width/height is not step.")}if("container"==i){const o=r.endsWith("width"),s=o?"containerSize()[0]":"containerSize()[1]",l=`isFinite(${s}) ? ${s} : ${P5(e.config.view,o?"width":"height")}`;return[{name:r,init:l,on:[{update:l,events:"window:resize"}]}]}return[{name:r,value:i}]}function Hle(e,n){const t=`${e}_step`;return Pe(n.step)?{name:t,update:n.step.signal}:{name:t,value:n.step}}function jle(e,n,t){const i=n.get("type"),r=n.get("padding"),o=Xn(n.get("paddingOuter"),r);let s=n.get("paddingInner");return s="band"===i?void 0!==s?s:r:1,`bandspace(${t}, ${Aa(s)}, ${Aa(o)}) * ${e}_step`}function qle(e){return"childWidth"===e?"width":"childHeight"===e?"height":e}function Wle(e,n){return ce(e).reduce((t,i)=>({...t,...Ym(n,e[i],i,o=>wn(o.value))}),{})}function Gle(e,n){if($a(n))return"theta"===e?"independent":"shared";if(r0(n))return"shared";if(C6(n))return Qn(e)||"theta"===e||"radius"===e?"independent":"shared";throw new Error("invalid model type for resolve")}function l6(e,n){const t=e.scale[n],i=Qn(n)?"axis":"legend";return"independent"===t?("shared"===e[i][n]&&fe(function $qe(e){return`Setting the scale to be independent for "${e}" means we also have to set the guide (axis or legend) to be independent.`}(n)),"independent"):e[i][n]||"shared"}const eXe={...wae,disable:1,labelExpr:1,selections:1,opacity:1,shape:1,stroke:1,fill:1,size:1,strokeWidth:1,strokeDash:1,encode:1},Kle=ce(eXe);class tXe extends Gc{}const Yle={symbols:function nXe(e,{fieldOrDatumDef:n,model:t,channel:i,legendCmpt:r,legendType:o}){if("symbol"!==o)return;const{markDef:s,encoding:a,config:l,mark:c}=t,u=s.filled&&"trail"!==c;let d={...Xje({},t,VWe),...dle(t,{filled:u})};const f=r.get("symbolOpacity")??l.legend.symbolOpacity,h=r.get("symbolFillColor")??l.legend.symbolFillColor,p=r.get("symbolStrokeColor")??l.legend.symbolStrokeColor,g=void 0===f?Xle(a.opacity)??s.opacity:void 0;if(d.fill)if("fill"===i||u&&i===_o)delete d.fill;else if(d.fill.field)h?delete d.fill:(d.fill=wn(l.legend.symbolBaseFillColor??"black"),d.fillOpacity=wn(g??1));else if(oe(d.fill)){const m=c6(a.fill??a.color)??s.fill??(u&&s.color);m&&(d.fill=wn(m))}if(d.stroke)if("stroke"===i||!u&&i===_o)delete d.stroke;else if(d.stroke.field||p)delete d.stroke;else if(oe(d.stroke)){const m=Xn(c6(a.stroke||a.color),s.stroke,u?s.color:void 0);m&&(d.stroke={value:m})}if(i!==Vc){const m=he(n)&&Zle(0,r,n);m?d.opacity=[{test:m,...wn(g??1)},wn(l.legend.unselectedOpacity)]:g&&(d.opacity=wn(g))}return d={...d,...e},an(d)?void 0:d},gradient:function iXe(e,{model:n,legendType:t,legendCmpt:i}){if("gradient"!==t)return;const{config:r,markDef:o,encoding:s}=n;let a={};const c=void 0===(i.get("gradientOpacity")??r.legend.gradientOpacity)?Xle(s.opacity)||o.opacity:void 0;return c&&(a.opacity=wn(c)),a={...a,...e},an(a)?void 0:a},labels:function rXe(e,{fieldOrDatumDef:n,model:t,channel:i,legendCmpt:r}){const o=t.legend(i)||{},s=t.config,a=he(n)?Zle(0,r,n):void 0,l=a?[{test:a,value:1},{value:s.legend.unselectedOpacity}]:void 0,{format:c,formatType:u}=o;let d;Fh(u)?d=Ra({fieldOrDatumDef:n,field:"datum.value",format:c,formatType:u,config:s}):void 0===c&&void 0===u&&s.customFormatTypes&&("quantitative"===n.type&&s.numberFormatType?d=Ra({fieldOrDatumDef:n,field:"datum.value",format:s.numberFormat,formatType:s.numberFormatType,config:s}):"temporal"===n.type&&s.timeFormatType&&he(n)&&void 0===n.timeUnit&&(d=Ra({fieldOrDatumDef:n,field:"datum.value",format:s.timeFormat,formatType:s.timeFormatType,config:s})));const f={...l?{opacity:l}:{},...d?{text:d}:{},...e};return an(f)?void 0:f},entries:function oXe(e,{legendCmpt:n}){return n.get("selections")?.length?{...e,fill:{value:"transparent"}}:e}};function Xle(e){return Qle(e,(n,t)=>Math.max(n,t.value))}function c6(e){return Qle(e,(n,t)=>Xn(n,t.value))}function Qle(e,n){return function rGe(e){const n=e?.condition;return!!n&&(oe(n)||Fa(n))}(e)?Ce(e.condition).reduce(n,e.value):Fa(e)?e.value:void 0}function Zle(e,n,t){const i=n.get("selections");if(!i?.length)return;const r=ge(t.field);return i.map(o=>`(!length(data(${ge(In(o)+$h)})) || (${o}[${r}] && indexof(${o}[${r}], datum.value) >= 0))`).join(" || ")}const Jle={direction:({direction:e})=>e,format:({fieldOrDatumDef:e,legend:n,config:t})=>{const{format:i,formatType:r}=n;return Ose(e,e.type,i,r,t,!1)},formatType:({legend:e,fieldOrDatumDef:n,scaleType:t})=>{const{formatType:i}=e;return Rse(i,n,t)},gradientLength:e=>{const{legend:n,legendConfig:t}=e;return n.gradientLength??t.gradientLength??function fXe({legendConfig:e,model:n,direction:t,orient:i,scaleType:r}){const{gradientHorizontalMaxLength:o,gradientHorizontalMinLength:s,gradientVerticalMaxLength:a,gradientVerticalMinLength:l}=e;if(ka(r))return"horizontal"===t?"top"===i||"bottom"===i?ece(n,"width",s,o):s:ece(n,"height",l,a)}(e)},labelOverlap:({legend:e,legendConfig:n,scaleType:t})=>e.labelOverlap??n.labelOverlap??function hXe(e){if(St(["quantile","threshold","log","symlog"],e))return"greedy"}(t),symbolType:({legend:e,markDef:n,channel:t,encoding:i})=>e.symbolType??function aXe(e,n,t,i){if("shape"!==n){const r=c6(t)??i;if(r)return r}switch(e){case"bar":case"rect":case"image":case"square":return"square";case"line":case"trail":case"rule":return"stroke";case"arc":case"point":case"circle":case"tick":case"geoshape":case"area":case"text":return"circle"}}(n.type,t,i.shape,n.shape),title:({fieldOrDatumDef:e,config:n})=>Hm(e,n,{allowDisabling:!0}),type:({legendType:e,scaleType:n,channel:t})=>{if(Lm(t)&&ka(n)){if("gradient"===e)return}else if("symbol"===e)return;return e},values:({fieldOrDatumDef:e,legend:n})=>function sXe(e,n){const t=e.values;return oe(t)?Xse(n,t):Pe(t)?t:void 0}(n,e)};function ece(e,n,t,i){return{signal:`clamp(${e.getSizeSignalRef(n).signal}, ${t}, ${i})`}}function tce(e){const n=Vn(e)?function pXe(e){const{encoding:n}=e,t={};for(const i of[_o,...bae]){const r=gi(n[i]);!r||!e.getScaleComponent(i)||i===yo&&he(r)&&r.type===Bm||(t[i]=_Xe(e,i))}return t}(e):function yXe(e){const{legends:n,resolve:t}=e.component;for(const i of e.children){tce(i);for(const r of ce(i.component.legends))t.legend[r]=l6(e.component.resolve,r),"shared"===t.legend[r]&&(n[r]=nce(n[r],i.component.legends[r]),n[r]||(t.legend[r]="independent",delete n[r]))}for(const i of ce(n))for(const r of e.children)r.component.legends[i]&&"shared"===t.legend[i]&&delete r.component.legends[i];return n}(e);return e.component.legends=n,n}function mXe(e,n,t,i){switch(n){case"disable":return void 0!==t;case"values":return!!t?.values;case"title":if("title"===n&&e===i?.title)return!0}return e===(t||{})[n]}function _Xe(e,n){let t=e.legend(n);const{markDef:i,encoding:r,config:o}=e,s=o.legend,a=new tXe({},function gXe(e,n){const t=e.scaleName(n);if("trail"===e.mark){if("color"===n)return{stroke:t};if("size"===n)return{strokeWidth:t}}return"color"===n?e.markDef.filled?{fill:t}:{stroke:t}:{[n]:t}}(e,n));!function TYe(e,n,t){const i=e.fieldDef(n)?.field;for(const r of ji(e.component.selection??{})){const o=r.project.hasField[i]??r.project.hasChannel[n];if(o&&wle.defined(r)){const s=t.get("selections")??[];s.push(r.name),t.set("selections",s,!1),o.hasLegend=!0}}}(e,n,a);const l=void 0!==t?!t:s.disable;if(a.set("disable",l,void 0!==t),l)return a;t=t||{};const c=e.getScaleComponent(n).get("type"),u=gi(r[n]),d=he(u)?xi(u.timeUnit)?.unit:void 0,f=t.orient||o.legend.orient||"right",h=function lXe(e){const{legend:n}=e;return Xn(n.type,function cXe({channel:e,timeUnit:n,scaleType:t}){if(Lm(e)){if(St(["quarter","month","day"],n))return"symbol";if(ka(t))return"gradient"}return"symbol"}(e))}({legend:t,channel:n,timeUnit:d,scaleType:c}),p=function uXe({legendConfig:e,legendType:n,orient:t,legend:i}){return i.direction??e[n?"gradientDirection":"symbolDirection"]??function dXe(e,n){switch(e){case"top":case"bottom":return"horizontal";case"left":case"right":case"none":case void 0:return;default:return"gradient"===n?"horizontal":void 0}}(t,n)}({legend:t,legendType:h,orient:f,legendConfig:s}),g={legend:t,channel:n,model:e,markDef:i,encoding:r,fieldOrDatumDef:u,legendConfig:s,config:o,scaleType:c,orient:f,legendType:h,direction:p};for(const b of Kle){if("gradient"===h&&b.startsWith("symbol")||"symbol"===h&&b.startsWith("gradient"))continue;const w=b in Jle?Jle[b](g):t[b];if(void 0!==w){const x=mXe(w,b,t,e.fieldDef(n));(x||void 0===o.legend[b])&&a.set(b,w,x)}}const m=t?.encoding??{},_=a.get("selections"),y={},v={fieldOrDatumDef:u,model:e,channel:n,legendCmpt:a,legendType:h};for(const b of["labels","legend","title","symbols","gradient","entries"]){const w=Wle(m[b]??{},e),x=b in Yle?Yle[b](w,v):w;void 0!==x&&!an(x)&&(y[b]={..._?.length&&he(u)?{name:`${In(u.field)}_legend_${b}`}:{},..._?.length?{interactive:!!_}:{},update:x})}return an(y)||a.set("encode",y,!!t?.encoding),a}function nce(e,n){if(!e)return n.clone();const t=e.getWithExplicit("orient"),i=n.getWithExplicit("orient");if(t.explicit&&i.explicit&&t.value!==i.value)return;let r=!1;for(const o of Kle){const s=Rd(e.getWithExplicit(o),n.getWithExplicit(o),o,"legend",(a,l)=>{switch(o){case"symbolType":return vXe(a,l);case"title":return Boe(a,l);case"type":return r=!0,ss("symbol")}return lT(a,l,o,"legend")});e.setWithExplicit(o,s)}return r&&(e.implicit?.encode?.gradient&&x2(e.implicit,["encode","gradient"]),e.explicit?.encode?.gradient&&x2(e.explicit,["encode","gradient"])),e}function vXe(e,n){return"circle"===n.value?n:e}function ice(e){const n=e.component.legends,t={};for(const r of ce(n)){const s=ln(e.getScaleComponent(r).get("domains"));if(t[s])for(const a of t[s])nce(a,n[r])||t[s].push(n[r]);else t[s]=[n[r].clone()]}return ji(t).flat().map(r=>function wXe(e,n){const{disable:t,labelExpr:i,selections:r,...o}=e.combine();if(!t){if(!1===n.aria&&null==o.aria&&(o.aria=!1),o.encode?.symbols){const s=o.encode.symbols.update;s.fill&&"transparent"!==s.fill.value&&!s.stroke&&!o.stroke&&(s.stroke={value:"transparent"});for(const a of bae)o[a]&&delete s[a]}if(o.title||delete o.title,void 0!==i){let s=i;o.encode?.labels?.update&&Pe(o.encode.labels.update.text)&&(s=Ch(i,"datum.label",o.encode.labels.update.text.signal)),function bXe(e,n,t,i){var r,o;e.encode??(e.encode={}),(r=e.encode)[n]??(r[n]={}),(o=e.encode[n]).update??(o.update={}),e.encode[n].update[t]=i}(o,"labels","text",{signal:s})}return o}}(r,e.config)).filter(r=>void 0!==r)}function rce(e){const n=e.component.projection;if(!n||n.merged)return[];const t=n.combine(),{name:i}=t;if(n.data){const r={signal:`[${n.size.map(s=>s.signal).join(", ")}]`},o=n.data.reduce((s,a)=>{const l=Pe(a)?a.signal:`data('${e.lookupDataSource(a)}')`;return St(s,l)||s.push(l),s},[]);if(o.length<=0)throw new Error("Projection's fit didn't find any data sources");return[{name:i,size:r,fit:{signal:o.length>1?`[${o.join(", ")}]`:o[0]},...t}]}return[{name:i,translate:{signal:"[width / 2, height / 2]"},...t}]}const EXe=["type","clipAngle","clipExtent","center","rotate","precision","reflectX","reflectY","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"];class oce extends Gc{constructor(n,t,i,r){super({...t},{name:n}),this.specifiedProjection=t,this.size=i,this.data=r,this.merged=!1}get isFit(){return!!this.data}}function sce(e){e.component.projection=Vn(e)?function SXe(e){if(e.hasProjection){const n=bo(e.specifiedProjection),t=!(n&&(null!=n.scale||null!=n.translate)),i=t?[e.getSizeSignalRef("width"),e.getSizeSignalRef("height")]:void 0,r=t?function TXe(e){const n=[],{encoding:t}=e;for(const i of[[Ia,Da],[Bs,Ma]])(gi(t[i[0]])||gi(t[i[1]]))&&n.push({signal:e.getName(`geojson_${n.length}`)});return e.channelHasField(yo)&&e.typedFieldDef(yo).type===Bm&&n.push({signal:e.getName(`geojson_${n.length}`)}),0===n.length&&n.push(e.requestDataName(Cn.Main)),n}(e):void 0,o=new oce(e.projectionName(!0),{...bo(e.config.projection)??{},...n??{}},i,r);return o.get("type")||o.set("type","equalEarth",!1),o}}(e):function IXe(e){if(0===e.children.length)return;let n;for(const i of e.children)sce(i);const t=DL(e.children,i=>{const r=i.component.projection;if(r){if(n){const o=function DXe(e,n){const t=DL(EXe,r=>!!(!$e(e.explicit,r)&&!$e(n.explicit,r)||$e(e.explicit,r)&&$e(n.explicit,r)&&is(e.get(r),n.get(r))));if(is(e.size,n.size)){if(t)return e;if(is(e.explicit,{}))return n;if(is(n.explicit,{}))return e}return null}(n,r);return o&&(n=o),!!o}return n=r,!0}return!0});if(n&&t){const i=e.projectionName(!0),r=new oce(i,n.specifiedProjection,n.size,tt(n.data));for(const o of e.children){const s=o.component.projection;s&&(s.isFit&&r.data.push(...o.component.projection.data),o.renameProjection(s.get("name"),i),s.merged=!0)}return r}}(e)}function MXe(e,n,t,i){if(mv(n,t)){const r=Vn(e)?e.axis(t)??e.legend(t)??{}:{},o=ye(n,{expr:"datum"}),s=ye(n,{expr:"datum",binSuffix:"end"});return{formulaAs:ye(n,{binSuffix:"range",forAs:!0}),formula:hv(o,s,r.format,r.formatType,i)}}return{}}function ace(e,n){return`${Ioe(e)}_${n}`}function u6(e,n,t){const r=ace(Z2(t,void 0)??{},n);return e.getName(`${r}_bins`)}function lce(e,n,t){let i,r;i=function kXe(e){return"as"in e}(e)?xe(e.as)?[e.as,`${e.as}_end`]:[e.as[0],e.as[1]]:[ye(e,{forAs:!0}),ye(e,{binSuffix:"end",forAs:!0})];const o={...Z2(n,void 0)},s=ace(o,e.field),{signal:a,extentSignal:l}=function AXe(e,n){return{signal:e.getName(`${n}_bins`),extentSignal:e.getName(`${n}_extent`)}}(t,s);if(O2(o.extent)){const u=o.extent;r=Rle(t,u.param,u),delete o.extent}return{key:s,binComponent:{bin:o,field:e.field,as:[i],...a?{signal:a}:{},...l?{extentSignal:l}:{},...r?{span:r}:{}}}}class ql extends on{clone(){return new ql(null,tt(this.bins))}constructor(n,t){super(n),this.bins=t}static makeFromEncoding(n,t){const i=t.reduceFieldDef((r,o,s)=>{if(qr(o)&&_n(o.bin)){const{key:a,binComponent:l}=lce(o,o.bin,t);r[a]={...l,...r[a],...MXe(t,o,s,t.config)}}return r},{});return an(i)?null:new ql(n,i)}static makeFromTransform(n,t,i){const{key:r,binComponent:o}=lce(t,t.bin,i);return new ql(n,{[r]:o})}merge(n,t){for(const i of ce(n.bins))i in this.bins?(t(n.bins[i].signal,this.bins[i].signal),this.bins[i].as=kl([...this.bins[i].as,...n.bins[i].as],Et)):this.bins[i]=n.bins[i];for(const i of n.children)n.removeChild(i),i.parent=this;n.remove()}producedFields(){return new Set(ji(this.bins).map(n=>n.as).flat(2))}dependentFields(){return new Set(ji(this.bins).map(n=>n.field))}hash(){return`Bin ${Et(this.bins)}`}assemble(){return ji(this.bins).flatMap(n=>{const t=[],[i,...r]=n.as,{extent:o,...s}=n.bin,a={type:"bin",field:Ls(n.field),as:i,signal:n.signal,...O2(o)?{extent:null}:{extent:o},...n.span?{span:{signal:`span(${n.span})`}}:{},...s};!o&&n.extentSignal&&(t.push({type:"extent",field:Ls(n.field),signal:n.extentSignal}),a.extent={signal:n.extentSignal}),t.push(a);for(const l of r)for(let c=0;c<2;c++)t.push({type:"formula",expr:ye({field:i[c]},{expr:"datum"}),as:l[c]});return n.formula&&t.push({type:"formula",expr:n.formula,as:n.formulaAs}),t})}}class Pa extends on{clone(){return new Pa(null,new Set(this.dimensions),tt(this.measures))}constructor(n,t,i){super(n),this.dimensions=t,this.measures=i}get groupBy(){return this.dimensions}static makeFromEncoding(n,t){let i=!1;t.forEachFieldDef(s=>{s.aggregate&&(i=!0)});const r={},o=new Set;return i&&(t.forEachFieldDef((s,a)=>{const{aggregate:l,field:c}=s;if(l)if("count"===l)r["*"]??(r["*"]={}),r["*"].count=new Set([ye(s,{forAs:!0})]);else{if(Uc(l)||Td(l)){const u=Uc(l)?"argmin":"argmax",d=l[u];r[d]??(r[d]={}),r[d][u]=new Set([ye({op:u,field:d},{forAs:!0})])}else r[c]??(r[c]={}),r[c][l]=new Set([ye(s,{forAs:!0})]);zc(a)&&"unaggregated"===t.scaleDomain(a)&&(r[c]??(r[c]={}),r[c].min=new Set([ye({field:c,aggregate:"min"},{forAs:!0})]),r[c].max=new Set([ye({field:c,aggregate:"max"},{forAs:!0})]))}else!function OXe(e,n,t,i){const r=Vn(i)?i.encoding[Nl(n)]:void 0;if(qr(t)&&Vn(i)&&zse(t,r,i.markDef,i.config)){e.add(ye(t,{})),e.add(ye(t,{suffix:"end"}));const{mark:o,markDef:s,config:a}=i,l=kd({fieldDef:t,markDef:s,config:a});dv(o)&&.5!==l&&Qn(n)&&(e.add(ye(t,{suffix:cT})),e.add(ye(t,{suffix:uT}))),t.bin&&mv(t,n)&&e.add(ye(t,{binSuffix:"range"}))}else if(_oe(n)){const o=moe(n);e.add(i.getName(o))}else e.add(ye(t));return Nh(t)&&function AWe(e){return Ee(e)&&"field"in e}(t.scale?.range)&&e.add(t.scale.range.field),e}(o,a,s,t)}),o.size+ce(r).length!==0)?new Pa(n,o,r):null}static makeFromTransform(n,t){const i=new Set,r={};for(const o of t.aggregate){const{op:s,field:a,as:l}=o;s&&("count"===s?(r["*"]??(r["*"]={}),r["*"].count=new Set([l||ye(o,{forAs:!0})])):(r[a]??(r[a]={}),r[a][s]=new Set([l||ye(o,{forAs:!0})])))}for(const o of t.groupby??[])i.add(o);return i.size+ce(r).length===0?null:new Pa(n,i,r)}merge(n){return aoe(this.dimensions,n.dimensions)?(function RXe(e,n){for(const t of ce(n)){const i=n[t];for(const r of ce(i))t in e?e[t][r]=new Set([...e[t][r]??[],...i[r]]):e[t]={[r]:i[r]}}}(this.measures,n.measures),!0):(function tWe(...e){Ll.debug(...e)}("different dimensions, cannot merge"),!1)}addDimensions(n){n.forEach(this.dimensions.add,this.dimensions)}dependentFields(){return new Set([...this.dimensions,...ce(this.measures)])}producedFields(){const n=new Set;for(const t of ce(this.measures))for(const i of ce(this.measures[t])){const r=this.measures[t][i];0===r.size?n.add(`${i}_${t}`):r.forEach(n.add,n)}return n}hash(){return`Aggregate ${Et({dimensions:this.dimensions,measures:this.measures})}`}assemble(){const n=[],t=[],i=[];for(const o of ce(this.measures))for(const s of ce(this.measures[o]))for(const a of this.measures[o][s])i.push(a),n.push(s),t.push("*"===o?null:Ls(o));return{type:"aggregate",groupby:[...this.dimensions].map(Ls),ops:n,fields:t,as:i}}}class t0 extends on{constructor(n,t,i,r){super(n),this.model=t,this.name=i,this.data=r;for(const o of Vs){const s=t.facet[o];if(s){const{bin:a,sort:l}=s;this[o]={name:t.getName(`${o}_domain`),fields:[ye(s),..._n(a)?[ye(s,{binSuffix:"end"})]:[]],...Bl(l)?{sortField:l}:oe(l)?{sortIndexField:Jm(s,o)}:{}}}}this.childModel=t.child}hash(){let n="Facet";for(const t of Vs)this[t]&&(n+=` ${t.charAt(0)}:${Et(this[t])}`);return n}get fields(){const n=[];for(const t of Vs)this[t]?.fields&&n.push(...this[t].fields);return n}dependentFields(){const n=new Set(this.fields);for(const t of Vs)this[t]&&(this[t].sortField&&n.add(this[t].sortField.field),this[t].sortIndexField&&n.add(this[t].sortIndexField));return n}producedFields(){return new Set}getSource(){return this.name}getChildIndependentFieldsWithStep(){const n={};for(const t of Pl){const i=this.childModel.component.scales[t];if(i&&!i.merged){const r=i.get("type"),o=i.get("range");if(Ei(r)&&Id(o)){const a=b6(wT(this.childModel,t));a?n[t]=a:fe(qL(t))}}}return n}assembleRowColumnHeaderData(n,t,i){const r={row:"y",column:"x",facet:void 0}[n],o=[],s=[],a=[];r&&i&&i[r]&&(t?(o.push(`distinct_${i[r]}`),s.push("max")):(o.push(i[r]),s.push("distinct")),a.push(`distinct_${i[r]}`));const{sortField:l,sortIndexField:c}=this[n];if(l){const{op:u=j2,field:d}=l;o.push(d),s.push(u),a.push(ye(l,{forAs:!0}))}else c&&(o.push(c),s.push("max"),a.push(c));return{name:this[n].name,source:t??this.data,transform:[{type:"aggregate",groupby:this[n].fields,...o.length?{fields:o,ops:s,as:a}:{}}]}}assembleFacetHeaderData(n){const{columns:t}=this.model.layout,{layoutHeaders:i}=this.model.component,r=[],o={};for(const l of r6){for(const c of o6){const u=(i[l]&&i[l][c])??[];for(const d of u)if(d.axes?.length>0){o[l]=!0;break}}if(o[l]){const c=`length(data("${this.facet.name}"))`;r.push({name:`${this.facet.name}_${l}`,transform:[{type:"sequence",start:0,stop:"row"===l?t?{signal:`ceil(${c} / ${t})`}:1:t?{signal:`min(${c}, ${t})`}:{signal:c}}]})}}const{row:s,column:a}=o;return(s||a)&&r.unshift(this.assembleRowColumnHeaderData("facet",null,n)),r}assemble(){const n=[];let t=null;const i=this.getChildIndependentFieldsWithStep(),{column:r,row:o,facet:s}=this;if(r&&o&&(i.x||i.y)){t=`cross_${this.column.name}_${this.row.name}`;const a=[].concat(i.x??[],i.y??[]),l=a.map(()=>"distinct");n.push({name:t,source:this.data,transform:[{type:"aggregate",groupby:this.fields,fields:a,ops:l}]})}for(const a of[Pc,Nc])this[a]&&n.push(this.assembleRowColumnHeaderData(a,t,i));if(s){const a=this.assembleFacetHeaderData(i);a&&n.push(...a)}return n}}function cce(e){return e.startsWith("'")&&e.endsWith("'")||e.startsWith('"')&&e.endsWith('"')?e.slice(1,-1):e}function NXe(e){const n={};return C2(e.filter,t=>{if(fse(t)){let i=null;QL(t)?i=rs(t.equal):JL(t)?i=rs(t.lte):ZL(t)?i=rs(t.lt):e5(t)?i=rs(t.gt):t5(t)?i=rs(t.gte):n5(t)?i=t.range[0]:r5(t)&&(i=(t.oneOf??t.in)[0]),i&&(Dh(i)?n[t.field]="date":Ft(i)?n[t.field]="number":xe(i)&&(n[t.field]="string")),t.timeUnit&&(n[t.field]="date")}}),n}class gr extends on{clone(){return new gr(null,tt(this._parse))}constructor(n,t){super(n),this._parse=t}hash(){return`Parse ${Et(this._parse)}`}static makeExplicit(n,t,i){let r={};const o=t.data;return!Fd(o)&&o?.format?.parse&&(r=o.format.parse),this.makeWithAncestors(n,r,{},i)}static makeWithAncestors(n,t,i,r){for(const a of ce(i)){const l=r.getWithExplicit(a);void 0!==l.value&&(l.explicit||l.value===i[a]||"derived"===l.value||"flatten"===i[a]?delete i[a]:fe(Woe(a,i[a],l.value)))}for(const a of ce(t)){const l=r.get(a);void 0!==l&&(l===t[a]?delete t[a]:fe(Woe(a,t[a],l)))}const o=new Gc(t,i);r.copyAll(o);const s={};for(const a of ce(o.combine())){const l=o.get(a);null!==l&&(s[a]=l)}return 0===ce(s).length||r.parseNothing?null:new gr(n,s)}get parse(){return this._parse}merge(n){this._parse={...this._parse,...n.parse},n.remove()}assembleFormatParse(){const n={};for(const t of ce(this._parse)){const i=this._parse[t];1===Fm(t)&&(n[t]=i)}return n}producedFields(){return new Set(ce(this._parse))}dependentFields(){return new Set(ce(this._parse))}assembleTransforms(n=!1){return ce(this._parse).filter(t=>!n||Fm(t)>1).map(t=>{const i=function FXe(e,n){const t=kL(e);return"number"===n?`toNumber(${t})`:"boolean"===n?`toBoolean(${t})`:"string"===n?`toString(${t})`:"date"===n?`toDate(${t})`:"flatten"===n?t:n.startsWith("date:")?`timeParse(${t},'${cce(n.slice(5,n.length))}')`:n.startsWith("utc:")?`utcParse(${t},'${cce(n.slice(4,n.length))}')`:(fe(function cqe(e){return`Unrecognized parse "${e}".`}(n)),null)}(t,this._parse[t]);return i?{type:"formula",expr:i,as:OL(t)}:null}).filter(t=>null!==t)}}class Ld extends on{clone(){return new Ld(null)}constructor(n){super(n)}dependentFields(){return new Set}producedFields(){return new Set([Na])}hash(){return"Identifier"}assemble(){return{type:"identifier",as:Na}}}class Cv extends on{clone(){return new Cv(null,this.params)}constructor(n,t){super(n),this.params=t}dependentFields(){return new Set}producedFields(){}hash(){return`Graticule ${Et(this.params)}`}assemble(){return{type:"graticule",...!0===this.params?{}:this.params}}}class xv extends on{clone(){return new xv(null,this.params)}constructor(n,t){super(n),this.params=t}dependentFields(){return new Set}producedFields(){return new Set([this.params.as??"data"])}hash(){return`Hash ${Et(this.params)}`}assemble(){return{type:"sequence",...this.params}}}class Vh extends on{constructor(n){let t;if(super(null),n??(n={name:"source"}),Fd(n)||(t=n.format?{...mo(n.format,["parse"])}:{}),yv(n))this._data={values:n.values};else if(Gm(n)){if(this._data={url:n.url},!t.type){let i=/(?:\.([^.]+))?$/.exec(n.url)[1];St(["json","csv","tsv","dsv","topojson"],i)||(i="json"),t.type=i}}else Zae(n)?this._data={values:[{type:"Sphere"}]}:(Xae(n)||Fd(n))&&(this._data={});this._generator=Fd(n),n.name&&(this._name=n.name),t&&!an(t)&&(this._data.format=t)}dependentFields(){return new Set}producedFields(){}get data(){return this._data}hasName(){return!!this._name}get isGenerator(){return this._generator}get dataName(){return this._name}set dataName(n){this._name=n}set parent(n){throw new Error("Source nodes have to be roots.")}remove(){throw new Error("Source nodes are roots and cannot be removed.")}hash(){throw new Error("Cannot hash sources")}assemble(){return{name:this._name,...this._data,transform:[]}}}var Ev,uce=function(e,n,t,i,r){if("m"===i)throw new TypeError("Private method is not writable");if("a"===i&&!r)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof n?e!==n||!r:!n.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===i?r.call(e,t):r?r.value=t:n.set(e,t),t};function d6(e){return e instanceof Vh||e instanceof Cv||e instanceof xv}class f6{constructor(){Ev.set(this,void 0),uce(this,Ev,!1,"f")}setModified(){uce(this,Ev,!0,"f")}get modifiedFlag(){return function(e,n,t,i){if("function"==typeof n||!n.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n.get(e)}(this,Ev)}}Ev=new WeakMap;class zh extends f6{getNodeDepths(n,t,i){i.set(n,t);for(const r of n.children)this.getNodeDepths(r,t+1,i);return i}optimize(n){const i=[...this.getNodeDepths(n,0,new Map).entries()].sort((r,o)=>o[1]-r[1]);for(const r of i)this.run(r[0]);return this.modifiedFlag}}class h6 extends f6{optimize(n){this.run(n);for(const t of n.children)this.optimize(t);return this.modifiedFlag}}class BXe extends h6{mergeNodes(n,t){const i=t.shift();for(const r of t)n.removeChild(r),r.parent=i,r.remove()}run(n){const t=n.children.map(r=>r.hash()),i={};for(let r=0;r<t.length;r++)void 0===i[t[r]]?i[t[r]]=[n.children[r]]:i[t[r]].push(n.children[r]);for(const r of ce(i))i[r].length>1&&(this.setModified(),this.mergeNodes(n,i[r]))}}class VXe extends h6{constructor(n){super(),this.requiresSelectionId=n&&Z5(n)}run(n){n instanceof Ld&&(this.requiresSelectionId&&(d6(n.parent)||n.parent instanceof Pa||n.parent instanceof gr)||(this.setModified(),n.remove()))}}class zXe extends f6{optimize(n){return this.run(n,new Set),this.modifiedFlag}run(n,t){let i=new Set;n instanceof jl&&(i=n.producedFields(),IL(i,t)&&(this.setModified(),n.removeFormulas(t),0===n.producedFields.length&&n.remove()));for(const r of n.children)this.run(r,new Set([...t,...i]))}}class UXe extends h6{constructor(){super()}run(n){n instanceof Wr&&!n.isRequired()&&(this.setModified(),n.remove())}}class HXe extends zh{run(n){if(!(d6(n)||n.numChildren()>1))for(const t of n.children)if(t instanceof gr)if(n instanceof gr)this.setModified(),n.merge(t);else{if(AL(n.producedFields(),t.dependentFields()))continue;this.setModified(),t.swapWithParent()}}}class jXe extends zh{run(n){const t=[...n.children],i=n.children.filter(r=>r instanceof gr);if(n.numChildren()>1&&i.length>=1){const r={},o=new Set;for(const s of i){const a=s.parse;for(const l of ce(a))l in r?r[l]!==a[l]&&o.add(l):r[l]=a[l]}for(const s of o)delete r[s];if(!an(r)){this.setModified();const s=new gr(n,r);for(const a of t){if(a instanceof gr)for(const l of ce(r))delete a.parse[l];n.removeChild(a),a.parent=s,a instanceof gr&&0===ce(a.parse).length&&a.remove()}}}}}class qXe extends zh{run(n){n instanceof Wr||n.numChildren()>0||n instanceof t0||n instanceof Vh||(this.setModified(),n.remove())}}class WXe extends zh{run(n){const t=n.children.filter(r=>r instanceof jl),i=t.pop();for(const r of t)this.setModified(),i.merge(r)}}class GXe extends zh{run(n){const t=n.children.filter(r=>r instanceof Pa),i={};for(const r of t){const o=Et(r.groupBy);o in i||(i[o]=[]),i[o].push(r)}for(const r of ce(i)){const o=i[r];if(o.length>1){const s=o.pop();for(const a of o)s.merge(a)&&(n.removeChild(a),a.parent=s,a.remove(),this.setModified())}}}}class KXe extends zh{constructor(n){super(),this.model=n}run(n){const t=!(d6(n)||n instanceof Qm||n instanceof gr||n instanceof Ld),i=[],r=[];for(const o of n.children)o instanceof ql&&(t&&!AL(n.producedFields(),o.dependentFields())?i.push(o):r.push(o));if(i.length>0){const o=i.pop();for(const s of i)o.merge(s,this.model.renameSignal.bind(this.model));this.setModified(),n instanceof ql?n.merge(o,this.model.renameSignal.bind(this.model)):o.swapWithParent()}if(r.length>1){const o=r.pop();for(const s of r)o.merge(s,this.model.renameSignal.bind(this.model));this.setModified()}}}class YXe extends zh{run(n){const t=[...n.children];if(!wh(t,s=>s instanceof Wr)||n.numChildren()<=1)return;const r=[];let o;for(const s of t)if(s instanceof Wr){let a=s;for(;1===a.numChildren();){const[l]=a.children;if(!(l instanceof Wr))break;a=l}r.push(...a.children),o?(n.removeChild(s),s.parent=o.parent,o.parent.removeChild(o),o.parent=a,this.setModified()):o=a}else r.push(s);if(r.length){this.setModified();for(const s of r)s.parent.removeChild(s),s.parent=o}}}class Uh extends on{clone(){return new Uh(null,tt(this.transform))}constructor(n,t){super(n),this.transform=t}addDimensions(n){this.transform.groupby=kl(this.transform.groupby.concat(n),t=>t)}dependentFields(){const n=new Set;return this.transform.groupby&&this.transform.groupby.forEach(n.add,n),this.transform.joinaggregate.map(t=>t.field).filter(t=>void 0!==t).forEach(n.add,n),n}producedFields(){return new Set(this.transform.joinaggregate.map(this.getDefaultName))}getDefaultName(n){return n.as??ye(n)}hash(){return`JoinAggregateTransform ${Et(this.transform)}`}assemble(){const n=[],t=[],i=[];for(const o of this.transform.joinaggregate)t.push(o.op),i.push(this.getDefaultName(o)),n.push(void 0===o.field?null:o.field);const r=this.transform.groupby;return{type:"joinaggregate",as:i,ops:t,fields:n,...void 0!==r?{groupby:r}:{}}}}class Yc extends on{clone(){return new Yc(null,tt(this._stack))}constructor(n,t){super(n),this._stack=t}static makeFromTransform(n,t){const{stack:i,groupby:r,as:o,offset:s="zero"}=t,a=[],l=[];if(void 0!==t.sort)for(const d of t.sort)a.push(d.field),l.push(Xn(d.order,"ascending"));const c={field:a,order:l};let u;return u=function QXe(e){return oe(e)&&e.every(n=>xe(n))&&e.length>1}(o)?o:xe(o)?[o,`${o}_end`]:[`${t.stack}_start`,`${t.stack}_end`],new Yc(n,{dimensionFieldDefs:[],stackField:i,groupby:r,offset:s,sort:c,facetby:[],as:u})}static makeFromEncoding(n,t){const i=t.stack,{encoding:r}=t;if(!i)return null;const{groupbyChannels:o,fieldChannel:s,offset:a,impute:l}=i,c=o.map(h=>zl(r[h])).filter(h=>!!h),u=function XXe(e){return e.stack.stackBy.reduce((n,t)=>{const r=ye(t.fieldDef);return r&&n.push(r),n},[])}(t),d=t.encoding.order;let f;if(oe(d)||he(d))f=Poe(d);else{const h=Use(d)?d.sort:"y"===s?"descending":"ascending";f=u.reduce((p,g)=>(p.field.push(g),p.order.push(h),p),{field:[],order:[]})}return new Yc(n,{dimensionFieldDefs:c,stackField:t.vgField(s),facetby:[],stackby:u,sort:f,offset:a,impute:l,as:[t.vgField(s,{suffix:"start",forAs:!0}),t.vgField(s,{suffix:"end",forAs:!0})]})}get stack(){return this._stack}addDimensions(n){this._stack.facetby.push(...n)}dependentFields(){const n=new Set;return n.add(this._stack.stackField),this.getGroupbyFields().forEach(n.add,n),this._stack.facetby.forEach(n.add,n),this._stack.sort.field.forEach(n.add,n),n}producedFields(){return new Set(this._stack.as)}hash(){return`Stack ${Et(this._stack)}`}getGroupbyFields(){const{dimensionFieldDefs:n,impute:t,groupby:i}=this._stack;return n.length>0?n.map(r=>r.bin?t?[ye(r,{binSuffix:"mid"})]:[ye(r,{}),ye(r,{binSuffix:"end"})]:[ye(r)]).flat():i??[]}assemble(){const n=[],{facetby:t,dimensionFieldDefs:i,stackField:r,stackby:o,sort:s,offset:a,impute:l,as:c}=this._stack;if(l)for(const u of i){const{bandPosition:d=.5,bin:f}=u;if(f){const h=ye(u,{expr:"datum"}),p=ye(u,{expr:"datum",binSuffix:"end"});n.push({type:"formula",expr:`${d}*${h}+${1-d}*${p}`,as:ye(u,{binSuffix:"mid",forAs:!0})})}n.push({type:"impute",field:r,groupby:[...o,...t],key:ye(u,{binSuffix:"mid"}),method:"value",value:0})}return n.push({type:"stack",groupby:[...this.getGroupbyFields(),...t],field:r,sort:s,as:c,offset:a}),n}}class n0 extends on{clone(){return new n0(null,tt(this.transform))}constructor(n,t){super(n),this.transform=t}addDimensions(n){this.transform.groupby=kl(this.transform.groupby.concat(n),t=>t)}dependentFields(){const n=new Set;return(this.transform.groupby??[]).forEach(n.add,n),(this.transform.sort??[]).forEach(t=>n.add(t.field)),this.transform.window.map(t=>t.field).filter(t=>void 0!==t).forEach(n.add,n),n}producedFields(){return new Set(this.transform.window.map(this.getDefaultName))}getDefaultName(n){return n.as??ye(n)}hash(){return`WindowTransform ${Et(this.transform)}`}assemble(){const n=[],t=[],i=[],r=[];for(const d of this.transform.window)t.push(d.op),i.push(this.getDefaultName(d)),r.push(void 0===d.param?null:d.param),n.push(void 0===d.field?null:d.field);const o=this.transform.frame,s=this.transform.groupby;if(o&&null===o[0]&&null===o[1]&&t.every(d=>UL(d)))return{type:"joinaggregate",as:i,ops:t,fields:n,...void 0!==s?{groupby:s}:{}};const a=[],l=[];if(void 0!==this.transform.sort)for(const d of this.transform.sort)a.push(d.field),l.push(d.order??"ascending");const u=this.transform.ignorePeers;return{type:"window",params:r,as:i,ops:t,fields:n,sort:{field:a,order:l},...void 0!==u?{ignorePeers:u}:{},...void 0!==s?{groupby:s}:{},...void 0!==o?{frame:o}:{}}}}function p6(e){if(e instanceof t0)if(1!==e.numChildren()||e.children[0]instanceof Wr){const n=e.model.component.data.main;dce(n);const t=function ZXe(e){return function n(t){if(!(t instanceof t0)){const i=t.clone();if(i instanceof Wr){const r=g6+i.getSource();i.setSource(r),e.model.component.data.outputNodes[r]=i}else(i instanceof Pa||i instanceof Yc||i instanceof n0||i instanceof Uh)&&i.addDimensions(e.fields);for(const r of t.children.flatMap(n))r.parent=i;return[i]}return t.children.flatMap(n)}}(e),i=e.children.map(t).flat();for(const r of i)r.parent=n}else{const n=e.children[0];(n instanceof Pa||n instanceof Yc||n instanceof n0||n instanceof Uh)&&n.addDimensions(e.fields),n.swapWithParent(),p6(e)}else e.children.map(p6)}function dce(e){if(e instanceof Wr&&e.type===Cn.Main&&1===e.numChildren()){const n=e.children[0];n instanceof t0||(n.swapWithParent(),dce(e))}}const g6="scale_",bT=5;function m6(e){for(const n of e){for(const t of n.children)if(t.parent!==n)return!1;if(!m6(n.children))return!1}return!0}function La(e,n){let t=!1;for(const i of n)t=e.optimize(i)||t;return t}function fce(e,n,t){let i=e.sources,r=!1;return r=La(new UXe,i)||r,r=La(new VXe(n),i)||r,i=i.filter(o=>o.numChildren()>0),r=La(new qXe,i)||r,i=i.filter(o=>o.numChildren()>0),t||(r=La(new HXe,i)||r,r=La(new KXe(n),i)||r,r=La(new zXe,i)||r,r=La(new jXe,i)||r,r=La(new GXe,i)||r,r=La(new WXe,i)||r,r=La(new BXe,i)||r,r=La(new YXe,i)||r),e.sources=i,r}class Ti{constructor(n){Object.defineProperty(this,"signal",{enumerable:!0,get:n})}static fromName(n,t){return new Ti(()=>n(t))}}function hce(e){Vn(e)?function eQe(e){const n=e.component.scales;for(const t of ce(n)){const i=iQe(e,t);if(n[t].setWithExplicit("domains",i),oQe(e,t),e.component.data.isFaceted){let o=e;for(;!$a(o)&&o.parent;)o=o.parent;if("shared"===o.component.resolve.scale[t])for(const a of i.value)Hc(a)&&(a.data=g6+a.data.replace(g6,""))}}}(e):function tQe(e){for(const t of e.children)hce(t);const n=e.component.scales;for(const t of ce(n)){let i,r=null;for(const o of e.children){const s=o.component.scales[t];if(s){i=void 0===i?s.getWithExplicit("domains"):Rd(i,s.getWithExplicit("domains"),"domains","scale",v6);const a=s.get("selectionExtent");r&&a&&r.param!==a.param&&fe("The same selection must be used to override scale domains in a layered view."),r=a}}n[t].setWithExplicit("domains",i),r&&n[t].set("selectionExtent",r,!0)}}(e)}function iQe(e,n){const t=e.getScaleComponent(n).get("type"),{encoding:i}=e,r=function nQe(e,n,t,i){if("unaggregated"===e){const{valid:r,reason:o}=pce(n,t);if(!r)return void fe(o)}else if(void 0===e&&i.useUnaggregatedDomain){const{valid:r}=pce(n,t);if(r)return"unaggregated"}return e}(e.scaleDomain(n),e.typedFieldDef(n),t,e.config.scale);return r!==e.scaleDomain(n)&&(e.specifiedScales[n]={...e.specifiedScales[n],domain:r}),"x"===n&&gi(i.x2)?gi(i.x)?Rd($d(t,r,e,"x"),$d(t,r,e,"x2"),"domain","scale",v6):$d(t,r,e,"x2"):"y"===n&&gi(i.y2)?gi(i.y)?Rd($d(t,r,e,"y"),$d(t,r,e,"y2"),"domain","scale",v6):$d(t,r,e,"y2"):$d(t,r,e,n)}function _6(e,n,t){const i=xi(t)?.unit;return"temporal"===n||i?function rQe(e,n,t){return e.map(i=>({signal:`{data: ${J2(i,{timeUnit:t,type:n})}}`}))}(e,n,i):[e]}function $d(e,n,t,i){const{encoding:r,markDef:o,mark:s,config:a,stack:l}=t,c=gi(r[i]),{type:u}=c,d=c.timeUnit;if(function MWe(e){return e?.unionWith}(n)){const p=$d(e,void 0,t,i);return Hl([..._6(n.unionWith,u,d),...p.value])}if(Pe(n))return Hl([n]);if(n&&"unaggregated"!==n&&!bse(n))return Hl(_6(n,u,d));if(l&&i===l.fieldChannel){if("normalize"===l.offset)return ss([[0,1]]);const p=t.requestDataName(Cn.Main);return ss([{data:p,field:t.vgField(i,{suffix:"start"})},{data:p,field:t.vgField(i,{suffix:"end"})}])}const f=zc(i)&&he(c)?function sQe(e,n,t){if(!Ei(t))return;const i=e.fieldDef(n),r=i.sort;if($se(r))return{op:"min",field:Jm(i,n),order:"ascending"};const{stack:o}=e,s=o?new Set([...o.groupbyFields,...o.stackBy.map(a=>a.fieldDef.field)]):void 0;if(Bl(r))return y6(r,o&&!s.has(r.field));if(Lse(r)){const{encoding:a,order:l}=r,c=e.fieldDef(a),{aggregate:u,field:d}=c,f=o&&!s.has(d);if(Uc(u)||Td(u))return y6({field:ye(c),order:l},f);if(UL(u)||!u)return y6({op:u,field:d,order:l},f)}else{if("descending"===r)return{op:"min",field:e.vgField(n),order:"descending"};if(St(["ascending",void 0],r))return!0}}(t,i,e):void 0;if(Vl(c))return ss(_6([c.datum],u,d));const h=c;if("unaggregated"===n){const p=t.requestDataName(Cn.Main),{field:g}=c;return ss([{data:p,field:ye({field:g,aggregate:"min"})},{data:p,field:ye({field:g,aggregate:"max"})}])}if(_n(h.bin)){if(Ei(e))return ss("bin-ordinal"===e?[]:[{data:nv(f)?t.requestDataName(Cn.Main):t.requestDataName(Cn.Raw),field:t.vgField(i,mv(h,i)?{binSuffix:"range"}:{}),sort:!0!==f&&Ee(f)?f:{field:t.vgField(i,{}),op:"min"}}]);{const{bin:p}=h;if(_n(p)){const g=u6(t,h.field,p);return ss([new Ti(()=>{const m=t.getSignalName(g);return`[${m}.start, ${m}.stop]`})])}return ss([{data:t.requestDataName(Cn.Main),field:t.vgField(i,{})}])}}if(h.timeUnit&&St(["time","utc"],e)){const p=r[Nl(i)];if(zse(h,p,o,a)){const g=t.requestDataName(Cn.Main),m=kd({fieldDef:h,fieldDef2:p,markDef:o,config:a}),_=dv(s)&&.5!==m&&Qn(i);return ss([{data:g,field:t.vgField(i,_?{suffix:cT}:{})},{data:g,field:t.vgField(i,{suffix:_?uT:"end"})}])}}return ss(f?[{data:nv(f)?t.requestDataName(Cn.Main):t.requestDataName(Cn.Raw),field:t.vgField(i),sort:f}]:[{data:t.requestDataName(Cn.Main),field:t.vgField(i)}])}function y6(e,n){const{op:t,field:i,order:r}=e;return{op:t??(n?"sum":j2),...i?{field:Ls(i)}:{},...r?{order:r}:{}}}function oQe(e,n){const t=e.component.scales[n],i=e.specifiedScales[n].domain,r=e.fieldDef(n)?.bin,o=bse(i)&&i,s=Th(r)&&O2(r.extent)&&r.extent;(o||s)&&t.set("selectionExtent",o??s,!0)}function pce(e,n){const{aggregate:t,type:i}=e;return t?xe(t)&&!jje.has(t)?{valid:!1,reason:kqe(t)}:"quantitative"===i&&"log"===n?{valid:!1,reason:Oqe(e)}:{valid:!0}:{valid:!1,reason:Aqe(e)}}function v6(e,n,t,i){return e.explicit&&n.explicit&&fe(function Lqe(e,n,t,i){return`Conflicting ${n.toString()} property "${e.toString()}" (${ln(t)} and ${ln(i)}). Using the union of the two domains.`}(t,i,e.value,n.value)),{explicit:e.explicit,value:[...e.value,...n.value]}}function b6(e){if(Hc(e)&&xe(e.field))return e.field;if(function qje(e){return!oe(e)&&"fields"in e&&!("data"in e)}(e)){let n;for(const t of e.fields)if(Hc(t)&&xe(t.field))if(n){if(n!==t.field)return fe("Detected faceted independent scales that union domain of multiple fields from different data sources. We will use the first field. The result view size may be incorrect."),n}else n=t.field;return fe("Detected faceted independent scales that union domain of the same fields from different source. We will assume that this is the same field from a different fork of the same data source. However, if this is not the case, the result view size may be incorrect."),n}if(function Wje(e){return!oe(e)&&"fields"in e&&"data"in e}(e)){fe("Detected faceted independent scales that union domain of multiple fields from the same data source. We will use the first field. The result view size may be incorrect.");const n=e.fields[0];return xe(n)?n:void 0}}function wT(e,n){return function aQe(e){const n=kl(e.map(s=>{if(Hc(s)){const{sort:a,...l}=s;return l}return s}),Et),t=kl(e.map(s=>{if(Hc(s)){const a=s.sort;return void 0!==a&&!nv(a)&&("op"in a&&"count"===a.op&&delete a.field,"ascending"===a.order&&delete a.order),a}}).filter(s=>void 0!==s),Et);if(0===n.length)return;if(1===n.length){const s=e[0];if(Hc(s)&&t.length>0){let a=t[0];if(t.length>1){fe(Zoe);const l=t.filter(c=>Ee(c)&&"op"in c&&"min"!==c.op);a=!t.every(c=>Ee(c)&&"op"in c)||1!==l.length||l[0]}else Ee(a)&&"field"in a&&s.field===a.field&&(a=!a.order||{order:a.order});return{...s,sort:a}}return s}const i=kl(t.map(s=>nv(s)||!("op"in s)||xe(s.op)&&s.op in Vje?s:(fe(function Bqe(e){return`Dropping sort property ${ln(e)} as unioned domains only support boolean or op "count", "min", and "max".`}(s)),!0)),Et);let r;1===i.length?r=i[0]:i.length>1&&(fe(Zoe),r=!0);const o=kl(e.map(s=>Hc(s)?s.data:null),s=>s);return 1===o.length&&null!==o[0]?{data:o[0],fields:n.map(a=>a.field),...r?{sort:r}:{}}:{fields:n,...r?{sort:r}:{}}}(e.component.scales[n].get("domains").map(r=>(Hc(r)&&(r.data=e.lookupDataSource(r.data)),r)))}function gce(e){return r0(e)||C6(e)?e.children.reduce((n,t)=>n.concat(gce(t)),mce(e)):mce(e)}function mce(e){return ce(e.component.scales).reduce((n,t)=>{const i=e.component.scales[t];if(i.merged)return n;const r=i.combine(),{name:o,type:s,selectionExtent:a,domains:l,range:c,reverse:u,...d}=r,f=function lQe(e,n,t,i){if(Qn(t)){if(Id(e))return{step:{signal:`${n}_step`}}}else if(Ee(e)&&Hc(e))return{...e,data:i.lookupDataSource(e.data)};return e}(r.range,o,t,e),h=wT(e,t),p=a?function tYe(e,n,t,i){const r=Rle(e,n.param,n);return{signal:os(t.get("type"))&&oe(i)&&i[0]>i[1]?`isValid(${r}) && reverse(${r})`:r}}(e,a,i,h):null;return n.push({name:o,type:s,...h?{domain:h}:{},...p?{domainRaw:p}:{},range:f,...void 0!==u?{reverse:u}:{},...d}),n},[])}class _ce extends Gc{constructor(n,t){super({},{name:n}),this.merged=!1,this.setWithExplicit("type",t)}domainDefinitelyIncludesZero(){return!1!==this.get("zero")||wh(this.get("domains"),n=>oe(n)&&2===n.length&&Ft(n[0])&&n[0]<=0&&Ft(n[1])&&n[1]>=0)}}const cQe=["range","scheme"];function yce(e,n){const t=e.fieldDef(n);if(t?.bin){const{bin:i,field:r}=t,o=vo(n),s=e.getName(o);if(Ee(i)&&i.binned&&void 0!==i.step)return new Ti(()=>{const a=e.scaleName(n),l=`(domain("${a}")[1] - domain("${a}")[0]) / ${i.step}`;return`${e.getSignalName(s)} / (${l})`});if(_n(i)){const a=u6(e,r,i);return new Ti(()=>{const l=e.getSignalName(a),c=`(${l}.stop - ${l}.start) / ${l}.step`;return`${e.getSignalName(s)} / (${c})`})}}}function dQe(e,n){const t=n.specifiedScales[e],{size:i}=n,o=n.getScaleComponent(e).get("type");for(const d of cQe)if(void 0!==t[d]){const f=l5(o,d),h=Cse(e,d);if(f)if(h)fe(h);else switch(d){case"range":{const p=t.range;if(oe(p)){if(Qn(e))return Hl(p.map(g=>{if("width"===g||"height"===g){const m=n.getName(g),_=n.getSignalName.bind(n);return Ti.fromName(_,m)}return g}))}else if(Ee(p))return Hl({data:n.requestDataName(Cn.Main),field:p.field,sort:{op:"min",field:n.vgField(e)}});return Hl(p)}case"scheme":return Hl(fQe(t[d]))}else fe(Xoe(o,d,e))}const s=e===Mn||"xOffset"===e?"width":"height",a=i[s];if(Ul(a))if(Qn(e))if(Ei(o)){const d=bce(a,n,e);if(d)return Hl({step:d})}else fe(Qoe(s));else if(lv(e)&&"band"===n.getScaleComponent(e===bd?"x":"y").get("type")){const p=wce(a,o);if(p)return Hl(p)}const{rangeMin:l,rangeMax:c}=t,u=function hQe(e,n){const{size:t,config:i,mark:r,encoding:o}=n,{type:s}=gi(o[e]),l=n.getScaleComponent(e).get("type"),{domain:c,domainMid:u}=n.specifiedScales[e];switch(e){case Mn:case Ci:if(St(["point","band"],l)){const d=Cce(e,t,i.view);if(Ul(d))return{step:bce(d,n,e)}}return vce(e,n,l);case bd:case Nm:return function pQe(e,n,t){const i=e===bd?"x":"y",r=n.getScaleComponent(i);if(!r)return vce(i,n,t,{center:!0});const o=r.get("type"),s=n.scaleName(i),{markDef:a,config:l}=n;if("band"===o){const c=Cce(i,n.size,n.config.view);if(Ul(c)){const u=wce(c,t);if(u)return u}return[0,{signal:`bandwidth('${s}')`}]}{const c=n.encoding[i];if(he(c)&&c.timeUnit){const u=use(c.timeUnit,p=>`scale('${s}', ${p})`),d=n.config.scale.bandWithNestedOffsetPaddingInner,f=kd({fieldDef:c,markDef:a,config:l})-.5,h=0!==f?` + ${f}`:"";return d?[{signal:`${Pe(d)?`${d.signal}/2`+h:`${d/2+f}`} * (${u})`},{signal:`${Pe(d)?`(1 - ${d.signal}/2)`+h:`${1-d/2+f}`} * (${u})`}]:[0,{signal:u}]}return ooe(`Cannot use ${e} scale if ${i} scale is not discrete.`)}}(e,n,l);case Bc:{const f=xce(r,n.component.scales[e].get("zero"),i),h=function _Qe(e,n,t,i){const r={x:yce(t,"x"),y:yce(t,"y")};switch(e){case"bar":case"tick":{if(void 0!==i.scale.maxBandSize)return i.scale.maxBandSize;const o=Sce(n,r,i.view);return Ft(o)?o-1:new Ti(()=>`${o.signal} - 1`)}case"line":case"trail":case"rule":return i.scale.maxStrokeWidth;case"text":return i.scale.maxFontSize;case"point":case"square":case"circle":{if(i.scale.maxSize)return i.scale.maxSize;const o=Sce(n,r,i.view);return Ft(o)?Math.pow(Ece*o,2):new Ti(()=>`pow(${Ece} * ${o.signal}, 2)`)}}throw new Error(F2("size",e))}(r,t,n,i);return Vm(l)?function mQe(e,n,t){const i=()=>{const r=Aa(n),o=Aa(e),s=`(${r} - ${o}) / (${t} - 1)`;return`sequence(${o}, ${r} + ${s}, ${s})`};return Pe(n)?new Ti(i):{signal:i()}}(f,h,function gQe(e,n,t,i){switch(e){case"quantile":return n.scale.quantileCount;case"quantize":return n.scale.quantizeCount;case"threshold":return void 0!==t&&oe(t)?t.length+1:(fe(function Qqe(e){return`Domain for ${e} is required for threshold scale.`}(i)),3)}}(l,i,c,e)):[f,h]}case $s:return[0,2*Math.PI];case xh:return[0,360];case Ta:return[0,new Ti(()=>`min(${n.getSignalName("width")},${n.getSignalName("height")})/2`)];case xd:return[i.scale.minStrokeWidth,i.scale.maxStrokeWidth];case Ed:return[[1,0],[4,2],[2,1],[1,1],[1,2,4,2]];case yo:return"symbol";case _o:case Rl:case Fl:return"ordinal"===l?"nominal"===s?"category":"ordinal":void 0!==u?"diverging":"rect"===r||"geoshape"===r?"heatmap":"ramp";case Vc:case wd:case Cd:return[i.scale.minOpacity,i.scale.maxOpacity]}}(e,n);return(void 0!==l||void 0!==c)&&l5(o,"rangeMin")&&oe(u)&&2===u.length?Hl([l??u[0],c??u[1]]):ss(u)}function fQe(e){return function IWe(e){return!xe(e)&&!!e.name}(e)?{scheme:e.name,...mo(e,["name"])}:{scheme:e}}function vce(e,n,t,{center:i}={}){const r=vo(e),o=n.getName(r),s=n.getSignalName.bind(n);return e===Ci&&os(t)?i?[Ti.fromName(a=>`${s(a)}/2`,o),Ti.fromName(a=>`-${s(a)}/2`,o)]:[Ti.fromName(s,o),0]:i?[Ti.fromName(a=>`-${s(a)}/2`,o),Ti.fromName(a=>`${s(a)}/2`,o)]:[0,Ti.fromName(s,o)]}function bce(e,n,t){const{encoding:i}=n,r=n.getScaleComponent(t),o=PL(t),s=i[o];if("offset"===xae({step:e,offsetIsDiscrete:ot(s)&&pse(s.type)})&&iae(i,o)){const l=n.getScaleComponent(o);let u=`domain('${n.scaleName(o)}').length`;"band"===l.get("type")&&(u=`bandspace(${u}, ${l.get("paddingInner")??l.get("padding")??0}, ${l.get("paddingOuter")??l.get("padding")??0})`);const d=r.get("paddingInner")??r.get("padding");return{signal:`${e.step} * ${u} / (1-${Yje(d)})`}}return e.step}function wce(e,n){if("offset"===xae({step:e,offsetIsDiscrete:Ei(n)}))return{step:e.step}}function Cce(e,n,t){const i=e===Mn?"width":"height";return n[i]||sT(t,i)}function xce(e,n,t){if(n)return Pe(n)?{signal:`${n.signal} ? 0 : ${xce(e,!1,t)}`}:0;switch(e){case"bar":case"tick":return t.scale.minBandSize;case"line":case"trail":case"rule":return t.scale.minStrokeWidth;case"text":return t.scale.minFontSize;case"point":case"square":case"circle":return t.scale.minSize}throw new Error(F2("size",e))}const Ece=.95;function Sce(e,n,t){const i=Ul(e.width)?e.width.step:oT(t,"width"),r=Ul(e.height)?e.height.step:oT(t,"height");return n.x||n.y?new Ti(()=>`min(${[n.x?n.x.signal:i,n.y?n.y.signal:r].join(", ")})`):Math.min(i,r)}function Tce(e,n){Vn(e)?function yQe(e,n){const t=e.component.scales,{config:i,encoding:r,markDef:o,specifiedScales:s}=e;for(const a of ce(t)){const l=s[a],c=t[a],u=e.getScaleComponent(a),d=gi(r[a]),f=l[n],h=u.get("type"),p=u.get("padding"),g=u.get("paddingInner"),m=l5(h,n),_=Cse(a,n);if(void 0!==f&&(m?_&&fe(_):fe(Xoe(h,n,a))),m&&void 0===_)if(void 0!==f){const y=d.timeUnit,v=d.type;switch(n){case"domainMax":case"domainMin":Dh(l[n])||"temporal"===v||y?c.set(n,{signal:J2(l[n],{type:v,timeUnit:y})},!0):c.set(n,l[n],!0);break;default:c.copyKeyFromObject(n,l)}}else{const y=n in Dce?Dce[n]({model:e,channel:a,fieldOrDatumDef:d,scaleType:h,scalePadding:p,scalePaddingInner:g,domain:l.domain,domainMin:l.domainMin,domainMax:l.domainMax,markDef:o,config:i,hasNestedOffsetScale:rae(r,a),hasSecondaryRangeChannel:!!r[Nl(a)]}):i.scale[n];void 0!==y&&c.set(n,y,!1)}}}(e,n):Mce(e,n)}const Dce={bins:({model:e,fieldOrDatumDef:n})=>he(n)?function vQe(e,n){const t=n.bin;if(_n(t)){const i=u6(e,n.field,t);return new Ti(()=>e.getSignalName(i))}if(qi(t)&&Th(t)&&void 0!==t.step)return{step:t.step}}(e,n):void 0,interpolate:({channel:e,fieldOrDatumDef:n})=>function bQe(e,n){if(St([_o,Rl,Fl],e)&&"nominal"!==n)return"hcl"}(e,n.type),nice:({scaleType:e,channel:n,domain:t,domainMin:i,domainMax:r,fieldOrDatumDef:o})=>function wQe(e,n,t,i,r,o){if(!(zl(o)?.bin||oe(t)||null!=r||null!=i||St([wo.TIME,wo.UTC],e)))return!!Qn(n)||void 0}(e,n,t,i,r,o),padding:({channel:e,scaleType:n,fieldOrDatumDef:t,markDef:i,config:r})=>function CQe(e,n,t,i,r,o){if(Qn(e)){if(ka(n)){if(void 0!==t.continuousPadding)return t.continuousPadding;const{type:s,orient:a}=r;if("bar"===s&&(!he(i)||!i.bin&&!i.timeUnit)&&("vertical"===a&&"x"===e||"horizontal"===a&&"y"===e))return o.continuousBandSize}if(n===wo.POINT)return t.pointPadding}}(e,n,r.scale,t,i,r.bar),paddingInner:({scalePadding:e,channel:n,markDef:t,scaleType:i,config:r,hasNestedOffsetScale:o})=>function xQe(e,n,t,i,r,o=!1){if(void 0===e){if(Qn(n)){const{bandPaddingInner:s,barBandPaddingInner:a,rectBandPaddingInner:l,bandWithNestedOffsetPaddingInner:c}=r;return o?c:Xn(s,"bar"===t?a:l)}if(lv(n)&&i===wo.BAND)return r.offsetBandPaddingInner}}(e,n,t.type,i,r.scale,o),paddingOuter:({scalePadding:e,channel:n,scaleType:t,scalePaddingInner:i,config:r,hasNestedOffsetScale:o})=>function EQe(e,n,t,i,r,o=!1){if(void 0===e)if(Qn(n)){const{bandPaddingOuter:s,bandWithNestedOffsetPaddingOuter:a}=r;if(o)return a;if(t===wo.BAND)return Xn(s,Pe(i)?{signal:`${i.signal}/2`}:i/2)}else if(lv(n)){if(t===wo.POINT)return.5;if(t===wo.BAND)return r.offsetBandPaddingOuter}}(e,n,t,i,r.scale,o),reverse:({fieldOrDatumDef:e,scaleType:n,channel:t,config:i})=>function SQe(e,n,t,i){return"x"===t&&void 0!==i.xReverse?os(e)&&"descending"===n?Pe(i.xReverse)?{signal:`!${i.xReverse.signal}`}:!i.xReverse:i.xReverse:!(!os(e)||"descending"!==n)||void 0}(n,he(e)?e.sort:void 0,t,i.scale),zero:({channel:e,fieldOrDatumDef:n,domain:t,markDef:i,scaleType:r,config:o,hasSecondaryRangeChannel:s})=>function TQe(e,n,t,i,r,o,s){if(t&&"unaggregated"!==t&&os(r)){if(oe(t)){const l=t[0],c=t[t.length-1];if(Ft(l)&&l<=0&&Ft(c)&&c>=0)return!0}return!1}if("size"===e&&"quantitative"===n.type&&!Vm(r))return!0;if((!he(n)||!n.bin)&&St([...Pl,...Oje],e)){const{orient:l,type:c}=i;return(!St(["bar","area","line","trail"],c)||!("horizontal"===l&&"y"===e||"vertical"===l&&"x"===e))&&(!(!St(["bar","area"],c)||s)||o?.zero)}return!1}(e,n,t,i,r,o.scale,s)};function Ice(e){Vn(e)?function uQe(e){const n=e.component.scales;for(const t of k2){const i=n[t];if(!i)continue;const r=dQe(t,e);i.setWithExplicit("range",r)}}(e):Mce(e,"range")}function Mce(e,n){const t=e.component.scales;for(const i of e.children)"range"===n?Ice(i):Tce(i,n);for(const i of ce(t)){let r;for(const o of e.children){const s=o.component.scales[i];s&&(r=Rd(r,s.getWithExplicit(n),n,"scale",Yae((l,c)=>"range"===n&&l.step&&c.step?l.step-c.step:0)))}t[i].setWithExplicit(n,r)}}function DQe(e,n,t,i,r=!1){const o=function IQe(e,n,t,i){switch(n.type){case"nominal":case"ordinal":if(Lm(e)||"discrete"===zL(e))return"shape"===e&&"ordinal"===n.type&&fe(GL(e,"ordinal")),"ordinal";if(Qn(e)||lv(e)){if(St(["rect","bar","image","rule"],t.type)||i)return"band"}else if("arc"===t.type&&e in BL)return"band";return Oh(t[vo(e)])||Um(n)&&n.axis?.tickBand?"band":"point";case"temporal":return Lm(e)?"time":"discrete"===zL(e)?(fe(GL(e,"temporal")),"ordinal"):he(n)&&n.timeUnit&&xi(n.timeUnit).utc?"utc":"time";case"quantitative":return Lm(e)?he(n)&&_n(n.bin)?"bin-ordinal":"linear":"discrete"===zL(e)?(fe(GL(e,"quantitative")),"ordinal"):"linear";case"geojson":return}throw new Error(Koe(n.type))}(n,t,i,r),{type:s}=e;return zc(n)?void 0!==s?function FWe(e,n,t=!1){if(!zc(e))return!1;switch(e){case Mn:case Ci:case bd:case Nm:case $s:case Ta:return!(!ka(n)&&"band"!==n)||"point"===n&&!t;case Bc:case xd:case Vc:case wd:case Cd:case xh:return ka(n)||Vm(n)||St(["band","point","ordinal"],n);case _o:case Rl:case Fl:return"band"!==n;case Ed:case yo:return"ordinal"===n||Vm(n)}}(n,s)?he(t)&&!function RWe(e,n){return St([s5,a5],n)?void 0===e||Ei(e):n===$m?St([wo.TIME,wo.UTC,void 0],e):n!==kh||yse(e)||Vm(e)||void 0===e}(s,t.type)?(fe(function Nqe(e,n){return`FieldDef does not work with "${e}" scale. We are using "${n}" scale instead.`}(s,o)),o):s:(fe(function Fqe(e,n,t){return`Channel "${e}" does not work with "${n}" scale. We are using "${t}" scale instead.`}(n,s,o)),o):o:null}function Ace(e){e.component.scales=Vn(e)?function AQe(e){const{encoding:n,mark:t,markDef:i}=e,r={};for(const o of k2){const s=gi(n[o]);if(s&&t===Sse&&o===yo&&s.type===Bm)continue;let a=s&&s.scale;if(s&&null!==a&&!1!==a){a??(a={});const c=DQe(a,o,s,i,rae(n,o));r[o]=new _ce(e.scaleName(`${o}`,!0),{value:c,explicit:a.type===c})}}return r}(e):function OQe(e){var n;const t=e.component.scales={},i={},r=e.component.resolve;for(const o of e.children){Ace(o);for(const s of ce(o.component.scales))if((n=r.scale)[s]??(n[s]=Gle(s,e)),"shared"===r.scale[s]){const a=i[s],l=o.component.scales[s].getWithExplicit("type");a?xWe(a.value,l.value)?i[s]=Rd(a,l,"type","scale",kQe):(r.scale[s]="independent",delete i[s]):i[s]=l}}for(const o of ce(i)){const s=e.scaleName(o,!0);t[o]=new _ce(s,i[o]);for(const l of e.children){const c=l.component.scales[o];c&&(l.renameScale(c.get("name"),s),c.merged=!0)}}return t}(e)}const kQe=Yae((e,n)=>gse(e)-gse(n));class w6{constructor(){this.nameMap={}}rename(n,t){this.nameMap[n]=t}has(n){return void 0!==this.nameMap[n]}get(n){for(;this.nameMap[n]&&n!==this.nameMap[n];)n=this.nameMap[n];return n}}function Vn(e){return"unit"===e?.type}function $a(e){return"facet"===e?.type}function C6(e){return"concat"===e?.type}function r0(e){return"layer"===e?.type}class x6{constructor(n,t,i,r,o,s,a){this.type=t,this.parent=i,this.config=o,this.correctDataNames=l=>(l.from?.data&&(l.from.data=this.lookupDataSource(l.from.data)),l.from?.facet?.data&&(l.from.facet.data=this.lookupDataSource(l.from.facet.data)),l),this.parent=i,this.config=o,this.view=bo(a),this.name=n.name??r,this.title=Dd(n.title)?{text:n.title}:n.title?bo(n.title):void 0,this.scaleNameMap=i?i.scaleNameMap:new w6,this.projectionNameMap=i?i.projectionNameMap:new w6,this.signalNameMap=i?i.signalNameMap:new w6,this.data=n.data,this.description=n.description,this.transforms=function $Ke(e){return e.map(n=>z5(n)?{filter:Om(n.filter,bWe)}:n)}(n.transform??[]),this.layout="layer"===t||"unit"===t?{}:function UGe(e,n,t){const i=t[n],r={},{spacing:o,columns:s}=i;void 0!==o&&(r.spacing=o),void 0!==s&&(q2(e)&&!pv(e.facet)||F5(e))&&(r.columns=s),rT(e)&&(r.columns=1);for(const a of zGe)if(void 0!==e[a])if("spacing"===a){const l=e[a];r[a]=Ft(l)?l:{row:l.row??o,column:l.column??o}}else r[a]=e[a];return r}(n,t,o),this.component={data:{sources:i?i.component.data.sources:[],outputNodes:i?i.component.data.outputNodes:{},outputNodeRefCounts:i?i.component.data.outputNodeRefCounts:{},isFaceted:q2(n)||i?.component.data.isFaceted&&void 0===n.data},layoutSize:new Gc,layoutHeaders:{row:{},column:{},facet:{}},mark:null,resolve:{scale:{},axis:{},legend:{},...s?tt(s):{}},selection:null,scales:null,projection:null,axes:{},legends:{}}}get width(){return this.getSizeSignalRef("width")}get height(){return this.getSizeSignalRef("height")}parse(){this.parseScale(),this.parseLayoutSize(),this.renameTopLevelLayoutSizeSignal(),this.parseSelections(),this.parseProjection(),this.parseData(),this.parseAxesAndHeaders(),this.parseLegends(),this.parseMarkGroup()}parseScale(){!function MQe(e,{ignoreRange:n}={}){Ace(e),hce(e);for(const t of OWe)Tce(e,t);n||Ice(e)}(this)}parseProjection(){sce(this)}renameTopLevelLayoutSizeSignal(){"width"!==this.getName("width")&&this.renameSignal(this.getName("width"),"width"),"height"!==this.getName("height")&&this.renameSignal(this.getName("height"),"height")}parseLegends(){tce(this)}assembleEncodeFromView(n){const{style:t,...i}=n,r={};for(const o of ce(i)){const s=i[o];void 0!==s&&(r[o]=wn(s))}return r}assembleGroupEncodeEntry(n){let t={};return this.view&&(t=this.assembleEncodeFromView(this.view)),n||(this.description&&(t.description=wn(this.description)),"unit"!==this.type&&"layer"!==this.type)?an(t)?void 0:t:{width:this.getSizeSignalRef("width"),height:this.getSizeSignalRef("height"),...t??{}}}assembleLayout(){if(!this.layout)return;const{spacing:n,...t}=this.layout,{component:i,config:r}=this,o=function JYe(e,n){const t={};for(const i of Vs){const r=e[i];if(r?.facetFieldDef){const{titleAnchor:o,titleOrient:s}=yT(["titleAnchor","titleOrient"],r.facetFieldDef.header,n,i),a=_T(i,s),l=ZYe(o,a);void 0!==l&&(t[a]=l)}}return an(t)?void 0:t}(i.layoutHeaders,r);return{padding:n,...this.assembleDefaultLayout(),...t,...o?{titleBand:o}:{}}}assembleDefaultLayout(){return{}}assembleHeaderMarks(){const{layoutHeaders:n}=this.component;let t=[];for(const i of Vs)n[i].title&&t.push(GYe(this,i));for(const i of r6)t=t.concat(KYe(this,i));return t}assembleAxes(){return function FYe(e,n){const{x:t=[],y:i=[]}=e;return[...t.map(r=>wv(r,"grid",n)),...i.map(r=>wv(r,"grid",n)),...t.map(r=>wv(r,"main",n)),...i.map(r=>wv(r,"main",n))].filter(r=>r)}(this.component.axes,this.config)}assembleLegends(){return ice(this)}assembleProjections(){return function CXe(e){return r0(e)||C6(e)?function xXe(e){return e.children.reduce((n,t)=>n.concat(t.assembleProjections()),rce(e))}(e):rce(e)}(this)}assembleTitle(){const{encoding:n,...t}=this.title??{},i={...Aoe(this.config.title).nonMarkTitleProperties,...t,...n?{encode:{update:n}}:{}};if(i.text)return St(["unit","layer"],this.type)?St(["middle",void 0],i.anchor)&&(i.frame??(i.frame="group")):i.anchor??(i.anchor="start"),an(i)?void 0:i}assembleGroup(n=[]){const t={};(n=n.concat(this.assembleSignals())).length>0&&(t.signals=n);const i=this.assembleLayout();i&&(t.layout=i),t.marks=[].concat(this.assembleHeaderMarks(),this.assembleMarks());const r=!this.parent||$a(this.parent)?gce(this):[];r.length>0&&(t.scales=r);const o=this.assembleAxes();o.length>0&&(t.axes=o);const s=this.assembleLegends();return s.length>0&&(t.legends=s),t}getName(n){return In((this.name?`${this.name}_`:"")+n)}getDataName(n){return this.getName(Cn[n].toLowerCase())}requestDataName(n){const t=this.getDataName(n),i=this.component.data.outputNodeRefCounts;return i[t]=(i[t]||0)+1,t}getSizeSignalRef(n){if($a(this.parent)){const i=A2(qle(n)),r=this.component.scales[i];if(r&&!r.merged){const o=r.get("type"),s=r.get("range");if(Ei(o)&&Id(s)){const a=r.get("name"),c=b6(wT(this,i));return c?{signal:jle(a,r,ye({aggregate:"distinct",field:c},{expr:"datum"}))}:(fe(qL(i)),null)}}}return{signal:this.signalNameMap.get(this.getName(n))}}lookupDataSource(n){const t=this.component.data.outputNodes[n];return t?t.getSource():n}getSignalName(n){return this.signalNameMap.get(n)}renameSignal(n,t){this.signalNameMap.rename(n,t)}renameScale(n,t){this.scaleNameMap.rename(n,t)}renameProjection(n,t){this.projectionNameMap.rename(n,t)}scaleName(n,t){return t?this.getName(n):woe(n)&&zc(n)&&this.component.scales[n]||this.scaleNameMap.has(this.getName(n))?this.scaleNameMap.get(this.getName(n)):void 0}projectionName(n){return n?this.getName("projection"):this.component.projection&&!this.component.projection.merged||this.projectionNameMap.has(this.getName("projection"))?this.projectionNameMap.get(this.getName("projection")):void 0}getScaleComponent(n){if(!this.component.scales)throw new Error("getScaleComponent cannot be called before parseScale(). Make sure you have called parseScale or use parseUnitModelWithScale().");const t=this.component.scales[n];return t&&!t.merged?t:this.parent?this.parent.getScaleComponent(n):void 0}getSelectionComponent(n,t){let i=this.component.selection[n];if(!i&&this.parent&&(i=this.parent.getSelectionComponent(n,t)),!i)throw new Error(function eqe(e){return`Cannot find a selection named "${e}".`}(t));return i}hasAxisOrientSignalRef(){return this.component.axes.x?.some(n=>n.hasOrientSignalRef())||this.component.axes.y?.some(n=>n.hasOrientSignalRef())}}class kce extends x6{vgField(n,t={}){const i=this.fieldDef(n);if(i)return ye(i,t)}reduceFieldDef(n,t){return function bGe(e,n,t,i){return e?ce(e).reduce((r,o)=>{const s=e[o];return oe(s)?s.reduce((a,l)=>n.call(i,a,l,o),r):n.call(i,r,s,o)},t):t}(this.getMapping(),(i,r,o)=>{const s=zl(r);return s?n(i,s,o):i},t)}forEachFieldDef(n,t){x5(this.getMapping(),(i,r)=>{const o=zl(i);o&&n(o,r)},t)}}class CT extends on{clone(){return new CT(null,tt(this.transform))}constructor(n,t){super(n),this.transform=t,this.transform=tt(t);const i=this.transform.as??[void 0,void 0];this.transform.as=[i[0]??"value",i[1]??"density"]}dependentFields(){return new Set([this.transform.density,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`DensityTransform ${Et(this.transform)}`}assemble(){const{density:n,...t}=this.transform,i={type:"kde",field:n,...t};return this.transform.groupby&&(i.resolve="shared"),i}}class xT extends on{clone(){return new xT(null,tt(this.transform))}constructor(n,t){super(n),this.transform=t,this.transform=tt(t)}dependentFields(){return new Set([this.transform.extent])}producedFields(){return new Set([])}hash(){return`ExtentTransform ${Et(this.transform)}`}assemble(){const{extent:n,param:t}=this.transform;return{type:"extent",field:n,signal:t}}}class Sv extends on{clone(){return new Sv(null,{...this.filter})}constructor(n,t){super(n),this.filter=t}static make(n,t){const{config:i,mark:r,markDef:o}=t;if("filter"!==Zt("invalid",o,i))return null;const a=t.reduceFieldDef((l,c,u)=>{const d=zc(u)&&t.getScaleComponent(u);return d&&os(d.get("type"))&&"count"!==c.aggregate&&!Ad(r)&&(l[c.field]=c),l},{});return ce(a).length?new Sv(n,a):null}dependentFields(){return new Set(ce(this.filter))}producedFields(){return new Set}hash(){return`FilterInvalid ${Et(this.filter)}`}assemble(){const n=ce(this.filter).reduce((t,i)=>{const r=this.filter[i],o=ye(r,{expr:"datum"});return null!==r&&("temporal"===r.type?t.push(`(isDate(${o}) || (isValid(${o}) && isFinite(+${o})))`):"quantitative"===r.type&&(t.push(`isValid(${o})`),t.push(`isFinite(+${o})`))),t},[]);return n.length>0?{type:"filter",expr:n.join(" && ")}:null}}class ET extends on{clone(){return new ET(this.parent,tt(this.transform))}constructor(n,t){super(n),this.transform=t,this.transform=tt(t);const{flatten:i,as:r=[]}=this.transform;this.transform.as=i.map((o,s)=>r[s]??o)}dependentFields(){return new Set(this.transform.flatten)}producedFields(){return new Set(this.transform.as)}hash(){return`FlattenTransform ${Et(this.transform)}`}assemble(){const{flatten:n,as:t}=this.transform;return{type:"flatten",fields:n,as:t}}}class ST extends on{clone(){return new ST(null,tt(this.transform))}constructor(n,t){super(n),this.transform=t,this.transform=tt(t);const i=this.transform.as??[void 0,void 0];this.transform.as=[i[0]??"key",i[1]??"value"]}dependentFields(){return new Set(this.transform.fold)}producedFields(){return new Set(this.transform.as)}hash(){return`FoldTransform ${Et(this.transform)}`}assemble(){const{fold:n,as:t}=this.transform;return{type:"fold",fields:n,as:t}}}class o0 extends on{clone(){return new o0(null,tt(this.fields),this.geojson,this.signal)}static parseAll(n,t){if(t.component.projection&&!t.component.projection.isFit)return n;let i=0;for(const r of[[Ia,Da],[Bs,Ma]]){const o=r.map(s=>{const a=gi(t.encoding[s]);return he(a)?a.field:Vl(a)?{expr:`${a.datum}`}:Fa(a)?{expr:`${a.value}`}:void 0});(o[0]||o[1])&&(n=new o0(n,o,null,t.getName("geojson_"+i++)))}if(t.channelHasField(yo)){const r=t.typedFieldDef(yo);r.type===Bm&&(n=new o0(n,null,r.field,t.getName("geojson_"+i++)))}return n}constructor(n,t,i,r){super(n),this.fields=t,this.geojson=i,this.signal=r}dependentFields(){const n=(this.fields??[]).filter(xe);return new Set([...this.geojson?[this.geojson]:[],...n])}producedFields(){return new Set}hash(){return`GeoJSON ${this.geojson} ${this.signal} ${Et(this.fields)}`}assemble(){return[...this.geojson?[{type:"filter",expr:`isValid(datum["${this.geojson}"])`}]:[],{type:"geojson",...this.fields?{fields:this.fields}:{},...this.geojson?{geojson:this.geojson}:{},signal:this.signal}]}}class Tv extends on{clone(){return new Tv(null,this.projection,tt(this.fields),tt(this.as))}constructor(n,t,i,r){super(n),this.projection=t,this.fields=i,this.as=r}static parseAll(n,t){if(!t.projectionName())return n;for(const i of[[Ia,Da],[Bs,Ma]]){const r=i.map(s=>{const a=gi(t.encoding[s]);return he(a)?a.field:Vl(a)?{expr:`${a.datum}`}:Fa(a)?{expr:`${a.value}`}:void 0}),o=i[0]===Bs?"2":"";(r[0]||r[1])&&(n=new Tv(n,t.projectionName(),r,[t.getName(`x${o}`),t.getName(`y${o}`)]))}return n}dependentFields(){return new Set(this.fields.filter(xe))}producedFields(){return new Set(this.as)}hash(){return`Geopoint ${this.projection} ${Et(this.fields)} ${Et(this.as)}`}assemble(){return{type:"geopoint",projection:this.projection,fields:this.fields,as:this.as}}}class Hh extends on{clone(){return new Hh(null,tt(this.transform))}constructor(n,t){super(n),this.transform=t}dependentFields(){return new Set([this.transform.impute,this.transform.key,...this.transform.groupby??[]])}producedFields(){return new Set([this.transform.impute])}processSequence(n){const{start:t=0,stop:i,step:r}=n;return{signal:`sequence(${[t,i,...r?[r]:[]].join(",")})`}}static makeFromTransform(n,t){return new Hh(n,t)}static makeFromEncoding(n,t){const i=t.encoding,r=i.x,o=i.y;if(he(r)&&he(o)){const s=r.impute?r:o.impute?o:void 0;if(void 0===s)return;const a=r.impute?o:o.impute?r:void 0,{method:l,value:c,frame:u,keyvals:d}=s.impute,f=sae(t.mark,i);return new Hh(n,{impute:s.field,key:a.field,...l?{method:l}:{},...void 0!==c?{value:c}:{},...u?{frame:u}:{},...void 0!==d?{keyvals:d}:{},...f.length?{groupby:f}:{}})}return null}hash(){return`Impute ${Et(this.transform)}`}assemble(){const{impute:n,key:t,keyvals:i,method:r,groupby:o,value:s,frame:a=[null,null]}=this.transform,l={type:"impute",field:n,key:t,...i?{keyvals:vKe(i)?this.processSequence(i):i}:{},method:"value",...o?{groupby:o}:{},value:r&&"value"!==r?null:s};return r&&"value"!==r?[l,{type:"window",as:[`imputed_${n}_value`],ops:[r],fields:[n],frame:a,ignorePeers:!1,...o?{groupby:o}:{}},{type:"formula",expr:`datum.${n} === null ? datum.imputed_${n}_value : datum.${n}`,as:n}]:[l]}}class TT extends on{clone(){return new TT(null,tt(this.transform))}constructor(n,t){super(n),this.transform=t,this.transform=tt(t);const i=this.transform.as??[void 0,void 0];this.transform.as=[i[0]??t.on,i[1]??t.loess]}dependentFields(){return new Set([this.transform.loess,this.transform.on,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`LoessTransform ${Et(this.transform)}`}assemble(){const{loess:n,on:t,...i}=this.transform;return{type:"loess",x:t,y:n,...i}}}class Dv extends on{clone(){return new Dv(null,tt(this.transform),this.secondary)}constructor(n,t,i){super(n),this.transform=t,this.secondary=i}static make(n,t,i,r){const o=t.component.data.sources,{from:s}=i;let a=null;if(function bKe(e){return"data"in e}(s)){let l=Nce(s.data,o);l||(l=new Vh(s.data),o.push(l));const c=t.getName(`lookup_${r}`);a=new Wr(l,c,Cn.Lookup,t.component.data.outputNodeRefCounts),t.component.data.outputNodes[c]=a}else if(function wKe(e){return"param"in e}(s)){const l=s.param;let c;i={as:l,...i};try{c=t.getSelectionComponent(In(l),l)}catch{throw new Error(function iqe(e){return`Lookups can only be performed on selection parameters. "${e}" is a variable parameter.`}(l))}if(a=c.materialized,!a)throw new Error(function rqe(e){return`Cannot define and lookup the "${e}" selection in the same view. Try moving the lookup into a second, layered view?`}(l))}return new Dv(n,i,a.getSource())}dependentFields(){return new Set([this.transform.lookup])}producedFields(){return new Set(this.transform.as?Ce(this.transform.as):this.transform.from.fields)}hash(){return`Lookup ${Et({transform:this.transform,secondary:this.secondary})}`}assemble(){let n;if(this.transform.from.fields)n={values:this.transform.from.fields,...this.transform.as?{as:Ce(this.transform.as)}:{}};else{let t=this.transform.as;xe(t)||(fe('If "from.fields" is not specified, "as" has to be a string that specifies the key to be used for the data from the secondary source.'),t="_lookup"),n={as:[t]}}return{type:"lookup",from:this.secondary,key:this.transform.from.key,fields:[this.transform.lookup],...n,...this.transform.default?{default:this.transform.default}:{}}}}class DT extends on{clone(){return new DT(null,tt(this.transform))}constructor(n,t){super(n),this.transform=t,this.transform=tt(t);const i=this.transform.as??[void 0,void 0];this.transform.as=[i[0]??"prob",i[1]??"value"]}dependentFields(){return new Set([this.transform.quantile,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`QuantileTransform ${Et(this.transform)}`}assemble(){const{quantile:n,...t}=this.transform;return{type:"quantile",field:n,...t}}}class IT extends on{clone(){return new IT(null,tt(this.transform))}constructor(n,t){super(n),this.transform=t,this.transform=tt(t);const i=this.transform.as??[void 0,void 0];this.transform.as=[i[0]??t.on,i[1]??t.regression]}dependentFields(){return new Set([this.transform.regression,this.transform.on,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`RegressionTransform ${Et(this.transform)}`}assemble(){const{regression:n,on:t,...i}=this.transform;return{type:"regression",x:t,y:n,...i}}}class MT extends on{clone(){return new MT(null,tt(this.transform))}constructor(n,t){super(n),this.transform=t}addDimensions(n){this.transform.groupby=kl((this.transform.groupby??[]).concat(n),t=>t)}producedFields(){}dependentFields(){return new Set([this.transform.pivot,this.transform.value,...this.transform.groupby??[]])}hash(){return`PivotTransform ${Et(this.transform)}`}assemble(){const{pivot:n,value:t,groupby:i,limit:r,op:o}=this.transform;return{type:"pivot",field:n,value:t,...void 0!==r?{limit:r}:{},...void 0!==o?{op:o}:{},...void 0!==i?{groupby:i}:{}}}}class AT extends on{clone(){return new AT(null,tt(this.transform))}constructor(n,t){super(n),this.transform=t}dependentFields(){return new Set}producedFields(){return new Set}hash(){return`SampleTransform ${Et(this.transform)}`}assemble(){return{type:"sample",size:this.transform.sample}}}function Oce(e){let n=0;return function t(i,r){if(i instanceof Vh&&!i.isGenerator&&!Gm(i.data)&&(e.push(r),r={name:null,source:r.name,transform:[]}),i instanceof gr&&(i.parent instanceof Vh&&!r.source?(r.format={...r.format??{},parse:i.assembleFormatParse()},r.transform.push(...i.assembleTransforms(!0))):r.transform.push(...i.assembleTransforms())),i instanceof t0)return r.name||(r.name="data_"+n++),!r.source||r.transform.length>0?(e.push(r),i.data=r.name):i.data=r.source,void e.push(...i.assemble());switch((i instanceof Cv||i instanceof xv||i instanceof Sv||i instanceof Qm||i instanceof Zm||i instanceof Tv||i instanceof Pa||i instanceof Dv||i instanceof n0||i instanceof Uh||i instanceof ST||i instanceof ET||i instanceof CT||i instanceof TT||i instanceof DT||i instanceof IT||i instanceof Ld||i instanceof AT||i instanceof MT||i instanceof xT)&&r.transform.push(i.assemble()),(i instanceof ql||i instanceof jl||i instanceof Hh||i instanceof Yc||i instanceof o0)&&r.transform.push(...i.assemble()),i instanceof Wr&&(r.source&&0===r.transform.length?i.setSource(r.source):i.parent instanceof Wr?i.setSource(r.name):(r.name||(r.name="data_"+n++),i.setSource(r.name),1===i.numChildren()&&(e.push(r),r={name:null,source:r.name,transform:[]}))),i.numChildren()){case 0:i instanceof Wr&&(!r.source||r.transform.length>0)&&e.push(r);break;case 1:t(i.children[0],r);break;default:{r.name||(r.name="data_"+n++);let o=r.name;!r.source||r.transform.length>0?e.push(r):o=r.source;for(const s of i.children)t(s,{name:null,source:o,transform:[]});break}}}}function NQe(e){return"top"===e||"left"===e||Pe(e)?"header":"footer"}function LQe(e,n){const{facet:t,config:i,child:r,component:o}=e;if(e.channelHasField(n)){const s=t[n],a=e0("title",null,i,n);let l=Hm(s,i,{allowDisabling:!0,includeDefault:void 0===a||!!a});r.component.layoutHeaders[n].title&&(l=oe(l)?l.join(", "):l,l+=` / ${r.component.layoutHeaders[n].title}`,r.component.layoutHeaders[n].title=null);const c=e0("labelOrient",s.header,i,n),u=null!==s.header&&Xn(s.header?.labels,i.header.labels,!0),d=St(["bottom","right"],c)?"footer":"header";o.layoutHeaders[n]={title:null!==s.header?l:null,facetFieldDef:s,[d]:"facet"===n?[]:[Rce(e,n,u)]}}}function Rce(e,n,t){const i="row"===n?"height":"width";return{labels:t,sizeSignal:e.child.component.layoutSize.get(i)?e.child.getSizeSignalRef(i):void 0,axes:[]}}function Fce(e,n){const{child:t}=e;if(t.component.axes[n]){const{layoutHeaders:i,resolve:r}=e.component;if(r.axis[n]=l6(r,n),"shared"===r.axis[n]){const o="x"===n?"column":"row",s=i[o];for(const a of t.component.axes[n]){const l=NQe(a.get("orient"));s[l]??(s[l]=[Rce(e,o,!1)]);const c=wv(a,"main",e.config,{header:!0});c&&s[l][0].axes.push(c),a.mainExtracted=!0}}}}function E6(e){for(const n of e.children)n.parseLayoutSize()}function kT(e,n){const t=qle(n),i=A2(t),r=e.component.resolve,o=e.component.layoutSize;let s;for(const a of e.children){const l=a.component.layoutSize.getWithExplicit(t),c=r.scale[i]??Gle(i,e);if("independent"===c&&"step"===l.value){s=void 0;break}if(s){if("independent"===c&&s.value!==l.value){s=void 0;break}s=Rd(s,l,t,"")}else s=l}if(s){for(const a of e.children)e.renameSignal(a.getName(t),e.getName(n)),a.component.layoutSize.set(t,"merged",!1);o.setWithExplicit(n,s)}else o.setWithExplicit(n,{explicit:!1,value:void 0})}function zQe(e,n){const i=e.config,r=e.getScaleComponent("width"===n?"x":"y");if(r){const o=r.get("type"),s=r.get("range");if(Ei(o)){const a=sT(i.view,n);return Id(s)||Ul(a)?"step":a}return P5(i.view,n)}if(e.hasProjection||"arc"===e.mark)return P5(i.view,n);{const o=sT(i.view,n);return Ul(o)?o.step:o}}function S6(e,n,t){return ye(n,{suffix:`by_${ye(e)}`,...t??{}})}class Iv extends kce{constructor(n,t,i,r){super(n,"facet",t,i,r,n.resolve),this.child=A6(n.spec,this,this.getName("child"),void 0,r),this.children=[this.child],this.facet=this.initFacet(n.facet)}initFacet(n){if(!pv(n))return{facet:this.initFacetFieldDef(n,"facet")};const t=ce(n),i={};for(const r of t){if(![Nc,Pc].includes(r)){fe(F2(r,"facet"));break}const o=n[r];if(void 0===o.field){fe(WL(o,r));break}i[r]=this.initFacetFieldDef(o,r)}return i}initFacetFieldDef(n,t){const i=w5(n,t);return i.header?i.header=bo(i.header):null===i.header&&(i.header=null),i}channelHasField(n){return!!this.facet[n]}fieldDef(n){return this.facet[n]}parseData(){this.component.data=OT(this),this.child.parseData()}parseLayoutSize(){E6(this)}parseSelections(){this.child.parseSelections(),this.component.selection=this.child.component.selection}parseMarkGroup(){this.child.parseMarkGroup()}parseAxesAndHeaders(){this.child.parseAxesAndHeaders(),function PQe(e){for(const n of Vs)LQe(e,n);Fce(e,"x"),Fce(e,"y")}(this)}assembleSelectionTopLevelSignals(n){return this.child.assembleSelectionTopLevelSignals(n)}assembleSignals(){return this.child.assembleSignals(),[]}assembleSelectionData(n){return this.child.assembleSelectionData(n)}getHeaderLayoutMixins(){const n={};for(const t of Vs)for(const i of o6){const r=this.component.layoutHeaders[t],o=r[i],{facetFieldDef:s}=r;if(s){const a=e0("titleOrient",s.header,this.config,t);if(["right","bottom"].includes(a)){const l=_T(t,a);n.titleAnchor??(n.titleAnchor={}),n.titleAnchor[l]="end"}}if(o?.[0]){const l="header"===i?"headerBand":"footerBand";"facet"!==t&&!this.child.component.layoutSize.get("row"===t?"height":"width")&&(n[l]??(n[l]={}),n[l][t]=.5),r.title&&(n.offset??(n.offset={}),n.offset["row"===t?"rowTitle":"columnTitle"]=10)}}return n}assembleDefaultLayout(){const{column:n,row:t}=this.facet,i=n?this.columnDistinctSignal():t?1:void 0;let r="all";return(!t&&"independent"===this.component.resolve.scale.x||!n&&"independent"===this.component.resolve.scale.y)&&(r="none"),{...this.getHeaderLayoutMixins(),...i?{columns:i}:{},bounds:"full",align:r}}assembleLayoutSignals(){return this.child.assembleLayoutSignals()}columnDistinctSignal(){if(!(this.parent&&this.parent instanceof Iv))return{signal:`length(data('${this.getName("column_domain")}'))`}}assembleGroupStyle(){}assembleGroup(n){return this.parent&&this.parent instanceof Iv?{...this.channelHasField("column")?{encode:{update:{columns:{field:ye(this.facet.column,{prefix:"distinct"})}}}}:{},...super.assembleGroup(n)}:super.assembleGroup(n)}getCardinalityAggregateForChild(){const n=[],t=[],i=[];if(this.child instanceof Iv){if(this.child.channelHasField("column")){const r=ye(this.child.facet.column);n.push(r),t.push("distinct"),i.push(`distinct_${r}`)}}else for(const r of Pl){const o=this.child.component.scales[r];if(o&&!o.merged){const s=o.get("type"),a=o.get("range");if(Ei(s)&&Id(a)){const c=b6(wT(this.child,r));c?(n.push(c),t.push("distinct"),i.push(`distinct_${c}`)):fe(qL(r))}}}return{fields:n,ops:t,as:i}}assembleFacet(){const{name:n,data:t}=this.component.data.facetRoot,{row:i,column:r}=this.facet,{fields:o,ops:s,as:a}=this.getCardinalityAggregateForChild(),l=[];for(const u of Vs){const d=this.facet[u];if(d){l.push(ye(d));const{bin:f,sort:h}=d;if(_n(f)&&l.push(ye(d,{binSuffix:"end"})),Bl(h)){const{field:p,op:g=j2}=h,m=S6(d,h);i&&r?(o.push(m),s.push("max"),a.push(m)):(o.push(p),s.push(g),a.push(m))}else if(oe(h)){const p=Jm(d,u);o.push(p),s.push("max"),a.push(p)}}}const c=!!i&&!!r;return{name:n,data:t,groupby:l,...c||o.length>0?{aggregate:{...c?{cross:c}:{},...o.length?{fields:o,ops:s,as:a}:{}}}:{}}}facetSortFields(n){const{facet:t}=this,i=t[n];return i?Bl(i.sort)?[S6(i,i.sort,{expr:"datum"})]:oe(i.sort)?[Jm(i,n,{expr:"datum"})]:[ye(i,{expr:"datum"})]:[]}facetSortOrder(n){const{facet:t}=this,i=t[n];if(i){const{sort:r}=i;return[(Bl(r)?r.order:!oe(r)&&r)||"ascending"]}return[]}assembleLabelTitle(){const{facet:n,config:t}=this;if(n.facet)return s6(n.facet,"facet",t);const i={row:["top","bottom"],column:["left","right"]};for(const r of r6)if(n[r]){const o=e0("labelOrient",n[r]?.header,t,r);if(i[r].includes(o))return s6(n[r],r,t)}}assembleMarks(){const{child:n}=this,i=function RQe(e){const n=[],t=Oce(n);for(const i of e.children)t(i,{source:e.name,name:null,transform:[]});return n}(this.component.data.facetRoot),r=n.assembleGroupEncodeEntry(!1),o=this.assembleLabelTitle()||n.assembleTitle(),s=n.assembleGroupStyle();return[{name:this.getName("cell"),type:"group",...o?{title:o}:{},...s?{style:s}:{},from:{facet:this.assembleFacet()},sort:{field:Vs.map(l=>this.facetSortFields(l)).flat(),order:Vs.map(l=>this.facetSortOrder(l)).flat()},...i.length>0?{data:i}:{},...r?{encode:{update:r}}:{},...n.assembleGroup(QKe(this,[]))}]}getMapping(){return this.facet}}function Nce(e,n){for(const t of n){const i=t.data;if(e.name&&t.hasName()&&e.name!==t.dataName)continue;const r=e.format?.mesh,o=i.format?.feature;if(r&&o)continue;const s=e.format?.feature;if((s||o)&&s!==o)continue;const a=i.format?.mesh;if(!r&&!a||r===a)if(yv(e)&&yv(i)){if(is(e.values,i.values))return t}else if(Gm(e)&&Gm(i)){if(e.url===i.url)return t}else if(Xae(e)&&e.name===t.dataName)return t}return null}function OT(e){let n=function HQe(e,n){if(e.data||!e.parent){if(null===e.data){const i=new Vh({values:[]});return n.push(i),i}const t=Nce(e.data,n);if(t)return Fd(e.data)||(t.data.format=soe({},e.data.format,t.data.format)),!t.hasName()&&e.data.name&&(t.dataName=e.data.name),t;{const i=new Vh(e.data);return n.push(i),i}}return e.parent.component.data.facetRoot?e.parent.component.data.facetRoot:e.parent.component.data.main}(e,e.component.data.sources);const{outputNodes:t,outputNodeRefCounts:i}=e.component.data,r=e.data,s=r&&(Fd(r)||Gm(r)||yv(r))||!e.parent?new YKe:e.parent.component.data.ancestorParse.clone();Fd(r)?(Qae(r)?n=new xv(n,r.sequence):j5(r)&&(n=new Cv(n,r.graticule)),s.parseNothing=!0):null===r?.format?.parse&&(s.parseNothing=!0),n=gr.makeExplicit(n,e,s)??n,n=new Ld(n);const a=e.parent&&r0(e.parent);(Vn(e)||$a(e))&&a&&(n=ql.makeFromEncoding(n,e)??n),e.transforms.length>0&&(n=function jQe(e,n,t){let i=0;for(const r of n.transforms){let o,s;if(kKe(r))s=e=new Zm(e,r),o="derived";else if(z5(r)){const a=NXe(r);s=e=gr.makeWithAncestors(e,{},a,t)??e,e=new Qm(e,n,r.filter)}else if(Uae(r))s=e=ql.makeFromTransform(e,r,n),o="number";else if(RKe(r))o="date",void 0===t.getWithExplicit(r.field).value&&(e=new gr(e,{[r.field]:o}),t.set(r.field,o,!1)),s=e=jl.makeFromTransform(e,r);else if(FKe(r))s=e=Pa.makeFromTransform(e,r),o="number",Z5(n)&&(e=new Ld(e));else if(zae(r))s=e=Dv.make(e,n,r,i++),o="derived";else if(IKe(r))s=e=new n0(e,r),o="number";else if(MKe(r))s=e=new Uh(e,r),o="number";else if(NKe(r))s=e=Yc.makeFromTransform(e,r),o="derived";else if(PKe(r))s=e=new ST(e,r),o="derived";else if(LKe(r))s=e=new xT(e,r),o="derived";else if(AKe(r))s=e=new ET(e,r),o="derived";else if(CKe(r))s=e=new MT(e,r),o="derived";else if(DKe(r))e=new AT(e,r);else if(OKe(r))s=e=Hh.makeFromTransform(e,r),o="derived";else if(xKe(r))s=e=new CT(e,r),o="derived";else if(EKe(r))s=e=new DT(e,r),o="derived";else if(SKe(r))s=e=new IT(e,r),o="derived";else{if(!TKe(r)){fe(dqe(r));continue}s=e=new TT(e,r),o="derived"}if(s&&void 0!==o)for(const a of s.producedFields()??[])t.set(a,o,!1)}return e}(n,e,s));const l=function LXe(e){const n={};if(Vn(e)&&e.component.selection)for(const t of ce(e.component.selection)){const i=e.component.selection[t];for(const r of i.project.items)!r.channel&&Fm(r.field)>1&&(n[r.field]="flatten")}return n}(e),c=function PXe(e){const n={};function t(i){qm(i)?n[i.field]="date":"quantitative"===i.type&&function Uje(e){return xe(e)&&St(["min","max"],e)}(i.aggregate)?n[i.field]="number":Fm(i.field)>1?i.field in n||(n[i.field]="flatten"):Nh(i)&&Bl(i.sort)&&Fm(i.sort.field)>1&&(i.sort.field in n||(n[i.sort.field]="flatten"))}if((Vn(e)||$a(e))&&e.forEachFieldDef((i,r)=>{if(qr(i))t(i);else{const o=Sh(r),s=e.fieldDef(o);t({...i,type:s.type})}}),Vn(e)){const{mark:i,markDef:r,encoding:o}=e;if(Ad(i)&&!e.encoding.order){const a=o["horizontal"===r.orient?"y":"x"];he(a)&&"quantitative"===a.type&&!(a.field in n)&&(n[a.field]="number")}}return n}(e);n=gr.makeWithAncestors(n,{},{...l,...c},s)??n,Vn(e)&&(n=o0.parseAll(n,e),n=Tv.parseAll(n,e)),(Vn(e)||$a(e))&&(a||(n=ql.makeFromEncoding(n,e)??n),n=jl.makeFromEncoding(n,e)??n,n=Zm.parseAllForSortIndex(n,e));const u=e.getDataName(Cn.Raw),d=new Wr(n,u,Cn.Raw,i);if(t[u]=d,n=d,Vn(e)){const g=Pa.makeFromEncoding(n,e);g&&(n=g,Z5(e)&&(n=new Ld(n))),n=Hh.makeFromEncoding(n,e)??n,n=Yc.makeFromEncoding(n,e)??n}Vn(e)&&(n=Sv.make(n,e)??n);const f=e.getDataName(Cn.Main),h=new Wr(n,f,Cn.Main,i);t[f]=h,n=h,Vn(e)&&function OYe(e,n){for(const[t,i]of vd(e.component.selection??{})){const r=e.getName(`lookup_${t}`);e.component.data.outputNodes[r]=i.materialized=new Wr(new Qm(n,e,{param:t}),r,Cn.Lookup,e.component.data.outputNodeRefCounts)}}(e,h);let p=null;if($a(e)){const g=e.getName("facet");n=function UQe(e,n){const{row:t,column:i}=n;if(t&&i){let r=null;for(const o of[t,i])if(Bl(o.sort)){const{field:s,op:a=j2}=o.sort;e=r=new Uh(e,{joinaggregate:[{op:a,field:s,as:S6(o,o.sort,{forAs:!0})}],groupby:[ye(o)]})}return r}return null}(n,e.facet)??n,p=new t0(n,e,g,h.getSource()),t[g]=p}return{...e.component.data,outputNodes:t,outputNodeRefCounts:i,raw:d,main:h,facetRoot:p,ancestorParse:s}}class qQe extends x6{constructor(n,t,i,r){super(n,"concat",t,i,r,n.resolve),("shared"===n.resolve?.axis?.x||"shared"===n.resolve?.axis?.y)&&fe("Axes cannot be shared in concatenated or repeated views yet (https://github.com/vega/vega-lite/issues/2415)."),this.children=this.getChildren(n).map((o,s)=>A6(o,this,this.getName(`concat_${s}`),void 0,r))}parseData(){this.component.data=OT(this);for(const n of this.children)n.parseData()}parseSelections(){this.component.selection={};for(const n of this.children){n.parseSelections();for(const t of ce(n.component.selection))this.component.selection[t]=n.component.selection[t]}}parseMarkGroup(){for(const n of this.children)n.parseMarkGroup()}parseAxesAndHeaders(){for(const n of this.children)n.parseAxesAndHeaders()}getChildren(n){return rT(n)?n.vconcat:N5(n)?n.hconcat:n.concat}parseLayoutSize(){!function BQe(e){E6(e);const t=void 0===e.layout.columns?"height":"childHeight";kT(e,1===e.layout.columns?"width":"childWidth"),kT(e,t)}(this)}parseAxisGroup(){return null}assembleSelectionTopLevelSignals(n){return this.children.reduce((t,i)=>i.assembleSelectionTopLevelSignals(t),n)}assembleSignals(){return this.children.forEach(n=>n.assembleSignals()),[]}assembleLayoutSignals(){const n=a6(this);for(const t of this.children)n.push(...t.assembleLayoutSignals());return n}assembleSelectionData(n){return this.children.reduce((t,i)=>i.assembleSelectionData(t),n)}assembleMarks(){return this.children.map(n=>{const t=n.assembleTitle(),i=n.assembleGroupStyle(),r=n.assembleGroupEncodeEntry(!1);return{type:"group",name:n.getName("group"),...t?{title:t}:{},...i?{style:i}:{},...r?{encode:{update:r}}:{},...n.assembleGroup()}})}assembleGroupStyle(){}assembleDefaultLayout(){const n=this.layout.columns;return{...null!=n?{columns:n}:{},bounds:"full",align:"each"}}}const GQe={disable:1,gridScale:1,scale:1,...Jse,labelExpr:1,encode:1},Pce=ce(GQe);class T6 extends Gc{constructor(n={},t={},i=!1){super(),this.explicit=n,this.implicit=t,this.mainExtracted=i}clone(){return new T6(tt(this.explicit),tt(this.implicit),this.mainExtracted)}hasAxisPart(n){return"axis"===n||("grid"===n||"title"===n?!!this.get(n):!function WQe(e){return!1===e||null===e}(this.get(n)))}hasOrientSignalRef(){return Pe(this.explicit.orient)}}const XQe={bottom:"top",top:"bottom",left:"right",right:"left"};function ZQe(e,n){if(!e)return n.map(t=>t.clone());{if(e.length!==n.length)return;const t=e.length;for(let i=0;i<t;i++){const r=e[i],o=n[i];if(!!r!=!!o)return;if(r&&o){const s=r.getWithExplicit("orient"),a=o.getWithExplicit("orient");if(s.explicit&&a.explicit&&s.value!==a.value)return;e[i]=JQe(r,o)}}}return e}function JQe(e,n){for(const t of Pce){const i=Rd(e.getWithExplicit(t),n.getWithExplicit(t),t,"axis",(r,o)=>{switch(t){case"title":return Boe(r,o);case"gridScale":return{explicit:r.explicit,value:Xn(r.value,o.value)}}return lT(r,o,t,"axis")});e.setWithExplicit(t,i)}return e}function eZe(e,n,t,i,r){if("disable"===n)return void 0!==t;switch(t=t||{},n){case"titleAngle":case"labelAngle":return e===(Pe(t.labelAngle)?t.labelAngle:ov(t.labelAngle));case"values":return!!t.values;case"encode":return!!t.encoding||!!t.labelAngle;case"title":if(e===Ble(i,r))return!0}return e===t[n]}const tZe=new Set(["grid","translate","format","formatType","orient","labelExpr","tickCount","position","tickMinStep"]);function nZe(e,n){let t=n.axis(e);const i=new T6,r=gi(n.encoding[e]),{mark:o,config:s}=n,a=t?.orient||s["x"===e?"axisX":"axisY"]?.orient||s.axis?.orient||function UYe(e){return"x"===e?"bottom":"left"}(e),l=n.getScaleComponent(e).get("type"),c=function NYe(e,n,t,i){const r="band"===n?["axisDiscrete","axisBand"]:"point"===n?["axisDiscrete","axisPoint"]:yse(n)?["axisQuantitative"]:"time"===n||"utc"===n?["axisTemporal"]:[],o="x"===e?"axisX":"axisY",s=Pe(t)?"axisOrient":`axis${rv(t)}`,a=[...r,...r.map(c=>o+c.substr(4))],l=["axis",s,o];return{vlOnlyAxisConfig:Nle(a,i,e,t),vgAxisConfig:Nle(l,i,e,t),axisConfigStyle:PYe([...l,...a],i)}}(e,l,a,n.config),u=void 0!==t?!t:t6("disable",s.style,t?.style,c).configValue;if(i.set("disable",u,void 0!==t),u)return i;t=t||{};const d=function BYe(e,n,t,i,r){const o=n?.labelAngle;if(void 0!==o)return Pe(o)?o:ov(o);{const{configValue:s}=t6("labelAngle",i,n?.style,r);return void 0!==s?ov(s):t!==Mn||!St([a5,s5],e.type)||he(e)&&e.timeUnit?void 0:270}}(r,t,e,s.style,c),f=Rse(t.formatType,r,l),h=Ose(r,r.type,t.format,t.formatType,s,!0),p={fieldOrDatumDef:r,axis:t,channel:e,model:n,scaleType:l,orient:a,labelAngle:d,format:h,formatType:f,mark:o,config:s};for(const _ of Pce){const y=_ in Ple?Ple[_](p):tae(_)?t[_]:void 0,v=void 0!==y,b=eZe(y,_,t,n,e);if(v&&b)i.set(_,y,b);else{const{configValue:w,configFrom:x}=tae(_)&&"values"!==_?t6(_,s.style,t.style,c):{},C=void 0!==w;v&&!C?i.set(_,y,b):("vgAxisConfig"!==x||tZe.has(_)&&C||_v(w)||Pe(w))&&i.set(_,w,!1)}}const g=t.encoding??{},m=Zse.reduce((_,y)=>{if(!i.hasAxisPart(y))return _;const v=Wle(g[y]??{},n),b="labels"===y?function KQe(e,n,t){const{encoding:i,config:r}=e,o=gi(i[n])??gi(i[Nl(n)]),s=e.axis(n)||{},{format:a,formatType:l}=s;if(Fh(l))return{text:Ra({fieldOrDatumDef:o,field:"datum.value",format:a,formatType:l,config:r}),...t};if(void 0===a&&void 0===l&&r.customFormatTypes){if("quantitative"===zm(o)){if(Um(o)&&"normalize"===o.stack&&r.normalizedNumberFormatType)return{text:Ra({fieldOrDatumDef:o,field:"datum.value",format:r.normalizedNumberFormat,formatType:r.normalizedNumberFormatType,config:r}),...t};if(r.numberFormatType)return{text:Ra({fieldOrDatumDef:o,field:"datum.value",format:r.numberFormat,formatType:r.numberFormatType,config:r}),...t}}if("temporal"===zm(o)&&r.timeFormatType&&he(o)&&!o.timeUnit)return{text:Ra({fieldOrDatumDef:o,field:"datum.value",format:r.timeFormat,formatType:r.timeFormatType,config:r}),...t}}return t}(n,e,v):v;return void 0!==b&&!an(b)&&(_[y]={update:b}),_},{});return an(m)||i.set("encode",m,!!t.encoding||void 0!==t.labelAngle),i}const rZe={vgMark:"arc",encodeEntry:e=>({...zs(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"}),...pr("x",e,{defaultPos:"mid"}),...pr("y",e,{defaultPos:"mid"}),...Nd(e,"radius"),...Nd(e,"theta")})},oZe={vgMark:"area",encodeEntry:e=>({...zs(e,{align:"ignore",baseline:"ignore",color:"include",orient:"include",size:"ignore",theta:"ignore"}),...fT("x",e,{defaultPos:"zeroOrMin",defaultPos2:"zeroOrMin",range:"horizontal"===e.markDef.orient}),...fT("y",e,{defaultPos:"zeroOrMin",defaultPos2:"zeroOrMin",range:"vertical"===e.markDef.orient}),...X5(e)})},sZe={vgMark:"rect",encodeEntry:e=>({...zs(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...Nd(e,"x"),...Nd(e,"y")})},aZe={vgMark:"shape",encodeEntry:e=>({...zs(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"})}),postEncodingTransform:e=>{const{encoding:n}=e,t=n.shape;return[{type:"geoshape",projection:e.projectionName(),...t&&he(t)&&t.type===Bm?{field:ye(t,{expr:"datum"})}:{}}]}},lZe={vgMark:"image",encodeEntry:e=>({...zs(e,{align:"ignore",baseline:"ignore",color:"ignore",orient:"ignore",size:"ignore",theta:"ignore"}),...Nd(e,"x"),...Nd(e,"y"),...K5(e,"url")})},cZe={vgMark:"line",encodeEntry:e=>({...zs(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"}),...pr("x",e,{defaultPos:"mid"}),...pr("y",e,{defaultPos:"mid"}),...Si("size",e,{vgChannel:"strokeWidth"}),...X5(e)})},uZe={vgMark:"trail",encodeEntry:e=>({...zs(e,{align:"ignore",baseline:"ignore",color:"include",size:"include",orient:"ignore",theta:"ignore"}),...pr("x",e,{defaultPos:"mid"}),...pr("y",e,{defaultPos:"mid"}),...Si("size",e),...X5(e)})};function D6(e,n){const{config:t}=e;return{...zs(e,{align:"ignore",baseline:"ignore",color:"include",size:"include",orient:"ignore",theta:"ignore"}),...pr("x",e,{defaultPos:"mid"}),...pr("y",e,{defaultPos:"mid"}),...Si("size",e),...Si("angle",e),...dZe(e,0,n)}}function dZe(e,n,t){return t?{shape:{value:t}}:Si("shape",e)}const fZe={vgMark:"symbol",encodeEntry:e=>D6(e)},hZe={vgMark:"symbol",encodeEntry:e=>D6(e,"circle")},pZe={vgMark:"symbol",encodeEntry:e=>D6(e,"square")},gZe={vgMark:"rect",encodeEntry:e=>({...zs(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...Nd(e,"x"),...Nd(e,"y")})},mZe={vgMark:"rule",encodeEntry:e=>{const{markDef:n}=e,t=n.orient;return e.encoding.x||e.encoding.y||e.encoding.latitude||e.encoding.longitude?{...zs(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...fT("x",e,{defaultPos:"horizontal"===t?"zeroOrMax":"mid",defaultPos2:"zeroOrMin",range:"vertical"!==t}),...fT("y",e,{defaultPos:"vertical"===t?"zeroOrMax":"mid",defaultPos2:"zeroOrMin",range:"horizontal"!==t}),...Si("size",e,{vgChannel:"strokeWidth"})}:{}}},_Ze={vgMark:"text",encodeEntry:e=>{const{config:n,encoding:t}=e;return{...zs(e,{align:"include",baseline:"include",color:"include",size:"ignore",orient:"ignore",theta:"include"}),...pr("x",e,{defaultPos:"mid"}),...pr("y",e,{defaultPos:"mid"}),...K5(e),...Si("size",e,{vgChannel:"fontSize"}),...Si("angle",e),..._le("align",yZe(e.markDef,0,n)),..._le("baseline",vZe(e.markDef,0,n)),...pr("radius",e,{defaultPos:null}),...pr("theta",e,{defaultPos:null})}}};function yZe(e,n,t){if(void 0===Zt("align",e,t))return"center"}function vZe(e,n,t){if(void 0===Zt("baseline",e,t))return"middle"}const bZe={vgMark:"rect",encodeEntry:e=>{const{config:n,markDef:t}=e,i=t.orient,r="horizontal"===i?"width":"height",o="horizontal"===i?"height":"width";return{...zs(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...pr("x",e,{defaultPos:"mid",vgChannel:"xc"}),...pr("y",e,{defaultPos:"mid",vgChannel:"yc"}),...Si("size",e,{defaultValue:wZe(e),vgChannel:r}),[o]:wn(Zt("thickness",t,n))}}};function wZe(e){const{config:n,markDef:t}=e,{orient:i}=t,r="horizontal"===i?"width":"height",o=e.getScaleComponent("horizontal"===i?"x":"y"),s=Zt("size",t,n,{vgChannel:r})??n.tick.bandSize;if(void 0!==s)return s;{const a=o?o.get("range"):void 0;return a&&Id(a)&&Ft(a.step)?3*a.step/4:3*oT(n.view,r)/4}}const RT={arc:rZe,area:oZe,bar:sZe,circle:hZe,geoshape:aZe,image:lZe,line:cZe,point:fZe,rect:gZe,rule:mZe,square:pZe,text:_Ze,tick:bZe,trail:uZe};const Lce="faceted_path_",$ce="stack_group_";function I6(e,n={fromPrefix:""}){const{mark:t,markDef:i,encoding:r,config:o}=e,s=Xn(i.clip,function TZe(e){const n=e.getScaleComponent("x"),t=e.getScaleComponent("y");return!(!n?.get("selectionExtent")&&!t?.get("selectionExtent"))||void 0}(e),function DZe(e){const n=e.component.projection;return!(!n||n.isFit)||void 0}(e)),a=Foe(i),l=r.key,c=function SZe(e){const{encoding:n,stack:t,mark:i,markDef:r,config:o}=e,s=n.order;if(!(!oe(s)&&Fa(s)&&TL(s.value)||!s&&TL(Zt("order",r,o)))){if((oe(s)||he(s))&&!t)return Poe(s,{expr:"datum"});if(Ad(i)){const a="horizontal"===r.orient?"y":"x",l=n[a];if(he(l)){const c=l.sort;return oe(c)?{field:ye(l,{prefix:a,suffix:"sort_index",expr:"datum"})}:Bl(c)?{field:ye({aggregate:C5(e.encoding)?c.op:void 0,field:c.field},{expr:"datum"})}:Lse(c)?{field:ye(e.fieldDef(c.encoding),{expr:"datum"}),order:c.order}:null===c?void 0:{field:ye(l,{binSuffix:e.stack?.impute?"mid":void 0,expr:"datum"})}}return}}}(e),u=function IZe(e){if(!e.component.selection)return null;const n=ce(e.component.selection).length;let t=n,i=e.parent;for(;i&&0===t;)t=ce(i.component.selection).length,i=i.parent;return t?{interactive:n>0||"geoshape"===e.mark||!!e.encoding.tooltip}:null}(e),d=Zt("aria",i,o),f=RT[t].postEncodingTransform?RT[t].postEncodingTransform(e):null;return[{name:e.getName("marks"),type:RT[t].vgMark,...s?{clip:!0}:{},...a?{style:a}:{},...l?{key:l.field}:{},...c?{sort:c}:{},...u||{},...!1===d?{aria:d}:{},from:{data:n.fromPrefix+e.requestDataName(Cn.Main)},encode:{update:RT[t].encodeEntry(e)},...f?{transform:f}:{}}]}class Bce extends kce{constructor(n,t,i,r={},o){super(n,"unit",t,i,o,void 0,Eae(n)?n.view:void 0),this.specifiedScales={},this.specifiedAxes={},this.specifiedLegends={},this.specifiedProjection={},this.selection=[],this.children=[];const s=Oa(n.mark)?{...n.mark}:{type:n.mark},a=s.type;void 0===s.filled&&(s.filled=function dKe(e,n,{graticule:t}){if(t)return!1;const i=jc("filled",e,n),r=e.type;return Xn(i,r!==z2&&r!==V2&&r!==U2)}(s,o,{graticule:n.data&&j5(n.data)}));const l=this.encoding=function yGe(e,n,t,i){const r={};for(const o of ce(e))woe(o)||fe(wqe(o));for(let o of Aje){if(!e[o])continue;const s=e[o];if(lv(o)){const a=Mje(o),l=r[a];if(he(l)&&wWe(l.type)&&he(s)&&!l.timeUnit){fe(gqe(a));continue}}if("angle"===o&&"arc"===n&&!e.theta&&(fe("Arc marks uses theta channel rather than angle, replacing angle with theta."),o=$s),_Ge(e,o,n))if(o===Bc&&"line"===n&&zl(e[o])?.aggregate)fe("Line marks cannot encode size with a non-groupby field. You may want to use trail marks instead.");else if(o===_o&&(t?"fill"in e:"stroke"in e))fe(Yoe("encoding",{fill:"fill"in e,stroke:"stroke"in e}));else if(o===av||o===Pm&&!oe(s)&&!Fa(s)||o===Eh&&oe(s)){if(s){if(o===Pm){const a=e[o];if(Use(a)){r[o]=a;continue}}r[o]=Ce(s).reduce((a,l)=>(he(l)?a.push(w5(l,o)):fe(WL(l,o)),a),[])}}else{if(o===Eh&&null===s)r[o]=null;else if(!(he(s)||Vl(s)||Fa(s)||W2(s)||Pe(s))){fe(WL(s,o));continue}r[o]=Yse(s,o,i)}else fe(F2(o,n))}return r}(n.encoding||{},a,s.filled,o);this.markDef=Rae(s,l,o),this.size=function iZe({encoding:e,size:n}){for(const t of Pl){const i=vo(t);Ul(n[i])&&Od(e[t])&&(delete n[i],fe(Qoe(i)))}return n}({encoding:l,size:Eae(n)?{...r,...n.width?{width:n.width}:{},...n.height?{height:n.height}:{}}:r}),this.stack=Oae(this.markDef,l),this.specifiedScales=this.initScales(a,l),this.specifiedAxes=this.initAxes(l),this.specifiedLegends=this.initLegends(l),this.specifiedProjection=n.projection,this.selection=(n.params??[]).filter(c=>R5(c))}get hasProjection(){const{encoding:n}=this,t=this.mark===Sse,i=n&&Sje.some(r=>ot(n[r]));return t||i}scaleDomain(n){const t=this.specifiedScales[n];return t?t.domain:void 0}axis(n){return this.specifiedAxes[n]}legend(n){return this.specifiedLegends[n]}initScales(n,t){return k2.reduce((i,r)=>{const o=gi(t[r]);return o&&(i[r]=this.initScale(o.scale??{})),i},{})}initScale(n){const{domain:t,range:i}=n,r=bo(n);return oe(t)&&(r.domain=t.map(rs)),oe(i)&&(r.range=i.map(rs)),r}initAxes(n){return Pl.reduce((t,i)=>{const r=n[i];if(ot(r)||i===Mn&&ot(n.x2)||i===Ci&&ot(n.y2)){const o=ot(r)?r.axis:void 0;t[i]=o&&this.initAxis({...o})}return t},{})}initAxis(n){const t=ce(n),i={};for(const r of t){const o=n[r];i[r]=_v(o)?koe(o):rs(o)}return i}initLegends(n){return Rje.reduce((t,i)=>{const r=gi(n[i]);if(r&&function Nje(e){switch(e){case _o:case Rl:case Fl:case Bc:case yo:case Vc:case xd:case Ed:return!0;case wd:case Cd:case xh:return!1}}(i)){const o=r.legend;t[i]=o&&bo(o)}return t},{})}parseData(){this.component.data=OT(this)}parseLayoutSize(){!function VQe(e){const{size:n,component:t}=e;for(const i of Pl){const r=vo(i);if(n[r]){const o=n[r];t.layoutSize.set(r,Ul(o)?"step":o,!0)}else{const o=zQe(e,r);t.layoutSize.set(r,o,!1)}}}(this)}parseSelections(){this.component.selection=function kYe(e,n){const t={},i=e.config.selection;if(!n||!n.length)return t;for(const r of n){const o=In(r.name),s=r.select,a=xe(s)?s:s.type,l=Ee(s)?tt(s):{type:a},c=i[a];for(const f in c)"fields"===f||"encodings"===f||("mark"===f&&(l[f]={...c[f],...l[f]}),(void 0===l[f]||!0===l[f])&&(l[f]=tt(c[f]??l[f])));const u=t[o]={...l,name:o,type:a,init:r.value,bind:r.bind,events:xe(l.on)?_d(l.on,"scope"):Ce(tt(l.on))},d=tt(r);for(const f of gT)f.defined(u)&&f.parse&&f.parse(e,u,d)}return t}(this,this.selection)}parseMarkGroup(){this.component.mark=function CZe(e){if(St([V2,$2,LWe],e.mark)){const n=sae(e.mark,e.encoding);if(n.length>0)return function xZe(e,n){return[{name:e.getName("pathgroup"),type:"group",from:{facet:{name:Lce+e.requestDataName(Cn.Main),data:e.requestDataName(Cn.Main),groupby:n}},encode:{update:{width:{field:{group:"width"}},height:{field:{group:"height"}}}},marks:I6(e,{fromPrefix:Lce})}]}(e,n)}else if(e.mark===B2){const n=HL.some(t=>Zt(t,e.markDef,e.config));if(e.stack&&!e.fieldDef("size")&&n)return function EZe(e){const[n]=I6(e,{fromPrefix:$ce}),t=e.scaleName(e.stack.fieldChannel),i=(c={})=>e.vgField(e.stack.fieldChannel,c),r=(c,u)=>`${c}(${[i({prefix:"min",suffix:"start",expr:u}),i({prefix:"max",suffix:"start",expr:u}),i({prefix:"min",suffix:"end",expr:u}),i({prefix:"max",suffix:"end",expr:u})].map(f=>`scale('${t}',${f})`).join(",")})`;let o,s;"x"===e.stack.fieldChannel?(o={...Rm(n.encode.update,["y","yc","y2","height",...HL]),x:{signal:r("min","datum")},x2:{signal:r("max","datum")},clip:{value:!0}},s={x:{field:{group:"x"},mult:-1},height:{field:{group:"height"}}},n.encode.update={...mo(n.encode.update,["y","yc","y2"]),height:{field:{group:"height"}}}):(o={...Rm(n.encode.update,["x","xc","x2","width"]),y:{signal:r("min","datum")},y2:{signal:r("max","datum")},clip:{value:!0}},s={y:{field:{group:"y"},mult:-1},width:{field:{group:"width"}}},n.encode.update={...mo(n.encode.update,["x","xc","x2"]),width:{field:{group:"width"}}});for(const c of HL){const u=jc(c,e.markDef,e.config);n.encode.update[c]?(o[c]=n.encode.update[c],delete n.encode.update[c]):u&&(o[c]=wn(u)),u&&(n.encode.update[c]={value:0})}const a=[];if(e.stack.groupbyChannels?.length>0)for(const c of e.stack.groupbyChannels){const u=e.fieldDef(c),d=ye(u);d&&a.push(d),(u?.bin||u?.timeUnit)&&a.push(ye(u,{binSuffix:"end"}))}return o=["stroke","strokeWidth","strokeJoin","strokeCap","strokeDash","strokeDashOffset","strokeMiterLimit","strokeOpacity"].reduce((c,u)=>{if(n.encode.update[u])return{...c,[u]:n.encode.update[u]};{const d=jc(u,e.markDef,e.config);return void 0!==d?{...c,[u]:wn(d)}:c}},o),o.stroke&&(o.strokeForeground={value:!0},o.strokeOffset={value:0}),[{type:"group",from:{facet:{data:e.requestDataName(Cn.Main),name:$ce+e.requestDataName(Cn.Main),groupby:a,aggregate:{fields:[i({suffix:"start"}),i({suffix:"start"}),i({suffix:"end"}),i({suffix:"end"})],ops:["min","max","min","max"]}}},encode:{update:o},marks:[{type:"group",encode:{update:s},marks:[n]}]}]}(e)}return I6(e)}(this)}parseAxesAndHeaders(){this.component.axes=function YQe(e){return Pl.reduce((n,t)=>(e.component.scales[t]&&(n[t]=[nZe(t,e)]),n),{})}(this)}assembleSelectionTopLevelSignals(n){return function ZKe(e,n){let t=!1;for(const i of ji(e.component.selection??{})){const r=i.name,o=ge(r+$h);if(0===n.filter(a=>a.name===r).length){const l="point"===i.type?", true, true)":")";n.push({name:i.name,update:`${Ile}(${o}, ${ge("global"===i.resolve?"union":i.resolve)}${l}`})}t=!0;for(const a of gT)a.defined(i)&&a.topLevelSignals&&(n=a.topLevelSignals(e,i,n))}return t&&0===n.filter(r=>"unit"===r.name).length&&n.unshift({name:"unit",value:{},on:[{events:"pointermove",update:"isTuple(group()) ? group() : unit"}]}),q5(n)}(this,n)}assembleSignals(){return[...Fle(this),...XKe(this,[])]}assembleSelectionData(n){return function JKe(e,n){const t=[...n],i=Bh(e,{escape:!1});for(const r of ji(e.component.selection??{})){const o={name:r.name+$h};if(r.project.hasSelectionId&&(o.transform=[{type:"collect",sort:{field:Na}}]),r.init){const a=r.project.items.map(Jae);o.values=r.init.map(r.project.hasSelectionId?l=>({unit:i,[Na]:Lh(l,!1)[0]}):l=>({unit:i,fields:a,values:Lh(l,!1)}))}t.filter(a=>a.name===r.name+$h).length||t.push(o)}return t}(this,n)}assembleLayout(){return null}assembleLayoutSignals(){return a6(this)}assembleMarks(){let n=this.component.mark??[];return(!this.parent||!r0(this.parent))&&(n=ele(this,n)),n.map(this.correctDataNames)}assembleGroupStyle(){const{style:n}=this.view||{};return void 0!==n?n:this.encoding.x||this.encoding.y?"cell":"view"}getMapping(){return this.encoding}get mark(){return this.markDef.type}channelHasField(n){return Ph(this.encoding,n)}fieldDef(n){return zl(this.encoding[n])}typedFieldDef(n){const t=this.fieldDef(n);return qr(t)?t:null}}class M6 extends x6{constructor(n,t,i,r,o){super(n,"layer",t,i,o,n.resolve,n.view);const s={...r,...n.width?{width:n.width}:{},...n.height?{height:n.height}:{}};this.children=n.layer.map((a,l)=>{if(aT(a))return new M6(a,this,this.getName(`layer_${l}`),s,o);if(qc(a))return new Bce(a,this,this.getName(`layer_${l}`),s,o);throw new Error(jL(a))})}parseData(){this.component.data=OT(this);for(const n of this.children)n.parseData()}parseLayoutSize(){!function $Qe(e){E6(e),kT(e,"width"),kT(e,"height")}(this)}parseSelections(){this.component.selection={};for(const n of this.children){n.parseSelections();for(const t of ce(n.component.selection))this.component.selection[t]=n.component.selection[t]}}parseMarkGroup(){for(const n of this.children)n.parseMarkGroup()}parseAxesAndHeaders(){!function QQe(e){const{axes:n,resolve:t}=e.component,i={top:0,bottom:0,right:0,left:0};for(const r of e.children){r.parseAxesAndHeaders();for(const o of ce(r.component.axes))t.axis[o]=l6(e.component.resolve,o),"shared"===t.axis[o]&&(n[o]=ZQe(n[o],r.component.axes[o]),n[o]||(t.axis[o]="independent",delete n[o]))}for(const r of Pl){for(const o of e.children)if(o.component.axes[r]){if("independent"===t.axis[r]){n[r]=(n[r]??[]).concat(o.component.axes[r]);for(const s of o.component.axes[r]){const{value:a,explicit:l}=s.getWithExplicit("orient");if(!Pe(a)){if(i[a]>0&&!l){const c=XQe[a];i[a]>i[c]&&s.set("orient",c,!1)}i[a]++}}}delete o.component.axes[r]}if("independent"===t.axis[r]&&n[r]&&n[r].length>1)for(const[o,s]of(n[r]||[]).entries())o>0&&s.get("grid")&&!s.explicit.grid&&(s.implicit.grid=!1)}}(this)}assembleSelectionTopLevelSignals(n){return this.children.reduce((t,i)=>i.assembleSelectionTopLevelSignals(t),n)}assembleSignals(){return this.children.reduce((n,t)=>n.concat(t.assembleSignals()),Fle(this))}assembleLayoutSignals(){return this.children.reduce((n,t)=>n.concat(t.assembleLayoutSignals()),a6(this))}assembleSelectionData(n){return this.children.reduce((t,i)=>i.assembleSelectionData(t),n)}assembleGroupStyle(){const n=new Set;for(const i of this.children)for(const r of Ce(i.assembleGroupStyle()))n.add(r);const t=Array.from(n);return t.length>1?t:1===t.length?t[0]:void 0}assembleTitle(){let n=super.assembleTitle();if(n)return n;for(const t of this.children)if(n=t.assembleTitle(),n)return n}assembleLayout(){return null}assembleMarks(){return function eYe(e,n){for(const t of e.children)Vn(t)&&(n=ele(t,n));return n}(this,this.children.flatMap(n=>n.assembleMarks()))}assembleLegends(){return this.children.reduce((n,t)=>n.concat(t.assembleLegends()),ice(this))}}function A6(e,n,t,i,r){if(q2(e))return new Iv(e,n,t,r);if(aT(e))return new M6(e,n,t,i,r);if(qc(e))return new Bce(e,n,t,i,r);if(function VGe(e){return rT(e)||N5(e)||F5(e)}(e))return new qQe(e,n,t,r);throw new Error(jL(e))}function MZe(e,n={}){n.logger&&function eWe(e){Ll=e}(n.logger),n.fieldTitle&&Kse(n.fieldTitle);try{const t=Aae(wg(n.config,e.config)),i=Wae(e,t),r=A6(i,null,"",void 0,t);return r.parse(),function JXe(e,n){m6(e.sources);let t=0,i=0;for(let r=0;r<bT&&fce(e,n,!0);r++)t++;e.sources.map(p6);for(let r=0;r<bT&&fce(e,n,!1);r++)i++;m6(e.sources),Math.max(t,i)===bT&&fe(`Maximum optimization runs(${bT}) reached.`)}(r.component.data,r),{spec:kZe(r,AZe(e,i.autosize,t,r),e.datasets,e.usermeta),normalized:i}}finally{n.logger&&function nse(){return Ll=tse,Ll}(),n.fieldTitle&&function dGe(){Kse(Wse)}()}}function AZe(e,n,t,i){const r=i.component.layoutSize.get("width"),o=i.component.layoutSize.get("height");if(void 0===n?(n={type:"pad"},i.hasAxisOrientSignalRef()&&(n.resize=!0)):xe(n)&&(n={type:n}),r&&o&&function WKe(e){return"fit"===e||"fit-x"===e||"fit-y"===e}(n.type))if("step"===r&&"step"===o)fe(Uoe()),n.type="pad";else if("step"===r||"step"===o){const s="step"===r?"width":"height";fe(Uoe(A2(s))),n.type=function GKe(e){return e?`fit-${A2(e)}`:"fit"}("width"===s?"height":"width")}return{...1===ce(n).length&&n.type?"pad"===n.type?{}:{autosize:n.type}:{autosize:n},...Kae(t,!1),...Kae(e,!0)}}function kZe(e,n,t={},i){const r=e.config?function JGe(e){e=tt(e);for(const n of QGe)delete e[n];if(e.axis)for(const n in e.axis)_v(e.axis[n])&&delete e.axis[n];if(e.legend)for(const n of NGe)delete e.legend[n];if(e.mark){for(const n of Dse)delete e.mark[n];e.mark.tooltip&&Ee(e.mark.tooltip)&&delete e.mark.tooltip}e.params&&(e.signals=(e.signals||[]).concat(Cae(e.params)),delete e.params);for(const n of XGe){for(const i of Dse)delete e[n][i];const t=ZGe[n];if(t)for(const i of t)delete e[n][i];tKe(e,n)}for(const n of function FGe(){return ce(M5)}())delete e[n];!function eKe(e){const{titleMarkConfig:n,subtitleMarkConfig:t,subtitle:i}=Aoe(e.title);an(n)||(e.style["group-title"]={...e.style["group-title"],...n}),an(t)||(e.style["group-subtitle"]={...e.style["group-subtitle"],...t}),an(i)?delete e.title:e.title=i}(e);for(const n in e)Ee(e[n])&&an(e[n])&&delete e[n];return an(e)?void 0:e}(e.config):void 0,o=[].concat(e.assembleSelectionData([]),function FQe(e,n){const t=[],i=Oce(t);let r=0;for(const s of e.sources){s.hasName()||(s.dataName="source_"+r++);const a=s.assemble();i(s,a)}for(const s of t)0===s.transform.length&&delete s.transform;let o=0;for(const[s,a]of t.entries())0===(a.transform??[]).length&&!a.source&&t.splice(o++,0,t.splice(s,1)[0]);for(const s of t)for(const a of s.transform??[])"lookup"===a.type&&(a.from=e.outputNodes[a.from].getSource());for(const s of t)s.name in n&&(s.values=n[s.name]);return t}(e.component.data,t)),s=e.assembleProjections(),a=e.assembleTitle(),l=e.assembleGroupStyle(),c=e.assembleGroupEncodeEntry(!0);let u=e.assembleLayoutSignals();u=u.filter(h=>"width"!==h.name&&"height"!==h.name||void 0===h.value||(n[h.name]=+h.value,!1));const{params:d,...f}=n;return{$schema:"https://vega.github.io/schema/vega/v5.json",...e.description?{description:e.description}:{},...f,...a?{title:a}:{},...l?{style:l}:{},...c?{encode:{update:c}}:{},data:o,...s.length>0?{projections:s}:{},...e.assembleGroup([...u,...e.assembleSelectionTopLevelSignals([]),...Cae(d)]),...r?{config:r}:{},...i?{usermeta:i}:{}}}const OZe="5.16.3",Vce=function RZe(e){const[n,t]=/schema\/([\w-]+)\/([\w\.\-]+)\.json$/g.exec(e).slice(1,3);return{library:n,version:t}};const s0="#fff",JZe={background:"#333",view:{stroke:"#888"},title:{color:s0,subtitleColor:s0},style:{"guide-label":{fill:s0},"guide-title":{fill:s0}},axis:{domainColor:s0,gridColor:"#888",tickColor:s0}},jh="#4572a7",eJe={background:"#fff",arc:{fill:jh},area:{fill:jh},line:{stroke:jh,strokeWidth:2},path:{stroke:jh},rect:{fill:jh},shape:{stroke:jh},symbol:{fill:jh,strokeWidth:1.5,size:50},axis:{bandPosition:.5,grid:!0,gridColor:"#000000",gridOpacity:1,gridWidth:.5,labelPadding:10,tickSize:5,tickWidth:.5},axisBand:{grid:!1,tickExtra:!0},legend:{labelBaseline:"middle",labelFontSize:11,symbolSize:50,symbolType:"square"},range:{category:["#4572a7","#aa4643","#8aa453","#71598e","#4598ae","#d98445","#94aace","#d09393","#b9cc98","#a99cbc"]}},qh="#30a2da",k6="#cbcbcb",iJe={arc:{fill:qh},area:{fill:qh},axis:{domainColor:k6,grid:!0,gridColor:k6,gridWidth:1,labelColor:"#999",labelFontSize:10,titleColor:"#333",tickColor:k6,tickSize:10,titleFontSize:14,titlePadding:10,labelPadding:4},axisBand:{grid:!1},background:"#f0f0f0",group:{fill:"#f0f0f0"},legend:{labelColor:"#333",labelFontSize:11,padding:1,symbolSize:30,symbolType:"square",titleColor:"#333",titleFontSize:14,titlePadding:10},line:{stroke:qh,strokeWidth:2},path:{stroke:qh,strokeWidth:.5},rect:{fill:qh},range:{category:["#30a2da","#fc4f30","#e5ae38","#6d904f","#8b8b8b","#b96db8","#ff9e27","#56cc60","#52d2ca","#52689e","#545454","#9fe4f8"],diverging:["#cc0020","#e77866","#f6e7e1","#d6e8ed","#91bfd9","#1d78b5"],heatmap:["#d6e8ed","#cee0e5","#91bfd9","#549cc6","#1d78b5"]},point:{filled:!0,shape:"circle"},shape:{stroke:qh},bar:{binSpacing:2,fill:qh,stroke:null},title:{anchor:"start",fontSize:24,fontWeight:600,offset:20}},Wh="#000",rJe={group:{fill:"#e5e5e5"},arc:{fill:Wh},area:{fill:Wh},line:{stroke:Wh},path:{stroke:Wh},rect:{fill:Wh},shape:{stroke:Wh},symbol:{fill:Wh,size:40},axis:{domain:!1,grid:!0,gridColor:"#FFFFFF",gridOpacity:1,labelColor:"#7F7F7F",labelPadding:4,tickColor:"#7F7F7F",tickSize:5.67,titleFontSize:16,titleFontWeight:"normal"},legend:{labelBaseline:"middle",labelFontSize:11,symbolSize:40},range:{category:["#000000","#7F7F7F","#1A1A1A","#999999","#333333","#B0B0B0","#4D4D4D","#C9C9C9","#666666","#DCDCDC"]}},jce="Benton Gothic, sans-serif",Gh="#82c6df",O6="Benton Gothic Bold, sans-serif",Mv={"category-6":["#ec8431","#829eb1","#c89d29","#3580b1","#adc839","#ab7fb4"],"fire-7":["#fbf2c7","#f9e39c","#f8d36e","#f4bb6a","#e68a4f","#d15a40","#ab4232"],"fireandice-6":["#e68a4f","#f4bb6a","#f9e39c","#dadfe2","#a6b7c6","#849eae"],"ice-7":["#edefee","#dadfe2","#c4ccd2","#a6b7c6","#849eae","#607785","#47525d"]},lJe={background:"#ffffff",title:{anchor:"start",color:"#000000",font:O6,fontSize:22,fontWeight:"normal"},arc:{fill:Gh},area:{fill:Gh},line:{stroke:Gh,strokeWidth:2},path:{stroke:Gh},rect:{fill:Gh},shape:{stroke:Gh},symbol:{fill:Gh,size:30},axis:{labelFont:jce,labelFontSize:11.5,labelFontWeight:"normal",titleFont:O6,titleFontSize:13,titleFontWeight:"normal"},axisX:{labelAngle:0,labelPadding:4,tickSize:3},axisY:{labelBaseline:"middle",maxExtent:45,minExtent:45,tickSize:2,titleAlign:"left",titleAngle:0,titleX:-45,titleY:-11},legend:{labelFont:jce,labelFontSize:11.5,symbolType:"square",titleFont:O6,titleFontSize:13,titleFontWeight:"normal"},range:{category:Mv["category-6"],diverging:Mv["fireandice-6"],heatmap:Mv["fire-7"],ordinal:Mv["fire-7"],ramp:Mv["fire-7"]}},Kh="#ab5787",FT="#979797",cJe={background:"#f9f9f9",arc:{fill:Kh},area:{fill:Kh},line:{stroke:Kh},path:{stroke:Kh},rect:{fill:Kh},shape:{stroke:Kh},symbol:{fill:Kh,size:30},axis:{domainColor:FT,domainWidth:.5,gridWidth:.2,labelColor:FT,tickColor:FT,tickWidth:.2,titleColor:FT},axisBand:{grid:!1},axisX:{grid:!0,tickSize:10},axisY:{domain:!1,grid:!0,tickSize:0},legend:{labelFontSize:11,padding:1,symbolSize:30,symbolType:"square"},range:{category:["#ab5787","#51b2e5","#703c5c","#168dd9","#d190b6","#00609f","#d365ba","#154866","#666666","#c4c4c4"]}},Yh="#3e5c69",uJe={background:"#fff",arc:{fill:Yh},area:{fill:Yh},line:{stroke:Yh},path:{stroke:Yh},rect:{fill:Yh},shape:{stroke:Yh},symbol:{fill:Yh},axis:{domainWidth:.5,grid:!0,labelPadding:2,tickSize:5,tickWidth:.5,titleFontWeight:"normal"},axisBand:{grid:!1},axisX:{gridWidth:.2},axisY:{gridDash:[3],gridWidth:.4},legend:{labelFontSize:11,padding:1,symbolType:"square"},range:{category:["#3e5c69","#6793a6","#182429","#0570b0","#3690c0","#74a9cf","#a6bddb","#e2ddf2"]}},Us="#1696d2",NT="Lato",R6="Lato",Av={"main-colors":["#1696d2","#d2d2d2","#000000","#fdbf11","#ec008b","#55b748","#5c5859","#db2b27"],"shades-blue":["#CFE8F3","#A2D4EC","#73BFE2","#46ABDB","#1696D2","#12719E","#0A4C6A","#062635"],"shades-gray":["#F5F5F5","#ECECEC","#E3E3E3","#DCDBDB","#D2D2D2","#9D9D9D","#696969","#353535"],"shades-yellow":["#FFF2CF","#FCE39E","#FDD870","#FCCB41","#FDBF11","#E88E2D","#CA5800","#843215"],"shades-magenta":["#F5CBDF","#EB99C2","#E46AA7","#E54096","#EC008B","#AF1F6B","#761548","#351123"],"shades-green":["#DCEDD9","#BCDEB4","#98CF90","#78C26D","#55B748","#408941","#2C5C2D","#1A2E19"],"shades-black":["#D5D5D4","#ADABAC","#848081","#5C5859","#332D2F","#262223","#1A1717","#0E0C0D"],"shades-red":["#F8D5D4","#F1AAA9","#E9807D","#E25552","#DB2B27","#A4201D","#6E1614","#370B0A"],"one-group":["#1696d2","#000000"],"two-groups-cat-1":["#1696d2","#000000"],"two-groups-cat-2":["#1696d2","#fdbf11"],"two-groups-cat-3":["#1696d2","#db2b27"],"two-groups-seq":["#a2d4ec","#1696d2"],"three-groups-cat":["#1696d2","#fdbf11","#000000"],"three-groups-seq":["#a2d4ec","#1696d2","#0a4c6a"],"four-groups-cat-1":["#000000","#d2d2d2","#fdbf11","#1696d2"],"four-groups-cat-2":["#1696d2","#ec0008b","#fdbf11","#5c5859"],"four-groups-seq":["#cfe8f3","#73bf42","#1696d2","#0a4c6a"],"five-groups-cat-1":["#1696d2","#fdbf11","#d2d2d2","#ec008b","#000000"],"five-groups-cat-2":["#1696d2","#0a4c6a","#d2d2d2","#fdbf11","#332d2f"],"five-groups-seq":["#cfe8f3","#73bf42","#1696d2","#0a4c6a","#000000"],"six-groups-cat-1":["#1696d2","#ec008b","#fdbf11","#000000","#d2d2d2","#55b748"],"six-groups-cat-2":["#1696d2","#d2d2d2","#ec008b","#fdbf11","#332d2f","#0a4c6a"],"six-groups-seq":["#cfe8f3","#a2d4ec","#73bfe2","#46abdb","#1696d2","#12719e"],"diverging-colors":["#ca5800","#fdbf11","#fdd870","#fff2cf","#cfe8f3","#73bfe2","#1696d2","#0a4c6a"]},gJe={background:"#FFFFFF",title:{anchor:"start",fontSize:18,font:NT},axisX:{domain:!0,domainColor:"#000000",domainWidth:1,grid:!1,labelFontSize:12,labelFont:R6,labelAngle:0,tickColor:"#000000",tickSize:5,titleFontSize:12,titlePadding:10,titleFont:NT},axisY:{domain:!1,domainWidth:1,grid:!0,gridColor:"#DEDDDD",gridWidth:1,labelFontSize:12,labelFont:R6,labelPadding:8,ticks:!1,titleFontSize:12,titlePadding:10,titleFont:NT,titleAngle:0,titleY:-10,titleX:18},legend:{labelFontSize:12,labelFont:R6,symbolSize:100,titleFontSize:12,titlePadding:10,titleFont:NT,orient:"right",offset:10},view:{stroke:"transparent"},range:{category:Av["six-groups-cat-1"],diverging:Av["diverging-colors"],heatmap:Av["diverging-colors"],ordinal:Av["six-groups-seq"],ramp:Av["shades-blue"]},area:{fill:Us},rect:{fill:Us},line:{color:Us,stroke:Us,strokeWidth:5},trail:{color:Us,stroke:Us,strokeWidth:0,size:1},path:{stroke:Us,strokeWidth:.5},point:{filled:!0},text:{font:"Lato",color:Us,fontSize:11,align:"center",fontWeight:400,size:11},style:{bar:{fill:Us,stroke:null}},arc:{fill:Us},shape:{stroke:Us},symbol:{fill:Us,size:30}},Xh="#3366CC",PT="Arial, sans-serif",mJe={arc:{fill:Xh},area:{fill:Xh},path:{stroke:Xh},rect:{fill:Xh},shape:{stroke:Xh},symbol:{stroke:Xh},circle:{fill:Xh},background:"#fff",padding:{top:10,right:10,bottom:10,left:10},style:{"guide-label":{font:PT,fontSize:12},"guide-title":{font:PT,fontSize:12},"group-title":{font:PT,fontSize:12}},title:{font:PT,fontSize:14,fontWeight:"bold",dy:-3,anchor:"start"},axis:{gridColor:"#ccc",tickColor:"#ccc",domain:!1,grid:!0},range:{category:["#4285F4","#DB4437","#F4B400","#0F9D58","#AB47BC","#00ACC1","#FF7043","#9E9D24","#5C6BC0","#F06292","#00796B","#C2185B"],heatmap:["#c6dafc","#5e97f6","#2a56c6"]}},F6=e=>e*(1/3+1),Xce=F6(9),Qce=F6(10),Zce=F6(12),kv="Segoe UI",Jce="wf_standard-font, helvetica, arial, sans-serif",Ov="#605E5C",tue="transparent",Ba="#118DFF",rue=["#DEEFFF",Ba],SJe={view:{stroke:tue},background:tue,font:kv,header:{titleFont:Jce,titleFontSize:Zce,titleColor:"#252423",labelFont:kv,labelFontSize:Qce,labelColor:Ov},axis:{ticks:!1,grid:!1,domain:!1,labelColor:Ov,labelFontSize:Xce,titleFont:Jce,titleColor:"#252423",titleFontSize:Zce,titleFontWeight:"normal"},axisQuantitative:{tickCount:3,grid:!0,gridColor:"#C8C6C4",gridDash:[1,5],labelFlush:!1},axisBand:{tickExtra:!0},axisX:{labelPadding:5},axisY:{labelPadding:10},bar:{fill:Ba},line:{stroke:Ba,strokeWidth:3,strokeCap:"round",strokeJoin:"round"},text:{font:kv,fontSize:Xce,fill:Ov},arc:{fill:Ba},area:{fill:Ba,line:!0,opacity:.6},path:{stroke:Ba},rect:{fill:Ba},point:{fill:Ba,filled:!0,size:75},shape:{stroke:Ba},symbol:{fill:Ba,strokeWidth:1.5,size:50},legend:{titleFont:kv,titleFontWeight:"bold",titleColor:Ov,labelFont:kv,labelFontSize:Qce,labelColor:Ov,symbolType:"circle",symbolSize:75},range:{category:[Ba,"#12239E","#E66C37","#6B007B","#E044A7","#744EC2","#D9B300","#D64550"],diverging:rue,heatmap:rue,ordinal:["#DEEFFF","#c7e4ff","#b0d9ff","#9aceff","#83c3ff","#6cb9ff","#55aeff","#3fa3ff","#2898ff",Ba]}},N6='IBM Plex Sans,system-ui,-apple-system,BlinkMacSystemFont,".sfnstext-regular",sans-serif',TJe=["#8a3ffc","#33b1ff","#007d79","#ff7eb6","#fa4d56","#fff1f1","#6fdc8c","#4589ff","#d12771","#d2a106","#08bdba","#bae6ff","#ba4e00","#d4bbff"],DJe=["#6929c4","#1192e8","#005d5d","#9f1853","#fa4d56","#570408","#198038","#002d9c","#ee538b","#b28600","#009d9a","#012749","#8a3800","#a56eff"];function LT({type:e,background:n}){const t="dark"===e?"#161616":"#ffffff",i="dark"===e?"#f4f4f4":"#161616",o="dark"===e?"#d4bbff":"#6929c4";return{background:n,arc:{fill:o},area:{fill:o},path:{stroke:o},rect:{fill:o},shape:{stroke:o},symbol:{stroke:o},circle:{fill:o},view:{fill:t,stroke:t},group:{fill:t},title:{color:i,anchor:"start",dy:-15,fontSize:16,font:N6,fontWeight:600},axis:{labelColor:i,labelFontSize:12,grid:!0,gridColor:"#525252",titleColor:i,labelAngle:0},style:{"guide-label":{font:N6,fill:i,fontWeight:400},"guide-title":{font:N6,fill:i,fontWeight:400}},range:{category:"dark"===e?TJe:DJe,diverging:["#750e13","#a2191f","#da1e28","#fa4d56","#ff8389","#ffb3b8","#ffd7d9","#fff1f1","#e5f6ff","#bae6ff","#82cfff","#33b1ff","#1192e8","#0072c3","#00539a","#003a6d"],heatmap:["#f6f2ff","#e8daff","#d4bbff","#be95ff","#a56eff","#8a3ffc","#6929c4","#491d8b","#31135e","#1c0f30"]}}}const IJe=LT({type:"light",background:"#ffffff"}),MJe=LT({type:"light",background:"#f4f4f4"}),AJe=LT({type:"dark",background:"#262626"}),kJe=LT({type:"dark",background:"#161616"}),OJe="2.14.0";function sue(e,n){return JSON.stringify(e,function eet(e){const n=[];return function(t,i){if("object"!=typeof i||null===i)return i;const r=n.indexOf(this)+1;return n.length=r,n.length>e?"[Object]":n.indexOf(i)>=0?"[Circular]":(n.push(i),i)}}(n))}const aue="vg-tooltip-element",net={offsetX:10,offsetY:10,id:aue,styleId:"vega-tooltip-style",theme:"light",disableDefaultStyle:!1,sanitize:function iet(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;")},maxDepth:2,formatTooltip:function JJe(e,n,t){if(oe(e))return`[${e.map(i=>n(xe(i)?i:sue(i,t))).join(", ")}]`;if(Ee(e)){let i="";const{title:r,image:o,...s}=e;r&&(i+=`<h2>${n(r)}</h2>`),o&&(i+=`<img src="${n(o)}">`);const a=Object.keys(s);if(a.length>0){i+="<table>";for(const l of a){let c=s[l];void 0!==c&&(Ee(c)&&(c=sue(c,t)),i+=`<tr><td class="key">${n(l)}</td><td class="value">${n(c)}</td></tr>`)}i+="</table>"}return i||"{}"}return n(e)}};class lue{constructor(n){this.options={...net,...n};const t=this.options.id;if(this.el=null,this.call=this.tooltipHandler.bind(this),!this.options.disableDefaultStyle&&!document.getElementById(this.options.styleId)){const i=document.createElement("style");i.setAttribute("id",this.options.styleId),i.innerHTML=function ret(e){if(!/^[A-Za-z]+[-:.\w]*$/.test(e))throw new Error("Invalid HTML ID");return"#vg-tooltip-element {\n  visibility: hidden;\n  padding: 8px;\n  position: fixed;\n  z-index: 1000;\n  font-family: sans-serif;\n  font-size: 11px;\n  border-radius: 3px;\n  box-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);\n  /* The default theme is the light theme. */\n  background-color: rgba(255, 255, 255, 0.95);\n  border: 1px solid #d9d9d9;\n  color: black;\n}\n#vg-tooltip-element.visible {\n  visibility: visible;\n}\n#vg-tooltip-element h2 {\n  margin-top: 0;\n  margin-bottom: 10px;\n  font-size: 13px;\n}\n#vg-tooltip-element table {\n  border-spacing: 0;\n}\n#vg-tooltip-element table tr {\n  border: none;\n}\n#vg-tooltip-element table tr td {\n  overflow: hidden;\n  text-overflow: ellipsis;\n  padding-top: 2px;\n  padding-bottom: 2px;\n}\n#vg-tooltip-element table tr td.key {\n  color: #808080;\n  max-width: 150px;\n  text-align: right;\n  padding-right: 4px;\n}\n#vg-tooltip-element table tr td.value {\n  display: block;\n  max-width: 300px;\n  max-height: 7em;\n  text-align: left;\n}\n#vg-tooltip-element.dark-theme {\n  background-color: rgba(32, 32, 32, 0.9);\n  border: 1px solid #f5f5f5;\n  color: white;\n}\n#vg-tooltip-element.dark-theme td.key {\n  color: #bfbfbf;\n}\n".toString().replace(aue,e)}(t);const r=document.head;r.childNodes.length>0?r.insertBefore(i,r.childNodes[0]):r.appendChild(i)}}tooltipHandler(n,t,i,r){if(this.el=document.getElementById(this.options.id),this.el||(this.el=document.createElement("div"),this.el.setAttribute("id",this.options.id),this.el.classList.add("vg-tooltip"),(document.fullscreenElement??document.body).appendChild(this.el)),null==r||""===r)return void this.el.classList.remove("visible",`${this.options.theme}-theme`);this.el.innerHTML=this.options.formatTooltip(r,this.options.sanitize,this.options.maxDepth),this.el.classList.add("visible",`${this.options.theme}-theme`);const{x:o,y:s}=function oet(e,n,t,i){let r=e.clientX+t;r+n.width>window.innerWidth&&(r=+e.clientX-t-n.width);let o=e.clientY+i;return o+n.height>window.innerHeight&&(o=+e.clientY-i-n.height),{x:r,y:o}}(t,this.el.getBoundingClientRect(),this.options.offsetX,this.options.offsetY);this.el.style.top=`${s}px`,this.el.style.left=`${o}px`}}function Rv(e){return(Rv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n})(e)}function cet(e,n,t){return(n=function aet(e){var n=function set(e,n){if("object"!==Rv(e)||null===e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var i=t.call(e,n||"default");if("object"!==Rv(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(e)}(e,"string");return"symbol"===Rv(n)?n:String(n)}(n))in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function uet(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var P6,cue,fet=Vt;function Vt(e){var n=this;if(n instanceof Vt||(n=new Vt),n.tail=null,n.head=null,n.length=0,e&&"function"==typeof e.forEach)e.forEach(function(r){n.push(r)});else if(arguments.length>0)for(var t=0,i=arguments.length;t<i;t++)n.push(arguments[t]);return n}function het(e,n,t){var i=n===e.head?new Qh(t,null,n,e):new Qh(t,n,n.next,e);return null===i.next&&(e.tail=i),null===i.prev&&(e.head=i),e.length++,i}function pet(e,n){e.tail=new Qh(n,e.tail,null,e),e.head||(e.head=e.tail),e.length++}function get(e,n){e.head=new Qh(n,null,e.head,e),e.tail||(e.tail=e.head),e.length++}function Qh(e,n,t,i){if(!(this instanceof Qh))return new Qh(e,n,t,i);this.list=i,this.value=e,n?(n.next=this,this.prev=n):this.prev=null,t?(t.prev=this,this.next=t):this.next=null}Vt.Node=Qh,Vt.create=Vt,Vt.prototype.removeNode=function(e){if(e.list!==this)throw new Error("removing node which does not belong to this list");var n=e.next,t=e.prev;return n&&(n.prev=t),t&&(t.next=n),e===this.head&&(this.head=n),e===this.tail&&(this.tail=t),e.list.length--,e.next=null,e.prev=null,e.list=null,n},Vt.prototype.unshiftNode=function(e){if(e!==this.head){e.list&&e.list.removeNode(e);var n=this.head;e.list=this,e.next=n,n&&(n.prev=e),this.head=e,this.tail||(this.tail=e),this.length++}},Vt.prototype.pushNode=function(e){if(e!==this.tail){e.list&&e.list.removeNode(e);var n=this.tail;e.list=this,e.prev=n,n&&(n.next=e),this.tail=e,this.head||(this.head=e),this.length++}},Vt.prototype.push=function(){for(var e=0,n=arguments.length;e<n;e++)pet(this,arguments[e]);return this.length},Vt.prototype.unshift=function(){for(var e=0,n=arguments.length;e<n;e++)get(this,arguments[e]);return this.length},Vt.prototype.pop=function(){if(this.tail){var e=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,e}},Vt.prototype.shift=function(){if(this.head){var e=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,e}},Vt.prototype.forEach=function(e,n){n=n||this;for(var t=this.head,i=0;null!==t;i++)e.call(n,t.value,i,this),t=t.next},Vt.prototype.forEachReverse=function(e,n){n=n||this;for(var t=this.tail,i=this.length-1;null!==t;i--)e.call(n,t.value,i,this),t=t.prev},Vt.prototype.get=function(e){for(var n=0,t=this.head;null!==t&&n<e;n++)t=t.next;if(n===e&&null!==t)return t.value},Vt.prototype.getReverse=function(e){for(var n=0,t=this.tail;null!==t&&n<e;n++)t=t.prev;if(n===e&&null!==t)return t.value},Vt.prototype.map=function(e,n){n=n||this;for(var t=new Vt,i=this.head;null!==i;)t.push(e.call(n,i.value,this)),i=i.next;return t},Vt.prototype.mapReverse=function(e,n){n=n||this;for(var t=new Vt,i=this.tail;null!==i;)t.push(e.call(n,i.value,this)),i=i.prev;return t},Vt.prototype.reduce=function(e,n){var t,i=this.head;if(arguments.length>1)t=n;else{if(!this.head)throw new TypeError("Reduce of empty list with no initial value");i=this.head.next,t=this.head.value}for(var r=0;null!==i;r++)t=e(t,i.value,r),i=i.next;return t},Vt.prototype.reduceReverse=function(e,n){var t,i=this.tail;if(arguments.length>1)t=n;else{if(!this.tail)throw new TypeError("Reduce of empty list with no initial value");i=this.tail.prev,t=this.tail.value}for(var r=this.length-1;null!==i;r--)t=e(t,i.value,r),i=i.prev;return t},Vt.prototype.toArray=function(){for(var e=new Array(this.length),n=0,t=this.head;null!==t;n++)e[n]=t.value,t=t.next;return e},Vt.prototype.toArrayReverse=function(){for(var e=new Array(this.length),n=0,t=this.tail;null!==t;n++)e[n]=t.value,t=t.prev;return e},Vt.prototype.slice=function(e,n){(n=n||this.length)<0&&(n+=this.length),(e=e||0)<0&&(e+=this.length);var t=new Vt;if(n<e||n<0)return t;e<0&&(e=0),n>this.length&&(n=this.length);for(var i=0,r=this.head;null!==r&&i<e;i++)r=r.next;for(;null!==r&&i<n;i++,r=r.next)t.push(r.value);return t},Vt.prototype.sliceReverse=function(e,n){(n=n||this.length)<0&&(n+=this.length),(e=e||0)<0&&(e+=this.length);var t=new Vt;if(n<e||n<0)return t;e<0&&(e=0),n>this.length&&(n=this.length);for(var i=this.length,r=this.tail;null!==r&&i>n;i--)r=r.prev;for(;null!==r&&i>e;i--,r=r.prev)t.push(r.value);return t},Vt.prototype.splice=function(e,n,...t){e>this.length&&(e=this.length-1),e<0&&(e=this.length+e);for(var i=0,r=this.head;null!==r&&i<e;i++)r=r.next;var o=[];for(i=0;r&&i<n;i++)o.push(r.value),r=this.removeNode(r);for(null===r&&(r=this.tail),r!==this.head&&r!==this.tail&&(r=r.prev),i=0;i<t.length;i++)r=het(this,r,t[i]);return o},Vt.prototype.reverse=function(){for(var e=this.head,n=this.tail,t=e;null!==t;t=t.prev){var i=t.prev;t.prev=t.next,t.next=i}return this.head=n,this.tail=e,this};try{!function det(){return cue||(cue=1,P6=function(e){e.prototype[Symbol.iterator]=function*(){for(let n=this.head;n;n=n.next)yield n.value}}),P6}()(Vt)}catch{}const met=fet,Zh=Symbol("max"),Xc=Symbol("length"),a0=Symbol("lengthCalculator"),Fv=Symbol("allowStale"),Jh=Symbol("maxAge"),Qc=Symbol("dispose"),uue=Symbol("noDisposeOnSet"),Di=Symbol("lruList"),Va=Symbol("cache"),due=Symbol("updateAgeOnGet"),L6=()=>1,$6=(e,n,t)=>{const i=e[Va].get(n);if(i){const r=i.value;if($T(e,r)){if(l0(e,i),!e[Fv])return}else t&&(e[due]&&(i.value.now=Date.now()),e[Di].unshiftNode(i));return r.value}},$T=(e,n)=>{if(!n||!n.maxAge&&!e[Jh])return!1;const t=Date.now()-n.now;return n.maxAge?t>n.maxAge:e[Jh]&&t>e[Jh]},Nv=e=>{if(e[Xc]>e[Zh])for(let n=e[Di].tail;e[Xc]>e[Zh]&&null!==n;){const t=n.prev;l0(e,n),n=t}},l0=(e,n)=>{if(n){const t=n.value;e[Qc]&&e[Qc](t.key,t.value),e[Xc]-=t.length,e[Va].delete(t.key),e[Di].removeNode(n)}};class yet{constructor(n,t,i,r,o){this.key=n,this.value=t,this.length=i,this.now=r,this.maxAge=o||0}}const fue=(e,n,t,i)=>{let r=t.value;$T(e,r)&&(l0(e,t),e[Fv]||(r=void 0)),r&&n.call(i,r.value,r.key,e)};const bet=Object.freeze({loose:!0}),wet=Object.freeze({});var B6=e=>e?"object"!=typeof e?bet:e:wet,V6={exports:{}},z6={MAX_LENGTH:256,MAX_SAFE_COMPONENT_LENGTH:16,MAX_SAFE_BUILD_LENGTH:250,MAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER||9007199254740991,RELEASE_TYPES:["major","premajor","minor","preminor","patch","prepatch","prerelease"],SEMVER_SPEC_VERSION:"2.0.0",FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2},BT="object"==typeof process&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?(...e)=>console.error("SEMVER",...e):()=>{};!function(e,n){const{MAX_SAFE_COMPONENT_LENGTH:t,MAX_SAFE_BUILD_LENGTH:i,MAX_LENGTH:r}=z6,o=BT,s=(n=e.exports={}).re=[],a=n.safeRe=[],l=n.src=[],c=n.t={};let u=0;const d="[a-zA-Z0-9-]",f=[["\\s",1],["\\d",r],[d,i]],p=(g,m,_)=>{const y=(g=>{for(const[m,_]of f)g=g.split(`${m}*`).join(`${m}{0,${_}}`).split(`${m}+`).join(`${m}{1,${_}}`);return g})(m),v=u++;o(g,v,m),c[g]=v,l[v]=m,s[v]=new RegExp(m,_?"g":void 0),a[v]=new RegExp(y,_?"g":void 0)};p("NUMERICIDENTIFIER","0|[1-9]\\d*"),p("NUMERICIDENTIFIERLOOSE","\\d+"),p("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${d}*`),p("MAINVERSION",`(${l[c.NUMERICIDENTIFIER]})\\.(${l[c.NUMERICIDENTIFIER]})\\.(${l[c.NUMERICIDENTIFIER]})`),p("MAINVERSIONLOOSE",`(${l[c.NUMERICIDENTIFIERLOOSE]})\\.(${l[c.NUMERICIDENTIFIERLOOSE]})\\.(${l[c.NUMERICIDENTIFIERLOOSE]})`),p("PRERELEASEIDENTIFIER",`(?:${l[c.NUMERICIDENTIFIER]}|${l[c.NONNUMERICIDENTIFIER]})`),p("PRERELEASEIDENTIFIERLOOSE",`(?:${l[c.NUMERICIDENTIFIERLOOSE]}|${l[c.NONNUMERICIDENTIFIER]})`),p("PRERELEASE",`(?:-(${l[c.PRERELEASEIDENTIFIER]}(?:\\.${l[c.PRERELEASEIDENTIFIER]})*))`),p("PRERELEASELOOSE",`(?:-?(${l[c.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${l[c.PRERELEASEIDENTIFIERLOOSE]})*))`),p("BUILDIDENTIFIER",`${d}+`),p("BUILD",`(?:\\+(${l[c.BUILDIDENTIFIER]}(?:\\.${l[c.BUILDIDENTIFIER]})*))`),p("FULLPLAIN",`v?${l[c.MAINVERSION]}${l[c.PRERELEASE]}?${l[c.BUILD]}?`),p("FULL",`^${l[c.FULLPLAIN]}$`),p("LOOSEPLAIN",`[v=\\s]*${l[c.MAINVERSIONLOOSE]}${l[c.PRERELEASELOOSE]}?${l[c.BUILD]}?`),p("LOOSE",`^${l[c.LOOSEPLAIN]}$`),p("GTLT","((?:<|>)?=?)"),p("XRANGEIDENTIFIERLOOSE",`${l[c.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),p("XRANGEIDENTIFIER",`${l[c.NUMERICIDENTIFIER]}|x|X|\\*`),p("XRANGEPLAIN",`[v=\\s]*(${l[c.XRANGEIDENTIFIER]})(?:\\.(${l[c.XRANGEIDENTIFIER]})(?:\\.(${l[c.XRANGEIDENTIFIER]})(?:${l[c.PRERELEASE]})?${l[c.BUILD]}?)?)?`),p("XRANGEPLAINLOOSE",`[v=\\s]*(${l[c.XRANGEIDENTIFIERLOOSE]})(?:\\.(${l[c.XRANGEIDENTIFIERLOOSE]})(?:\\.(${l[c.XRANGEIDENTIFIERLOOSE]})(?:${l[c.PRERELEASELOOSE]})?${l[c.BUILD]}?)?)?`),p("XRANGE",`^${l[c.GTLT]}\\s*${l[c.XRANGEPLAIN]}$`),p("XRANGELOOSE",`^${l[c.GTLT]}\\s*${l[c.XRANGEPLAINLOOSE]}$`),p("COERCE",`(^|[^\\d])(\\d{1,${t}})(?:\\.(\\d{1,${t}}))?(?:\\.(\\d{1,${t}}))?(?:$|[^\\d])`),p("COERCERTL",l[c.COERCE],!0),p("LONETILDE","(?:~>?)"),p("TILDETRIM",`(\\s*)${l[c.LONETILDE]}\\s+`,!0),n.tildeTrimReplace="$1~",p("TILDE",`^${l[c.LONETILDE]}${l[c.XRANGEPLAIN]}$`),p("TILDELOOSE",`^${l[c.LONETILDE]}${l[c.XRANGEPLAINLOOSE]}$`),p("LONECARET","(?:\\^)"),p("CARETTRIM",`(\\s*)${l[c.LONECARET]}\\s+`,!0),n.caretTrimReplace="$1^",p("CARET",`^${l[c.LONECARET]}${l[c.XRANGEPLAIN]}$`),p("CARETLOOSE",`^${l[c.LONECARET]}${l[c.XRANGEPLAINLOOSE]}$`),p("COMPARATORLOOSE",`^${l[c.GTLT]}\\s*(${l[c.LOOSEPLAIN]})$|^$`),p("COMPARATOR",`^${l[c.GTLT]}\\s*(${l[c.FULLPLAIN]})$|^$`),p("COMPARATORTRIM",`(\\s*)${l[c.GTLT]}\\s*(${l[c.LOOSEPLAIN]}|${l[c.XRANGEPLAIN]})`,!0),n.comparatorTrimReplace="$1$2$3",p("HYPHENRANGE",`^\\s*(${l[c.XRANGEPLAIN]})\\s+-\\s+(${l[c.XRANGEPLAIN]})\\s*$`),p("HYPHENRANGELOOSE",`^\\s*(${l[c.XRANGEPLAINLOOSE]})\\s+-\\s+(${l[c.XRANGEPLAINLOOSE]})\\s*$`),p("STAR","(<|>)?=?\\s*\\*"),p("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),p("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")}(V6,V6.exports);var U6=V6.exports;const pue=/^[0-9]+$/,gue=(e,n)=>{const t=pue.test(e),i=pue.test(n);return t&&i&&(e=+e,n=+n),e===n?0:t&&!i?-1:i&&!t?1:e<n?-1:1};var Det={compareIdentifiers:gue,rcompareIdentifiers:(e,n)=>gue(n,e)};const VT=BT,{MAX_LENGTH:mue,MAX_SAFE_INTEGER:zT}=z6,{safeRe:_ue,t:yue}=U6,Iet=B6,{compareIdentifiers:c0}=Det;var H6=class Gl{constructor(n,t){if(t=Iet(t),n instanceof Gl){if(n.loose===!!t.loose&&n.includePrerelease===!!t.includePrerelease)return n;n=n.version}else if("string"!=typeof n)throw new TypeError(`Invalid version. Must be a string. Got type "${typeof n}".`);if(n.length>mue)throw new TypeError(`version is longer than ${mue} characters`);VT("SemVer",n,t),this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease;const i=n.trim().match(t.loose?_ue[yue.LOOSE]:_ue[yue.FULL]);if(!i)throw new TypeError(`Invalid Version: ${n}`);if(this.raw=n,this.major=+i[1],this.minor=+i[2],this.patch=+i[3],this.major>zT||this.major<0)throw new TypeError("Invalid major version");if(this.minor>zT||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>zT||this.patch<0)throw new TypeError("Invalid patch version");this.prerelease=i[4]?i[4].split(".").map(r=>{if(/^[0-9]+$/.test(r)){const o=+r;if(o>=0&&o<zT)return o}return r}):[],this.build=i[5]?i[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(n){if(VT("SemVer.compare",this.version,this.options,n),!(n instanceof Gl)){if("string"==typeof n&&n===this.version)return 0;n=new Gl(n,this.options)}return n.version===this.version?0:this.compareMain(n)||this.comparePre(n)}compareMain(n){return n instanceof Gl||(n=new Gl(n,this.options)),c0(this.major,n.major)||c0(this.minor,n.minor)||c0(this.patch,n.patch)}comparePre(n){if(n instanceof Gl||(n=new Gl(n,this.options)),this.prerelease.length&&!n.prerelease.length)return-1;if(!this.prerelease.length&&n.prerelease.length)return 1;if(!this.prerelease.length&&!n.prerelease.length)return 0;let t=0;do{const i=this.prerelease[t],r=n.prerelease[t];if(VT("prerelease compare",t,i,r),void 0===i&&void 0===r)return 0;if(void 0===r)return 1;if(void 0===i)return-1;if(i!==r)return c0(i,r)}while(++t)}compareBuild(n){n instanceof Gl||(n=new Gl(n,this.options));let t=0;do{const i=this.build[t],r=n.build[t];if(VT("prerelease compare",t,i,r),void 0===i&&void 0===r)return 0;if(void 0===r)return 1;if(void 0===i)return-1;if(i!==r)return c0(i,r)}while(++t)}inc(n,t,i){switch(n){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",t,i);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",t,i);break;case"prepatch":this.prerelease.length=0,this.inc("patch",t,i),this.inc("pre",t,i);break;case"prerelease":0===this.prerelease.length&&this.inc("patch",t,i),this.inc("pre",t,i);break;case"major":(0!==this.minor||0!==this.patch||0===this.prerelease.length)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(0!==this.patch||0===this.prerelease.length)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":0===this.prerelease.length&&this.patch++,this.prerelease=[];break;case"pre":{const r=Number(i)?1:0;if(!t&&!1===i)throw new Error("invalid increment argument: identifier is empty");if(0===this.prerelease.length)this.prerelease=[r];else{let o=this.prerelease.length;for(;--o>=0;)"number"==typeof this.prerelease[o]&&(this.prerelease[o]++,o=-2);if(-1===o){if(t===this.prerelease.join(".")&&!1===i)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(r)}}if(t){let o=[t,r];!1===i&&(o=[t]),0===c0(this.prerelease[0],t)?isNaN(this.prerelease[1])&&(this.prerelease=o):this.prerelease=o}break}default:throw new Error(`invalid increment argument: ${n}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}};const vue=H6;var u0=(e,n,t)=>new vue(e,t).compare(new vue(n,t));const Met=u0,ket=u0,Ret=u0,Net=u0,Let=u0,Bet=u0;var j6,bue,q6,wue,Get=(e,n,t,i)=>{switch(n){case"===":return"object"==typeof e&&(e=e.version),"object"==typeof t&&(t=t.version),e===t;case"!==":return"object"==typeof e&&(e=e.version),"object"==typeof t&&(t=t.version),e!==t;case"":case"=":case"==":return((e,n,t)=>0===Met(e,n,t))(e,t,i);case"!=":return((e,n,t)=>0!==ket(e,n,t))(e,t,i);case">":return((e,n,t)=>Ret(e,n,t)>0)(e,t,i);case">=":return((e,n,t)=>Net(e,n,t)>=0)(e,t,i);case"<":return((e,n,t)=>Let(e,n,t)<0)(e,t,i);case"<=":return((e,n,t)=>Bet(e,n,t)<=0)(e,t,i);default:throw new TypeError(`Invalid operator: ${n}`)}};const Yet=function Cue(){if(wue)return q6;wue=1;class e{constructor(E,D){if(D=i(D),E instanceof e)return E.loose===!!D.loose&&E.includePrerelease===!!D.includePrerelease?E:new e(E.raw,D);if(E instanceof r)return this.raw=E.value,this.set=[[E]],this.format(),this;if(this.options=D,this.loose=!!D.loose,this.includePrerelease=!!D.includePrerelease,this.raw=E.trim().split(/\s+/).join(" "),this.set=this.raw.split("||").map(I=>this.parseRange(I.trim())).filter(I=>I.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){const I=this.set[0];if(this.set=this.set.filter(O=>!p(O[0])),0===this.set.length)this.set=[I];else if(this.set.length>1)for(const O of this.set)if(1===O.length&&g(O[0])){this.set=[O];break}}this.format()}format(){return this.range=this.set.map(E=>E.join(" ").trim()).join("||").trim(),this.range}toString(){return this.range}parseRange(E){const I=((this.options.includePrerelease&&f)|(this.options.loose&&h))+":"+E,O=t.get(I);if(O)return O;const T=this.options.loose;E=E.replace(T?a[l.HYPHENRANGELOOSE]:a[l.HYPHENRANGE],N(this.options.includePrerelease)),o("hyphen replace",E),E=E.replace(a[l.COMPARATORTRIM],c),o("comparator trim",E),E=E.replace(a[l.TILDETRIM],u),o("tilde trim",E),E=E.replace(a[l.CARETTRIM],d),o("caret trim",E);let F=E.split(" ").map(U=>_(U,this.options)).join(" ").split(/\s+/).map(U=>M(U,this.options));T&&(F=F.filter(U=>(o("loose invalid filter",U,this.options),!!U.match(a[l.COMPARATORLOOSE])))),o("range list",F);const z=new Map,H=F.map(U=>new r(U,this.options));for(const U of H){if(p(U))return[U];z.set(U.value,U)}z.size>1&&z.has("")&&z.delete("");const j=[...z.values()];return t.set(I,j),j}intersects(E,D){if(!(E instanceof e))throw new TypeError("a Range is required");return this.set.some(I=>m(I,D)&&E.set.some(O=>m(O,D)&&I.every(T=>O.every(R=>T.intersects(R,D)))))}test(E){if(!E)return!1;if("string"==typeof E)try{E=new s(E,this.options)}catch{return!1}for(let D=0;D<this.set.length;D++)if(V(this.set[D],E,this.options))return!0;return!1}}q6=e;const t=new class _et{constructor(n){if("number"==typeof n&&(n={max:n}),n||(n={}),n.max&&("number"!=typeof n.max||n.max<0))throw new TypeError("max must be a non-negative number");this[Zh]=n.max||1/0;const t=n.length||L6;if(this[a0]="function"!=typeof t?L6:t,this[Fv]=n.stale||!1,n.maxAge&&"number"!=typeof n.maxAge)throw new TypeError("maxAge must be a number");this[Jh]=n.maxAge||0,this[Qc]=n.dispose,this[uue]=n.noDisposeOnSet||!1,this[due]=n.updateAgeOnGet||!1,this.reset()}set max(n){if("number"!=typeof n||n<0)throw new TypeError("max must be a non-negative number");this[Zh]=n||1/0,Nv(this)}get max(){return this[Zh]}set allowStale(n){this[Fv]=!!n}get allowStale(){return this[Fv]}set maxAge(n){if("number"!=typeof n)throw new TypeError("maxAge must be a non-negative number");this[Jh]=n,Nv(this)}get maxAge(){return this[Jh]}set lengthCalculator(n){"function"!=typeof n&&(n=L6),n!==this[a0]&&(this[a0]=n,this[Xc]=0,this[Di].forEach(t=>{t.length=this[a0](t.value,t.key),this[Xc]+=t.length})),Nv(this)}get lengthCalculator(){return this[a0]}get length(){return this[Xc]}get itemCount(){return this[Di].length}rforEach(n,t){t=t||this;for(let i=this[Di].tail;null!==i;){const r=i.prev;fue(this,n,i,t),i=r}}forEach(n,t){t=t||this;for(let i=this[Di].head;null!==i;){const r=i.next;fue(this,n,i,t),i=r}}keys(){return this[Di].toArray().map(n=>n.key)}values(){return this[Di].toArray().map(n=>n.value)}reset(){this[Qc]&&this[Di]&&this[Di].length&&this[Di].forEach(n=>this[Qc](n.key,n.value)),this[Va]=new Map,this[Di]=new met,this[Xc]=0}dump(){return this[Di].map(n=>!$T(this,n)&&{k:n.key,v:n.value,e:n.now+(n.maxAge||0)}).toArray().filter(n=>n)}dumpLru(){return this[Di]}set(n,t,i){if((i=i||this[Jh])&&"number"!=typeof i)throw new TypeError("maxAge must be a number");const r=i?Date.now():0,o=this[a0](t,n);if(this[Va].has(n)){if(o>this[Zh])return l0(this,this[Va].get(n)),!1;const l=this[Va].get(n).value;return this[Qc]&&(this[uue]||this[Qc](n,l.value)),l.now=r,l.maxAge=i,l.value=t,this[Xc]+=o-l.length,l.length=o,this.get(n),Nv(this),!0}const s=new yet(n,t,o,r,i);return s.length>this[Zh]?(this[Qc]&&this[Qc](n,t),!1):(this[Xc]+=s.length,this[Di].unshift(s),this[Va].set(n,this[Di].head),Nv(this),!0)}has(n){if(!this[Va].has(n))return!1;const t=this[Va].get(n).value;return!$T(this,t)}get(n){return $6(this,n,!0)}peek(n){return $6(this,n,!1)}pop(){const n=this[Di].tail;return n?(l0(this,n),n.value):null}del(n){l0(this,this[Va].get(n))}load(n){this.reset();const t=Date.now();for(let i=n.length-1;i>=0;i--){const r=n[i],o=r.e||0;if(0===o)this.set(r.k,r.v);else{const s=o-t;s>0&&this.set(r.k,r.v,s)}}}prune(){this[Va].forEach((n,t)=>$6(this,t,!1))}}({max:1e3}),i=B6,r=function Ket(){if(bue)return j6;bue=1;const e=Symbol("SemVer ANY");class n{static get ANY(){return e}constructor(u,d){if(d=t(d),u instanceof n){if(u.loose===!!d.loose)return u;u=u.value}u=u.trim().split(/\s+/).join(" "),s("comparator",u,d),this.options=d,this.loose=!!d.loose,this.parse(u),this.value=this.semver===e?"":this.operator+this.semver.version,s("comp",this)}parse(u){const f=u.match(this.options.loose?i[r.COMPARATORLOOSE]:i[r.COMPARATOR]);if(!f)throw new TypeError(`Invalid comparator: ${u}`);this.operator=void 0!==f[1]?f[1]:"","="===this.operator&&(this.operator=""),this.semver=f[2]?new a(f[2],this.options.loose):e}toString(){return this.value}test(u){if(s("Comparator.test",u,this.options.loose),this.semver===e||u===e)return!0;if("string"==typeof u)try{u=new a(u,this.options)}catch{return!1}return o(u,this.operator,this.semver,this.options)}intersects(u,d){if(!(u instanceof n))throw new TypeError("a Comparator is required");return""===this.operator?""===this.value||new l(u.value,d).test(this.value):""===u.operator?""===u.value||new l(this.value,d).test(u.semver):!((d=t(d)).includePrerelease&&("<0.0.0-0"===this.value||"<0.0.0-0"===u.value)||!d.includePrerelease&&(this.value.startsWith("<0.0.0")||u.value.startsWith("<0.0.0"))||!(this.operator.startsWith(">")&&u.operator.startsWith(">")||this.operator.startsWith("<")&&u.operator.startsWith("<")||this.semver.version===u.semver.version&&this.operator.includes("=")&&u.operator.includes("=")||o(this.semver,"<",u.semver,d)&&this.operator.startsWith(">")&&u.operator.startsWith("<")||o(this.semver,">",u.semver,d)&&this.operator.startsWith("<")&&u.operator.startsWith(">")))}}j6=n;const t=B6,{safeRe:i,t:r}=U6,o=Get,s=BT,a=H6,l=Cue();return j6}(),o=BT,s=H6,{safeRe:a,t:l,comparatorTrimReplace:c,tildeTrimReplace:u,caretTrimReplace:d}=U6,{FLAG_INCLUDE_PRERELEASE:f,FLAG_LOOSE:h}=z6,p=P=>"<0.0.0-0"===P.value,g=P=>""===P.value,m=(P,E)=>{let D=!0;const I=P.slice();let O=I.pop();for(;D&&I.length;)D=I.every(T=>O.intersects(T,E)),O=I.pop();return D},_=(P,E)=>(o("comp",P,E),P=w(P,E),o("caret",P),P=v(P,E),o("tildes",P),P=C(P,E),o("xrange",P),P=A(P,E),o("stars",P),P),y=P=>!P||"x"===P.toLowerCase()||"*"===P,v=(P,E)=>P.trim().split(/\s+/).map(D=>b(D,E)).join(" "),b=(P,E)=>P.replace(E.loose?a[l.TILDELOOSE]:a[l.TILDE],(I,O,T,R,F)=>{let z;return o("tilde",P,I,O,T,R,F),y(O)?z="":y(T)?z=`>=${O}.0.0 <${+O+1}.0.0-0`:y(R)?z=`>=${O}.${T}.0 <${O}.${+T+1}.0-0`:F?(o("replaceTilde pr",F),z=`>=${O}.${T}.${R}-${F} <${O}.${+T+1}.0-0`):z=`>=${O}.${T}.${R} <${O}.${+T+1}.0-0`,o("tilde return",z),z}),w=(P,E)=>P.trim().split(/\s+/).map(D=>x(D,E)).join(" "),x=(P,E)=>{o("caret",P,E);const I=E.includePrerelease?"-0":"";return P.replace(E.loose?a[l.CARETLOOSE]:a[l.CARET],(O,T,R,F,z)=>{let H;return o("caret",P,O,T,R,F,z),y(T)?H="":y(R)?H=`>=${T}.0.0${I} <${+T+1}.0.0-0`:y(F)?H="0"===T?`>=${T}.${R}.0${I} <${T}.${+R+1}.0-0`:`>=${T}.${R}.0${I} <${+T+1}.0.0-0`:z?(o("replaceCaret pr",z),H="0"===T?"0"===R?`>=${T}.${R}.${F}-${z} <${T}.${R}.${+F+1}-0`:`>=${T}.${R}.${F}-${z} <${T}.${+R+1}.0-0`:`>=${T}.${R}.${F}-${z} <${+T+1}.0.0-0`):(o("no pr"),H="0"===T?"0"===R?`>=${T}.${R}.${F}${I} <${T}.${R}.${+F+1}-0`:`>=${T}.${R}.${F}${I} <${T}.${+R+1}.0-0`:`>=${T}.${R}.${F} <${+T+1}.0.0-0`),o("caret return",H),H})},C=(P,E)=>(o("replaceXRanges",P,E),P.split(/\s+/).map(D=>S(D,E)).join(" ")),S=(P,E)=>(P=P.trim()).replace(E.loose?a[l.XRANGELOOSE]:a[l.XRANGE],(I,O,T,R,F,z)=>{o("xRange",P,I,O,T,R,F,z);const H=y(T),j=H||y(R),U=j||y(F);return"="===O&&U&&(O=""),z=E.includePrerelease?"-0":"",H?I=">"===O||"<"===O?"<0.0.0-0":"*":O&&U?(j&&(R=0),F=0,">"===O?(O=">=",j?(T=+T+1,R=0,F=0):(R=+R+1,F=0)):"<="===O&&(O="<",j?T=+T+1:R=+R+1),"<"===O&&(z="-0"),I=`${O+T}.${R}.${F}${z}`):j?I=`>=${T}.0.0${z} <${+T+1}.0.0-0`:U&&(I=`>=${T}.${R}.0${z} <${T}.${+R+1}.0-0`),o("xRange return",I),I}),A=(P,E)=>(o("replaceStars",P,E),P.trim().replace(a[l.STAR],"")),M=(P,E)=>(o("replaceGTE0",P,E),P.trim().replace(a[E.includePrerelease?l.GTE0PRE:l.GTE0],"")),N=P=>(E,D,I,O,T,R,F,z,H,j,U,Q,ue)=>`${D=y(I)?"":y(O)?`>=${I}.0.0${P?"-0":""}`:y(T)?`>=${I}.${O}.0${P?"-0":""}`:R?`>=${D}`:`>=${D}${P?"-0":""}`} ${z=y(H)?"":y(j)?`<${+H+1}.0.0-0`:y(U)?`<${H}.${+j+1}.0-0`:Q?`<=${H}.${j}.${U}-${Q}`:P?`<${H}.${j}.${+U+1}-0`:`<=${z}`}`.trim(),V=(P,E,D)=>{for(let I=0;I<P.length;I++)if(!P[I].test(E))return!1;if(E.prerelease.length&&!D.includePrerelease){for(let I=0;I<P.length;I++)if(o(P[I].semver),P[I].semver!==r.ANY&&P[I].semver.prerelease.length>0){const O=P[I].semver;if(O.major===E.major&&O.minor===E.minor&&O.patch===E.patch)return!0}return!1}return!0};return q6}();var Xet=(e,n,t)=>{try{n=new Yet(n,t)}catch{return!1}return n.test(e)},xue=uet(Xet),Zet='.vega-embed {\n  position: relative;\n  display: inline-block;\n  box-sizing: border-box;\n}\n.vega-embed.has-actions {\n  padding-right: 38px;\n}\n.vega-embed details:not([open]) > :not(summary) {\n  display: none !important;\n}\n.vega-embed summary {\n  list-style: none;\n  position: absolute;\n  top: 0;\n  right: 0;\n  padding: 6px;\n  z-index: 1000;\n  background: white;\n  box-shadow: 1px 1px 3px rgba(0, 0, 0, 0.1);\n  color: #1b1e23;\n  border: 1px solid #aaa;\n  border-radius: 999px;\n  opacity: 0.2;\n  transition: opacity 0.4s ease-in;\n  cursor: pointer;\n  line-height: 0px;\n}\n.vega-embed summary::-webkit-details-marker {\n  display: none;\n}\n.vega-embed summary:active {\n  box-shadow: #aaa 0px 0px 0px 1px inset;\n}\n.vega-embed summary svg {\n  width: 14px;\n  height: 14px;\n}\n.vega-embed details[open] summary {\n  opacity: 0.7;\n}\n.vega-embed:hover summary, .vega-embed:focus-within summary {\n  opacity: 1 !important;\n  transition: opacity 0.2s ease;\n}\n.vega-embed .vega-actions {\n  position: absolute;\n  z-index: 1001;\n  top: 35px;\n  right: -9px;\n  display: flex;\n  flex-direction: column;\n  padding-bottom: 8px;\n  padding-top: 8px;\n  border-radius: 4px;\n  box-shadow: 0 2px 8px 0 rgba(0, 0, 0, 0.2);\n  border: 1px solid #d9d9d9;\n  background: white;\n  animation-duration: 0.15s;\n  animation-name: scale-in;\n  animation-timing-function: cubic-bezier(0.2, 0, 0.13, 1.5);\n  text-align: left;\n}\n.vega-embed .vega-actions a {\n  padding: 8px 16px;\n  font-family: sans-serif;\n  font-size: 14px;\n  font-weight: 600;\n  white-space: nowrap;\n  color: #434a56;\n  text-decoration: none;\n}\n.vega-embed .vega-actions a:hover, .vega-embed .vega-actions a:focus {\n  background-color: #f7f7f9;\n  color: black;\n}\n.vega-embed .vega-actions::before, .vega-embed .vega-actions::after {\n  content: "";\n  display: inline-block;\n  position: absolute;\n}\n.vega-embed .vega-actions::before {\n  left: auto;\n  right: 14px;\n  top: -16px;\n  border: 8px solid rgba(0, 0, 0, 0);\n  border-bottom-color: #d9d9d9;\n}\n.vega-embed .vega-actions::after {\n  left: auto;\n  right: 15px;\n  top: -14px;\n  border: 7px solid rgba(0, 0, 0, 0);\n  border-bottom-color: #fff;\n}\n.vega-embed .chart-wrapper.fit-x {\n  width: 100%;\n}\n.vega-embed .chart-wrapper.fit-y {\n  height: 100%;\n}\n\n.vega-embed-wrapper {\n  max-width: 100%;\n  overflow: auto;\n  padding-right: 14px;\n}\n\n@keyframes scale-in {\n  from {\n    opacity: 0;\n    transform: scale(0.6);\n  }\n  to {\n    opacity: 1;\n    transform: scale(1);\n  }\n}\n';function Eue(e,...n){for(const t of n)Jet(e,t);return e}function Jet(e,n){for(const t of Object.keys(n))Cg(e,t,n[t],!0)}function Sue(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,i)}return t}function Bd(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?Sue(Object(t),!0).forEach(function(i){cet(e,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Sue(Object(t)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(t,i))})}return e}const Wl=Kd;let Pv=xo;const Tue=typeof window<"u"?window:void 0;void 0===Pv&&Tue?.vl?.compile&&(Pv=Tue.vl);const Ctt={export:{svg:!0,png:!0},source:!0,compiled:!0,editor:!0},xtt={CLICK_TO_VIEW_ACTIONS:"Click to view actions",COMPILED_ACTION:"View Compiled Vega",EDITOR_ACTION:"Open in Vega Editor",PNG_ACTION:"Save as PNG",SOURCE_ACTION:"View Source",SVG_ACTION:"Save as SVG"},Lv={vega:"Vega","vega-lite":"Vega-Lite"},UT={vega:Wl.version,"vega-lite":Pv?Pv.version:"not available"},Ett={vega:e=>e,"vega-lite":(e,n)=>Pv.compile(e,{config:n}).spec},Stt='\n<svg viewBox="0 0 16 16" fill="currentColor" stroke="none" stroke-width="1" stroke-linecap="round" stroke-linejoin="round">\n  <circle r="2" cy="8" cx="2"></circle>\n  <circle r="2" cy="8" cx="8"></circle>\n  <circle r="2" cy="8" cx="14"></circle>\n</svg>',Ttt="chart-wrapper";function Due(e,n,t,i){const r=`<html><head>${n}</head><body><pre><code class="json">`,o=`</code></pre>${t}</body></html>`,s=window.open("");s.document.write(r+e+o),s.document.title=`${Lv[i]} JSON Source`}function Iue(e){return function Mtt(e){return!(!e||!("load"in e))}(e)?e:Wl.loader(e)}function ep(e,n){return W6.apply(this,arguments)}function W6(){return W6=Re(function*(e,n,t={}){let i,r;xe(n)?(r=Iue(t.loader),i=JSON.parse(yield r.load(n))):i=n;const o=function Att(e){const n=e.usermeta?.embedOptions??{};return xe(n.defaultStyle)&&(n.defaultStyle=!1),n}(i),s=o.loader;(!r||s)&&(r=Iue(t.loader??s));const a=yield Mue(o,r),l=yield Mue(t,r),c=Bd(Bd({},Eue(l,a)),{},{config:wg(l.config??{},a.config??{})});return yield function Ott(e,n){return K6.apply(this,arguments)}(e,i,c,r)}),W6.apply(this,arguments)}function Mue(e,n){return G6.apply(this,arguments)}function G6(){return G6=Re(function*(e,n){const t=xe(e.config)?JSON.parse(yield n.load(e.config)):e.config??{},i=xe(e.patch)?JSON.parse(yield n.load(e.patch)):e.patch;return Bd(Bd(Bd({},e),i?{patch:i}:{}),t?{config:t}:{})}),G6.apply(this,arguments)}function K6(){return K6=Re(function*(e,n,t={},i){const r=t.theme?wg(eu[t.theme],t.config??{}):t.config,o=Iu(t.actions)?t.actions:Eue({},Ctt,t.actions??{}),s=Bd(Bd({},xtt),t.i18n),a=t.renderer??"canvas",l=t.logLevel??Wl.Warn,c=t.downloadFileName??"visualization",u="string"==typeof e?document.querySelector(e):e;if(!u)throw new Error(`${e} does not exist`);if(!1!==t.defaultStyle){const w="vega-embed-style",{root:x,rootContainer:C}=function ktt(e){const n=e.getRootNode?e.getRootNode():document;return n instanceof ShadowRoot?{root:n,rootContainer:n}:{root:document,rootContainer:document.head??document.body}}(u);if(!x.getElementById(w)){const S=document.createElement("style");S.id=w,S.innerHTML=void 0===t.defaultStyle||!0===t.defaultStyle?Zet.toString():t.defaultStyle,C.appendChild(S)}}const d=function Itt(e,n){if(e.$schema){const t=Vce(e.$schema);n&&n!==t.library&&console.warn(`The given visualization spec is written in ${Lv[t.library]}, but mode argument sets ${Lv[n]??n}.`);const i=t.library;return xue(UT[i],`^${t.version.slice(1)}`)||console.warn(`The input spec uses ${Lv[i]} ${t.version}, but the current version of ${Lv[i]} is v${UT[i]}.`),i}return"mark"in e||"encoding"in e||"layer"in e||"hconcat"in e||"vconcat"in e||"facet"in e||"repeat"in e?"vega-lite":"marks"in e||"signals"in e||"scales"in e||"axes"in e?"vega":n??"vega"}(n,t.mode);let f=Ett[d](n,r);if("vega-lite"===d&&f.$schema){const w=Vce(f.$schema);xue(UT.vega,`^${w.version.slice(1)}`)||console.warn(`The compiled spec uses Vega ${w.version}, but current version is v${UT.vega}.`)}u.classList.add("vega-embed"),o&&u.classList.add("has-actions"),u.innerHTML="";let h=u;if(o){const w=document.createElement("div");w.classList.add(Ttt),u.appendChild(w),h=w}const p=t.patch;if(p&&(f=p instanceof Function?p(f):OC(f,p,!0,!1).newDocument),t.formatLocale&&Wl.formatLocale(t.formatLocale),t.timeFormatLocale&&Wl.timeFormatLocale(t.timeFormatLocale),t.expressionFunctions)for(const w in t.expressionFunctions){const x=t.expressionFunctions[w];"fn"in x?Wl.expressionFunction(w,x.fn,x.visitor):x instanceof Function&&Wl.expressionFunction(w,x)}const{ast:g}=t,m=Wl.parse(f,"vega-lite"===d?{}:r,{ast:g}),_=new(t.viewClass||Wl.View)(m,Bd({loader:i,logLevel:l,renderer:a},g?{expr:Wl.expressionInterpreter??t.expr??yje}:{}));if(_.addSignalListener("autosize",(w,x)=>{const{type:C}=x;"fit-x"==C?(h.classList.add("fit-x"),h.classList.remove("fit-y")):"fit-y"==C?(h.classList.remove("fit-x"),h.classList.add("fit-y")):"fit"==C?h.classList.add("fit-x","fit-y"):h.classList.remove("fit-x","fit-y")}),!1!==t.tooltip){const w=function Dtt(e){return"function"==typeof e}(t.tooltip)?t.tooltip:new lue(!0===t.tooltip?{}:t.tooltip).call;_.tooltip(w)}let v,{hover:y}=t;if(void 0===y&&(y="vega"===d),y){const{hoverSet:w,updateSet:x}="boolean"==typeof y?{}:y;_.hover(w,x)}if(t&&(null!=t.width&&_.width(t.width),null!=t.height&&_.height(t.height),null!=t.padding&&_.padding(t.padding)),yield _.initialize(h,t.bind).runAsync(),!1!==o){let w=u;if(!1!==t.defaultStyle||t.forceActionsMenu){const C=document.createElement("details");C.title=s.CLICK_TO_VIEW_ACTIONS,u.append(C),w=C;const S=document.createElement("summary");S.innerHTML=Stt,C.append(S),v=A=>{C.contains(A.target)||C.removeAttribute("open")},document.addEventListener("click",v)}const x=document.createElement("div");if(w.append(x),x.classList.add("vega-actions"),!0===o||!1!==o.export)for(const C of["svg","png"])if(!0===o||!0===o.export||o.export[C]){const S=s[`${C.toUpperCase()}_ACTION`],A=document.createElement("a"),M=Ee(t.scaleFactor)?t.scaleFactor[C]:t.scaleFactor;A.text=S,A.href="#",A.target="_blank",A.download=`${c}.${C}`,A.addEventListener("mousedown",function(){var N=Re(function*(V){V.preventDefault();const P=yield _.toImageURL(C,M);this.href=P});return function(V){return N.apply(this,arguments)}}()),x.append(A)}if(!0===o||!1!==o.source){const C=document.createElement("a");C.text=s.SOURCE_ACTION,C.href="#",C.addEventListener("click",function(S){Due(tO()(n),t.sourceHeader??"",t.sourceFooter??"",d),S.preventDefault()}),x.append(C)}if("vega-lite"===d&&(!0===o||!1!==o.compiled)){const C=document.createElement("a");C.text=s.COMPILED_ACTION,C.href="#",C.addEventListener("click",function(S){Due(tO()(f),t.sourceHeader??"",t.sourceFooter??"","vega"),S.preventDefault()}),x.append(C)}if(!0===o||!1!==o.editor){const C=t.editorUrl??"https://vega.github.io/editor/",S=document.createElement("a");S.text=s.EDITOR_ACTION,S.href="#",S.addEventListener("click",function(A){(function Qet(e,n,t){const i=e.open(n),{origin:s}=new URL(n);let a=40;e.addEventListener("message",function l(u){u.source===i&&(a=0,e.removeEventListener("message",l,!1))},!1),setTimeout(function c(){a<=0||(i.postMessage(t,s),setTimeout(c,250),a-=1)},250)})(window,C,{config:r,mode:d,renderer:a,spec:tO()(n)}),A.preventDefault()}),x.append(S)}}return{view:_,spec:n,vgSpec:f,finalize:function b(){v&&document.removeEventListener("click",v),_.finalize()},embedOptions:t}}),K6.apply(this,arguments)}class Y6{constructor(n,t,i,r,o,s,a,l,c,u,d,f){this.siglaUfEmit=n,this.siglaUfDest=t,this.descUfEmit=i,this.descUfDest=r,this.siglaRegiaoEmit=o,this.siglaRegiaoDest=s,this.descRegiaoEmit=a,this.descRegiaoDest=l,this.segmentoEmit=c,this.segmentoDest=u,this.qtdeNotas=d,this.valorTotal=f}}class Rtt{constructor(n,t,i,r,o,s,a,l,c,u,d,f,h,p,g){this.TIPO_EMISSAO_ENTRADA="ENTRADA",this.TIPO_EMISSAO_SAIDA="SAIDA",this.tipoEmissao=n,this.siglaUfEmit=t,this.siglaUfDest=r,this.descUfEmit=i,this.descUfDest=o,this.siglaRegiaoEmit=s,this.siglaRegiaoDest=l,this.descRegiaoEmit=a,this.descRegiaoDest=c,this.codNcm2=u,this.descNsm2=d,this.codNcm4=f,this.descNsm4=h,this.qtdeNotas=p,this.valorTotal=g}isTipoEmissaoSaida(){return this.tipoEmissao==this.TIPO_EMISSAO_SAIDA}isTipoEmissaoEntrada(){return this.tipoEmissao==this.TIPO_EMISSAO_ENTRADA}setDscUfEmit(n){this.descUfEmit=n}setDscUfDest(n){this.descUfDest=n}}function tp(e,n){const t="object"==typeof n;return new Promise((i,r)=>{let s,o=!1;e.subscribe({next:a=>{s=a,o=!0},error:r,complete:()=>{o?i(s):t?i(n.defaultValue):r(new O_)}})})}let X6=(()=>{class e{constructor(t){this.http=t,this.uf_dict={AC:"Acre",AL:"Alagoas",AM:"Amazonas",AP:"Amap\xe1",BA:"Bahia",CE:"Cear\xe1",DF:"DF",ES:"Esp\xedrito Santo",GO:"Goi\xe1s",MA:"Maranh\xe3o",MG:"Minas Gerais",MT:"Mato Grosso",MS:"Mato Grosso do Sul",PA:"Par\xe1",PB:"Para\xedba",PE:"Pernambuco",PI:"Piau\xed",PR:"Paran\xe1",RJ:"Rio de Janeiro",RO:"Rond\xf4nia",RN:"Rio Grande do Norte",RR:"Roraima",RS:"Rio Grande do Sul",SC:"Santa Catarina",SE:"Sergipe",SP:"S\xe3o Paulo",TO:"Tocantins"},this.httpClient=t}getData(){var t=this;return Re(function*(){let i=[],o=(yield tp(t.http.get("assets/uf_segmento2.csv",{responseType:"text"}))).split("\n");for(let s=1;s<o.length-1;s++){let a=o[s].split(",");i.push(new Y6(a[0],a[1],a[2],a[3],a[4],a[5],a[6],a[7],a[8],a[9],parseInt(a[10]),parseFloat(a[11])))}return i})()}getSegmentoEmitente(){var t=this;return Re(function*(){let r=(yield Promise.resolve(t.getData())).reduce((o,s)=>{let a=o.filter(l=>l.SEGMENTO_ECONOMICO==s.segmentoEmit);if(a.length>0)a[0].TOTAL_VLR+=s.valorTotal,a[0].TOTAL_VLR=Math.round(100*a[0].TOTAL_VLR)/100;else if("CE"==s.siglaUfEmit){let l={SEGMENTO_ECONOMICO:s.segmentoEmit,TOTAL_VLR:Math.round(100*s.valorTotal)/100};o.push(l)}return o},[]);return r.sort((o,s)=>s.TOTAL_VLR-o.TOTAL_VLR),r})()}getSegmentoDestinatario(){var t=this;return Re(function*(){let r=(yield Promise.resolve(t.getData())).reduce((o,s)=>{let a=o.filter(l=>l.SEGMENTO_ECONOMICO==s.segmentoDest);if(a.length>0)a[0].TOTAL_VLR+=s.valorTotal,a[0].TOTAL_VLR=Math.round(100*a[0].TOTAL_VLR)/100;else if("CE"==s.siglaUfDest){let l={SEGMENTO_ECONOMICO:s.segmentoDest,TOTAL_VLR:Math.round(100*s.valorTotal)/100};o.push(l)}return o},[]);return r.sort((o,s)=>s.TOTAL_VLR-o.TOTAL_VLR),r})()}getUfEmitente(){var t=this;return Re(function*(){let r=(yield Promise.resolve(t.getData())).reduce((o,s)=>{let a=o.filter(l=>l.SIGLA_UF==s.siglaUfEmit);if(a.length>0)a[0].TOTAL_VLR+=s.valorTotal,a[0].TOTAL_VLR=Math.round(100*a[0].TOTAL_VLR)/100;else if("CE"!=s.siglaUfEmit){let l={SIGLA_UF:s.siglaUfEmit,NOME_UF:t.uf_dict[s.siglaUfEmit],TOTAL_VLR:Math.round(100*s.valorTotal)/100};o.push(l)}return o},[]);return r.sort((o,s)=>s.TOTAL_VLR-o.TOTAL_VLR),r})()}getUfDestinario(){var t=this;return Re(function*(){let r=(yield Promise.resolve(t.getData())).reduce((o,s)=>{let a=o.filter(l=>l.SIGLA_UF==s.siglaUfDest);if(a.length>0)a[0].TOTAL_VLR+=s.valorTotal,a[0].TOTAL_VLR=Math.round(100*a[0].TOTAL_VLR)/100;else if("CE"!=s.siglaUfDest){let l={SIGLA_UF:s.siglaUfDest,NOME_UF:t.uf_dict[s.siglaUfDest],TOTAL_VLR:Math.round(100*s.valorTotal)/100};o.push(l)}return o},[]);return r.sort((o,s)=>s.TOTAL_VLR-o.TOTAL_VLR),r})()}getUfSegmentoList(){var t=this;return Re(function*(){return Promise.resolve(t.getData())})()}getUfNcmList(){var t=this;return Re(function*(){let i=[],o=(yield tp(t.http.get("assets/nota_emit_dest_total_produto_ncm4.csv",{responseType:"text"}))).split("\n");for(let s=1;s<o.length-1;s++){let a=o[s].split("|"),l=new Rtt(a[0],a[1],a[2],a[3],a[4],a[5],a[6],a[7],a[8],a[9],a[10],a[11],a[12],parseInt(a[13]),parseFloat(a[14])),u=t.uf_dict[l.siglaUfDest];l.setDscUfEmit(t.uf_dict[l.siglaUfEmit]),l.setDscUfDest(u),i.push(l)}return i})()}getUfNcmSaidaList(){var t=this;return Re(function*(){return(yield t.getUfNcmList()).filter(o=>o.isTipoEmissaoSaida())})()}getUfNcmEntradaList(){var t=this;return Re(function*(){return(yield t.getUfNcmList()).filter(o=>o.isTipoEmissaoEntrada())})()}static#e=this.\u0275fac=function(i){return new(i||e)(Me(A_))};static#t=this.\u0275prov=Oe({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();class Ftt{constructor(n,t,i,r,o,s,a,l,c,u,d,f,h,p){this.diaEmissao=n,this.tipoEmissao=t,this.siglaUfEmit=i,this.siglaUfDest=o,this.dscUfEmit=r,this.dscUfDest=s,this.siglaRegiaoEmit=a,this.siglaRegiaoDest=c,this.dscRegiaoEmit=l,this.dscRegiaoDest=u,this.segmentoEmit=d,this.segmentoDest=f,this.qtdeNotas=h,this.valorTotal=p}}let Ntt=(()=>{class e{constructor(t){this.http=t,this.httpClient=t}getNotaDiaList(){var t=this;return Re(function*(){const i=yield tp(t.http.get("assets/notas_dia2.csv",{responseType:"text"}));return t.processarCsvNotaDia(i)})()}processarCsvNotaDia(t){let i=[],r=t.split("\n");for(let o=1;o<r.length-1;o++){let s=r[o].split(",");i.push(new Ftt(s[0],s[1],s[2],s[3],s[4],s[5],s[6],s[7],s[8],s[9],s[10],s[11],parseInt(s[12]),parseFloat(s[13])))}return i}static#e=this.\u0275fac=function(i){return new(i||e)(Me(A_))};static#t=this.\u0275prov=Oe({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),Ptt=(()=>{class e{constructor(t,i){this.ufSegmentoService=t,this.notaDiaService=i,this.tipoEmissaoSelecionado="ENTRADA",this.generateVisaoGeralDashBoard()}generateVisaoGeralDashBoard(){var t=this;return Re(function*(){t.notaDiaData||(t.notaDiaData=yield t.notaDiaService.getNotaDiaList()),t.ufData||(t.ufData=yield t.ufSegmentoService.getUfSegmentoList());const i=t.getSpecQtdeNotasEmitidasLineGraph(),r=t.getSpecTotalNotasEmitidasLineGraph(),a=t.getSpecUfBarGraph("UFs Emitentes","datum.siglaUfEmit!='CE'","siglaUfEmit","dscUfEmit","UfEmit","(!isValid(selectBarFieldUfEmit.siglaUfEmit) || (datum.siglaUfEmit == selectBarFieldUfEmit.siglaUfEmit)) && (!isValid(selectBarFieldUfDest.siglaUfDest) || (datum.siglaUfEmit == selectBarFieldUfDest.siglaUfDest))"),l=t.getSpecUfBarGraph("UFs Destinat\xe1rias","datum.siglaUfDest!='CE'","siglaUfDest","dscUfDest","UfDest","(!isValid(selectBarFieldUfDest.siglaUfDest) || (datum.siglaUfDest == selectBarFieldUfDest.siglaUfDest)) && (!isValid(selectBarFieldUfEmit.siglaUfEmit) || (datum.siglaUfDest == selectBarFieldUfEmit.siglaUfEmit))");t.createVegaView({$schema:"https://vega.github.io/schema/vega-lite/v5.json",description:"Gr\xe1ficos de Notas Emitidas ao Longo do M\xeas.",params:[{name:"tipoEmissaoSelecionado",value:t.tipoEmissaoSelecionado}],vconcat:[i,r,{hconcat:[a,l],resolve:{scale:{color:"independent"}}}],width:800})})()}createVegaView(t){ep("#visao-geral-dashboard",t).then(r=>{this.addDataListenerSelectLineQtdeNotas(r.view),this.addDataListenerSelectLineTotalNotas(r.view),this.addDataListenerSelectBarEmit(r.view),this.addDataListenerSelectBarDest(r.view)})}getSpecQtdeNotasEmitidasLineGraph(){return{title:"Quantidade de Notas Emitidas ao Longo do M\xeas",data:{name:"notaDiaDataQtdeNotas",values:this.notaDiaData},transform:[{filter:"datum.tipoEmissao!='INTERNA'"},{timeUnit:"date",field:"diaEmissao",as:"diaDoMes"}],layer:[{params:[{name:"highlightLineQtdeNotas",select:{type:"point",on:"pointerover",encodings:["x","color"]}},{name:"selectLineQtdeNotasFields",select:{type:"point",fields:["diaEmissao","tipoEmissao"],toggle:!1}},{name:"selectLineQtdeNotasEncodings",select:{type:"point",encodings:["x","color"],toggle:!1}}],mark:{type:"point",filled:!1,fill:"white"},encoding:{x:{timeUnit:"date",field:"diaDoMes",type:"temporal",title:"Dia de Emiss\xe3o"},y:{aggregate:"sum",field:"qtdeNotas",type:"quantitative",title:"Total"},color:{field:"tipoEmissao",type:"nominal",title:"Tipo de Emiss\xe3o"},size:{condition:[{param:"selectLineTotalNotasEncodings",empty:!1,value:160},{param:"selectLineQtdeNotasEncodings",empty:!1,value:160},{param:"highlightLineTotalNotas",empty:!1,value:160},{param:"highlightLineQtdeNotas",empty:!1,value:160}],value:70},strokeOpacity:{condition:{test:{or:[{and:[{param:"selectLineQtdeNotasEncodings",empty:!1},{param:"selectLineTotalNotasEncodings"}]},{and:[{param:"selectLineQtdeNotasEncodings"},{param:"selectLineTotalNotasEncodings"}]}]},value:1},value:.3},tooltip:[{field:"diaEmissao",type:"temporal",timeUnit:"yearmonthdate",title:"Data de Emiss\xe3o"},{field:"tipoEmissao",type:"nominal",title:"Tipo de Emiss\xe3o"},{aggregate:"sum",field:"qtdeNotas",type:"quantitative",format:",.0f",title:"Total"}]}},{mark:{type:"line"},encoding:{x:{timeUnit:"date",field:"diaDoMes",type:"temporal",title:"Dia de Emiss\xe3o",axis:{tickCount:{interval:"day",step:1}}},y:{aggregate:"sum",field:"qtdeNotas",type:"quantitative",title:"Qtde de Notas"},color:{field:"tipoEmissao",type:"nominal",title:"Tipo de Emiss\xe3o"},strokeOpacity:{condition:{test:{or:[{and:[{param:"selectLineQtdeNotasFields",empty:!1},{param:"selectLineTotalNotasFields"}]},{and:[{param:"selectLineQtdeNotasFields"},{param:"selectLineTotalNotasFields"}]}]},value:1},value:.3}}}],width:780}}getSpecTotalNotasEmitidasLineGraph(){return{title:"ValorTotal de Notas Emitidas ao Longo do M\xeas",data:{name:"notaDiaDataValorTotal",values:this.notaDiaData},transform:[{filter:"datum.tipoEmissao!='INTERNA'"},{timeUnit:"date",field:"diaEmissao",as:"diaDoMes"}],layer:[{params:[{name:"highlightLineTotalNotas",select:{type:"point",on:"pointerover",encodings:["x","color"]}},{name:"selectLineTotalNotasFields",select:{type:"point",fields:["diaEmissao","tipoEmissao"],toggle:!1}},{name:"selectLineTotalNotasEncodings",select:{type:"point",encodings:["x","color"],toggle:!1}}],mark:{type:"point",filled:!1,fill:"white"},encoding:{x:{timeUnit:"date",field:"diaDoMes",type:"temporal",title:"Dia de Emiss\xe3o"},y:{aggregate:"sum",field:"valorTotal",type:"quantitative",title:"Valor Total"},color:{field:"tipoEmissao",type:"nominal",title:"Tipo de Emiss\xe3o"},size:{condition:[{param:"selectLineTotalNotasEncodings",empty:!1,value:160},{param:"selectLineQtdeNotasEncodings",empty:!1,value:160},{param:"highlightLineTotalNotas",empty:!1,value:160},{param:"highlightLineQtdeNotas",empty:!1,value:160}],value:70},strokeOpacity:{condition:{test:{or:[{and:[{param:"selectLineTotalNotasEncodings",empty:!1},{param:"selectLineQtdeNotasEncodings"}]},{and:[{param:"selectLineTotalNotasEncodings"},{param:"selectLineQtdeNotasEncodings"}]}]},value:1},value:.3},tooltip:[{field:"diaEmissao",type:"temporal",timeUnit:"yearmonthdate",title:"Data de Emiss\xe3o"},{field:"tipoEmissao",type:"nominal",title:"Tipo de Emiss\xe3o"},{aggregate:"sum",field:"valorTotal",type:"quantitative",format:",.2f",title:"Valor Total"}]}},{mark:{type:"line"},encoding:{x:{timeUnit:"date",field:"diaDoMes",type:"temporal",title:"Dia de Emiss\xe3o",axis:{tickCount:{interval:"day",step:1}}},y:{aggregate:"sum",field:"valorTotal",type:"quantitative",title:"Qtde de Notas"},color:{field:"tipoEmissao",type:"nominal",title:"Tipo de Emiss\xe3o"},strokeOpacity:{condition:{test:{or:[{and:[{param:"selectLineTotalNotasFields",empty:!1},{param:"selectLineQtdeNotasFields"}]},{and:[{param:"selectLineTotalNotasFields"},{param:"selectLineQtdeNotasFields"}]}]},value:1},value:.3}}}],width:780}}getSpecUfBarGraph(t,i,r,o,s,a){let l="",c="";return"UfEmit"==s?(l="(datum.siglaUfEmit == selectBarFieldUfEmit.siglaUfEmit) || (datum.siglaUfEmit == selectBarFieldUfDest.siglaUfDest)",c="(datum.siglaUfEmit == highlightBarFieldUfEmit.siglaUfEmit) || (datum.siglaUfEmit == highlightBarFieldUfDest.siglaUfDest)"):(l="(datum.siglaUfDest == selectBarFieldUfDest.siglaUfDest) || (datum.siglaUfDest == selectBarFieldUfEmit.siglaUfEmit)",c="(datum.siglaUfDest == highlightBarFieldUfDest.siglaUfDest) || (datum.siglaUfDest == highlightBarFieldUfEmit.siglaUfEmit)"),{$schema:"https://vega.github.io/schema/vega-lite/v5.json",description:"Gr\xe1fico de Barras de UFs Emitentes/Destinat\xe1rias",title:t,data:{name:"notaDia"+s,values:this.notaDiaData},transform:[{filter:i},{joinaggregate:[{op:"sum",field:"valorTotal",as:"valorTotalUf"}],groupby:[r]},{window:[{op:"row_number",as:"rowNumber"}],groupby:["valorTotalUf"],sort:[{field:"valorTotalUf",order:"descending"}]},{filter:{field:"rowNumber",equal:1}},{joinaggregate:[{op:"max",field:"valorTotalUf",as:"maxValorTotalUf"}]},{calculate:"(datum.valorTotalUf/datum.maxValorTotalUf)>0.6?-35:5",as:"xOffSet"}],encoding:{x:{field:"valorTotalUf",type:"quantitative",title:"Valor Total de Notas"},y:{field:r,type:"nominal",title:"UF",sort:"-x",scale:{paddingOuter:4}}},layer:[{params:[{name:"highlightBar"+s,select:{type:"point",on:"pointerover"}},{name:"highlightBarField"+s,select:{type:"point",on:"pointerover",fields:[r]}},{name:"selectBar"+s,select:{type:"point",encodings:["y"],toggle:!1}},{name:"selectBarField"+s,select:{type:"point",fields:[r],toggle:!1}}],mark:{type:"bar",height:22,cornerRadiusEnd:5,stroke:"black"},encoding:{color:{field:"valorTotalUf",type:"quantitative",scale:{type:"quantize",nice:!0,scheme:{name:"blues",count:10}},title:"Total"},fillOpacity:{condition:{test:a,value:1},value:.4},strokeWidth:{condition:[{test:l,value:1.5},{test:c,value:1.5}],value:0},tooltip:[{field:o,title:"UF"},{field:"qtdeNotas",aggregate:"sum",format:",.0f",title:"Qtde de Notas"},{field:"valorTotalUf",format:",.2f",title:"Valor Total"}]}},{mark:{type:"text",baseline:"middle",fontWeight:"bold",align:"left",xOffset:{expr:"isNumber(datum.xOffSet)?datum.xOffSet:5"},aria:!1},encoding:{text:{field:"valorTotalUf",type:"quantitative",format:".2s"},color:{condition:{test:"datum.xOffSet < 0",value:"white"},value:"black"}}}],width:380,resolve:{scale:{color:"independent"}}}}addDataListenerSelectLineQtdeNotas(t){t.addDataListener("selectLineQtdeNotasEncodings_store",(i,r)=>{if(r.length>0){let o=this.filtrarNotas(r[0].values[0].getUTCDate());this.tipoEmissaoSelecionado=r[0].values[1];let s=Gn().insert(o).remove(a=>!0);t.change("notaDiaUfEmit",s).runAsync(),t.change("notaDiaUfDest",s).runAsync()}else{this.tipoEmissaoSelecionado="";let o=Gn().insert(this.notaDiaData).remove(s=>!0);t.change("notaDiaUfEmit",o).runAsync(),t.change("notaDiaUfDest",o).runAsync()}})}addDataListenerSelectLineTotalNotas(t){t.addDataListener("selectLineTotalNotasEncodings_store",(i,r)=>{if(r.length>0){let o=this.filtrarNotas(r[0].values[0].getUTCDate());this.tipoEmissaoSelecionado=r[0].values[1];let s=Gn().insert(o).remove(a=>!0);t.change("notaDiaUfEmit",s).runAsync(),t.change("notaDiaUfDest",s).runAsync()}else{this.tipoEmissaoSelecionado="";let o=Gn().insert(this.notaDiaData).remove(s=>!0);t.change("notaDiaUfEmit",o).runAsync(),t.change("notaDiaUfDest",o).runAsync()}})}addDataListenerSelectBarEmit(t){var i=this;t.addDataListener("selectBarUfEmit_store",function(){var r=Re(function*(o,s){var a=null;if(s.length>0){let c=i.notaDiaData.filter(u=>u.siglaUfEmit==s[0].values[0]||u.siglaUfDest==s[0].values[0]);a=Gn().insert(c).remove(u=>!0)}else a=Gn().insert(i.notaDiaData).remove(c=>!0);t.change("notaDiaDataQtdeNotas",a).runAsync(),t.change("notaDiaDataValorTotal",a).runAsync()});return function(o,s){return r.apply(this,arguments)}}())}addDataListenerSelectBarDest(t){var i=this;t.addDataListener("selectBarUfDest_store",function(){var r=Re(function*(o,s){var a=null;if(s.length>0){let c=i.notaDiaData.filter(u=>u.siglaUfEmit==s[0].values[0]||u.siglaUfDest==s[0].values[0]);a=Gn().insert(c).remove(u=>!0)}else a=Gn().insert(i.notaDiaData).remove(c=>!0);t.change("notaDiaDataQtdeNotas",a).runAsync(),t.change("notaDiaDataValorTotal",a).runAsync()});return function(o,s){return r.apply(this,arguments)}}())}filtrarNotas(t){return this.notaDiaData.filter(r=>new Date(r.diaEmissao).getUTCDate()==t)}static#e=this.\u0275fac=function(i){return new(i||e)(G(X6),G(Ntt))};static#t=this.\u0275cmp=it({type:e,selectors:[["app-visao-geral"]],decls:1,vars:0,consts:[["id","visao-geral-dashboard"]],template:function(i,r){1&i&&_e(0,"div",0)}})}return e})();class Ltt{constructor(n,t,i,r,o,s,a,l,c,u,d,f,h,p,g,m){this.codMunicipioEmit=n,this.codMunicipioDest=t,this.siglaUfEmit=i,this.siglaUfDest=r,this.dscUfEmit=o,this.dscUfDest=s,this.siglaRegiaoEmit=a,this.siglaRegiaoDest=l,this.dscRegiaoEmit=c,this.dscRegiaoDest=u,this.dscMunicipioEmit=d,this.dscMunicipioDest=f,this.segmentoEmit=h,this.segmentoDest=p,this.qtdeNotas=g,this.valorTotal=m}}let Aue=(()=>{class e{constructor(t){this.httpClient=t}getMunicipioSegmentoEntradaList(){var t=this;return Re(function*(){const i=yield tp(t.httpClient.get("assets/municipio_segmento_entrada_interestadual.csv",{responseType:"text"}));return t.processarCsvMunicipioSegmento(i)})()}getMunicipioSegmentoSaidaList(){var t=this;return Re(function*(){const i=yield tp(t.httpClient.get("assets/municipio_segmento_saida_interestadual.csv",{responseType:"text"}));return t.processarCsvMunicipioSegmento(i)})()}processarCsvMunicipioSegmento(t){let i=[],r=t.split("\n");for(let o=1;o<r.length-1;o++){let s=r[o].split(",");i.push(new Ltt(s[0],s[1],s[2],s[3],s[4],s[5],s[6],s[7],s[8],s[9],s[10],s[11],s[12],s[13],parseInt(s[14]),parseFloat(s[15])))}return i}getMunicipioDestinario(t){var i=this;return Re(function*(){let r=yield Promise.resolve(i.getMunicipioSegmentoEntradaList());t&&(r=r.filter(s=>s.siglaUfEmit==t));let o=r.reduce((s,a)=>{let l=s.filter(c=>c.DSC_MUNICIPIO==a.dscMunicipioDest);if(l.length>0)l[0].TOTAL_VLR+=a.valorTotal,l[0].TOTAL_VLR=Math.round(100*l[0].TOTAL_VLR)/100;else if("CE"==a.siglaUfDest){let c={COD_MUNICIPIO:a.codMunicipioDest,DSC_MUNICIPIO:a.dscMunicipioDest,TOTAL_VLR:Math.round(100*a.valorTotal)/100};s.push(c)}return s},[]);return o.sort((s,a)=>a.TOTAL_VLR-s.TOTAL_VLR),o})()}static#e=this.\u0275fac=function(i){return new(i||e)(Me(A_))};static#t=this.\u0275prov=Oe({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();class $tt{constructor(n,t,i,r,o,s,a,l,c,u,d,f,h,p,g,m,_,y,v,b,w,x,C,S,A,M,N,V,P,E,D,I){this.codCnpj=n,this.siglaUf=t,this.descUf=i,this.descMunicipio=r,this.codCnaeEmit=o,this.descCnaeEmit=s,this.descClasseCnaeEmit=a,this.descGrupoCnaeEmit=l,this.descDivisaoCnaeEmit=c,this.segmento=u,this.siglaUfDest=d,this.descUfDest=f,this.siglaRegiaoDest=h,this.descRegiaoDest=p,this.qtdeNotas=g,this.valorTotalLinha=m,this.valorTotalCnpj=_,this.valorTotalCnpjUf=y,this.valorTotalCnpjSegmento=v,this.valorTotalCnpjUfSegmento=b,this.valorTotalCnpjMunicipio=w,this.valorTotalCnpjMunicipioUf=x,this.valorTotalCnpjMunicipioSegmento=C,this.valorTotalCnpjMunicipioUfSegmento=S,this.rankingGeral=A,this.rankingUf=M,this.rankingSegmento=N,this.rankingUfSegmento=V,this.rankingMunicipio=P,this.rankingMunicipioUf=E,this.rankingMunicipioSegmento=D,this.rankingMunicipioUfSegmento=I}}let Btt=(()=>{class e{constructor(t){this.http=t,this.httpClient=t}getTopCnpjEmitInterestadual(){var t=this;return Re(function*(){const i=yield tp(t.http.get("assets/cnpj_emit_interestadual_ranking_filtrado.csv",{responseType:"text"}));return t.processarCsvTopCnpjEmit(i)})()}getTopCnpjDestInterestadual(){var t=this;return Re(function*(){const i=yield tp(t.http.get("assets/cnpj_dest_interestadual_ranking_filtrado.csv",{responseType:"text"}));return t.processarCsvTopCnpjEmit(i)})()}processarCsvTopCnpjEmit(t){let i=[],r=t.split("\n");for(let o=1;o<r.length-1;o++){let s=r[o].split("|");i.push(new $tt(s[0],s[1],s[2],s[3],s[4],s[5],s[6],s[7],s[8],s[9],s[10],s[11],s[12],s[13],parseInt(s[14]),parseFloat(s[15]),parseFloat(s[16]),parseFloat(s[17]),parseFloat(s[18]),parseFloat(s[19]),parseFloat(s[20]),parseFloat(s[21]),parseFloat(s[22]),parseFloat(s[23]),parseInt(s[24]),parseInt(s[25]),parseInt(s[26]),parseInt(s[27]),parseInt(s[28]),parseInt(s[29]),parseInt(s[30]),parseInt(s[31])))}return i}static#e=this.\u0275fac=function(i){return new(i||e)(Me(A_))};static#t=this.\u0275prov=Oe({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function Vtt(e,n){1&e&&_e(0,"PlusIcon",11),2&e&&(k("styleClass","p-fieldset-toggler"),ve("data-pc-section","togglericon"))}function ztt(e,n){1&e&&wt(0)}function Utt(e,n){if(1&e&&(q(0,"span",12),B(1,ztt,1,0,"ng-container",6),W()),2&e){const t=L(3);ve("data-pc-section","togglericon"),$(1),k("ngTemplateOutlet",t.expandIconTemplate)}}function Htt(e,n){if(1&e&&(Ke(0),B(1,Vtt,1,2,"PlusIcon",9),B(2,Utt,2,2,"span",10),Ye()),2&e){const t=L(2);$(1),k("ngIf",!t.expandIconTemplate),$(1),k("ngIf",t.expandIconTemplate)}}function jtt(e,n){1&e&&_e(0,"MinusIcon",11),2&e&&(k("styleClass","p-fieldset-toggler"),ve("aria-hidden",!0)("data-pc-section","togglericon"))}function qtt(e,n){1&e&&wt(0)}function Wtt(e,n){if(1&e&&(q(0,"span",12),B(1,qtt,1,0,"ng-container",6),W()),2&e){const t=L(3);ve("data-pc-section","togglericon"),$(1),k("ngTemplateOutlet",t.collapseIconTemplate)}}function Gtt(e,n){if(1&e&&(Ke(0),B(1,jtt,1,3,"MinusIcon",9),B(2,Wtt,2,2,"span",10),Ye()),2&e){const t=L(2);$(1),k("ngIf",!t.collapseIconTemplate),$(1),k("ngIf",t.collapseIconTemplate)}}function Ktt(e,n){1&e&&wt(0)}function Ytt(e,n){if(1&e){const t=ft();Ke(0),q(1,"a",7),we("click",function(r){return J(t),ee(L().toggle(r))})("keydown",function(r){return J(t),ee(L().onKeyDown(r))}),B(2,Htt,3,2,"ng-container",8),B(3,Gtt,3,2,"ng-container",8),B(4,Ktt,1,0,"ng-container",6),W(),Ye()}if(2&e){const t=L(),i=Xi(4);$(1),ve("id",t.id+"_header")("aria-controls",t.id+"_content")("aria-expanded",!t.collapsed)("aria-label",t.buttonAriaLabel),$(1),k("ngIf",t.collapsed),$(1),k("ngIf",!t.collapsed),$(1),k("ngTemplateOutlet",i)}}function Xtt(e,n){1&e&&wt(0)}function Qtt(e,n){if(1&e&&(q(0,"span",13),pt(1),W(),Jr(2,1),B(3,Xtt,1,0,"ng-container",6)),2&e){const t=L();ve("data-pc-section","legendtitle"),$(1),Jn(t.legend),$(2),k("ngTemplateOutlet",t.headerTemplate)}}function Ztt(e,n){1&e&&wt(0)}const Jtt=["*",[["p-header"]]],ent=function(e,n){return{"p-fieldset p-component":!0,"p-fieldset-toggleable":e,"p-fieldset-expanded":n}},tnt=function(e){return{transitionParams:e,height:"0"}},nnt=function(e){return{value:"hidden",params:e}},int=function(e){return{transitionParams:e,height:"*"}},rnt=function(e){return{value:"visible",params:e}},ont=["*","p-header"];let snt=(()=>{class e{el;legend;toggleable;collapsed=!1;style;styleClass;transitionOptions="400ms cubic-bezier(0.86, 0, 0.07, 1)";collapsedChange=new De;onBeforeToggle=new De;onAfterToggle=new De;templates;get id(){return Mr()}get buttonAriaLabel(){return this.legend}animating;headerTemplate;contentTemplate;collapseIconTemplate;expandIconTemplate;constructor(t){this.el=t}ngAfterContentInit(){this.templates.forEach(t=>{switch(t.getType()){case"header":this.headerTemplate=t.template;break;case"expandicon":this.expandIconTemplate=t.template;break;case"collapseicon":this.collapseIconTemplate=t.template;break;case"content":this.contentTemplate=t.template}})}toggle(t){if(this.animating)return!1;this.animating=!0,this.onBeforeToggle.emit({originalEvent:t,collapsed:this.collapsed}),this.collapsed?this.expand():this.collapse(),this.onAfterToggle.emit({originalEvent:t,collapsed:this.collapsed}),t.preventDefault()}onKeyDown(t){("Enter"===t.code||"Space"===t.code)&&(this.toggle(t),t.preventDefault())}expand(){this.collapsed=!1,this.collapsedChange.emit(this.collapsed)}collapse(){this.collapsed=!0,this.collapsedChange.emit(this.collapsed)}getBlockableElement(){return this.el.nativeElement.children[0]}onToggleDone(){this.animating=!1}static \u0275fac=function(i){return new(i||e)(G(pn))};static \u0275cmp=it({type:e,selectors:[["p-fieldset"]],contentQueries:function(i,r,o){if(1&i&&Er(o,Bo,4),2&i){let s;Ct(s=xt())&&(r.templates=s)}},hostAttrs:[1,"p-element"],inputs:{legend:"legend",toggleable:"toggleable",collapsed:"collapsed",style:"style",styleClass:"styleClass",transitionOptions:"transitionOptions"},outputs:{collapsedChange:"collapsedChange",onBeforeToggle:"onBeforeToggle",onAfterToggle:"onAfterToggle"},ngContentSelectors:ont,decls:9,vars:28,consts:[[3,"ngClass","ngStyle"],[1,"p-fieldset-legend"],[4,"ngIf","ngIfElse"],["legendContent",""],["role","region",1,"p-toggleable-content"],[1,"p-fieldset-content"],[4,"ngTemplateOutlet"],["pRipple","","tabindex","0","role","button",3,"click","keydown"],[4,"ngIf"],[3,"styleClass",4,"ngIf"],["class","p-fieldset-toggler",4,"ngIf"],[3,"styleClass"],[1,"p-fieldset-toggler"],[1,"p-fieldset-legend-text"]],template:function(i,r){if(1&i&&(Xa(Jtt),q(0,"fieldset",0)(1,"legend",1),B(2,Ytt,5,7,"ng-container",2),B(3,Qtt,4,3,"ng-template",null,3,Ja),W(),q(5,"div",4),we("@fieldsetContent.done",function(){return r.onToggleDone()}),q(6,"div",5),Jr(7),B(8,Ztt,1,0,"ng-container",6),W()()()),2&i){const o=Xi(4);Xe(r.styleClass),k("ngClass",jn(17,ent,r.toggleable,!r.collapsed&&r.toggleable))("ngStyle",r.style),ve("id",r.id)("data-pc-name","fieldset")("data-pc-section","root"),$(1),ve("data-pc-section","legend"),$(1),k("ngIf",r.toggleable)("ngIfElse",o),$(3),k("@fieldsetContent",r.collapsed?_t(22,nnt,_t(20,tnt,r.transitionOptions)):_t(26,rnt,_t(24,int,r.animating?r.transitionOptions:"0ms"))),ve("id",r.id+"_content")("aria-labelledby",r.id+"_header")("aria-hidden",r.collapsed)("data-pc-section","toggleablecontent"),$(1),ve("data-pc-section","content"),$(2),k("ngTemplateOutlet",r.contentTemplate)}},dependencies:function(){return[_s,No,Po,ys,yg,TC,DC]},styles:["@layer primeng{.p-fieldset-legend>a,.p-fieldset-legend>span{display:flex;align-items:center;justify-content:center}.p-fieldset-toggleable .p-fieldset-legend a{cursor:pointer;-webkit-user-select:none;user-select:none;overflow:hidden;position:relative}.p-fieldset-legend-text{line-height:1}.p-fieldset-toggleable.p-fieldset-expanded>.p-toggleable-content:not(.ng-animating){overflow:visible}.p-fieldset-toggleable .p-toggleable-content{overflow:hidden}}\n"],encapsulation:2,data:{animation:[Rw("fieldsetContent",[tg("hidden",Dr({height:"0"})),tg("visible",Dr({height:"*"})),na("visible <=> hidden",[ta("{{transitionParams}}")]),na("void => *",ta(0))])]},changeDetection:0})}return e})(),ant=(()=>{class e{static \u0275fac=function(i){return new(i||e)};static \u0275mod=Ut({type:e});static \u0275inj=Nt({imports:[ti,Su,TC,DC,kn]})}return e})(),lnt=(()=>{class e{host;constructor(t){this.host=t}autofocus;focused=!1;ngAfterContentChecked(){if(!this.focused&&this.autofocus){const t=Y.getFocusableElements(this.host.nativeElement);0===t.length&&this.host.nativeElement.focus(),t.length>0&&t[0].focus(),this.focused=!0}}static \u0275fac=function(i){return new(i||e)(G(pn))};static \u0275dir=je({type:e,selectors:[["","pAutoFocus",""]],hostAttrs:[1,"p-element"],inputs:{autofocus:"autofocus"}})}return e})(),cnt=(()=>{class e{static \u0275fac=function(i){return new(i||e)};static \u0275mod=Ut({type:e});static \u0275inj=Nt({imports:[ti]})}return e})();const unt=["overlay"],dnt=["content"];function fnt(e,n){1&e&&wt(0)}const hnt=function(e,n,t){return{showTransitionParams:e,hideTransitionParams:n,transform:t}},pnt=function(e){return{value:"visible",params:e}},gnt=function(e){return{mode:e}},mnt=function(e){return{$implicit:e}};function _nt(e,n){if(1&e){const t=ft();q(0,"div",1,3),we("click",function(r){return J(t),ee(L(2).onOverlayContentClick(r))})("@overlayContentAnimation.start",function(r){return J(t),ee(L(2).onOverlayContentAnimationStart(r))})("@overlayContentAnimation.done",function(r){return J(t),ee(L(2).onOverlayContentAnimationDone(r))}),Jr(2),B(3,fnt,1,0,"ng-container",4),W()}if(2&e){const t=L(2);Xe(t.contentStyleClass),k("ngStyle",t.contentStyle)("ngClass","p-overlay-content")("@overlayContentAnimation",_t(11,pnt,hu(7,hnt,t.showTransitionOptions,t.hideTransitionOptions,t.transformOptions[t.modal?t.overlayResponsiveDirection:"default"]))),$(3),k("ngTemplateOutlet",t.contentTemplate)("ngTemplateOutletContext",_t(15,mnt,_t(13,gnt,t.overlayMode)))}}const ynt=function(e,n,t,i,r,o,s,a,l,c,u,d,f,h){return{"p-overlay p-component":!0,"p-overlay-modal p-component-overlay p-component-overlay-enter":e,"p-overlay-center":n,"p-overlay-top":t,"p-overlay-top-start":i,"p-overlay-top-end":r,"p-overlay-bottom":o,"p-overlay-bottom-start":s,"p-overlay-bottom-end":a,"p-overlay-left":l,"p-overlay-left-start":c,"p-overlay-left-end":u,"p-overlay-right":d,"p-overlay-right-start":f,"p-overlay-right-end":h}};function vnt(e,n){if(1&e){const t=ft();q(0,"div",1,2),we("click",function(r){return J(t),ee(L().onOverlayClick(r))}),B(2,_nt,4,17,"div",0),W()}if(2&e){const t=L();Xe(t.styleClass),k("ngStyle",t.style)("ngClass",oz(5,ynt,[t.modal,t.modal&&"center"===t.overlayResponsiveDirection,t.modal&&"top"===t.overlayResponsiveDirection,t.modal&&"top-start"===t.overlayResponsiveDirection,t.modal&&"top-end"===t.overlayResponsiveDirection,t.modal&&"bottom"===t.overlayResponsiveDirection,t.modal&&"bottom-start"===t.overlayResponsiveDirection,t.modal&&"bottom-end"===t.overlayResponsiveDirection,t.modal&&"left"===t.overlayResponsiveDirection,t.modal&&"left-start"===t.overlayResponsiveDirection,t.modal&&"left-end"===t.overlayResponsiveDirection,t.modal&&"right"===t.overlayResponsiveDirection,t.modal&&"right-start"===t.overlayResponsiveDirection,t.modal&&"right-end"===t.overlayResponsiveDirection])),$(2),k("ngIf",t.visible)}}const bnt=["*"],wnt={provide:Qi,useExisting:Rt(()=>kue),multi:!0},Cnt=pH([Dr({transform:"{{transform}}",opacity:0}),ta("{{showTransitionParams}}")]),xnt=pH([ta("{{hideTransitionParams}}",Dr({transform:"{{transform}}",opacity:0}))]);let kue=(()=>{class e{document;platformId;el;renderer;config;overlayService;zone;get visible(){return this._visible}set visible(t){this._visible=t,this._visible&&!this.modalVisible&&(this.modalVisible=!0)}get mode(){return this._mode||this.overlayOptions?.mode}set mode(t){this._mode=t}get style(){return ht.merge(this._style,this.modal?this.overlayResponsiveOptions?.style:this.overlayOptions?.style)}set style(t){this._style=t}get styleClass(){return ht.merge(this._styleClass,this.modal?this.overlayResponsiveOptions?.styleClass:this.overlayOptions?.styleClass)}set styleClass(t){this._styleClass=t}get contentStyle(){return ht.merge(this._contentStyle,this.modal?this.overlayResponsiveOptions?.contentStyle:this.overlayOptions?.contentStyle)}set contentStyle(t){this._contentStyle=t}get contentStyleClass(){return ht.merge(this._contentStyleClass,this.modal?this.overlayResponsiveOptions?.contentStyleClass:this.overlayOptions?.contentStyleClass)}set contentStyleClass(t){this._contentStyleClass=t}get target(){const t=this._target||this.overlayOptions?.target;return void 0===t?"@prev":t}set target(t){this._target=t}get appendTo(){return this._appendTo||this.overlayOptions?.appendTo}set appendTo(t){this._appendTo=t}get autoZIndex(){const t=this._autoZIndex||this.overlayOptions?.autoZIndex;return void 0===t||t}set autoZIndex(t){this._autoZIndex=t}get baseZIndex(){const t=this._baseZIndex||this.overlayOptions?.baseZIndex;return void 0===t?0:t}set baseZIndex(t){this._baseZIndex=t}get showTransitionOptions(){const t=this._showTransitionOptions||this.overlayOptions?.showTransitionOptions;return void 0===t?".12s cubic-bezier(0, 0, 0.2, 1)":t}set showTransitionOptions(t){this._showTransitionOptions=t}get hideTransitionOptions(){const t=this._hideTransitionOptions||this.overlayOptions?.hideTransitionOptions;return void 0===t?".1s linear":t}set hideTransitionOptions(t){this._hideTransitionOptions=t}get listener(){return this._listener||this.overlayOptions?.listener}set listener(t){this._listener=t}get responsive(){return this._responsive||this.overlayOptions?.responsive}set responsive(t){this._responsive=t}get options(){return this._options}set options(t){this._options=t}visibleChange=new De;onBeforeShow=new De;onShow=new De;onBeforeHide=new De;onHide=new De;onAnimationStart=new De;onAnimationDone=new De;templates;overlayViewChild;contentViewChild;contentTemplate;_visible=!1;_mode;_style;_styleClass;_contentStyle;_contentStyleClass;_target;_appendTo;_autoZIndex;_baseZIndex;_showTransitionOptions;_hideTransitionOptions;_listener;_responsive;_options;modalVisible=!1;isOverlayClicked=!1;isOverlayContentClicked=!1;scrollHandler;documentClickListener;documentResizeListener;documentKeyboardListener;window;transformOptions={default:"scaleY(0.8)",center:"scale(0.7)",top:"translate3d(0px, -100%, 0px)","top-start":"translate3d(0px, -100%, 0px)","top-end":"translate3d(0px, -100%, 0px)",bottom:"translate3d(0px, 100%, 0px)","bottom-start":"translate3d(0px, 100%, 0px)","bottom-end":"translate3d(0px, 100%, 0px)",left:"translate3d(-100%, 0px, 0px)","left-start":"translate3d(-100%, 0px, 0px)","left-end":"translate3d(-100%, 0px, 0px)",right:"translate3d(100%, 0px, 0px)","right-start":"translate3d(100%, 0px, 0px)","right-end":"translate3d(100%, 0px, 0px)"};get modal(){if(mf(this.platformId))return"modal"===this.mode||this.overlayResponsiveOptions&&this.window?.matchMedia(this.overlayResponsiveOptions.media?.replace("@media","")||`(max-width: ${this.overlayResponsiveOptions.breakpoint})`).matches}get overlayMode(){return this.mode||(this.modal?"modal":"overlay")}get overlayOptions(){return{...this.config?.overlayOptions,...this.options}}get overlayResponsiveOptions(){return{...this.overlayOptions?.responsive,...this.responsive}}get overlayResponsiveDirection(){return this.overlayResponsiveOptions?.direction||"center"}get overlayEl(){return this.overlayViewChild?.nativeElement}get contentEl(){return this.contentViewChild?.nativeElement}get targetEl(){return Y.getTargetElement(this.target,this.el?.nativeElement)}constructor(t,i,r,o,s,a,l){this.document=t,this.platformId=i,this.el=r,this.renderer=o,this.config=s,this.overlayService=a,this.zone=l,this.window=this.document.defaultView}ngAfterContentInit(){this.templates?.forEach(t=>{t.getType(),this.contentTemplate=t.template})}show(t,i=!1){this.onVisibleChange(!0),this.handleEvents("onShow",{overlay:t||this.overlayEl,target:this.targetEl,mode:this.overlayMode}),i&&Y.focus(this.targetEl),this.modal&&Y.addClass(this.document?.body,"p-overflow-hidden")}hide(t,i=!1){this.visible&&(this.onVisibleChange(!1),this.handleEvents("onHide",{overlay:t||this.overlayEl,target:this.targetEl,mode:this.overlayMode}),i&&Y.focus(this.targetEl),this.modal&&Y.removeClass(this.document?.body,"p-overflow-hidden"))}alignOverlay(){!this.modal&&Y.alignOverlay(this.overlayEl,this.targetEl,this.appendTo)}onVisibleChange(t){this._visible=t,this.visibleChange.emit(t)}onOverlayClick(){this.isOverlayClicked=!0}onOverlayContentClick(t){this.overlayService.add({originalEvent:t,target:this.targetEl}),this.isOverlayContentClicked=!0}onOverlayContentAnimationStart(t){switch(t.toState){case"visible":this.handleEvents("onBeforeShow",{overlay:this.overlayEl,target:this.targetEl,mode:this.overlayMode}),this.autoZIndex&&rl.set(this.overlayMode,this.overlayEl,this.baseZIndex+this.config?.zIndex[this.overlayMode]),Y.appendOverlay(this.overlayEl,"body"===this.appendTo?this.document.body:this.appendTo,this.appendTo),this.alignOverlay();break;case"void":this.handleEvents("onBeforeHide",{overlay:this.overlayEl,target:this.targetEl,mode:this.overlayMode}),this.modal&&Y.addClass(this.overlayEl,"p-component-overlay-leave")}this.handleEvents("onAnimationStart",t)}onOverlayContentAnimationDone(t){const i=this.overlayEl||t.element.parentElement;switch(t.toState){case"visible":this.show(i,!0),this.bindListeners();break;case"void":this.hide(i,!0),this.unbindListeners(),Y.appendOverlay(this.overlayEl,this.targetEl,this.appendTo),rl.clear(i),this.modalVisible=!1}this.handleEvents("onAnimationDone",t)}handleEvents(t,i){this[t].emit(i),this.options&&this.options[t]&&this.options[t](i),this.config?.overlayOptions&&(this.config?.overlayOptions)[t]&&(this.config?.overlayOptions)[t](i)}bindListeners(){this.bindScrollListener(),this.bindDocumentClickListener(),this.bindDocumentResizeListener(),this.bindDocumentKeyboardListener()}unbindListeners(){this.unbindScrollListener(),this.unbindDocumentClickListener(),this.unbindDocumentResizeListener(),this.unbindDocumentKeyboardListener()}bindScrollListener(){this.scrollHandler||(this.scrollHandler=new Kk(this.targetEl,t=>{(!this.listener||this.listener(t,{type:"scroll",mode:this.overlayMode,valid:!0}))&&this.hide(t,!0)})),this.scrollHandler.bindScrollListener()}unbindScrollListener(){this.scrollHandler&&this.scrollHandler.unbindScrollListener()}bindDocumentClickListener(){this.documentClickListener||(this.documentClickListener=this.renderer.listen(this.document,"click",t=>{const r=!(this.targetEl&&(this.targetEl.isSameNode(t.target)||!this.isOverlayClicked&&this.targetEl.contains(t.target))||this.isOverlayContentClicked);(this.listener?this.listener(t,{type:"outside",mode:this.overlayMode,valid:3!==t.which&&r}):r)&&this.hide(t),this.isOverlayClicked=this.isOverlayContentClicked=!1}))}unbindDocumentClickListener(){this.documentClickListener&&(this.documentClickListener(),this.documentClickListener=null)}bindDocumentResizeListener(){this.documentResizeListener||(this.documentResizeListener=this.renderer.listen(this.window,"resize",t=>{(this.listener?this.listener(t,{type:"resize",mode:this.overlayMode,valid:!Y.isTouchDevice()}):!Y.isTouchDevice())&&this.hide(t,!0)}))}unbindDocumentResizeListener(){this.documentResizeListener&&(this.documentResizeListener(),this.documentResizeListener=null)}bindDocumentKeyboardListener(){this.documentKeyboardListener||this.zone.runOutsideAngular(()=>{this.documentKeyboardListener=this.renderer.listen(this.window,"keydown",t=>{this.overlayOptions.hideOnEscape&&27===t.keyCode&&(this.listener?this.listener(t,{type:"keydown",mode:this.overlayMode,valid:!Y.isTouchDevice()}):!Y.isTouchDevice())&&this.zone.run(()=>{this.hide(t,!0)})})})}unbindDocumentKeyboardListener(){this.documentKeyboardListener&&(this.documentKeyboardListener(),this.documentKeyboardListener=null)}ngOnDestroy(){this.hide(this.overlayEl,!0),this.overlayEl&&(Y.appendOverlay(this.overlayEl,this.targetEl,this.appendTo),rl.clear(this.overlayEl)),this.scrollHandler&&(this.scrollHandler.destroy(),this.scrollHandler=null),this.unbindListeners()}static \u0275fac=function(i){return new(i||e)(G(qn),G(fs),G(pn),G(Ki),G(Y_),G(TW),G(At))};static \u0275cmp=it({type:e,selectors:[["p-overlay"]],contentQueries:function(i,r,o){if(1&i&&Er(o,Bo,4),2&i){let s;Ct(s=xt())&&(r.templates=s)}},viewQuery:function(i,r){if(1&i&&(Fn(unt,5),Fn(dnt,5)),2&i){let o;Ct(o=xt())&&(r.overlayViewChild=o.first),Ct(o=xt())&&(r.contentViewChild=o.first)}},hostAttrs:[1,"p-element"],inputs:{visible:"visible",mode:"mode",style:"style",styleClass:"styleClass",contentStyle:"contentStyle",contentStyleClass:"contentStyleClass",target:"target",appendTo:"appendTo",autoZIndex:"autoZIndex",baseZIndex:"baseZIndex",showTransitionOptions:"showTransitionOptions",hideTransitionOptions:"hideTransitionOptions",listener:"listener",responsive:"responsive",options:"options"},outputs:{visibleChange:"visibleChange",onBeforeShow:"onBeforeShow",onShow:"onShow",onBeforeHide:"onBeforeHide",onHide:"onHide",onAnimationStart:"onAnimationStart",onAnimationDone:"onAnimationDone"},features:[Gt([wnt])],ngContentSelectors:bnt,decls:1,vars:1,consts:[[3,"ngStyle","class","ngClass","click",4,"ngIf"],[3,"ngStyle","ngClass","click"],["overlay",""],["content",""],[4,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(i,r){1&i&&(Xa(),B(0,vnt,3,20,"div",0)),2&i&&k("ngIf",r.modalVisible)},dependencies:[_s,No,Po,ys],styles:["@layer primeng{.p-overlay{position:absolute;top:0;left:0}.p-overlay-modal{display:flex;align-items:center;justify-content:center;position:fixed;top:0;left:0;width:100%;height:100%}.p-overlay-content{transform-origin:inherit}.p-overlay-modal>.p-overlay-content{z-index:1;width:90%}.p-overlay-top{align-items:flex-start}.p-overlay-top-start{align-items:flex-start;justify-content:flex-start}.p-overlay-top-end{align-items:flex-start;justify-content:flex-end}.p-overlay-bottom{align-items:flex-end}.p-overlay-bottom-start{align-items:flex-end;justify-content:flex-start}.p-overlay-bottom-end{align-items:flex-end;justify-content:flex-end}.p-overlay-left{justify-content:flex-start}.p-overlay-left-start{justify-content:flex-start;align-items:flex-start}.p-overlay-left-end{justify-content:flex-start;align-items:flex-end}.p-overlay-right{justify-content:flex-end}.p-overlay-right-start{justify-content:flex-end;align-items:flex-start}.p-overlay-right-end{justify-content:flex-end;align-items:flex-end}}\n"],encapsulation:2,data:{animation:[Rw("overlayContentAnimation",[na(":enter",[gH(Cnt)]),na(":leave",[gH(xnt)])])]},changeDetection:0})}return e})(),Oue=(()=>{class e{static \u0275fac=function(i){return new(i||e)};static \u0275mod=Ut({type:e});static \u0275inj=Nt({imports:[ti,kn,kn]})}return e})(),HT=(()=>{class e extends En{pathId;ngOnInit(){this.pathId="url(#"+Mr()+")"}static \u0275fac=function(){let t;return function(r){return(t||(t=dt(e)))(r||e)}}();static \u0275cmp=it({type:e,selectors:[["SpinnerIcon"]],standalone:!0,features:[qe,cn],decls:6,vars:7,consts:[["width","14","height","14","viewBox","0 0 14 14","fill","none","xmlns","http://www.w3.org/2000/svg"],["d","M6.99701 14C5.85441 13.999 4.72939 13.7186 3.72012 13.1832C2.71084 12.6478 1.84795 11.8737 1.20673 10.9284C0.565504 9.98305 0.165424 8.89526 0.041387 7.75989C-0.0826496 6.62453 0.073125 5.47607 0.495122 4.4147C0.917119 3.35333 1.59252 2.4113 2.46241 1.67077C3.33229 0.930247 4.37024 0.413729 5.4857 0.166275C6.60117 -0.0811796 7.76026 -0.0520535 8.86188 0.251112C9.9635 0.554278 10.9742 1.12227 11.8057 1.90555C11.915 2.01493 11.9764 2.16319 11.9764 2.31778C11.9764 2.47236 11.915 2.62062 11.8057 2.73C11.7521 2.78503 11.688 2.82877 11.6171 2.85864C11.5463 2.8885 11.4702 2.90389 11.3933 2.90389C11.3165 2.90389 11.2404 2.8885 11.1695 2.85864C11.0987 2.82877 11.0346 2.78503 10.9809 2.73C9.9998 1.81273 8.73246 1.26138 7.39226 1.16876C6.05206 1.07615 4.72086 1.44794 3.62279 2.22152C2.52471 2.99511 1.72683 4.12325 1.36345 5.41602C1.00008 6.70879 1.09342 8.08723 1.62775 9.31926C2.16209 10.5513 3.10478 11.5617 4.29713 12.1803C5.48947 12.7989 6.85865 12.988 8.17414 12.7157C9.48963 12.4435 10.6711 11.7264 11.5196 10.6854C12.3681 9.64432 12.8319 8.34282 12.8328 7C12.8328 6.84529 12.8943 6.69692 13.0038 6.58752C13.1132 6.47812 13.2616 6.41667 13.4164 6.41667C13.5712 6.41667 13.7196 6.47812 13.8291 6.58752C13.9385 6.69692 14 6.84529 14 7C14 8.85651 13.2622 10.637 11.9489 11.9497C10.6356 13.2625 8.85432 14 6.99701 14Z","fill","currentColor"],[3,"id"],["width","14","height","14","fill","white"]],template:function(i,r){1&i&&(yn(),q(0,"svg",0)(1,"g"),_e(2,"path",1),W(),q(3,"defs")(4,"clipPath",2),_e(5,"rect",3),W()()()),2&i&&(Xe(r.getClassNames()),ve("aria-label",r.ariaLabel)("aria-hidden",r.ariaHidden)("role",r.role),$(1),ve("clip-path",r.pathId),$(3),k("id",r.pathId))},encapsulation:2})}return e})();const Ent=["element"],Snt=["content"];function Tnt(e,n){1&e&&wt(0)}const Q6=function(e,n){return{$implicit:e,options:n}};function Dnt(e,n){if(1&e&&(Ke(0),B(1,Tnt,1,0,"ng-container",7),Ye()),2&e){const t=L(2);$(1),k("ngTemplateOutlet",t.contentTemplate)("ngTemplateOutletContext",jn(2,Q6,t.loadedItems,t.getContentOptions()))}}function Int(e,n){1&e&&wt(0)}function Mnt(e,n){if(1&e&&(Ke(0),B(1,Int,1,0,"ng-container",7),Ye()),2&e){const t=n.$implicit,i=n.index,r=L(3);$(1),k("ngTemplateOutlet",r.itemTemplate)("ngTemplateOutletContext",jn(2,Q6,t,r.getOptions(i)))}}const Ant=function(e){return{"p-scroller-loading":e}};function knt(e,n){if(1&e&&(q(0,"div",8,9),B(2,Mnt,2,5,"ng-container",10),W()),2&e){const t=L(2);k("ngClass",_t(4,Ant,t.d_loading))("ngStyle",t.contentStyle),$(2),k("ngForOf",t.loadedItems)("ngForTrackBy",t._trackBy||t.index)}}function Ont(e,n){1&e&&_e(0,"div",11),2&e&&k("ngStyle",L(2).spacerStyle)}function Rnt(e,n){1&e&&wt(0)}const Fnt=function(e){return{numCols:e}},Rue=function(e){return{options:e}};function Nnt(e,n){if(1&e&&(Ke(0),B(1,Rnt,1,0,"ng-container",7),Ye()),2&e){const t=n.index,i=L(4);$(1),k("ngTemplateOutlet",i.loaderTemplate)("ngTemplateOutletContext",_t(4,Rue,i.getLoaderOptions(t,i.both&&_t(2,Fnt,i._numItemsInViewport.cols))))}}function Pnt(e,n){if(1&e&&(Ke(0),B(1,Nnt,2,6,"ng-container",14),Ye()),2&e){const t=L(3);$(1),k("ngForOf",t.loaderArr)}}function Lnt(e,n){1&e&&wt(0)}const $nt=function(){return{styleClass:"p-scroller-loading-icon"}};function Bnt(e,n){if(1&e&&(Ke(0),B(1,Lnt,1,0,"ng-container",7),Ye()),2&e){const t=L(4);$(1),k("ngTemplateOutlet",t.loaderIconTemplate)("ngTemplateOutletContext",_t(3,Rue,ff(2,$nt)))}}function Vnt(e,n){1&e&&_e(0,"SpinnerIcon",16),2&e&&k("styleClass","p-scroller-loading-icon")}function znt(e,n){if(1&e&&(B(0,Bnt,2,5,"ng-container",0),B(1,Vnt,1,1,"ng-template",null,15,Ja)),2&e){const t=Xi(2);k("ngIf",L(3).loaderIconTemplate)("ngIfElse",t)}}const Unt=function(e){return{"p-component-overlay":e}};function Hnt(e,n){if(1&e&&(q(0,"div",12),B(1,Pnt,2,1,"ng-container",0),B(2,znt,3,2,"ng-template",null,13,Ja),W()),2&e){const t=Xi(3),i=L(2);k("ngClass",_t(3,Unt,!i.loaderTemplate)),$(1),k("ngIf",i.loaderTemplate)("ngIfElse",t)}}const jnt=function(e,n,t){return{"p-scroller":!0,"p-scroller-inline":e,"p-both-scroll":n,"p-horizontal-scroll":t}};function qnt(e,n){if(1&e){const t=ft();Ke(0),q(1,"div",2,3),we("scroll",function(r){return J(t),ee(L().onContainerScroll(r))}),B(3,Dnt,2,5,"ng-container",0),B(4,knt,3,6,"ng-template",null,4,Ja),B(6,Ont,1,1,"div",5),B(7,Hnt,4,5,"div",6),W(),Ye()}if(2&e){const t=Xi(5),i=L();$(1),Xe(i._styleClass),k("ngStyle",i._style)("ngClass",hu(10,jnt,i.inline,i.both,i.horizontal)),ve("id",i._id)("tabindex",i.tabindex),$(2),k("ngIf",i.contentTemplate)("ngIfElse",t),$(3),k("ngIf",i._showSpacer),$(1),k("ngIf",!i.loaderDisabled&&i._showLoader&&i.d_loading)}}function Wnt(e,n){1&e&&wt(0)}const Gnt=function(e,n){return{rows:e,columns:n}};function Knt(e,n){if(1&e&&(Ke(0),B(1,Wnt,1,0,"ng-container",7),Ye()),2&e){const t=L(2);$(1),k("ngTemplateOutlet",t.contentTemplate)("ngTemplateOutletContext",jn(5,Q6,t.items,jn(2,Gnt,t._items,t.loadedColumns)))}}function Ynt(e,n){if(1&e&&(Jr(0),B(1,Knt,2,8,"ng-container",17)),2&e){const t=L();$(1),k("ngIf",t.contentTemplate)}}const Xnt=["*"];let Qnt=(()=>{class e{document;platformId;renderer;cd;zone;get id(){return this._id}set id(t){this._id=t}get style(){return this._style}set style(t){this._style=t}get styleClass(){return this._styleClass}set styleClass(t){this._styleClass=t}get tabindex(){return this._tabindex}set tabindex(t){this._tabindex=t}get items(){return this._items}set items(t){this._items=t}get itemSize(){return this._itemSize}set itemSize(t){this._itemSize=t}get scrollHeight(){return this._scrollHeight}set scrollHeight(t){this._scrollHeight=t}get scrollWidth(){return this._scrollWidth}set scrollWidth(t){this._scrollWidth=t}get orientation(){return this._orientation}set orientation(t){this._orientation=t}get step(){return this._step}set step(t){this._step=t}get delay(){return this._delay}set delay(t){this._delay=t}get resizeDelay(){return this._resizeDelay}set resizeDelay(t){this._resizeDelay=t}get appendOnly(){return this._appendOnly}set appendOnly(t){this._appendOnly=t}get inline(){return this._inline}set inline(t){this._inline=t}get lazy(){return this._lazy}set lazy(t){this._lazy=t}get disabled(){return this._disabled}set disabled(t){this._disabled=t}get loaderDisabled(){return this._loaderDisabled}set loaderDisabled(t){this._loaderDisabled=t}get columns(){return this._columns}set columns(t){this._columns=t}get showSpacer(){return this._showSpacer}set showSpacer(t){this._showSpacer=t}get showLoader(){return this._showLoader}set showLoader(t){this._showLoader=t}get numToleratedItems(){return this._numToleratedItems}set numToleratedItems(t){this._numToleratedItems=t}get loading(){return this._loading}set loading(t){this._loading=t}get autoSize(){return this._autoSize}set autoSize(t){this._autoSize=t}get trackBy(){return this._trackBy}set trackBy(t){this._trackBy=t}get options(){return this._options}set options(t){this._options=t,t&&"object"==typeof t&&Object.entries(t).forEach(([i,r])=>this[`_${i}`]!==r&&(this[`_${i}`]=r))}onLazyLoad=new De;onScroll=new De;onScrollIndexChange=new De;elementViewChild;contentViewChild;templates;_id;_style;_styleClass;_tabindex=0;_items;_itemSize=0;_scrollHeight;_scrollWidth;_orientation="vertical";_step=0;_delay=0;_resizeDelay=10;_appendOnly=!1;_inline=!1;_lazy=!1;_disabled=!1;_loaderDisabled=!1;_columns;_showSpacer=!0;_showLoader=!1;_numToleratedItems;_loading;_autoSize=!1;_trackBy;_options;d_loading=!1;d_numToleratedItems;contentEl;contentTemplate;itemTemplate;loaderTemplate;loaderIconTemplate;first=0;last=0;page=0;isRangeChanged=!1;numItemsInViewport=0;lastScrollPos=0;lazyLoadState={};loaderArr=[];spacerStyle={};contentStyle={};scrollTimeout;resizeTimeout;initialized=!1;windowResizeListener;defaultWidth;defaultHeight;defaultContentWidth;defaultContentHeight;get vertical(){return"vertical"===this._orientation}get horizontal(){return"horizontal"===this._orientation}get both(){return"both"===this._orientation}get loadedItems(){return this._items&&!this.d_loading?this.both?this._items.slice(this._appendOnly?0:this.first.rows,this.last.rows).map(t=>this._columns?t:t.slice(this._appendOnly?0:this.first.cols,this.last.cols)):this.horizontal&&this._columns?this._items:this._items.slice(this._appendOnly?0:this.first,this.last):[]}get loadedRows(){return this.d_loading?this._loaderDisabled?this.loaderArr:[]:this.loadedItems}get loadedColumns(){return this._columns&&(this.both||this.horizontal)?this.d_loading&&this._loaderDisabled?this.both?this.loaderArr[0]:this.loaderArr:this._columns.slice(this.both?this.first.cols:this.first,this.both?this.last.cols:this.last):this._columns}get isPageChanged(){return!this._step||this.page!==this.getPageByFirst()}constructor(t,i,r,o,s){this.document=t,this.platformId=i,this.renderer=r,this.cd=o,this.zone=s}ngOnInit(){this.setInitialState()}ngOnChanges(t){let i=!1;if(t.loading){const{previousValue:r,currentValue:o}=t.loading;this.lazy&&r!==o&&o!==this.d_loading&&(this.d_loading=o,i=!0)}if(t.orientation&&(this.lastScrollPos=this.both?{top:0,left:0}:0),t.numToleratedItems){const{previousValue:r,currentValue:o}=t.numToleratedItems;r!==o&&o!==this.d_numToleratedItems&&(this.d_numToleratedItems=o)}if(t.options){const{previousValue:r,currentValue:o}=t.options;this.lazy&&r?.loading!==o?.loading&&o?.loading!==this.d_loading&&(this.d_loading=o.loading,i=!0),r?.numToleratedItems!==o?.numToleratedItems&&o?.numToleratedItems!==this.d_numToleratedItems&&(this.d_numToleratedItems=o.numToleratedItems)}this.initialized&&!i&&(t.items?.previousValue?.length!==t.items?.currentValue?.length||t.itemSize||t.scrollHeight||t.scrollWidth)&&(this.init(),this.calculateAutoSize())}ngAfterContentInit(){this.templates.forEach(t=>{switch(t.getType()){case"content":this.contentTemplate=t.template;break;case"item":default:this.itemTemplate=t.template;break;case"loader":this.loaderTemplate=t.template;break;case"loadericon":this.loaderIconTemplate=t.template}})}ngAfterViewInit(){Promise.resolve().then(()=>{this.viewInit()})}ngAfterViewChecked(){this.initialized||this.viewInit()}ngOnDestroy(){this.unbindResizeListener(),this.contentEl=null,this.initialized=!1}viewInit(){mf(this.platformId)&&Y.isVisible(this.elementViewChild?.nativeElement)&&(this.setInitialState(),this.setContentEl(this.contentEl),this.init(),this.defaultWidth=Y.getWidth(this.elementViewChild?.nativeElement),this.defaultHeight=Y.getHeight(this.elementViewChild?.nativeElement),this.defaultContentWidth=Y.getWidth(this.contentEl),this.defaultContentHeight=Y.getHeight(this.contentEl),this.initialized=!0)}init(){this._disabled||(this.setSize(),this.calculateOptions(),this.setSpacerSize(),this.bindResizeListener(),this.cd.detectChanges())}setContentEl(t){this.contentEl=t||this.contentViewChild?.nativeElement||Y.findSingle(this.elementViewChild?.nativeElement,".p-scroller-content")}setInitialState(){this.first=this.both?{rows:0,cols:0}:0,this.last=this.both?{rows:0,cols:0}:0,this.numItemsInViewport=this.both?{rows:0,cols:0}:0,this.lastScrollPos=this.both?{top:0,left:0}:0,this.d_loading=this._loading||!1,this.d_numToleratedItems=this._numToleratedItems,this.loaderArr=[],this.spacerStyle={},this.contentStyle={}}getElementRef(){return this.elementViewChild}getPageByFirst(){return Math.floor((this.first+4*this.d_numToleratedItems)/(this._step||1))}scrollTo(t){this.lastScrollPos=this.both?{top:0,left:0}:0,this.elementViewChild?.nativeElement?.scrollTo(t)}scrollToIndex(t,i="auto"){const{numToleratedItems:r}=this.calculateNumItems(),o=this.getContentPosition(),s=(u=0,d)=>u<=d?0:u,a=(u,d,f)=>u*d+f,l=(u=0,d=0)=>this.scrollTo({left:u,top:d,behavior:i});let c=0;this.both?(c={rows:s(t[0],r[0]),cols:s(t[1],r[1])},l(a(c.cols,this._itemSize[1],o.left),a(c.rows,this._itemSize[0],o.top))):(c=s(t,r),this.horizontal?l(a(c,this._itemSize,o.left),0):l(0,a(c,this._itemSize,o.top))),this.isRangeChanged=this.first!==c,this.first=c}scrollInView(t,i,r="auto"){if(i){const{first:o,viewport:s}=this.getRenderedRange(),a=(u=0,d=0)=>this.scrollTo({left:u,top:d,behavior:r}),c="to-end"===i;if("to-start"===i){if(this.both)s.first.rows-o.rows>t[0]?a(s.first.cols*this._itemSize[1],(s.first.rows-1)*this._itemSize[0]):s.first.cols-o.cols>t[1]&&a((s.first.cols-1)*this._itemSize[1],s.first.rows*this._itemSize[0]);else if(s.first-o>t){const u=(s.first-1)*this._itemSize;this.horizontal?a(u,0):a(0,u)}}else if(c)if(this.both)s.last.rows-o.rows<=t[0]+1?a(s.first.cols*this._itemSize[1],(s.first.rows+1)*this._itemSize[0]):s.last.cols-o.cols<=t[1]+1&&a((s.first.cols+1)*this._itemSize[1],s.first.rows*this._itemSize[0]);else if(s.last-o<=t+1){const u=(s.first+1)*this._itemSize;this.horizontal?a(u,0):a(0,u)}}else this.scrollToIndex(t,r)}getRenderedRange(){const t=(o,s)=>Math.floor(o/(s||o));let i=this.first,r=0;if(this.elementViewChild?.nativeElement){const{scrollTop:o,scrollLeft:s}=this.elementViewChild.nativeElement;this.both?(i={rows:t(o,this._itemSize[0]),cols:t(s,this._itemSize[1])},r={rows:i.rows+this.numItemsInViewport.rows,cols:i.cols+this.numItemsInViewport.cols}):(i=t(this.horizontal?s:o,this._itemSize),r=i+this.numItemsInViewport)}return{first:this.first,last:this.last,viewport:{first:i,last:r}}}calculateNumItems(){const t=this.getContentPosition(),i=(this.elementViewChild?.nativeElement?this.elementViewChild.nativeElement.offsetWidth-t.left:0)||0,r=(this.elementViewChild?.nativeElement?this.elementViewChild.nativeElement.offsetHeight-t.top:0)||0,o=(c,u)=>Math.ceil(c/(u||c)),s=c=>Math.ceil(c/2),a=this.both?{rows:o(r,this._itemSize[0]),cols:o(i,this._itemSize[1])}:o(this.horizontal?i:r,this._itemSize);return{numItemsInViewport:a,numToleratedItems:this.d_numToleratedItems||(this.both?[s(a.rows),s(a.cols)]:s(a))}}calculateOptions(){const{numItemsInViewport:t,numToleratedItems:i}=this.calculateNumItems(),r=(a,l,c,u=!1)=>this.getLast(a+l+(a<c?2:3)*c,u),o=this.first,s=this.both?{rows:r(this.first.rows,t.rows,i[0]),cols:r(this.first.cols,t.cols,i[1],!0)}:r(this.first,t,i);this.last=s,this.numItemsInViewport=t,this.d_numToleratedItems=i,this.showLoader&&(this.loaderArr=this.both?Array.from({length:t.rows}).map(()=>Array.from({length:t.cols})):Array.from({length:t})),this._lazy&&Promise.resolve().then(()=>{this.lazyLoadState={first:this._step?this.both?{rows:0,cols:o.cols}:0:o,last:Math.min(this._step?this._step:this.last,this.items.length)},this.handleEvents("onLazyLoad",this.lazyLoadState)})}calculateAutoSize(){this._autoSize&&!this.d_loading&&Promise.resolve().then(()=>{if(this.contentEl){this.contentEl.style.minHeight=this.contentEl.style.minWidth="auto",this.contentEl.style.position="relative",this.elementViewChild.nativeElement.style.contain="none";const[t,i]=[Y.getWidth(this.contentEl),Y.getHeight(this.contentEl)];t!==this.defaultContentWidth&&(this.elementViewChild.nativeElement.style.width=""),i!==this.defaultContentHeight&&(this.elementViewChild.nativeElement.style.height="");const[r,o]=[Y.getWidth(this.elementViewChild.nativeElement),Y.getHeight(this.elementViewChild.nativeElement)];(this.both||this.horizontal)&&(this.elementViewChild.nativeElement.style.width=r<this.defaultWidth?r+"px":this._scrollWidth||this.defaultWidth+"px"),(this.both||this.vertical)&&(this.elementViewChild.nativeElement.style.height=o<this.defaultHeight?o+"px":this._scrollHeight||this.defaultHeight+"px"),this.contentEl.style.minHeight=this.contentEl.style.minWidth="",this.contentEl.style.position="",this.elementViewChild.nativeElement.style.contain=""}})}getLast(t=0,i=!1){return this._items?Math.min(i?(this._columns||this._items[0]).length:this._items.length,t):0}getContentPosition(){if(this.contentEl){const t=getComputedStyle(this.contentEl),i=parseFloat(t.paddingLeft)+Math.max(parseFloat(t.left)||0,0),r=parseFloat(t.paddingRight)+Math.max(parseFloat(t.right)||0,0),o=parseFloat(t.paddingTop)+Math.max(parseFloat(t.top)||0,0),s=parseFloat(t.paddingBottom)+Math.max(parseFloat(t.bottom)||0,0);return{left:i,right:r,top:o,bottom:s,x:i+r,y:o+s}}return{left:0,right:0,top:0,bottom:0,x:0,y:0}}setSize(){if(this.elementViewChild?.nativeElement){const t=this.elementViewChild.nativeElement.parentElement.parentElement,i=this._scrollWidth||`${this.elementViewChild.nativeElement.offsetWidth||t.offsetWidth}px`,r=this._scrollHeight||`${this.elementViewChild.nativeElement.offsetHeight||t.offsetHeight}px`,o=(s,a)=>this.elementViewChild.nativeElement.style[s]=a;this.both||this.horizontal?(o("height",r),o("width",i)):o("height",r)}}setSpacerSize(){if(this._items){const t=this.getContentPosition(),i=(r,o,s,a=0)=>this.spacerStyle={...this.spacerStyle,[`${r}`]:(o||[]).length*s+a+"px"};this.both?(i("height",this._items,this._itemSize[0],t.y),i("width",this._columns||this._items[1],this._itemSize[1],t.x)):this.horizontal?i("width",this._columns||this._items,this._itemSize,t.x):i("height",this._items,this._itemSize,t.y)}}setContentPosition(t){if(this.contentEl&&!this._appendOnly){const i=t?t.first:this.first,r=(s,a)=>s*a,o=(s=0,a=0)=>this.contentStyle={...this.contentStyle,transform:`translate3d(${s}px, ${a}px, 0)`};if(this.both)o(r(i.cols,this._itemSize[1]),r(i.rows,this._itemSize[0]));else{const s=r(i,this._itemSize);this.horizontal?o(s,0):o(0,s)}}}onScrollPositionChange(t){const i=t.target,r=this.getContentPosition(),o=(m,_)=>m?m>_?m-_:m:0,s=(m,_)=>Math.floor(m/(_||m)),a=(m,_,y,v,b,w)=>m<=b?b:w?y-v-b:_+b-1,l=(m,_,y,v,b,w,x)=>m<=w?0:Math.max(0,x?m<_?y:m-w:m>_?y:m-2*w),c=(m,_,y,v,b,w=!1)=>{let x=_+v+2*b;return m>=b&&(x+=b+1),this.getLast(x,w)},u=o(i.scrollTop,r.top),d=o(i.scrollLeft,r.left);let f=this.both?{rows:0,cols:0}:0,h=this.last,p=!1,g=this.lastScrollPos;if(this.both){const m=this.lastScrollPos.top<=u,_=this.lastScrollPos.left<=d;if(!this._appendOnly||this._appendOnly&&(m||_)){const y={rows:s(u,this._itemSize[0]),cols:s(d,this._itemSize[1])},v={rows:a(y.rows,this.first.rows,this.last.rows,this.numItemsInViewport.rows,this.d_numToleratedItems[0],m),cols:a(y.cols,this.first.cols,this.last.cols,this.numItemsInViewport.cols,this.d_numToleratedItems[1],_)};f={rows:l(y.rows,v.rows,this.first.rows,0,0,this.d_numToleratedItems[0],m),cols:l(y.cols,v.cols,this.first.cols,0,0,this.d_numToleratedItems[1],_)},h={rows:c(y.rows,f.rows,0,this.numItemsInViewport.rows,this.d_numToleratedItems[0]),cols:c(y.cols,f.cols,0,this.numItemsInViewport.cols,this.d_numToleratedItems[1],!0)},p=f.rows!==this.first.rows||h.rows!==this.last.rows||f.cols!==this.first.cols||h.cols!==this.last.cols||this.isRangeChanged,g={top:u,left:d}}}else{const m=this.horizontal?d:u,_=this.lastScrollPos<=m;if(!this._appendOnly||this._appendOnly&&_){const y=s(m,this._itemSize);f=l(y,a(y,this.first,this.last,this.numItemsInViewport,this.d_numToleratedItems,_),this.first,0,0,this.d_numToleratedItems,_),h=c(y,f,0,this.numItemsInViewport,this.d_numToleratedItems),p=f!==this.first||h!==this.last||this.isRangeChanged,g=m}}return{first:f,last:h,isRangeChanged:p,scrollPos:g}}onScrollChange(t){const{first:i,last:r,isRangeChanged:o,scrollPos:s}=this.onScrollPositionChange(t);if(o){const a={first:i,last:r};if(this.setContentPosition(a),this.first=i,this.last=r,this.lastScrollPos=s,this.handleEvents("onScrollIndexChange",a),this._lazy&&this.isPageChanged){const l={first:this._step?Math.min(this.getPageByFirst()*this._step,this.items.length-this._step):i,last:Math.min(this._step?(this.getPageByFirst()+1)*this._step:r,this.items.length)};(this.lazyLoadState.first!==l.first||this.lazyLoadState.last!==l.last)&&this.handleEvents("onLazyLoad",l),this.lazyLoadState=l}}}onContainerScroll(t){if(this.handleEvents("onScroll",{originalEvent:t}),this._delay&&this.isPageChanged){if(this.scrollTimeout&&clearTimeout(this.scrollTimeout),!this.d_loading&&this.showLoader){const{isRangeChanged:i}=this.onScrollPositionChange(t);(i||this._step&&this.isPageChanged)&&(this.d_loading=!0,this.cd.detectChanges())}this.scrollTimeout=setTimeout(()=>{this.onScrollChange(t),this.d_loading&&this.showLoader&&(!this._lazy||void 0===this._loading)&&(this.d_loading=!1,this.page=this.getPageByFirst(),this.cd.detectChanges())},this._delay)}else!this.d_loading&&this.onScrollChange(t)}bindResizeListener(){mf(this.platformId)&&(this.windowResizeListener||this.zone.runOutsideAngular(()=>{const t=this.document.defaultView,i=Y.isTouchDevice()?"orientationchange":"resize";this.windowResizeListener=this.renderer.listen(t,i,this.onWindowResize.bind(this))}))}unbindResizeListener(){this.windowResizeListener&&(this.windowResizeListener(),this.windowResizeListener=null)}onWindowResize(){this.resizeTimeout&&clearTimeout(this.resizeTimeout),this.resizeTimeout=setTimeout(()=>{if(Y.isVisible(this.elementViewChild?.nativeElement)){const[t,i]=[Y.getWidth(this.elementViewChild?.nativeElement),Y.getHeight(this.elementViewChild?.nativeElement)],[r,o]=[t!==this.defaultWidth,i!==this.defaultHeight];(this.both?r||o:this.horizontal?r:this.vertical&&o)&&this.zone.run(()=>{this.d_numToleratedItems=this._numToleratedItems,this.defaultWidth=t,this.defaultHeight=i,this.defaultContentWidth=Y.getWidth(this.contentEl),this.defaultContentHeight=Y.getHeight(this.contentEl),this.init()})}},this._resizeDelay)}handleEvents(t,i){return this.options&&this.options[t]?this.options[t](i):this[t].emit(i)}getContentOptions(){return{contentStyleClass:"p-scroller-content "+(this.d_loading?"p-scroller-loading":""),items:this.loadedItems,getItemOptions:t=>this.getOptions(t),loading:this.d_loading,getLoaderOptions:(t,i)=>this.getLoaderOptions(t,i),itemSize:this._itemSize,rows:this.loadedRows,columns:this.loadedColumns,spacerStyle:this.spacerStyle,contentStyle:this.contentStyle,vertical:this.vertical,horizontal:this.horizontal,both:this.both}}getOptions(t){const i=(this._items||[]).length,r=this.both?this.first.rows+t:this.first+t;return{index:r,count:i,first:0===r,last:r===i-1,even:r%2==0,odd:r%2!=0}}getLoaderOptions(t,i){const r=this.loaderArr.length;return{index:t,count:r,first:0===t,last:t===r-1,even:t%2==0,odd:t%2!=0,...i}}static \u0275fac=function(i){return new(i||e)(G(qn),G(fs),G(Ki),G(Ro),G(At))};static \u0275cmp=it({type:e,selectors:[["p-scroller"]],contentQueries:function(i,r,o){if(1&i&&Er(o,Bo,4),2&i){let s;Ct(s=xt())&&(r.templates=s)}},viewQuery:function(i,r){if(1&i&&(Fn(Ent,5),Fn(Snt,5)),2&i){let o;Ct(o=xt())&&(r.elementViewChild=o.first),Ct(o=xt())&&(r.contentViewChild=o.first)}},hostAttrs:[1,"p-scroller-viewport","p-element"],inputs:{id:"id",style:"style",styleClass:"styleClass",tabindex:"tabindex",items:"items",itemSize:"itemSize",scrollHeight:"scrollHeight",scrollWidth:"scrollWidth",orientation:"orientation",step:"step",delay:"delay",resizeDelay:"resizeDelay",appendOnly:"appendOnly",inline:"inline",lazy:"lazy",disabled:"disabled",loaderDisabled:"loaderDisabled",columns:"columns",showSpacer:"showSpacer",showLoader:"showLoader",numToleratedItems:"numToleratedItems",loading:"loading",autoSize:"autoSize",trackBy:"trackBy",options:"options"},outputs:{onLazyLoad:"onLazyLoad",onScroll:"onScroll",onScrollIndexChange:"onScrollIndexChange"},features:[vr],ngContentSelectors:Xnt,decls:3,vars:2,consts:[[4,"ngIf","ngIfElse"],["disabledContainer",""],[3,"ngStyle","ngClass","scroll"],["element",""],["buildInContent",""],["class","p-scroller-spacer",3,"ngStyle",4,"ngIf"],["class","p-scroller-loader",3,"ngClass",4,"ngIf"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"p-scroller-content",3,"ngClass","ngStyle"],["content",""],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"p-scroller-spacer",3,"ngStyle"],[1,"p-scroller-loader",3,"ngClass"],["buildInLoader",""],[4,"ngFor","ngForOf"],["buildInLoaderIcon",""],[3,"styleClass"],[4,"ngIf"]],template:function(i,r){if(1&i&&(Xa(),B(0,qnt,8,14,"ng-container",0),B(1,Ynt,2,1,"ng-template",null,1,Ja)),2&i){const o=Xi(2);k("ngIf",!r._disabled)("ngIfElse",o)}},dependencies:function(){return[_s,eg,No,Po,ys,HT]},styles:["@layer primeng{p-scroller{flex:1;outline:0 none}.p-scroller{position:relative;overflow:auto;contain:strict;transform:translateZ(0);will-change:scroll-position;outline:0 none}.p-scroller-content{position:absolute;top:0;left:0;min-height:100%;min-width:100%;will-change:transform}.p-scroller-spacer{position:absolute;top:0;left:0;height:1px;width:1px;transform-origin:0 0;pointer-events:none}.p-scroller-loader{position:sticky;top:0;left:0;width:100%;height:100%}.p-scroller-loader.p-component-overlay{display:flex;align-items:center;justify-content:center}.p-scroller-loading-icon{scale:2}.p-scroller-inline .p-scroller-content{position:static}}\n"],encapsulation:2})}return e})(),jT=(()=>{class e{static \u0275fac=function(i){return new(i||e)};static \u0275mod=Ut({type:e});static \u0275inj=Nt({imports:[ti,kn,HT,kn]})}return e})(),qT=(()=>{class e extends En{static \u0275fac=function(){let t;return function(r){return(t||(t=dt(e)))(r||e)}}();static \u0275cmp=it({type:e,selectors:[["ChevronDownIcon"]],standalone:!0,features:[qe,cn],decls:2,vars:5,consts:[["width","14","height","14","viewBox","0 0 14 14","fill","none","xmlns","http://www.w3.org/2000/svg"],["d","M7.01744 10.398C6.91269 10.3985 6.8089 10.378 6.71215 10.3379C6.61541 10.2977 6.52766 10.2386 6.45405 10.1641L1.13907 4.84913C1.03306 4.69404 0.985221 4.5065 1.00399 4.31958C1.02276 4.13266 1.10693 3.95838 1.24166 3.82747C1.37639 3.69655 1.55301 3.61742 1.74039 3.60402C1.92777 3.59062 2.11386 3.64382 2.26584 3.75424L7.01744 8.47394L11.769 3.75424C11.9189 3.65709 12.097 3.61306 12.2748 3.62921C12.4527 3.64535 12.6199 3.72073 12.7498 3.84328C12.8797 3.96582 12.9647 4.12842 12.9912 4.30502C13.0177 4.48162 12.9841 4.662 12.8958 4.81724L7.58083 10.1322C7.50996 10.2125 7.42344 10.2775 7.32656 10.3232C7.22968 10.3689 7.12449 10.3944 7.01744 10.398Z","fill","currentColor"]],template:function(i,r){1&i&&(yn(),q(0,"svg",0),_e(1,"path",1),W()),2&i&&(Xe(r.getClassNames()),ve("aria-label",r.ariaLabel)("aria-hidden",r.ariaHidden)("role",r.role))},encapsulation:2})}return e})(),Fue=(()=>{class e extends En{pathId;ngOnInit(){this.pathId="url(#"+Mr()+")"}static \u0275fac=function(){let t;return function(r){return(t||(t=dt(e)))(r||e)}}();static \u0275cmp=it({type:e,selectors:[["SearchIcon"]],standalone:!0,features:[qe,cn],decls:6,vars:7,consts:[["width","14","height","14","viewBox","0 0 14 14","fill","none","xmlns","http://www.w3.org/2000/svg"],["fill-rule","evenodd","clip-rule","evenodd","d","M2.67602 11.0265C3.6661 11.688 4.83011 12.0411 6.02086 12.0411C6.81149 12.0411 7.59438 11.8854 8.32483 11.5828C8.87005 11.357 9.37808 11.0526 9.83317 10.6803L12.9769 13.8241C13.0323 13.8801 13.0983 13.9245 13.171 13.9548C13.2438 13.985 13.3219 14.0003 13.4007 14C13.4795 14.0003 13.5575 13.985 13.6303 13.9548C13.7031 13.9245 13.7691 13.8801 13.8244 13.8241C13.9367 13.7116 13.9998 13.5592 13.9998 13.4003C13.9998 13.2414 13.9367 13.089 13.8244 12.9765L10.6807 9.8328C11.053 9.37773 11.3573 8.86972 11.5831 8.32452C11.8857 7.59408 12.0414 6.81119 12.0414 6.02056C12.0414 4.8298 11.6883 3.66579 11.0268 2.67572C10.3652 1.68564 9.42494 0.913972 8.32483 0.45829C7.22472 0.00260857 6.01418 -0.116618 4.84631 0.115686C3.67844 0.34799 2.60568 0.921393 1.76369 1.76338C0.921698 2.60537 0.348296 3.67813 0.115991 4.84601C-0.116313 6.01388 0.00291375 7.22441 0.458595 8.32452C0.914277 9.42464 1.68595 10.3649 2.67602 11.0265ZM3.35565 2.0158C4.14456 1.48867 5.07206 1.20731 6.02086 1.20731C7.29317 1.20731 8.51338 1.71274 9.41304 2.6124C10.3127 3.51206 10.8181 4.73226 10.8181 6.00457C10.8181 6.95337 10.5368 7.88088 10.0096 8.66978C9.48251 9.45868 8.73328 10.0736 7.85669 10.4367C6.98011 10.7997 6.01554 10.8947 5.08496 10.7096C4.15439 10.5245 3.2996 10.0676 2.62869 9.39674C1.95778 8.72583 1.50089 7.87104 1.31579 6.94046C1.13068 6.00989 1.22568 5.04532 1.58878 4.16874C1.95187 3.29215 2.56675 2.54292 3.35565 2.0158Z","fill","currentColor"],[3,"id"],["width","14","height","14","fill","white"]],template:function(i,r){1&i&&(yn(),q(0,"svg",0)(1,"g"),_e(2,"path",1),W(),q(3,"defs")(4,"clipPath",2),_e(5,"rect",3),W()()()),2&i&&(Xe(r.getClassNames()),ve("aria-label",r.ariaLabel)("aria-hidden",r.ariaHidden)("role",r.role),$(1),ve("clip-path",r.pathId),$(3),k("id",r.pathId))},encapsulation:2})}return e})();function Znt(e,n){if(1&e&&(q(0,"span"),pt(1),W()),2&e){const t=L();let i;$(1),Jn(null!==(i=t.label)&&void 0!==i?i:"empty")}}function Jnt(e,n){1&e&&wt(0)}const $v=function(e){return{height:e}},eit=function(e,n){return{"p-dropdown-item":!0,"p-highlight":e,"p-disabled":n}},Z6=function(e){return{$implicit:e}},tit=["container"],nit=["filter"],iit=["in"],rit=["editableInput"],oit=["items"],sit=["scroller"],ait=["overlay"];function lit(e,n){if(1&e&&(Ke(0),pt(1),Ye()),2&e){const t=L(2);$(1),Jn(t.label||"empty")}}function cit(e,n){1&e&&wt(0)}const uit=function(e){return{"p-dropdown-label p-inputtext":!0,"p-dropdown-label-empty":e}};function dit(e,n){if(1&e&&(q(0,"span",14),B(1,lit,2,1,"ng-container",8),B(2,cit,1,0,"ng-container",15),W()),2&e){const t=L();k("ngClass",_t(9,uit,null==t.label||0===t.label.length))("pTooltip",t.tooltip)("tooltipPosition",t.tooltipPosition)("positionStyle",t.tooltipPositionStyle)("tooltipStyleClass",t.tooltipStyleClass),ve("id",t.labelId),$(1),k("ngIf",!t.selectedItemTemplate),$(1),k("ngTemplateOutlet",t.selectedItemTemplate)("ngTemplateOutletContext",_t(11,Z6,t.selectedOption))}}const fit=function(e){return{"p-dropdown-label p-inputtext p-placeholder":!0,"p-dropdown-label-empty":e}};function hit(e,n){if(1&e&&(q(0,"span",16),pt(1),W()),2&e){const t=L();k("ngClass",_t(2,fit,null==t.placeholder||0===t.placeholder.length)),$(1),Jn(t.placeholder||"empty")}}function pit(e,n){if(1&e){const t=ft();q(0,"input",17,18),we("input",function(r){return J(t),ee(L().onEditableInputChange(r))})("focus",function(r){return J(t),ee(L().onEditableInputFocus(r))})("blur",function(r){return J(t),ee(L().onInputBlur(r))}),W()}if(2&e){const t=L();k("disabled",t.disabled),ve("maxlength",t.maxlength)("placeholder",t.placeholder)("aria-expanded",t.overlayVisible)}}function git(e,n){if(1&e){const t=ft();q(0,"TimesIcon",21),we("click",function(r){return J(t),ee(L(2).clear(r))}),W()}2&e&&k("styleClass","p-dropdown-clear-icon")}function mit(e,n){}function _it(e,n){1&e&&B(0,mit,0,0,"ng-template")}function yit(e,n){if(1&e){const t=ft();q(0,"span",22),we("click",function(r){return J(t),ee(L(2).clear(r))}),B(1,_it,1,0,null,23),W()}if(2&e){const t=L(2);$(1),k("ngTemplateOutlet",t.clearIconTemplate)}}function vit(e,n){if(1&e&&(Ke(0),B(1,git,1,1,"TimesIcon",19),B(2,yit,2,1,"span",20),Ye()),2&e){const t=L();$(1),k("ngIf",!t.clearIconTemplate),$(1),k("ngIf",t.clearIconTemplate)}}function bit(e,n){1&e&&_e(0,"span",26),2&e&&k("ngClass",L(2).dropdownIcon)}function wit(e,n){1&e&&_e(0,"ChevronDownIcon",27),2&e&&k("styleClass","p-dropdown-trigger-icon")}function Cit(e,n){if(1&e&&(Ke(0),B(1,bit,1,1,"span",24),B(2,wit,1,1,"ChevronDownIcon",25),Ye()),2&e){const t=L();$(1),k("ngIf",t.dropdownIcon),$(1),k("ngIf",!t.dropdownIcon)}}function xit(e,n){}function Eit(e,n){1&e&&B(0,xit,0,0,"ng-template")}function Sit(e,n){if(1&e&&(q(0,"span",28),B(1,Eit,1,0,null,23),W()),2&e){const t=L();$(1),k("ngTemplateOutlet",t.dropdownIconTemplate)}}function Tit(e,n){1&e&&wt(0)}function Dit(e,n){1&e&&wt(0)}const Nue=function(e){return{options:e}};function Iit(e,n){if(1&e&&(Ke(0),B(1,Dit,1,0,"ng-container",15),Ye()),2&e){const t=L(3);$(1),k("ngTemplateOutlet",t.filterTemplate)("ngTemplateOutletContext",_t(2,Nue,t.filterOptions))}}function Mit(e,n){1&e&&_e(0,"SearchIcon",27),2&e&&k("styleClass","p-dropdown-filter-icon")}function Ait(e,n){}function kit(e,n){1&e&&B(0,Ait,0,0,"ng-template")}function Oit(e,n){if(1&e&&(q(0,"span",41),B(1,kit,1,0,null,23),W()),2&e){const t=L(4);$(1),k("ngTemplateOutlet",t.filterIconTemplate)}}function Rit(e,n){if(1&e){const t=ft();q(0,"div",37)(1,"input",38,39),we("keydown.enter",function(r){return r.preventDefault()})("keydown",function(r){return J(t),ee(L(3).onKeydown(r,!1))})("input",function(r){return J(t),ee(L(3).onFilterInputChange(r))}),W(),B(3,Mit,1,1,"SearchIcon",25),B(4,Oit,2,1,"span",40),W()}if(2&e){const t=L(3);$(1),k("value",t.filterValue||""),ve("placeholder",t.filterPlaceholder)("aria-label",t.ariaFilterLabel)("aria-activedescendant",t.overlayVisible?"p-highlighted-option":t.labelId),$(2),k("ngIf",!t.filterIconTemplate),$(1),k("ngIf",t.filterIconTemplate)}}function Fit(e,n){if(1&e&&(q(0,"div",34),we("click",function(i){return i.stopPropagation()}),B(1,Iit,2,4,"ng-container",35),B(2,Rit,5,6,"ng-template",null,36,Ja),W()),2&e){const t=Xi(3),i=L(2);$(1),k("ngIf",i.filterTemplate)("ngIfElse",t)}}function Nit(e,n){1&e&&wt(0)}const Pue=function(e,n){return{$implicit:e,options:n}};function Pit(e,n){if(1&e&&B(0,Nit,1,0,"ng-container",15),2&e){const t=n.$implicit,i=n.options;L(2),k("ngTemplateOutlet",Xi(7))("ngTemplateOutletContext",jn(2,Pue,t,i))}}function Lit(e,n){1&e&&wt(0)}function $it(e,n){if(1&e&&B(0,Lit,1,0,"ng-container",15),2&e){const t=n.options;k("ngTemplateOutlet",L(4).loaderTemplate)("ngTemplateOutletContext",_t(2,Nue,t))}}function Bit(e,n){1&e&&(Ke(0),B(1,$it,1,4,"ng-template",44),Ye())}function Vit(e,n){if(1&e){const t=ft();q(0,"p-scroller",42,43),we("onLazyLoad",function(r){return J(t),ee(L(2).onLazyLoad.emit(r))}),B(2,Pit,1,5,"ng-template",13),B(3,Bit,2,0,"ng-container",8),W()}if(2&e){const t=L(2);ps(_t(8,$v,t.scrollHeight)),k("items",t.optionsToDisplay)("itemSize",t.virtualScrollItemSize||t._itemSize)("autoSize",!0)("lazy",t.lazy)("options",t.virtualScrollOptions),$(3),k("ngIf",t.loaderTemplate)}}function zit(e,n){1&e&&wt(0)}const Uit=function(){return{}};function Hit(e,n){if(1&e&&(Ke(0),B(1,zit,1,0,"ng-container",15),Ye()),2&e){L();const t=Xi(7),i=L();$(1),k("ngTemplateOutlet",t)("ngTemplateOutletContext",jn(3,Pue,i.optionsToDisplay,ff(2,Uit)))}}function jit(e,n){if(1&e&&(q(0,"span"),pt(1),W()),2&e){const t=L().$implicit,i=L(4);$(1),Jn(i.getOptionGroupLabel(t)||"empty")}}function qit(e,n){1&e&&wt(0)}function Wit(e,n){1&e&&wt(0)}const Lue=function(e,n){return{$implicit:e,selectedOption:n}};function Git(e,n){if(1&e&&(q(0,"li",50),B(1,jit,2,1,"span",8),B(2,qit,1,0,"ng-container",15),W(),B(3,Wit,1,0,"ng-container",15)),2&e){const t=n.$implicit,i=L(2).options,r=Xi(5),o=L(2);k("ngStyle",_t(6,$v,i.itemSize+"px")),$(1),k("ngIf",!o.groupTemplate),$(1),k("ngTemplateOutlet",o.groupTemplate)("ngTemplateOutletContext",_t(8,Z6,t)),$(1),k("ngTemplateOutlet",r)("ngTemplateOutletContext",jn(10,Lue,o.getOptionGroupChildren(t),o.selectedOption))}}function Kit(e,n){if(1&e&&(Ke(0),B(1,Git,4,13,"ng-template",49),Ye()),2&e){const t=L().$implicit;$(1),k("ngForOf",t)}}function Yit(e,n){1&e&&wt(0)}function Xit(e,n){if(1&e&&(Ke(0),B(1,Yit,1,0,"ng-container",15),Ye()),2&e){const t=L().$implicit,i=Xi(5),r=L(2);$(1),k("ngTemplateOutlet",i)("ngTemplateOutletContext",jn(2,Lue,t,r.selectedOption))}}function Qit(e,n){if(1&e){const t=ft();q(0,"p-dropdownItem",51),we("onClick",function(r){return J(t),ee(L(4).onItemClick(r))}),W()}if(2&e){const t=n.$implicit,i=L().selectedOption,r=L(3);k("option",t)("selected",i==t)("label",r.getOptionLabel(t))("disabled",r.isOptionDisabled(t))("template",r.itemTemplate)}}function Zit(e,n){1&e&&B(0,Qit,1,5,"ng-template",49),2&e&&k("ngForOf",n.$implicit)}function Jit(e,n){if(1&e&&(Ke(0),pt(1),Ye()),2&e){const t=L(4);$(1),Za(" ",t.emptyFilterMessageLabel," ")}}function ert(e,n){1&e&&wt(0,null,53)}function trt(e,n){if(1&e&&(q(0,"li",52),B(1,Jit,2,1,"ng-container",35),B(2,ert,2,0,"ng-container",23),W()),2&e){const t=L().options,i=L(2);k("ngStyle",_t(4,$v,t.itemSize+"px")),$(1),k("ngIf",!i.emptyFilterTemplate&&!i.emptyTemplate)("ngIfElse",i.emptyFilter),$(1),k("ngTemplateOutlet",i.emptyFilterTemplate||i.emptyTemplate)}}function nrt(e,n){if(1&e&&(Ke(0),pt(1),Ye()),2&e){const t=L(4);$(1),Za(" ",t.emptyMessageLabel," ")}}function irt(e,n){1&e&&wt(0,null,54)}function rrt(e,n){if(1&e&&(q(0,"li",52),B(1,nrt,2,1,"ng-container",35),B(2,irt,2,0,"ng-container",23),W()),2&e){const t=L().options,i=L(2);k("ngStyle",_t(4,$v,t.itemSize+"px")),$(1),k("ngIf",!i.emptyTemplate)("ngIfElse",i.empty),$(1),k("ngTemplateOutlet",i.emptyTemplate)}}function ort(e,n){if(1&e&&(q(0,"ul",45,46),B(2,Kit,2,1,"ng-container",8),B(3,Xit,2,5,"ng-container",8),B(4,Zit,1,1,"ng-template",null,47,Ja),B(6,trt,3,6,"li",48),B(7,rrt,3,6,"li",48),W()),2&e){const t=n.options,i=L(2);ps(t.contentStyle),k("ngClass",t.contentStyleClass),ve("id",i.listId),$(2),k("ngIf",i.group),$(1),k("ngIf",!i.group),$(3),k("ngIf",i.filterValue&&i.isEmpty()),$(1),k("ngIf",!i.filterValue&&i.isEmpty())}}function srt(e,n){1&e&&wt(0)}function art(e,n){if(1&e&&(q(0,"div",29),B(1,Tit,1,0,"ng-container",23),B(2,Fit,4,2,"div",30),q(3,"div",31),B(4,Vit,4,10,"p-scroller",32),B(5,Hit,2,6,"ng-container",8),B(6,ort,8,8,"ng-template",null,33,Ja),W(),B(8,srt,1,0,"ng-container",23),W()),2&e){const t=L();Xe(t.panelStyleClass),k("ngClass","p-dropdown-panel p-component")("ngStyle",t.panelStyle),$(1),k("ngTemplateOutlet",t.headerTemplate),$(1),k("ngIf",t.filter),$(1),iw("max-height",t.virtualScroll?"auto":t.scrollHeight||"auto"),$(1),k("ngIf",t.virtualScroll),$(1),k("ngIf",!t.virtualScroll),$(3),k("ngTemplateOutlet",t.footerTemplate)}}const lrt=function(e,n,t,i){return{"p-dropdown p-component":!0,"p-disabled":e,"p-dropdown-open":n,"p-focus":t,"p-dropdown-clearable":i}},crt={provide:Qi,useExisting:Rt(()=>WT),multi:!0};let urt=(()=>{class e{option;selected;label;disabled;visible;itemSize;template;onClick=new De;onOptionClick(t){this.onClick.emit({originalEvent:t,option:this.option})}static \u0275fac=function(i){return new(i||e)};static \u0275cmp=it({type:e,selectors:[["p-dropdownItem"]],hostAttrs:[1,"p-element"],inputs:{option:"option",selected:"selected",label:"label",disabled:"disabled",visible:"visible",itemSize:"itemSize",template:"template"},outputs:{onClick:"onClick"},decls:3,vars:15,consts:[["role","option","pRipple","",3,"ngStyle","id","ngClass","click"],[4,"ngIf"],[4,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(i,r){1&i&&(q(0,"li",0),we("click",function(s){return r.onOptionClick(s)}),B(1,Znt,2,1,"span",1),B(2,Jnt,1,0,"ng-container",2),W()),2&i&&(k("ngStyle",_t(8,$v,r.itemSize+"px"))("id",r.selected?"p-highlighted-option":"")("ngClass",jn(10,eit,r.selected,r.disabled)),ve("aria-label",r.label)("aria-selected",r.selected),$(1),k("ngIf",!r.template),$(1),k("ngTemplateOutlet",r.template)("ngTemplateOutletContext",_t(13,Z6,r.option)))},dependencies:[_s,No,Po,ys,yg],encapsulation:2})}return e})(),WT=(()=>{class e{el;renderer;cd;zone;filterService;config;scrollHeight="200px";filter;name;style;panelStyle;styleClass;panelStyleClass;readonly;required;editable;appendTo;tabindex=0;placeholder;filterPlaceholder;filterLocale;inputId;dataKey;filterBy;autofocus;resetFilterOnHide=!1;dropdownIcon;optionLabel;optionValue;optionDisabled;optionGroupLabel;optionGroupChildren="items";autoDisplayFirst=!0;group;showClear;emptyFilterMessage="";emptyMessage="";lazy=!1;virtualScroll;virtualScrollItemSize;virtualScrollOptions;overlayOptions;ariaFilterLabel;ariaLabel;ariaLabelledBy;filterMatchMode="contains";maxlength;tooltip="";tooltipPosition="right";tooltipPositionStyle="absolute";tooltipStyleClass;autofocusFilter=!0;get disabled(){return this._disabled}set disabled(t){t&&(this.focused=!1,this.overlayVisible&&this.hide()),this._disabled=t,this.cd.destroyed||this.cd.detectChanges()}get itemSize(){return this._itemSize}set itemSize(t){this._itemSize=t,console.warn("The itemSize property is deprecated, use virtualScrollItemSize property instead.")}_itemSize;get autoZIndex(){return this._autoZIndex}set autoZIndex(t){this._autoZIndex=t,console.warn("The autoZIndex property is deprecated since v14.2.0, use overlayOptions property instead.")}_autoZIndex;get baseZIndex(){return this._baseZIndex}set baseZIndex(t){this._baseZIndex=t,console.warn("The baseZIndex property is deprecated since v14.2.0, use overlayOptions property instead.")}_baseZIndex;get showTransitionOptions(){return this._showTransitionOptions}set showTransitionOptions(t){this._showTransitionOptions=t,console.warn("The showTransitionOptions property is deprecated since v14.2.0, use overlayOptions property instead.")}_showTransitionOptions;get hideTransitionOptions(){return this._hideTransitionOptions}set hideTransitionOptions(t){this._hideTransitionOptions=t,console.warn("The hideTransitionOptions property is deprecated since v14.2.0, use overlayOptions property instead.")}_hideTransitionOptions;get filterValue(){return this._filterValue}set filterValue(t){this._filterValue=t,this.activateFilter()}get options(){return this._options}set options(t){this._options=t,this.optionsToDisplay=this._options,this.updateSelectedOption(this.value),this.selectedOption=this.findOption(this.value,this.optionsToDisplay),!this.selectedOption&&ht.isNotEmpty(this.value)&&!this.editable&&(this.value=null,this.onModelChange(this.value)),this.optionsChanged=!0,this._filterValue&&this._filterValue.length&&this.activateFilter()}onChange=new De;onFilter=new De;onFocus=new De;onBlur=new De;onClick=new De;onShow=new De;onHide=new De;onClear=new De;onLazyLoad=new De;containerViewChild;filterViewChild;accessibleViewChild;editableInputViewChild;itemsViewChild;scroller;overlayViewChild;templates;_disabled;itemsWrapper;itemTemplate;groupTemplate;loaderTemplate;selectedItemTemplate;headerTemplate;filterTemplate;footerTemplate;emptyFilterTemplate;emptyTemplate;dropdownIconTemplate;clearIconTemplate;filterIconTemplate;filterOptions;selectedOption;_options;value;onModelChange=()=>{};onModelTouched=()=>{};optionsToDisplay;hover;focused;overlayVisible;optionsChanged;panel;dimensionsUpdated;hoveredItem;selectedOptionUpdated;_filterValue;searchValue;searchIndex;searchTimeout;previousSearchChar;currentSearchChar;preventModelTouched;id=Mr();labelId;listId;constructor(t,i,r,o,s,a){this.el=t,this.renderer=i,this.cd=r,this.zone=o,this.filterService=s,this.config=a}ngAfterContentInit(){this.templates.forEach(t=>{switch(t.getType()){case"item":default:this.itemTemplate=t.template;break;case"selectedItem":this.selectedItemTemplate=t.template;break;case"header":this.headerTemplate=t.template;break;case"filter":this.filterTemplate=t.template;break;case"footer":this.footerTemplate=t.template;break;case"emptyfilter":this.emptyFilterTemplate=t.template;break;case"empty":this.emptyTemplate=t.template;break;case"group":this.groupTemplate=t.template;break;case"loader":this.loaderTemplate=t.template;break;case"dropdownicon":this.dropdownIconTemplate=t.template;break;case"clearicon":this.clearIconTemplate=t.template;break;case"filtericon":this.filterIconTemplate=t.template}})}ngOnInit(){this.optionsToDisplay=this.options,this.updateSelectedOption(null),this.labelId=this.id+"_label",this.listId=this.id+"_list",this.filterBy&&(this.filterOptions={filter:t=>this.onFilterInputChange(t),reset:()=>this.resetFilter()})}ngAfterViewInit(){this.editable&&this.updateEditableLabel()}get label(){return"number"==typeof this.selectedOption&&(this.selectedOption=this.selectedOption.toString()),this.selectedOption?this.getOptionLabel(this.selectedOption):null}get emptyMessageLabel(){return this.emptyMessage||this.config.getTranslation(ws.EMPTY_MESSAGE)}get emptyFilterMessageLabel(){return this.emptyFilterMessage||this.config.getTranslation(ws.EMPTY_FILTER_MESSAGE)}get filled(){return"string"==typeof this.value?!!this.value:this.value||null!=this.value||null!=this.value}get isVisibleClearIcon(){return null!=this.value&&""!==this.value&&this.showClear&&!this.disabled}updateEditableLabel(){this.editableInputViewChild&&this.editableInputViewChild.nativeElement&&(this.editableInputViewChild.nativeElement.value=this.selectedOption?this.getOptionLabel(this.selectedOption):this.value||"")}getOptionLabel(t){return this.optionLabel?ht.resolveFieldData(t,this.optionLabel):t&&void 0!==t.label?t.label:t}getOptionValue(t){return this.optionValue?ht.resolveFieldData(t,this.optionValue):!this.optionLabel&&t&&void 0!==t.value?t.value:t}isOptionDisabled(t){return this.optionDisabled?ht.resolveFieldData(t,this.optionDisabled):!(!t||void 0===t.disabled)&&t.disabled}getOptionGroupLabel(t){return this.optionGroupLabel?ht.resolveFieldData(t,this.optionGroupLabel):t&&void 0!==t.label?t.label:t}getOptionGroupChildren(t){return this.optionGroupChildren?ht.resolveFieldData(t,this.optionGroupChildren):t.items}onItemClick(t){const i=t.option;this.isOptionDisabled(i)||(this.selectItem(t.originalEvent,i),this.accessibleViewChild?.nativeElement.focus({preventScroll:!0})),setTimeout(()=>{this.hide()},1)}selectItem(t,i){this.selectedOption!=i&&(this.selectedOption=i,this.value=this.getOptionValue(i),this.onModelChange(this.value),this.updateEditableLabel(),this.onChange.emit({originalEvent:t,value:this.value}))}ngAfterViewChecked(){if(this.optionsChanged&&this.overlayVisible&&(this.optionsChanged=!1,this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.overlayViewChild&&this.overlayViewChild.alignOverlay()},1)})),this.selectedOptionUpdated&&this.itemsWrapper){let t=Y.findSingle(this.overlayViewChild?.overlayViewChild?.nativeElement,"li.p-highlight");t&&Y.scrollInView(this.itemsWrapper,t),this.selectedOptionUpdated=!1}}writeValue(t){this.filter&&this.resetFilter(),this.value=t,this.updateSelectedOption(t),this.updateEditableLabel(),this.cd.markForCheck()}resetFilter(){this._filterValue=null,this.filterViewChild&&this.filterViewChild.nativeElement&&(this.filterViewChild.nativeElement.value=""),this.optionsToDisplay=this.options}updateSelectedOption(t){this.selectedOption=this.findOption(t,this.optionsToDisplay),this.autoDisplayFirst&&!this.placeholder&&!this.selectedOption&&this.optionsToDisplay&&this.optionsToDisplay.length&&!this.editable&&(this.selectedOption=this.group?this.getOptionGroupChildren(this.optionsToDisplay[0])[0]:this.optionsToDisplay[0],this.value=this.getOptionValue(this.selectedOption),this.onModelChange(this.value)),this.selectedOptionUpdated=!0}registerOnChange(t){this.onModelChange=t}registerOnTouched(t){this.onModelTouched=t}setDisabledState(t){this.disabled=t,this.cd.markForCheck()}onMouseclick(t){this.disabled||this.readonly||this.isInputClick(t)||(this.onClick.emit(t),this.accessibleViewChild?.nativeElement.focus({preventScroll:!0}),this.overlayVisible?this.hide():this.show(),this.cd.detectChanges())}isInputClick(t){const i=t.target;return Y.hasClass(i,"p-dropdown-clear-icon")||null!==i.closest(".p-dropdown-clear-icon")||i.isSameNode(this.accessibleViewChild?.nativeElement)||this.editableInputViewChild&&i.isSameNode(this.editableInputViewChild.nativeElement)}isEmpty(){return!this.optionsToDisplay||this.optionsToDisplay&&0===this.optionsToDisplay.length}onEditableInputFocus(t){this.focused=!0,this.hide(),this.onFocus.emit(t)}onEditableInputChange(t){this.value=t.target.value,this.updateSelectedOption(this.value),this.onModelChange(this.value),this.onChange.emit({originalEvent:t,value:this.value})}show(){this.overlayVisible=!0,this.cd.markForCheck()}onOverlayAnimationStart(t){if("visible"===t.toState){if(this.itemsWrapper=Y.findSingle(this.overlayViewChild?.overlayViewChild?.nativeElement,this.virtualScroll?".p-scroller":".p-dropdown-items-wrapper"),this.virtualScroll&&this.scroller?.setContentEl(this.itemsViewChild?.nativeElement),this.options&&this.options.length)if(this.virtualScroll){const i=this.selectedOption?this.findOptionIndex(this.getOptionValue(this.selectedOption),this.optionsToDisplay):-1;-1!==i&&this.scroller?.scrollToIndex(i)}else{let i=Y.findSingle(this.itemsWrapper,".p-dropdown-item.p-highlight");i&&i.scrollIntoView({block:"nearest",inline:"center"})}this.filterViewChild&&this.filterViewChild.nativeElement&&(this.preventModelTouched=!0,this.autofocusFilter&&this.filterViewChild.nativeElement.focus()),this.onShow.emit(t)}"void"===t.toState&&(this.itemsWrapper=null,this.onModelTouched(),this.onHide.emit(t))}hide(){this.overlayVisible=!1,this.filter&&this.resetFilterOnHide&&this.resetFilter(),this.cd.markForCheck()}onInputFocus(t){this.focused=!0,this.onFocus.emit(t)}onInputBlur(t){this.focused=!1,this.onBlur.emit(t),this.preventModelTouched||this.onModelTouched(),this.preventModelTouched=!1}findPrevEnabledOption(t){let i;if(this.optionsToDisplay&&this.optionsToDisplay.length){for(let r=t-1;0<=r;r--){let o=this.optionsToDisplay[r];if(!this.isOptionDisabled(o)){i=o;break}}if(!i)for(let r=this.optionsToDisplay.length-1;r>=t;r--){let o=this.optionsToDisplay[r];if(!this.isOptionDisabled(o)){i=o;break}}}return i}findNextEnabledOption(t){let i;if(this.optionsToDisplay&&this.optionsToDisplay.length){for(let r=t+1;r<this.optionsToDisplay.length;r++){let o=this.optionsToDisplay[r];if(!this.isOptionDisabled(o)){i=o;break}}if(!i)for(let r=0;r<t;r++){let o=this.optionsToDisplay[r];if(!this.isOptionDisabled(o)){i=o;break}}}return i}onKeydown(t,i){if(!this.readonly&&this.optionsToDisplay&&null!==this.optionsToDisplay.length)switch(t.code){case"ArrowDown":if(!this.overlayVisible&&t.altKey)this.show();else if(this.group){let r=this.selectedOption?this.findOptionGroupIndex(this.getOptionValue(this.selectedOption),this.optionsToDisplay):-1;if(-1!==r){let o=r.itemIndex+1;o<this.getOptionGroupChildren(this.optionsToDisplay[r.groupIndex]).length?(this.selectItem(t,this.getOptionGroupChildren(this.optionsToDisplay[r.groupIndex])[o]),this.selectedOptionUpdated=!0):this.optionsToDisplay[r.groupIndex+1]&&(this.selectItem(t,this.getOptionGroupChildren(this.optionsToDisplay[r.groupIndex+1])[0]),this.selectedOptionUpdated=!0)}else this.optionsToDisplay&&this.optionsToDisplay.length>0&&this.selectItem(t,this.getOptionGroupChildren(this.optionsToDisplay[0])[0])}else{let r=this.selectedOption?this.findOptionIndex(this.getOptionValue(this.selectedOption),this.optionsToDisplay):-1,o=this.findNextEnabledOption(r);o&&(this.selectItem(t,o),this.selectedOptionUpdated=!0)}t.preventDefault();break;case"ArrowUp":if(this.group){let r=this.selectedOption?this.findOptionGroupIndex(this.getOptionValue(this.selectedOption),this.optionsToDisplay):-1;if(-1!==r){let o=r.itemIndex-1;if(o>=0)this.selectItem(t,this.getOptionGroupChildren(this.optionsToDisplay[r.groupIndex])[o]),this.selectedOptionUpdated=!0;else if(o<0){let s=this.optionsToDisplay[r.groupIndex-1];s&&(this.selectItem(t,this.getOptionGroupChildren(s)[this.getOptionGroupChildren(s).length-1]),this.selectedOptionUpdated=!0)}}}else{let r=this.selectedOption?this.findOptionIndex(this.getOptionValue(this.selectedOption),this.optionsToDisplay):-1,o=this.findPrevEnabledOption(r);o&&(this.selectItem(t,o),this.selectedOptionUpdated=!0)}t.preventDefault();break;case"Space":i&&(this.overlayVisible?this.hide():this.show(),t.preventDefault());break;case"Enter":this.overlayVisible&&(!this.filter||this.optionsToDisplay&&this.optionsToDisplay.length>0)?this.hide():this.overlayVisible||this.show(),t.preventDefault();break;case"Escape":this.overlayVisible&&this.hide(),t.preventDefault();break;case"Tab":this.onTabKey();break;default:i&&!t.metaKey&&17!==t.which&&this.search(t)}}onTabKey(){this.overlayVisible&&this.hide()}search(t){this.searchTimeout&&clearTimeout(this.searchTimeout);const i=t.key;let r;if(this.previousSearchChar=this.currentSearchChar,this.currentSearchChar=i,this.searchValue=this.previousSearchChar===this.currentSearchChar?this.currentSearchChar:this.searchValue?this.searchValue+i:i,this.group){let o=this.selectedOption?this.findOptionGroupIndex(this.getOptionValue(this.selectedOption),this.optionsToDisplay):{groupIndex:0,itemIndex:0};r=this.searchOptionWithinGroup(o)}else{let o=this.selectedOption?this.findOptionIndex(this.getOptionValue(this.selectedOption),this.optionsToDisplay):-1;r=this.searchOption(++o)}r&&!this.isOptionDisabled(r)&&(this.selectItem(t,r),this.selectedOptionUpdated=!0),this.searchTimeout=setTimeout(()=>{this.searchValue=null},250)}searchOption(t){let i;return this.searchValue&&(i=this.searchOptionInRange(t,this.optionsToDisplay.length),i||(i=this.searchOptionInRange(0,t))),i}searchOptionInRange(t,i){for(let r=t;r<i;r++){let o=this.optionsToDisplay[r];if(this.getOptionLabel(o).toLocaleLowerCase(this.filterLocale).startsWith(this.searchValue.toLocaleLowerCase(this.filterLocale))&&!this.isOptionDisabled(o))return o}return null}searchOptionWithinGroup(t){if(this.searchValue&&this.optionsToDisplay){for(let r=t.groupIndex;r<this.optionsToDisplay.length;r++)for(let o=t.groupIndex===r?t.itemIndex+1:0;o<this.getOptionGroupChildren(this.optionsToDisplay[r]).length;o++){let s=this.getOptionGroupChildren(this.optionsToDisplay[r])[o];if(this.getOptionLabel(s).toLocaleLowerCase(this.filterLocale).startsWith(this.searchValue.toLocaleLowerCase(this.filterLocale))&&!this.isOptionDisabled(s))return s}for(let r=0;r<=t.groupIndex;r++)for(let o=0;o<(t.groupIndex===r?t.itemIndex:this.getOptionGroupChildren(this.optionsToDisplay[r]).length);o++){let s=this.getOptionGroupChildren(this.optionsToDisplay[r])[o];if(this.getOptionLabel(s).toLocaleLowerCase(this.filterLocale).startsWith(this.searchValue.toLocaleLowerCase(this.filterLocale))&&!this.isOptionDisabled(s))return s}}return null}findOptionIndex(t,i){let r=-1;if(i)for(let o=0;o<i.length;o++)if(null==t&&null==this.getOptionValue(i[o])||ht.equals(t,this.getOptionValue(i[o]),this.dataKey)){r=o;break}return r}findOptionGroupIndex(t,i){let r,o;if(i)for(let s=0;s<i.length&&(r=s,o=this.findOptionIndex(t,this.getOptionGroupChildren(i[s])),-1===o);s++);return-1!==o?{groupIndex:r,itemIndex:o}:-1}findOption(t,i,r){if(this.group&&!r){let o;if(i&&i.length)for(let s of i)if(o=this.findOption(t,this.getOptionGroupChildren(s),!0),o)break;return o}{let o=this.findOptionIndex(t,i);return-1!=o?i[o]:null}}onFilterInputChange(t){let i=t.target.value?.trim();i&&i.length?(this._filterValue=i,this.activateFilter()):(this._filterValue=null,this.optionsToDisplay=this.options),this.virtualScroll&&this.scroller?.scrollToIndex(0),this.optionsChanged=!0,this.onFilter.emit({originalEvent:t,filter:this._filterValue})}activateFilter(){let t=(this.filterBy||this.optionLabel||"label").split(",");if(this.options&&this.options.length){if(this.group){let i=[];for(let r of this.options){let o=this.filterService.filter(this.getOptionGroupChildren(r),t,this.filterValue,this.filterMatchMode,this.filterLocale);o&&o.length&&i.push({...r,[this.optionGroupChildren]:o})}this.optionsToDisplay=i}else this.optionsToDisplay=this.filterService.filter(this.options,t,this.filterValue,this.filterMatchMode,this.filterLocale);this.optionsChanged=!0}}applyFocus(){this.editable?Y.findSingle(this.el.nativeElement,".p-dropdown-label.p-inputtext").focus():Y.findSingle(this.el.nativeElement,"input[readonly]").focus()}focus(){this.applyFocus()}clear(t){this.value=null,this.onModelChange(this.value),this.onChange.emit({originalEvent:t,value:this.value}),this.updateSelectedOption(this.value),this.updateEditableLabel(),this.onClear.emit(t)}static \u0275fac=function(i){return new(i||e)(G(pn),G(Ki),G(Ro),G(At),G(_De),G(Y_))};static \u0275cmp=it({type:e,selectors:[["p-dropdown"]],contentQueries:function(i,r,o){if(1&i&&Er(o,Bo,4),2&i){let s;Ct(s=xt())&&(r.templates=s)}},viewQuery:function(i,r){if(1&i&&(Fn(tit,5),Fn(nit,5),Fn(iit,5),Fn(rit,5),Fn(oit,5),Fn(sit,5),Fn(ait,5)),2&i){let o;Ct(o=xt())&&(r.containerViewChild=o.first),Ct(o=xt())&&(r.filterViewChild=o.first),Ct(o=xt())&&(r.accessibleViewChild=o.first),Ct(o=xt())&&(r.editableInputViewChild=o.first),Ct(o=xt())&&(r.itemsViewChild=o.first),Ct(o=xt())&&(r.scroller=o.first),Ct(o=xt())&&(r.overlayViewChild=o.first)}},hostAttrs:[1,"p-element","p-inputwrapper"],hostVars:4,hostBindings:function(i,r){2&i&&fu("p-inputwrapper-filled",r.filled)("p-inputwrapper-focus",r.focused||r.overlayVisible)},inputs:{scrollHeight:"scrollHeight",filter:"filter",name:"name",style:"style",panelStyle:"panelStyle",styleClass:"styleClass",panelStyleClass:"panelStyleClass",readonly:"readonly",required:"required",editable:"editable",appendTo:"appendTo",tabindex:"tabindex",placeholder:"placeholder",filterPlaceholder:"filterPlaceholder",filterLocale:"filterLocale",inputId:"inputId",dataKey:"dataKey",filterBy:"filterBy",autofocus:"autofocus",resetFilterOnHide:"resetFilterOnHide",dropdownIcon:"dropdownIcon",optionLabel:"optionLabel",optionValue:"optionValue",optionDisabled:"optionDisabled",optionGroupLabel:"optionGroupLabel",optionGroupChildren:"optionGroupChildren",autoDisplayFirst:"autoDisplayFirst",group:"group",showClear:"showClear",emptyFilterMessage:"emptyFilterMessage",emptyMessage:"emptyMessage",lazy:"lazy",virtualScroll:"virtualScroll",virtualScrollItemSize:"virtualScrollItemSize",virtualScrollOptions:"virtualScrollOptions",overlayOptions:"overlayOptions",ariaFilterLabel:"ariaFilterLabel",ariaLabel:"ariaLabel",ariaLabelledBy:"ariaLabelledBy",filterMatchMode:"filterMatchMode",maxlength:"maxlength",tooltip:"tooltip",tooltipPosition:"tooltipPosition",tooltipPositionStyle:"tooltipPositionStyle",tooltipStyleClass:"tooltipStyleClass",autofocusFilter:"autofocusFilter",disabled:"disabled",itemSize:"itemSize",autoZIndex:"autoZIndex",baseZIndex:"baseZIndex",showTransitionOptions:"showTransitionOptions",hideTransitionOptions:"hideTransitionOptions",filterValue:"filterValue",options:"options"},outputs:{onChange:"onChange",onFilter:"onFilter",onFocus:"onFocus",onBlur:"onBlur",onClick:"onClick",onShow:"onShow",onHide:"onHide",onClear:"onClear",onLazyLoad:"onLazyLoad"},features:[Gt([crt])],decls:15,vars:33,consts:[[3,"ngClass","ngStyle","click"],["container",""],[1,"p-hidden-accessible"],["type","text","readonly","","aria-haspopup","listbox","aria-haspopup","listbox","pAutoFocus","","role","combobox",3,"disabled","autofocus","focus","blur","keydown"],["in",""],[3,"ngClass","pTooltip","tooltipPosition","positionStyle","tooltipStyleClass",4,"ngIf"],[3,"ngClass",4,"ngIf"],["type","text","class","p-dropdown-label p-inputtext","aria-haspopup","listbox",3,"disabled","input","focus","blur",4,"ngIf"],[4,"ngIf"],["role","button","aria-label","dropdown trigger","aria-haspopup","listbox",1,"p-dropdown-trigger"],["class","p-dropdown-trigger-icon",4,"ngIf"],[3,"visible","options","target","appendTo","autoZIndex","baseZIndex","showTransitionOptions","hideTransitionOptions","visibleChange","onAnimationStart","onHide"],["overlay",""],["pTemplate","content"],[3,"ngClass","pTooltip","tooltipPosition","positionStyle","tooltipStyleClass"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[3,"ngClass"],["type","text","aria-haspopup","listbox",1,"p-dropdown-label","p-inputtext",3,"disabled","input","focus","blur"],["editableInput",""],[3,"styleClass","click",4,"ngIf"],["class","p-dropdown-clear-icon",3,"click",4,"ngIf"],[3,"styleClass","click"],[1,"p-dropdown-clear-icon",3,"click"],[4,"ngTemplateOutlet"],["class","p-dropdown-trigger-icon",3,"ngClass",4,"ngIf"],[3,"styleClass",4,"ngIf"],[1,"p-dropdown-trigger-icon",3,"ngClass"],[3,"styleClass"],[1,"p-dropdown-trigger-icon"],[3,"ngClass","ngStyle"],["class","p-dropdown-header",3,"click",4,"ngIf"],[1,"p-dropdown-items-wrapper"],[3,"items","style","itemSize","autoSize","lazy","options","onLazyLoad",4,"ngIf"],["buildInItems",""],[1,"p-dropdown-header",3,"click"],[4,"ngIf","ngIfElse"],["builtInFilterElement",""],[1,"p-dropdown-filter-container"],["type","text","autocomplete","off",1,"p-dropdown-filter","p-inputtext","p-component",3,"value","keydown.enter","keydown","input"],["filter",""],["class","p-dropdown-filter-icon",4,"ngIf"],[1,"p-dropdown-filter-icon"],[3,"items","itemSize","autoSize","lazy","options","onLazyLoad"],["scroller",""],["pTemplate","loader"],["role","listbox",1,"p-dropdown-items",3,"ngClass"],["items",""],["itemslist",""],["class","p-dropdown-empty-message",3,"ngStyle",4,"ngIf"],["ngFor","",3,"ngForOf"],[1,"p-dropdown-item-group",3,"ngStyle"],[3,"option","selected","label","disabled","template","onClick"],[1,"p-dropdown-empty-message",3,"ngStyle"],["emptyFilter",""],["empty",""]],template:function(i,r){1&i&&(q(0,"div",0,1),we("click",function(s){return r.onMouseclick(s)}),q(2,"div",2)(3,"input",3,4),we("focus",function(s){return r.onInputFocus(s)})("blur",function(s){return r.onInputBlur(s)})("keydown",function(s){return r.onKeydown(s,!0)}),W()(),B(5,dit,3,13,"span",5),B(6,hit,2,4,"span",6),B(7,pit,2,4,"input",7),B(8,vit,3,2,"ng-container",8),q(9,"div",9),B(10,Cit,3,2,"ng-container",8),B(11,Sit,2,1,"span",10),W(),q(12,"p-overlay",11,12),we("visibleChange",function(s){return r.overlayVisible=s})("onAnimationStart",function(s){return r.onOverlayAnimationStart(s)})("onHide",function(){return r.hide()}),B(14,art,9,11,"ng-template",13),W()()),2&i&&(Xe(r.styleClass),k("ngClass",SM(28,lrt,r.disabled,r.overlayVisible,r.focused,r.showClear&&!r.disabled))("ngStyle",r.style),$(3),k("disabled",r.disabled)("autofocus",r.autofocus),ve("id",r.inputId)("placeholder",r.placeholder)("aria-label",r.ariaLabel)("aria-expanded",!1)("aria-labelledby",r.ariaLabelledBy)("tabindex",r.disabled?-1:r.tabindex)("aria-activedescendant",r.overlayVisible?r.labelId:null),$(2),k("ngIf",!r.editable&&null!=r.label),$(1),k("ngIf",!r.editable&&null==r.label),$(1),k("ngIf",r.editable),$(1),k("ngIf",r.isVisibleClearIcon),$(1),ve("aria-expanded",r.overlayVisible),$(1),k("ngIf",!r.dropdownIconTemplate),$(1),k("ngIf",r.dropdownIconTemplate),$(1),k("visible",r.overlayVisible)("options",r.overlayOptions)("target","@parent")("appendTo",r.appendTo)("autoZIndex",r.autoZIndex)("baseZIndex",r.baseZIndex)("showTransitionOptions",r.showTransitionOptions)("hideTransitionOptions",r.hideTransitionOptions))},dependencies:function(){return[_s,eg,No,Po,ys,kue,Bo,IW,Qnt,lnt,ol,qT,Fue,urt]},styles:["@layer primeng{.p-dropdown{display:inline-flex;cursor:pointer;position:relative;-webkit-user-select:none;user-select:none}.p-dropdown-clear-icon{position:absolute;top:50%;margin-top:-.5rem}.p-dropdown-trigger{display:flex;align-items:center;justify-content:center;flex-shrink:0}.p-dropdown-label{display:block;white-space:nowrap;overflow:hidden;flex:1 1 auto;width:1%;text-overflow:ellipsis;cursor:pointer}.p-dropdown-label-empty{overflow:hidden;visibility:hidden}input.p-dropdown-label{cursor:default}.p-dropdown-items-wrapper{overflow:auto}.p-dropdown-item{cursor:pointer;font-weight:400;white-space:nowrap;position:relative;overflow:hidden}.p-dropdown-items{margin:0;padding:0;list-style-type:none}.p-dropdown-filter{width:100%}.p-dropdown-filter-container{position:relative}.p-dropdown-filter-icon{position:absolute;top:50%;margin-top:-.5rem}.p-fluid .p-dropdown{display:flex}.p-fluid .p-dropdown .p-dropdown-label{width:1%}}\n"],encapsulation:2,changeDetection:0})}return e})(),GT=(()=>{class e{static \u0275fac=function(i){return new(i||e)};static \u0275mod=Ut({type:e});static \u0275inj=Nt({imports:[ti,Oue,kn,MW,Su,jT,cnt,ol,qT,Fue,Oue,kn,jT]})}return e})(),drt=(()=>{class e{constructor(t,i,r){this.ufSegmentoService=t,this.municipioSegmentoService=i,this.cnpjService=r,this.ufSaidaList=[],this.ufEntradaList=[],this.segmentoSaidaList=[],this.segmentoEntradaList=[],this.segmentoSaidaSelecionado="TODOS",this.segmentoEntradaSelecionado="TODOS",this.dataSetUfSegmentoSaidaDummy=[],this.dataSetUfSegmentoEntradaDummy=[]}ngOnInit(){this.inicializarUfList(),this.inicializarSegmentoList(),this.createDataSetCompletoUFSegmentoSaida(),this.createDataSetCompletoUFSegmentoEntrada(),this.generateUfSegmentoSaidaHeatMap(),this.generateTopCnpjEmitenteBarGraph(),this.generateUfSegmentoEntradaHeatMap(),this.generateTopCnpjDestinatarioBarGraph()}inicializarUfList(){this.ufSaidaList=[{sigla:"Todas",nome:"Todas"},{sigla:"AC",nome:"Acre"},{sigla:"AL",nome:"Alagoas"},{sigla:"AM",nome:"Amazonas"},{sigla:"AP",nome:"Amap\xe1"},{sigla:"BA",nome:"Bahia"},{sigla:"DF",nome:"DF"},{sigla:"ES",nome:"Esp\xedrito Santo"},{sigla:"GO",nome:"Goi\xe1s"},{sigla:"MA",nome:"Maranh\xe3o"},{sigla:"MG",nome:"Minas Gerais"},{sigla:"MT",nome:"Mato Grosso"},{sigla:"MS",nome:"Mato Grosso do Sul"},{sigla:"PA",nome:"Par\xe1"},{sigla:"PB",nome:"Para\xedba"},{sigla:"PE",nome:"Pernambuco"},{sigla:"PI",nome:"Piau\xed"},{sigla:"PR",nome:"Paran\xe1"},{sigla:"RJ",nome:"Rio de Janeiro"},{sigla:"RO",nome:"Rond\xf4nia"},{sigla:"RN",nome:"Rio Grande do Norte"},{sigla:"RR",nome:"Roraima"},{sigla:"RS",nome:"Rio Grande do Sul"},{sigla:"SC",nome:"Santa Catarina"},{sigla:"SE",nome:"Sergipe"},{sigla:"SP",nome:"S\xe3o Paulo"},{sigla:"TO",nome:"Tocantins"}],this.ufSaidaList.forEach(t=>{this.ufEntradaList.push(t)})}inicializarSegmentoList(){this.segmentoSaidaList=["TODOS","ADMINISTRACAO PUBLICA E ORG.INTERNACIONAIS","COMBUSTIVEL","COMERCIO ATACADISTA","COMERCIO VAREJISTA","CONSTRUCAO CIVIL","ENERGIA ELETRICA","INDUSTRIA","PRODUTOR AGROPECUARIO","OUTROS SEGMENTOS","SERVICOS DE COMUNICACAO","SERVICOS DE TRANSPORTE"],this.segmentoSaidaList.forEach(t=>{this.segmentoEntradaList.push(t)})}trocarUfSaida(t){this.generateUfSegmentoSaidaHeatMap(),this.generateTopCnpjEmitenteBarGraph()}trocarUfEntrada(t){this.generateUfSegmentoEntradaHeatMap(),this.generateTopCnpjDestinatarioBarGraph()}trocarSegmentoSaida(t){this.generateUfSegmentoSaidaHeatMap(),this.generateTopCnpjEmitenteBarGraph()}trocarSegmentoEntrada(t){this.generateUfSegmentoEntradaHeatMap(),this.generateTopCnpjDestinatarioBarGraph()}createDataSetCompletoUFSegmentoSaida(){this.ufSaidaList?.forEach(t=>{this.segmentoSaidaList?.forEach(i=>{"Todas"!=t.nome&&"TODOS"!=i&&this.dataSetUfSegmentoSaidaDummy.push(new Y6("CE",t.sigla,"Cear\xe1",t.nome,"NE","","Nordeste","",i,"",0,0))})})}createDataSetCompletoUFSegmentoEntrada(){this.ufSaidaList?.forEach(t=>{this.segmentoSaidaList?.forEach(i=>{"Todas"!=t.nome&&"TODOS"!=i&&this.dataSetUfSegmentoEntradaDummy.push(new Y6(t.sigla,"",t.nome,"Cear\xe1","","NE","","","",i,0,0))})})}getSpecHeatMap(t,i,r,o,s,a,l,c,u){let d,f={and:[{field:o,equal:c},{field:s,equal:u}]};return"Todas"==c?"TODOS"==u?(d={param:"selectRect",value:1},f={and:[{field:o,equal:c},{field:s,equal:u}]}):(d={test:{field:s,equal:u},value:1},f={field:s,equal:u}):"TODOS"==u?(d={test:{field:o,equal:c},value:1},f={field:o,equal:c}):(d={test:{and:[{field:o,equal:c},{field:s,equal:u}]},value:1},f={and:[{field:o,equal:c},{field:s,equal:u}]}),{$schema:"https://vega.github.io/schema/vega-lite/v5.json",title:r,layer:[{mark:{type:"rect",stroke:"#777"},data:{name:"dataSetDummy",values:i},encoding:{x:{field:o,type:"nominal",title:a},y:{field:s,type:"nominal",title:l},color:{value:"#BBB"},fillOpacity:{value:.3},strokeOpacity:{condition:[{param:"highlightRect",empty:!1,value:2}],value:0},tooltip:[{field:o,type:"nominal",title:a},{field:s,type:"nominal",title:l},{aggregate:"sum",field:"valorTotal",format:",.2f",title:"Valor Total"}]}},{mark:{type:"rect",stroke:"#555"},data:{name:"dataSetPrincipal",values:t},params:[{name:"highlightRect",select:{type:"point",on:"pointerover"}},{name:"selectRect",select:{type:"point",encodings:["x","y"]}}],encoding:{x:{field:o,type:"nominal",title:a},y:{field:s,type:"nominal",title:l},color:{aggregate:"sum",field:"valorTotal",scale:{type:"log"},title:"Valor Total"},fillOpacity:{condition:[d],value:.3},strokeWidth:{condition:[{param:"highlightRect",empty:!1,value:2},{test:f,value:2}],value:0},tooltip:[{field:o,type:"nominal",title:a},{field:s,type:"nominal",title:l},{aggregate:"sum",field:"qtdeNotas",format:",.2f",title:"Qtde de Notas"},{aggregate:"sum",field:"valorTotal",format:",.2f",title:"Valor Total"}]}}],config:{axis:{grid:!1,tickBand:"extent"}},width:800,height:360}}generateUfSegmentoSaidaHeatMap(){var t=this;return Re(function*(){t.municipioDataSaida||(t.municipioDataSaida=yield t.municipioSegmentoService.getMunicipioSegmentoSaidaList());const i=t.getSpecHeatMap(t.municipioDataSaida,t.dataSetUfSegmentoSaidaDummy,"Mapa de Calor das Notas de Sa\xedda Interestaduais","siglaUfDest","segmentoEmit","UF Destinat\xe1ria","Seg. Econ. Emitemte",t.ufSaidaSelecionada.sigla,t.segmentoSaidaSelecionado);t.heatMapSaidaView=ep("#heat-map-saida",i),t.heatMapSaidaView.then(r=>{r.view.addEventListener("click",(o,s)=>{null!=s&&null!=s.datum?(t.segmentoSaidaSelecionado=s.datum.segmentoEmit,t.ufSaidaList?.forEach(a=>{a.sigla!=s.datum.siglaUfDest||(t.ufSaidaSelecionada=a)})):(t.segmentoSaidaSelecionado="TODOS",t.ufSaidaSelecionada={sigla:"Todas",nome:"Todas"}),t.generateUfSegmentoSaidaHeatMap(),t.generateTopCnpjEmitenteBarGraph()})})})()}generateUfSegmentoEntradaHeatMap(){var t=this;return Re(function*(){t.municipioDataEntrada||(t.municipioDataEntrada=yield t.municipioSegmentoService.getMunicipioSegmentoEntradaList());const i=t.getSpecHeatMap(t.municipioDataEntrada,t.dataSetUfSegmentoEntradaDummy,"Mapa de Calor das Notas de Entrada Interestaduais","siglaUfEmit","segmentoDest","UF Emitente","Seg. Econ. Destinat\xe1rio",t.ufEntradaSelecionada.sigla,t.segmentoEntradaSelecionado);t.heatMapEntradaView=ep("#heat-map-entrada",i),t.heatMapEntradaView.then(r=>{r.view.addEventListener("click",(o,s)=>{null!=s&&null!=s.datum?(t.segmentoEntradaSelecionado=s.datum.segmentoDest,t.ufEntradaList?.forEach(a=>{a.sigla!=s.datum.siglaUfEmit||(t.ufEntradaSelecionada=a)})):(t.segmentoEntradaSelecionado="TODOS",t.ufEntradaSelecionada={sigla:"Todas",nome:"Todas"}),t.generateUfSegmentoEntradaHeatMap(),t.generateTopCnpjDestinatarioBarGraph()})})})()}generateTopCnpjDestinatarioBarGraph(){var t=this;return Re(function*(){t.cnpjDestData||(t.cnpjDestData=yield t.cnpjService.getTopCnpjDestInterestadual()),ep("#top-cnpj-dest",t.getSpecTopCnpj(t.cnpjDestData,t.ufEntradaSelecionada.sigla,t.segmentoEntradaSelecionado))})()}generateTopCnpjEmitenteBarGraph(){var t=this;return Re(function*(){t.cnpjEmitData||(t.cnpjEmitData=yield t.cnpjService.getTopCnpjEmitInterestadual()),ep("#top-cnpj-emit",t.getSpecTopCnpj(t.cnpjEmitData,t.ufSaidaSelecionada.sigla,t.segmentoSaidaSelecionado))})()}getSpecTopCnpj(t,i,r){let o="",s="",a="",l='"Todas"';return"Todas"==i?(l='"Todas"',"TODOS"==r?(o="valorTotalCnpj",s="rankingGeral",a="datum.rankingGeral<=15"):(o="valorTotalCnpjSegmento",s="rankingSegmento",a="datum.rankingSegmento<=15 && datum.segmento=='"+r+"'")):(l='"'+i+'"',"TODOS"==r?(o="valorTotalCnpjUf",s="rankingUf",a="datum.rankingUf<=15 && datum.siglaUfDest=='"+i+"'"):(o="valorTotalCnpjUfSegmento",s="rankingUfSegmento",a='datum.rankingUfSegmento<=15 && datum.siglaUfDest=="'+i+'" && datum.segmento=="'+r+'"')),{$schema:"https://vega.github.io/schema/vega-lite/v5.json",title:"Top CNPJs Emitentes",data:{values:t},transform:[{filter:a},{calculate:l,as:"tooltipUfValue"},{window:[{op:"row_number",as:"rowNumber"}],groupby:[s],sort:[{field:o,order:"descending"}]},{filter:{field:"rowNumber",equal:1}},{joinaggregate:[{op:"max",field:o,as:"maxFieldTotalName"}]},{calculate:"(datum."+o+"/datum.maxFieldTotalName)>0.6?-35:5",as:"xOffSet"}],encoding:{x:{field:o,type:"quantitative",title:"Total de Notas Emitidas"},y:{field:"codCnpj",type:"nominal",title:"CNPJ",sort:"-x",scale:{paddingOuter:4}}},layer:[{params:[{name:"highlightBar",select:{type:"point",on:"pointerover"}},{name:"selectBar",select:{type:"point",encodings:["y"]}}],mark:{type:"bar",height:24,cornerRadiusEnd:5,stroke:"black"},encoding:{color:{field:o,type:"quantitative",scale:{type:"quantize",nice:!0,scheme:{name:"blues",count:10}},title:"Total"},fillOpacity:{condition:{param:"selectBar",value:1},value:.4},strokeWidth:{condition:[{param:"selectBar",empty:!1,value:1.5},{param:"highlightBar",empty:!1,value:1.5}],value:0},tooltip:[{field:"codCnpj",title:"CNPJ"},{field:"descMunicipio",title:"Munic\xedpio"},{field:"segmento",title:"Segmento"},{field:s,title:"Ranking"},{field:o,format:",.2f",title:"Valor Total Emitido"}]}},{mark:{type:"text",baseline:"middle",fontWeight:"bold",align:"left",xOffset:{expr:"isNumber(datum.xOffSet)?datum.xOffSet:5"},aria:!1},encoding:{text:{field:o,type:"quantitative",format:".2s"},color:{condition:{test:"datum.xOffSet < 0",value:"white"},value:"black"}}}],width:700}}static#e=this.\u0275fac=function(i){return new(i||e)(G(X6),G(Aue),G(Btt))};static#t=this.\u0275cmp=it({type:e,selectors:[["app-heat-map"]],decls:26,vars:10,consts:[["legend","Sa\xeddas Interestaduais",3,"toggleable"],[2,"margin-bottom","30px"],[2,"width","300px"],[1,"card","flex","justify-content-center"],["optionLabel","nome",3,"options","ngModel","onChange","ngModelChange"],[3,"options","ngModel","onChange","ngModelChange"],["id","heat-map-saida"],["id","top-cnpj-emit"],["legend","Entradas Interestaduais",3,"toggleable"],["id","heat-map-entrada"],["id","top-cnpj-dest"]],template:function(i,r){1&i&&(q(0,"p-fieldset",0)(1,"table",1)(2,"tr")(3,"td",2)(4,"div",3),pt(5," UF: "),q(6,"p-dropdown",4),we("onChange",function(s){return r.trocarUfSaida(s)})("ngModelChange",function(s){return r.ufSaidaSelecionada=s}),W()()(),q(7,"td")(8,"div",3),pt(9," Segmento: "),q(10,"p-dropdown",5),we("onChange",function(s){return r.trocarSegmentoSaida(s)})("ngModelChange",function(s){return r.segmentoSaidaSelecionado=s}),W()()()()(),_e(11,"div",6)(12,"div",7),W(),q(13,"p-fieldset",8)(14,"table",1)(15,"tr")(16,"td",2)(17,"div",3),pt(18," UF: "),q(19,"p-dropdown",4),we("onChange",function(s){return r.trocarUfEntrada(s)})("ngModelChange",function(s){return r.ufEntradaSelecionada=s}),W()()(),q(20,"td")(21,"div",3),pt(22," Segmento: "),q(23,"p-dropdown",5),we("onChange",function(s){return r.trocarSegmentoEntrada(s)})("ngModelChange",function(s){return r.segmentoEntradaSelecionado=s}),W()()()()(),_e(24,"div",9)(25,"div",10),W()),2&i&&(k("toggleable",!0),$(6),k("options",r.ufSaidaList)("ngModel",r.ufSaidaSelecionada),$(4),k("options",r.segmentoSaidaList)("ngModel",r.segmentoSaidaSelecionado),$(3),k("toggleable",!0),$(6),k("options",r.ufEntradaList)("ngModel",r.ufEntradaSelecionada),$(4),k("options",r.segmentoEntradaList)("ngModel",r.segmentoEntradaSelecionado))},dependencies:[Xw,rg,snt,WT]})}return e})(),frt=(()=>{class e{constructor(t){this.municipioSegmentoService=t,this.TIPO_EMISSAO_ENTRADA="Entradas",this.TIPO_EMISSAO_SAIDA="Saidas",this.segmentoSelecionado=[],this.regiaoSelecionada=[],this.municipioSelecionado=[],this.tipoEmissaoList=[this.TIPO_EMISSAO_ENTRADA,this.TIPO_EMISSAO_SAIDA],this.tipoEmissaoSelecionado=this.TIPO_EMISSAO_SAIDA}ngOnInit(){this.generateVisaoMunicipalDashboard()}trocarTipoEmissao(t){this.generateVisaoMunicipalDashboard()}generateVisaoMunicipalDashboard(){var t=this;return Re(function*(){ep("#visao-municipio-dashboard",t.getDashboardSpec(yield t.getMunicipioData(),yield t.getMunicipioTotalData())).then(o=>{o.view.addDataListener("selectPie_store",function(){var s=Re(function*(a,l){l.length>0?(t.regiaoSelecionada=[],l.forEach(d=>{t.regiaoSelecionada.push(d.values[0])})):t.regiaoSelecionada=[];let c=yield t.getMunicipioTotalData();var u=Gn().insert(c).remove(d=>!0);o.view.change("municipioAgregado",u).runAsync()});return function(a,l){return s.apply(this,arguments)}}()),o.view.addDataListener("selectBar_store",function(){var s=Re(function*(a,l){l.length>0?(t.segmentoSelecionado=[],l.forEach(d=>{t.segmentoSelecionado.push(d.values[0])})):t.segmentoSelecionado=[];let c=yield t.getMunicipioTotalData();var u=Gn().insert(c).remove(d=>!0);o.view.change("municipioAgregado",u).runAsync()});return function(a,l){return s.apply(this,arguments)}}()),o.view.addDataListener("selectMunicipio_store",function(){var s=Re(function*(a,l){l.length>0?(t.municipioSelecionado=[],l.forEach(d=>{t.municipioSelecionado.push(d.values[0])})):t.municipioSelecionado=[];let c=yield t.getMunicipioData();var u=Gn().insert(c).remove(d=>!0);o.view.change("municipioDataPieChart",u).runAsync(),o.view.change("municipioDataBarChart",u).runAsync()});return function(a,l){return s.apply(this,arguments)}}())}).catch(console.error)})()}getDashboardSpec(t,i){const r=this.getPieChartRegiaoSpec(t,this.getTitlePieChart(),this.getDescRegiaoField()),o=this.getBarChartSegmentoSpec(t,this.getTitleBarChart(),this.getSegmentoField());return{$schema:"https://vega.github.io/schema/vega-lite/v5.json",description:"Pie Chart with percentage_tooltip",data:{values:t,name:"municipioDataPrincipal"},hconcat:[this.getMunicipioMapSpec(i,this.getTitleMap()),{vconcat:[r,o]}],resolve:{scale:{color:"independent"}},height:650,width:1100}}getTitlePieChart(){return this.tipoEmissaoSelecionado==this.TIPO_EMISSAO_SAIDA?"Total de Notas Recebidas por Regi\xe3o":"Total de Notas Emitidas por Regi\xe3o"}getTitleMap(){return this.tipoEmissaoSelecionado==this.TIPO_EMISSAO_SAIDA?"Munic\xedpios Emitentes do Cear\xe1":"Munic\xedpios Destinat\xe1rios do Cear\xe1"}getDescRegiaoField(){return this.tipoEmissaoSelecionado==this.TIPO_EMISSAO_SAIDA?"dscRegiaoDest":"dscRegiaoEmit"}getTitleBarChart(){return this.tipoEmissaoSelecionado==this.TIPO_EMISSAO_SAIDA?"Segmentos Emitentes":"Segmentos Destinat\xe1rios"}getSegmentoField(){return this.tipoEmissaoSelecionado==this.TIPO_EMISSAO_SAIDA?"segmentoEmit":"segmentoDest"}getMunicipioData(){var t=this;return Re(function*(){let i=[];return i=t.isTipoEmissaoSaida()?yield t.getMunicipioSegmentoSaidaDataFiltrado():yield t.getMunicipioSegmentoEntradaDataFiltrado(),i})()}getMunicipioSegmentoSaidaDataFiltrado(){var t=this;return Re(function*(){return t.filtrarMunicipiosSelecionados(yield t.getMunicipioSaidaData(),"dscMunicipioEmit")})()}getMunicipioSaidaData(){var t=this;return Re(function*(){return t.municipioSaidaData||(t.municipioSaidaData=yield t.municipioSegmentoService.getMunicipioSegmentoSaidaList()),t.municipioSaidaData})()}filtrarMunicipiosSelecionados(t,i){return t.filter(o=>!(this.municipioSelecionado.length>0)||this.municipioSelecionado.includes(o[i]))}getMunicipioEntradaData(){var t=this;return Re(function*(){return t.municipioEntradaData||(t.municipioEntradaData=yield t.municipioSegmentoService.getMunicipioSegmentoEntradaList()),t.municipioEntradaData})()}getMunicipioSegmentoEntradaDataFiltrado(){var t=this;return Re(function*(){return t.filtrarMunicipiosSelecionados(yield t.getMunicipioEntradaData(),"dscMunicipioDest")})()}getMunicipioMapSpec(t,i){return{$schema:"https://vega.github.io/schema/vega-lite/v5.json",description:"Mapa dos Mun\xedcipios do Cear\xe1",title:i,data:{name:"municipioTopoJson",url:"assets/municipio.json",format:{type:"topojson",feature:"Munic"}},name:"municipioMap",transform:[{filter:"datum.properties.uf == 'CE'"},{lookup:"properties.codigo",from:{data:{values:t,name:"municipioAgregado"},key:"codMunicipio",fields:["dscMunicipio","qtdeNotas","valorTotal","dscRegiao","segmento"]},default:"NA"},{calculate:"datum.dscMunicipio!='NA'?datum.qtdeNotas:0",as:"qtdeNotas"},{calculate:"datum.dscMunicipio!='NA'?datum.valorTotal:0",as:"valorTotal"}],layer:[{params:[{name:"highlightMunicipio",select:{type:"point",on:"pointerover"}},{name:"selectMunicipio",select:{type:"point",encodings:["key"]}}],mark:{type:"geoshape",stroke:"#777",strokeWidth:.6},title:"Munic\xedpios Emitentes do Cear\xe1",projection:{type:"mercator"},encoding:{key:{field:"dscMunicipio",type:"nominal"},color:{field:"valorTotal",type:"quantitative",scale:{type:"log",domainMin:100,scheme:{name:"greens",count:10}},legend:{title:"Tot. de Notas"}},fillOpacity:{condition:{param:"selectMunicipio",value:1},value:0},strokeWidth:{condition:[{param:"selectMunicipio",empty:!1,value:2},{param:"highlightMunicipio",empty:!1,value:2}],value:.6},tooltip:[{field:"dscMunicipio",title:"Munic\xedpio"},{field:"qtdeNotas",format:",.0f",title:"Qtde de Notas"},{field:"valorTotal",format:",.2f",title:"Total de Notas"}]}},{mark:{type:"geoshape",stroke:"#666",strokeWidth:.6},projection:{type:"mercator"},encoding:{color:{condition:{param:"selectMunicipio",value:null},value:"lightgray"},tooltip:[{title:"Munic\xedpio",field:"properties.name"}]}},{mark:{type:"geoshape",stroke:"#666",strokeWidth:.6},projection:{type:"mercator"},encoding:{color:{condition:{test:"datum['dscMunicipio'] == 'NA'  || datum['valorTotal']==0",value:"lightgray"},value:null},tooltip:[{title:"Munic\xedpio",field:"properties.name"},{title:"Qtde Notas",field:"qtdeNotas"},{title:"Valor Total",field:"valorTotal"}]}}],height:600,width:500}}getPieChartRegiaoSpec(t,i,r){return{$schema:"https://vega.github.io/schema/vega-lite/v5.json",description:"Pie Chart com Porcentagem",title:i,data:{values:t,name:"municipioDataPieChart"},transform:[{filter:{param:"selectBar"}},{window:[{op:"sum",field:"valorTotal",as:"qtdeNotasRegiao"}],groupby:[r],frame:[null,null]},{window:[{op:"sum",field:"valorTotal",as:"valorTotalRegiao"}],groupby:[r],frame:[null,null]},{window:[{op:"sum",field:"valorTotal",as:"valorTotalGeral"}],frame:[null,null]},{calculate:"datum.valorTotalRegiao/datum.valorTotalGeral",as:"percentualTotalRegiao"}],encoding:{theta:{field:"valorTotal",aggregate:"sum",type:"quantitative",stack:"normalize",title:"Valor Total"},order:{field:"valorTotal",aggregate:"sum",type:"quantitative",sort:"descending"},color:{field:r,type:"nominal",title:"Regi\xe3o",sort:{field:"valorTotal",order:"descending"},scale:{domain:["Nordeste","Norte","Sul","Sudeste","Centro-Oeste"],range:["#4c78a8","#f58518","#e45756","#72b7b2","#54a24b"]}},tooltip:[{field:r,title:"Regi\xe3o"},{field:"qtdeNotas",aggregate:"sum",format:",.0f",title:"Qtde Notas"},{field:"valorTotal",aggregate:"sum",format:",.2f",title:"Valor Total"},{field:"percentualTotalRegiao",aggregate:"min",format:".0%",title:"Percentual"}]},layer:[{params:[{name:"highlightPie",select:{type:"point",on:"pointerover"}},{name:"selectPie",select:{type:"point",encodings:["color"]}}],mark:{type:"arc",tooltip:!0,outerRadius:110,stroke:"black"},encoding:{fillOpacity:{condition:{param:"selectPie",value:1},value:.6},strokeWidth:{condition:[{param:"highlightPie",empty:!1,value:1.5},{param:"selectPie",empty:!1,value:1.5}],value:0}}},{mark:{type:"text",radius:95,fill:"black",fontWeight:"bold"},encoding:{text:{field:"percentualTotalRegiao",aggregate:"min",format:".0%"}}}],width:300,height:220}}getBarChartSegmentoSpec(t,i,r){return{$schema:"https://vega.github.io/schema/vega-lite/v5.json",description:"Gr\xe1ficos de Barras por Segmento Econ\xf4mico",title:i,data:{values:t,name:"municipioDataBarChart"},transform:[{filter:{param:"selectPie"}},{joinaggregate:[{op:"sum",field:"valorTotal",as:"valorTotalSegmento"}],groupby:[r]},{window:[{op:"dense_rank",as:"rankSegmento"}],sort:[{field:"valorTotalSegmento",order:"descending"}]},{joinaggregate:[{op:"max",field:"valorTotalSegmento",as:"maxValorTotalSegmento"}]}],encoding:{x:{field:"valorTotalSegmento",type:"quantitative",title:"Total de Notas",stack:null},y:{field:r,type:"nominal",title:"Segmento",sort:"-x",scale:{paddingOuter:4}},key:{field:"rankSegmento",type:"quantitative"}},layer:[{params:[{name:"highlightBar",select:{type:"point",on:"pointerover"}},{name:"selectBar",select:{type:"point",encodings:["y"]}}],mark:{type:"bar",cornerRadiusEnd:5,stroke:"black",height:25},encoding:{color:{aggregate:"sum",field:"valorTotal",type:"quantitative",scale:{type:"quantize",nice:!0,scheme:{name:"blues",count:12}},title:"Total"},fillOpacity:{condition:{param:"selectBar",value:1},value:.4},strokeWidth:{condition:[{param:"selectBar",empty:!1,value:1.5},{param:"highlightBar",empty:!1,value:1.5}],value:0},tooltip:[{field:r,title:"Segmento Econ\xf4mico"},{aggregate:"sum",field:"qtdeNotas",format:",.0f",title:"Qtde Notas"},{aggregate:"sum",field:"valorTotal",format:",.2f",title:"Total de Notas"}]}},{mark:{type:"text",baseline:"middle",fontWeight:"bold",align:"left",xOffset:{expr:"(datum.valorTotalSegmento/datum.maxValorTotalSegmento)>0.6?-35:5"},aria:!1},encoding:{text:{field:"valorTotalSegmento",type:"quantitative",format:".2s"},color:{condition:{test:"(datum.valorTotalSegmento/datum.maxValorTotalSegmento)>0.6",value:"white"},value:"black"}}}],width:450}}isTipoEmissaoEntrada(){return this.tipoEmissaoSelecionado==this.TIPO_EMISSAO_ENTRADA}isTipoEmissaoSaida(){return this.tipoEmissaoSelecionado==this.TIPO_EMISSAO_SAIDA}isMunicipioAtendeFiltro(t){return this.regiaoSelecionada.length>0?!!this.regiaoSelecionada.includes(this.isTipoEmissaoSaida()?t.dscRegiaoDest:t.dscRegiaoEmit)&&(!(this.segmentoSelecionado.length>0)||this.segmentoSelecionado.includes(this.isTipoEmissaoSaida()?t.segmentoEmit:t.segmentoDest)):!(this.segmentoSelecionado.length>0)||this.segmentoSelecionado.includes(this.isTipoEmissaoSaida()?t.segmentoEmit:t.segmentoDest)}getMunicipioTotalData(){var t=this;return Re(function*(){let i=[];return i=t.tipoEmissaoSelecionado==t.TIPO_EMISSAO_SAIDA?yield t.getMunicipioAgregateData("siglaUfEmit","codMunicipioEmit","dscMunicipioEmit"):yield t.getMunicipioAgregateData("siglaUfDest","codMunicipioDest","dscMunicipioDest"),i})()}getMunicipioAgregateData(t,i,r){var o=this;return Re(function*(){let s=[];return s=o.isTipoEmissaoSaida()?yield o.getMunicipioSaidaData():yield o.getMunicipioEntradaData(),s.reduce((l,c)=>{let u=l.filter(d=>d.dscMunicipio==c[r]);if(u.length>0)u[0].qtdeNotas+=o.isMunicipioAtendeFiltro(c)?c.qtdeNotas:0,u[0].valorTotal+=o.isMunicipioAtendeFiltro(c)?c.valorTotal:0,u[0].valorTotal=Math.round(100*u[0].valorTotal)/100;else if("CE"==c[t]){let d={codMunicipio:c[i],dscMunicipio:c[r],dscRegiao:o.regiaoSelecionada.length>0?o.regiaoSelecionada:["Todas"],segmento:o.segmentoSelecionado.length>0?o.segmentoSelecionado:["Todos"],qtdeNotas:o.isMunicipioAtendeFiltro(c)?c.qtdeNotas:0,valorTotal:Math.round(100*(o.isMunicipioAtendeFiltro(c)?c.valorTotal:0))/100};l.push(d)}return l},[])})()}static#e=this.\u0275fac=function(i){return new(i||e)(G(Aue))};static#t=this.\u0275cmp=it({type:e,selectors:[["app-visao-municipal"]],decls:6,vars:2,consts:[[3,"options","ngModel","onChange","ngModelChange"],["id","visao-municipio-dashboard",2,"margin-top","30px"],["id","mapa-municipio-view2",2,"margin-top","30px"]],template:function(i,r){1&i&&(q(0,"div")(1,"div"),pt(2," Tipo de Emiss\xe3o: "),q(3,"p-dropdown",0),we("onChange",function(s){return r.trocarTipoEmissao(s)})("ngModelChange",function(s){return r.tipoEmissaoSelecionado=s}),W()(),_e(4,"div",1)(5,"div",2),W()),2&i&&($(3),k("options",r.tipoEmissaoList)("ngModel",r.tipoEmissaoSelecionado))},dependencies:[Xw,rg,WT]})}return e})(),hrt=(()=>{class e{constructor(t){this.ufSegmentoService=t,this.TIPO_EMISSAO_ENTRADA="Entradas",this.TIPO_EMISSAO_SAIDA="Saidas",this.tipoEmissaoList=[this.TIPO_EMISSAO_ENTRADA,this.TIPO_EMISSAO_SAIDA],this.tipoEmissaoSelecionado=this.TIPO_EMISSAO_SAIDA,this.ufSelecionadas=[],this.produtosSelecionados=[]}ngOnInit(){this.generateVisaoProdutolDashboard()}trocarTipoEmissao(t){this.generateVisaoProdutolDashboard()}generateVisaoProdutolDashboard(){var t=this;return Re(function*(){ep("#visao-produto-dashboard",t.getDashboardSpec(yield t.getUfNcmData(),yield t.getUfNcmTotalData())).then(o=>{t.addDataListenerSelectUf(o.view),t.addDataListenerSelectProduto(o.view)})})()}addDataListenerSelectUf(t){var i=this;t.addDataListener("selectUf_store",function(){var r=Re(function*(o,s){s.length>0?(i.ufSelecionadas=[],s.forEach(c=>{i.ufSelecionadas.push(c.values[0])})):i.ufSelecionadas=[];let a=yield i.getUfNcmData();var l=Gn().insert(a).remove(c=>!0);t.change("produtosData",l).runAsync()});return function(o,s){return r.apply(this,arguments)}}())}addDataListenerSelectProduto(t){var i=this;t.addDataListener("selectBarProduto_store",function(){var r=Re(function*(o,s){s.length>0?(i.produtosSelecionados=[],s.forEach(u=>{i.produtosSelecionados.push(u.values[0])})):i.produtosSelecionados=[];let a=yield i.getUfNcmTotalData();var l=Gn().remove(u=>0==a.filter(f=>f.siglaUf==u.siglaUf).length);yield t.change("ufNcmTotalData",l).runAsync();var c=Gn().insert(a);yield t.change("ufNcmTotalData",c).runAsync()});return function(o,s){return r.apply(this,arguments)}}())}getDashboardSpec(t,i){const r=this.getProdutosBarChartSpec(t);return{$schema:"https://vega.github.io/schema/vega-lite/v5.json",description:"Pie Chart with percentage_tooltip",data:{values:t,name:"ufNcmFataPrincipal"},hconcat:[this.getUfMapSpec(i,this.getTitleMap()),r],resolve:{scale:{color:"independent"}},height:650,width:900}}getProdutosBarChartSpec(t){return{$schema:"https://vega.github.io/schema/vega-lite/v5.json",description:"Gr\xe1fico de Barras dos Tops Produtos Importados/Exportados.",title:"Top 20 Produtos",data:{name:"produtosData",values:t},transform:[{joinaggregate:[{op:"sum",field:"valorTotal",as:"valorTotalProduto"}],groupby:["codNcm2"]},{window:[{op:"dense_rank",as:"rankProduto"}],sort:[{field:"valorTotalProduto",order:"descending"}]},{filter:{field:"rankProduto",lte:20}},{window:[{op:"row_number",as:"rowNumber"}],groupby:["rankProduto"],sort:[{field:"valorTotalProduto",order:"descending"}]},{filter:{field:"rowNumber",equal:1}},{joinaggregate:[{op:"max",field:"valorTotalProduto",as:"maxValorTotalProduto"}]},{calculate:"(datum.valorTotalProduto/datum.maxValorTotalProduto)>0.6?-35:5",as:"xOffSet"}],encoding:{x:{field:"valorTotalProduto",type:"quantitative",title:"Total dos Produtos",stack:null},y:{field:"codNcm2",type:"nominal",title:"C\xf3digo Produto",sort:"-x",scale:{paddingOuter:5}}},layer:[{params:[{name:"highlightBarProduto",select:{type:"point",on:"pointerover"}},{name:"selectBarProduto",select:{type:"point",encodings:["y"]}}],mark:{type:"bar",cornerRadiusEnd:5,stroke:"black",height:25},encoding:{color:{field:"valorTotalProduto",type:"quantitative",scale:{type:"quantize",nice:!0,scheme:{name:"blues",count:10}},title:"Total"},fillOpacity:{condition:[{param:"selectBarProduto",value:1}],value:.6},strokeWidth:{condition:[{param:"selectBarProduto",empty:!1,value:2},{param:"highlightBarProduto",empty:!1,value:1.5}],value:0},tooltip:[{field:"descNsm2",title:"Produto"},{field:"valorTotalProduto",format:",.2f",title:"Total de Notas"}]}},{mark:{type:"text",baseline:"middle",fontWeight:"bold",align:"left",xOffset:{expr:"isNumber(datum.xOffSet)?datum.xOffSet:5"},aria:!1},encoding:{text:{field:"valorTotalProduto",type:"quantitative",format:".2s"},color:{condition:{test:"datum.xOffSet < 0",value:"white"},value:"black"}}}],width:350}}getUfMapSpec(t,i){return{$schema:"https://vega.github.io/schema/vega-lite/v5.json",description:"Mapa de UFs Emitentes/Destinat\xe1rias de Produtos.",data:{url:"assets/uf_topo.json",format:{type:"topojson",feature:"uf"}},transform:[{lookup:"properties.uf",from:{data:{name:"ufNcmTotalData",values:t},key:"dscUf",fields:["valorTotal","dscUf","dscRegiao","qtdeNotas"]},default:"NA"}],layer:[{params:[{name:"highlightUf",select:{type:"point",on:"pointerover"}},{name:"selectUf",select:{type:"point",encodings:["key"]}}],mark:{type:"geoshape",stroke:"#666",strokeWidth:.6},title:i,projection:{type:"mercator"},encoding:{key:{field:"dscUf",type:"nominal"},color:{field:"valorTotal",type:"quantitative",scale:{type:"quantize",nice:!0,scheme:{name:"greens",count:10}},legend:{title:"Total de NFes"}},fillOpacity:{condition:{param:"selectUf",value:1},value:0},strokeWidth:{condition:[{param:"selectUf",empty:!1,value:2},{param:"highlightUf",empty:!1,value:2}],value:.6},tooltip:[{field:"dscUf",title:"UF"},{field:"dscRegiao",title:"Regi\xe3o"},{field:"qtdeNotas",type:"quantitative",format:",.0f",title:"Quantidade de Notas"},{field:"valorTotal",type:"quantitative",format:",.2f",title:"Total de Notas"}]}},{mark:{type:"geoshape",stroke:"#666",strokeWidth:.6},projection:{type:"mercator"},encoding:{color:{condition:{param:"selectUf",value:null},value:"lightgray"},tooltip:[{title:"UF",field:"properties.name"}]}},{mark:{type:"geoshape",stroke:"#666",strokeWidth:.6},projection:{type:"mercator"},encoding:{color:{condition:{test:"!isValid(datum) || !isValid(datum['dscUf']) || datum['dscUf'] == 'NA'  || datum['valorTotal']==0",value:"lightgray"},value:null},tooltip:[{title:"UF",field:"properties.uf"},{title:"Regi\xe3o",field:"properties.regiao"}]}}],height:500,width:550}}getTitleMap(){return this.isTipoEmissaoSaida()?"UFs Destinat\xe1rias do Cear\xe1":"UFs Emitentes para o Cear\xe1"}getUfNcmData(){var t=this;return Re(function*(){let i=[];return i=t.isTipoEmissaoSaida()?yield t.getUfNcmSaidaDataFiltrado():yield t.getUfNcmEntradaDataFiltrado(),i})()}getUfNcmTotalData(){var t=this;return Re(function*(){let i=[];return i=t.isTipoEmissaoSaida()?yield t.getUfNcmTotalSaidaData():yield t.getUfNcmTotalEntradaData(),i})()}getUfNcmSaidaData(){var t=this;return Re(function*(){return t.ufSaidaData||(t.ufSaidaData=yield t.ufSegmentoService.getUfNcmSaidaList()),t.ufSaidaData})()}getUfNcmSaidaDataFiltrado(){var t=this;return Re(function*(){let i=yield t.getUfNcmSaidaData();return 0==t.ufSelecionadas.length?i:i.filter(o=>t.ufSelecionadas.includes(o.descUfDest))})()}getUfNcmEntradaData(){var t=this;return Re(function*(){return t.ufEntradaData||(t.ufEntradaData=yield t.ufSegmentoService.getUfNcmEntradaList()),t.ufEntradaData})()}getUfNcmEntradaDataFiltrado(){var t=this;return Re(function*(){let i=yield t.getUfNcmEntradaData();return 0==t.ufSelecionadas.length?i:i.filter(o=>t.ufSelecionadas.includes(o.descUfEmit))})()}isProdutoAtendeFiltro(t){return 0==this.produtosSelecionados.length||this.produtosSelecionados.includes(t.codNcm2)}getUfNcmTotalSaidaData(){var t=this;return Re(function*(){return(yield t.getUfNcmSaidaData()).reduce((o,s)=>{let a=o.filter(l=>l.siglaUf==s.siglaUfDest);return a.length>0?(a[0].qtdeNotas+=t.isProdutoAtendeFiltro(s)?s.qtdeNotas:0,a[0].valorTotal+=t.isProdutoAtendeFiltro(s)?s.valorTotal:0):o.push({siglaUf:s.siglaUfDest,dscUf:s.descUfDest,siglaRegiao:s.siglaRegiaoDest,dscRegiao:s.descRegiaoDest,qtdeNotas:s.qtdeNotas,valorTotal:s.valorTotal}),o},[])})()}getUfNcmTotalEntradaData(){var t=this;return Re(function*(){return(yield t.getUfNcmEntradaData()).reduce((o,s)=>{if(t.produtosSelecionados.length>0&&!t.produtosSelecionados.includes(s.codNcm2))return o;let a=o.filter(l=>l.siglaUf==s.siglaUfEmit);return a.length>0?(a[0].qtdeNotas+=s.qtdeNotas,a[0].valorTotal+=s.valorTotal):o.push({siglaUf:s.siglaUfEmit,dscUf:s.descUfEmit,siglaRegiao:s.siglaRegiaoEmit,dscRegiao:s.descRegiaoEmit,qtdeNotas:s.qtdeNotas,valorTotal:s.valorTotal}),o},[])})()}isTipoEmissaoSaida(){return this.tipoEmissaoSelecionado==this.TIPO_EMISSAO_SAIDA}static#e=this.\u0275fac=function(i){return new(i||e)(G(X6))};static#t=this.\u0275cmp=it({type:e,selectors:[["app-visao-produto"]],decls:5,vars:2,consts:[[3,"options","ngModel","onChange","ngModelChange"],["id","visao-produto-dashboard",2,"margin-top","30px"]],template:function(i,r){1&i&&(q(0,"div")(1,"div"),pt(2," Tipo de Emiss\xe3o: "),q(3,"p-dropdown",0),we("onChange",function(s){return r.trocarTipoEmissao(s)})("ngModelChange",function(s){return r.tipoEmissaoSelecionado=s}),W()(),_e(4,"div",1),W()),2&i&&($(3),k("options",r.tipoEmissaoList)("ngModel",r.tipoEmissaoSelecionado))},dependencies:[Xw,rg,WT]})}return e})();function prt(e,n){1&e&&(q(0,"span",7),pt(1,"Dashboard Notas Fiscais Eletr\xf4nicas (NF-e)"),W())}let grt=(()=>{class e{constructor(){this.title="nfe-app"}static#e=this.\u0275fac=function(i){return new(i||e)};static#t=this.\u0275cmp=it({type:e,selectors:[["app-root"]],decls:15,vars:2,consts:[[3,"collapsed","toggleable"],["pTemplate","header"],["header","Vis\xe3o Geral"],["header","Vis\xe3o UF x Segmento"],["header","Vis\xe3o Municipal"],["header","Produtos"],["href","assets/ApresentacaoProjetoFinalVisualizacao.pdf"],[2,"text-align","center","font-weight","bold"]],template:function(i,r){1&i&&(q(0,"p-panel",0),B(1,prt,2,0,"ng-template",1),q(2,"p"),pt(3," Esse Dashboard visa apresentar informa\xe7\xf5es sobre a circula\xe7\xe3o de NF-e no Estado do Cear\xe1 "),W()(),q(4,"p-tabView")(5,"p-tabPanel",2),_e(6,"app-visao-geral"),W(),q(7,"p-tabPanel",3),_e(8,"app-heat-map"),W(),q(9,"p-tabPanel",4),_e(10,"app-visao-municipal"),W(),q(11,"p-tabPanel",5),_e(12,"app-visao-produto"),W()(),q(13,"a",6),pt(14,"Apresenta\xe7\xe3o"),W()),2&i&&k("collapsed",!1)("toggleable",!0)},dependencies:[GDe,Bo,OW,kW,Ptt,drt,frt,hrt]})}return e})();const Vd={button:"p-button",component:"p-component",iconOnly:"p-button-icon-only",disabled:"p-disabled",loading:"p-button-loading",labelOnly:"p-button-loading-label-only"};let $ue=(()=>{class e{el;document;iconPos="left";loadingIcon;get label(){return this._label}set label(t){this._label=t,this.initialized&&(this.updateLabel(),this.updateIcon(),this.setStyleClass())}get icon(){return this._icon}set icon(t){this._icon=t,this.initialized&&(this.updateIcon(),this.setStyleClass())}get loading(){return this._loading}set loading(t){this._loading=t,this.initialized&&(this.updateIcon(),this.setStyleClass())}_label;_icon;_loading=!1;initialized;get htmlElement(){return this.el.nativeElement}_internalClasses=Object.values(Vd);spinnerIcon='<svg width="14" height="14" viewBox="0 0 14 14" fill="none" xmlns="http://www.w3.org/2000/svg" class="p-icon-spin">\n        <g clip-path="url(#clip0_417_21408)">\n            <path\n                d="M6.99701 14C5.85441 13.999 4.72939 13.7186 3.72012 13.1832C2.71084 12.6478 1.84795 11.8737 1.20673 10.9284C0.565504 9.98305 0.165424 8.89526 0.041387 7.75989C-0.0826496 6.62453 0.073125 5.47607 0.495122 4.4147C0.917119 3.35333 1.59252 2.4113 2.46241 1.67077C3.33229 0.930247 4.37024 0.413729 5.4857 0.166275C6.60117 -0.0811796 7.76026 -0.0520535 8.86188 0.251112C9.9635 0.554278 10.9742 1.12227 11.8057 1.90555C11.915 2.01493 11.9764 2.16319 11.9764 2.31778C11.9764 2.47236 11.915 2.62062 11.8057 2.73C11.7521 2.78503 11.688 2.82877 11.6171 2.85864C11.5463 2.8885 11.4702 2.90389 11.3933 2.90389C11.3165 2.90389 11.2404 2.8885 11.1695 2.85864C11.0987 2.82877 11.0346 2.78503 10.9809 2.73C9.9998 1.81273 8.73246 1.26138 7.39226 1.16876C6.05206 1.07615 4.72086 1.44794 3.62279 2.22152C2.52471 2.99511 1.72683 4.12325 1.36345 5.41602C1.00008 6.70879 1.09342 8.08723 1.62775 9.31926C2.16209 10.5513 3.10478 11.5617 4.29713 12.1803C5.48947 12.7989 6.85865 12.988 8.17414 12.7157C9.48963 12.4435 10.6711 11.7264 11.5196 10.6854C12.3681 9.64432 12.8319 8.34282 12.8328 7C12.8328 6.84529 12.8943 6.69692 13.0038 6.58752C13.1132 6.47812 13.2616 6.41667 13.4164 6.41667C13.5712 6.41667 13.7196 6.47812 13.8291 6.58752C13.9385 6.69692 14 6.84529 14 7C14 8.85651 13.2622 10.637 11.9489 11.9497C10.6356 13.2625 8.85432 14 6.99701 14Z"\n                fill="currentColor"\n            />\n        </g>\n        <defs>\n            <clipPath id="clip0_417_21408">\n                <rect width="14" height="14" fill="white" />\n            </clipPath>\n        </defs>\n    </svg>';constructor(t,i){this.el=t,this.document=i}ngAfterViewInit(){Y.addMultipleClasses(this.htmlElement,this.getStyleClass().join(" ")),this.createIcon(),this.createLabel(),this.initialized=!0}getStyleClass(){const t=[Vd.button,Vd.component];return this.icon&&!this.label&&ht.isEmpty(this.htmlElement.textContent)&&t.push(Vd.iconOnly),this.loading&&(t.push(Vd.disabled,Vd.loading),!this.icon&&this.label&&t.push(Vd.labelOnly),this.icon&&!this.label&&!ht.isEmpty(this.htmlElement.textContent)&&t.push(Vd.iconOnly)),t}setStyleClass(){const t=this.getStyleClass();this.htmlElement.classList.remove(...this._internalClasses),this.htmlElement.classList.add(...t)}createLabel(){if(this.label){let t=this.document.createElement("span");this.icon&&!this.label&&t.setAttribute("aria-hidden","true"),t.className="p-button-label",t.appendChild(this.document.createTextNode(this.label)),this.htmlElement.appendChild(t)}}createIcon(){if(this.icon||this.loading){let t=this.document.createElement("span");t.className="p-button-icon",t.setAttribute("aria-hidden","true");let i=this.label?"p-button-icon-"+this.iconPos:null;i&&Y.addClass(t,i);let r=this.getIconClass();r&&Y.addMultipleClasses(t,r),!this.loadingIcon&&this.loading&&(t.innerHTML=this.spinnerIcon),this.htmlElement.insertBefore(t,this.htmlElement.firstChild)}}updateLabel(){let t=Y.findSingle(this.htmlElement,".p-button-label");this.label?t?t.textContent=this.label:this.createLabel():t&&this.htmlElement.removeChild(t)}updateIcon(){let t=Y.findSingle(this.htmlElement,".p-button-icon"),i=Y.findSingle(this.htmlElement,".p-button-label");this.loading&&!this.loadingIcon&&t?t.innerHTML=this.spinnerIcon:t?.innerHTML&&(t.innerHTML=""),t?t.className=this.iconPos?"p-button-icon "+(i?"p-button-icon-"+this.iconPos:"")+" "+this.getIconClass():"p-button-icon "+this.getIconClass():this.createIcon()}getIconClass(){return this.loading?"p-button-loading-icon "+(this.loadingIcon?this.loadingIcon:"p-icon"):this.icon}ngOnDestroy(){this.initialized=!1}static \u0275fac=function(i){return new(i||e)(G(pn),G(qn))};static \u0275dir=je({type:e,selectors:[["","pButton",""]],hostAttrs:[1,"p-element"],inputs:{iconPos:"iconPos",loadingIcon:"loadingIcon",label:"label",icon:"icon",loading:"loading"}})}return e})(),Bv=(()=>{class e{static \u0275fac=function(i){return new(i||e)};static \u0275mod=Ut({type:e});static \u0275inj=Nt({imports:[ti,Su,kn,HT,kn]})}return e})(),Bue=(()=>{class e extends En{static \u0275fac=function(){let t;return function(r){return(t||(t=dt(e)))(r||e)}}();static \u0275cmp=it({type:e,selectors:[["ChevronUpIcon"]],standalone:!0,features:[qe,cn],decls:2,vars:5,consts:[["width","14","height","14","viewBox","0 0 14 14","fill","none","xmlns","http://www.w3.org/2000/svg"],["d","M12.2097 10.4113C12.1057 10.4118 12.0027 10.3915 11.9067 10.3516C11.8107 10.3118 11.7237 10.2532 11.6506 10.1792L6.93602 5.46461L2.22139 10.1476C2.07272 10.244 1.89599 10.2877 1.71953 10.2717C1.54307 10.2556 1.3771 10.1808 1.24822 10.0593C1.11933 9.93766 1.035 9.77633 1.00874 9.6011C0.982477 9.42587 1.0158 9.2469 1.10338 9.09287L6.37701 3.81923C6.52533 3.6711 6.72639 3.58789 6.93602 3.58789C7.14565 3.58789 7.3467 3.6711 7.49502 3.81923L12.7687 9.09287C12.9168 9.24119 13 9.44225 13 9.65187C13 9.8615 12.9168 10.0626 12.7687 10.2109C12.616 10.3487 12.4151 10.4207 12.2097 10.4113Z","fill","currentColor"]],template:function(i,r){1&i&&(yn(),q(0,"svg",0),_e(1,"path",1),W()),2&i&&(Xe(r.getClassNames()),ve("aria-label",r.ariaLabel)("aria-hidden",r.ariaHidden)("role",r.role))},encapsulation:2})}return e})(),Vue=(()=>{class e extends En{static \u0275fac=function(){let t;return function(r){return(t||(t=dt(e)))(r||e)}}();static \u0275cmp=it({type:e,selectors:[["CalendarIcon"]],standalone:!0,features:[qe,cn],decls:2,vars:5,consts:[["width","14","height","14","viewBox","0 0 14 14","fill","none","xmlns","http://www.w3.org/2000/svg"],["d","M10.7838 1.51351H9.83783V0.567568C9.83783 0.417039 9.77804 0.272676 9.6716 0.166237C9.56516 0.0597971 9.42079 0 9.27027 0C9.11974 0 8.97538 0.0597971 8.86894 0.166237C8.7625 0.272676 8.7027 0.417039 8.7027 0.567568V1.51351H5.29729V0.567568C5.29729 0.417039 5.2375 0.272676 5.13106 0.166237C5.02462 0.0597971 4.88025 0 4.72973 0C4.5792 0 4.43484 0.0597971 4.3284 0.166237C4.22196 0.272676 4.16216 0.417039 4.16216 0.567568V1.51351H3.21621C2.66428 1.51351 2.13494 1.73277 1.74467 2.12305C1.35439 2.51333 1.13513 3.04266 1.13513 3.59459V11.9189C1.13513 12.4709 1.35439 13.0002 1.74467 13.3905C2.13494 13.7807 2.66428 14 3.21621 14H10.7838C11.3357 14 11.865 13.7807 12.2553 13.3905C12.6456 13.0002 12.8649 12.4709 12.8649 11.9189V3.59459C12.8649 3.04266 12.6456 2.51333 12.2553 2.12305C11.865 1.73277 11.3357 1.51351 10.7838 1.51351ZM3.21621 2.64865H4.16216V3.59459C4.16216 3.74512 4.22196 3.88949 4.3284 3.99593C4.43484 4.10237 4.5792 4.16216 4.72973 4.16216C4.88025 4.16216 5.02462 4.10237 5.13106 3.99593C5.2375 3.88949 5.29729 3.74512 5.29729 3.59459V2.64865H8.7027V3.59459C8.7027 3.74512 8.7625 3.88949 8.86894 3.99593C8.97538 4.10237 9.11974 4.16216 9.27027 4.16216C9.42079 4.16216 9.56516 4.10237 9.6716 3.99593C9.77804 3.88949 9.83783 3.74512 9.83783 3.59459V2.64865H10.7838C11.0347 2.64865 11.2753 2.74831 11.4527 2.92571C11.6301 3.10311 11.7297 3.34371 11.7297 3.59459V5.67568H2.27027V3.59459C2.27027 3.34371 2.36993 3.10311 2.54733 2.92571C2.72473 2.74831 2.96533 2.64865 3.21621 2.64865ZM10.7838 12.8649H3.21621C2.96533 12.8649 2.72473 12.7652 2.54733 12.5878C2.36993 12.4104 2.27027 12.1698 2.27027 11.9189V6.81081H11.7297V11.9189C11.7297 12.1698 11.6301 12.4104 11.4527 12.5878C11.2753 12.7652 11.0347 12.8649 10.7838 12.8649Z","fill","currentColor"]],template:function(i,r){1&i&&(yn(),q(0,"svg",0),_e(1,"path",1),W()),2&i&&(Xe(r.getClassNames()),ve("aria-label",r.ariaLabel)("aria-hidden",r.ariaHidden)("role",r.role))},encapsulation:2})}return e})();const Trt=["container"],Drt=["inputfield"],Irt=["contentWrapper"];function Mrt(e,n){if(1&e){const t=ft();q(0,"TimesIcon",10),we("click",function(){return J(t),ee(L(3).clear())}),W()}2&e&&k("styleClass","p-calendar-clear-icon")}function Art(e,n){}function krt(e,n){1&e&&B(0,Art,0,0,"ng-template")}function Ort(e,n){if(1&e){const t=ft();q(0,"span",11),we("click",function(){return J(t),ee(L(3).clear())}),B(1,krt,1,0,null,12),W()}if(2&e){const t=L(3);$(1),k("ngTemplateOutlet",t.clearIconTemplate)}}function Rrt(e,n){if(1&e&&(Ke(0),B(1,Mrt,1,1,"TimesIcon",8),B(2,Ort,2,1,"span",9),Ye()),2&e){const t=L(2);$(1),k("ngIf",!t.clearIconTemplate),$(1),k("ngIf",t.clearIconTemplate)}}function Frt(e,n){1&e&&_e(0,"span",15),2&e&&k("ngClass",L(3).icon)}function Nrt(e,n){1&e&&_e(0,"CalendarIcon")}function Prt(e,n){}function Lrt(e,n){1&e&&B(0,Prt,0,0,"ng-template")}function $rt(e,n){if(1&e&&(Ke(0),B(1,Nrt,1,0,"CalendarIcon",6),B(2,Lrt,1,0,null,12),Ye()),2&e){const t=L(3);$(1),k("ngIf",!t.triggerIconTemplate),$(1),k("ngTemplateOutlet",t.triggerIconTemplate)}}function Brt(e,n){if(1&e){const t=ft();q(0,"button",13),we("click",function(r){J(t),L();const o=Xi(1);return ee(L().onButtonClick(r,o))}),B(1,Frt,1,1,"span",14),B(2,$rt,3,2,"ng-container",6),W()}if(2&e){const t=L(2);k("disabled",t.disabled),ve("aria-label",t.iconAriaLabel),$(1),k("ngIf",t.icon),$(1),k("ngIf",!t.icon)}}function Vrt(e,n){if(1&e){const t=ft();q(0,"input",4,5),we("focus",function(r){return J(t),ee(L().onInputFocus(r))})("keydown",function(r){return J(t),ee(L().onInputKeydown(r))})("click",function(){return J(t),ee(L().onInputClick())})("blur",function(r){return J(t),ee(L().onInputBlur(r))})("input",function(r){return J(t),ee(L().onUserInput(r))}),W(),B(2,Rrt,3,2,"ng-container",6),B(3,Brt,3,4,"button",7)}if(2&e){const t=L();Xe(t.inputStyleClass),k("value",t.inputFieldValue)("readonly",t.readonlyInput)("ngStyle",t.inputStyle)("placeholder",t.placeholder||"")("disabled",t.disabled)("ngClass","p-inputtext p-component"),ve("id",t.inputId)("name",t.name)("required",t.required)("aria-required",t.required)("tabindex",t.tabindex)("inputmode",t.touchUI?"off":null)("aria-labelledby",t.ariaLabelledBy),$(2),k("ngIf",t.showClear&&!t.disabled&&null!=t.value),$(1),k("ngIf",t.showIcon)}}function zrt(e,n){1&e&&wt(0)}function Urt(e,n){1&e&&_e(0,"ChevronLeftIcon",37),2&e&&k("styleClass","p-datepicker-prev-icon")}function Hrt(e,n){}function jrt(e,n){1&e&&B(0,Hrt,0,0,"ng-template")}function qrt(e,n){if(1&e&&(q(0,"span",38),B(1,jrt,1,0,null,12),W()),2&e){const t=L(5);$(1),k("ngTemplateOutlet",t.previousIconTemplate)}}function Wrt(e,n){if(1&e){const t=ft();q(0,"button",35),we("keydown",function(r){return J(t),ee(L(4).onContainerButtonKeydown(r))})("click",function(r){return J(t),ee(L(4).onPrevButtonClick(r))}),B(1,Urt,1,1,"ChevronLeftIcon",32),B(2,qrt,2,1,"span",36),W()}if(2&e){const t=L(4);$(1),k("ngIf",!t.previousIconTemplate),$(1),k("ngIf",t.previousIconTemplate)}}function Grt(e,n){if(1&e){const t=ft();q(0,"button",39),we("click",function(r){return J(t),ee(L(4).switchToMonthView(r))})("keydown",function(r){return J(t),ee(L(4).onContainerButtonKeydown(r))}),pt(1),W()}if(2&e){const t=L().$implicit,i=L(3);k("disabled",i.switchViewButtonDisabled()),$(1),Za(" ",i.getMonthName(t.month)," ")}}function Krt(e,n){if(1&e){const t=ft();q(0,"button",40),we("click",function(r){return J(t),ee(L(4).switchToYearView(r))})("keydown",function(r){return J(t),ee(L(4).onContainerButtonKeydown(r))}),pt(1),W()}if(2&e){const t=L().$implicit,i=L(3);k("disabled",i.switchViewButtonDisabled()),$(1),Za(" ",i.getYear(t)," ")}}function Yrt(e,n){if(1&e&&(Ke(0),pt(1),Ye()),2&e){const t=L(5);$(1),pM("",t.yearPickerValues()[0]," - ",t.yearPickerValues()[t.yearPickerValues().length-1],"")}}function Xrt(e,n){1&e&&wt(0)}const J6=function(e){return{$implicit:e}};function Qrt(e,n){if(1&e&&(q(0,"span",41),B(1,Yrt,2,2,"ng-container",6),B(2,Xrt,1,0,"ng-container",42),W()),2&e){const t=L(4);$(1),k("ngIf",!t.decadeTemplate),$(1),k("ngTemplateOutlet",t.decadeTemplate)("ngTemplateOutletContext",_t(3,J6,t.yearPickerValues))}}function Zrt(e,n){1&e&&_e(0,"ChevronRightIcon",37),2&e&&k("styleClass","p-datepicker-next-icon")}function Jrt(e,n){}function eot(e,n){1&e&&B(0,Jrt,0,0,"ng-template")}function tot(e,n){if(1&e&&(q(0,"span",43),B(1,eot,1,0,null,12),W()),2&e){const t=L(4);$(1),k("ngTemplateOutlet",t.nextIconTemplate)}}function not(e,n){if(1&e&&(q(0,"th",49)(1,"span"),pt(2),W()()),2&e){const t=L(5);$(2),Jn(t.getTranslation("weekHeader"))}}function iot(e,n){if(1&e&&(q(0,"th",50)(1,"span"),pt(2),W()()),2&e){const t=n.$implicit;$(2),Jn(t)}}function rot(e,n){if(1&e&&(q(0,"td",53)(1,"span",54),pt(2),W()()),2&e){const t=L().index,i=L(2).$implicit;$(2),Za(" ",i.weekNumbers[t]," ")}}function oot(e,n){if(1&e&&(Ke(0),pt(1),Ye()),2&e){const t=L(2).$implicit;$(1),Jn(t.day)}}function sot(e,n){1&e&&wt(0)}function aot(e,n){if(1&e&&(Ke(0),B(1,sot,1,0,"ng-container",42),Ye()),2&e){const t=L(2).$implicit,i=L(6);$(1),k("ngTemplateOutlet",i.dateTemplate)("ngTemplateOutletContext",_t(2,J6,t))}}function lot(e,n){1&e&&wt(0)}function cot(e,n){if(1&e&&(Ke(0),B(1,lot,1,0,"ng-container",42),Ye()),2&e){const t=L(2).$implicit,i=L(6);$(1),k("ngTemplateOutlet",i.disabledDateTemplate)("ngTemplateOutletContext",_t(2,J6,t))}}const e9=function(e,n){return{"p-highlight":e,"p-disabled":n}};function uot(e,n){if(1&e){const t=ft();Ke(0),q(1,"span",55),we("click",function(r){J(t);const o=L().$implicit;return ee(L(6).onDateSelect(r,o))})("keydown",function(r){J(t);const o=L().$implicit,s=L(3).index;return ee(L(3).onDateCellKeydown(r,o,s))}),B(2,oot,2,1,"ng-container",6),B(3,aot,2,4,"ng-container",6),B(4,cot,2,4,"ng-container",6),W(),Ye()}if(2&e){const t=L().$implicit,i=L(6);$(1),k("ngClass",jn(4,e9,i.isSelected(t)&&t.selectable,!t.selectable)),$(1),k("ngIf",!i.dateTemplate&&(t.selectable||!i.disabledDateTemplate)),$(1),k("ngIf",t.selectable||!i.disabledDateTemplate),$(1),k("ngIf",!t.selectable)}}const dot=function(e,n){return{"p-datepicker-other-month":e,"p-datepicker-today":n}};function fot(e,n){if(1&e&&(q(0,"td",15),B(1,uot,5,7,"ng-container",6),W()),2&e){const t=n.$implicit,i=L(6);k("ngClass",jn(2,dot,t.otherMonth,t.today)),$(1),k("ngIf",!t.otherMonth||i.showOtherMonths)}}function hot(e,n){if(1&e&&(q(0,"tr"),B(1,rot,3,1,"td",51),B(2,fot,2,5,"td",52),W()),2&e){const t=n.$implicit,i=L(5);$(1),k("ngIf",i.showWeek),$(1),k("ngForOf",t)}}function pot(e,n){if(1&e&&(q(0,"div",44)(1,"table",45)(2,"thead")(3,"tr"),B(4,not,3,1,"th",46),B(5,iot,3,1,"th",47),W()(),q(6,"tbody"),B(7,hot,3,2,"tr",48),W()()()),2&e){const t=L().$implicit,i=L(3);$(4),k("ngIf",i.showWeek),$(1),k("ngForOf",i.weekDays),$(2),k("ngForOf",t.dates)}}function got(e,n){if(1&e){const t=ft();q(0,"div",24)(1,"div",25),B(2,Wrt,3,2,"button",26),q(3,"div",27),B(4,Grt,2,2,"button",28),B(5,Krt,2,2,"button",29),B(6,Qrt,3,5,"span",30),W(),q(7,"button",31),we("keydown",function(r){return J(t),ee(L(3).onContainerButtonKeydown(r))})("click",function(r){return J(t),ee(L(3).onNextButtonClick(r))}),B(8,Zrt,1,1,"ChevronRightIcon",32),B(9,tot,2,1,"span",33),W()(),B(10,pot,8,3,"div",34),W()}if(2&e){const t=n.index,i=L(3);$(2),k("ngIf",0===t),$(2),k("ngIf","date"===i.currentView),$(1),k("ngIf","year"!==i.currentView),$(1),k("ngIf","year"===i.currentView),$(1),iw("display",1===i.numberOfMonths||t===i.numberOfMonths-1?"inline-flex":"none"),$(1),k("ngIf",!i.nextIconTemplate),$(1),k("ngIf",i.nextIconTemplate),$(1),k("ngIf","date"===i.currentView)}}function mot(e,n){if(1&e){const t=ft();q(0,"span",58),we("click",function(r){const s=J(t).index;return ee(L(4).onMonthSelect(r,s))})("keydown",function(r){const s=J(t).index;return ee(L(4).onMonthCellKeydown(r,s))}),pt(1),W()}if(2&e){const t=n.$implicit,i=n.index,r=L(4);k("ngClass",jn(2,e9,r.isMonthSelected(i),r.isMonthDisabled(i))),$(1),Za(" ",t," ")}}function _ot(e,n){if(1&e&&(q(0,"div",56),B(1,mot,2,5,"span",57),W()),2&e){const t=L(3);$(1),k("ngForOf",t.monthPickerValues())}}function yot(e,n){if(1&e){const t=ft();q(0,"span",61),we("click",function(r){const s=J(t).$implicit;return ee(L(4).onYearSelect(r,s))})("keydown",function(r){const s=J(t).$implicit;return ee(L(4).onYearCellKeydown(r,s))}),pt(1),W()}if(2&e){const t=n.$implicit,i=L(4);k("ngClass",jn(2,e9,i.isYearSelected(t),i.isYearDisabled(t))),$(1),Za(" ",t," ")}}function vot(e,n){if(1&e&&(q(0,"div",59),B(1,yot,2,5,"span",60),W()),2&e){const t=L(3);$(1),k("ngForOf",t.yearPickerValues())}}function bot(e,n){if(1&e&&(Ke(0),q(1,"div",20),B(2,got,11,9,"div",21),W(),B(3,_ot,2,1,"div",22),B(4,vot,2,1,"div",23),Ye()),2&e){const t=L(2);$(2),k("ngForOf",t.months),$(1),k("ngIf","month"===t.currentView),$(1),k("ngIf","year"===t.currentView)}}function wot(e,n){1&e&&_e(0,"ChevronUpIcon")}function Cot(e,n){}function xot(e,n){1&e&&B(0,Cot,0,0,"ng-template")}function Eot(e,n){1&e&&(Ke(0),pt(1,"0"),Ye())}function Sot(e,n){1&e&&_e(0,"ChevronDownIcon")}function Tot(e,n){}function Dot(e,n){1&e&&B(0,Tot,0,0,"ng-template")}function Iot(e,n){1&e&&_e(0,"ChevronUpIcon")}function Mot(e,n){}function Aot(e,n){1&e&&B(0,Mot,0,0,"ng-template")}function kot(e,n){1&e&&(Ke(0),pt(1,"0"),Ye())}function Oot(e,n){1&e&&_e(0,"ChevronDownIcon")}function Rot(e,n){}function Fot(e,n){1&e&&B(0,Rot,0,0,"ng-template")}function Not(e,n){if(1&e&&(q(0,"div",65)(1,"span"),pt(2),W()()),2&e){const t=L(3);$(2),Jn(t.timeSeparator)}}function Pot(e,n){1&e&&_e(0,"ChevronUpIcon")}function Lot(e,n){}function $ot(e,n){1&e&&B(0,Lot,0,0,"ng-template")}function Bot(e,n){1&e&&(Ke(0),pt(1,"0"),Ye())}function Vot(e,n){1&e&&_e(0,"ChevronDownIcon")}function zot(e,n){}function Uot(e,n){1&e&&B(0,zot,0,0,"ng-template")}function Hot(e,n){if(1&e){const t=ft();q(0,"div",70)(1,"button",64),we("keydown",function(r){return J(t),ee(L(3).onContainerButtonKeydown(r))})("keydown.enter",function(r){return J(t),ee(L(3).incrementSecond(r))})("keydown.space",function(r){return J(t),ee(L(3).incrementSecond(r))})("mousedown",function(r){return J(t),ee(L(3).onTimePickerElementMouseDown(r,2,1))})("mouseup",function(r){return J(t),ee(L(3).onTimePickerElementMouseUp(r))})("keyup.enter",function(r){return J(t),ee(L(3).onTimePickerElementMouseUp(r))})("keyup.space",function(r){return J(t),ee(L(3).onTimePickerElementMouseUp(r))})("mouseleave",function(){return J(t),ee(L(3).onTimePickerElementMouseLeave())}),B(2,Pot,1,0,"ChevronUpIcon",6),B(3,$ot,1,0,null,12),W(),q(4,"span"),B(5,Bot,2,0,"ng-container",6),pt(6),W(),q(7,"button",64),we("keydown",function(r){return J(t),ee(L(3).onContainerButtonKeydown(r))})("keydown.enter",function(r){return J(t),ee(L(3).decrementSecond(r))})("keydown.space",function(r){return J(t),ee(L(3).decrementSecond(r))})("mousedown",function(r){return J(t),ee(L(3).onTimePickerElementMouseDown(r,2,-1))})("mouseup",function(r){return J(t),ee(L(3).onTimePickerElementMouseUp(r))})("keyup.enter",function(r){return J(t),ee(L(3).onTimePickerElementMouseUp(r))})("keyup.space",function(r){return J(t),ee(L(3).onTimePickerElementMouseUp(r))})("mouseleave",function(){return J(t),ee(L(3).onTimePickerElementMouseLeave())}),B(8,Vot,1,0,"ChevronDownIcon",6),B(9,Uot,1,0,null,12),W()()}if(2&e){const t=L(3);$(2),k("ngIf",!t.incrementIconTemplate),$(1),k("ngTemplateOutlet",t.incrementIconTemplate),$(2),k("ngIf",t.currentSecond<10),$(1),Jn(t.currentSecond),$(2),k("ngIf",!t.decrementIconTemplate),$(1),k("ngTemplateOutlet",t.decrementIconTemplate)}}function jot(e,n){1&e&&_e(0,"ChevronUpIcon")}function qot(e,n){}function Wot(e,n){1&e&&B(0,qot,0,0,"ng-template")}function Got(e,n){1&e&&_e(0,"ChevronDownIcon")}function Kot(e,n){}function Yot(e,n){1&e&&B(0,Kot,0,0,"ng-template")}function Xot(e,n){if(1&e){const t=ft();q(0,"div",71)(1,"button",72),we("keydown",function(r){return J(t),ee(L(3).onContainerButtonKeydown(r))})("click",function(r){return J(t),ee(L(3).toggleAMPM(r))})("keydown.enter",function(r){return J(t),ee(L(3).toggleAMPM(r))}),B(2,jot,1,0,"ChevronUpIcon",6),B(3,Wot,1,0,null,12),W(),q(4,"span"),pt(5),W(),q(6,"button",72),we("keydown",function(r){return J(t),ee(L(3).onContainerButtonKeydown(r))})("click",function(r){return J(t),ee(L(3).toggleAMPM(r))})("keydown.enter",function(r){return J(t),ee(L(3).toggleAMPM(r))}),B(7,Got,1,0,"ChevronDownIcon",6),B(8,Yot,1,0,null,12),W()()}if(2&e){const t=L(3);$(2),k("ngIf",!t.incrementIconTemplate),$(1),k("ngTemplateOutlet",t.incrementIconTemplate),$(2),Jn(t.pm?"PM":"AM"),$(2),k("ngIf",!t.decrementIconTemplate),$(1),k("ngTemplateOutlet",t.decrementIconTemplate)}}function Qot(e,n){if(1&e){const t=ft();q(0,"div",62)(1,"div",63)(2,"button",64),we("keydown",function(r){return J(t),ee(L(2).onContainerButtonKeydown(r))})("keydown.enter",function(r){return J(t),ee(L(2).incrementHour(r))})("keydown.space",function(r){return J(t),ee(L(2).incrementHour(r))})("mousedown",function(r){return J(t),ee(L(2).onTimePickerElementMouseDown(r,0,1))})("mouseup",function(r){return J(t),ee(L(2).onTimePickerElementMouseUp(r))})("keyup.enter",function(r){return J(t),ee(L(2).onTimePickerElementMouseUp(r))})("keyup.space",function(r){return J(t),ee(L(2).onTimePickerElementMouseUp(r))})("mouseleave",function(){return J(t),ee(L(2).onTimePickerElementMouseLeave())}),B(3,wot,1,0,"ChevronUpIcon",6),B(4,xot,1,0,null,12),W(),q(5,"span"),B(6,Eot,2,0,"ng-container",6),pt(7),W(),q(8,"button",64),we("keydown",function(r){return J(t),ee(L(2).onContainerButtonKeydown(r))})("keydown.enter",function(r){return J(t),ee(L(2).decrementHour(r))})("keydown.space",function(r){return J(t),ee(L(2).decrementHour(r))})("mousedown",function(r){return J(t),ee(L(2).onTimePickerElementMouseDown(r,0,-1))})("mouseup",function(r){return J(t),ee(L(2).onTimePickerElementMouseUp(r))})("keyup.enter",function(r){return J(t),ee(L(2).onTimePickerElementMouseUp(r))})("keyup.space",function(r){return J(t),ee(L(2).onTimePickerElementMouseUp(r))})("mouseleave",function(){return J(t),ee(L(2).onTimePickerElementMouseLeave())}),B(9,Sot,1,0,"ChevronDownIcon",6),B(10,Dot,1,0,null,12),W()(),q(11,"div",65)(12,"span"),pt(13),W()(),q(14,"div",66)(15,"button",64),we("keydown",function(r){return J(t),ee(L(2).onContainerButtonKeydown(r))})("keydown.enter",function(r){return J(t),ee(L(2).incrementMinute(r))})("keydown.space",function(r){return J(t),ee(L(2).incrementMinute(r))})("mousedown",function(r){return J(t),ee(L(2).onTimePickerElementMouseDown(r,1,1))})("mouseup",function(r){return J(t),ee(L(2).onTimePickerElementMouseUp(r))})("keyup.enter",function(r){return J(t),ee(L(2).onTimePickerElementMouseUp(r))})("keyup.space",function(r){return J(t),ee(L(2).onTimePickerElementMouseUp(r))})("mouseleave",function(){return J(t),ee(L(2).onTimePickerElementMouseLeave())}),B(16,Iot,1,0,"ChevronUpIcon",6),B(17,Aot,1,0,null,12),W(),q(18,"span"),B(19,kot,2,0,"ng-container",6),pt(20),W(),q(21,"button",64),we("keydown",function(r){return J(t),ee(L(2).onContainerButtonKeydown(r))})("keydown.enter",function(r){return J(t),ee(L(2).decrementMinute(r))})("keydown.space",function(r){return J(t),ee(L(2).decrementMinute(r))})("mousedown",function(r){return J(t),ee(L(2).onTimePickerElementMouseDown(r,1,-1))})("mouseup",function(r){return J(t),ee(L(2).onTimePickerElementMouseUp(r))})("keyup.enter",function(r){return J(t),ee(L(2).onTimePickerElementMouseUp(r))})("keyup.space",function(r){return J(t),ee(L(2).onTimePickerElementMouseUp(r))})("mouseleave",function(){return J(t),ee(L(2).onTimePickerElementMouseLeave())}),B(22,Oot,1,0,"ChevronDownIcon",6),B(23,Fot,1,0,null,12),W()(),B(24,Not,3,1,"div",67),B(25,Hot,10,6,"div",68),B(26,Xot,9,5,"div",69),W()}if(2&e){const t=L(2);$(3),k("ngIf",!t.incrementIconTemplate),$(1),k("ngTemplateOutlet",t.incrementIconTemplate),$(2),k("ngIf",t.currentHour<10),$(1),Jn(t.currentHour),$(2),k("ngIf",!t.decrementIconTemplate),$(1),k("ngTemplateOutlet",t.decrementIconTemplate),$(3),Jn(t.timeSeparator),$(3),k("ngIf",!t.incrementIconTemplate),$(1),k("ngTemplateOutlet",t.incrementIconTemplate),$(2),k("ngIf",t.currentMinute<10),$(1),Jn(t.currentMinute),$(2),k("ngIf",!t.decrementIconTemplate),$(1),k("ngTemplateOutlet",t.decrementIconTemplate),$(1),k("ngIf",t.showSeconds),$(1),k("ngIf",t.showSeconds),$(1),k("ngIf","12"==t.hourFormat)}}const zue=function(e){return[e]};function Zot(e,n){if(1&e){const t=ft();q(0,"div",73)(1,"button",74),we("keydown",function(r){return J(t),ee(L(2).onContainerButtonKeydown(r))})("click",function(r){return J(t),ee(L(2).onTodayButtonClick(r))}),W(),q(2,"button",74),we("keydown",function(r){return J(t),ee(L(2).onContainerButtonKeydown(r))})("click",function(r){return J(t),ee(L(2).onClearButtonClick(r))}),W()()}if(2&e){const t=L(2);$(1),k("label",t.getTranslation("today"))("ngClass",_t(4,zue,t.todayButtonStyleClass)),$(1),k("label",t.getTranslation("clear"))("ngClass",_t(6,zue,t.clearButtonStyleClass))}}function Jot(e,n){1&e&&wt(0)}const est=function(e,n,t,i,r,o){return{"p-datepicker p-component":!0,"p-datepicker-inline":e,"p-disabled":n,"p-datepicker-timeonly":t,"p-datepicker-multiple-month":i,"p-datepicker-monthpicker":r,"p-datepicker-touch-ui":o}},Uue=function(e,n){return{showTransitionParams:e,hideTransitionParams:n}},tst=function(e){return{value:"visibleTouchUI",params:e}},nst=function(e){return{value:"visible",params:e}};function ist(e,n){if(1&e){const t=ft();q(0,"div",16,17),we("@overlayAnimation.start",function(r){return J(t),ee(L().onOverlayAnimationStart(r))})("@overlayAnimation.done",function(r){return J(t),ee(L().onOverlayAnimationDone(r))})("click",function(r){return J(t),ee(L().onOverlayClick(r))}),Jr(2),B(3,zrt,1,0,"ng-container",12),B(4,bot,5,3,"ng-container",6),B(5,Qot,27,16,"div",18),B(6,Zot,3,8,"div",19),Jr(7,1),B(8,Jot,1,0,"ng-container",12),W()}if(2&e){const t=L();Xe(t.panelStyleClass),k("ngStyle",t.panelStyle)("ngClass",function rz(e,n,t,i,r,o,s,a,l){const c=br()+e,u=le(),d=hs(u,c,t,i,r,o);return lf(u,c+4,s,a)||d?Ya(u,c+6,l?n.call(l,t,i,r,o,s,a):n(t,i,r,o,s,a)):Z0(u,c+6)}(11,est,t.inline,t.disabled,t.timeOnly,t.numberOfMonths>1,"month"===t.view,t.touchUI))("@overlayAnimation",t.touchUI?_t(21,tst,jn(18,Uue,t.showTransitionOptions,t.hideTransitionOptions)):_t(26,nst,jn(23,Uue,t.showTransitionOptions,t.hideTransitionOptions)))("@.disabled",!0===t.inline),$(3),k("ngTemplateOutlet",t.headerTemplate),$(1),k("ngIf",!t.timeOnly),$(1),k("ngIf",(t.showTime||t.timeOnly)&&"date"===t.currentView),$(1),k("ngIf",t.showButtonBar),$(2),k("ngTemplateOutlet",t.footerTemplate)}}const rst=[[["p-header"]],[["p-footer"]]],ost=function(e,n,t,i){return{"p-calendar":!0,"p-calendar-w-btn":e,"p-calendar-timeonly":n,"p-calendar-disabled":t,"p-focus":i}},sst=["p-header","p-footer"],ast={provide:Qi,useExisting:Rt(()=>lst),multi:!0};let lst=(()=>{class e{document;el;renderer;cd;zone;config;overlayService;style;styleClass;inputStyle;inputId;name;inputStyleClass;placeholder;ariaLabelledBy;iconAriaLabel;disabled;dateFormat;multipleSeparator=",";rangeSeparator="-";inline=!1;showOtherMonths=!0;selectOtherMonths;showIcon;icon;appendTo;readonlyInput;shortYearCutoff="+10";monthNavigator;yearNavigator;hourFormat="24";timeOnly;stepHour=1;stepMinute=1;stepSecond=1;showSeconds=!1;required;showOnFocus=!0;showWeek=!1;showClear=!1;dataType="date";selectionMode="single";maxDateCount;showButtonBar;todayButtonStyleClass="p-button-text";clearButtonStyleClass="p-button-text";autoZIndex=!0;baseZIndex=0;panelStyleClass;panelStyle;keepInvalid=!1;hideOnDateTimeSelect=!0;touchUI;timeSeparator=":";focusTrap=!0;showTransitionOptions=".12s cubic-bezier(0, 0, 0.2, 1)";hideTransitionOptions=".1s linear";tabindex;get minDate(){return this._minDate}set minDate(t){this._minDate=t,null!=this.currentMonth&&null!=this.currentMonth&&this.currentYear&&this.createMonths(this.currentMonth,this.currentYear)}get maxDate(){return this._maxDate}set maxDate(t){this._maxDate=t,null!=this.currentMonth&&null!=this.currentMonth&&this.currentYear&&this.createMonths(this.currentMonth,this.currentYear)}get disabledDates(){return this._disabledDates}set disabledDates(t){this._disabledDates=t,null!=this.currentMonth&&null!=this.currentMonth&&this.currentYear&&this.createMonths(this.currentMonth,this.currentYear)}get disabledDays(){return this._disabledDays}set disabledDays(t){this._disabledDays=t,null!=this.currentMonth&&null!=this.currentMonth&&this.currentYear&&this.createMonths(this.currentMonth,this.currentYear)}get yearRange(){return this._yearRange}set yearRange(t){if(this._yearRange=t,t){const i=t.split(":"),r=parseInt(i[0]),o=parseInt(i[1]);this.populateYearOptions(r,o)}}get showTime(){return this._showTime}set showTime(t){this._showTime=t,void 0===this.currentHour&&this.initTime(this.value||new Date),this.updateInputfield()}get responsiveOptions(){return this._responsiveOptions}set responsiveOptions(t){this._responsiveOptions=t,this.destroyResponsiveStyleElement(),this.createResponsiveStyle()}get numberOfMonths(){return this._numberOfMonths}set numberOfMonths(t){this._numberOfMonths=t,this.destroyResponsiveStyleElement(),this.createResponsiveStyle()}get firstDayOfWeek(){return this._firstDayOfWeek}set firstDayOfWeek(t){this._firstDayOfWeek=t,this.createWeekDays()}set locale(t){console.warn("Locale property has no effect, use new i18n API instead.")}get view(){return this._view}set view(t){this._view=t,this.currentView=this._view}get defaultDate(){return this._defaultDate}set defaultDate(t){if(this._defaultDate=t,this.initialized){const i=t||new Date;this.currentMonth=i.getMonth(),this.currentYear=i.getFullYear(),this.initTime(i),this.createMonths(this.currentMonth,this.currentYear)}}onFocus=new De;onBlur=new De;onClose=new De;onSelect=new De;onClear=new De;onInput=new De;onTodayClick=new De;onClearClick=new De;onMonthChange=new De;onYearChange=new De;onClickOutside=new De;onShow=new De;templates;containerViewChild;inputfieldViewChild;set content(t){this.contentViewChild=t,this.contentViewChild&&(this.isMonthNavigate?(Promise.resolve(null).then(()=>this.updateFocus()),this.isMonthNavigate=!1):this.focus||this.initFocusableCell())}contentViewChild;value;dates;months;weekDays;currentMonth;currentYear;currentHour;currentMinute;currentSecond;pm;mask;maskClickListener;overlay;responsiveStyleElement;overlayVisible;onModelChange=()=>{};onModelTouched=()=>{};calendarElement;timePickerTimer;documentClickListener;animationEndListener;ticksTo1970;yearOptions;focus;isKeydown;filled;inputFieldValue=null;_minDate;_maxDate;_showTime;_yearRange;preventDocumentListener;dateTemplate;headerTemplate;footerTemplate;disabledDateTemplate;decadeTemplate;previousIconTemplate;nextIconTemplate;triggerIconTemplate;clearIconTemplate;decrementIconTemplate;incrementIconTemplate;_disabledDates;_disabledDays;selectElement;todayElement;focusElement;scrollHandler;documentResizeListener;navigationState=null;isMonthNavigate;initialized;translationSubscription;_locale;_responsiveOptions;currentView;attributeSelector;_numberOfMonths=1;_firstDayOfWeek;_view="date";preventFocus;_defaultDate;window;get locale(){return this._locale}constructor(t,i,r,o,s,a,l){this.document=t,this.el=i,this.renderer=r,this.cd=o,this.zone=s,this.config=a,this.overlayService=l,this.window=this.document.defaultView}ngOnInit(){this.attributeSelector=Mr();const t=this.defaultDate||new Date;this.createResponsiveStyle(),this.currentMonth=t.getMonth(),this.currentYear=t.getFullYear(),this.yearOptions=[],this.currentView=this.view,"date"===this.view&&(this.createWeekDays(),this.initTime(t),this.createMonths(this.currentMonth,this.currentYear),this.ticksTo1970=24*(718685+Math.floor(492.5)-Math.floor(19.7)+Math.floor(4.925))*60*60*1e7),this.translationSubscription=this.config.translationObserver.subscribe(()=>{this.createWeekDays(),this.cd.markForCheck()}),this.initialized=!0}ngAfterContentInit(){this.templates.forEach(t=>{switch(t.getType()){case"date":default:this.dateTemplate=t.template;break;case"decade":this.decadeTemplate=t.template;break;case"disabledDate":this.disabledDateTemplate=t.template;break;case"header":this.headerTemplate=t.template;break;case"previousicon":this.previousIconTemplate=t.template;break;case"nexticon":this.nextIconTemplate=t.template;break;case"triggericon":this.triggerIconTemplate=t.template;break;case"clearicon":this.clearIconTemplate=t.template;break;case"decrementicon":this.decrementIconTemplate=t.template;break;case"incrementicon":this.incrementIconTemplate=t.template;break;case"footer":this.footerTemplate=t.template}})}ngAfterViewInit(){this.inline&&(this.contentViewChild&&this.contentViewChild.nativeElement.setAttribute(this.attributeSelector,""),this.disabled||(this.initFocusableCell(),1===this.numberOfMonths&&(this.contentViewChild.nativeElement.style.width=Y.getOuterWidth(this.containerViewChild?.nativeElement)+"px")))}getTranslation(t){return this.config.getTranslation(t)}populateYearOptions(t,i){this.yearOptions=[];for(let r=t;r<=i;r++)this.yearOptions.push(r)}createWeekDays(){this.weekDays=[];let t=this.getFirstDateOfWeek(),i=this.getTranslation(ws.DAY_NAMES_MIN);for(let r=0;r<7;r++)this.weekDays.push(i[t]),t=6==t?0:++t}monthPickerValues(){let t=[];for(let i=0;i<=11;i++)t.push(this.config.getTranslation("monthNamesShort")[i]);return t}yearPickerValues(){let t=[],i=this.currentYear-this.currentYear%10;for(let r=0;r<10;r++)t.push(i+r);return t}createMonths(t,i){this.months=this.months=[];for(let r=0;r<this.numberOfMonths;r++){let o=t+r,s=i;o>11&&(o=o%11-1,s=i+1),this.months.push(this.createMonth(o,s))}}getWeekNumber(t){let i=new Date(t.getTime());i.setDate(i.getDate()+4-(i.getDay()||7));let r=i.getTime();return i.setMonth(0),i.setDate(1),Math.floor(Math.round((r-i.getTime())/864e5)/7)+1}createMonth(t,i){let r=[],o=this.getFirstDayOfMonthIndex(t,i),s=this.getDaysCountInMonth(t,i),a=this.getDaysCountInPrevMonth(t,i),l=1,c=new Date,u=[],d=Math.ceil((s+o)/7);for(let f=0;f<d;f++){let h=[];if(0==f){for(let g=a-o+1;g<=a;g++){let m=this.getPreviousMonthAndYear(t,i);h.push({day:g,month:m.month,year:m.year,otherMonth:!0,today:this.isToday(c,g,m.month,m.year),selectable:this.isSelectable(g,m.month,m.year,!0)})}let p=7-h.length;for(let g=0;g<p;g++)h.push({day:l,month:t,year:i,today:this.isToday(c,l,t,i),selectable:this.isSelectable(l,t,i,!1)}),l++}else for(let p=0;p<7;p++){if(l>s){let g=this.getNextMonthAndYear(t,i);h.push({day:l-s,month:g.month,year:g.year,otherMonth:!0,today:this.isToday(c,l-s,g.month,g.year),selectable:this.isSelectable(l-s,g.month,g.year,!0)})}else h.push({day:l,month:t,year:i,today:this.isToday(c,l,t,i),selectable:this.isSelectable(l,t,i,!1)});l++}this.showWeek&&u.push(this.getWeekNumber(new Date(h[0].year,h[0].month,h[0].day))),r.push(h)}return{month:t,year:i,dates:r,weekNumbers:u}}initTime(t){this.pm=t.getHours()>11,this.showTime?(this.currentMinute=t.getMinutes(),this.currentSecond=t.getSeconds(),this.setCurrentHourPM(t.getHours())):this.timeOnly&&(this.currentMinute=0,this.currentHour=0,this.currentSecond=0)}navBackward(t){this.disabled?t.preventDefault():(this.isMonthNavigate=!0,"month"===this.currentView?(this.decrementYear(),setTimeout(()=>{this.updateFocus()},1)):"year"===this.currentView?(this.decrementDecade(),setTimeout(()=>{this.updateFocus()},1)):(0===this.currentMonth?(this.currentMonth=11,this.decrementYear()):this.currentMonth--,this.onMonthChange.emit({month:this.currentMonth+1,year:this.currentYear}),this.createMonths(this.currentMonth,this.currentYear)))}navForward(t){this.disabled?t.preventDefault():(this.isMonthNavigate=!0,"month"===this.currentView?(this.incrementYear(),setTimeout(()=>{this.updateFocus()},1)):"year"===this.currentView?(this.incrementDecade(),setTimeout(()=>{this.updateFocus()},1)):(11===this.currentMonth?(this.currentMonth=0,this.incrementYear()):this.currentMonth++,this.onMonthChange.emit({month:this.currentMonth+1,year:this.currentYear}),this.createMonths(this.currentMonth,this.currentYear)))}decrementYear(){this.currentYear--;let t=this.yearOptions;if(this.yearNavigator&&this.currentYear<t[0]){let i=t[t.length-1]-t[0];this.populateYearOptions(t[0]-i,t[t.length-1]-i)}}decrementDecade(){this.currentYear=this.currentYear-10}incrementDecade(){this.currentYear=this.currentYear+10}incrementYear(){this.currentYear++;let t=this.yearOptions;if(this.yearNavigator&&this.currentYear>t[t.length-1]){let i=t[t.length-1]-t[0];this.populateYearOptions(t[0]+i,t[t.length-1]+i)}}switchToMonthView(t){this.setCurrentView("month"),t.preventDefault()}switchToYearView(t){this.setCurrentView("year"),t.preventDefault()}onDateSelect(t,i){!this.disabled&&i.selectable?(this.isMultipleSelection()&&this.isSelected(i)?(this.value=this.value.filter((r,o)=>!this.isDateEquals(r,i)),0===this.value.length&&(this.value=null),this.updateModel(this.value)):this.shouldSelectDate(i)&&this.selectDate(i),this.isSingleSelection()&&this.hideOnDateTimeSelect&&setTimeout(()=>{t.preventDefault(),this.hideOverlay(),this.mask&&this.disableModality(),this.cd.markForCheck()},150),this.updateInputfield(),t.preventDefault()):t.preventDefault()}shouldSelectDate(t){return!this.isMultipleSelection()||null==this.maxDateCount||this.maxDateCount>(this.value?this.value.length:0)}onMonthSelect(t,i){"month"===this.view?this.onDateSelect(t,{year:this.currentYear,month:i,day:1,selectable:!0}):(this.currentMonth=i,this.createMonths(this.currentMonth,this.currentYear),this.setCurrentView("date"),this.onMonthChange.emit({month:this.currentMonth+1,year:this.currentYear}))}onYearSelect(t,i){"year"===this.view?this.onDateSelect(t,{year:i,month:0,day:1,selectable:!0}):(this.currentYear=i,this.setCurrentView("month"),this.onYearChange.emit({month:this.currentMonth+1,year:this.currentYear}))}updateInputfield(){let t="";if(this.value)if(this.isSingleSelection())t=this.formatDateTime(this.value);else if(this.isMultipleSelection())for(let i=0;i<this.value.length;i++)t+=this.formatDateTime(this.value[i]),i!==this.value.length-1&&(t+=this.multipleSeparator+" ");else if(this.isRangeSelection()&&this.value&&this.value.length){let r=this.value[1];t=this.formatDateTime(this.value[0]),r&&(t+=" "+this.rangeSeparator+" "+this.formatDateTime(r))}this.inputFieldValue=t,this.updateFilledState(),this.inputfieldViewChild&&this.inputfieldViewChild.nativeElement&&(this.inputfieldViewChild.nativeElement.value=this.inputFieldValue)}formatDateTime(t){let i=this.keepInvalid?t:null;return this.isValidDate(t)&&(this.timeOnly?i=this.formatTime(t):(i=this.formatDate(t,this.getDateFormat()),this.showTime&&(i+=" "+this.formatTime(t)))),i}setCurrentHourPM(t){"12"==this.hourFormat?(this.pm=t>11,this.currentHour=t>=12?12==t?12:t-12:0==t?12:t):this.currentHour=t}setCurrentView(t){this.currentView=t,this.cd.detectChanges(),this.alignOverlay()}selectDate(t){let i=new Date(t.year,t.month,t.day);if(this.showTime&&(i.setHours("12"==this.hourFormat?12===this.currentHour?this.pm?12:0:this.pm?this.currentHour+12:this.currentHour:this.currentHour),i.setMinutes(this.currentMinute),i.setSeconds(this.currentSecond)),this.minDate&&this.minDate>i&&(i=this.minDate,this.setCurrentHourPM(i.getHours()),this.currentMinute=i.getMinutes(),this.currentSecond=i.getSeconds()),this.maxDate&&this.maxDate<i&&(i=this.maxDate,this.setCurrentHourPM(i.getHours()),this.currentMinute=i.getMinutes(),this.currentSecond=i.getSeconds()),this.isSingleSelection())this.updateModel(i);else if(this.isMultipleSelection())this.updateModel(this.value?[...this.value,i]:[i]);else if(this.isRangeSelection())if(this.value&&this.value.length){let r=this.value[0],o=this.value[1];!o&&i.getTime()>=r.getTime()?o=i:(r=i,o=null),this.updateModel([r,o])}else this.updateModel([i,null]);this.onSelect.emit(i)}updateModel(t){if(this.value=t,"date"==this.dataType)this.onModelChange(this.value);else if("string"==this.dataType)if(this.isSingleSelection())this.onModelChange(this.formatDateTime(this.value));else{let i=null;Array.isArray(this.value)&&(i=this.value.map(r=>this.formatDateTime(r))),this.onModelChange(i)}}getFirstDayOfMonthIndex(t,i){let r=new Date;r.setDate(1),r.setMonth(t),r.setFullYear(i);let o=r.getDay()+this.getSundayIndex();return o>=7?o-7:o}getDaysCountInMonth(t,i){return 32-this.daylightSavingAdjust(new Date(i,t,32)).getDate()}getDaysCountInPrevMonth(t,i){let r=this.getPreviousMonthAndYear(t,i);return this.getDaysCountInMonth(r.month,r.year)}getPreviousMonthAndYear(t,i){let r,o;return 0===t?(r=11,o=i-1):(r=t-1,o=i),{month:r,year:o}}getNextMonthAndYear(t,i){let r,o;return 11===t?(r=0,o=i+1):(r=t+1,o=i),{month:r,year:o}}getSundayIndex(){let t=this.getFirstDateOfWeek();return t>0?7-t:0}isSelected(t){if(!this.value)return!1;if(this.isSingleSelection())return this.isDateEquals(this.value,t);if(this.isMultipleSelection()){let i=!1;for(let r of this.value)if(i=this.isDateEquals(r,t),i)break;return i}return this.isRangeSelection()?this.value[1]?this.isDateEquals(this.value[0],t)||this.isDateEquals(this.value[1],t)||this.isDateBetween(this.value[0],this.value[1],t):this.isDateEquals(this.value[0],t):void 0}isComparable(){return null!=this.value&&"string"!=typeof this.value}isMonthSelected(t){if(this.isComparable()&&!this.isMultipleSelection()){const[i,r]=this.isRangeSelection()?this.value:[this.value,this.value],o=new Date(this.currentYear,t,1);return o>=i&&o<=(r??i)}return!1}isMonthDisabled(t){for(let i=1;i<this.getDaysCountInMonth(t,this.currentYear)+1;i++)if(this.isSelectable(i,t,this.currentYear,!1))return!1;return!0}isYearDisabled(t){return!this.isSelectable(1,this.currentMonth,t,!1)}isYearSelected(t){if(this.isComparable()){let i=this.isRangeSelection()?this.value[0]:this.value;return!this.isMultipleSelection()&&i.getFullYear()===t}return!1}isDateEquals(t,i){return!(!t||!ht.isDate(t))&&t.getDate()===i.day&&t.getMonth()===i.month&&t.getFullYear()===i.year}isDateBetween(t,i,r){if(ht.isDate(t)&&ht.isDate(i)){let s=new Date(r.year,r.month,r.day);return t.getTime()<=s.getTime()&&i.getTime()>=s.getTime()}return!1}isSingleSelection(){return"single"===this.selectionMode}isRangeSelection(){return"range"===this.selectionMode}isMultipleSelection(){return"multiple"===this.selectionMode}isToday(t,i,r,o){return t.getDate()===i&&t.getMonth()===r&&t.getFullYear()===o}isSelectable(t,i,r,o){let s=!0,a=!0,l=!0,c=!0;return!(o&&!this.selectOtherMonths)&&(this.minDate&&(this.minDate.getFullYear()>r||this.minDate.getFullYear()===r&&(this.minDate.getMonth()>i||this.minDate.getMonth()===i&&this.minDate.getDate()>t))&&(s=!1),this.maxDate&&(this.maxDate.getFullYear()<r||this.maxDate.getFullYear()===r&&(this.maxDate.getMonth()<i||this.maxDate.getMonth()===i&&this.maxDate.getDate()<t))&&(a=!1),this.disabledDates&&(l=!this.isDateDisabled(t,i,r)),this.disabledDays&&(c=!this.isDayDisabled(t,i,r)),s&&a&&l&&c)}isDateDisabled(t,i,r){if(this.disabledDates)for(let o of this.disabledDates)if(o.getFullYear()===r&&o.getMonth()===i&&o.getDate()===t)return!0;return!1}isDayDisabled(t,i,r){if(this.disabledDays){let s=new Date(r,i,t).getDay();return-1!==this.disabledDays.indexOf(s)}return!1}onInputFocus(t){this.focus=!0,this.showOnFocus&&this.showOverlay(),this.onFocus.emit(t)}onInputClick(){this.showOnFocus&&!this.overlayVisible&&this.showOverlay()}onInputBlur(t){this.focus=!1,this.onBlur.emit(t),this.keepInvalid||this.updateInputfield(),this.onModelTouched()}onButtonClick(t,i){this.overlayVisible?this.hideOverlay():(i.focus(),this.showOverlay())}clear(){this.inputFieldValue=null,this.value=null,this.onModelChange(this.value),this.onClear.emit()}onOverlayClick(t){this.overlayService.add({originalEvent:t,target:this.el.nativeElement})}getMonthName(t){return this.config.getTranslation("monthNames")[t]}getYear(t){return"month"===this.currentView?this.currentYear:t.year}switchViewButtonDisabled(){return this.numberOfMonths>1||this.disabled}onPrevButtonClick(t){this.navigationState={backward:!0,button:!0},this.navBackward(t)}onNextButtonClick(t){this.navigationState={backward:!1,button:!0},this.navForward(t)}onContainerButtonKeydown(t){switch(t.which){case 9:this.inline||this.trapFocus(t);break;case 27:this.overlayVisible=!1,t.preventDefault()}}onInputKeydown(t){this.isKeydown=!0,40===t.keyCode&&this.contentViewChild?this.trapFocus(t):27===t.keyCode||13===t.keyCode?this.overlayVisible&&(this.overlayVisible=!1,t.preventDefault()):9===t.keyCode&&this.contentViewChild&&(Y.getFocusableElements(this.contentViewChild.nativeElement).forEach(i=>i.tabIndex="-1"),this.overlayVisible&&(this.overlayVisible=!1))}onDateCellKeydown(t,i,r){const o=t.currentTarget,s=o.parentElement;switch(t.which){case 40:{o.tabIndex="-1";let a=Y.index(s),l=s.parentElement.nextElementSibling;l?Y.hasClass(l.children[a].children[0],"p-disabled")?(this.navigationState={backward:!1},this.navForward(t)):(l.children[a].children[0].tabIndex="0",l.children[a].children[0].focus()):(this.navigationState={backward:!1},this.navForward(t)),t.preventDefault();break}case 38:{o.tabIndex="-1";let a=Y.index(s),l=s.parentElement.previousElementSibling;if(l){let c=l.children[a].children[0];Y.hasClass(c,"p-disabled")?(this.navigationState={backward:!0},this.navBackward(t)):(c.tabIndex="0",c.focus())}else this.navigationState={backward:!0},this.navBackward(t);t.preventDefault();break}case 37:{o.tabIndex="-1";let a=s.previousElementSibling;if(a){let l=a.children[0];Y.hasClass(l,"p-disabled")||Y.hasClass(l.parentElement,"p-datepicker-weeknumber")?this.navigateToMonth(!0,r):(l.tabIndex="0",l.focus())}else this.navigateToMonth(!0,r);t.preventDefault();break}case 39:{o.tabIndex="-1";let a=s.nextElementSibling;if(a){let l=a.children[0];Y.hasClass(l,"p-disabled")?this.navigateToMonth(!1,r):(l.tabIndex="0",l.focus())}else this.navigateToMonth(!1,r);t.preventDefault();break}case 13:case 32:this.onDateSelect(t,i),t.preventDefault();break;case 27:this.overlayVisible=!1,t.preventDefault();break;case 9:this.inline||this.trapFocus(t)}}onMonthCellKeydown(t,i){const r=t.currentTarget;switch(t.which){case 38:case 40:{r.tabIndex="-1";var o=r.parentElement.children,s=Y.index(r);let a=o[40===t.which?s+3:s-3];a&&(a.tabIndex="0",a.focus()),t.preventDefault();break}case 37:{r.tabIndex="-1";let a=r.previousElementSibling;a?(a.tabIndex="0",a.focus()):(this.navigationState={backward:!0},this.navBackward(t)),t.preventDefault();break}case 39:{r.tabIndex="-1";let a=r.nextElementSibling;a?(a.tabIndex="0",a.focus()):(this.navigationState={backward:!1},this.navForward(t)),t.preventDefault();break}case 13:case 32:this.onMonthSelect(t,i),t.preventDefault();break;case 27:this.overlayVisible=!1,t.preventDefault();break;case 9:this.inline||this.trapFocus(t)}}onYearCellKeydown(t,i){const r=t.currentTarget;switch(t.which){case 38:case 40:{r.tabIndex="-1";var o=r.parentElement.children,s=Y.index(r);let a=o[40===t.which?s+2:s-2];a&&(a.tabIndex="0",a.focus()),t.preventDefault();break}case 37:{r.tabIndex="-1";let a=r.previousElementSibling;a?(a.tabIndex="0",a.focus()):(this.navigationState={backward:!0},this.navBackward(t)),t.preventDefault();break}case 39:{r.tabIndex="-1";let a=r.nextElementSibling;a?(a.tabIndex="0",a.focus()):(this.navigationState={backward:!1},this.navForward(t)),t.preventDefault();break}case 13:case 32:this.onYearSelect(t,i),t.preventDefault();break;case 27:this.overlayVisible=!1,t.preventDefault();break;case 9:this.trapFocus(t)}}navigateToMonth(t,i){if(t)if(1===this.numberOfMonths||0===i)this.navigationState={backward:!0},this.navBackward(event);else{let o=Y.find(this.contentViewChild.nativeElement.children[i-1],".p-datepicker-calendar td span:not(.p-disabled):not(.p-ink)"),s=o[o.length-1];s.tabIndex="0",s.focus()}else if(1===this.numberOfMonths||i===this.numberOfMonths-1)this.navigationState={backward:!1},this.navForward(event);else{let o=Y.findSingle(this.contentViewChild.nativeElement.children[i+1],".p-datepicker-calendar td span:not(.p-disabled):not(.p-ink)");o.tabIndex="0",o.focus()}}updateFocus(){let t;if(this.navigationState){if(this.navigationState.button)this.initFocusableCell(),this.navigationState.backward?Y.findSingle(this.contentViewChild.nativeElement,".p-datepicker-prev").focus():Y.findSingle(this.contentViewChild.nativeElement,".p-datepicker-next").focus();else{if(this.navigationState.backward){let i;i=Y.find(this.contentViewChild.nativeElement,"month"===this.currentView?".p-monthpicker .p-monthpicker-month:not(.p-disabled)":"year"===this.currentView?".p-yearpicker .p-yearpicker-year:not(.p-disabled)":".p-datepicker-calendar td span:not(.p-disabled):not(.p-ink)"),i&&i.length>0&&(t=i[i.length-1])}else t=Y.findSingle(this.contentViewChild.nativeElement,"month"===this.currentView?".p-monthpicker .p-monthpicker-month:not(.p-disabled)":"year"===this.currentView?".p-yearpicker .p-yearpicker-year:not(.p-disabled)":".p-datepicker-calendar td span:not(.p-disabled):not(.p-ink)");t&&(t.tabIndex="0",t.focus())}this.navigationState=null}else this.initFocusableCell()}initFocusableCell(){const t=this.contentViewChild?.nativeElement;let i;if("month"===this.currentView){let r=Y.find(t,".p-monthpicker .p-monthpicker-month:not(.p-disabled)"),o=Y.findSingle(t,".p-monthpicker .p-monthpicker-month.p-highlight");r.forEach(s=>s.tabIndex=-1),i=o||r[0],0===r.length&&Y.find(t,'.p-monthpicker .p-monthpicker-month.p-disabled[tabindex = "0"]').forEach(a=>a.tabIndex=-1)}else if("year"===this.currentView){let r=Y.find(t,".p-yearpicker .p-yearpicker-year:not(.p-disabled)"),o=Y.findSingle(t,".p-yearpicker .p-yearpicker-year.p-highlight");r.forEach(s=>s.tabIndex=-1),i=o||r[0],0===r.length&&Y.find(t,'.p-yearpicker .p-yearpicker-year.p-disabled[tabindex = "0"]').forEach(a=>a.tabIndex=-1)}else if(i=Y.findSingle(t,"span.p-highlight"),!i){let r=Y.findSingle(t,"td.p-datepicker-today span:not(.p-disabled):not(.p-ink)");i=r||Y.findSingle(t,".p-datepicker-calendar td span:not(.p-disabled):not(.p-ink)")}i&&(i.tabIndex="0",!this.preventFocus&&(!this.navigationState||!this.navigationState.button)&&setTimeout(()=>{this.disabled||i.focus()},1),this.preventFocus=!1)}trapFocus(t){let i=Y.getFocusableElements(this.contentViewChild.nativeElement);if(i&&i.length>0)if(i[0].ownerDocument.activeElement){let r=i.indexOf(i[0].ownerDocument.activeElement);if(t.shiftKey)if(-1==r||0===r)if(this.focusTrap)i[i.length-1].focus();else{if(-1===r)return this.hideOverlay();if(0===r)return}else i[r-1].focus();else if(-1==r||r===i.length-1){if(!this.focusTrap&&-1!=r)return this.hideOverlay();i[0].focus()}else i[r+1].focus()}else i[0].focus();t.preventDefault()}onMonthDropdownChange(t){this.currentMonth=parseInt(t),this.onMonthChange.emit({month:this.currentMonth+1,year:this.currentYear}),this.createMonths(this.currentMonth,this.currentYear)}onYearDropdownChange(t){this.currentYear=parseInt(t),this.onYearChange.emit({month:this.currentMonth+1,year:this.currentYear}),this.createMonths(this.currentMonth,this.currentYear)}convertTo24Hour=function(t,i){return"12"==this.hourFormat?12===t?i?12:0:i?t+12:t:t};validateTime(t,i,r,o){let s=this.value;const a=this.convertTo24Hour(t,o);this.isRangeSelection()&&(s=this.value[1]||this.value[0]),this.isMultipleSelection()&&(s=this.value[this.value.length-1]);const l=s?s.toDateString():null;return!(this.minDate&&l&&this.minDate.toDateString()===l&&(this.minDate.getHours()>a||this.minDate.getHours()===a&&(this.minDate.getMinutes()>i||this.minDate.getMinutes()===i&&this.minDate.getSeconds()>r))||this.maxDate&&l&&this.maxDate.toDateString()===l&&(this.maxDate.getHours()<a||this.maxDate.getHours()===a&&(this.maxDate.getMinutes()<i||this.maxDate.getMinutes()===i&&this.maxDate.getSeconds()<r)))}incrementHour(t){let r=this.currentHour+this.stepHour,o=this.pm;"24"==this.hourFormat?r=r>=24?r-24:r:"12"==this.hourFormat&&(this.currentHour<12&&r>11&&(o=!this.pm),r=r>=13?r-12:r),this.validateTime(r,this.currentMinute,this.currentSecond,o)&&(this.currentHour=r,this.pm=o),t.preventDefault()}onTimePickerElementMouseDown(t,i,r){this.disabled||(this.repeat(t,null,i,r),t.preventDefault())}onTimePickerElementMouseUp(t){this.disabled||(this.clearTimePickerTimer(),this.updateTime())}onTimePickerElementMouseLeave(){!this.disabled&&this.timePickerTimer&&(this.clearTimePickerTimer(),this.updateTime())}repeat(t,i,r,o){let s=i||500;switch(this.clearTimePickerTimer(),this.timePickerTimer=setTimeout(()=>{this.repeat(t,100,r,o),this.cd.markForCheck()},s),r){case 0:1===o?this.incrementHour(t):this.decrementHour(t);break;case 1:1===o?this.incrementMinute(t):this.decrementMinute(t);break;case 2:1===o?this.incrementSecond(t):this.decrementSecond(t)}this.updateInputfield()}clearTimePickerTimer(){this.timePickerTimer&&(clearTimeout(this.timePickerTimer),this.timePickerTimer=null)}decrementHour(t){let i=this.currentHour-this.stepHour,r=this.pm;"24"==this.hourFormat?i=i<0?24+i:i:"12"==this.hourFormat&&(12===this.currentHour&&(r=!this.pm),i=i<=0?12+i:i),this.validateTime(i,this.currentMinute,this.currentSecond,r)&&(this.currentHour=i,this.pm=r),t.preventDefault()}incrementMinute(t){let i=this.currentMinute+this.stepMinute;i=i>59?i-60:i,this.validateTime(this.currentHour,i,this.currentSecond,this.pm)&&(this.currentMinute=i),t.preventDefault()}decrementMinute(t){let i=this.currentMinute-this.stepMinute;i=i<0?60+i:i,this.validateTime(this.currentHour,i,this.currentSecond,this.pm)&&(this.currentMinute=i),t.preventDefault()}incrementSecond(t){let i=this.currentSecond+this.stepSecond;i=i>59?i-60:i,this.validateTime(this.currentHour,this.currentMinute,i,this.pm)&&(this.currentSecond=i),t.preventDefault()}decrementSecond(t){let i=this.currentSecond-this.stepSecond;i=i<0?60+i:i,this.validateTime(this.currentHour,this.currentMinute,i,this.pm)&&(this.currentSecond=i),t.preventDefault()}updateTime(){let t=this.value;this.isRangeSelection()&&(t=this.value[1]||this.value[0]),this.isMultipleSelection()&&(t=this.value[this.value.length-1]),t=t?new Date(t.getTime()):new Date,t.setHours("12"==this.hourFormat?12===this.currentHour?this.pm?12:0:this.pm?this.currentHour+12:this.currentHour:this.currentHour),t.setMinutes(this.currentMinute),t.setSeconds(this.currentSecond),this.isRangeSelection()&&(t=this.value[1]?[this.value[0],t]:[t,null]),this.isMultipleSelection()&&(t=[...this.value.slice(0,-1),t]),this.updateModel(t),this.onSelect.emit(t),this.updateInputfield()}toggleAMPM(t){const i=!this.pm;this.validateTime(this.currentHour,this.currentMinute,this.currentSecond,i)&&(this.pm=i,this.updateTime()),t.preventDefault()}onUserInput(t){if(!this.isKeydown)return;this.isKeydown=!1;let i=t.target.value;try{let r=this.parseValueFromString(i);this.isValidSelection(r)?(this.updateModel(r),this.updateUI()):this.keepInvalid&&this.updateModel(r)}catch{this.updateModel(this.keepInvalid?i:null)}this.filled=null!=i&&i.length,this.onInput.emit(t)}isValidSelection(t){let i=!0;return this.isSingleSelection()?this.isSelectable(t.getDate(),t.getMonth(),t.getFullYear(),!1)||(i=!1):t.every(r=>this.isSelectable(r.getDate(),r.getMonth(),r.getFullYear(),!1))&&this.isRangeSelection()&&(i=t.length>1&&t[1]>t[0]),i}parseValueFromString(t){if(!t||0===t.trim().length)return null;let i;if(this.isSingleSelection())i=this.parseDateTime(t);else if(this.isMultipleSelection()){let r=t.split(this.multipleSeparator);i=[];for(let o of r)i.push(this.parseDateTime(o.trim()))}else if(this.isRangeSelection()){let r=t.split(" "+this.rangeSeparator+" ");i=[];for(let o=0;o<r.length;o++)i[o]=this.parseDateTime(r[o].trim())}return i}parseDateTime(t){let i,r=t.split(" ");if(this.timeOnly)i=new Date,this.populateTime(i,r[0],r[1]);else{const o=this.getDateFormat();if(this.showTime){let s="12"==this.hourFormat?r.pop():null,a=r.pop();i=this.parseDate(r.join(" "),o),this.populateTime(i,a,s)}else i=this.parseDate(t,o)}return i}populateTime(t,i,r){if("12"==this.hourFormat&&!r)throw"Invalid Time";this.pm="PM"===r||"pm"===r;let o=this.parseTime(i);t.setHours(o.hour),t.setMinutes(o.minute),t.setSeconds(o.second)}isValidDate(t){return ht.isDate(t)&&ht.isNotEmpty(t)}updateUI(){let t=this.value;Array.isArray(t)&&(t=t[0]);let i=this.defaultDate&&this.isValidDate(this.defaultDate)&&!this.value?this.defaultDate:t&&this.isValidDate(t)?t:new Date;this.currentMonth=i.getMonth(),this.currentYear=i.getFullYear(),this.createMonths(this.currentMonth,this.currentYear),(this.showTime||this.timeOnly)&&(this.setCurrentHourPM(i.getHours()),this.currentMinute=i.getMinutes(),this.currentSecond=i.getSeconds())}showOverlay(){this.overlayVisible||(this.updateUI(),this.touchUI||(this.preventFocus=!0),this.overlayVisible=!0)}hideOverlay(){this.overlayVisible=!1,this.clearTimePickerTimer(),this.touchUI&&this.disableModality(),this.cd.markForCheck()}toggle(){this.inline||(this.overlayVisible?this.hideOverlay():(this.showOverlay(),this.inputfieldViewChild?.nativeElement.focus()))}onOverlayAnimationStart(t){switch(t.toState){case"visible":case"visibleTouchUI":this.inline||(this.overlay=t.element,this.overlay?.setAttribute(this.attributeSelector,""),this.appendOverlay(),this.updateFocus(),this.autoZIndex&&(this.touchUI?rl.set("modal",this.overlay,this.baseZIndex||this.config.zIndex.modal):rl.set("overlay",this.overlay,this.baseZIndex||this.config.zIndex.overlay)),this.alignOverlay(),this.onShow.emit(t));break;case"void":this.onOverlayHide(),this.onClose.emit(t)}}onOverlayAnimationDone(t){switch(t.toState){case"visible":case"visibleTouchUI":this.inline||(this.bindDocumentClickListener(),this.bindDocumentResizeListener(),this.bindScrollListener());break;case"void":this.autoZIndex&&rl.clear(t.element)}}appendOverlay(){this.appendTo&&("body"===this.appendTo?this.document.body.appendChild(this.overlay):Y.appendChild(this.overlay,this.appendTo))}restoreOverlayAppend(){this.overlay&&this.appendTo&&this.el.nativeElement.appendChild(this.overlay)}alignOverlay(){this.touchUI?this.enableModality(this.overlay):this.overlay&&(this.appendTo?("date"===this.view?(this.overlay.style.width=Y.getOuterWidth(this.overlay)+"px",this.overlay.style.minWidth=Y.getOuterWidth(this.inputfieldViewChild?.nativeElement)+"px"):this.overlay.style.width=Y.getOuterWidth(this.inputfieldViewChild?.nativeElement)+"px",Y.absolutePosition(this.overlay,this.inputfieldViewChild?.nativeElement)):Y.relativePosition(this.overlay,this.inputfieldViewChild?.nativeElement))}enableModality(t){!this.mask&&this.touchUI&&(this.mask=this.renderer.createElement("div"),this.renderer.setStyle(this.mask,"zIndex",String(parseInt(t.style.zIndex)-1)),Y.addMultipleClasses(this.mask,"p-component-overlay p-datepicker-mask p-datepicker-mask-scrollblocker p-component-overlay p-component-overlay-enter"),this.maskClickListener=this.renderer.listen(this.mask,"click",r=>{this.disableModality()}),this.renderer.appendChild(this.document.body,this.mask),Y.addClass(this.document.body,"p-overflow-hidden"),this.document.body.style.setProperty("--scrollbar-width",Y.calculateScrollbarWidth()+"px"))}disableModality(){this.mask&&(Y.addClass(this.mask,"p-component-overlay-leave"),this.animationEndListener||(this.animationEndListener=this.renderer.listen(this.mask,"animationend",this.destroyMask.bind(this))))}destroyMask(){if(!this.mask)return;this.renderer.removeChild(this.document.body,this.mask);let i,t=this.document.body.children;for(let r=0;r<t.length;r++)if(Y.hasClass(t[r],"p-datepicker-mask-scrollblocker")){i=!0;break}i||(Y.removeClass(this.document.body,"p-overflow-hidden"),this.document.body.style.removeProperty("--scrollbar-width")),this.unbindAnimationEndListener(),this.unbindMaskClickListener(),this.mask=null}unbindMaskClickListener(){this.maskClickListener&&(this.maskClickListener(),this.maskClickListener=null)}unbindAnimationEndListener(){this.animationEndListener&&this.mask&&(this.animationEndListener(),this.animationEndListener=null)}writeValue(t){if(this.value=t,this.value&&"string"==typeof this.value)try{this.value=this.parseValueFromString(this.value)}catch{this.keepInvalid&&(this.value=t)}this.updateInputfield(),this.updateUI(),this.cd.markForCheck()}registerOnChange(t){this.onModelChange=t}registerOnTouched(t){this.onModelTouched=t}setDisabledState(t){this.disabled=t,this.cd.markForCheck()}getDateFormat(){return this.dateFormat||this.getTranslation("dateFormat")}getFirstDateOfWeek(){return this._firstDayOfWeek||this.getTranslation(ws.FIRST_DAY_OF_WEEK)}formatDate(t,i){if(!t)return"";let r;const o=u=>{const d=r+1<i.length&&i.charAt(r+1)===u;return d&&r++,d},s=(u,d,f)=>{let h=""+d;if(o(u))for(;h.length<f;)h="0"+h;return h},a=(u,d,f,h)=>o(u)?h[d]:f[d];let l="",c=!1;if(t)for(r=0;r<i.length;r++)if(c)"'"!==i.charAt(r)||o("'")?l+=i.charAt(r):c=!1;else switch(i.charAt(r)){case"d":l+=s("d",t.getDate(),2);break;case"D":l+=a("D",t.getDay(),this.getTranslation(ws.DAY_NAMES_SHORT),this.getTranslation(ws.DAY_NAMES));break;case"o":l+=s("o",Math.round((new Date(t.getFullYear(),t.getMonth(),t.getDate()).getTime()-new Date(t.getFullYear(),0,0).getTime())/864e5),3);break;case"m":l+=s("m",t.getMonth()+1,2);break;case"M":l+=a("M",t.getMonth(),this.getTranslation(ws.MONTH_NAMES_SHORT),this.getTranslation(ws.MONTH_NAMES));break;case"y":l+=o("y")?t.getFullYear():(t.getFullYear()%100<10?"0":"")+t.getFullYear()%100;break;case"@":l+=t.getTime();break;case"!":l+=1e4*t.getTime()+this.ticksTo1970;break;case"'":o("'")?l+="'":c=!0;break;default:l+=i.charAt(r)}return l}formatTime(t){if(!t)return"";let i="",r=t.getHours(),o=t.getMinutes(),s=t.getSeconds();return"12"==this.hourFormat&&r>11&&12!=r&&(r-=12),i+="12"==this.hourFormat&&0===r?12:r<10?"0"+r:r,i+=":",i+=o<10?"0"+o:o,this.showSeconds&&(i+=":",i+=s<10?"0"+s:s),"12"==this.hourFormat&&(i+=t.getHours()>11?" PM":" AM"),i}parseTime(t){let i=t.split(":");if(i.length!==(this.showSeconds?3:2))throw"Invalid time";let o=parseInt(i[0]),s=parseInt(i[1]),a=this.showSeconds?parseInt(i[2]):null;if(isNaN(o)||isNaN(s)||o>23||s>59||"12"==this.hourFormat&&o>12||this.showSeconds&&(isNaN(a)||a>59))throw"Invalid time";return"12"==this.hourFormat&&(12!==o&&this.pm?o+=12:!this.pm&&12===o&&(o-=12)),{hour:o,minute:s,second:a}}parseDate(t,i){if(null==i||null==t)throw"Invalid arguments";if(""===(t="object"==typeof t?t.toString():t+""))return null;let r,o,s,p,a=0,l="string"!=typeof this.shortYearCutoff?this.shortYearCutoff:(new Date).getFullYear()%100+parseInt(this.shortYearCutoff,10),c=-1,u=-1,d=-1,f=-1,h=!1,g=v=>{let b=r+1<i.length&&i.charAt(r+1)===v;return b&&r++,b},m=v=>{let b=g(v),w="@"===v?14:"!"===v?20:"y"===v&&b?4:"o"===v?3:2,C=new RegExp("^\\d{"+("y"===v?w:1)+","+w+"}"),S=t.substring(a).match(C);if(!S)throw"Missing number at position "+a;return a+=S[0].length,parseInt(S[0],10)},_=(v,b,w)=>{let x=-1,C=g(v)?w:b,S=[];for(let A=0;A<C.length;A++)S.push([A,C[A]]);S.sort((A,M)=>-(A[1].length-M[1].length));for(let A=0;A<S.length;A++){let M=S[A][1];if(t.substr(a,M.length).toLowerCase()===M.toLowerCase()){x=S[A][0],a+=M.length;break}}if(-1!==x)return x+1;throw"Unknown name at position "+a},y=()=>{if(t.charAt(a)!==i.charAt(r))throw"Unexpected literal at position "+a;a++};for("month"===this.view&&(d=1),r=0;r<i.length;r++)if(h)"'"!==i.charAt(r)||g("'")?y():h=!1;else switch(i.charAt(r)){case"d":d=m("d");break;case"D":_("D",this.getTranslation(ws.DAY_NAMES_SHORT),this.getTranslation(ws.DAY_NAMES));break;case"o":f=m("o");break;case"m":u=m("m");break;case"M":u=_("M",this.getTranslation(ws.MONTH_NAMES_SHORT),this.getTranslation(ws.MONTH_NAMES));break;case"y":c=m("y");break;case"@":p=new Date(m("@")),c=p.getFullYear(),u=p.getMonth()+1,d=p.getDate();break;case"!":p=new Date((m("!")-this.ticksTo1970)/1e4),c=p.getFullYear(),u=p.getMonth()+1,d=p.getDate();break;case"'":g("'")?y():h=!0;break;default:y()}if(a<t.length&&(s=t.substr(a),!/^\s+/.test(s)))throw"Extra/unparsed characters found in date: "+s;if(-1===c?c=(new Date).getFullYear():c<100&&(c+=(new Date).getFullYear()-(new Date).getFullYear()%100+(c<=l?0:-100)),f>-1)for(u=1,d=f;o=this.getDaysCountInMonth(c,u-1),!(d<=o);)u++,d-=o;if("year"===this.view&&(u=-1===u?1:u,d=-1===d?1:d),p=this.daylightSavingAdjust(new Date(c,u-1,d)),p.getFullYear()!==c||p.getMonth()+1!==u||p.getDate()!==d)throw"Invalid date";return p}daylightSavingAdjust(t){return t?(t.setHours(t.getHours()>12?t.getHours()+2:0),t):null}updateFilledState(){this.filled=this.inputFieldValue&&""!=this.inputFieldValue}onTodayButtonClick(t){let i=new Date,r={day:i.getDate(),month:i.getMonth(),year:i.getFullYear(),otherMonth:i.getMonth()!==this.currentMonth||i.getFullYear()!==this.currentYear,today:!0,selectable:!0};this.onDateSelect(t,r),this.onTodayClick.emit(t)}onClearButtonClick(t){this.updateModel(null),this.updateInputfield(),this.hideOverlay(),this.onClearClick.emit(t)}createResponsiveStyle(){if(this.numberOfMonths>1&&this.responsiveOptions){this.responsiveStyleElement||(this.responsiveStyleElement=this.renderer.createElement("style"),this.responsiveStyleElement.type="text/css",this.renderer.appendChild(this.document.body,this.responsiveStyleElement));let t="";if(this.responsiveOptions){let i=[...this.responsiveOptions].filter(r=>!(!r.breakpoint||!r.numMonths)).sort((r,o)=>-1*r.breakpoint.localeCompare(o.breakpoint,void 0,{numeric:!0}));for(let r=0;r<i.length;r++){let{breakpoint:o,numMonths:s}=i[r],a=`\n                        .p-datepicker[${this.attributeSelector}] .p-datepicker-group:nth-child(${s}) .p-datepicker-next {\n                            display: inline-flex !important;\n                        }\n                    `;for(let l=s;l<this.numberOfMonths;l++)a+=`\n                            .p-datepicker[${this.attributeSelector}] .p-datepicker-group:nth-child(${l+1}) {\n                                display: none !important;\n                            }\n                        `;t+=`\n                        @media screen and (max-width: ${o}) {\n                            ${a}\n                        }\n                    `}}this.responsiveStyleElement.innerHTML=t}}destroyResponsiveStyleElement(){this.responsiveStyleElement&&(this.responsiveStyleElement.remove(),this.responsiveStyleElement=null)}bindDocumentClickListener(){this.documentClickListener||this.zone.runOutsideAngular(()=>{this.documentClickListener=this.renderer.listen(this.el?this.el.nativeElement.ownerDocument:this.document,"mousedown",i=>{this.isOutsideClicked(i)&&this.overlayVisible&&this.zone.run(()=>{this.hideOverlay(),this.onClickOutside.emit(i),this.cd.markForCheck()})})})}unbindDocumentClickListener(){this.documentClickListener&&(this.documentClickListener(),this.documentClickListener=null)}bindDocumentResizeListener(){!this.documentResizeListener&&!this.touchUI&&(this.documentResizeListener=this.renderer.listen(this.window,"resize",this.onWindowResize.bind(this)))}unbindDocumentResizeListener(){this.documentResizeListener&&(this.documentResizeListener(),this.documentResizeListener=null)}bindScrollListener(){this.scrollHandler||(this.scrollHandler=new Kk(this.containerViewChild?.nativeElement,()=>{this.overlayVisible&&this.hideOverlay()})),this.scrollHandler.bindScrollListener()}unbindScrollListener(){this.scrollHandler&&this.scrollHandler.unbindScrollListener()}isOutsideClicked(t){return!(this.el.nativeElement.isSameNode(t.target)||this.isNavIconClicked(t)||this.el.nativeElement.contains(t.target)||this.overlay&&this.overlay.contains(t.target))}isNavIconClicked(t){return Y.hasClass(t.target,"p-datepicker-prev")||Y.hasClass(t.target,"p-datepicker-prev-icon")||Y.hasClass(t.target,"p-datepicker-next")||Y.hasClass(t.target,"p-datepicker-next-icon")}onWindowResize(){this.overlayVisible&&!Y.isTouchDevice()&&this.hideOverlay()}onOverlayHide(){this.currentView=this.view,this.mask&&this.destroyMask(),this.unbindDocumentClickListener(),this.unbindDocumentResizeListener(),this.unbindScrollListener(),this.overlay=null}ngOnDestroy(){this.scrollHandler&&(this.scrollHandler.destroy(),this.scrollHandler=null),this.translationSubscription&&this.translationSubscription.unsubscribe(),this.overlay&&this.autoZIndex&&rl.clear(this.overlay),this.destroyResponsiveStyleElement(),this.clearTimePickerTimer(),this.restoreOverlayAppend(),this.onOverlayHide()}static \u0275fac=function(i){return new(i||e)(G(qn),G(pn),G(Ki),G(Ro),G(At),G(Y_),G(TW))};static \u0275cmp=it({type:e,selectors:[["p-calendar"]],contentQueries:function(i,r,o){if(1&i&&Er(o,Bo,4),2&i){let s;Ct(s=xt())&&(r.templates=s)}},viewQuery:function(i,r){if(1&i&&(Fn(Trt,5),Fn(Drt,5),Fn(Irt,5)),2&i){let o;Ct(o=xt())&&(r.containerViewChild=o.first),Ct(o=xt())&&(r.inputfieldViewChild=o.first),Ct(o=xt())&&(r.content=o.first)}},hostAttrs:[1,"p-element","p-inputwrapper"],hostVars:6,hostBindings:function(i,r){2&i&&fu("p-inputwrapper-filled",r.filled)("p-inputwrapper-focus",r.focus)("p-calendar-clearable",r.showClear&&!r.disabled)},inputs:{style:"style",styleClass:"styleClass",inputStyle:"inputStyle",inputId:"inputId",name:"name",inputStyleClass:"inputStyleClass",placeholder:"placeholder",ariaLabelledBy:"ariaLabelledBy",iconAriaLabel:"iconAriaLabel",disabled:"disabled",dateFormat:"dateFormat",multipleSeparator:"multipleSeparator",rangeSeparator:"rangeSeparator",inline:"inline",showOtherMonths:"showOtherMonths",selectOtherMonths:"selectOtherMonths",showIcon:"showIcon",icon:"icon",appendTo:"appendTo",readonlyInput:"readonlyInput",shortYearCutoff:"shortYearCutoff",monthNavigator:"monthNavigator",yearNavigator:"yearNavigator",hourFormat:"hourFormat",timeOnly:"timeOnly",stepHour:"stepHour",stepMinute:"stepMinute",stepSecond:"stepSecond",showSeconds:"showSeconds",required:"required",showOnFocus:"showOnFocus",showWeek:"showWeek",showClear:"showClear",dataType:"dataType",selectionMode:"selectionMode",maxDateCount:"maxDateCount",showButtonBar:"showButtonBar",todayButtonStyleClass:"todayButtonStyleClass",clearButtonStyleClass:"clearButtonStyleClass",autoZIndex:"autoZIndex",baseZIndex:"baseZIndex",panelStyleClass:"panelStyleClass",panelStyle:"panelStyle",keepInvalid:"keepInvalid",hideOnDateTimeSelect:"hideOnDateTimeSelect",touchUI:"touchUI",timeSeparator:"timeSeparator",focusTrap:"focusTrap",showTransitionOptions:"showTransitionOptions",hideTransitionOptions:"hideTransitionOptions",tabindex:"tabindex",minDate:"minDate",maxDate:"maxDate",disabledDates:"disabledDates",disabledDays:"disabledDays",yearRange:"yearRange",showTime:"showTime",responsiveOptions:"responsiveOptions",numberOfMonths:"numberOfMonths",firstDayOfWeek:"firstDayOfWeek",locale:"locale",view:"view",defaultDate:"defaultDate"},outputs:{onFocus:"onFocus",onBlur:"onBlur",onClose:"onClose",onSelect:"onSelect",onClear:"onClear",onInput:"onInput",onTodayClick:"onTodayClick",onClearClick:"onClearClick",onMonthChange:"onMonthChange",onYearChange:"onYearChange",onClickOutside:"onClickOutside",onShow:"onShow"},features:[Gt([ast])],ngContentSelectors:sst,decls:4,vars:11,consts:[[3,"ngClass","ngStyle"],["container",""],[3,"ngIf"],[3,"class","ngStyle","ngClass","click",4,"ngIf"],["type","text","autocomplete","off",3,"value","readonly","ngStyle","placeholder","disabled","ngClass","focus","keydown","click","blur","input"],["inputfield",""],[4,"ngIf"],["type","button","pButton","","pRipple","","class","p-datepicker-trigger p-button-icon-only","tabindex","0",3,"disabled","click",4,"ngIf"],[3,"styleClass","click",4,"ngIf"],["class","p-calendar-clear-icon",3,"click",4,"ngIf"],[3,"styleClass","click"],[1,"p-calendar-clear-icon",3,"click"],[4,"ngTemplateOutlet"],["type","button","pButton","","pRipple","","tabindex","0",1,"p-datepicker-trigger","p-button-icon-only",3,"disabled","click"],[3,"ngClass",4,"ngIf"],[3,"ngClass"],[3,"ngStyle","ngClass","click"],["contentWrapper",""],["class","p-timepicker",4,"ngIf"],["class","p-datepicker-buttonbar",4,"ngIf"],[1,"p-datepicker-group-container"],["class","p-datepicker-group",4,"ngFor","ngForOf"],["class","p-monthpicker",4,"ngIf"],["class","p-yearpicker",4,"ngIf"],[1,"p-datepicker-group"],[1,"p-datepicker-header"],["class","p-datepicker-prev p-link","type","button","pRipple","",3,"keydown","click",4,"ngIf"],[1,"p-datepicker-title"],["type","button","class","p-datepicker-month p-link",3,"disabled","click","keydown",4,"ngIf"],["type","button","class","p-datepicker-year p-link",3,"disabled","click","keydown",4,"ngIf"],["class","p-datepicker-decade",4,"ngIf"],["type","button","pRipple","",1,"p-datepicker-next","p-link",3,"keydown","click"],[3,"styleClass",4,"ngIf"],["class","p-datepicker-next-icon",4,"ngIf"],["class","p-datepicker-calendar-container",4,"ngIf"],["type","button","pRipple","",1,"p-datepicker-prev","p-link",3,"keydown","click"],["class","p-datepicker-prev-icon",4,"ngIf"],[3,"styleClass"],[1,"p-datepicker-prev-icon"],["type","button",1,"p-datepicker-month","p-link",3,"disabled","click","keydown"],["type","button",1,"p-datepicker-year","p-link",3,"disabled","click","keydown"],[1,"p-datepicker-decade"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"p-datepicker-next-icon"],[1,"p-datepicker-calendar-container"],[1,"p-datepicker-calendar"],["class","p-datepicker-weekheader p-disabled",4,"ngIf"],["scope","col",4,"ngFor","ngForOf"],[4,"ngFor","ngForOf"],[1,"p-datepicker-weekheader","p-disabled"],["scope","col"],["class","p-datepicker-weeknumber",4,"ngIf"],[3,"ngClass",4,"ngFor","ngForOf"],[1,"p-datepicker-weeknumber"],[1,"p-disabled"],["draggable","false","pRipple","",3,"ngClass","click","keydown"],[1,"p-monthpicker"],["class","p-monthpicker-month","pRipple","",3,"ngClass","click","keydown",4,"ngFor","ngForOf"],["pRipple","",1,"p-monthpicker-month",3,"ngClass","click","keydown"],[1,"p-yearpicker"],["class","p-yearpicker-year","pRipple","",3,"ngClass","click","keydown",4,"ngFor","ngForOf"],["pRipple","",1,"p-yearpicker-year",3,"ngClass","click","keydown"],[1,"p-timepicker"],[1,"p-hour-picker"],["type","button","pRipple","",1,"p-link",3,"keydown","keydown.enter","keydown.space","mousedown","mouseup","keyup.enter","keyup.space","mouseleave"],[1,"p-separator"],[1,"p-minute-picker"],["class","p-separator",4,"ngIf"],["class","p-second-picker",4,"ngIf"],["class","p-ampm-picker",4,"ngIf"],[1,"p-second-picker"],[1,"p-ampm-picker"],["type","button","pRipple","",1,"p-link",3,"keydown","click","keydown.enter"],[1,"p-datepicker-buttonbar"],["type","button","pButton","","pRipple","",3,"label","ngClass","keydown","click"]],template:function(i,r){1&i&&(Xa(rst),q(0,"span",0,1),B(2,Vrt,4,17,"ng-template",2),B(3,ist,9,28,"div",3),W()),2&i&&(Xe(r.styleClass),k("ngClass",SM(6,ost,r.showIcon,r.timeOnly,r.disabled,r.focus))("ngStyle",r.style),$(2),k("ngIf",!r.inline),$(1),k("ngIf",r.inline||r.overlayVisible))},dependencies:function(){return[_s,eg,No,Po,ys,$ue,yg,IC,MC,Bue,qT,ol,Vue]},styles:["@layer primeng{.p-calendar{position:relative;display:inline-flex;max-width:100%}.p-calendar .p-inputtext{flex:1 1 auto;width:1%}.p-calendar-w-btn .p-inputtext{border-top-right-radius:0;border-bottom-right-radius:0}.p-calendar-w-btn .p-datepicker-trigger{border-top-left-radius:0;border-bottom-left-radius:0}.p-fluid .p-calendar{display:flex}.p-fluid .p-calendar .p-inputtext{width:1%}.p-calendar .p-datepicker{min-width:100%}.p-datepicker{width:auto;position:absolute;top:0;left:0}.p-datepicker-inline{display:inline-block;position:static;overflow-x:auto}.p-datepicker-header{display:flex;align-items:center;justify-content:space-between}.p-datepicker-header .p-datepicker-title{margin:0 auto}.p-datepicker-prev,.p-datepicker-next{cursor:pointer;display:inline-flex;justify-content:center;align-items:center;overflow:hidden;position:relative}.p-datepicker-multiple-month .p-datepicker-group-container .p-datepicker-group{flex:1 1 auto}.p-datepicker-multiple-month .p-datepicker-group-container{display:flex}.p-datepicker table{width:100%;border-collapse:collapse}.p-datepicker td>span{display:flex;justify-content:center;align-items:center;cursor:pointer;margin:0 auto;overflow:hidden;position:relative}.p-monthpicker-month{width:33.3%;display:inline-flex;align-items:center;justify-content:center;cursor:pointer;overflow:hidden;position:relative}.p-datepicker-buttonbar{display:flex;justify-content:space-between;align-items:center}.p-timepicker{display:flex;justify-content:center;align-items:center}.p-timepicker button{display:flex;align-items:center;justify-content:center;cursor:pointer;overflow:hidden;position:relative}.p-timepicker>div{display:flex;align-items:center;flex-direction:column}.p-datepicker-touch-ui,.p-calendar .p-datepicker-touch-ui{position:fixed;top:50%;left:50%;min-width:80vw;transform:translate(-50%,-50%)}.p-yearpicker-year{width:50%;display:inline-flex;align-items:center;justify-content:center;cursor:pointer;overflow:hidden;position:relative}.p-calendar-clear-icon{position:absolute;top:50%;margin-top:-.5rem;cursor:pointer}.p-calendar-clearable{position:relative}}\n"],encapsulation:2,data:{animation:[Rw("overlayAnimation",[tg("visibleTouchUI",Dr({transform:"translate(-50%,-50%)",opacity:1})),na("void => visible",[Dr({opacity:0,transform:"scaleY(0.8)"}),ta("{{showTransitionParams}}",Dr({opacity:1,transform:"*"}))]),na("visible => void",[ta("{{hideTransitionParams}}",Dr({opacity:0}))]),na("void => visibleTouchUI",[Dr({opacity:0,transform:"translate3d(-50%, -40%, 0) scale(0.9)"}),ta("{{showTransitionParams}}")]),na("visibleTouchUI => void",[ta("{{hideTransitionParams}}",Dr({opacity:0,transform:"translate3d(-50%, -40%, 0) scale(0.9)"}))])])]},changeDetection:0})}return e})(),cst=(()=>{class e{static \u0275fac=function(i){return new(i||e)};static \u0275mod=Ut({type:e});static \u0275inj=Nt({imports:[ti,Bv,kn,Su,IC,MC,Bue,qT,ol,Vue,Bv,kn]})}return e})(),ust=(()=>{class e{el;ngModel;cd;filled;constructor(t,i,r){this.el=t,this.ngModel=i,this.cd=r}ngAfterViewInit(){this.updateFilledState(),this.cd.detectChanges()}ngDoCheck(){this.updateFilledState()}onInput(){this.updateFilledState()}updateFilledState(){this.filled=this.el.nativeElement.value&&this.el.nativeElement.value.length||this.ngModel&&this.ngModel.model}static \u0275fac=function(i){return new(i||e)(G(pn),G(rg,8),G(Ro))};static \u0275dir=je({type:e,selectors:[["","pInputText",""]],hostAttrs:[1,"p-inputtext","p-component","p-element"],hostVars:2,hostBindings:function(i,r){1&i&&we("input",function(s){return r.onInput(s)}),2&i&&fu("p-filled",r.filled)}})}return e})(),Hue=(()=>{class e{static \u0275fac=function(i){return new(i||e)};static \u0275mod=Ut({type:e});static \u0275inj=Nt({imports:[ti]})}return e})(),jue=(()=>{class e extends En{static \u0275fac=function(){let t;return function(r){return(t||(t=dt(e)))(r||e)}}();static \u0275cmp=it({type:e,selectors:[["AngleUpIcon"]],standalone:!0,features:[qe,cn],decls:2,vars:5,consts:[["width","14","height","14","viewBox","0 0 14 14","fill","none","xmlns","http://www.w3.org/2000/svg"],["d","M10.4134 9.49931C10.3148 9.49977 10.2172 9.48055 10.1262 9.44278C10.0352 9.405 9.95263 9.34942 9.88338 9.27931L6.88338 6.27931L3.88338 9.27931C3.73811 9.34946 3.57409 9.3709 3.41567 9.34044C3.25724 9.30999 3.11286 9.22926 3.00395 9.11025C2.89504 8.99124 2.82741 8.84028 2.8111 8.67978C2.79478 8.51928 2.83065 8.35781 2.91338 8.21931L6.41338 4.71931C6.55401 4.57886 6.74463 4.49997 6.94338 4.49997C7.14213 4.49997 7.33276 4.57886 7.47338 4.71931L10.9734 8.21931C11.1138 8.35994 11.1927 8.55056 11.1927 8.74931C11.1927 8.94806 11.1138 9.13868 10.9734 9.27931C10.9007 9.35315 10.8132 9.41089 10.7168 9.44879C10.6203 9.48669 10.5169 9.5039 10.4134 9.49931Z","fill","currentColor"]],template:function(i,r){1&i&&(yn(),q(0,"svg",0),_e(1,"path",1),W()),2&i&&(Xe(r.getClassNames()),ve("aria-label",r.ariaLabel)("aria-hidden",r.ariaHidden)("role",r.role))},encapsulation:2})}return e})(),que=(()=>{class e extends En{static \u0275fac=function(){let t;return function(r){return(t||(t=dt(e)))(r||e)}}();static \u0275cmp=it({type:e,selectors:[["AngleDownIcon"]],standalone:!0,features:[qe,cn],decls:2,vars:5,consts:[["width","14","height","14","viewBox","0 0 14 14","fill","none","xmlns","http://www.w3.org/2000/svg"],["d","M3.58659 4.5007C3.68513 4.50023 3.78277 4.51945 3.87379 4.55723C3.9648 4.59501 4.04735 4.65058 4.11659 4.7207L7.11659 7.7207L10.1166 4.7207C10.2619 4.65055 10.4259 4.62911 10.5843 4.65956C10.7427 4.69002 10.8871 4.77074 10.996 4.88976C11.1049 5.00877 11.1726 5.15973 11.1889 5.32022C11.2052 5.48072 11.1693 5.6422 11.0866 5.7807L7.58659 9.2807C7.44597 9.42115 7.25534 9.50004 7.05659 9.50004C6.85784 9.50004 6.66722 9.42115 6.52659 9.2807L3.02659 5.7807C2.88614 5.64007 2.80725 5.44945 2.80725 5.2507C2.80725 5.05195 2.88614 4.86132 3.02659 4.7207C3.09932 4.64685 3.18675 4.58911 3.28322 4.55121C3.37969 4.51331 3.48305 4.4961 3.58659 4.5007Z","fill","currentColor"]],template:function(i,r){1&i&&(yn(),q(0,"svg",0),_e(1,"path",1),W()),2&i&&(Xe(r.getClassNames()),ve("aria-label",r.ariaLabel)("aria-hidden",r.ariaHidden)("role",r.role))},encapsulation:2})}return e})();const dst=["input"];function fst(e,n){if(1&e){const t=ft();q(0,"TimesIcon",8),we("click",function(){return J(t),ee(L(2).clear())}),W()}2&e&&k("ngClass","p-inputnumber-clear-icon")}function hst(e,n){}function pst(e,n){1&e&&B(0,hst,0,0,"ng-template")}function gst(e,n){if(1&e){const t=ft();q(0,"span",9),we("click",function(){return J(t),ee(L(2).clear())}),B(1,pst,1,0,null,10),W()}if(2&e){const t=L(2);$(1),k("ngTemplateOutlet",t.clearIconTemplate)}}function mst(e,n){if(1&e&&(Ke(0),B(1,fst,1,1,"TimesIcon",6),B(2,gst,2,1,"span",7),Ye()),2&e){const t=L();$(1),k("ngIf",!t.clearIconTemplate),$(1),k("ngIf",t.clearIconTemplate)}}function _st(e,n){1&e&&_e(0,"span",14),2&e&&k("ngClass",L(2).incrementButtonIcon)}function yst(e,n){1&e&&_e(0,"AngleUpIcon")}function vst(e,n){}function bst(e,n){1&e&&B(0,vst,0,0,"ng-template")}function wst(e,n){if(1&e&&(Ke(0),B(1,yst,1,0,"AngleUpIcon",3),B(2,bst,1,0,null,10),Ye()),2&e){const t=L(2);$(1),k("ngIf",!t.incrementButtonIconTemplate),$(1),k("ngTemplateOutlet",t.incrementButtonIconTemplate)}}function Cst(e,n){1&e&&_e(0,"span",14),2&e&&k("ngClass",L(2).decrementButtonIcon)}function xst(e,n){1&e&&_e(0,"AngleDownIcon")}function Est(e,n){}function Sst(e,n){1&e&&B(0,Est,0,0,"ng-template")}function Tst(e,n){if(1&e&&(Ke(0),B(1,xst,1,0,"AngleDownIcon",3),B(2,Sst,1,0,null,10),Ye()),2&e){const t=L(2);$(1),k("ngIf",!t.decrementButtonIconTemplate),$(1),k("ngTemplateOutlet",t.decrementButtonIconTemplate)}}const Wue=function(){return{"p-inputnumber-button p-inputnumber-button-up":!0}},Gue=function(){return{"p-inputnumber-button p-inputnumber-button-down":!0}};function Dst(e,n){if(1&e){const t=ft();q(0,"span",11)(1,"button",12),we("mousedown",function(r){return J(t),ee(L().onUpButtonMouseDown(r))})("mouseup",function(){return J(t),ee(L().onUpButtonMouseUp())})("mouseleave",function(){return J(t),ee(L().onUpButtonMouseLeave())})("keydown",function(r){return J(t),ee(L().onUpButtonKeyDown(r))})("keyup",function(){return J(t),ee(L().onUpButtonKeyUp())}),B(2,_st,1,1,"span",13),B(3,wst,3,2,"ng-container",3),W(),q(4,"button",12),we("mousedown",function(r){return J(t),ee(L().onDownButtonMouseDown(r))})("mouseup",function(){return J(t),ee(L().onDownButtonMouseUp())})("mouseleave",function(){return J(t),ee(L().onDownButtonMouseLeave())})("keydown",function(r){return J(t),ee(L().onDownButtonKeyDown(r))})("keyup",function(){return J(t),ee(L().onDownButtonKeyUp())}),B(5,Cst,1,1,"span",13),B(6,Tst,3,2,"ng-container",3),W()()}if(2&e){const t=L();$(1),Xe(t.incrementButtonClass),k("ngClass",ff(12,Wue))("disabled",t.disabled),$(1),k("ngIf",t.incrementButtonIcon),$(1),k("ngIf",!t.incrementButtonIcon),$(1),Xe(t.decrementButtonClass),k("ngClass",ff(13,Gue))("disabled",t.disabled),$(1),k("ngIf",t.decrementButtonIcon),$(1),k("ngIf",!t.decrementButtonIcon)}}function Ist(e,n){1&e&&_e(0,"span",14),2&e&&k("ngClass",L(2).incrementButtonIcon)}function Mst(e,n){1&e&&_e(0,"AngleUpIcon")}function Ast(e,n){}function kst(e,n){1&e&&B(0,Ast,0,0,"ng-template")}function Ost(e,n){if(1&e&&(Ke(0),B(1,Mst,1,0,"AngleUpIcon",3),B(2,kst,1,0,null,10),Ye()),2&e){const t=L(2);$(1),k("ngIf",!t.incrementButtonIconTemplate),$(1),k("ngTemplateOutlet",t.incrementButtonIconTemplate)}}function Rst(e,n){if(1&e){const t=ft();q(0,"button",12),we("mousedown",function(r){return J(t),ee(L().onUpButtonMouseDown(r))})("mouseup",function(){return J(t),ee(L().onUpButtonMouseUp())})("mouseleave",function(){return J(t),ee(L().onUpButtonMouseLeave())})("keydown",function(r){return J(t),ee(L().onUpButtonKeyDown(r))})("keyup",function(){return J(t),ee(L().onUpButtonKeyUp())}),B(1,Ist,1,1,"span",13),B(2,Ost,3,2,"ng-container",3),W()}if(2&e){const t=L();Xe(t.incrementButtonClass),k("ngClass",ff(6,Wue))("disabled",t.disabled),$(1),k("ngIf",t.incrementButtonIcon),$(1),k("ngIf",!t.incrementButtonIcon)}}function Fst(e,n){1&e&&_e(0,"span",14),2&e&&k("ngClass",L(2).decrementButtonIcon)}function Nst(e,n){1&e&&_e(0,"AngleDownIcon")}function Pst(e,n){}function Lst(e,n){1&e&&B(0,Pst,0,0,"ng-template")}function $st(e,n){if(1&e&&(Ke(0),B(1,Nst,1,0,"AngleDownIcon",3),B(2,Lst,1,0,null,10),Ye()),2&e){const t=L(2);$(1),k("ngIf",!t.decrementButtonIconTemplate),$(1),k("ngTemplateOutlet",t.decrementButtonIconTemplate)}}function Bst(e,n){if(1&e){const t=ft();q(0,"button",12),we("mousedown",function(r){return J(t),ee(L().onDownButtonMouseDown(r))})("mouseup",function(){return J(t),ee(L().onDownButtonMouseUp())})("mouseleave",function(){return J(t),ee(L().onDownButtonMouseLeave())})("keydown",function(r){return J(t),ee(L().onDownButtonKeyDown(r))})("keyup",function(){return J(t),ee(L().onDownButtonKeyUp())}),B(1,Fst,1,1,"span",13),B(2,$st,3,2,"ng-container",3),W()}if(2&e){const t=L();Xe(t.decrementButtonClass),k("ngClass",ff(6,Gue))("disabled",t.disabled),$(1),k("ngIf",t.decrementButtonIcon),$(1),k("ngIf",!t.decrementButtonIcon)}}const Vst=function(e,n,t){return{"p-inputnumber p-component":!0,"p-inputnumber-buttons-stacked":e,"p-inputnumber-buttons-horizontal":n,"p-inputnumber-buttons-vertical":t}},zst={provide:Qi,useExisting:Rt(()=>Ust),multi:!0};let Ust=(()=>{class e{document;el;cd;injector;showButtons=!1;format=!0;buttonLayout="stacked";inputId;styleClass;style;placeholder;size;maxlength;tabindex;title;ariaLabel;ariaRequired;name;required;autocomplete;min;max;incrementButtonClass;decrementButtonClass;incrementButtonIcon;decrementButtonIcon;readonly=!1;step=1;allowEmpty=!0;locale;localeMatcher;mode="decimal";currency;currencyDisplay;useGrouping=!0;minFractionDigits;maxFractionDigits;prefix;suffix;inputStyle;inputStyleClass;showClear=!1;get disabled(){return this._disabled}set disabled(t){t&&(this.focused=!1),this._disabled=t,this.timer&&this.clearTimer()}onInput=new De;onFocus=new De;onBlur=new De;onKeyDown=new De;onClear=new De;input;templates;clearIconTemplate;incrementButtonIconTemplate;decrementButtonIconTemplate;value;onModelChange=()=>{};onModelTouched=()=>{};focused;initialized;groupChar="";prefixChar="";suffixChar="";isSpecialChar;timer;lastValue;_numeral;numberFormat;_decimal;_group;_minusSign;_currency;_prefix;_suffix;_index;_disabled;ngControl=null;constructor(t,i,r,o){this.document=t,this.el=i,this.cd=r,this.injector=o}ngOnChanges(t){["locale","localeMatcher","mode","currency","currencyDisplay","useGrouping","minFractionDigits","maxFractionDigits","prefix","suffix"].some(r=>!!t[r])&&this.updateConstructParser()}ngAfterContentInit(){this.templates.forEach(t=>{switch(t.getType()){case"clearicon":this.clearIconTemplate=t.template;break;case"incrementbuttonicon":this.incrementButtonIconTemplate=t.template;break;case"decrementbuttonicon":this.decrementButtonIconTemplate=t.template}})}ngOnInit(){this.ngControl=this.injector.get(dc,null,{optional:!0}),this.constructParser(),this.initialized=!0}getOptions(){return{localeMatcher:this.localeMatcher,style:this.mode,currency:this.currency,currencyDisplay:this.currencyDisplay,useGrouping:this.useGrouping,minimumFractionDigits:this.minFractionDigits,maximumFractionDigits:this.maxFractionDigits}}constructParser(){this.numberFormat=new Intl.NumberFormat(this.locale,this.getOptions());const t=[...new Intl.NumberFormat(this.locale,{useGrouping:!1}).format(9876543210)].reverse(),i=new Map(t.map((r,o)=>[r,o]));this._numeral=new RegExp(`[${t.join("")}]`,"g"),this._group=this.getGroupingExpression(),this._minusSign=this.getMinusSignExpression(),this._currency=this.getCurrencyExpression(),this._decimal=this.getDecimalExpression(),this._suffix=this.getSuffixExpression(),this._prefix=this.getPrefixExpression(),this._index=r=>i.get(r)}updateConstructParser(){this.initialized&&this.constructParser()}escapeRegExp(t){return t.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")}getDecimalExpression(){const t=new Intl.NumberFormat(this.locale,{...this.getOptions(),useGrouping:!1});return new RegExp(`[${t.format(1.1).replace(this._currency,"").trim().replace(this._numeral,"")}]`,"g")}getGroupingExpression(){const t=new Intl.NumberFormat(this.locale,{useGrouping:!0});return this.groupChar=t.format(1e6).trim().replace(this._numeral,"").charAt(0),new RegExp(`[${this.groupChar}]`,"g")}getMinusSignExpression(){const t=new Intl.NumberFormat(this.locale,{useGrouping:!1});return new RegExp(`[${t.format(-1).trim().replace(this._numeral,"")}]`,"g")}getCurrencyExpression(){if(this.currency){const t=new Intl.NumberFormat(this.locale,{style:"currency",currency:this.currency,currencyDisplay:this.currencyDisplay,minimumFractionDigits:0,maximumFractionDigits:0});return new RegExp(`[${t.format(1).replace(/\s/g,"").replace(this._numeral,"").replace(this._group,"")}]`,"g")}return new RegExp("[]","g")}getPrefixExpression(){if(this.prefix)this.prefixChar=this.prefix;else{const t=new Intl.NumberFormat(this.locale,{style:this.mode,currency:this.currency,currencyDisplay:this.currencyDisplay});this.prefixChar=t.format(1).split("1")[0]}return new RegExp(`${this.escapeRegExp(this.prefixChar||"")}`,"g")}getSuffixExpression(){if(this.suffix)this.suffixChar=this.suffix;else{const t=new Intl.NumberFormat(this.locale,{style:this.mode,currency:this.currency,currencyDisplay:this.currencyDisplay,minimumFractionDigits:0,maximumFractionDigits:0});this.suffixChar=t.format(1).split("1")[1]}return new RegExp(`${this.escapeRegExp(this.suffixChar||"")}`,"g")}formatValue(t){if(null!=t){if("-"===t)return t;if(this.format){let r=new Intl.NumberFormat(this.locale,this.getOptions()).format(t);return this.prefix&&(r=this.prefix+r),this.suffix&&(r+=this.suffix),r}return t.toString()}return""}parseValue(t){let i=t.replace(this._suffix,"").replace(this._prefix,"").trim().replace(/\s/g,"").replace(this._currency,"").replace(this._group,"").replace(this._minusSign,"-").replace(this._decimal,".").replace(this._numeral,this._index);if(i){if("-"===i)return i;let r=+i;return isNaN(r)?null:r}return null}repeat(t,i,r){if(this.readonly)return;let o=i||500;this.clearTimer(),this.timer=setTimeout(()=>{this.repeat(t,40,r)},o),this.spin(t,r)}spin(t,i){let r=this.step*i,o=this.parseValue(this.input?.nativeElement.value)||0,s=this.validateValue(o+r);this.maxlength&&this.maxlength<this.formatValue(s).length||(this.updateInput(s,null,"spin",null),this.updateModel(t,s),this.handleOnInput(t,o,s))}clear(){this.value=null,this.onModelChange(this.value),this.onClear.emit()}onUpButtonMouseDown(t){2!==t.button?(this.input?.nativeElement.focus(),this.repeat(t,null,1),t.preventDefault()):this.clearTimer()}onUpButtonMouseUp(){this.clearTimer()}onUpButtonMouseLeave(){this.clearTimer()}onUpButtonKeyDown(t){(32===t.keyCode||13===t.keyCode)&&this.repeat(t,null,1)}onUpButtonKeyUp(){this.clearTimer()}onDownButtonMouseDown(t){2!==t.button?(this.input?.nativeElement.focus(),this.repeat(t,null,-1),t.preventDefault()):this.clearTimer()}onDownButtonMouseUp(){this.clearTimer()}onDownButtonMouseLeave(){this.clearTimer()}onDownButtonKeyUp(){this.clearTimer()}onDownButtonKeyDown(t){(32===t.keyCode||13===t.keyCode)&&this.repeat(t,null,-1)}onUserInput(t){this.readonly||(this.isSpecialChar&&(t.target.value=this.lastValue),this.isSpecialChar=!1)}onInputKeyDown(t){if(this.readonly)return;if(this.lastValue=t.target.value,t.shiftKey||t.altKey)return void(this.isSpecialChar=!0);let i=t.target.selectionStart,r=t.target.selectionEnd,o=t.target.value,s=null;switch(t.altKey&&t.preventDefault(),t.which){case 38:this.spin(t,1),t.preventDefault();break;case 40:this.spin(t,-1),t.preventDefault();break;case 37:this.isNumeralChar(o.charAt(i-1))||t.preventDefault();break;case 39:this.isNumeralChar(o.charAt(i))||t.preventDefault();break;case 13:s=this.validateValue(this.parseValue(this.input.nativeElement.value)),this.input.nativeElement.value=this.formatValue(s),this.input.nativeElement.setAttribute("aria-valuenow",s),this.updateModel(t,s);break;case 8:if(t.preventDefault(),i===r){const a=o.charAt(i-1),{decimalCharIndex:l,decimalCharIndexWithoutPrefix:c}=this.getDecimalCharIndexes(o);if(this.isNumeralChar(a)){const u=this.getDecimalLength(o);if(this._group.test(a))this._group.lastIndex=0,s=o.slice(0,i-2)+o.slice(i-1);else if(this._decimal.test(a))this._decimal.lastIndex=0,u?this.input?.nativeElement.setSelectionRange(i-1,i-1):s=o.slice(0,i-1)+o.slice(i);else if(l>0&&i>l){const d=this.isDecimalMode()&&(this.minFractionDigits||0)<u?"":"0";s=o.slice(0,i-1)+d+o.slice(i)}else 1===c?(s=o.slice(0,i-1)+"0"+o.slice(i),s=this.parseValue(s)>0?s:""):s=o.slice(0,i-1)+o.slice(i)}this.updateValue(t,s,null,"delete-single")}else s=this.deleteRange(o,i,r),this.updateValue(t,s,null,"delete-range");break;case 46:if(t.preventDefault(),i===r){const a=o.charAt(i),{decimalCharIndex:l,decimalCharIndexWithoutPrefix:c}=this.getDecimalCharIndexes(o);if(this.isNumeralChar(a)){const u=this.getDecimalLength(o);if(this._group.test(a))this._group.lastIndex=0,s=o.slice(0,i)+o.slice(i+2);else if(this._decimal.test(a))this._decimal.lastIndex=0,u?this.input?.nativeElement.setSelectionRange(i+1,i+1):s=o.slice(0,i)+o.slice(i+1);else if(l>0&&i>l){const d=this.isDecimalMode()&&(this.minFractionDigits||0)<u?"":"0";s=o.slice(0,i)+d+o.slice(i+1)}else 1===c?(s=o.slice(0,i)+"0"+o.slice(i+1),s=this.parseValue(s)>0?s:""):s=o.slice(0,i)+o.slice(i+1)}this.updateValue(t,s,null,"delete-back-single")}else s=this.deleteRange(o,i,r),this.updateValue(t,s,null,"delete-range")}this.onKeyDown.emit(t)}onInputKeyPress(t){if(this.readonly)return;let i=t.which||t.keyCode,r=String.fromCharCode(i);const o=this.isDecimalSign(r),s=this.isMinusSign(r);13!=i&&t.preventDefault();const a=this.parseValue(this.input.nativeElement.value+r),l=null!=a?a.toString():"";this.maxlength&&l.length>this.maxlength||(48<=i&&i<=57||s||o)&&this.insert(t,r,{isDecimalSign:o,isMinusSign:s})}onPaste(t){if(!this.disabled&&!this.readonly){t.preventDefault();let i=(t.clipboardData||this.document.defaultView.clipboardData).getData("Text");if(i){this.maxlength&&(i=i.toString().substring(0,this.maxlength));let r=this.parseValue(i);null!=r&&this.insert(t,r.toString())}}}allowMinusSign(){return null==this.min||this.min<0}isMinusSign(t){return!(!this._minusSign.test(t)&&"-"!==t||(this._minusSign.lastIndex=0,0))}isDecimalSign(t){return!!this._decimal.test(t)&&(this._decimal.lastIndex=0,!0)}isDecimalMode(){return"decimal"===this.mode}getDecimalCharIndexes(t){let i=t.search(this._decimal);this._decimal.lastIndex=0;const o=t.replace(this._prefix,"").trim().replace(/\s/g,"").replace(this._currency,"").search(this._decimal);return this._decimal.lastIndex=0,{decimalCharIndex:i,decimalCharIndexWithoutPrefix:o}}getCharIndexes(t){const i=t.search(this._decimal);this._decimal.lastIndex=0;const r=t.search(this._minusSign);this._minusSign.lastIndex=0;const o=t.search(this._suffix);this._suffix.lastIndex=0;const s=t.search(this._currency);return this._currency.lastIndex=0,{decimalCharIndex:i,minusCharIndex:r,suffixCharIndex:o,currencyCharIndex:s}}insert(t,i,r={isDecimalSign:!1,isMinusSign:!1}){const o=i.search(this._minusSign);if(this._minusSign.lastIndex=0,!this.allowMinusSign()&&-1!==o)return;let s=this.input?.nativeElement.selectionStart,a=this.input?.nativeElement.selectionEnd,l=this.input?.nativeElement.value.trim();const{decimalCharIndex:c,minusCharIndex:u,suffixCharIndex:d,currencyCharIndex:f}=this.getCharIndexes(l);let h;if(r.isMinusSign)0===s&&(h=l,(-1===u||0!==a)&&(h=this.insertText(l,i,0,a)),this.updateValue(t,h,i,"insert"));else if(r.isDecimalSign)c>0&&s===c?this.updateValue(t,l,i,"insert"):(c>s&&c<a||-1===c&&this.maxFractionDigits)&&(h=this.insertText(l,i,s,a),this.updateValue(t,h,i,"insert"));else{const p=this.numberFormat.resolvedOptions().maximumFractionDigits,g=s!==a?"range-insert":"insert";if(c>0&&s>c){if(s+i.length-(c+1)<=p){const m=f>=s?f-1:d>=s?d:l.length;h=l.slice(0,s)+i+l.slice(s+i.length,m)+l.slice(m),this.updateValue(t,h,i,g)}}else h=this.insertText(l,i,s,a),this.updateValue(t,h,i,g)}}insertText(t,i,r,o){if(2===("."===i?i:i.split(".")).length){const a=t.slice(r,o).search(this._decimal);return this._decimal.lastIndex=0,a>0?t.slice(0,r)+this.formatValue(i)+t.slice(o):t||this.formatValue(i)}return o-r===t.length?this.formatValue(i):0===r?i+t.slice(o):o===t.length?t.slice(0,r)+i:t.slice(0,r)+i+t.slice(o)}deleteRange(t,i,r){let o;return o=r-i===t.length?"":0===i?t.slice(r):r===t.length?t.slice(0,i):t.slice(0,i)+t.slice(r),o}initCursor(){let t=this.input?.nativeElement.selectionStart,i=this.input?.nativeElement.value,r=i.length,o=null,s=(this.prefixChar||"").length;i=i.replace(this._prefix,""),t-=s;let a=i.charAt(t);if(this.isNumeralChar(a))return t+s;let l=t-1;for(;l>=0;){if(a=i.charAt(l),this.isNumeralChar(a)){o=l+s;break}l--}if(null!==o)this.input?.nativeElement.setSelectionRange(o+1,o+1);else{for(l=t;l<r;){if(a=i.charAt(l),this.isNumeralChar(a)){o=l+s;break}l++}null!==o&&this.input?.nativeElement.setSelectionRange(o,o)}return o||0}onInputClick(){const t=this.input?.nativeElement.value;!this.readonly&&t!==Y.getSelection()&&this.initCursor()}isNumeralChar(t){return!(1!==t.length||!(this._numeral.test(t)||this._decimal.test(t)||this._group.test(t)||this._minusSign.test(t))||(this.resetRegex(),0))}resetRegex(){this._numeral.lastIndex=0,this._decimal.lastIndex=0,this._group.lastIndex=0,this._minusSign.lastIndex=0}updateValue(t,i,r,o){let s=this.input?.nativeElement.value,a=null;null!=i&&(a=this.parseValue(i),a=a||this.allowEmpty?a:0,this.updateInput(a,r,o,i),this.handleOnInput(t,s,a))}handleOnInput(t,i,r){this.isValueChanged(i,r)&&(this.input.nativeElement.value=this.formatValue(r),this.input?.nativeElement.setAttribute("aria-valuenow",r),this.updateModel(t,r),this.onInput.emit({originalEvent:t,value:r,formattedValue:i}))}isValueChanged(t,i){return null===i&&null!==t||null!=i&&i!==("string"==typeof t?this.parseValue(t):t)}validateValue(t){return"-"===t||null==t?null:null!=this.min&&t<this.min?this.min:null!=this.max&&t>this.max?this.max:t}updateInput(t,i,r,o){i=i||"";let s=this.input?.nativeElement.value,a=this.formatValue(t),l=s.length;if(a!==o&&(a=this.concatValues(a,o)),0===l){this.input.nativeElement.value=a,this.input.nativeElement.setSelectionRange(0,0);const u=this.initCursor()+i.length;this.input.nativeElement.setSelectionRange(u,u)}else{let c=this.input.nativeElement.selectionStart,u=this.input.nativeElement.selectionEnd;if(this.maxlength&&a.length>this.maxlength&&(a=a.slice(0,this.maxlength),c=Math.min(c,this.maxlength),u=Math.min(u,this.maxlength)),this.maxlength&&this.maxlength<a.length)return;this.input.nativeElement.value=a;let d=a.length;if("range-insert"===r){const f=this.parseValue((s||"").slice(0,c)),p=(null!==f?f.toString():"").split("").join(`(${this.groupChar})?`),g=new RegExp(p,"g");g.test(a);const m=i.split("").join(`(${this.groupChar})?`),_=new RegExp(m,"g");_.test(a.slice(g.lastIndex)),u=g.lastIndex+_.lastIndex,this.input.nativeElement.setSelectionRange(u,u)}else if(d===l)"insert"===r||"delete-back-single"===r?this.input.nativeElement.setSelectionRange(u+1,u+1):"delete-single"===r?this.input.nativeElement.setSelectionRange(u-1,u-1):("delete-range"===r||"spin"===r)&&this.input.nativeElement.setSelectionRange(u,u);else if("delete-back-single"===r){let f=s.charAt(u-1),h=s.charAt(u),p=l-d,g=this._group.test(h);g&&1===p?u+=1:!g&&this.isNumeralChar(f)&&(u+=-1*p+1),this._group.lastIndex=0,this.input.nativeElement.setSelectionRange(u,u)}else if("-"===s&&"insert"===r){this.input.nativeElement.setSelectionRange(0,0);const h=this.initCursor()+i.length+1;this.input.nativeElement.setSelectionRange(h,h)}else u+=d-l,this.input.nativeElement.setSelectionRange(u,u)}this.input.nativeElement.setAttribute("aria-valuenow",t)}concatValues(t,i){if(t&&i){let r=i.search(this._decimal);return this._decimal.lastIndex=0,this.suffixChar?t.replace(this.suffixChar,"").split(this._decimal)[0]+i.replace(this.suffixChar,"").slice(r)+this.suffixChar:-1!==r?t.split(this._decimal)[0]+i.slice(r):t}return t}getDecimalLength(t){if(t){const i=t.split(this._decimal);if(2===i.length)return i[1].replace(this._suffix,"").trim().replace(/\s/g,"").replace(this._currency,"").length}return 0}onInputFocus(t){this.focused=!0,this.onFocus.emit(t)}onInputBlur(t){this.focused=!1;let i=this.validateValue(this.parseValue(this.input.nativeElement.value));this.input.nativeElement.value=this.formatValue(i),this.input.nativeElement.setAttribute("aria-valuenow",i),this.updateModel(t,i),this.onBlur.emit(t)}formattedValue(){return this.formatValue(this.value||this.allowEmpty?this.value:0)}updateModel(t,i){const r="blur"===this.ngControl?.control?.updateOn;this.value!==i?(this.value=i,r&&this.focused||this.onModelChange(i)):r&&this.onModelChange(i),this.onModelTouched()}writeValue(t){this.value=t,this.cd.markForCheck()}registerOnChange(t){this.onModelChange=t}registerOnTouched(t){this.onModelTouched=t}setDisabledState(t){this.disabled=t,this.cd.markForCheck()}get filled(){return null!=this.value&&this.value.toString().length>0}clearTimer(){this.timer&&clearInterval(this.timer)}getFormatter(){return this.numberFormat}static \u0275fac=function(i){return new(i||e)(G(qn),G(pn),G(Ro),G(Zr))};static \u0275cmp=it({type:e,selectors:[["p-inputNumber"]],contentQueries:function(i,r,o){if(1&i&&Er(o,Bo,4),2&i){let s;Ct(s=xt())&&(r.templates=s)}},viewQuery:function(i,r){if(1&i&&Fn(dst,5),2&i){let o;Ct(o=xt())&&(r.input=o.first)}},hostAttrs:[1,"p-element","p-inputwrapper"],hostVars:6,hostBindings:function(i,r){2&i&&fu("p-inputwrapper-filled",r.filled)("p-inputwrapper-focus",r.focused)("p-inputnumber-clearable",r.showClear&&"vertical"!=r.buttonLayout)},inputs:{showButtons:"showButtons",format:"format",buttonLayout:"buttonLayout",inputId:"inputId",styleClass:"styleClass",style:"style",placeholder:"placeholder",size:"size",maxlength:"maxlength",tabindex:"tabindex",title:"title",ariaLabel:"ariaLabel",ariaRequired:"ariaRequired",name:"name",required:"required",autocomplete:"autocomplete",min:"min",max:"max",incrementButtonClass:"incrementButtonClass",decrementButtonClass:"decrementButtonClass",incrementButtonIcon:"incrementButtonIcon",decrementButtonIcon:"decrementButtonIcon",readonly:"readonly",step:"step",allowEmpty:"allowEmpty",locale:"locale",localeMatcher:"localeMatcher",mode:"mode",currency:"currency",currencyDisplay:"currencyDisplay",useGrouping:"useGrouping",minFractionDigits:"minFractionDigits",maxFractionDigits:"maxFractionDigits",prefix:"prefix",suffix:"suffix",inputStyle:"inputStyle",inputStyleClass:"inputStyleClass",showClear:"showClear",disabled:"disabled"},outputs:{onInput:"onInput",onFocus:"onFocus",onBlur:"onBlur",onKeyDown:"onKeyDown",onClear:"onClear"},features:[Gt([zst]),vr],decls:7,vars:32,consts:[[3,"ngClass","ngStyle"],["pInputText","","inputmode","decimal",3,"ngClass","ngStyle","value","disabled","readonly","input","keydown","keypress","paste","click","focus","blur"],["input",""],[4,"ngIf"],["class","p-inputnumber-button-group",4,"ngIf"],["type","button","pButton","","class","p-button-icon-only","tabindex","-1",3,"ngClass","class","disabled","mousedown","mouseup","mouseleave","keydown","keyup",4,"ngIf"],[3,"ngClass","click",4,"ngIf"],["class","p-inputnumber-clear-icon",3,"click",4,"ngIf"],[3,"ngClass","click"],[1,"p-inputnumber-clear-icon",3,"click"],[4,"ngTemplateOutlet"],[1,"p-inputnumber-button-group"],["type","button","pButton","","tabindex","-1",1,"p-button-icon-only",3,"ngClass","disabled","mousedown","mouseup","mouseleave","keydown","keyup"],[3,"ngClass",4,"ngIf"],[3,"ngClass"]],template:function(i,r){1&i&&(q(0,"span",0)(1,"input",1,2),we("input",function(s){return r.onUserInput(s)})("keydown",function(s){return r.onInputKeyDown(s)})("keypress",function(s){return r.onInputKeyPress(s)})("paste",function(s){return r.onPaste(s)})("click",function(){return r.onInputClick()})("focus",function(s){return r.onInputFocus(s)})("blur",function(s){return r.onInputBlur(s)}),W(),B(3,mst,3,2,"ng-container",3),B(4,Dst,7,14,"span",4),B(5,Rst,3,7,"button",5),B(6,Bst,3,7,"button",5),W()),2&i&&(Xe(r.styleClass),k("ngClass",hu(28,Vst,r.showButtons&&"stacked"===r.buttonLayout,r.showButtons&&"horizontal"===r.buttonLayout,r.showButtons&&"vertical"===r.buttonLayout))("ngStyle",r.style),$(1),Xe(r.inputStyleClass),k("ngClass","p-inputnumber-input")("ngStyle",r.inputStyle)("value",r.formattedValue())("disabled",r.disabled)("readonly",r.readonly),ve("placeholder",r.placeholder)("title",r.title)("id",r.inputId)("size",r.size)("name",r.name)("autocomplete",r.autocomplete)("maxlength",r.maxlength)("tabindex",r.tabindex)("aria-label",r.ariaLabel)("aria-required",r.ariaRequired)("required",r.required)("min",r.min)("max",r.max),$(2),k("ngIf","vertical"!=r.buttonLayout&&r.showClear&&(r.value||0===r.value)),$(1),k("ngIf",r.showButtons&&"stacked"===r.buttonLayout),$(1),k("ngIf",r.showButtons&&"stacked"!==r.buttonLayout),$(1),k("ngIf",r.showButtons&&"stacked"!==r.buttonLayout))},dependencies:function(){return[_s,No,Po,ys,ust,$ue,ol,jue,que]},styles:["@layer primeng{p-inputnumber,.p-inputnumber{display:inline-flex}.p-inputnumber-button{display:flex;align-items:center;justify-content:center;flex:0 0 auto}.p-inputnumber-buttons-stacked .p-button.p-inputnumber-button .p-button-label,.p-inputnumber-buttons-horizontal .p-button.p-inputnumber-button .p-button-label{display:none}.p-inputnumber-buttons-stacked .p-button.p-inputnumber-button-up{border-top-left-radius:0;border-bottom-left-radius:0;border-bottom-right-radius:0;padding:0}.p-inputnumber-buttons-stacked .p-inputnumber-input{border-top-right-radius:0;border-bottom-right-radius:0}.p-inputnumber-buttons-stacked .p-button.p-inputnumber-button-down{border-top-left-radius:0;border-top-right-radius:0;border-bottom-left-radius:0;padding:0}.p-inputnumber-buttons-stacked .p-inputnumber-button-group{display:flex;flex-direction:column}.p-inputnumber-buttons-stacked .p-inputnumber-button-group .p-button.p-inputnumber-button{flex:1 1 auto}.p-inputnumber-buttons-horizontal .p-button.p-inputnumber-button-up{order:3;border-top-left-radius:0;border-bottom-left-radius:0}.p-inputnumber-buttons-horizontal .p-inputnumber-input{order:2;border-radius:0}.p-inputnumber-buttons-horizontal .p-button.p-inputnumber-button-down{order:1;border-top-right-radius:0;border-bottom-right-radius:0}.p-inputnumber-buttons-vertical{flex-direction:column}.p-inputnumber-buttons-vertical .p-button.p-inputnumber-button-up{order:1;border-bottom-left-radius:0;border-bottom-right-radius:0;width:100%}.p-inputnumber-buttons-vertical .p-inputnumber-input{order:2;border-radius:0;text-align:center}.p-inputnumber-buttons-vertical .p-button.p-inputnumber-button-down{order:3;border-top-left-radius:0;border-top-right-radius:0;width:100%}.p-inputnumber-input{flex:1 1 auto}.p-fluid p-inputnumber,.p-fluid .p-inputnumber{width:100%}.p-fluid .p-inputnumber .p-inputnumber-input{width:1%}.p-fluid .p-inputnumber-buttons-vertical .p-inputnumber-input{width:100%}.p-inputnumber-clear-icon{position:absolute;top:50%;margin-top:-.5rem;cursor:pointer}.p-inputnumber-clearable{position:relative}}\n"],encapsulation:2,changeDetection:0})}return e})(),t9=(()=>{class e{static \u0275fac=function(i){return new(i||e)};static \u0275mod=Ut({type:e});static \u0275inj=Nt({imports:[ti,Hue,Bv,ol,jue,que,kn]})}return e})(),Hst=(()=>{class e extends En{static \u0275fac=function(){let t;return function(r){return(t||(t=dt(e)))(r||e)}}();static \u0275cmp=it({type:e,selectors:[["AngleDoubleLeftIcon"]],standalone:!0,features:[qe,cn],decls:2,vars:5,consts:[["width","14","height","14","viewBox","0 0 14 14","fill","none","xmlns","http://www.w3.org/2000/svg"],["fill-rule","evenodd","clip-rule","evenodd","d","M5.71602 11.164C5.80782 11.2021 5.9063 11.2215 6.00569 11.221C6.20216 11.2301 6.39427 11.1612 6.54025 11.0294C6.68191 10.8875 6.76148 10.6953 6.76148 10.4948C6.76148 10.2943 6.68191 10.1021 6.54025 9.96024L3.51441 6.9344L6.54025 3.90855C6.624 3.76126 6.65587 3.59011 6.63076 3.42254C6.60564 3.25498 6.525 3.10069 6.40175 2.98442C6.2785 2.86815 6.11978 2.79662 5.95104 2.7813C5.78229 2.76598 5.61329 2.80776 5.47112 2.89994L1.97123 6.39983C1.82957 6.54167 1.75 6.73393 1.75 6.9344C1.75 7.13486 1.82957 7.32712 1.97123 7.46896L5.47112 10.9991C5.54096 11.0698 5.62422 11.1259 5.71602 11.164ZM11.0488 10.9689C11.1775 11.1156 11.3585 11.2061 11.5531 11.221C11.7477 11.2061 11.9288 11.1156 12.0574 10.9689C12.1815 10.8302 12.25 10.6506 12.25 10.4645C12.25 10.2785 12.1815 10.0989 12.0574 9.96024L9.03158 6.93439L12.0574 3.90855C12.1248 3.76739 12.1468 3.60881 12.1204 3.45463C12.0939 3.30045 12.0203 3.15826 11.9097 3.04765C11.7991 2.93703 11.6569 2.86343 11.5027 2.83698C11.3486 2.81053 11.19 2.83252 11.0488 2.89994L7.51865 6.36957C7.37699 6.51141 7.29742 6.70367 7.29742 6.90414C7.29742 7.1046 7.37699 7.29686 7.51865 7.4387L11.0488 10.9689Z","fill","currentColor"]],template:function(i,r){1&i&&(yn(),q(0,"svg",0),_e(1,"path",1),W()),2&i&&(Xe(r.getClassNames()),ve("aria-label",r.ariaLabel)("aria-hidden",r.ariaHidden)("role",r.role))},encapsulation:2})}return e})(),jst=(()=>{class e extends En{static \u0275fac=function(){let t;return function(r){return(t||(t=dt(e)))(r||e)}}();static \u0275cmp=it({type:e,selectors:[["AngleDoubleRightIcon"]],standalone:!0,features:[qe,cn],decls:2,vars:5,consts:[["width","14","height","14","viewBox","0 0 14 14","fill","none","xmlns","http://www.w3.org/2000/svg"],["fill-rule","evenodd","clip-rule","evenodd","d","M7.68757 11.1451C7.7791 11.1831 7.8773 11.2024 7.9764 11.2019C8.07769 11.1985 8.17721 11.1745 8.26886 11.1312C8.36052 11.088 8.44238 11.0265 8.50943 10.9505L12.0294 7.49085C12.1707 7.34942 12.25 7.15771 12.25 6.95782C12.25 6.75794 12.1707 6.56622 12.0294 6.42479L8.50943 2.90479C8.37014 2.82159 8.20774 2.78551 8.04633 2.80192C7.88491 2.81833 7.73309 2.88635 7.6134 2.99588C7.4937 3.10541 7.41252 3.25061 7.38189 3.40994C7.35126 3.56927 7.37282 3.73423 7.44337 3.88033L10.4605 6.89748L7.44337 9.91463C7.30212 10.0561 7.22278 10.2478 7.22278 10.4477C7.22278 10.6475 7.30212 10.8393 7.44337 10.9807C7.51301 11.0512 7.59603 11.1071 7.68757 11.1451ZM1.94207 10.9505C2.07037 11.0968 2.25089 11.1871 2.44493 11.2019C2.63898 11.1871 2.81949 11.0968 2.94779 10.9505L6.46779 7.49085C6.60905 7.34942 6.68839 7.15771 6.68839 6.95782C6.68839 6.75793 6.60905 6.56622 6.46779 6.42479L2.94779 2.90479C2.80704 2.83757 2.6489 2.81563 2.49517 2.84201C2.34143 2.86839 2.19965 2.94178 2.08936 3.05207C1.97906 3.16237 1.90567 3.30415 1.8793 3.45788C1.85292 3.61162 1.87485 3.76975 1.94207 3.9105L4.95922 6.92765L1.94207 9.9448C1.81838 10.0831 1.75 10.2621 1.75 10.4477C1.75 10.6332 1.81838 10.8122 1.94207 10.9505Z","fill","currentColor"]],template:function(i,r){1&i&&(yn(),q(0,"svg",0),_e(1,"path",1),W()),2&i&&(Xe(r.getClassNames()),ve("aria-label",r.ariaLabel)("aria-hidden",r.ariaHidden)("role",r.role))},encapsulation:2})}return e})(),qst=(()=>{class e extends En{static \u0275fac=function(){let t;return function(r){return(t||(t=dt(e)))(r||e)}}();static \u0275cmp=it({type:e,selectors:[["AngleLeftIcon"]],standalone:!0,features:[qe,cn],decls:2,vars:5,consts:[["width","14","height","14","viewBox","0 0 14 14","fill","none","xmlns","http://www.w3.org/2000/svg"],["d","M8.75 11.185C8.65146 11.1854 8.55381 11.1662 8.4628 11.1284C8.37179 11.0906 8.28924 11.0351 8.22 10.965L4.72 7.46496C4.57955 7.32433 4.50066 7.13371 4.50066 6.93496C4.50066 6.73621 4.57955 6.54558 4.72 6.40496L8.22 2.93496C8.36095 2.84357 8.52851 2.80215 8.69582 2.81733C8.86312 2.83252 9.02048 2.90344 9.14268 3.01872C9.26487 3.134 9.34483 3.28696 9.36973 3.4531C9.39463 3.61924 9.36303 3.78892 9.28 3.93496L6.28 6.93496L9.28 9.93496C9.42045 10.0756 9.49934 10.2662 9.49934 10.465C9.49934 10.6637 9.42045 10.8543 9.28 10.995C9.13526 11.1257 8.9448 11.1939 8.75 11.185Z","fill","currentColor"]],template:function(i,r){1&i&&(yn(),q(0,"svg",0),_e(1,"path",1),W()),2&i&&(Xe(r.getClassNames()),ve("aria-label",r.ariaLabel)("aria-hidden",r.ariaHidden)("role",r.role))},encapsulation:2})}return e})(),Wst=(()=>{class e extends En{static \u0275fac=function(){let t;return function(r){return(t||(t=dt(e)))(r||e)}}();static \u0275cmp=it({type:e,selectors:[["AngleRightIcon"]],standalone:!0,features:[qe,cn],decls:2,vars:5,consts:[["width","14","height","14","viewBox","0 0 14 14","fill","none","xmlns","http://www.w3.org/2000/svg"],["d","M5.25 11.1728C5.14929 11.1694 5.05033 11.1455 4.9592 11.1025C4.86806 11.0595 4.78666 10.9984 4.72 10.9228C4.57955 10.7822 4.50066 10.5916 4.50066 10.3928C4.50066 10.1941 4.57955 10.0035 4.72 9.86283L7.72 6.86283L4.72 3.86283C4.66067 3.71882 4.64765 3.55991 4.68275 3.40816C4.71785 3.25642 4.79932 3.11936 4.91585 3.01602C5.03238 2.91268 5.17819 2.84819 5.33305 2.83149C5.4879 2.81479 5.64411 2.84671 5.78 2.92283L9.28 6.42283C9.42045 6.56346 9.49934 6.75408 9.49934 6.95283C9.49934 7.15158 9.42045 7.34221 9.28 7.48283L5.78 10.9228C5.71333 10.9984 5.63193 11.0595 5.5408 11.1025C5.44966 11.1455 5.35071 11.1694 5.25 11.1728Z","fill","currentColor"]],template:function(i,r){1&i&&(yn(),q(0,"svg",0),_e(1,"path",1),W()),2&i&&(Xe(r.getClassNames()),ve("aria-label",r.ariaLabel)("aria-hidden",r.ariaHidden)("role",r.role))},encapsulation:2})}return e})(),Tat=(()=>{class e{static \u0275fac=function(i){return new(i||e)};static \u0275mod=Ut({type:e});static \u0275inj=Nt({imports:[ti,GT,t9,rC,kn,Su,Hst,jst,qst,Wst,GT,t9,rC,kn]})}return e})();function Dat(e,n){1&e&&_e(0,"span",8),2&e&&(Xe(L(2).$implicit.icon),k("ngClass","p-button-icon p-button-icon-left"))}function Iat(e,n){if(1&e&&(Ke(0),B(1,Dat,1,3,"span",6),q(2,"span",7),pt(3),W(),Ye()),2&e){const t=L().$implicit,i=L();$(1),k("ngIf",t.icon),$(2),Jn(i.getOptionLabel(t))}}function Mat(e,n){1&e&&wt(0)}const Aat=function(e,n){return{$implicit:e,index:n}};function kat(e,n){if(1&e&&B(0,Mat,1,0,"ng-container",9),2&e){const t=L(),i=t.$implicit,r=t.index;k("ngTemplateOutlet",L().selectButtonTemplate)("ngTemplateOutletContext",jn(2,Aat,i,r))}}const Oat=function(e,n,t){return{"p-highlight":e,"p-disabled":n,"p-button-icon-only":t}};function Rat(e,n){if(1&e){const t=ft();q(0,"div",2,3),we("click",function(r){const o=J(t),s=o.$implicit,a=o.index;return ee(L().onItemClick(r,s,a))})("keydown.enter",function(r){const o=J(t),s=o.$implicit,a=o.index;return ee(L().onItemClick(r,s,a))})("blur",function(){return J(t),ee(L().onBlur())}),B(2,Iat,4,2,"ng-container",4),B(3,kat,1,5,"ng-template",null,5,Ja),W()}if(2&e){const t=n.$implicit,i=Xi(4),r=L();Xe(t.styleClass),k("ngClass",hu(10,Oat,r.isSelected(t),r.disabled||r.isOptionDisabled(t),t.icon&&!r.getOptionLabel(t))),ve("aria-pressed",r.isSelected(t))("title",t.title)("aria-label",t.label)("tabindex",r.disabled?null:r.tabindex)("aria-labelledby",r.getOptionLabel(t)),$(2),k("ngIf",!r.itemTemplate)("ngIfElse",i)}}const Fat={provide:Qi,useExisting:Rt(()=>Nat),multi:!0};let Nat=(()=>{class e{cd;options;optionLabel;optionValue;optionDisabled;tabindex=0;multiple;style;styleClass;ariaLabelledBy;disabled;dataKey;onOptionClick=new De;onChange=new De;itemTemplate;get selectButtonTemplate(){return this.itemTemplate?.template}value;onModelChange=()=>{};onModelTouched=()=>{};constructor(t){this.cd=t}getOptionLabel(t){return this.optionLabel?ht.resolveFieldData(t,this.optionLabel):null!=t.label?t.label:t}getOptionValue(t){return this.optionValue?ht.resolveFieldData(t,this.optionValue):this.optionLabel||void 0===t.value?t:t.value}isOptionDisabled(t){return this.optionDisabled?ht.resolveFieldData(t,this.optionDisabled):void 0!==t.disabled&&t.disabled}writeValue(t){this.value=t,this.cd.markForCheck()}registerOnChange(t){this.onModelChange=t}registerOnTouched(t){this.onModelTouched=t}setDisabledState(t){this.disabled=t,this.cd.markForCheck()}onItemClick(t,i,r){if(this.disabled||this.isOptionDisabled(i))return;const o=this.getOptionValue(i);this.multiple?(this.isSelected(i)?this.removeOption(i):this.value=[...this.value||[],o],this.onModelChange(this.value),this.onChange.emit({originalEvent:t,value:this.value})):this.value!==o&&(this.value=o,this.onModelChange(this.value),this.onChange.emit({originalEvent:t,value:this.value})),this.onOptionClick.emit({originalEvent:t,option:i,index:r})}onBlur(){this.onModelTouched()}removeOption(t){this.value=this.value.filter(i=>!ht.equals(i,this.getOptionValue(t),this.dataKey))}isSelected(t){let i=!1;const r=this.getOptionValue(t);if(this.multiple){if(this.value&&Array.isArray(this.value))for(let o of this.value)if(ht.equals(o,r,this.dataKey)){i=!0;break}}else i=ht.equals(r,this.value,this.dataKey);return i}static \u0275fac=function(i){return new(i||e)(G(Ro))};static \u0275cmp=it({type:e,selectors:[["p-selectButton"]],contentQueries:function(i,r,o){if(1&i&&Er(o,Bo,5),2&i){let s;Ct(s=xt())&&(r.itemTemplate=s.first)}},hostAttrs:[1,"p-element"],inputs:{options:"options",optionLabel:"optionLabel",optionValue:"optionValue",optionDisabled:"optionDisabled",tabindex:"tabindex",multiple:"multiple",style:"style",styleClass:"styleClass",ariaLabelledBy:"ariaLabelledBy",disabled:"disabled",dataKey:"dataKey"},outputs:{onOptionClick:"onOptionClick",onChange:"onChange"},features:[Gt([Fat])],decls:2,vars:5,consts:[["role","group",3,"ngClass","ngStyle"],["class","p-button p-component","role","button","pRipple","",3,"class","ngClass","click","keydown.enter","blur",4,"ngFor","ngForOf"],["role","button","pRipple","",1,"p-button","p-component",3,"ngClass","click","keydown.enter","blur"],["btn",""],[4,"ngIf","ngIfElse"],["customcontent",""],[3,"ngClass","class",4,"ngIf"],[1,"p-button-label"],[3,"ngClass"],[4,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(i,r){1&i&&(q(0,"div",0),B(1,Rat,5,14,"div",1),W()),2&i&&(Xe(r.styleClass),k("ngClass","p-selectbutton p-buttonset p-component")("ngStyle",r.style),$(1),k("ngForOf",r.options))},dependencies:[_s,eg,No,Po,ys,yg],styles:['@layer primeng{.p-button{margin:0;display:inline-flex;cursor:pointer;-webkit-user-select:none;user-select:none;align-items:center;vertical-align:bottom;text-align:center;overflow:hidden;position:relative}.p-button-label{flex:1 1 auto}.p-button-icon-right{order:1}.p-button:disabled{cursor:default;pointer-events:none}.p-button-icon-only{justify-content:center}.p-button-icon-only:after{content:"p";visibility:hidden;clip:rect(0 0 0 0);width:0}.p-button-vertical{flex-direction:column}.p-button-icon-bottom{order:2}.p-buttonset .p-button{margin:0}.p-buttonset .p-button:not(:last-child){border-right:0 none}.p-buttonset .p-button:not(:first-of-type):not(:last-of-type){border-radius:0}.p-buttonset .p-button:first-of-type{border-top-right-radius:0;border-bottom-right-radius:0}.p-buttonset .p-button:last-of-type{border-top-left-radius:0;border-bottom-left-radius:0}.p-buttonset .p-button:focus{position:relative;z-index:1}p-button[iconpos=right] spinnericon{order:1}}\n'],encapsulation:2,changeDetection:0})}return e})(),Pat=(()=>{class e{static \u0275fac=function(i){return new(i||e)};static \u0275mod=Ut({type:e});static \u0275inj=Nt({imports:[ti,Su,kn,kn]})}return e})(),r9=(()=>{class e extends En{static \u0275fac=function(){let t;return function(r){return(t||(t=dt(e)))(r||e)}}();static \u0275cmp=it({type:e,selectors:[["CheckIcon"]],standalone:!0,features:[qe,cn],decls:2,vars:5,consts:[["width","14","height","14","viewBox","0 0 14 14","fill","none","xmlns","http://www.w3.org/2000/svg"],["d","M4.86199 11.5948C4.78717 11.5923 4.71366 11.5745 4.64596 11.5426C4.57826 11.5107 4.51779 11.4652 4.46827 11.4091L0.753985 7.69483C0.683167 7.64891 0.623706 7.58751 0.580092 7.51525C0.536478 7.44299 0.509851 7.36177 0.502221 7.27771C0.49459 7.19366 0.506156 7.10897 0.536046 7.03004C0.565935 6.95111 0.613367 6.88 0.674759 6.82208C0.736151 6.76416 0.8099 6.72095 0.890436 6.69571C0.970973 6.67046 1.05619 6.66385 1.13966 6.67635C1.22313 6.68886 1.30266 6.72017 1.37226 6.76792C1.44186 6.81567 1.4997 6.8786 1.54141 6.95197L4.86199 10.2503L12.6397 2.49483C12.7444 2.42694 12.8689 2.39617 12.9932 2.40745C13.1174 2.41873 13.2343 2.47141 13.3251 2.55705C13.4159 2.64268 13.4753 2.75632 13.4938 2.87973C13.5123 3.00315 13.4888 3.1292 13.4271 3.23768L5.2557 11.4091C5.20618 11.4652 5.14571 11.5107 5.07801 11.5426C5.01031 11.5745 4.9368 11.5923 4.86199 11.5948Z","fill","currentColor"]],template:function(i,r){1&i&&(yn(),q(0,"svg",0),_e(1,"path",1),W()),2&i&&(Xe(r.getClassNames()),ve("aria-label",r.ariaLabel)("aria-hidden",r.ariaHidden)("role",r.role))},encapsulation:2})}return e})();function Lat(e,n){1&e&&_e(0,"span",8),2&e&&k("ngClass",L(2).checkboxTrueIcon)}function $at(e,n){1&e&&_e(0,"CheckIcon",11),2&e&&k("styleClass","p-checkbox-icon")}function Bat(e,n){}function Vat(e,n){1&e&&B(0,Bat,0,0,"ng-template")}function zat(e,n){if(1&e&&(q(0,"span",12),B(1,Vat,1,0,null,13),W()),2&e){const t=L(3);$(1),k("ngTemplateOutlet",t.checkIconTemplate)}}function Uat(e,n){if(1&e&&(Ke(0),B(1,$at,1,1,"CheckIcon",9),B(2,zat,2,1,"span",10),Ye()),2&e){const t=L(2);$(1),k("ngIf",!t.checkIconTemplate),$(1),k("ngIf",t.checkIconTemplate)}}function Hat(e,n){if(1&e&&(Ke(0),B(1,Lat,1,1,"span",7),B(2,Uat,3,2,"ng-container",5),Ye()),2&e){const t=L();$(1),k("ngIf",t.checkboxTrueIcon),$(1),k("ngIf",!t.checkboxTrueIcon)}}function jat(e,n){1&e&&_e(0,"span",8),2&e&&k("ngClass",L(2).checkboxFalseIcon)}function qat(e,n){1&e&&_e(0,"TimesIcon",11),2&e&&k("styleClass","p-checkbox-icon")}function Wat(e,n){}function Gat(e,n){1&e&&B(0,Wat,0,0,"ng-template")}function Kat(e,n){if(1&e&&(q(0,"span",12),B(1,Gat,1,0,null,13),W()),2&e){const t=L(3);$(1),k("ngTemplateOutlet",t.uncheckIconTemplate)}}function Yat(e,n){if(1&e&&(Ke(0),B(1,qat,1,1,"TimesIcon",9),B(2,Kat,2,1,"span",10),Ye()),2&e){const t=L(2);$(1),k("ngIf",!t.uncheckIconTemplate),$(1),k("ngIf",t.uncheckIconTemplate)}}function Xat(e,n){if(1&e&&(Ke(0),B(1,jat,1,1,"span",7),B(2,Yat,3,2,"ng-container",5),Ye()),2&e){const t=L();$(1),k("ngIf",t.checkboxFalseIcon),$(1),k("ngIf",!t.checkboxFalseIcon)}}const Qat=function(e,n,t){return{"p-checkbox-label-active":e,"p-disabled":n,"p-checkbox-label-focus":t}};function Zat(e,n){if(1&e){const t=ft();q(0,"label",14),we("click",function(r){J(t);const o=L(),s=Xi(3);return ee(o.onClick(r,s))}),pt(1),W()}if(2&e){const t=L();k("ngClass",hu(3,Qat,null!=t.value,t.disabled,t.focused)),ve("for",t.inputId),$(1),Jn(t.label)}}const Jat=function(e,n){return{"p-checkbox p-component":!0,"p-checkbox-disabled":e,"p-checkbox-focused":n}},elt=function(e,n,t){return{"p-highlight":e,"p-disabled":n,"p-focus":t}},tlt={provide:Qi,useExisting:Rt(()=>nlt),multi:!0};let nlt=(()=>{class e{cd;constructor(t){this.cd=t}disabled;name;ariaLabelledBy;tabindex;inputId;style;styleClass;label;readonly;checkboxTrueIcon;checkboxFalseIcon;onChange=new De;templates;checkIconTemplate;uncheckIconTemplate;focused;value;onModelChange=()=>{};onModelTouched=()=>{};onClick(t,i){!this.disabled&&!this.readonly&&(this.toggle(t),this.focused=!0,i.focus())}onKeydown(t){32==t.keyCode&&t.preventDefault()}onKeyup(t){32==t.keyCode&&!this.readonly&&(this.toggle(t),t.preventDefault())}toggle(t){null==this.value||null==this.value?this.value=!0:1==this.value?this.value=!1:0==this.value&&(this.value=null),this.onModelChange(this.value),this.onChange.emit({originalEvent:t,value:this.value})}ngAfterContentInit(){this.templates.forEach(t=>{switch(t.getType()){case"checkicon":this.checkIconTemplate=t.template;break;case"uncheckicon":this.uncheckIconTemplate=t.template}})}onFocus(){this.focused=!0}onBlur(){this.focused=!1,this.onModelTouched()}registerOnChange(t){this.onModelChange=t}registerOnTouched(t){this.onModelTouched=t}writeValue(t){this.value=t,this.cd.markForCheck()}setDisabledState(t){this.disabled=t,this.cd.markForCheck()}static \u0275fac=function(i){return new(i||e)(G(Ro))};static \u0275cmp=it({type:e,selectors:[["p-triStateCheckbox"]],contentQueries:function(i,r,o){if(1&i&&Er(o,Bo,4),2&i){let s;Ct(s=xt())&&(r.templates=s)}},hostAttrs:[1,"p-element"],inputs:{disabled:"disabled",name:"name",ariaLabelledBy:"ariaLabelledBy",tabindex:"tabindex",inputId:"inputId",style:"style",styleClass:"styleClass",label:"label",readonly:"readonly",checkboxTrueIcon:"checkboxTrueIcon",checkboxFalseIcon:"checkboxFalseIcon"},outputs:{onChange:"onChange"},features:[Gt([tlt])],decls:8,vars:22,consts:[[3,"ngStyle","ngClass"],[1,"p-hidden-accessible"],["type","text","inputmode","none",3,"name","readonly","disabled","keyup","keydown","focus","blur"],["input",""],["role","checkbox",1,"p-checkbox-box",3,"ngClass","click"],[4,"ngIf"],["class","p-checkbox-label",3,"ngClass","click",4,"ngIf"],["class","p-checkbox-icon",3,"ngClass",4,"ngIf"],[1,"p-checkbox-icon",3,"ngClass"],[3,"styleClass",4,"ngIf"],["class","p-checkbox-icon",4,"ngIf"],[3,"styleClass"],[1,"p-checkbox-icon"],[4,"ngTemplateOutlet"],[1,"p-checkbox-label",3,"ngClass","click"]],template:function(i,r){if(1&i){const o=ft();q(0,"div",0)(1,"div",1)(2,"input",2,3),we("keyup",function(a){return r.onKeyup(a)})("keydown",function(a){return r.onKeydown(a)})("focus",function(){return r.onFocus()})("blur",function(){return r.onBlur()}),W()(),q(4,"div",4),we("click",function(a){J(o);const l=Xi(3);return ee(r.onClick(a,l))}),B(5,Hat,3,2,"ng-container",5),B(6,Xat,3,2,"ng-container",5),W()(),B(7,Zat,2,7,"label",6)}2&i&&(Xe(r.styleClass),k("ngStyle",r.style)("ngClass",jn(15,Jat,r.disabled,r.focused)),$(2),k("name",r.name)("readonly",r.readonly)("disabled",r.disabled),ve("id",r.inputId)("tabindex",r.tabindex)("aria-labelledby",r.ariaLabelledBy),$(2),k("ngClass",hu(18,elt,null!=r.value,r.disabled,r.focused)),ve("aria-checked",!0===r.value),$(1),k("ngIf",!0===r.value),$(1),k("ngIf",!1===r.value),$(1),k("ngIf",r.label))},dependencies:function(){return[_s,No,Po,ys,r9,ol]},encapsulation:2,changeDetection:0})}return e})(),ilt=(()=>{class e{static \u0275fac=function(i){return new(i||e)};static \u0275mod=Ut({type:e});static \u0275inj=Nt({imports:[ti,kn,r9,ol,kn]})}return e})(),rlt=(()=>{class e extends En{pathId;ngOnInit(){this.pathId="url(#"+Mr()+")"}static \u0275fac=function(){let t;return function(r){return(t||(t=dt(e)))(r||e)}}();static \u0275cmp=it({type:e,selectors:[["ArrowDownIcon"]],standalone:!0,features:[qe,cn],decls:6,vars:7,consts:[["width","14","height","14","viewBox","0 0 14 14","fill","none","xmlns","http://www.w3.org/2000/svg"],["fill-rule","evenodd","clip-rule","evenodd","d","M6.99994 14C6.91097 14.0004 6.82281 13.983 6.74064 13.9489C6.65843 13.9148 6.58387 13.8646 6.52133 13.8013L1.10198 8.38193C0.982318 8.25351 0.917175 8.08367 0.920272 7.90817C0.923368 7.73267 0.994462 7.56523 1.11858 7.44111C1.24269 7.317 1.41014 7.2459 1.58563 7.2428C1.76113 7.23971 1.93098 7.30485 2.0594 7.42451L6.32263 11.6877V0.677419C6.32263 0.497756 6.394 0.325452 6.52104 0.198411C6.64808 0.0713706 6.82039 0 7.00005 0C7.17971 0 7.35202 0.0713706 7.47906 0.198411C7.6061 0.325452 7.67747 0.497756 7.67747 0.677419V11.6877L11.9407 7.42451C12.0691 7.30485 12.2389 7.23971 12.4144 7.2428C12.5899 7.2459 12.7574 7.317 12.8815 7.44111C13.0056 7.56523 13.0767 7.73267 13.0798 7.90817C13.0829 8.08367 13.0178 8.25351 12.8981 8.38193L7.47875 13.8013C7.41621 13.8646 7.34164 13.9148 7.25944 13.9489C7.17727 13.983 7.08912 14.0004 7.00015 14C7.00012 14 7.00009 14 7.00005 14C7.00001 14 6.99998 14 6.99994 14Z","fill","currentColor"],[3,"id"],["width","14","height","14","fill","white"]],template:function(i,r){1&i&&(yn(),q(0,"svg",0)(1,"g"),_e(2,"path",1),W(),q(3,"defs")(4,"clipPath",2),_e(5,"rect",3),W()()()),2&i&&(Xe(r.getClassNames()),ve("aria-label",r.ariaLabel)("aria-hidden",r.ariaHidden)("role",r.role),$(1),ve("clip-path",r.pathId),$(3),k("id",r.pathId))},encapsulation:2})}return e})(),olt=(()=>{class e extends En{pathId;ngOnInit(){this.pathId="url(#"+Mr()+")"}static \u0275fac=function(){let t;return function(r){return(t||(t=dt(e)))(r||e)}}();static \u0275cmp=it({type:e,selectors:[["ArrowUpIcon"]],standalone:!0,features:[qe,cn],decls:6,vars:7,consts:[["width","14","height","14","viewBox","0 0 14 14","fill","none","xmlns","http://www.w3.org/2000/svg"],["fill-rule","evenodd","clip-rule","evenodd","d","M6.51551 13.799C6.64205 13.9255 6.813 13.9977 6.99193 14C7.17087 13.9977 7.34182 13.9255 7.46835 13.799C7.59489 13.6725 7.66701 13.5015 7.66935 13.3226V2.31233L11.9326 6.57554C11.9951 6.63887 12.0697 6.68907 12.1519 6.72319C12.2341 6.75731 12.3223 6.77467 12.4113 6.77425C12.5003 6.77467 12.5885 6.75731 12.6707 6.72319C12.7529 6.68907 12.8274 6.63887 12.89 6.57554C13.0168 6.44853 13.0881 6.27635 13.0881 6.09683C13.0881 5.91732 13.0168 5.74514 12.89 5.61812L7.48846 0.216594C7.48274 0.210436 7.4769 0.204374 7.47094 0.198411C7.3439 0.0713707 7.1716 0 6.99193 0C6.81227 0 6.63997 0.0713707 6.51293 0.198411C6.50704 0.204296 6.50128 0.210278 6.49563 0.216354L1.09386 5.61812C0.974201 5.74654 0.909057 5.91639 0.912154 6.09189C0.91525 6.26738 0.986345 6.43483 1.11046 6.55894C1.23457 6.68306 1.40202 6.75415 1.57752 6.75725C1.75302 6.76035 1.92286 6.6952 2.05128 6.57554L6.31451 2.31231V13.3226C6.31685 13.5015 6.38898 13.6725 6.51551 13.799Z","fill","currentColor"],[3,"id"],["width","14","height","14","fill","white"]],template:function(i,r){1&i&&(yn(),q(0,"svg",0)(1,"g"),_e(2,"path",1),W(),q(3,"defs")(4,"clipPath",2),_e(5,"rect",3),W()()()),2&i&&(Xe(r.getClassNames()),ve("aria-label",r.ariaLabel)("aria-hidden",r.ariaHidden)("role",r.role),$(1),ve("clip-path",r.pathId),$(3),k("id",r.pathId))},encapsulation:2})}return e})(),slt=(()=>{class e extends En{pathId;ngOnInit(){this.pathId="url(#"+Mr()+")"}static \u0275fac=function(){let t;return function(r){return(t||(t=dt(e)))(r||e)}}();static \u0275cmp=it({type:e,selectors:[["FilterIcon"]],standalone:!0,features:[qe,cn],decls:6,vars:7,consts:[["width","14","height","14","viewBox","0 0 14 14","fill","none","xmlns","http://www.w3.org/2000/svg"],["d","M8.64708 14H5.35296C5.18981 13.9979 5.03395 13.9321 4.91858 13.8167C4.8032 13.7014 4.73745 13.5455 4.73531 13.3824V7L0.329431 0.98C0.259794 0.889466 0.217389 0.780968 0.20718 0.667208C0.19697 0.553448 0.219379 0.439133 0.271783 0.337647C0.324282 0.236453 0.403423 0.151519 0.500663 0.0920138C0.597903 0.0325088 0.709548 0.000692754 0.823548 0H13.1765C13.2905 0.000692754 13.4021 0.0325088 13.4994 0.0920138C13.5966 0.151519 13.6758 0.236453 13.7283 0.337647C13.7807 0.439133 13.8031 0.553448 13.7929 0.667208C13.7826 0.780968 13.7402 0.889466 13.6706 0.98L9.26472 7V13.3824C9.26259 13.5455 9.19683 13.7014 9.08146 13.8167C8.96609 13.9321 8.81022 13.9979 8.64708 14ZM5.97061 12.7647H8.02943V6.79412C8.02878 6.66289 8.07229 6.53527 8.15296 6.43177L11.9412 1.23529H2.05884L5.86355 6.43177C5.94422 6.53527 5.98773 6.66289 5.98708 6.79412L5.97061 12.7647Z","fill","currentColor"],[3,"id"],["width","14","height","14","fill","white"]],template:function(i,r){1&i&&(yn(),q(0,"svg",0)(1,"g"),_e(2,"path",1),W(),q(3,"defs")(4,"clipPath",2),_e(5,"rect",3),W()()()),2&i&&(Xe(r.getClassNames()),ve("aria-label",r.ariaLabel)("aria-hidden",r.ariaHidden)("role",r.role),$(1),ve("clip-path",r.pathId),$(3),k("id",r.pathId))},encapsulation:2})}return e})(),alt=(()=>{class e extends En{pathId;ngOnInit(){this.pathId="url(#"+Mr()+")"}static \u0275fac=function(){let t;return function(r){return(t||(t=dt(e)))(r||e)}}();static \u0275cmp=it({type:e,selectors:[["SortAltIcon"]],standalone:!0,features:[qe,cn],decls:9,vars:7,consts:[["width","14","height","14","viewBox","0 0 14 14","fill","none","xmlns","http://www.w3.org/2000/svg"],["d","M5.64515 3.61291C5.47353 3.61291 5.30192 3.54968 5.16644 3.4142L3.38708 1.63484L1.60773 3.4142C1.34579 3.67613 0.912244 3.67613 0.650309 3.4142C0.388374 3.15226 0.388374 2.71871 0.650309 2.45678L2.90837 0.198712C3.17031 -0.0632236 3.60386 -0.0632236 3.86579 0.198712L6.12386 2.45678C6.38579 2.71871 6.38579 3.15226 6.12386 3.4142C5.98837 3.54968 5.81676 3.61291 5.64515 3.61291Z","fill","currentColor"],["d","M3.38714 14C3.01681 14 2.70972 13.6929 2.70972 13.3226V0.677419C2.70972 0.307097 3.01681 0 3.38714 0C3.75746 0 4.06456 0.307097 4.06456 0.677419V13.3226C4.06456 13.6929 3.75746 14 3.38714 14Z","fill","currentColor"],["d","M10.6129 14C10.4413 14 10.2697 13.9368 10.1342 13.8013L7.87611 11.5432C7.61418 11.2813 7.61418 10.8477 7.87611 10.5858C8.13805 10.3239 8.5716 10.3239 8.83353 10.5858L10.6129 12.3652L12.3922 10.5858C12.6542 10.3239 13.0877 10.3239 13.3497 10.5858C13.6116 10.8477 13.6116 11.2813 13.3497 11.5432L11.0916 13.8013C10.9561 13.9368 10.7845 14 10.6129 14Z","fill","currentColor"],["d","M10.6129 14C10.2426 14 9.93552 13.6929 9.93552 13.3226V0.677419C9.93552 0.307097 10.2426 0 10.6129 0C10.9833 0 11.2904 0.307097 11.2904 0.677419V13.3226C11.2904 13.6929 10.9832 14 10.6129 14Z","fill","currentColor"],[3,"id"],["width","14","height","14","fill","white"]],template:function(i,r){1&i&&(yn(),q(0,"svg",0)(1,"g"),_e(2,"path",1)(3,"path",2)(4,"path",3)(5,"path",4),W(),q(6,"defs")(7,"clipPath",5),_e(8,"rect",6),W()()()),2&i&&(Xe(r.getClassNames()),ve("aria-label",r.ariaLabel)("aria-hidden",r.ariaHidden)("role",r.role),$(1),ve("clip-path",r.pathId),$(6),k("id",r.pathId))},encapsulation:2})}return e})(),llt=(()=>{class e extends En{pathId;ngOnInit(){this.pathId="url(#"+Mr()+")"}static \u0275fac=function(){let t;return function(r){return(t||(t=dt(e)))(r||e)}}();static \u0275cmp=it({type:e,selectors:[["SortAmountDownIcon"]],standalone:!0,features:[qe,cn],decls:11,vars:7,consts:[["width","14","height","14","viewBox","0 0 14 14","fill","none","xmlns","http://www.w3.org/2000/svg"],["d","M2.59836 13.2009C2.44634 13.2009 2.29432 13.1449 2.1743 13.0248L0.174024 11.0246C-0.0580081 10.7925 -0.0580081 10.4085 0.174024 10.1764C0.406057 9.94441 0.79011 9.94441 1.02214 10.1764L2.59836 11.7527L4.17458 10.1764C4.40662 9.94441 4.79067 9.94441 5.0227 10.1764C5.25473 10.4085 5.25473 10.7925 5.0227 11.0246L3.02242 13.0248C2.90241 13.1449 2.75038 13.2009 2.59836 13.2009Z","fill","currentColor"],["d","M2.59836 13.2009C2.27032 13.2009 1.99833 12.9288 1.99833 12.6008V1.39922C1.99833 1.07117 2.27036 0.799133 2.59841 0.799133C2.92646 0.799133 3.19849 1.07117 3.19849 1.39922V12.6008C3.19849 12.9288 2.92641 13.2009 2.59836 13.2009Z","fill","currentColor"],["d","M13.3999 11.2006H6.99902C6.67098 11.2006 6.39894 10.9285 6.39894 10.6005C6.39894 10.2725 6.67098 10.0004 6.99902 10.0004H13.3999C13.728 10.0004 14 10.2725 14 10.6005C14 10.9285 13.728 11.2006 13.3999 11.2006Z","fill","currentColor"],["d","M10.1995 6.39991H6.99902C6.67098 6.39991 6.39894 6.12788 6.39894 5.79983C6.39894 5.47179 6.67098 5.19975 6.99902 5.19975H10.1995C10.5275 5.19975 10.7996 5.47179 10.7996 5.79983C10.7996 6.12788 10.5275 6.39991 10.1995 6.39991Z","fill","currentColor"],["d","M8.59925 3.99958H6.99902C6.67098 3.99958 6.39894 3.72754 6.39894 3.3995C6.39894 3.07145 6.67098 2.79941 6.99902 2.79941H8.59925C8.92729 2.79941 9.19933 3.07145 9.19933 3.3995C9.19933 3.72754 8.92729 3.99958 8.59925 3.99958Z","fill","currentColor"],["d","M11.7997 8.80025H6.99902C6.67098 8.80025 6.39894 8.52821 6.39894 8.20017C6.39894 7.87212 6.67098 7.60008 6.99902 7.60008H11.7997C12.1277 7.60008 12.3998 7.87212 12.3998 8.20017C12.3998 8.52821 12.1277 8.80025 11.7997 8.80025Z","fill","currentColor"],[3,"id"],["width","14","height","14","fill","white"]],template:function(i,r){1&i&&(yn(),q(0,"svg",0)(1,"g"),_e(2,"path",1)(3,"path",2)(4,"path",3)(5,"path",4)(6,"path",5)(7,"path",6),W(),q(8,"defs")(9,"clipPath",7),_e(10,"rect",8),W()()()),2&i&&(Xe(r.getClassNames()),ve("aria-label",r.ariaLabel)("aria-hidden",r.ariaHidden)("role",r.role),$(1),ve("clip-path",r.pathId),$(8),k("id",r.pathId))},encapsulation:2})}return e})(),clt=(()=>{class e extends En{pathId;ngOnInit(){this.pathId="url(#"+Mr()+")"}static \u0275fac=function(){let t;return function(r){return(t||(t=dt(e)))(r||e)}}();static \u0275cmp=it({type:e,selectors:[["SortAmountUpAltIcon"]],standalone:!0,features:[qe,cn],decls:11,vars:7,consts:[["width","14","height","14","viewBox","0 0 14 14","fill","none","xmlns","http://www.w3.org/2000/svg"],["d","M4.59864 3.99958C4.44662 3.99958 4.2946 3.94357 4.17458 3.82356L2.59836 2.24734L1.02214 3.82356C0.79011 4.05559 0.406057 4.05559 0.174024 3.82356C-0.0580081 3.59152 -0.0580081 3.20747 0.174024 2.97544L2.1743 0.97516C2.40634 0.743127 2.79039 0.743127 3.02242 0.97516L5.0227 2.97544C5.25473 3.20747 5.25473 3.59152 5.0227 3.82356C4.90268 3.94357 4.75066 3.99958 4.59864 3.99958Z","fill","currentColor"],["d","M2.59841 13.2009C2.27036 13.2009 1.99833 12.9288 1.99833 12.6008V1.39922C1.99833 1.07117 2.27036 0.799133 2.59841 0.799133C2.92646 0.799133 3.19849 1.07117 3.19849 1.39922V12.6008C3.19849 12.9288 2.92646 13.2009 2.59841 13.2009Z","fill","currentColor"],["d","M13.3999 11.2006H6.99902C6.67098 11.2006 6.39894 10.9285 6.39894 10.6005C6.39894 10.2725 6.67098 10.0004 6.99902 10.0004H13.3999C13.728 10.0004 14 10.2725 14 10.6005C14 10.9285 13.728 11.2006 13.3999 11.2006Z","fill","currentColor"],["d","M10.1995 6.39991H6.99902C6.67098 6.39991 6.39894 6.12788 6.39894 5.79983C6.39894 5.47179 6.67098 5.19975 6.99902 5.19975H10.1995C10.5275 5.19975 10.7996 5.47179 10.7996 5.79983C10.7996 6.12788 10.5275 6.39991 10.1995 6.39991Z","fill","currentColor"],["d","M8.59925 3.99958H6.99902C6.67098 3.99958 6.39894 3.72754 6.39894 3.3995C6.39894 3.07145 6.67098 2.79941 6.99902 2.79941H8.59925C8.92729 2.79941 9.19933 3.07145 9.19933 3.3995C9.19933 3.72754 8.92729 3.99958 8.59925 3.99958Z","fill","currentColor"],["d","M11.7997 8.80025H6.99902C6.67098 8.80025 6.39894 8.52821 6.39894 8.20017C6.39894 7.87212 6.67098 7.60008 6.99902 7.60008H11.7997C12.1277 7.60008 12.3998 7.87212 12.3998 8.20017C12.3998 8.52821 12.1277 8.80025 11.7997 8.80025Z","fill","currentColor"],[3,"id"],["width","14","height","14","fill","white"]],template:function(i,r){1&i&&(yn(),q(0,"svg",0)(1,"g"),_e(2,"path",1)(3,"path",2)(4,"path",3)(5,"path",4)(6,"path",5)(7,"path",6),W(),q(8,"defs")(9,"clipPath",7),_e(10,"rect",8),W()()()),2&i&&(Xe(r.getClassNames()),ve("aria-label",r.ariaLabel)("aria-hidden",r.ariaHidden)("role",r.role),$(1),ve("clip-path",r.pathId),$(8),k("id",r.pathId))},encapsulation:2})}return e})(),ult=(()=>{class e extends En{pathId;ngOnInit(){this.pathId="url(#"+Mr()+")"}static \u0275fac=function(){let t;return function(r){return(t||(t=dt(e)))(r||e)}}();static \u0275cmp=it({type:e,selectors:[["FilterSlashIcon"]],standalone:!0,features:[qe,cn],decls:6,vars:7,consts:[["width","14","height","14","viewBox","0 0 14 14","fill","none","xmlns","http://www.w3.org/2000/svg"],["fill-rule","evenodd","clip-rule","evenodd","d","M13.4994 0.0920138C13.5967 0.151519 13.6758 0.236453 13.7283 0.337647C13.7807 0.439133 13.8031 0.553448 13.7929 0.667208C13.7827 0.780968 13.7403 0.889466 13.6707 0.98L11.406 4.06823C11.3099 4.19928 11.1656 4.28679 11.005 4.3115C10.8444 4.33621 10.6805 4.2961 10.5495 4.2C10.4184 4.1039 10.3309 3.95967 10.3062 3.79905C10.2815 3.63843 10.3216 3.47458 10.4177 3.34353L11.9412 1.23529H7.41184C7.24803 1.23529 7.09093 1.17022 6.97509 1.05439C6.85926 0.938558 6.79419 0.781457 6.79419 0.617647C6.79419 0.453837 6.85926 0.296736 6.97509 0.180905C7.09093 0.0650733 7.24803 0 7.41184 0H13.1765C13.2905 0.000692754 13.4022 0.0325088 13.4994 0.0920138ZM4.20008 0.181168H4.24126L13.2013 9.03411C13.3169 9.14992 13.3819 9.3069 13.3819 9.47058C13.3819 9.63426 13.3169 9.79124 13.2013 9.90705C13.1445 9.96517 13.0766 10.0112 13.0016 10.0423C12.9266 10.0735 12.846 10.0891 12.7648 10.0882C12.6836 10.0886 12.6032 10.0728 12.5283 10.0417C12.4533 10.0106 12.3853 9.96479 12.3283 9.90705L9.3142 6.92587L9.26479 6.99999V13.3823C9.26265 13.5455 9.19689 13.7014 9.08152 13.8167C8.96615 13.9321 8.81029 13.9979 8.64714 14H5.35302C5.18987 13.9979 5.03401 13.9321 4.91864 13.8167C4.80327 13.7014 4.73751 13.5455 4.73537 13.3823V6.99999L0.329492 1.02117C0.259855 0.930634 0.21745 0.822137 0.207241 0.708376C0.197031 0.594616 0.21944 0.480301 0.271844 0.378815C0.324343 0.277621 0.403484 0.192687 0.500724 0.133182C0.597964 0.073677 0.709609 0.041861 0.823609 0.0411682H3.86243C3.92448 0.0461551 3.9855 0.060022 4.04361 0.0823446C4.10037 0.10735 4.15311 0.140655 4.20008 0.181168ZM8.02949 6.79411C8.02884 6.66289 8.07235 6.53526 8.15302 6.43176L8.42478 6.05293L3.55773 1.23529H2.0589L5.84714 6.43176C5.92781 6.53526 5.97132 6.66289 5.97067 6.79411V12.7647H8.02949V6.79411Z","fill","currentColor"],[3,"id"],["width","14","height","14","fill","white"]],template:function(i,r){1&i&&(yn(),q(0,"svg",0)(1,"g"),_e(2,"path",1),W(),q(3,"defs")(4,"clipPath",2),_e(5,"rect",3),W()()()),2&i&&(Xe(r.getClassNames()),ve("aria-label",r.ariaLabel)("aria-hidden",r.ariaHidden)("role",r.role),$(1),ve("clip-path",r.pathId),$(3),k("id",r.pathId))},encapsulation:2})}return e})(),Tut=(()=>{class e{static \u0275fac=function(i){return new(i||e)};static \u0275mod=Ut({type:e});static \u0275inj=Nt({imports:[ti,Tat,Hue,GT,rC,Bv,Pat,cst,t9,ilt,jT,rlt,olt,HT,alt,clt,llt,r9,slt,ult,kn,jT]})}return e})(),Dut=(()=>{class e{static#e=this.\u0275fac=function(i){return new(i||e)};static#t=this.\u0275mod=Ut({type:e,bootstrap:[grt]});static#n=this.\u0275inj=Nt({imports:[aH,sEe,rC,dSe,hDe,NSe,DW,Tut,Bv,AIe,ant,GT,DW]})}return e})();iCe().bootstrapModule(Dut).catch(e=>console.error(e))},207:d0=>{var Vv=/("(?:[^\\"]|\\.)*")|[:,]/g;d0.exports=function(Hd,js){var Zc,np,Jc;return js=js||{},Zc=JSON.stringify([1],void 0,void 0===js.indent?2:js.indent).slice(2,-3),np=""===Zc?1/0:void 0===js.maxLength?80:js.maxLength,Jc=js.replacer,function ip(Oi,jd,f0){var qd,Co,Kl,Wd,Gd,Kd,xo,eu,en,Yd,qs,Xd;if(Oi&&"function"==typeof Oi.toJSON&&(Oi=Oi.toJSON()),void 0===(qs=JSON.stringify(Oi,Jc)))return qs;if(qs.length<=(xo=np-jd.length-f0)&&(en=qs.replace(Vv,function(mr,zv){return zv||mr+" "})).length<=xo)return en;if(null!=Jc&&(Oi=JSON.parse(qs),Jc=void 0),"object"==typeof Oi&&null!==Oi){if(eu=jd+Zc,Kl=[],Co=0,Array.isArray(Oi))for(Yd="[",qd="]",xo=Oi.length;Co<xo;Co++)Kl.push(ip(Oi[Co],eu,Co===xo-1?0:1)||"null");else for(Yd="{",qd="}",xo=(Kd=Object.keys(Oi)).length;Co<xo;Co++)Wd=Kd[Co],Gd=JSON.stringify(Wd)+": ",void 0!==(Xd=ip(Oi[Wd],eu,Gd.length+(Co===xo-1?0:1)))&&Kl.push(Gd+Xd);if(Kl.length>0)return[Yd,Zc+Kl.join(",\n"+eu),qd].join("\n"+jd)}return qs}(Hd,"",0)}}},d0=>{d0(d0.s=950)}]);